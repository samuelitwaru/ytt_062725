function IsQueryObjectPreview(){return void 0!=window.external&&void 0!=window.external.SendText}function IsDashboardEdit(){return"undefined"!==typeof UCDashboardForEditor}function UpdateQueryObjectPreview(a){for(var c=Object.keys(qv.collection)[0],c=qv.collection[c],a=JSON.parse(a),d=Object.keys(a),b=0;b<d.length;b++){var f=d[b];c[f]=a[f]}c.realShow()}
var HIGHCHARTS_COLOR_PREFIX="highcharts-color-",HIGHCHARTS_MAX_COLORS=36,HIGHCHARTS_CUSTOM_COLOR=[],qv={collection:{},fadeTimeouts:{}},QueryViewerVisible={Always:"Always",Yes:"Yes",No:"No",Never:"Never"},QueryViewerElementType={Axis:"Axis",Datum:"Datum"},QueryViewerAxisType={Rows:"Rows",Columns:"Columns",Pages:"Pages"},QueryViewerFilterType={ShowAllValues:"ShowAllValues",HideAllValues:"HideAllValues",ShowSomeValues:"ShowSomeValues"},QueryViewerAxisOrderType={None:"None",Ascending:"Ascending",Descending:"Descending",
Custom:"Custom"},QueryViewerExpandCollapseType={ExpandAllValues:"ExpandAllValues",CollapseAllValues:"CollapseAllValues",ExpandSomeValues:"ExpandSomeValues"},QueryViewerDataType={Integer:"integer",Real:"real",Character:"character",Boolean:"boolean",Date:"date",DateTime:"datetime",GUID:"guid",GeoPoint:"geopoint"},QueryViewerAggregationType={Sum:"Sum",Average:"Average",Count:"Count",Max:"Max",Min:"Min"},QueryViewerOutputType={Card:"Card",Chart:"Chart",PivotTable:"PivotTable",Table:"Table",Map:"Map",
Default:"Default"},QueryViewerMapType={Choropleth:"Choropleth",Bubble:"Bubble"},QueryViewerRegion={Country:"Country",Continent:"Continent",World:"World"},QueryViewerContinent={SouthAmerica:"SouthAmerica",NorthAmerica:"NorthAmerica",Africa:"Africa",Asia:"Asia",Europe:"Europe",Oceania:"Oceania",Antarctica:"Antarctica"},QueryViewerCountry={AF:"AF",AL:"AL",DZ:"DZ",AD:"AD",AO:"AO",AI:"AI",AG:"AG",AR:"AR",AM:"AM",AU:"AU",AT:"AT",AZ:"AZ",BH:"BH",BD:"BD",BB:"BB",BY:"BY",BE:"BE",BZ:"BZ",BJ:"BJ",BM:"BM",BT:"BT",
BO:"BO",BA:"BA",BW:"BW",BR:"BR",VG:"VG",BN:"BN",BG:"BG",BF:"BF",BI:"BI",KH:"KH",CM:"CM",CA:"CA",CV:"CV",CF:"CF",TD:"TD",CL:"CL",CN:"CN",CO:"CO",KM:"KM",CK:"CK",CR:"CR",HR:"HR",CU:"CU",CY:"CY",CZ:"CZ",CD:"CD",DK:"DK",DJ:"DJ",DM:"DM",DO:"DO",TL:"TL",EC:"EC",EG:"EG",SV:"SV",GQ:"GQ",ER:"ER",EE:"EE",SZ:"SZ",ET:"ET",FO:"FO",FJ:"FJ",FI:"FI",FR:"FR",GA:"GA",GM:"GM",GE:"GE",DE:"DE",GH:"GH",GR:"GR",GL:"GL",GD:"GD",GT:"GT",GN:"GN",GW:"GW",GY:"GY",HT:"HT",HN:"HN",HU:"HU",IS:"IS",IN:"IN",ID:"ID",IR:"IR",IQ:"IQ",
IE:"IE",IL:"IL",IT:"IT",CI:"CI",JM:"JM",JP:"JP",JO:"JO",KZ:"KZ",KE:"KE",KI:"KI",XK:"XK",KW:"KW",KG:"KG",LA:"LA",LV:"LV",LB:"LB",LS:"LS",LR:"LR",LY:"LY",LI:"LI",LT:"LT",LU:"LU",MG:"MG",MW:"MW",MY:"MY",MV:"MV",ML:"ML",MT:"MT",MH:"MH",MR:"MR",MU:"MU",MX:"MX",FM:"FM",MD:"MD",MC:"MC",MN:"MN",ME:"ME",MA:"MA",MZ:"MZ",MM:"MM",NA:"NA",NR:"NR",NP:"NP",NL:"NL",NZ:"NZ",NI:"NI",NE:"NE",NG:"NG",KP:"KP",MK:"MK",NO:"NO",OM:"OM",PK:"PK",PW:"PW",PA:"PA",PS:"PS",PG:"PG",PY:"PY",PE:"PE",PH:"PH",PL:"PL",PT:"PT",PR:"PR",
QA:"QA",CG:"CG",RO:"RO",RU:"RU",RW:"RW",KN:"KN",LC:"LC",VC:"VC",WS:"WS",SM:"SM",ST:"ST",SA:"SA",SN:"SN",RS:"RS",SC:"SC",SL:"SL",SG:"SG",SK:"SK",SI:"SI",SB:"SB",SO:"SO",ZA:"ZA",KR:"KR",SS:"SS",ES:"ES",LK:"LK",SD:"SD",SR:"SR",SE:"SE",CH:"CH",SY:"SY",TW:"TW",TJ:"TJ",TZ:"TZ",TH:"TH",BS:"BS",TG:"TG",TK:"TK",TO:"TO",TT:"TT",TN:"TN",TR:"TR",TM:"TM",TV:"TV",UG:"UG",UA:"UA",AE:"AE",GB:"GB",US:"US",UY:"UY",UZ:"UZ",VU:"VU",VA:"VA",VE:"VE",VN:"VN",EH:"EH",YE:"YE",ZM:"ZM",ZW:"ZW"},QueryViewerMapLibrary={Highcharts:"Highcharts",
ECharts:"ECharts"},QueryViewerChartType={Column:"Column",Column3D:"Column3D",StackedColumn:"StackedColumn",StackedColumn3D:"StackedColumn3D",StackedColumn100:"StackedColumn100",Bar:"Bar",StackedBar:"StackedBar",StackedBar100:"StackedBar100",Area:"Area",StackedArea:"StackedArea",StackedArea100:"StackedArea100",SmoothArea:"SmoothArea",StepArea:"StepArea",Line:"Line",StackedLine:"StackedLine",StackedLine100:"StackedLine100",SmoothLine:"SmoothLine",StepLine:"StepLine",Pie:"Pie",Pie3D:"Pie3D",Doughnut:"Doughnut",
Doughnut3D:"Doughnut3D",LinearGauge:"LinearGauge",CircularGauge:"CircularGauge",Radar:"Radar",FilledRadar:"FilledRadar",PolarArea:"PolarArea",Funnel:"Funnel",Pyramid:"Pyramid",ColumnLine:"ColumnLine",Column3DLine:"Column3DLine",Timeline:"Timeline",SmoothTimeline:"SmoothTimeline",StepTimeline:"StepTimeline",Sparkline:"Sparkline"},QueryViewerConditionOperator={Equal:"EQ",LessThan:"LT",GreaterThan:"GT",LessOrEqual:"LE",GreaterOrEqual:"GE",NotEqual:"NE",Interval:"IN"},QueryViewerConditionOperatorSymbol=
{Equal:"=",LessThan:"<",GreaterThan:">",LessOrEqual:"≤",GreaterOrEqual:"≥",NotEqual:"<>",Interval:"-"},QueryViewerOrientation={Horizontal:"Horizontal",Vertical:"Vertical"},QueryViewerPlotSeries={InTheSameChart:"InTheSameChart",InSeparateCharts:"InSeparateCharts"},QueryViewerShowDataAs={Values:"Values",Percentages:"Percentages",ValuesAndPercentages:"ValuesAndPercentages"},QueryViewerSubtotals={Yes:"Yes",Hidden:"Hidden",No:"No"},QueryViewerTrendPeriod={SinceTheBeginning:"SinceTheBeginning",LastYear:"LastYear",
LastSemester:"LastSemester",LastQuarter:"LastQuarter",LastMonth:"LastMonth",LastWeek:"LastWeek",LastDay:"LastDay",LastHour:"LastHour",LastMinute:"LastMinute",LastSecond:"LastSecond"},QueryViewerXAxisLabels={Horizontally:"Horizontally",Rotated30:"Rotated30",Rotated45:"Rotated45",Rotated60:"Rotated60",Vertically:"Vertically"},QueryViewerAutoresizeType={Both:"Both",Vertical:"Vertical",Horizontal:"Horizontal"},QueryViewerTranslationType={NoTranslation:"None",Static:"Static",RunTime:"RunTime"},QueryViewerParentPanel=
{Default:"Default",QueryPreview:"QueryPreview",DashboardEditor:"DashboardEditor",MobileWrapper:"MobileWrapper"};
qv.util={color:{getHtmlColor:function(a){return"string"==typeof a||"number"==typeof a?gx.color.toHex?-1==a?"":"#"+gx.color.toHex(a):"#"+gxToHex(a):void 0==a?"#000000":a.Html},parseCSSColor:function(a){return"rgb"==a.substring(0,3)?(a=a.replace("rgb","").replace("(","").replace(")","").split(","),this.getHtmlColor(gx.color.rgb(parseInt(a[0]),parseInt(a[1]),parseInt(a[2])))):a},convertValueToColor:function(a){a=-1==a.indexOf("#")?"#"+a:a;for(a=a.substring(1,a.length);6>a.length;)a="0"+a;return"#"+a},
IsHexaColor:function(a){return 6===a.length&&!isNaN(parseInt(a,16))},lightenDarkenColor:function(a,c){var d=!1;"#"==a[0]&&(a=a.slice(1),d=!0);var b=parseInt(a,16),f=(b>>16)+c;255<f?f=255:0>f&&(f=0);var q=(b>>8&255)+c;255<q?q=255:0>q&&(q=0);b=(b&255)+c;255<b?b=255:0>b&&(b=0);return(d?"#":"")+(b|q<<8|f<<16).toString(16)},standardize_color:function(a){var c=document.createElement("canvas").getContext("2d");c.fillStyle=a;return c.fillStyle},resolveColor:function(a,c){qv.util.startsWith(a,"#")||(a=qv.util.color.standardize_color(a));
if(!c||"1"==c)return a;var d=parseInt(a.substring(1),16);return"rgba("+(d>>16&255)+","+(d>>8&255)+","+(d&255)+","+c+")"}},css:function(){var a={};return{replaceCssClasses:function(c){for(;0<=(posIni=c.indexOf("gxpl_cssReplace("));){posFin=c.indexOf(")",posIni);className=c.substring(posIni+16,posFin);var d=className;if(void 0!=a[d])style=a[d];else{for(var b=d,f=void 0,q=gx.theme+".css",o=!1,k=void 0,n=0;n<document.styleSheets.length;n++)if(null!=document.styleSheets[n].href&&0<=document.styleSheets[n].href.indexOf(q)){o=
!0;f=document.styleSheets[n];break}o&&(f.cssRules?crossRules=f.cssRules:f.rules&&(crossRules=f.rules));f=Number.MAX_SAFE_INTEGER;for(n=0;n<crossRules.length;n++)q=crossRules[n],void 0!=q.selectorText&&(0==q.selectorText.toLowerCase().indexOf("."+b.toLowerCase())&&q.selectorText.length<f)&&(k=q.style,f=q.selectorText.length);styleObj=k;void 0!=styleObj?(b=styleObj,k="",""!=b.color&&(k+=(""==k?"":";")+"color:"+qv.util.color.parseCSSColor(b.color)),""!=b.backgroundColor&&(k+=(""==k?"":";")+"backgroundColor:"+
qv.util.color.parseCSSColor(b.backgroundColor)),""!=b.borderStyle&&(k+=(""==k?"":";")+"borderStyle:"+b.borderStyle),""!=b.borderWidth&&(k+=(""==k?"":";")+"borderThickness:"+b.borderWidth.replace("pt","").replace("px","")),""!=b.borderColor&&(k+=(""==k?"":";")+"borderColor:"+qv.util.color.parseCSSColor(b.borderColor)),""!=b.fontFamily&&(k+=(""==k?"":";")+"fontFamily:"+b.fontFamily.replace(/"/g,"").replace(/'/g,"")),""!=b.fontSize&&(k+=(""==k?"":";")+"fontSize:"+b.fontSize.replace("pt","").replace("px",
"")),""!=b.fontWeight&&(k+=(""==k?"":";")+"fontWeight:"+b.fontWeight),""!=b.fontStyle&&(k+=(""==k?"":";")+"fontStyle:"+b.fontStyle),""!=b.textDecoration&&(k+=(""==k?"":";")+"textDecoration:"+b.textDecoration),styleTransformed=k,style=a[d]=styleTransformed):style=""}toReplace=c.substring(posIni,posFin+1);c=c.replace(toReplace,style)}return c},parseStyle:function(a){var d="";if(""!=a&&void 0!=a){if(0>a.indexOf(":"))return a;for(var a=a.split(";"),b=0;b<a.length;b++)var f=a[b].split(":"),q=f[0],d=d+
((""==d?"":",")+'"'+("borderThickness"==q?"borderWidth":q)+'":"'+f[1]+("borderThickness"==q||"fontSize"==q?"px":"")+'"');return"{"+d+"}"}return"{}"},resolveVariable:function(a){return qv.util.startsWith(a,"var(")&&qv.util.endsWith(a,")")?(a=a.substr(4,a.length-5),qv.util.trim(getComputedStyle(document.documentElement).getPropertyValue(a.toLowerCase()))):a}}}(),autorefresh:function(){return{UpdateLayoutSameGroup:function(a,c,d){function b(a,b){function f(a,h){for(var b=0;b<a.Metadata.Parameters.length;b++){var e=
a.Metadata.Parameters[b];if(e.IsCollection&&e.Name==h)return[b,e]}return[null,null]}function c(a,h){for(var b=null,e=0;e<a.Parameters.length;e++)if(a.Parameters[e].Name==h){b=a.Parameters[e];break}return b}function m(a,h){for(var e="",b="I"==h.Type||"R"==h.Type||"B"==h.Type?"":'"',f=0;f<a.Filter.Values.length;f++)e+=(""==e?"":",")+b+a.Filter.Values[f]+b;return"["+e+"]"}var h=[];a._parametersCloned||(a._parametersCloned=!0,a.Parameters=qv.util.cloneObject(a.Parameters));for(var r=qv.util.GetOrderedElementsKeys(a,
b),g=a.GetMetadata(),d=0;d<r.length;d++){var B=parseInt(r[d].substr(6,4));sourceElement=b[B];var e=f(a,sourceElement.Name),B=e[0],e=e[1],l=qv.util.GetElementInCollection(g,"Name",sourceElement.Name),y=null!=l,C=!y;y&&(qv.util.MergeFields(sourceElement,l),h.push(l));C&&null!=e&&(e=m(sourceElement,e),a.Object?(l=eval(a.Object),l[B+2]=e,a.Object=JSON.stringify(l)):(B=c(a,sourceElement.Name),null==B&&(B={},B.Name=sourceElement.Name,a.Parameters.push(B)),B.Value=e))}a.Axes=h}function f(a,f,c){b(a,f);a.RememberLayout=
!1;a.AllowElementsOrderChange=c;qv.util.autorefresh.SaveAxesAndParametersState(a);a._Autorefreshing=!0;a.realShow()}if(void 0!=a.AutoRefreshGroup&&null!=a.AutoRefreshGroup&&""!=a.AutoRefreshGroup&&""!=qv.util.trim(a.AutoRefreshGroup))for(index in qv.util.autorefresh.DeleteAxesAndParametersState(a),qv.collection)qViewerOther=qv.collection[index],qv.services.IsObjectSet(qViewerOther)&&qViewerOther.userControlId()!=a.userControlId()&&a.AutoRefreshGroup==qViewerOther.AutoRefreshGroup&&(void 0!=qViewerOther.Metadata&&
void 0!=qViewerOther.Metadata.Parameters?f(qViewerOther,c,d):qViewerOther.getQueryParameters(function(a,b){var k=qv.util.dom.xmlDocument(a),k=qv.util.dom.getSingleElementByTagName(k,"gxpl_ParameterCollection");void 0==b.Metadata&&(b.Metadata={});b.Metadata.Parameters=[];for(var k=qv.util.dom.getMultipleElementsByTagName(k,"gxpl_Parameter"),n=0;n<k.length;n++){var m={};m.Name=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[n],"Name"));m.Type=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[n],
"Type"));m.IsCollection=gx.lang.gxBoolean(qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[n],"IsCollection")));b.Metadata.Parameters.push(m)}f(b,c,d)}))},LoadAxesAndParametersState:function(a){function c(a,b){for(var c=0;c<b.length;c++){var k=b[c],d;a:{d=a;for(var m=k.Name,h=0;h<d.length;h++)if(d[h].Name.toLowerCase()==m.toLowerCase()){d=d[h];break a}d=null}null!=d&&Object.assign(d,k)}return a}var d=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",
b=d+"Axes",d=qv.util.storage.getItem(d+"Parameters"),b=qv.util.storage.getItem(b);null!=d&&""!=d&&(a.Parameters=c(JSON.parse(d),a.Parameters),a.RememberLayout=!1);null!=b&&""!=b&&(a.Axes=c(JSON.parse(b),a.Axes),a.RememberLayout=!1)},SaveAxesAndParametersState:function(a){var c=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",d=c+"Axes";qv.util.storage.setItem(c+"Parameters",JSON.stringify(a.Parameters));qv.util.storage.setItem(d,JSON.stringify(a.Axes))},DeleteAxesAndParametersState:function(a){var a=
window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",c=a+"Axes";qv.util.storage.removeItem(a+"Parameters");qv.util.storage.removeItem(c)}}}(),dom:{getSingleElementByTagName:function(a,c){var d;d=this.getMultipleElementsByTagName(a,c);return 0<d.length?d[0]:null},getMultipleElementsByTagName:function(a,c){return!gx.util.browser.isIE()||12<=gx.util.browser.ieVersion()?a.getElementsByTagName(c):a.selectNodes(c)},getBooleanAttribute:function(a,c,d){a=a.getAttribute(c);return null==
a?d:"true"==a.toLowerCase()},getCharacterAttribute:function(a,c,d){a=a.getAttribute(c);return null==a?d:a},getValueNode:function(a){return null==a||void 0==a?null:null!=a.firstChild&&void 0!=a.firstChild?a.firstChild.nodeValue:null},selectXPathNode:function(a,c){var d;a.evaluate?(d=a.evaluate(c,a,null,XPathResult.ANY_TYPE,null),d=d.iterateNext()):(d=a.selectNodes(c),d=0<d.length?d[0]:null);return d},xmlDocument:function(a){var c;!gx.util.browser.isIE()||12<=gx.util.browser.ieVersion()?(parser=new DOMParser,
c=parser.parseFromString(a,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a));return c},getEmptyContainer:function(a){for(a=a.getContainerControl();a.firstChild;)a.removeChild(a.firstChild);return a},setStyle:function(a,c){for(key in c)a.style[key]=c[key]},createText:function(a,c){var d=document.createTextNode(c);a.appendChild(d);return d},createElement:function(a,c,d,b,f,q,o){c=document.createElement(c);""!=d&&(c.id=d);""!=b&&(c.className=b);qv.util.dom.setStyle(c,
f);"function"==typeof q&&(c.onclick=q);""!=o&&qv.util.dom.createText(c,o);null!=a&&a.appendChild(c);return c},createTable:function(a,c,d){a=qv.util.dom.createElement(a,"TABLE","",c,d,null,"");c=document.createElement("TBODY");a.appendChild(c);return c},createRow:function(a){return qv.util.dom.createElement(a,"TR","","",{},null,"")},createCell:function(a,c,d,b,f){a=qv.util.dom.createElement(a,"TD","","",b,null,f);1!=c&&(a.colSpan=c);""!=d&&(a.align=d);return a},createSpan:function(a,c,d,b,f,q,o){a=
qv.util.dom.createElement(a,"SPAN",c,d,f,q,o);""!=b&&(a.title=b);return a},createDiv:function(a,c,d,b,f,q){a=qv.util.dom.createElement(a,"DIV",c,d,f,null,q);""!=b&&(a.title=b);return a},createAnchor:function(a,c,d,b){return qv.util.dom.createElement(a,"A",c,"",d,null,b)},createInput:function(a,c,d,b){a=qv.util.dom.createElement(a,"INPUT",c,"",b,null,"");""!=d&&(a.type=d);return a},createSelect:function(a,c){return qv.util.dom.createElement(a,"SELECT",c,"",{},null,"")},createOption:function(a,c,d,
b){a=qv.util.dom.createElement(a,"OPTION","","",{},null,b);""!=c&&(a.value=c);d&&(a.selected=!0);return a},createIcon:function(a,c,d,b){a=qv.util.dom.createElement(a,"I","","material-icons",d,null,b);""!=c&&(a.title=c);return a},loadStylesAndScripts:function(a,c,d,b){function f(a,b,f,h){qv.util.dom._loadedStyles=qv.util.dom._loadedStyles||[];if(0>qv.util.dom._loadedStyles.indexOf(a))if(qv.util.dom._loadedStyles.push(a),a=qv.services.url.getStaticDirectory()+a,gx.O.DSO){var c=document.createElement("style");
c.setAttribute("data-gx-href",a);c.innerHTML='@import url("'+a+'") layer('+b+")";"function"===typeof h&&(c.onload=h);$(c).insertBefore(f)}else b=document.createElement("link"),b.type="text/css",b.rel="stylesheet",b.href=a,"function"===typeof h&&(b.onload=h),$(b).insertBefore(f);else h()}function q(a,b,c,h,r){"undefined"===typeof r&&(r=0);if(r>=a.length){var g=qv.services.url.getStaticDirectory();gx.http.loadScripts(c.map(function(a){return g+a}),h)}else f(a[r],o,b,function(a,h,e){q(a,b,c,h,e+1)}.closure(this,
[a,h,r]))}var o=a[0].replace(/\//g,"_").replace(/\./g,"_");f(a[0],o,gx.getThemeElement(),function(b,f){var c=qv.util.GetLinkOrStyleElement(a[0]),h=a.slice(1).concat(b);q(h,c,d,f)}.closure(this,[c,b]))}},storage:function(){function a(a,d,b){if(b){var f=new Date;f.setTime(f.getTime()+864E5*b);b="; expires="+f.toGMTString()}else b="";document.cookie=a+"="+d+b+"; path=/"}return{setItem:function(c,d){localStorage?localStorage.setItem(c,d):a(c,d,365)},getItem:function(a){if(localStorage)return localStorage.getItem(a);
a:{for(var a=a+"=",d=document.cookie.split(";"),b=0;b<d.length;b++){for(var f=d[b];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a)){a=f.substring(a.length,f.length);break a}}a=null}return a},removeItem:function(c){localStorage?localStorage.removeItem(c):a(c,"",-1)}}}(),ExecuteTracker:function(a,c){for(var d=[],b=0;b<gx.fx.ctx.trackers.length;b++)gx.fx.ctx.trackers[b].types[0]==a&&(d[d.length]=gx.fx.ctx.trackers[b]);for(b=0;b<d.length;b++){var f=gx.O;gx.O=d[b].obj;var q=gx.csv.cmpCtx;
gx.csv.cmpCtx=d[b].obj.CmpContext;gx.evt.setProcessing(!1);d[b].hdl.call(d[b].obj,null,null,c);gx.O=f;gx.csv.cmpCtx=q}},satisfyStyle:function(a,c){switch(c.Operator){case QueryViewerConditionOperator.Equal:return a==c.Value1;case QueryViewerConditionOperator.GreaterThan:return a>c.Value1;case QueryViewerConditionOperator.LessThan:return a<c.Value1;case QueryViewerConditionOperator.GreaterOrEqual:return a>=c.Value1;case QueryViewerConditionOperator.LessOrEqual:return a<=c.Value1;case QueryViewerConditionOperator.NotEqual:return a!=
c.Value1;case QueryViewerConditionOperator.Interval:return a>=c.Value1&&a<=c.Value2}},isGeneXusPreview:function(){return IsQueryObjectPreview()},getGenerator:function(){return gx.gen.isDotNet()?"C#":gx.gen.isJava()?"Java":""},getErrorFromText:function(a){return'<Result OK="True"></Result>'==a?"":a.replace('<Result OK="False"><Dsc>',"").replace("</Dsc></Result>","")},trim:function(a){return"string"!=typeof a?null:a.replace(/^[\s]+/,"").replace(/[\s]+$/,"").replace(/[\s]{2,}/," ")},capitalize:function(a){return a.charAt(0).toUpperCase()+
a.slice(1)},decapitalize:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},dateToString:function(a,c){var d=a.getStringWithFmt("Y4MD").replace(/\//g,"-");c&&(a.TimeFmt=24,d+=" "+a.getTimeString(!0,!0));return d},cloneObject:function(a){return JSON.parse(JSON.stringify(a))},endsWith:function(a,c){return a.substr(a.length-c.length,c.length)==c},startsWith:function(a,c){return a.substr(0,c.length)==c},formatNumber:function(a,c,d,b){a=gx.num.formatNumber(a,c,d,0,!0,!1);if(b&&0<=a.indexOf(gx.decimalPoint)){for(;qv.util.endsWith(a,
"0");)a=a.slice(0,-1);qv.util.endsWith(a,gx.decimalPoint)&&(a=a.slice(0,-1))}return a},formatDateTime:function(a,c,d,b,f,q,o){a=new gx.date.gxdate(a,"Y4MD");d=a.getStringWithFmt(d);c==QueryViewerDataType.DateTime&&(a.TimeFmt=24,d+=" "+a.getTimeString(f,q,b,o));return d},seconsdToText:function(a){return 60>a?qv.util.formatNumber(Math.round(a),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerSeconds")):3600>a?qv.util.formatNumber(Math.round(a/60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+
qv.util.decapitalize(gx.getMessage("GXPL_QViewerMinutes")):86400>a?qv.util.formatNumber(Math.round(a/60/60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerHours")):2630016>a?qv.util.formatNumber(Math.round(a/60/60/24),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerDays")):31557600>a?qv.util.formatNumber(Math.round(a/60/60/24/30.44),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerMonths")):qv.util.formatNumber(Math.round(a/
60/60/24/365.25),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerYears"))},ParseNumericPicture:function(a,c){var d,b,f="",q="";if(""==c)d=a==QueryViewerDataType.Integer?0:2,b=!1;else{0>c.indexOf(".")&&0>c.indexOf(",")?(d=0,b=!1):0<=c.indexOf(".")&&0>c.indexOf(",")?(d=a==QueryViewerDataType.Integer?0:c.length-c.indexOf(".")-1,b=!1):(d=0>c.indexOf(".")&&0<=c.indexOf(",")?0:a==QueryViewerDataType.Integer?0:c.length-c.indexOf(".")-1,b=!0);for(var o=1,k=0;k<c.length;k++){var n=
c.substr(k,1);if(("."==n||","==n||"9"==n||"Z"==n)&&1==o)o=2;"."!=n&&(","!=n&&"9"!=n&&"Z"!=n)&&2==o&&(o=3);switch(o){case 1:f+=n;break;case 3:q+=n}}}return{DecimalPrecision:d,UseThousandsSeparator:b,Prefix:f,Suffix:q}},ParseDateTimePicture:function(a,c){var d=gx.dateFormat,b=a==QueryViewerDataType.DateTime,f=a==QueryViewerDataType.DateTime,q=a==QueryViewerDataType.DateTime,o=a==QueryViewerDataType.DateTime;""!=c&&(0<=c.indexOf("9999")&&0>d.indexOf("Y4")?d=d.replace("Y","Y4"):0>c.indexOf("9999")&&0<=
d.indexOf("Y4")&&(d=d.replace("Y4","Y")),a==QueryViewerDataType.DateTime&&(b=c.indexOf(" "),0<=b?(o=c.substr(b+1,c.length-b),b=2<=o.length,f=5<=o.length,q=8<=o.length,o=12==o.length):o=q=f=b=!1));return{DateFormat:d,IncludeHours:b,IncludeMinutes:f,IncludeSeconds:q,IncludeMilliseconds:o}},evaluate:function(a,c,d){for(var b=1;b<=d.length;b++)a=a.replace(c+b.toString(),d[b-1]);return eval(a)},aggregate:function(a,c,d){var a=a||QueryViewerAggregationType.Sum,b=null,f=null,q=null,o=null;switch(a){case QueryViewerAggregationType.Sum:for(a=
0;a<c.length;a++)null!=c[a]&&(b+=c[a]);return b;case QueryViewerAggregationType.Average:for(a=0;a<c.length;a++)null!=c[a]&&(b+=c[a],f+=d[a]);return null!=b?b/f:null;case QueryViewerAggregationType.Count:for(a=0;a<d.length;a++)f+=d[a];return f;case QueryViewerAggregationType.Max:for(a=0;a<c.length;a++)o=null==o?c[a]:c[a]>o?c[a]:o;return o;case QueryViewerAggregationType.Min:for(a=0;a<c.length;a++)q=null==q?c[a]:c[a]<q?c[a]:q;return q}},anyError:function(a){return 0==a.indexOf('<Result OK="False"><Dsc>')},
showActivityIndicator:function(a){var c='qv.util.showActivityIndicatorMain("'+a.getContainerControl().id+'");',a=a.userControlId();qv.fadeTimeouts[a]&&clearTimeout(qv.fadeTimeouts[a]);qv.fadeTimeouts[a]=setTimeout(c,500)},showActivityIndicatorMain:function(a){a=document.getElementById(a);gx.dom.addClass(a,"gx-qv-loading");for(var c=0;c<a.childNodes.length;c++)gx.dom.addClass(a.childNodes[c],"gx-qv-loading-children")},hideActivityIndicator:function(a){var c=a.userControlId();qv.fadeTimeouts[c]&&(clearTimeout(qv.fadeTimeouts[c]),
qv.fadeTimeouts[c]=void 0);a=a.getContainerControl();gx.dom.removeClass(a,"gx-qv-loading");for(c=0;c<a.childNodes.length;c++)gx.dom.removeClass(a.childNodes[c],"gx-qv-loading-children")},renderError:function(a,c){if(IsQueryObjectPreview()&&!IsDashboardEdit())window.external.SendText(a.ControlName,c);else{var d=qv.util.dom.getEmptyContainer(a);qv.util.dom.createDiv(d,"","gx-qv-centered-text","",{width:gx.dom.addUnits(a.Width),height:gx.dom.addUnits(a.Height),borderColor:"silver",borderWidth:"thin",
borderStyle:"solid"},gx.getMessage("GXPL_QViewerError")+": "+c);a._ControlRenderedTo=void 0;qv.util.hideActivityIndicator(a)}},GetDesigntimeMetadata:function(a){for(var c=[],d=0;d<a.Metadata.Axes.length;d++){var b=a.Metadata.Axes[d];if(!b.IsComponent){var f={};f.Name=b.Name;f.Title=b.Title;f.DataField=b.DataField;f.Visible=b.Visible;f.Type=QueryViewerElementType.Axis;f.Axis=b.Axis;f.Filter=b.Filter;f.ExpandCollapse=b.ExpandCollapse;f.AxisOrder=b.Order;f.Format={};f.Format.Subtotals=b.Subtotals;f.Format.Picture=
b.Picture;f.Format.CanDragToPages=b.CanDragToPages;f.Format.Style=b.Style;0<b.ValuesStyles.length&&(f.Format.ValuesStyles=b.ValuesStyles);f.Actions={};f.Actions.RaiseItemClick=b.RaiseItemClick;c.push(f)}}for(d=0;d<a.Metadata.Data.length;d++)b=a.Metadata.Data[d],b.IsComponent||(f={},f.Name=b.Name,f.Title=b.Title,f.DataField=b.DataField,f.Visible=b.Visible,f.Type=QueryViewerElementType.Datum,f.Axis="",f.Aggregation=b.Aggregation,f.Format={},f.Format.Picture=b.Picture,f.Format.Style=b.Style,f.Format.TargetValue=
b.TargetValue,f.Format.MaximumValue=f.Format.TargetValue,0<b.ConditionalStyles.length&&(f.Format.ConditionalStyles=b.ConditionalStyles),f.Actions={},f.Actions.RaiseItemClick=b.RaiseItemClick,c.push(f));return c},MergeFields:function(a,c){if(c.Visible!=QueryViewerVisible.Never&&(c.Visible=a.Hidden?QueryViewerVisible.No:QueryViewerVisible.Yes,c.Type==QueryViewerElementType.Axis)){c.Axis=a.Axis;if(a.Order)switch(c.AxisOrder.Type){case QueryViewerAxisOrderType.None:case QueryViewerAxisOrderType.Ascending:case QueryViewerAxisOrderType.Descending:c.AxisOrder.Type=
a.Order;break;case QueryViewerAxisOrderType.Custom:a.Order==QueryViewerAxisOrderType.Descending&&c.AxisOrder.Values.reverse()}c.Format.Subtotals!=QueryViewerSubtotals.No&&void 0!=a.Subtotals&&(c.Format.Subtotals=a.Subtotals==QueryViewerSubtotals.Yes?QueryViewerSubtotals.Yes:QueryViewerSubtotals.Hidden);a.Filter&&(c.Filter=a.Filter);a.ExpandCollapse&&(c.ExpandCollapse=a.ExpandCollapse)}},GetOrderedElementsKeys:function(a,c){function d(a,b,h){return Array(b-(""+a).length+1).join(h||"0")+a}for(var b=
[],f=0;f<c.length;f++){var q=c[f],o=a.RealType==QueryViewerOutputType.Table?"0":q.Type==QueryViewerElementType.Axis?"1":"2";if(null!=q.Position){var k;if(a.RealType==QueryViewerOutputType.PivotTable)if(q.Type==QueryViewerElementType.Axis)switch(q.Axis){case QueryViewerAxisType.Columns:k="B";break;case QueryViewerAxisType.Pages:k="C";break;default:k="A"}else k="D";else k="A";o+=k+d(q.Position,4,"0")+d(f,4,"0")}else o+="Z"+d(f,4,"0")+d(f,4,"0");b.push(o)}b.sort();return b},GetContainerControlClass:function(a){return""!=
a.Class?a.Class+"-"+a.RealType.toLowerCase():""},GetContainerControlClasses:function(a){var c=qv.util.GetContainerControlClass(a),d;switch(a.RealType){case QueryViewerOutputType.Card:d="qv-card";break;case QueryViewerOutputType.Chart:d="qv-chart";break;case QueryViewerOutputType.PivotTable:d="qv-pivottable";break;case QueryViewerOutputType.Table:d="qv-table";break;case QueryViewerOutputType.Map:d="qv-map"}""!=c&&(d+=" "+c);return d},SetUserControlClass:function(a,c){a.getContainerControl().className=
"gx_usercontrol "+c},GetElementInCollection:function(a,c,d){for(var b=0;b<a.length;b++){var f=a[b];if(f[c]==d)return f}return null},IsInteger:function(a){return Number.isInteger?Number.isInteger(a):"number"===typeof a&&isFinite(a)&&Math.floor(a)===a},ApplyPicture:function(a,c,d,b){switch(d){case QueryViewerDataType.Integer:case QueryViewerDataType.Real:return qv.util.formatNumber(a,b.DecimalPrecision,c,!1);case QueryViewerDataType.Boolean:case QueryViewerDataType.Character:case QueryViewerDataType.GUID:case QueryViewerDataType.GeoPoint:return qv.util.trim(a);
case QueryViewerDataType.Date:case QueryViewerDataType.DateTime:return qv.util.formatDateTime(a,d,b.DateFormat,b.IncludeHours,b.IncludeMinutes,b.IncludeSeconds,b.IncludeMilliseconds)}},GetPictureProperties:function(a,c){return a==QueryViewerDataType.Integer||a==QueryViewerDataType.Real?qv.util.ParseNumericPicture(a,c):a==QueryViewerDataType.Date||a==QueryViewerDataType.DateTime?qv.util.ParseDateTimePicture(a,c):null},GetAxisByDataField:function(a,c){for(var d=0;d<a.Metadata.Axes.length;d++)if(a.Metadata.Axes[d].DataField==
c)return a.Metadata.Axes[d]},GetThemeStyleSheet:function(a){a._themeStyleSheet||(a._themeStyleSheet=gx.getThemeElement().sheet);return a._themeStyleSheet},GetNullColor:function(){return qv.util.GetColorObject("")},GetColorObject:function(a){return{IsDefault:!1,Color:a,ColorIndex:"-1"}},IsNullColor:function(a){return a.IsDefault?0>a.ColorIndex:""==a.Color},GetQueryViewerStyleSheet:function(a){if(!a._queryViewerStyleSheet){var c=qv.util.GetLinkOrStyleElement("QueryViewer.css").sheet.rules[0];a._queryViewerStyleSheet=
c.styleSheet}return a._queryViewerStyleSheet},GetLinkOrStyleElement:function(a){if(gx.O.DSO)for(var c=document.getElementsByTagName("style"),d=0;d<c.length;d++){if(c[d].attributes["data-gx-href"]&&0<=c[d].attributes["data-gx-href"].value.indexOf(a))return c[d]}else{c=document.getElementsByTagName("link");for(d=0;d<c.length;d++)if(c[d].attributes.href&&0<=c[d].attributes.href.value.indexOf(a))return c[d]}return null},XAxisDataType:function(a){for(var c=0,d="",b=0;b<a.Metadata.Axes.length;b++){var f=
a.Metadata.Axes[b];if(f.Visible==QueryViewerVisible.Yes||f.Visible==QueryViewerVisible.Always)c++,d=f.DataType}return 1==c?d:QueryViewerDataType.Character},ProcessDataAndMetadata:function(a){function c(a){for(var b=0,h=0;h<a.length;h++)"F0"!=a[h].DataField&&b++;return b}function d(a){a.Chart.Categories={};a.Chart.Categories.DataFields=[];for(var b=0;b<a.Metadata.Axes.length;b++){var h=a.Metadata.Axes[b];if(h.Visible==QueryViewerVisible.Yes||h.Visible==QueryViewerVisible.Always)(a.RealType!=QueryViewerOutputType.Map||
h.DataType==QueryViewerDataType.Character)&&a.Chart.Categories.DataFields.push(h.DataField)}a.Chart.Series={};a.Chart.Series.DataFields=[];h=c(a.Metadata.Data);for(b=0;b<a.Metadata.Data.length;b++){var e=a.Metadata.Data[b];(1==h?e.Visible==QueryViewerVisible.Yes||e.Visible==QueryViewerVisible.Always:e.Visible!=QueryViewerVisible.Never)&&a.Chart.Series.DataFields.push(e.DataField)}}function b(a){for(var b={},h=0;h<a.Metadata.Axes.length;h++){var e=a.Metadata.Axes[h],f=qv.util.GetPictureProperties(e.DataType,
e.Picture);b[e.DataField]={Picture:e.Picture,DataType:e.DataType,PictureProperties:f,Filter:e.Filter}}return b}function f(a,b){function h(a,b,e){function f(a){for(var b=!1,h=0;h<a.length;h++)if(q(a[h].StyleOrClass,!1)[0]){b=!0;break}return b}var c;if(a.RealType==QueryViewerOutputType.Map&&(a.MapType==QueryViewerMapType.Choropleth&&""!=a.Chart.colorAxis||a.MapType==QueryViewerMapType.Bubble&&""!=a.Chart.colorAxis))c=!1;else if(a.RealType==QueryViewerOutputType.Map&&(a.MapType==QueryViewerMapType.Choropleth&&
0==a.Chart.colorAxis.dataClasses.length||a.MapType==QueryViewerMapType.Bubble&&0==a.Chart.colorAxis.dataClasses.length))c=!0;a.RealType==QueryViewerOutputType.Chart&&(qv.chart.IsSingleSerieChart(a)||a.RealChartType==QueryViewerChartType.PolarArea&&1==a.Chart.Series.DataFields.length)?c=!0:a.RealType==QueryViewerOutputType.Chart&&(qv.chart.IsAreaChart(a)||qv.chart.IsLineChart(a)||a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar)?c=!1:a.RealType==QueryViewerOutputType.Chart&&
1<a.Chart.Series.DataFields.length&&!qv.chart.IsSplittedChart(a)?c=!1:(a=f(b.ConditionalStyles),b=!1,null!=e&&(b=f(e.ValuesStyles)),c=a||b);return c}for(var e={},f=c(a.Metadata.Data),l=0;l<a.Metadata.Data.length;l++){var g=a.Metadata.Data[l];if(1==f?g.Visible==QueryViewerVisible.Yes||g.Visible==QueryViewerVisible.Always:g.Visible!=QueryViewerVisible.Never){var r=h(a,g,b);e[g.DataField]={Datum:g,Multicolored:r}}}return e}function q(a,b){var h="",e=!1,f=b?"backgroundcolor":"color";if(""!=a){for(var c=
a.split(";"),l=0;l<c.length;l++){var g=c[l].split(":");if(2==g.length){var r=qv.util.trim(g[0]),g=qv.util.trim(g[1]);if(r.toLowerCase()==f){h=g;e=""!=g;break}}}e&&"#"==h.substr(0,1)&&(h=h.replace("#",""))}return[e,h]}function o(a,b,h,e,f,c,l){function g(a,b){for(var h=[!1,""],e=0;e<a.ValuesStyles.length;e++){var f=a.ValuesStyles[e];if(f.Value==b){h=q(f.StyleOrClass,!1);break}}return h}function r(a,b){for(var h=[!1,""],e=!1,f=0;f<a.ConditionalStyles.length;f++){var c=a.ConditionalStyles[f];if(e=qv.util.satisfyStyle(b,
c)){h=q(c.StyleOrClass,!1);break}}return h}var k,m=-1,d=!1;if(a){if(a=!1,null!=h&&(h=g(h,c),a=h[0],k=h[1]),!a)h=r(b,l),a=h[0],k=h[1],a||(m=f%HIGHCHARTS_MAX_COLORS,d=!0)}else h=q(b.Style,!1),a=h[0],k=h[1],a||(m=e%HIGHCHARTS_MAX_COLORS,d=!0);return{IsDefault:d,Color:k,ColorIndex:m}}function k(a,h,b,e){for(var f="",c="",l=0;l<a.Chart.Categories.DataFields.length;l++){var g=a.Chart.Categories.DataFields[l],r;void 0!=h[g]?(r=qv.util.trim(h[g]),g=qv.util.ApplyPicture(r,e[g].Picture,e[g].DataType,e[g].PictureProperties)):
g=r=a.Metadata.TextForNullValues;f+=(""==f?"":", ")+r;c+=(""==c?"":", ")+g}h=[f,c];e={};e.Value=h[0];e.ValueWithPicture=h[1];a.Chart.Categories.Values.push(e);if(0==b)a.Chart.Categories.MinValue=e.Value,a.Chart.Categories.MaxValue=e.Value;else if(e.Value>a.Chart.Categories.MaxValue&&(a.Chart.Categories.MaxValue=e.Value),e.Value<a.Chart.Categories.MinValue)a.Chart.Categories.MinValue=e.Value}function n(a,h,b,e,f){for(var c=0;c<a.Chart.Series.DataFields.length;c++){var l=a.Chart.Series.ByIndex[c],g=
a.Chart.Series.DataFields[c],r=void 0!=h[g]?h[g]:null,k={};k.Value=r;var m=e[g].Datum,d=e[g].Multicolored;if(m.Aggregation==QueryViewerAggregationType.Average){var s=h[g+"_N"],g=h[g+"_D"];void 0==s&&void 0==g&&(s=r,g="1");k.Value_N=s;k.Value_D=g}k.Color=d?o(d,m,f,0,b,a.Chart.Categories.Values[b].Value,r):qv.util.GetNullColor();l.Points.push(k);0<k.Value&&(l.PositiveValues=!0);0>k.Value&&(l.NegativeValues=!0);if(0===b)l.MinValue=parseFloat(k.Value),l.MaxValue=parseFloat(k.Value);else if(parseFloat(k.Value)>
l.MaxValue&&(l.MaxValue=parseFloat(k.Value)),parseFloat(k.Value)<l.MinValue)l.MinValue=parseFloat(k.Value)}}function m(a,h){for(var b=0;b<h.ConditionalStyles.length;b++){var e=h.ConditionalStyles[b],f=q(e.StyleOrClass,!0),c=f[1];if(f[0]){plotBand={};plotBand.Color=qv.util.GetColorObject(c);if(e.Operator==QueryViewerConditionOperator.Interval)plotBand.From=parseFloat(e.Value1),plotBand.To=parseFloat(e.Value2);else if(e.Operator==QueryViewerConditionOperator.Equal)plotBand.From=parseFloat(e.Value1),
plotBand.To=parseFloat(e.Value1);else if(e.Operator==QueryViewerConditionOperator.GreaterOrEqual||e.Operator==QueryViewerConditionOperator.GreaterThan)plotBand.From=parseFloat(e.Value1);else if(e.Operator==QueryViewerConditionOperator.LessOrEqual||e.Operator==QueryViewerConditionOperator.LessThan)plotBand.To=parseFloat(e.Value1);plotBand.SeriesName=""!=h.Title?h.Title:h.Name;a.Chart.PlotBands.push(plotBand)}}}function h(a,h){for(var b=!1,e=0;e<a.Metadata.Axes.length;e++){var f=a.Metadata.Axes[e];
if(f.Visible==QueryViewerVisible.Yes||f.Visible==QueryViewerVisible.Always){var c=qv.util.trim(h[f.DataField]);if(f.Filter.Type==QueryViewerFilterType.HideAllValues){b=!0;break}else if(f.Filter.Type==QueryViewerFilterType.ShowSomeValues&&0>f.Filter.Values.indexOf(c)){b=!0;break}if(a.RealType===QueryViewerOutputType.Map&&f.DataType===QueryViewerDataType.Character)if(a.Region===QueryViewerRegion.Country){if(!qv.util.startsWith(c.toUpperCase(),a.Country+"-")){b=!0;break}}else if(a.Region===QueryViewerRegion.Continent)switch(a.Continent){case QueryViewerContinent.Africa:b=
!qv.map.IsAfricanCountry(c.toUpperCase());break;case QueryViewerContinent.Asia:b=!qv.map.IsAsianCountry(c.toUpperCase());break;case QueryViewerContinent.Europe:b=!qv.map.IsEuropeanCountry(c.toUpperCase());break;case QueryViewerContinent.NorthAmerica:b=!qv.map.IsNorthAmericanCountry(c.toUpperCase());break;case QueryViewerContinent.Oceania:b=!qv.map.IsOceanianCountry(c.toUpperCase());break;case QueryViewerContinent.SouthAmerica:b=!qv.map.IsSouthAmericanCountry(c.toUpperCase());break;default:b=!0}}}return b}
function r(a){0>=a.TargetValue&&(a.TargetValue=100);0>=a.MaximumValue&&(a.MaximumValue=100);a.MaximumValue<a.TargetValue&&(a.MaximumValue=a.TargetValue)}function g(a){for(var b=[],h=[],e="",f=0;f<a.Points.length;f++){var c,l;a.Aggregation==QueryViewerAggregationType.Count?(c=0,l=parseFloat(qv.util.trim(a.Points[f].Value))):a.Aggregation==QueryViewerAggregationType.Average?(c=parseFloat(qv.util.trim(a.Points[f].Value_N)),l=parseFloat(qv.util.trim(a.Points[f].Value_D))):(c=parseFloat(qv.util.trim(a.Points[f].Value)),
l=1);b.push(c);h.push(l);""==e&&(e=a.Points[f].Color)}b=qv.util.aggregate(a.Aggregation,b,h).toString();a.Points=[{Value:b,Value_N:b,Value_D:"1",Color:e}];a.NegativeValues=0>b;a.PositiveValues=0<b}function x(a,b){a.Chart.colorAxis=a.Chart.colorAxis||{};a.Chart.colorAxis.dataClasses=a.Chart.colorAxis.dataClasses||[];for(var h=0;h<b.ConditionalStyles.length;h++){var e=b.ConditionalStyles[h];colorAxis={dataClasses:[]};var f={};f.color=e.StyleOrClass.replace("color:","");e.Operator==QueryViewerConditionOperator.Interval?
(f.from=parseFloat(e.Value1),f.to=parseFloat(e.Value2),f.Operator=QueryViewerConditionOperatorSymbol.Interval):e.Operator==QueryViewerConditionOperator.Equal?(f.from=parseFloat(e.Value1),f.Operator=QueryViewerConditionOperatorSymbol.Equal):e.Operator==QueryViewerConditionOperator.GreaterOrEqual?(f.from=parseFloat(e.Value1),f.Operator=QueryViewerConditionOperatorSymbol.GreaterOrEqual):e.Operator==QueryViewerConditionOperator.GreaterThan?(f.from=parseFloat(e.Value1),f.Operator=QueryViewerConditionOperatorSymbol.GreaterThan):
e.Operator==QueryViewerConditionOperator.LessThan?(f.to=parseFloat(e.Value1),f.Operator=QueryViewerConditionOperatorSymbol.LessThan):e.Operator==QueryViewerConditionOperator.LessOrEqual?(f.to=parseFloat(e.Value1),f.Operator=QueryViewerConditionOperatorSymbol.LessOrEqual):e.Operator==QueryViewerConditionOperator.NotEqual&&(f.from=parseFloat(e.Value1),f.Operator=QueryViewerConditionOperatorSymbol.NotEqual);a.Chart.colorAxis.dataClasses.push(f)}}var B=function(a){var b=qv.util.XAxisDataType(a),e;switch(a.RealType){case QueryViewerOutputType.Chart:a=
qv.chart.IsDatetimeXAxis(a)?b==QueryViewerDataType.Date||b==QueryViewerDataType.DateTime:!0;e="GXPL_QViewerNoDatetimeAxis";break;case QueryViewerOutputType.Map:a=b==QueryViewerDataType.GeoPoint||b==QueryViewerDataType.Character;e="GXPL_QViewerNoMapAxis";break;default:a=!0}return{IsOK:a,Error:a?"":gx.getMessage(e)}}(a);if(B.IsOK){a.Chart={};d(a);a.Chart.Categories.MinValue=null;a.Chart.Categories.MaxValue=null;a.Chart.Categories.Values=[];B=b(a);a.Chart.Series.ByIndex=[];var e=1==a.Chart.Categories.DataFields.length?
qv.util.GetAxisByDataField(a,a.Chart.Categories.DataFields[0]):null,l=f(a,e);a.Chart.PlotBands=[];for(var y=0;y<a.Chart.Series.DataFields.length;y++){var C=a.Chart.Series.DataFields[y],u=l[C].Datum,s={MinValue:null,MaxValue:null},C=l[C].Multicolored;s.FieldName=u.Name;s.Name=u.Title;s.Visible=u.Visible;s.DataType=u.DataType;s.Aggregation=u.Aggregation;var G=u.Picture;s.Picture=""==G?s.DataType==QueryViewerDataType.Integer?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99":G;s.NumberFormat=qv.util.ParseNumericPicture(s.DataType,
s.Picture);s.Color=C?qv.util.GetNullColor():o(C,u,e,y,0,"",0);s.TargetValue=u.TargetValue;s.MaximumValue=u.MaximumValue;r(s);s.PositiveValues=!1;s.NegativeValues=!1;s.Points=[];a.Chart.Series.ByIndex.push(s);a.RealType==QueryViewerOutputType.Chart&&m(a,u);a.RealType==QueryViewerOutputType.Map&&x(a,u)}for(y=u=0;y<a.Data.Rows.length;y++)s=a.Data.Rows[y],h(a,s)||(k(a,s,u,B),n(a,s,u,l,e),u++);if(a.RealType==QueryViewerOutputType.Chart&&qv.chart.IsGaugeChart(a))for(y=0;y<a.Chart.Series.DataFields.length;y++)s=
a.Chart.Series.ByIndex[y],g(s);return""}return B.Error},getTranslation:function(a){return qv.TranslationType==QueryViewerTranslationType.RunTime?gx.getMessage(a):a},getTranslationAlsoIfStatic:function(a){return qv.TranslationType==QueryViewerTranslationType.RunTime||qv.TranslationType==QueryViewerTranslationType.Static?gx.getMessage(a):a},aggregateData:function(a,c){for(var d={},b=0;b<a.length;b++){var f=a[b],q;q=f;for(var o=c,k=[],n=[],m=[],h=0;h<o.length;h++){var r=o[h];if(q.IsFormula){var g=0;
do{g++;var x=r[q.DataField+"_"+g.toString()];void 0!=x&&(x=parseFloat(x),0==h?m.push(x):m[g-1]+=x)}while(void 0!=x)}else q.Aggregation==QueryViewerAggregationType.Count?(g=0,r=parseFloat(r[q.DataField])):q.Aggregation==QueryViewerAggregationType.Average?(g=parseFloat(r[q.DataField+"_N"]),r=parseFloat(r[q.DataField+"_D"])):(g=parseFloat(r[q.DataField]),r=1),k.push(g),n.push(r)}q=q.IsFormula?qv.util.evaluate(q.Formula,q.DataField+"_",m):qv.util.aggregate(q.Aggregation,k,n).toString();d[f.DataField]=
q}return d},isRTL:function(a){var a=a.getContainerControl().id,a=document.getElementById(a),c=!1;cs=window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue("direction"):a.currentStyle.direction;"rtl"==cs&&(c=!0);return c}};var STATE_DONE=4,STATUS_OK=200,METADATA_VERSION=2;
qv.services=function(){function a(a){return eval(a)[1].replace(/\\/g,".")}function c(a,b){var c=qv.services.RuntimeParametersJSON(a),k;k=a.Axes;for(var n=d(a),m=0;m<k.length;m++){var h=k[m],r="";void 0!=h.AxisOrder&&(r=h.AxisOrder.Type);""!=r&&(r=qv.services.postInfo._priv.SdtWithValuesJSON("Order",r,QueryViewerAxisOrderType.Custom,h.AxisOrder.Values,!1),n+=","+r);void 0!=h.Analytics&&(n+=","+h.Analytics.ShowValuesAs,n+=","+h.Analytics.RollingAverageType,n+=","+h.Analytics.RollingAverageTerms,n+=
","+h.Analytics.DifferenceFrom,n+=","+h.Analytics.ShowAsPercentage)}k=n;n=a.RealType==QueryViewerOutputType.Table?"PagedRecordSet":a.RealType==QueryViewerOutputType.PivotTable?"PagedLineSet":"NotPaged";return a.ObjectName!=b.ObjectName||a.ObjectType!=b.ObjectType||a.ObjectId!=b.ObjectId||a.Object!=b.Object||c!=b.RuntimeParametersJSON||k!=b.FieldsJSON||n!=b.DataType?(b.ObjectName=a.ObjectName,b.ObjectType=a.ObjectType,b.ObjectId=a.ObjectId,b.Object=a.Object,b.RuntimeParametersJSON=c,b.FieldsJSON=k,
b.DataType=n,!0):!1}function d(a){return a.RealType==QueryViewerOutputType.Chart&&qv.chart.IsDatetimeXAxis(a)||a.RealType==QueryViewerOutputType.Card&&(a.IncludeSparkline||a.IncludeTrend)}function b(a,b){return{Success:a,Message:b}}return{url:function(){function a(b,f){var m=qv.util.getGenerator(),h;h=(new Date).getTime();var r=b.enableServerDebug?"_debug":"";switch(m){case "C#":var m=new gx.util.Url(location.href),g=m.path,g=g.substr(0,g.lastIndexOf("/")+1);urlresult=""==m.port?m.protocol+"://"+
m.host+g:m.protocol+"://"+m.host+":"+m.port+g;return urlresult+"agxpl_get"+r+".aspx?"+f+","+h;case "Java":return c(!1)+"qviewer.services.agxpl_get"+r+"?"+f+","+h;default:return""}}function b(){var a;a=""!=gx.staticDirectory?gx.staticDirectory:this.getCookie("StaticContent");return qv.util.startsWith(a,"/")?a.substr(1,a.length-1):a}function c(a){var f=gx.util.resourceUrl(gx.basePath,!0);a&&(f+=b());return f}return{getDefaultOutputURL:function(b){return a(b,"defaultoutput")},getRecordsetCacheKeyURL:function(b){return a(b,
"recordsetcachekey")},getMetadataURL:function(b){return a(b,"metadata")},getDataURL:function(b){return a(b,"data")},getAttributeValuesURL:function(b){return a(b,"attributevalues")},getPageDataForTableURL:function(b){return a(b,"pagedatafortable")},getPageDataForPivotTableURL:function(b){return a(b,"pagedataforpivottable")},getQueryParametersURL:function(b){return a(b,"queryparameters")},getDashboardSpecURL:function(b){return a(b,"dashboardspec")},getStaticDirectory:function(){return"Java"===qv.util.getGenerator()?
c(!0):b()}}}(),postInfo:function(){function b(a,f){var g="",k,m,e,l,d,C,u,s,o,p,n,z,A,K,F,D;k=!1;for(i=0;void 0!=a.Axes[i];i++){k=!0;g+=""!=g?",":"";g+="{";m="";l=e=0;C=d="";s=u=!0;p=o="";n=0;D=F=K=A=z="";var E;E=a.Axes[i];var v="",t=!1;if(void 0!=E.Format&&void 0!=E.Format.ValuesStyles)for(var w=0;void 0!=E.Format.ValuesStyles[w];w++)t=!0,v+=""!=v?",":"",v+="{",v+='"Value":"'+encodeURIComponent(E.Format.ValuesStyles[w].Value)+'"',v+=",",v+='"Style":"'+encodeURIComponent(E.Format.ValuesStyles[w].StyleOrClass)+
'"',v+=",",v+='"Propagate":'+(E.Format.ValuesStyles[w].ApplyToRowOrColumn?"true":"false"),v+="}";t&&(v='"ValuesStyles":['+v+"]");E=v;v=a.Axes[i];t="";w=!1;if(void 0!=v.Format&&void 0!=v.Format.ConditionalStyles)for(var M=0;void 0!=v.Format.ConditionalStyles[M];M++)w=!0,t+=""!=t?",":"",t+="{",t+='"Operator":"'+v.Format.ConditionalStyles[M].Operator+'"',t+=",",t+='"Value1":"'+encodeURIComponent(v.Format.ConditionalStyles[M].Value1)+'"',v.Format.ConditionalStyles[M].Operator==QueryViewerConditionOperator.Interval&&
(t+=",",t+='"Value2":"'+encodeURIComponent(v.Format.ConditionalStyles[M].Value2)+'"'),t+=",",t+='"Style":"'+encodeURIComponent(v.Format.ConditionalStyles[M].StyleOrClass)+'"',t+="}";w&&(t='"ConditionalStyles":['+t+"]");v=t;t=a.Axes[i];w="";void 0!=t.Grouping&&(w+="{",w+='"GroupByYear":'+(t.Grouping.GroupByYear?"true":"false"),w+=",",w+='"YearTitle":"'+t.Grouping.YearTitle+'"',w+=",",w+='"GroupBySemester":'+(t.Grouping.GroupBySemester?"true":"false"),w+=",",w+='"SemesterTitle":"'+t.Grouping.SemesterTitle+
'"',w+=",",w+='"GroupByQuarter":'+(t.Grouping.GroupByQuarter?"true":"false"),w+=",",w+='"QuarterTitle":"'+t.Grouping.QuarterTitle+'"',w+=",",w+='"GroupByMonth":'+(t.Grouping.GroupByMonth?"true":"false"),w+=",",w+='"MonthTitle":"'+t.Grouping.MonthTitle+'"',w+=",",w+='"GroupByDayOfWeek":'+(t.Grouping.GroupByDayOfWeek?"true":"false"),w+=",",w+='"DayOfWeekTitle":"'+t.Grouping.DayOfWeekTitle+'"',w+=",",w+='"HideValue":'+(t.Grouping.HideValue?"true":"false"),w+="}",w='"Grouping":'+w);t=w;void 0!=a.Axes[i].Format&&
(m=a.Axes[i].Format.Picture?a.Axes[i].Format.Picture:"",e=a.Axes[i].Format.TargetValue?a.Axes[i].Format.TargetValue:0,l=a.Axes[i].Format.MaximumValue?a.Axes[i].Format.MaximumValue:0,d=a.Axes[i].Format.Style?a.Axes[i].Format.Style:"",C=a.Axes[i].Format.Subtotals?a.Axes[i].Format.Subtotals:"",u=void 0!=a.Axes[i].Format.CanDragToPages?a.Axes[i].Format.CanDragToPages:!0);void 0!=a.Axes[i].Actions&&(s=a.Axes[i].Actions.RaiseItemClick);void 0!=a.Axes[i].Analytics&&(o=a.Axes[i].Analytics.ShowValuesAs,p=
a.Axes[i].Analytics.RollingAverageType,n=a.Axes[i].Analytics.RollingAverageTerms,z=a.Axes[i].Analytics.DifferenceFrom,A=a.Axes[i].Analytics.ShowAsPercentage);void 0!=a.Axes[i].AxisOrder&&(K=a.Axes[i].AxisOrder.Type);void 0!=a.Axes[i].ExpandCollapse&&(F=a.Axes[i].ExpandCollapse.Type);void 0!=a.Axes[i].Filter&&(D=a.Axes[i].Filter.Type);void 0==D&&(D=QueryViewerFilterType.ShowSomeValues);g+='"Name":"'+encodeURIComponent(a.Axes[i].Name)+'"';g+=",";g+='"Caption":"'+encodeURIComponent(a.Axes[i].Title)+
'"';g+=",";g+='"Aggregation":"'+a.Axes[i].Aggregation+'"';g+=",";g+='"Visible":"'+a.Axes[i].Visible+'"';g+=",";g+='"Type":"'+a.Axes[i].Type+'"';g+=",";g+='"Axis":"'+a.Axes[i].Axis+'"';g+=",";g+='"Picture":"'+encodeURIComponent(m)+'"';g+=",";g+='"TargetValue":'+e;g+=",";g+='"MaximumValue":'+l;g+=",";g+='"Style":"'+d+'"';g+=",";g+='"Subtotals":"'+C+'"';g+=",";g+='"CanDragToPages":'+u;g+=",";g+='"RaiseItemClick":'+s;""!=o&&(g+=",",g+='"Analytics":{',g+='"ShowValuesAs":"'+o+'"',g+=",",g+='"RollingAverageType":"'+
p+'"',g+=",",g+='"RollingAverageTerms":'+n,g+=",",g+='"DifferenceFrom":"'+z+'"',g+=",",g+='"ShowAsPercentage":"'+A+'"',g+="}");""!=K&&(m=c("Order",K,QueryViewerAxisOrderType.Custom,a.Axes[i].AxisOrder.Values,f),g+=""!=m?","+m:"");""!=F&&(F=c("ExpandCollapse",F,QueryViewerExpandCollapseType.ExpandSomeValues,a.Axes[i].ExpandCollapse.Values,f),g+=""!=F?","+F:"");""!=D&&a.Axes[i].Filter.Values&&(D=c("Filter",D,QueryViewerFilterType.ShowSomeValues,a.Axes[i].Filter.Values,f),g+=""!=D?","+D:"");g+=""!=E?
","+E:"";g+=""!=v?","+v:"";g+=""!=t?","+t:"";g+="}"}k&&(g='"RuntimeFields":['+g+"]");return g}function c(a,b,f,m,k){var e="";if(""!=b){e=e+('"'+a+'":')+"{"+('"Type":"'+b+'"');strValues="";if(b==f){existValues=!1;for(j=0;void 0!=m[j];j++)existValues=!0,strValues+=""!=strValues?",":"",strValues=k?strValues+('"'+encodeURIComponent(m[j])+'"'):strValues+('"'+m[j]+'"');existValues&&(strValues=',"Values":['+strValues+"]")}e+=strValues;e+="}"}return e}function o(a){var b="",f=!1;if(a.Object){a=eval(a.Object);
for(i=2;i<a.length;i++)f=!0,b+=""!=b?",":"",b+="{",b+='"Value":"'+encodeURIComponent(a[i])+'"',b+="}"}else for(i=0;void 0!=a.Parameters[i];i++)f=!0,b+=""!=b?",":"",b+="{",b+='"Name":"'+a.Parameters[i].Name+'"',b+=",",b+='"Value":"'+encodeURIComponent(a.Parameters[i].Value)+'"',b+="}";f&&(b='"RuntimeParameters":['+b+"]");return b}function k(a){var b="",f=!1;for(i=0;void 0!=a[i];i++){f=!0;b+=""!=b?",":"";b+="{";b+='"DataField":"'+a[i].DataField+'"';b+=",";b+='"NullIncluded":'+a[i].NullIncluded;strIncludedValues=
"";existValues=!1;for(j=0;void 0!=a[i].NotNullValues.Included[j];j++)existValues=!0,strIncludedValues+=""!=strIncludedValues?",":"",strIncludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Included[j])+'"';existValues&&(strIncludedValues=',"Included":['+strIncludedValues+"]");strExcludedValues="";existValues=!1;for(j=0;void 0!=a[i].NotNullValues.Excluded[j];j++)existValues=!0,strExcludedValues+=""!=strExcludedValues?",":"",strExcludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Excluded[j])+
'"';existValues&&(strExcludedValues=',"Excluded":['+strExcludedValues+"]");b+=",";b+='"NotNullValues":{"DefaultAction":"'+a[i].NotNullValues.DefaultAction+'"'+strIncludedValues+strExcludedValues+"}";b+="}"}f&&(b='"Filters":['+b+"]");return b}function n(a){return a.UseRecordsetCache?'{"ActualKey":"'+a.RecordsetCache.ActualKey+'","OldKey":"'+a.RecordsetCache.OldKey+'","MinutesToKeep":'+a.MinutesToKeepInRecordsetCache+',"MaximumSize":'+a.MaximumCacheSize+"}":'{"ActualKey":"","OldKey":"","MinutesToKeep":0,"MaximumSize":0}'}
function m(b){var f;f=""+(""!=b.ApplicationNamespace?'"ApplicationNamespace":"'+b.ApplicationNamespace+'",':"");f+='"ParentPanel":"'+b.ParentPanel+'"';f+=",";b.Object?f+='"ObjectName":"'+a(b.Object)+'"':(f+='"ObjectName":"'+b.ObjectName+'"',f=f+","+('"Alt_ObjectType":"'+b.ObjectType+'"'),f=f+","+('"Alt_ObjectId":'+b.ObjectId));return f}return{DefaultOutput:function(a){a="{"+m(a);return"Data="+encodeURIComponent(a+"}")},RecordsetCacheKey:function(a){a="{"+m(a);return"Data="+encodeURIComponent(a+"}")},
Metadata:function(a){var c="",g=o(a),k=b(a,!0),c=c+"{"+m(a),c=c+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),c=c+(""!=g?","+g:"")+(""!=k?","+k:"")+","+('"OutputType":"'+a.RealType+'"'),c=c+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),c=c+","+('"RememberLayout":'+a.RememberLayout),c=c+","+('"ShowDataLabelsIn":"'+a.ShowDataLabelsIn+'"'),c=c+","+('"RecordsetCacheInfo":'+n(a)),c=c+","+('"ReturnSampleData":'+a.ReturnSampleData),c=c+","+('"TranslationType":"'+a.TranslationType+
'"');return"Data="+encodeURIComponent(c+"}")},Data:function(a){var c="",g=o(a),k=b(a,!0),c=c+"{"+m(a),c=c+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),c=c+(""!=g?","+g:"")+(""!=k?","+k:"")+","+('"OutputType":"'+a.RealType+'"'),c=c+","+('"SortAscendingForced":'+d(a)),c=c+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),c=c+","+('"RecordsetCacheInfo":'+n(a)),c=c+","+('"ReturnSampleData":'+a.ReturnSampleData),c=c+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+
encodeURIComponent(c+"}")},AttributeValues:function(a,c,g,k,d){var e="",l=o(a),y=b(a,!0),e=e+"{"+m(a),e=e+","+('"DataField":"'+c+'"')+","+('"PageNumber":'+g)+","+('"PageSize":'+k)+","+('"Filter":"'+d+'"')+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),e=e+(""!=l?","+l:"")+(""!=y?","+y:"")+","+('"OutputType":"'+a.RealType+'"'),e=e+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),e=e+","+('"RecordsetCacheInfo":'+n(a)),e=e+","+('"ReturnSampleData":'+a.ReturnSampleData),e=e+","+
('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(e+"}")},TablePageData:function(a,c,g,d,q,e,l,y){var C="",u=o(a),s=b(a,!0),l=k(l),C=C+"{"+m(a),C=C+","+('"PageNumber":'+c)+","+('"PageSize":'+(gx.lang.gxBoolean(a.Paging)?g:0)),C=C+","+('"ReturnTotPages":'+d)+","+('"Order":'+('{"DataField":"'+q+'","Type":"'+e+'"}'))+(""!=l?","+l:"")+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),C=C+(""!=u?","+u:"")+(""!=s?","+s:"")+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),
C=C+","+('"RecordsetCacheInfo":'+n(a)),C=C+","+('"LayoutChanged":'+y)+","+('"ReturnSampleData":'+a.ReturnSampleData),C=C+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(C+"}")},PivotTablePageData:function(a,c,g,d,q,e,l,y,C){for(var u="",s=o(a),G=b(a,!0),p="",J=!1,z=0;void 0!=q[z];z++)J=!0,p+=""!=p?",":"",p+="{",p+='"DataField":"'+q[z].DataField+'"',p+=",",p+='"Visible":'+!q[z].Hidden,p+=",",p+='"Axis":"'+q[z].Axis.Type+'"',p+=",",p+='"Position":'+(qv.util.IsInteger(q[z].Axis.Position)?
q[z].Axis.Position:0),p+=",",p+='"Order":"'+q[z].Order+'"',p+=",",p+='"Subtotals":'+q[z].Subtotals,p+="}";J&&(p='"AxesInfo":['+p+"]");q=p;p="";J=!1;for(z=0;void 0!=e[z];z++)J=!0,p+=""!=p?",":"",p+="{",p+='"DataField":"'+e[z].DataField+'"',p+=",",p+='"Visible":'+!e[z].Hidden,p+=",",p+='"Position":'+(qv.util.IsInteger(e[z].Position)?e[z].Position:0),p+="}";J&&(p='"DataInfo":['+p+"]");e=p;l=k(l);p="";J=!1;for(z=0;void 0!=y[z];z++){J=!0;p+=""!=p?",":"";p+="{";p+='"DataField":"'+y[z].DataField+'"';p+=
",";p+='"NullExpanded":'+y[z].NullExpanded;strExpandedValues="";existValues=!1;for(var A=0;void 0!=y[z].NotNullValues.Expanded[A];A++)existValues=!0,strExpandedValues+=""!=strExpandedValues?",":"",strExpandedValues+='"'+encodeURIComponent(y[z].NotNullValues.Expanded[A])+'"';existValues&&(strExpandedValues=',"Expanded":['+strExpandedValues+"]");strCollapsedValues="";existValues=!1;for(A=0;void 0!=y[z].NotNullValues.Collapsed[A];A++)existValues=!0,strCollapsedValues+=""!=strCollapsedValues?",":"",strCollapsedValues+=
'"'+encodeURIComponent(y[z].NotNullValues.Collapsed[A])+'"';existValues&&(strCollapsedValues=',"Collapsed":['+strCollapsedValues+"]");p+=",";p+='"NotNullValues":{"DefaultAction":"'+y[z].NotNullValues.DefaultAction+'"'+strExpandedValues+strCollapsedValues+"}";p+="}"}J&&(p='"ExpandCollapse":['+p+"]");y=p;u=u+"{"+m(a);u=u+","+('"PageNumber":'+c)+","+('"PageSize":'+(gx.lang.gxBoolean(a.Paging)?g:0));u=u+","+('"ReturnTotPages":'+d)+","+('"ShowDataLabelsIn":"'+a.ShowDataLabelsIn+'"');u=u+","+('"TotalForRows":"'+
a.TotalForRows+'"');u=u+","+('"TotalForColumns":"'+a.TotalForColumns+'"');u=u+(""!=q?","+q:"")+(""!=e?","+e:"")+(""!=l?","+l:"")+(""!=y?","+y:"")+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:"");u=u+(""!=s?","+s:"")+(""!=G?","+G:"")+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange);u=u+","+('"RecordsetCacheInfo":'+n(a));u=u+","+('"LayoutChanged":'+C)+","+('"ReturnSampleData":'+a.ReturnSampleData);u=u+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(u+
"}")},getQueryParameters:function(a){a="{"+m(a);return"Data="+encodeURIComponent(a+"}")},DashboardSpec:function(b){var f="";b.Object&&(f=a(b.Object));b=JSON.stringify({ApplicationNamespace:b.ApplicationNamespace,ObjectName:f,Alt_ObjectId:0});return"Data="+encodeURIComponent(b)},_priv:{RuntimeParametersJSON:function(a){return o(a)},RuntimeFieldsJSON:function(a){return b(a)},SdtWithValuesJSON:function(a,b,f,k,m){return c(a,b,f,k,m)}}}}(),RuntimeParametersJSON:function(a){return this.postInfo._priv.RuntimeParametersJSON(a)},
RuntimeFieldsJSON:function(a,b){return this.postInfo._priv.RuntimeFieldsJSON(a,b)},getXMLHttpRequest:function(){if(window.XMLHttpRequest)return new window.XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return null}},CallServerSync:function(a,b,c,k){k=k||[];k.unshift(a);a=b.call(qv.services.url,a);c=c.apply(qv.services.postInfo,k);k=qv.services.getXMLHttpRequest();k.open("POST",a,!1);k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");k.send(c);return k.responseText},
createAsyncServerCallFn:function(a,b,c,k,d){return function(m,h){h=h||[];h.unshift(a);var r=function(b){d&&a.RealType!=QueryViewerOutputType.Card&&(b=d.call(qv.util.css,b));m(b,a)};if(gx.lang.gxBoolean(a.IsExternalQuery))r(a.ExternalQueryResultObj()[k]);else{var g=b.call(qv.services.url,a),x=c.apply(qv.services.postInfo,h),B=qv.services.getXMLHttpRequest(),e=function(){B.readyState==STATE_DONE&&B.status==STATUS_OK&&r(B.responseText)};gx.util.browser.isIE()?B.onreadystatechange=e:B.onload=e;B.open("POST",
g);B.setRequestHeader("Content-Type","application/x-www-form-urlencoded");B.send(x)}}},parseRecordsetCacheKeyXML:function(a){""!=a.xml.recordsetCacheKey&&(a.RecordsetCache=a.RecordsetCache||{},a.RecordsetCache.OldKey=a.RecordsetCache.ActualKey?a.RecordsetCache.ActualKey:"",a.RecordsetCache.ActualKey=a.xml.recordsetCacheKey)},parseDataXML:function(a){if(""!=a.xml.data){var b=qv.util.dom.xmlDocument(a.xml.data),b=qv.util.dom.getSingleElementByTagName(b,"Recordset");a.Data=a.Data||{};b=gx.util.browser.isIE()?
qv.util.dom.getMultipleElementsByTagName(qv.util.dom.getSingleElementByTagName(b,"Page"),"Record"):qv.util.dom.getMultipleElementsByTagName(b,"Record");a.Data.Rows=[];for(var c=0;c<b.length;c++){for(var k={},d=0;d<b[c].childNodes.length;d++){var m=b[c].childNodes[d];1==m.nodeType&&(k[m.nodeName]=1==m.childNodes.length?m.childNodes[0].nodeValue:"")}a.Data.Rows.push(k)}}},parseMetadataXML:function(a){function c(a,b){if("greaterequal"==a&&"lessequal"==b)return QueryViewerConditionOperator.Interval;switch(a){case "equal":return QueryViewerConditionOperator.Equal;
case "less":return QueryViewerConditionOperator.LessThan;case "greater":return QueryViewerConditionOperator.GreaterThan;case "lessequal":return QueryViewerConditionOperator.LessOrEqual;case "greaterequal":return QueryViewerConditionOperator.GreaterOrEqual;case "notequal":return QueryViewerConditionOperator.NotEqual}}function d(a,b,e,c){var f={},a=qv.util.dom.getSingleElementByTagName(a,b);if(null!=a){f.GroupFound=!0;f.TotalValueFound=!1;e=qv.util.dom.getMultipleElementsByTagName(a,e);f.Values=[];
for(a=0;a<e.length;a++)b=null!=e[a].firstChild?e[a].firstChild.nodeValue:"","TOTAL"==b&&c?f.TotalValueFound=!0:f.Values.push(b)}else f.GroupFound=!1;return f}function k(a){if(0==a.indexOf("gxpl_cssReplace("))var b=a.indexOf("gxpl_cssReplace("),e=a.indexOf(")",b),a=a.substring(b+16,e);return a}function n(a){for(var a=qv.util.dom.getSingleElementByTagName(a,"formatValues"),a=null!=a?qv.util.dom.getMultipleElementsByTagName(a,"value"):[],b=[],e=0;e<a.length;e++){var c={};c.Value=qv.util.trim(null!=a[e].firstChild?
a[e].firstChild.nodeValue:"");c.StyleOrClass=k(a[e].getAttribute("format"));c.ApplyToRowOrColumn="yes"==a[e].getAttribute("recursive");b.push(c)}return b}function m(a){for(var a=qv.util.dom.getSingleElementByTagName(a,"conditionalFormats"),a=null!=a?qv.util.dom.getMultipleElementsByTagName(a,"rule"):[],b=[],e=0;e<a.length;e++){var f={};f.Operator=c(a[e].getAttribute("op1"),a[e].getAttribute("op2"));f.Value1=parseFloat(a[e].getAttribute("value1"));f.Operator==QueryViewerConditionOperator.Interval&&
(f.Value2=parseFloat(a[e].getAttribute("value2")));f.StyleOrClass=k(a[e].getAttribute("format"));b.push(f)}return b}if(""!=a.xml.metadata){var h=qv.util.dom.xmlDocument(a.xml.metadata),r=qv.util.dom.getSingleElementByTagName(h,"OLAPCube"),h=r.getAttribute("Version");if(null==h||parseInt(h)==METADATA_VERSION){a.Metadata=a.Metadata||{};a.Metadata.TextForNullValues=r.getAttribute("textForNullValues");var g=qv.util.dom.getMultipleElementsByTagName(r,"OLAPDimension");a.Metadata.Axes=[];for(h=0;h<g.length;h++){var x=
{};x.Name=g[h].getAttribute("name");x.Title=g[h].getAttribute("displayName");x.DataField=g[h].getAttribute("dataField");x.DataType=g[h].getAttribute("dataType");x.Visible=g[h].getAttribute("visible");x.Axis=g[h].getAttribute("axis");x.Picture=g[h].getAttribute("picture");if(""==x.Picture)switch(x.DataType){case QueryViewerDataType.Integer:x.Picture="ZZZZZZZZZZZZZZ9";break;case QueryViewerDataType.Real:x.Picture="ZZZZZZZZZZZZZZ9.99";break;case QueryViewerDataType.Date:x.Picture="99/99/9999";break;
case QueryViewerDataType.DateTime:x.Picture="99/99/9999 99:99:99";break;case QueryViewerDataType.GUID:x.Picture="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"}x.CanDragToPages=qv.util.dom.getBooleanAttribute(g[h],"canDragToPages",!0);x.RaiseItemClick=qv.util.dom.getBooleanAttribute(g[h],"raiseItemClick",!0);x.IsComponent=qv.util.dom.getBooleanAttribute(g[h],"isComponent",!1);x.Style=g[h].getAttribute("format");var B=d(g[h],"include","value",!0),e=d(g[h],"exclude","value",!0),l=d(g[h],"expand","value",!1),
y=d(g[h],"customOrder","Value",!1);x.Subtotals="no"==g[h].getAttribute("summarize")?QueryViewerSubtotals.No:e.GroupFound&&e.TotalValueFound?QueryViewerSubtotals.Hidden:QueryViewerSubtotals.Yes;x.Filter={};!B.GroupFound&&!e.GroupFound?(x.Filter.Type=QueryViewerFilterType.ShowAllValues,x.Filter.Values=[]):!B.GroupFound&&e.GroupFound&&0==e.Values.length&e.TotalValueFound?(x.Filter.Type=QueryViewerFilterType.ShowAllValues,x.Filter.Values=[]):B.GroupFound&&!e.GroupFound&&0==B.Values.length?(x.Filter.Type=
QueryViewerFilterType.HideAllValues,x.Filter.Values=[]):(x.Filter.Type=QueryViewerFilterType.ShowSomeValues,x.Filter.Values=B.Values);x.ExpandCollapse={};l.GroupFound?l.GroupFound&&0==l.Values.length?(x.ExpandCollapse.Type=QueryViewerExpandCollapseType.CollapseAllValues,x.ExpandCollapse.Values=[]):(x.ExpandCollapse.Type=QueryViewerExpandCollapseType.ExpandSomeValues,x.ExpandCollapse.Values=l.Values):(x.ExpandCollapse.Type=QueryViewerExpandCollapseType.ExpandAllValues,x.ExpandCollapse.Values=[]);x.Order=
{};B=g[h].getAttribute("order");null==B?(x.Order.Type=QueryViewerAxisOrderType.None,x.Order.Values=[]):(x.Order.Type=qv.util.capitalize(B),x.Order.Values=x.Order.Type==QueryViewerAxisOrderType.Custom?y.Values:[]);x.ValuesStyles=n(g[h]);a.Metadata.Axes.push(x)}r=qv.util.dom.getMultipleElementsByTagName(r,"OLAPMeasure");a.Metadata.Data=[];for(h=0;h<r.length;h++)g={},g.Name=r[h].getAttribute("name"),g.Title=r[h].getAttribute("displayName"),g.DataField=r[h].getAttribute("dataField"),g.Aggregation=r[h].getAttribute("aggregation"),
g.DataType=r[h].getAttribute("dataType"),g.Visible=r[h].getAttribute("visible"),g.Picture=r[h].getAttribute("picture"),g.RaiseItemClick=qv.util.dom.getBooleanAttribute(r[h],"raiseItemClick",!0),g.IsComponent=qv.util.dom.getBooleanAttribute(r[h],"isComponent",!1),""==g.Picture&&(g.Picture=g.DataType==QueryViewerDataType.Integer?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99"),g.Aggregation=qv.util.capitalize(g.Aggregation),g.TargetValue=parseFloat(r[h].getAttribute("targetValue")),g.MaximumValue=parseFloat(r[h].getAttribute("maximumValue")),
g.Style=r[h].getAttribute("format"),0>=g.TargetValue&&(g.TargetValue=100),0>=g.MaximumValue&&(g.MaximumValue=100),g.ConditionalStyles=m(r[h]),x=qv.util.dom.getCharacterAttribute(r[h],"formula",""),g.IsFormula=""!=x,g.Formula=x,a.Metadata.Data.push(g);a.Metadata.ParserResult=b(!0,"")}else a.Metadata.ParserResult=b(!1,gx.getMessage("GXPL_QViewerWrongMetadataVersion").replace("{0}",METADATA_VERSION))}},GetDataIfNeeded:function(a,b){a.Data=a.Data||{};a.Data.LastServiceCallKey=a.Data.LastServiceCallKey||
{};void 0==a.xml.data||c(a,a.Data.LastServiceCallKey)||gx.lang.gxBoolean(a.IsExternalQuery)?a.calculatePivottableData(b):b(a.xml.data,a)},GetMetadataIfNeeded:function(a,b){a.Metadata=a.Metadata||{};a.Metadata.LastServiceCallKey=a.Metadata.LastServiceCallKey||{};var c;if(!(c=void 0==a.xml.metadata)){c=a.Metadata.LastServiceCallKey;var d=qv.services.RuntimeFieldsJSON(a),n=qv.services.RuntimeParametersJSON(a),m;b:switch(a.RealType){case QueryViewerOutputType.Table:m="IgnoreType";break b;case QueryViewerOutputType.Chart:case QueryViewerOutputType.Card:m=
"IgnoreTypeAndAxis";break b;default:m="IgnoreNot"}a.ObjectName!=c.ObjectName||a.ObjectType!=c.ObjectType||a.ObjectId!=c.ObjectId||a.Object!=c.Object||d!=c.RuntimeFieldsJSON||n!=c.RuntimeParametersJSON||m!=c.MetadataType?(c.ObjectName=a.ObjectName,c.ObjectType=a.ObjectType,c.ObjectId=a.ObjectId,c.Object=a.Object,c.RuntimeFieldsJSON=d,c.RuntimeParametersJSON=n,c.MetadataType=m,c=!0):c=!1;c=c||gx.lang.gxBoolean(a.IsExternalQuery)}c?a.calculatePivottableMetadata(b):b(a.xml.metadata,a)},GetDashboardSpecIfNeeded:function(b,
c){b.DashboardSpec=b.DashboardSpec||"";b.LastServiceCallKey=b.LastServiceCallKey||{};var d;if(!(d=void 0==b.DashboardSpec))if(d=b.LastServiceCallKey,b.Object){var k=a(b.Object);k!=d.ObjectName?(d.ObjectName=k,d=!0):d=!1}else d=""==b.DashboardSpec;d?(b.LoadingSpec=!0,b.GetDashboardSpec(c)):c(b.DashboardSpec,b)},GetRecordsetCacheKeyIfNeeded:function(a,b){a.UseRecordsetCache&&!gx.lang.gxBoolean(a.IsExternalQuery)?(a.RecordsetCache=a.RecordsetCache||{},a.RecordsetCache.LastServiceCallKey=a.RecordsetCache.LastServiceCallKey||
{},void 0==a.xml.recordsetCacheKey||c(a,a.RecordsetCache.LastServiceCallKey)?a.getRecordsetCacheKey(b):b(a.xml.recordsetCacheKey,a)):b("",a)},IsObjectSet:function(a){return a.Object||""!=a.ObjectName||""!=a.ObjectType&&0!=a.ObjectId}}}();
qv.pivot=function(){function a(a){var c=qv.util.GetContainerControlClasses(a);""!=c&&qv.util.SetUserControlClass(a,c);c=a.userControlId()+"_"+a.ObjectName.replace(/,/g,"").replace(/\./g,"")+"_pivot_page";a.pivotParams={};a.pivotParams.page=c;var d=a.userControlId()+"_"+a.ObjectName.replace(/,/g,"").replace(/\./g,"")+"_pivot_content";a.pivotParams.content=d;if(a._ControlRenderedTo!=a.RealType||0==jQuery("#"+d).length)if(a._ControlRenderedTo!=a.RealType&&a.RealType==QueryViewerOutputType.PivotTable){var o=
qv.util.dom.getEmptyContainer(a);a.Title&&qv.util.dom.createDiv(o,c.replace("_pivot_page","_title_div"),"","",{},"");qv.util.dom.createDiv(o,c,"","",{},"");qv.util.dom.createDiv(o,d,"","",{},"")}else a.Title&&jQuery("#"+a.ContainerName).find(".pivot_title_div").attr("id",c.replace("_pivot_page","_title_div")),jQuery("#"+a.ContainerName).find(".pivot_filter_div").attr("id",c),jQuery("#"+a.ContainerName).find(".conteiner_table_div").attr("id",d);a.pivotParams.container=a.getContainerControl();a.pivotParams.RealType=
a.RealType;a.pivotParams.ObjectName=a.ObjectName;a.pivotParams.ControlName=a.ControlName;a.pivotParams.PageSize=a.Paging&&"false"!=a.Paging?a.PageSize:void 0;a.pivotParams.metadata=a.xml.metadata;c=gx.lang.gxBoolean(a.IsExternalQuery)?a.xml.data:a.RealType==QueryViewerOutputType.Table?a.ServerPagingForTable?a.xml.pageData:a.xml.data:a.ServerPagingForPivotTable?a.xml.pageData:a.xml.data;a.pivotParams.data=c;a.pivotParams.UcId=a.userControlId();a.pivotParams.AutoResize=gx.lang.gxBoolean(a.AutoResize)||
gx.lang.gxBoolean(a.ShrinkToFit);a.pivotParams.DisableColumnSort=a.DisableColumnSort;a.pivotParams.RememberLayout=a.RememberLayout;a.pivotParams.ShowDataLabelsIn=a.ShowDataLabelsIn;a.pivotParams.ServerPaging=a.ServerPagingForTable&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.ServerPagingPivot=a.ServerPagingForPivotTable&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.ServerPagingCacheSize=0;a.pivotParams.UseRecordsetCache=a.UseRecordsetCache&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.AllowSelection=
a.AllowSelection;a.pivotParams.SelectLine=!0;a.pivotParams.TotalForColumns=a.TotalForColumns;a.pivotParams.TotalForRows=a.TotalForRows;a.pivotParams.Title=qv.util.getTranslation(a.Title);void 0!=OAT.Loader?renderJSPivot(a.pivotParams,qv.collection,a):OAT.Loader.addListener(function(){renderJSPivot(a.pivotParams,qv.collection,a)});a._ControlRenderedTo=a.RealType;a.RealType==QueryViewerOutputType.Table&&qv.util.hideActivityIndicator(a)}function c(b){for(var c="",d="",o=0;o<b.Metadata.Axes.length;o++){var k=
b.Metadata.Axes[o];if(k.Order.Type==QueryViewerAxisOrderType.Ascending||k.Order.Type==QueryViewerAxisOrderType.Descending){c=k.DataField;d=k.Order.Type;break}}b.getPageDataForTable(function(b,c){(new Date).getTime();qv.util.anyError(b)?(errMsg=qv.util.getErrorFromText(b),qv.util.renderError(c,errMsg)):(""!=b&&(c.xml.pageData=b),a(c))},[1,b.PageSize,!0,c,d,[],!1])}function d(a,c){var d=[];if(null!=a)for(var o=-1,k=0;k<a.childNodes.length;k++)if("ITEM"==a.childNodes[k].nodeName){var n=a.childNodes[k].getAttribute("name");
if(0>c.indexOf(n)){o++;d[o]={};d[o].Name=n;d[o].Values=[];for(var n=-1,m=a.childNodes[k],h=0;h<a.childNodes[k].childNodes.length;h++)if("VALUES"==a.childNodes[k].childNodes[h].nodeName){m=a.childNodes[k].childNodes[h];break}for(h=0;h<m.childNodes.length;h++)"VALUE"==m.childNodes[h].nodeName&&(n++,d[o].Values[n]=null!=m.childNodes[h].firstChild?m.childNodes[h].firstChild.nodeValue:"")}}return d}return{tryToRenderPivotTable:function(b){var f="",d=(new Date).getTime();b.xml=b.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(b,
function(b,k){var n=!1;b!=k.xml.recordsetCacheKey&&(k.xml.recordsetCacheKey=b,n=!0);qv.util.anyError(b)?(f=qv.util.getErrorFromText(b),qv.util.renderError(k,f)):(n&&qv.services.parseRecordsetCacheKeyXML(k),qv.services.GetMetadataIfNeeded(k,function(b,h){var k=false;if(b!=h.xml.metadata){h.xml.metadata=b;k=true}var g=(new Date).getTime();if(qv.util.anyError(b)){f=qv.util.getErrorFromText(b);qv.util.renderError(h,f)}else{k&&qv.services.parseMetadataXML(h);if(h.Metadata.ParserResult.Success)if(h.ServerPagingForTable&&
h.RealType==QueryViewerOutputType.Table&&!gx.lang.gxBoolean(h.IsExternalQuery)){k=false;OAT.getStateWhenServingPaging&&(k=OAT.getStateWhenServingPaging(h.userControlId()+"_"+h.ObjectName,h.ObjectName));!k||!h.RememberLayout?c(h,d,g):a(h)}else if(h.ServerPagingForPivotTable&&h.RealType==QueryViewerOutputType.PivotTable&&!gx.lang.gxBoolean(h.IsExternalQuery)){k=false;OAT.getStateWhenServingPaging&&(k=OAT.getStateWhenServingPaging(h.userControlId()+"_"+h.ObjectName,h.ObjectName));a(h)}else qv.services.GetDataIfNeeded(h,
function(b,c){if(b!=c.xml.data)c.xml.data=b;(new Date).getTime();if(qv.util.anyError(b)){f=qv.util.getErrorFromText(b);qv.util.renderError(c,f)}else a(c)});else qv.util.renderError(h,h.Metadata.ParserResult.Message)}}))})},GetMetadataPivot:function(a){var c=qv.util.GetDesigntimeMetadata(a);if(0<c.length){for(var d=a.oat_element.getMetadataXML(),d=qv.pivot.GetRuntimeMetadata(d,a.RealType),o=[],a=qv.util.GetOrderedElementsKeys(a,d),k=0;k<a.length;k++)for(var n=parseInt(a[k].substr(6,4)),n=d[n],m,h=
0;h<c.length;h++)if(m=c[h],m.Name==n.Name){m=qv.util.cloneObject(m);qv.util.MergeFields(n,m);o.push(m);break}return o}return[]},GetRuntimeMetadata:function(a,c){function d(a,b,e,c,f){var b=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(a,b)),l=[];if(b==c&&(a=qv.util.dom.getSingleElementByTagName(a,e),null!=a)){a=qv.util.dom.getMultipleElementsByTagName(a,"value");for(e=0;e<a.length;e++)c=qv.util.trim(qv.util.dom.getValueNode(a[e])),null!=c&&("TOTAL"!=c.toUpperCase()||!f)&&l.push(c)}return{Type:b,
Values:l}}var o=qv.util.dom.xmlDocument(a),o=qv.util.dom.getSingleElementByTagName(o,"OLAPCube"),k=[],n;n=qv.util.dom.getMultipleElementsByTagName(o,"OLAPDimension");for(var m=0;m<n.length;m++){var h={},r=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[m],"name")),g="true"==qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[m],"hidden")),x=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[m],"axis")),B=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[m],
"position")),e=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[m],"summarize")),l=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[m],"order"));h.Name=r;h.Type=QueryViewerElementType.Axis;h.Hidden=g;h.Axis=null!=x&&""!=x&&"null"!=x?qv.util.capitalize(x):null;h.Position=B;h.Order=null!=l&&""!=l&&"null"!=l?qv.util.capitalize(l):null;c==QueryViewerOutputType.Table?(h.Filter=d(n[m],"","include",null,!0),h.Filter.Type=QueryViewerFilterType.ShowSomeValues):(h.Subtotals=
"no"==e?QueryViewerSubtotals.No:QueryViewerSubtotals.Yes,h.Filter=d(n[m],"filterType","include",QueryViewerFilterType.ShowSomeValues,!0),h.ExpandCollapse=d(n[m],"collapseType","includeExpand",QueryViewerExpandCollapseType.ExpandSomeValues,!1));k.push(h)}n=qv.util.dom.getMultipleElementsByTagName(o,"OLAPMeasure");for(m=0;m<n.length;m++)h={},r=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[m],"name")),g="true"==qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[m],"hidden")),
B=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[m],"position")),h.Name=r,h.Type=QueryViewerElementType.Datum,h.Hidden=g,h.Position=B,k.push(h);return k},GetDataPivot:function(a){return a.oat_element.getDataXML()},GetFilteredDataPivot:function(a){return a.oat_element.getFilteredDataXML()},onOAT_PIVOTDragAndDropEvent:function(a,c){if(a.RealType==QueryViewerOutputType.PivotTable&&(IsQueryObjectPreview()&&window.external.SendText(a.ControlName,c),a.DragAndDrop)){var d=qv.util.dom.xmlDocument(c),
d=qv.util.dom.selectXPathNode(d,"/DATA");a.DragAndDropData.Name=d.getAttribute("name");a.DragAndDropData.Type=QueryViewerElementType.Axis;axis=d.getAttribute("axis");a.DragAndDropData.Axis="rows"==axis?QueryViewerAxisType.Rows:"columns"==axis?QueryViewerAxisType.Columns:QueryViewerAxisType.Pages;a.DragAndDropData.Position=d.getAttribute("position");a.DragAndDrop()}},onItemClickEvent:function(a,c,q){var o,k;if(a.ItemClick&&!q||a.ItemDoubleClick&&q){k=q?k=a.ItemDoubleClickData:a.ItemClickData;var n=
qv.util.dom.xmlDocument(c),m=qv.util.dom.selectXPathNode(n,"/DATA/ITEM"),c=qv.util.dom.selectXPathNode(n,"/DATA/CONTEXT/RELATED"),n=qv.util.dom.selectXPathNode(n,"/DATA/CONTEXT/FILTERS");k.Name=m.getAttribute("name");o=m.getAttribute("location");switch(o){case "rows":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Rows;break;case "columns":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Columns;break;case "pages":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Pages;
break;default:k.Type=QueryViewerElementType.Datum,k.Axis=""}k.Value=null!=m.firstChild?m.firstChild.nodeValue:"";k.Selected="true"==m.getAttribute("selected");m=[];for(o=0;o<a.Metadata.Axes.length;o++)a.Metadata.Axes[o].IsComponent&&m.push(a.Metadata.Axes[o].Name);for(o=0;o<a.Metadata.Data.length;o++)a.Metadata.Data[o].IsComponent&&m.push(a.Metadata.Data[o].Name);k.Context=d(c,m);k.Filters=d(n,m);q?a.ItemDoubleClick():a.ItemClick()}},onItemExpandCollapseEvent:function(a,c,d){var o;IsQueryObjectPreview()&&
window.external.SendText(a.ControlName,c);if(a.ItemExpand&&!d||a.ItemCollapse&&d){o=d?o=a.ItemCollapseData:a.ItemExpandData;var c=qv.util.dom.xmlDocument(c),k=qv.util.dom.selectXPathNode(c,"/DATA/ITEM"),c=qv.util.dom.selectXPathNode(c,"/DATA/CONTEXT/EXPANDEDVALUES");o.Name=k.getAttribute("name");o.Value=k.firstChild.nodeValue;o.ExpandedValues=[];for(var k=-1,n=0;n<c.childNodes.length;n++)"VALUE"==c.childNodes[n].nodeName&&(k++,o.ExpandedValues[k]=c.childNodes[n].firstChild.nodeValue);d?a.ItemCollapse():
a.ItemExpand()}},Select:function(a,c){a.oat_element.selectValue(c)},Deselect:function(a){a.oat_element.deselectValue()}}}();var HCChart,_highChartsDrawPointsWrapped,DEFAULTCHARTSPACING=10;
qv.chart=function(){function a(a){return a.RealChartType==QueryViewerChartType.Timeline||a.RealChartType==QueryViewerChartType.SmoothTimeline||a.RealChartType==QueryViewerChartType.StepTimeline}function c(b){return a(b)||b.RealChartType==QueryViewerChartType.Sparkline}function d(a){return a.RealChartType==QueryViewerChartType.Pie||a.RealChartType==QueryViewerChartType.Pie3D||a.RealChartType==QueryViewerChartType.Doughnut||a.RealChartType==QueryViewerChartType.Doughnut3D}function b(a){return a.RealChartType==
QueryViewerChartType.Funnel||a.RealChartType==QueryViewerChartType.Pyramid}function f(a){return a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar||a.RealChartType==QueryViewerChartType.PolarArea}function q(a){return(a.RealChartType==QueryViewerChartType.ColumnLine||a.RealChartType==QueryViewerChartType.Column3DLine)&&1<a.Chart.Series.DataFields.length}function o(a){return a.RealChartType==QueryViewerChartType.CircularGauge||a.RealChartType==QueryViewerChartType.LinearGauge}
function k(a){return a.RealChartType==QueryViewerChartType.StackedColumn||a.RealChartType==QueryViewerChartType.StackedColumn3D||a.RealChartType==QueryViewerChartType.StackedColumn100||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100||a.RealChartType==QueryViewerChartType.StackedArea||a.RealChartType==QueryViewerChartType.StackedArea100||a.RealChartType==QueryViewerChartType.StackedLine||a.RealChartType==QueryViewerChartType.StackedLine100?!1:(a.PlotSeries==
QueryViewerPlotSeries.InSeparateCharts||d(a)||b(a))&&1<a.Chart.Series.DataFields.length}function n(a,b){for(var c=[],e=0;e<a.Charts.length;e++)for(var d=0;d<a.Charts[e].series.length;d++)c.push(a.Charts[e].series[d].data[b]);return c}function m(a,b,e,c,d){for(var l=0;l<a.Charts.length;l++)if(b.id!=a.Charts[l].container.id)for(var h=0;h<a.Charts[l].series.length;h++){var f=a.Charts[l].series[h].data[e];c?(d&&f.setState("hover"),a.Charts[l].tooltip.hide(0)):f.setState()}}function h(a){switch(a){case QueryViewerChartType.Column:case QueryViewerChartType.Column3D:case QueryViewerChartType.StackedColumn:case QueryViewerChartType.StackedColumn3D:case QueryViewerChartType.StackedColumn100:case QueryViewerChartType.PolarArea:return"column";
case QueryViewerChartType.Bar:case QueryViewerChartType.StackedBar:case QueryViewerChartType.StackedBar100:case QueryViewerChartType.LinearGauge:return"bar";case QueryViewerChartType.Area:case QueryViewerChartType.StackedArea:case QueryViewerChartType.StackedArea100:case QueryViewerChartType.FilledRadar:case QueryViewerChartType.StepArea:return"area";case QueryViewerChartType.SmoothArea:return"areaspline";case QueryViewerChartType.Line:case QueryViewerChartType.StackedLine:case QueryViewerChartType.StackedLine100:case QueryViewerChartType.Radar:case QueryViewerChartType.Timeline:case QueryViewerChartType.StepTimeline:case QueryViewerChartType.Sparkline:case QueryViewerChartType.StepLine:return"line";
case QueryViewerChartType.SmoothLine:case QueryViewerChartType.SmoothTimeline:return"spline";case QueryViewerChartType.ColumnLine:case QueryViewerChartType.Column3DLine:return"column";case QueryViewerChartType.Pie:case QueryViewerChartType.Pie3D:case QueryViewerChartType.Doughnut:case QueryViewerChartType.Doughnut3D:return"pie";case QueryViewerChartType.Funnel:return"funnel";case QueryViewerChartType.Pyramid:return"pyramid";case QueryViewerChartType.CircularGauge:return"solidgauge";default:return"line"}}
function r(a,b,e,c,d,l,h){function f(a,b){var c={};c.Name=a.Name;var e=qv.util.GetPictureProperties(a.DataType,a.Picture),e=qv.util.ApplyPicture(b,a.Picture,a.DataType,e);c.Values=[e];return c}a.Name=e;a.Type=c;a.Axis="";a.Value=d;a.Selected=l;a.Context=[];for(e=0;e<b.Metadata.Axes.length;e++)c=b.Metadata.Axes[e],c.IsComponent||(c=f(c,h[c.DataField]),a.Context.push(c));for(e=0;e<b.Metadata.Data.length;e++)c=b.Metadata.Data[e],c.IsComponent||(c=f(c,h[c.DataField]),a.Context.push(c));a.Filters=[]}function g(a,
b){for(var c=!1,e=0;e<a.length;e++)for(var d=a[e],l=0;l<d.series.length;l++){var h=d.series[l].points[b];if(h.selected){h.select();break}else h.select(!0,0<l),c=!0}return c}function x(a){for(var b=0;b<a.length;b++){var c=a[b].getSelectedPoints();0<c.length&&c[0].select(!1,!1)}}function B(a,b){var c=a.Chart.Categories.DataFields,e=a.Chart.Series.DataFields;return b.map(function(a){var b={};c.forEach(function(c){b[c]=a.x});e.forEach(function(c,e){b[c]=a["y"+(e+1)]});return b})}function e(b){var c=qv.collection[this.chart.options.qv.viewerId],
e=k(c)?this.chart.options.qv.seriesIndex:b.point.series.index,d=!1;if(c.SelectionAllowed())if("Point"==c.SelectionType){if(b.point.select(),d=b.point.selected,c.PlotSeries==QueryViewerPlotSeries.InSeparateCharts&&d)for(var l=0;l<c.Charts.length;l++){var h=c.Charts[l].series[0].points[b.point.index];h!=b.point&&h.select(!1)}}else d=g(c.Charts,b.point.index);c.ItemClick&&c.Metadata.Data[e].RaiseItemClick&&(e=c.Chart.Series.ByIndex[e],l=qv.util.formatNumber(b.point.y,e.NumberFormat.DecimalPrecision,
e.Picture,!1),b=a(c)?c.Chart.GroupByPoints[b.point.index]:c.Data.Rows[b.point.index],r(c.ItemClickData,c,e.FieldName,QueryViewerElementType.Datum,l,d,b),c.ItemClick())}function l(a){return qv.util.dom.createSpan(null,"","","",{fontWeight:"bold"},null,a).outerHTML}function y(a){return qv.util.dom.createSpan(null,"","","",{fontWeight:"bold",textAlign:"right"},null,a).outerHTML}function C(a,b){k(b);var c=Math.min(b.getContainerControl().offsetHeight,b.getContainerControl().offsetWidth)/(k(b)?b.Chart.Series.DataFields.length:
1)/13;return qv.util.dom.createSpan(null,"","","",{color:K(b,a),fontSize:c+"px"},null,qv.util.formatNumber(a.point.y,2,"ZZZZZZZZZZZZZZ9.99",!0)+"%").outerHTML}function u(a,b,c){if(c){var e;a.points?(c=a.points[0],e=c.point.index):(c=a.point,e=c.index);c=qv.collection[c.series.chart.options.qv.viewerId];e=n(c,e);var d=!a.key?!a.x?"":a.x:a.key,a=""!=d&&c.RealChartType!=QueryViewerChartType.Sparkline,h="";a&&(qv.util.isRTL(c)?h+=y(d):h+=l(d));for(var f=0;f<e.length;f++){var g=e[f],d=g.series.chart.options.qv.seriesIndex,
d=b[d];qv.util.isRTL(c)?(h+=(a||0<f?"<br/>":"")+qv.util.formatNumber(g.y,d.NumberFormat.DecimalPrecision,d.Picture,!1),h+=" :"+g.series.name):(h+=(a||0<f?"<br/>":"")+g.series.name+": ",h+=qv.util.formatNumber(g.y,d.NumberFormat.DecimalPrecision,d.Picture,!1))}return h}c=qv.collection[a.series.chart.options.qv.viewerId];d=a.series.index;d=b[d];b=o(c)?"ZZZZZZZZZZZZZZ9.99":d.Picture;e=o(c)?2:d.NumberFormat.DecimalPrecision;h=o(c);return qv.util.isRTL(c)?(o(c)?"%":"")+qv.util.formatNumber(a.point.y,e,
b,h)+"<b>: "+(""!=a.point.name?a.point.name:a.series.name)+"<b>":"<b>"+(""!=a.point.name?a.point.name:a.series.name)+"</b>: "+qv.util.formatNumber(a.point.y,e,b,h)+(o(c)?"%":"")}function s(a,b){function c(a){for(var b=a.y,e=a.series.data,a=a.index,d="",d=a,h=a+1;h<e.length&&e[h].y==b;h++)d=h;d<e.length-1&&d++;for(var l=a,h=a-1;0<=h&&e[h].y==b;h--)l=h;b=(e[d].x-e[l].x)/1E3;return d=" ("+gx.getMessage("GXPL_QViewerDuration")+": "+qv.util.seconsdToText(b)+")"}var e,d=a.points[0].series.chart.options.qv.viewerId,
h=qv.collection[d];k(h)?e=n(h,a.points[0].point.index):(e=[],jQuery.each(a.points,function(a,b){e.push(b.point)}));for(var f={},d=gx.dom.el(d+"_options_compare_enable").checked,g=0;g<e.length;g++){var m=(d?Math.trunc(e[g].series.index/2):e[g].series.index).toString();void 0==f[m]&&(f[m]=[]);f[m].push(e[g])}var g="",z,s;for(m in f)for(var u=parseInt(m),u=b[u],V=u.Name,t=f[m],p=0;void 0!=t[p];p++){var v=t[p],A=parseInt(v.real_x?v.real_x:v.x);d?s!=V&&(qv.util.isRTL(h)?g+=y(V)+"<br/>":g+=l(V)+"<br/>",
s=V):z!=A&&(qv.util.isRTL(h)?g+=y(v.name)+"<br/>":g+=l(v.name)+"<br/>",z=A);var A=h.RealChartType==QueryViewerChartType.StepTimeline?c(v):"",w,C=qv.util.dom.createSpan(null,"","","",{},null,qv.util.formatNumber(v.y,u.NumberFormat.DecimalPrecision,u.Picture,!1)).outerHTML;qv.util.isRTL(h)?w=qv.util.dom.createSpan(null,"","","",{},null,": "+(d?v.name:V)).outerHTML:w=qv.util.dom.createSpan(null,"","","",{},null,(d?v.name:V)+": ").outerHTML;qv.util.isRTL(h)?g+=A+C+w+"<br/>":g+=w+C+A+"<br/>"}return g}
function G(a){"undefined"===typeof _avoidSelectionEventHandler&&(_avoidSelectionEventHandler=!1);if(!_avoidSelectionEventHandler){t(W,"none");W=null;if(a.xAxis){var b=a.target.options.qv,c=a.xAxis[0];fa(a.target.options.qv.viewerId,100*((c.min-b.dataMin)/(b.dataMax-b.dataMin)),100*((c.max-b.dataMin)/(b.dataMax-b.dataMin)))}else fa(a.target.options.qv.viewerId,0,100);b=qv.collection[a.target.options.qv.viewerId];if(k(b)){var b=b.getContainerControl().id,b=jQuery("[id^="+b+"_chart]"),e=[];jQuery.each(b,
function(b,c){if(c.id!=a.target.renderTo.id){var d=jQuery("#"+c.id).highcharts();e.push(d)}});jQuery.each(e,function(b,e){a.xAxis?e.get("xaxis").setExtremes(c.min,c.max):(_avoidSelectionEventHandler=!0,e.zoomOut(),_avoidSelectionEventHandler=!1)})}}}function p(a,b,c,e,d){function h(a,b,c,e,d){function l(a,b){return a==QueryViewerDataType.Date?10==b.length:" "==b.charAt(10)}function f(a,b,c,e,d){var h=a.substr(0,4),l=a.substr(5,2),a=a.substr(8,2);e||(b=b.replace("M",""));d||(b=b.replace("D",""));for(var g=
"",k=0;k<b.length;k++)g+=0==k?"":"/",g+=b.charAt(k);b=g.replace("Y",c?h:h.substr(2,2));e&&(b=b.replace("M",l));d&&(b=b.replace("D",a));return b}var g,k;if(""!=a)switch(d=d||(c==QueryViewerDataType.Date?"Days":"Seconds"),d){case "Years":g=a.substr(0,4)+"-01-01";k=f(g,e,l(c,b),!1,!1);break;case "Months":g=a.substr(0,7)+"-01";k=f(g,e,l(c,b),!0,!1);break;case "Semesters":g="06">=a.substr(5,2)?"01":"07";g=a.substr(0,5)+g+"-01";d="06">=a.substr(5,2)?"01":"02";dateStrSemester=a.substr(0,5)+d+"-01";k=f(dateStrSemester,
e,l(c,b),!0,!1);break;case "Quarters":g="03">=a.substr(5,2)?"01":"06">=a.substr(5,2)?"04":"09">=a.substr(5,2)?"07":"10";g=a.substr(0,5)+g+"-01";d="03">=a.substr(5,2)?"01":"06">=a.substr(5,2)?"02":"09">=a.substr(5,2)?"03":"04";dateStrQuarter=a.substr(0,5)+d+"-01";k=f(dateStrQuarter,e,l(c,b),!0,!1);break;case "Weeks":a=new gx.date.gxdate(a,"Y4MD");g=gx.date.dow(a);a=gx.date.dtadd(a,-86400*(g-1));g=qv.util.dateToString(a,!1);k=f(g,e,l(c,b),!0,!0);break;case "Days":g=c==QueryViewerDataType.Date?a:a.substr(0,
10);k=c==QueryViewerDataType.Date?b:b.substr(0,10);break;case "Hours":g=a.substr(0,13)+":00:00";k=b.substr(0,13)+":00";break;case "Minutes":g=a.substr(0,16)+":00";k=b.substr(0,16);break;case "Seconds":g=a,k=b}else k=g="";return{dateStr:g,name:k}}var l;l={dateStr:null,name:null};var f=[],g=[],k=[];for(i=0;i<b.length;i++){var m=a.Values[i].ValueWithPicture,z=a.Values[i].Value,s,u;null!=b[i].Value?e==QueryViewerAggregationType.Count?(s=0,u=parseFloat(qv.util.trim(b[i].Value))):e==QueryViewerAggregationType.Average?
(s=parseFloat(qv.util.trim(b[i].Value_N)),u=parseFloat(qv.util.trim(b[i].Value_D))):(s=parseFloat(qv.util.trim(b[i].Value)),u=1):(s=null,u=0);m=h(z,m,c,gx.dateFormat,d);m.dateStr==l.dateStr||0==i?(null!=s&&(f.push(s),g.push(u)),0==i&&(l=m)):(l={x:l.dateStr,y:qv.util.aggregate(e,f,g),name:l.name},k.push(l),l=m,f=[s],g=[u])}0<f.length&&0<g.length&&(l={x:l.dateStr,y:qv.util.aggregate(e,f,g),name:l.name},k.push(l));return k}function J(b){var c,e,d;a(b)?(b=DEFAULTCHARTSPACING,c=0,e=DEFAULTCHARTSPACING,
d=0):d=e=c=b=DEFAULTCHARTSPACING;return[b,c,e,d]}function z(a,b){var c,e;c=3>=a?24:50/(a-1)-1;e=100-(c+1)*(b-1);return{Width:c,Center:e,LowerExtreme:e-c/2,UpperExtreme:e+c/2}}function A(a,b){var c=1/a/2,e=-0.5+(b-0.5)/a;return{Width:c,Center:e,LowerExtreme:e-c/2,UpperExtreme:e+c/2}}function K(a,b){function c(a){function b(a,c,e,d){d||(d=0);for(var h=0;h<c.length;h++){var l=c[h];if(l instanceof CSSStyleRule){if(l.selectorText&&0==l.selectorText.indexOf(e)){var g=l.selectorText.replace(e,"");a[g]=l.style.fill;
d++}if(d===HIGHCHARTS_MAX_COLORS)break}else l instanceof CSSImportRule?b(a,l.styleSheet.rules||l.styleSheet.cssRules,e,d):l instanceof CSSLayerBlockRule&&b(a,l.cssRules,e,d)}}if(!a._HighchartsDefaultColors){a._HighchartsDefaultColors=[];var e={},d,h;d=qv.util.GetQueryViewerStyleSheet(a);b(e,d.cssRules,".highcharts-color-");""!=a.Class&&(d=qv.util.GetThemeStyleSheet(a),h="."+qv.util.GetContainerControlClass(a)+" .highcharts-color-",b(e,d.cssRules,h));for(d=0;d<HIGHCHARTS_MAX_COLORS;d++)a._HighchartsDefaultColors.push(e[d.toString()])}return a._HighchartsDefaultColors}
var e;e=b.className&&0==b.className.indexOf("highcharts-color-")?parseInt(b.className.replace("highcharts-color-","")):b.colorIndex;e<HIGHCHARTS_MAX_COLORS?e=c(a)[e]:(e=HIGHCHARTS_CUSTOM_COLOR[e-HIGHCHARTS_MAX_COLORS],qv.util.color.IsHexaColor(e)&&(e="#"+e));return e}function F(a,b,c,e){if(!qv.util.IsNullColor(c)){if(c.IsDefault)a=c.ColorIndex;else{var d=c.Color,c=HIGHCHARTS_CUSTOM_COLOR.indexOf(d);if(0>c){HIGHCHARTS_CUSTOM_COLOR.push(d);var c=HIGHCHARTS_CUSTOM_COLOR.length-1,c=HIGHCHARTS_MAX_COLORS+
c,h=qv.util.color.IsHexaColor(d)?"#":"",d="."+HIGHCHARTS_COLOR_PREFIX+c+" {fill: "+h+d+"; stroke: "+h+d+";}",a=qv.util.GetThemeStyleSheet(a);a.insertRule(d,a.cssRules.length)}else c=HIGHCHARTS_MAX_COLORS+c;a=c}e?b.colorIndex=a:b.className=HIGHCHARTS_COLOR_PREFIX+a}}function D(g,t,v){function w(a){a.Chart.GroupByPoints=[];for(var b=[],c,e=0;e<a.Chart.Series.ByIndex.length;e++)c=a.Chart.Series.ByIndex[e],c=p(a.Chart.Categories,c.Points,qv.util.XAxisDataType(a),c.Aggregation,"Days"),b.push(c);a.Chart.GroupByPoints=
B(a,ja(b))}var r=qv.util.XAxisDataType(g)==QueryViewerDataType.Date?"Days":"Seconds",D={qv:{}};D.qv.viewerId=g.userControlId();D.qv.seriesIndex=v;D.chart=function(b,c){var e={styledMode:!0};e.spacing=J(b);if(k(b)){var d=b.userControlId(),d=a(b)?X(d):d;e.renderTo=document.getElementById(d+"_chart"+c.toString())}else e.renderTo=a(b)?document.getElementById(X(b.userControlId())):b.getContainerControl();q(b)||(e.type=h(b.RealChartType));b.RealChartType==QueryViewerChartType.Radar||b.RealChartType==QueryViewerChartType.FilledRadar||
b.RealChartType==QueryViewerChartType.PolarArea?e.polar=!0:b.RealChartType==QueryViewerChartType.Column3D||b.RealChartType==QueryViewerChartType.StackedColumn3D||b.RealChartType==QueryViewerChartType.Column3DLine?e.options3d={enabled:!0,alpha:15,beta:15,depth:50,viewDistance:25}:b.RealChartType==QueryViewerChartType.Pie3D||b.RealChartType==QueryViewerChartType.Doughnut3D?e.options3d={enabled:!0,alpha:45,beta:0}:a(b)&&(e.zoomType="x",e.resetZoomButton={theme:{display:"none"}},e.events={},e.events.selection=
function(a){G(a)});return e}(g,v);D.credits={enabled:!1};D.legend={enabled:1<g.Chart.Series.DataFields.length&&!k(g)||d(g)||b(g),margin:0,rtl:qv.util.isRTL(g)};D.title=""==g.Title?{text:null}:{text:null==v||0==v?qv.util.getTranslation(g.Title):null};D.subtitle=function(a,c){var e={};if(k(a)&&(d(a)||b(a)||a.RealChartType==QueryViewerChartType.CircularGauge))e.text=c.Name,e.floating=!0,e.align=qv.util.isRTL(a)?"right":"left",e.verticalAlign="middle";return e}(g,t);D.pane=function(a,b){var c={};if(a.RealChartType==
QueryViewerChartType.CircularGauge){c.background=[];var e;k(a)&&(e=z(1,1));for(var d=0;d<a.Chart.Series.ByIndex.length;d++)if(!k(a)||d==b){var h=a.Chart.Series.ByIndex[d],g={};k(a)||(e=z(a.Chart.Series.DataFields.length,d+1));g.outerRadius=e.UpperExtreme.toString()+"%";g.innerRadius=e.LowerExtreme.toString()+"%";h=qv.util.IsNullColor(h.Color)?h.Points[0].Color:h.Color;F(a,g,h,!1);g.borderWidth=0;c.background.push(g)}}return c}(g,v);D.xAxis=function(a,b){xAxis={tickWidth:1,tickLength:10};xAxis.reversed=
qv.util.isRTL(a);if(a.RealChartType!=QueryViewerChartType.CircularGauge){var e=c(a);if(a.RealChartType!=QueryViewerChartType.Radar&&a.RealChartType!=QueryViewerChartType.FilledRadar&&a.RealChartType!=QueryViewerChartType.PolarArea&&a.RealChartType!=QueryViewerChartType.LinearGauge&&a.RealChartType!=QueryViewerChartType.Sparkline){var d=xAxis,h="";if(""==a.XAxisTitle)for(var g=0;g<a.Metadata.Axes.length;g++){var l=a.Metadata.Axes[g];if(l.Visible==QueryViewerVisible.Yes||l.Visible==QueryViewerVisible.Always)h+=
(""==h?"":", ")+qv.util.getTranslation(l.Title)}else h=qv.util.getTranslationAlsoIfStatic(a.XAxisTitle);d.title={text:h}}else{a.RealChartType==QueryViewerChartType.Sparkline&&k(a)&&(xAxis.title={text:a.Chart.Series.ByIndex[b].Name});xAxis.lineWidth=0;if(a.RealChartType==QueryViewerChartType.LinearGauge||a.RealChartType==QueryViewerChartType.Sparkline)xAxis.tickPositions=[];xAxis.tickmarkPlacement=a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar?"on":"between"}if(a.RealChartType==
QueryViewerChartType.LinearGauge){var m;k(a)&&(m=A(1,1));xAxis.plotBands=[];for(d=0;d<a.Chart.Series.ByIndex.length;d++)if(!k(a)||d==b)h=a.Chart.Series.ByIndex[d],k(a)||(m=A(a.Chart.Series.DataFields.length,d+1)),plotBand={},h=qv.util.IsNullColor(h.Color)?h.Points[0].Color:h.Color,F(a,plotBand,h,!1),plotBand.from=m.LowerExtreme,plotBand.to=m.UpperExtreme,xAxis.plotBands.push(plotBand)}e||(xAxis.categories=[]);m=!1;for(d=0;d<a.Chart.Categories.Values.length;d++)""!=a.Chart.Categories.Values[d].ValueWithPicture&&
(m=!0),e||(xAxis.categories[d]=a.Chart.Categories.Values[d].ValueWithPicture);if(e)xAxis.type="datetime",xAxis.id="xaxis",xAxis.minRange=1,qv.util.XAxisDataType(a)==QueryViewerDataType.Date&&(null!=a.Chart.Categories.MaxValue&&null!=a.Chart.Categories.MinValue)&&(e=new gx.date.gxdate(a.Chart.Categories.MinValue,"Y4MD"),864E6>(new gx.date.gxdate(a.Chart.Categories.MaxValue,"Y4MD")).Value.getTime()-e.Value.getTime()&&(xAxis.tickInterval=864E5));else if(xAxis.labels={},xAxis.labels.enabled=m,a.XAxisLabels!=
QueryViewerXAxisLabels.Horizontally&&!(a.RealChartType==QueryViewerChartType.Bar||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100)&&!f(a))a.XAxisLabels==QueryViewerXAxisLabels.Vertically?(e=90,m=5):(e=parseInt(a.XAxisLabels.replace("Rotated","")),m=10),xAxis.labels.rotation=360-e,xAxis.labels.y=m,xAxis.labels.align="right";f(a)?xAxis.className="highcharts-no-axis-line highcharts-yes-grid-line":a.RealChartType==QueryViewerChartType.Sparkline&&(xAxis.className=
"highcharts-no-axis-line highcharts-no-grid-line");if(a.RealChartType==QueryViewerChartType.Bar||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100)xAxis.opposite=qv.util.isRTL(a)}return xAxis}(g,v);D.yAxis=function(a,e,c){function h(a){if(0==a.length)return!1;for(var b,e=0;e<a.length;e++)if(0==e)b=a[e].Picture;else if(a[e].Picture!=b)return!1;return!0}if(a.RealChartType==QueryViewerChartType.Sparkline)yAxis={visible:!1};else{var g;g=a.RealChartType==
QueryViewerChartType.CircularGauge?null:k(a)?e.Name:E(a);q(a)&&!k(a)?(yAxis=[],yAxis[0]={title:{text:g}},yAxis[1]={title:{text:""},opposite:!0}):yAxis={title:{text:g}};yAxis.plotLines=[];yAxis.plotBands=[];if(!d(a)&&!b(a)&&!o(a)){for(var l=0;l<a.Chart.PlotBands.length;l++){var f=a.Chart.PlotBands[l];if(null==e||e.Name==f.SeriesName)f.From==f.To&&null!=f.From?(g={value:f.From,width:1,zIndex:3},F(a,g,f.Color,!1),yAxis.plotLines.push(g)):(g={},F(a,g,f.Color,!1),g.from=!f.From?Number.MIN_VALUE:f.From,
g.to=!f.To?Number.MAX_VALUE:f.To,yAxis.plotBands.push(g))}if(k(a)||1==a.Chart.Series.ByIndex.length||h(a.Chart.Series.ByIndex)){var m=k(a)?e:a.Chart.Series.ByIndex[0];yAxis.labels={};yAxis.labels.formatter=function(){return qv.util.formatNumber(this.value,m.NumberFormat.DecimalPrecision,m.Picture,true)}}}if(a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar||a.RealChartType==QueryViewerChartType.PolarArea)yAxis.min=0,yAxis.gridLineInterpolation=a.RealChartType==
QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar?"polygon":"circle";if(o(a)){yAxis.min=0;for(l=yAxis.max=0;l<a.Chart.Series.ByIndex.length;l++)if(!k(a)||l==c)g=a.Chart.Series.ByIndex[l],yAxis.max=Math.max(yAxis.max,100*g.MaximumValue/g.TargetValue);if(a.RealChartType==QueryViewerChartType.LinearGauge||100!=yAxis.max){g={className:"highcharts-dashed-plot-line",value:100};if(k(a)||1==a.Chart.Series.DataFields.length)c=k(a)?e:a.Chart.Series.ByIndex[0],a.RealChartType==QueryViewerChartType.LinearGauge?
(e=-10,l=-5,f="right"):(e=15,l=0,f="center"),g.label={text:c.TargetValue,verticalAlign:"bottom",rotation:0,y:e,x:l,align:f};yAxis.plotLines.push(g)}}a.RealChartType==QueryViewerChartType.LinearGauge?(yAxis.className="highcharts-no-axis-line highcharts-no-grid-line",yAxis.labels={enabled:!1}):a.RealChartType==QueryViewerChartType.CircularGauge&&(yAxis.lineWidth=0,yAxis.tickPositions=[]);a.RealChartType==QueryViewerChartType.Bar||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100||
a.RealChartType==QueryViewerChartType.LinearGauge?yAxis.reversed=qv.util.isRTL(a):yAxis.opposite=qv.util.isRTL(a);l=e=!1;for(c=0;c<a.Chart.Series.ByIndex.length;c++)g=a.Chart.Series.ByIndex[c],g.PositiveValues&&(e=!0),g.NegativeValues&&(l=!0);if(!l&&!e)q(a)&&!k(a)?(yAxis[0].min=0,yAxis[1].min=0,yAxis[0].max=1,yAxis[1].max=1):(yAxis.min=0,yAxis.max=1);else if(gx.lang.gxBoolean(a.XAxisIntersectionAtZero)&&(l||(q(a)&&!k(a)?(yAxis[0].min=0,yAxis[1].min=0):yAxis.min=0),!e))q(a)&&!k(a)?(yAxis[0].max=0,
yAxis[1].max=0):yAxis.max=0}return yAxis}(g,t,v);D.plotOptions=function(b,c){function d(a){var c;c=k(a)||1==a.Chart.Series.DataFields.length?23*(k(a)?a.Chart.Series.DataFields.length:1):29;return a.getContainerControl().offsetHeight-c}function g(a){var c={radius:3,symbol:"circle",states:{hover:{radius:4}}};a.SelectionAllowed()&&(c.states.select={radius:5,lineWidth:1});return c}function h(a,c,b){c=c.touchingSliceAt;return["M",a.x+("left"===a.alignment?1:-1)*b.connectorPadding,a.y,"L",c.x,a.y,"L",c.x,
c.y]}var l=gx.lang.gxBoolean(c.ShowValues),f={series:{}};f.series.events={};c.RealChartType==QueryViewerChartType.CircularGauge?(f.series.dataLabels={},f.series.dataLabels.enabled=1==c.Chart.Series.DataFields.length&&gx.lang.gxBoolean(c.ShowValues)||k(c),f.series.dataLabels.y=0,f.series.dataLabels.borderWidth=0,f.series.dataLabels.formatter=function(){return C(this,c)},f.series.marker={enabled:!1}):l&&(f.series.dataLabels={},f.series.dataLabels.enabled=!0,f.series.dataLabels.connectorColor="#000000",
f.series.dataLabels.formatter=function(){var a=k(c)?this.series.chart.options.qv.seriesIndex:this.series.index,a=a%c.Chart.Series.ByIndex.length,a=c.Chart.Series.ByIndex[a];return qv.util.formatNumber(this.point.y*(c.RealChartType==QueryViewerChartType.LinearGauge?a.TargetValue/100:1),a.NumberFormat.DecimalPrecision,a.Picture,!1)},c.RealChartType==QueryViewerChartType.LinearGauge&&(f.series.dataLabels.inside=!0));if(k(c)&&c.RealChartType!=QueryViewerChartType.CircularGauge){f.series.point={};f.series.point.events=
{};var z=c.RealChartType!=QueryViewerChartType.LinearGauge;f.series.point.events.mouseOver=function(){m(c,this.series.chart.container,this.index,true,z)};f.series.point.events.mouseOut=function(){m(c,this.series.chart.container,this.index,false,z)}}if(c.ItemClick||c.SelectionAllowed())f.series.events.click=e;switch(b){case "bar":f.bar={};c.RealChartType==QueryViewerChartType.StackedBar?(f.series.stacking="normal",f.bar.stacking="normal"):c.RealChartType==QueryViewerChartType.StackedBar100&&(f.series.stacking=
"percent",f.bar.stacking="percent");if(c.RealChartType==QueryViewerChartType.LinearGauge){l=A(c.Chart.Series.DataFields.length,1).Width*d(c);f.bar.pointWidth=l;f.bar.pointPadding=0;f.bar.groupPadding=0;for(var s=Number.MAX_VALUE,ea=0;ea<c.Chart.Series.DataFields.length;ea++){var u=c.Chart.Series.ByIndex[ea],u=u.Points[0].Value/u.TargetValue;u<s&&(s=u)}s*=c.getContainerControl().offsetWidth;f.bar.borderRadius=Math.min(l/2,s/2)}break;case "column":f.column={};c.RealChartType==QueryViewerChartType.StackedColumn||
c.RealChartType==QueryViewerChartType.StackedColumn3D||c.RealChartType==QueryViewerChartType.PolarArea?(f.series.stacking="normal",f.column.stacking="normal"):c.RealChartType==QueryViewerChartType.StackedColumn100&&(f.series.stacking="percent",f.column.stacking="percent");c.RealChartType==QueryViewerChartType.PolarArea&&(f.column.pointPadding=0,f.column.groupPadding=0);break;case "area":f.area={};c.RealChartType==QueryViewerChartType.StepArea&&(f.area.step="center");f.area.marker=g(c);c.RealChartType==
QueryViewerChartType.StackedArea?f.area.stacking="normal":c.RealChartType==QueryViewerChartType.StackedArea100&&(f.area.stacking="percent");break;case "areaspline":f.areaspline={};f.areaspline.marker=g(c);break;case "line":f.line={};f.line.marker=g(c);c.RealChartType==QueryViewerChartType.StepLine?f.line.step="center":c.RealChartType==QueryViewerChartType.StepTimeline&&(f.line.step="left");a(c)?f.series.connectNulls=!0:c.RealChartType==QueryViewerChartType.StackedLine?f.line.stacking="normal":c.RealChartType==
QueryViewerChartType.StackedLine100&&(f.line.stacking="percent");break;case "spline":f.spline={};f.spline.marker=g(c);break;case "pie":f.pie={};if(c.RealChartType==QueryViewerChartType.Doughnut||c.RealChartType==QueryViewerChartType.Doughnut3D)f.pie.innerSize="35%";if(c.RealChartType==QueryViewerChartType.Pie3D||c.RealChartType==QueryViewerChartType.Doughnut3D)f.pie.depth=35;f.pie.dataLabels={enabled:l,connectorColor:"#c3c4c8",connectorShape:h};f.pie.showInLegend=!0;break;case "solidgauge":f.solidgauge=
{};f.solidgauge.showInLegend=!0;f.solidgauge.rounded=!0;break;case "funnel":f.funnel={};f.funnel.showInLegend=!0;f.funnel.dataLabels={enabled:l,connectorColor:"#c3c4c8",connectorShape:h};break;case "pyramid":f.pyramid={},f.pyramid.showInLegend=!0,f.pyramid.dataLabels={enabled:l,connectorColor:"#c3c4c8",connectorShape:h}}return f}(D.chart.type,g);D.tooltip=function(c){var b={};a(c)?(b.borderRadius=1,b.shadow=!0,b.shared=1<c.Metadata.Data.length,b.formatter=function(){return 1===c.Metadata.Data.length?
u(this,c.Chart.Series.ByIndex,k(c)):s(this,c.Chart.Series.ByIndex)}):c.RealChartType==QueryViewerChartType.StackedColumn100||c.RealChartType==QueryViewerChartType.StackedBar100||c.RealChartType==QueryViewerChartType.StackedArea100||c.RealChartType==QueryViewerChartType.StackedLine100?b.formatter=function(){var a=Math.round(100*this.point.percentage)/100;return qv.util.isRTL(c)?"%"+a+"<b>: "+(""!=this.point.id?this.point.id:this.series.name)+"</b>":"<b>"+(""!=this.point.id?this.point.id:this.series.name)+
"</b>: "+a+"%"}:d(c)?b.formatter=function(){var a;var b=k(c);a=qv.collection[this.point.series.chart.options.qv.viewerId];if(b){var b=n(a,this.point.index),e=0<b.length?b[0].id:"",d=""!=e,f="";d&&(qv.util.isRTL(a)?f+=y(e):f+=l(e));for(e=0;e<b.length;e++){var g=b[e],h=Math.round(100*g.percentage)/100;qv.util.isRTL(a)?(f+=(d||0<e?"<br/>":"")+"%"+h,f+=" :"+g.series.name):(f+=(d||0<e?"<br/>":"")+g.series.name+": ",f+=h+"%")}a=f}else{var h=Math.round(100*this.point.percentage)/100;a=qv.util.isRTL(a)?"%"+
h+"<b>: "+(""!=this.point.name?this.point.name:this.point.series.name)+"</b>":"<b>"+(""!=this.point.name?this.point.name:this.point.series.name)+"</b>: "+h+"%"}return a}:c.RealChartType==QueryViewerChartType.CircularGauge?(b.enabled=(1<c.Chart.Series.DataFields.length||!gx.lang.gxBoolean(c.ShowValues))&&!k(c),b.formatter=function(){return C(this,c)},b.positioner=function(a){return{x:(this.chart.plotWidth-a)/2,y:this.chart.plotHeight/2}}):b.formatter=function(){return u(this,c.Chart.Series.ByIndex,
k(c)&&!o(c))};b.useHTML=qv.util.isRTL(c);return b}(g);D.series=function(b,e,d){function f(b,e,d,g,h){g={};b.ItemClick&&b.Metadata.Data[d].RaiseItemClick&&(g.className="highcharts-drilldown-point");g.visible=e.Visible==QueryViewerVisible.Yes||e.Visible==QueryViewerVisible.Always;g.events={legendItemClick:function(a){if(e.Visible==QueryViewerVisible.Always)a.preventDefault();else{var c=qv.chart.GetRuntimeMetadata(b),a=qv.util.GetElementInCollection(c,"Name",b.Chart.Series.ByIndex[a.target.index].FieldName);
a.Hidden=!a.Hidden;qv.util.autorefresh.UpdateLayoutSameGroup(b,c,false)}}};if(a(b)){g.name=e.Name;g.data=[];g.turboThreshold=0;qv.util.IsNullColor(e.Color)||F(b,g,e.Color,!0);var l=p(b.Chart.Categories,e.Points,qv.util.XAxisDataType(b),e.Aggregation,h);for(j=0;j<l.length;j++){var d=l[j].name,m=l[j].x,h=l[j].y,m=new gx.date.gxdate(m,"Y4MD");g.data[j]={x:m.Value.getTime()-6E4*m.Value.getTimezoneOffset(),y:h,name:d};qv.util.IsNullColor(e.Color)&&F(b,g.data[j],e.Points[j].Color,!0)}w(b)}else{b.RealChartType==
QueryViewerChartType.CircularGauge&&(l=k(b)?z(1,1):z(b.Chart.Series.DataFields.length,d+1));g.name=e.Name;g.data=[];g.turboThreshold=0;qv.util.IsNullColor(e.Color)||F(b,g,e.Color,!0);if(b.RealChartType==QueryViewerChartType.Radar||b.RealChartType==QueryViewerChartType.FilledRadar||b.RealChartType==QueryViewerChartType.PolarArea)g.pointPlacement=b.RealChartType==QueryViewerChartType.Radar||b.RealChartType==QueryViewerChartType.FilledRadar?"on":null;for(j=0;j<e.Points.length;j++)(h=null!=e.Points[j].Value?
parseFloat(qv.util.trim(e.Points[j].Value).replace(",",".")):null,o(b)&&(h=100*(h/e.TargetValue)),d=b.Chart.Categories.Values[j].ValueWithPicture,g.data[j]={},g.data[j].y=h,g.data[j].name=o(b)?"":d,g.data[j].id=g.data[j].name,c(b)&&(m=b.Chart.Categories.Values[j].Value,m=new gx.date.gxdate(m,"Y4MD"),g.data[j].x=m.Value.getTime()-6E4*m.Value.getTimezoneOffset(),g.data[j].id=m),b.RealChartType==QueryViewerChartType.CircularGauge&&(g.data[j].radius=l.UpperExtreme.toString()+"%",g.data[j].innerRadius=
l.LowerExtreme.toString()+"%"),b.RealChartType==QueryViewerChartType.CircularGauge)?(d=qv.util.IsNullColor(e.Color)?e.Points[0].Color:e.Color,F(b,g.data[j],d,!0)):qv.util.IsNullColor(e.Color)&&F(b,g.data[j],e.Points[j].Color,!0)}return g}for(var g=[],h=0;h<b.Chart.Series.ByIndex.length;h++)if(!k(b)||h==e){var l=f(b,b.Chart.Series.ByIndex[h],h,g,d),m=null!=e?e:h;q(b)&&(0==m%2?(l.type="column",l.yAxis=0):(l.type="line",l.yAxis=k(b)?0:1));g.push(l)}return g}(g,v,r);return D}function E(a){var b="";if(""==
a.YAxisTitle){if(1==a.Chart.Series.DataFields.length){var c;a:for(b=0;b<a.Metadata.Data.length;b++)if(a.Metadata.Data[b].DataField==a.Chart.Series.DataFields[0]){c=a.Metadata.Data[b];break a}b=qv.util.getTranslation(c.Title)}}else b=qv.util.getTranslationAlsoIfStatic(a.YAxisTitle);return b}function v(a){return!isNaN(parseFloat(a))&&isFinite(a)?gx.dom.el(S+"_Zoom_"+a+"m"):gx.dom.el(a)}function t(a,b){if(zoom=v(a))zoom.style.textDecoration=b}function w(a){if(zoom=v(a))zoom.onclick();else if(0!=a){var b;
switch(a){case 12:b=6;break;case 6:b=3;break;case 3:b=2;break;case 2:b=1;break;case 1:b=0}w(b)}}function M(a,b){gx.dom.el(a+"_options_compare_enable").disabled=!b;gx.dom.el(a+"_options_compare_text").disabled=!b;gx.dom.el(a+"_options_compare_text").style.opacity=!b?0.5:1;gx.dom.el(a+"_options_compare_options").disabled=!b;gx.dom.el(a+"_options_compare_options").style.opacity=!b?0.5:1}function U(a){return a+"_options"}function X(a){return a+"_center"}function R(a){return a+"_footer_slider"}function T(a){return a+
"_footer_chart"}function I(a){return a+"_footer_range"}function H(a){return a+"_footer_left_cursor"}function ba(a){return a+"_footer_right_cursor"}function Y(a){return a+"_footer_center"}function fa(a,b,c){var e=Math.max(b,0),b=Math.min(e,100),e=Math.max(c,0),c=Math.min(e,100);jQuery("#"+(a+"_footer")).css("width","100%").css("height",P.toString()+"px");jQuery("#"+T(a)).css("width","100%").css("height",(P-2).toString()+"px");e=qv.collection[a].getContainerControl().offsetWidth;b=b*e/100;c=(100-c)*
e/100;if(e-b-c<2*Q){var d=2*Q-(e-b-c),g;g=0==d%2?d/2:(d+1)/2;b-=g;c-=d-g;0>b&&(c+=b,b=0);0>c&&(b+=c,c=0)}jQuery("#"+R(a)).css("width","100%").css("height",P.toString()+"px").css("padding-left",(100*b/e).toString()+"%").css("padding-right",(100*c/e).toString()+"%");jQuery("#"+I(a)).css("width","100%").css("height",P.toString()+"px");jQuery("#"+H(a)).css("width",Q.toString()+"px").css("height",P.toString()+"px");jQuery("#"+ba(a)).css("width",Q.toString()+"px").css("height",P.toString()+"px");jQuery("#"+
Y(a)).css("width","calc(100% - "+2*Q+"px)").css("height",P.toString()+"px").css("left",Q.toString()+"px")}function ka(a,b){var c=parseInt(jQuery("#"+R(a)).css("padding-left")),e=parseInt(jQuery("#"+I(a)).css("width")),d;d=b.originalEvent.touches?b.originalEvent.touches[0].pageX-b.originalEvent.touches[0].target.offsetLeft:b.offsetX;switch(b.target.id){case R(a):return d;case H(a):return d+c;case Y(a):return d+c;case ba(a):return d+c+e-Q}}function ma(b){function c(a){a.preventDefault();L=b;var e=jQuery("#"+
R(L)),d=jQuery("#"+I(L));parseInt(e.css("padding-left"));la=ka(L,a);ca=parseInt(e.css("padding-left"));ga=parseInt(e.css("padding-right"));da=parseInt(e.css("width"));ha=parseInt(d.css("width"))}function e(){if(Z||N||O){var b=jQuery("#"+R(L)),c=qv.collection[L],d=gx.dom.el(L+"_options_compare_enable").checked,g=c.getContainerControl().offsetWidth,f;f=a(c)?X(c.userControlId()):c.getContainerControl().id;var c=k(c)?jQuery("[id^="+f+"_chart]"):jQuery("#"+f),h=[];jQuery.each(c,function(a,b){var c=jQuery("#"+
b.id).highcharts();h.push(c)});c=h[0];f=parseInt(b.css("padding-left"));var l=parseInt(b.css("padding-right")),b=100*f/g,g=100*(1-l/g);if(0==b&&100==g)jQuery.each(h,function(a,b){b.zoomOut()});else{c.get("xaxis").getExtremes();var c=c.options.qv,m=c.dataMin+b/100*(c.dataMax-c.dataMin),z=c.dataMin+g/100*(c.dataMax-c.dataMin),s=d?!1:!0;jQuery.each(h,function(a,b){b.get("xaxis").setExtremes(m,z,s)})}d&&aa(h);if(N||O)t(W,"none"),W=null}N=O=Z=!1}function d(a){if(Z||N||O)if(a=ka(L,a)-la,a=O?Math.min(a,
ha-2*Q):Math.min(a,ga),a=N?Math.max(a,-ha+2*Q):Math.max(a,-ca),0!=a){jQuery("#"+Y(L));var b=jQuery("#"+R(L));jQuery("#"+I(L));O?b.css("padding-left",(100*(ca+a)/da).toString()+"%"):(N||b.css("padding-left",(100*(ca+a)/da).toString()+"%"),b.css("padding-right",(100*(ga-a)/da).toString()+"%"))}}var g=jQuery("#"+H(b)),f=jQuery("#"+ba(b)),h=jQuery("#"+Y(b)),l=jQuery("#"+R(b));jQuery("#"+I(b));g.mousedown(function(a){a.preventDefault();O=!0});f.mousedown(function(a){a.preventDefault();N=!0});h.mousedown(function(a){a.preventDefault();
!O&&!N&&(Z=!0)});l.mousedown(function(a){c(a)});jQuery(document).mouseup(function(a){e(a)});l.mousemove(function(a){d(a)});g.on("touchstart",function(a){a.preventDefault();O=!0});f.on("touchstart",function(a){a.preventDefault();N=!0});h.on("touchstart",function(a){a.preventDefault();!O&&!N&&(Z=!0)});l.on("touchstart",function(a){c(a)});jQuery(document).on("touchend",function(a){e(a)});jQuery(document).on("touchcancel",function(a){e(a)});l.on("touchmove",function(a){d(a)})}function na(a,b){var c=qv.util.dom.createDiv(a,
R(b),"gx-qv-footer-slider","",{},""),c=qv.util.dom.createDiv(c,I(b),"gx-qv-footer-range","",{},"");qv.util.dom.createDiv(c,H(b),"gx-qv-footer-left-cursor","",{},"");qv.util.dom.createDiv(c,ba(b),"gx-qv-footer-right-cursor","",{},"");qv.util.dom.createDiv(c,Y(b),"gx-qv-footer-center","",{},"");qv.util.dom.createDiv(a,T(b),"gx-qv-footer-chart","",{},"")}function oa(a,b){var c=T(a.userControlId()),e=a.RealChartType==QueryViewerChartType.SmoothTimeline?"spline":"line",d=a.RealChartType==QueryViewerChartType.StepTimeline?
"left":"",g=[];if(k(a))for(f=0;f<b.length;f++)g.push(b[f].series[0]);else for(var f=0;f<b[0].series.length;f++)g.push(b[0].series[f]);return qv.chart.getSparklineChartOptions(a,c,e,!1,d,g)}function ja(a){a=a.reduce(function(a,b,c){b.forEach(function(b){var e="y"+(c+1);a[b.x]||(a[b.x]={x:b.x});a[b.x][e]=b.y});return a},{});return Object.values(a)}function aa(a){var b=a[0],c=b.options.qv.viewerId,e=qv.collection[c],d=gx.dom.el(c+"_options_compare_enable").checked,g=b.get("xaxis").getExtremes();void 0!=
g.userMin&&(g.min=g.userMin);void 0!=g.userMax&&(g.max=g.userMax);if(d){var f=gx.dom.el(c+"_options_compare_options").children,h;for(ind=0;void 0!=f[ind]&&void 0==h;ind++)f[ind].selected&&(h=f[ind].value);var l,m;"PrevPeriod"==h?(m=new Date(g.min),l=new Date(g.min-(g.max-g.min))):"PrevYear"==h&&(l=new Date(g.min),l=new Date(l.setFullYear(l.getFullYear()-1)),m=new Date(g.max),m=new Date(m.setFullYear(m.getFullYear()-1)));l=l.getTime();m=m.getTime();if(zoom=v(c+"_Zoom_0m"))zoom.style.display="none"}else if(zoom=
v(c+"_Zoom_0m"))zoom.style.display="";jQuery.each(a,function(a,b){for(var c=[];b.series.length>0;){b.options.qv.colorIndexesUsed||c.push(b.series[0].colorIndex);b.series[0].remove(true)}if(!b.options.qv.colorIndexesUsed)b.options.qv.colorIndexesUsed=c});for(var f=0,z=[],s=0;s<e.Chart.Series.ByIndex.length;s++){var u=e.Chart.Series.ByIndex[s];seriesName=u.Name;var y,t;k(e)?(y=a[f],t=y.options.qv.colorIndexesUsed[0]):(y=b,t=y.options.qv.colorIndexesUsed[f]);var A={turboThreshold:0};A.colorIndex=t;A.id=
seriesName+"1";A.name=seriesName;A.data=[];if(d){var w={className:"highcharts-dashed-series-line",turboThreshold:0};w.colorIndex=t;w.id=seriesName+"2";w.name=seriesName;w.data=[]}t=document.getElementById(c+"_options_group_options").value;u=p(e.Chart.Categories,u.Points,qv.util.XAxisDataType(e),u.Aggregation,t);z.push(u);for(i=0;i<u.length;i++){t=u[i].y;var C=new gx.date.gxdate(u[i].x,"Y4MD"),G=u[i].name,D=C.Value.getTime()-6E4*C.Value.getTimezoneOffset(),C=C.Value.getTime()-6E4*C.Value.getTimezoneOffset();
if(d){var o=!1,r=!1;D<=g.max&&D>=g.min&&(o=!0);if(D<=m&&D>=l){var r=!0,n=new Date(D),q;"PrevPeriod"==h?q="1m"==y.options.qv.predef_zoom?n.setMonth(n.getMonth()+1):"2m"==y.options.qv.predef_zoom?n.setMonth(n.getMonth()+2):"3m"==y.options.qv.predef_zoom?n.setMonth(n.getMonth()+3):"6m"==y.options.qv.predef_zoom?n.setMonth(n.getMonth()+6):"12m"==y.options.qv.predef_zoom?n.setFullYear(n.getFullYear()+1):q+(g.max-g.min):"PrevYear"==h&&(q=n.setFullYear(n.getFullYear()+1))}o&&(o={},o.x=D,o.y=t,o.name=G,A.data.push(o));
r&&(o={},o.x=q,o.y=t,o.name=G,o.real_x=C,w.data.push(o))}else A.data.push({x:D,y:t,name:G})}y.addSeries(A);d&&y.addSeries(w);f++}e.Chart.GroupByPoints=B(e,ja(z))}function pa(a,b){if(a.length<b)return 0;var c=(a[a.length-1].x-a[a.length-b].x)/1E3/3600/24/(365/12);return 1>=c?1:2>=c?2:3>=c?3:6>=c?6:12}function qa(a,b){function c(a,b,e,d,g,f,h,l,m){var k=b.userControlId(),a=qv.util.dom.createSelect(a,U(k)+"_group_options");qv.util.XAxisDataType(b)==QueryViewerDataType.DateTime&&(qv.util.dom.createOption(a,
"Seconds","Seconds"==b._groupOption,gx.getMessage("GXPL_QViewerSeconds")),m&&(qv.util.dom.createOption(a,"Minutes","Minutes"==b._groupOption,gx.getMessage("GXPL_QViewerMinutes")),l&&qv.util.dom.createOption(a,"Hours","Hours"==b._groupOption,gx.getMessage("GXPL_QViewerHours"))));if(D||qv.util.XAxisDataType(b)==QueryViewerDataType.Date)qv.util.dom.createOption(a,"Days","Days"==b._groupOption,gx.getMessage("GXPL_QViewerDays")),h&&(qv.util.dom.createOption(a,"Weeks","Weeks"==b._groupOption,gx.getMessage("GXPL_QViewerWeeks")),
f&&(qv.util.dom.createOption(a,"Months","Months"==b._groupOption,gx.getMessage("GXPL_QViewerMonths")),g&&(qv.util.dom.createOption(a,"Quarters","Quarters"==b._groupOption,gx.getMessage("GXPL_QViewerQuarters")),d&&(qv.util.dom.createOption(a,"Semesters","Semesters"==b._groupOption,gx.getMessage("GXPL_QViewerSemesters")),e&&qv.util.dom.createOption(a,"Years","Years"==b._groupOption,gx.getMessage("GXPL_QViewerYears"))))));return a}var e=a[0];S=e.options.qv.viewerId;var d=qv.collection[S],g=document.getElementById(U(S)),
f=document.getElementById(S+"_footer"),h=e.get("xaxis").getExtremes(),l=h.dataMax-h.dataMin;jQuery.each(a,function(a,b){b.options.qv.dataMax=h.dataMax;b.options.qv.dataMin=h.dataMin});var m=2628288E3<l,k=5255712E3<l,z=7884E6<l,s=15768E6<l,l=31536E6<l;d._groupOption=d._groupOption||(qv.util.XAxisDataType(d)==QueryViewerDataType.Date?"Days":"Seconds");var u=new gx.date.gxdate(""),y=new gx.date.gxdate("");u.Value.setTime(h.dataMin+6E4*u.Value.getTimezoneOffset());y.Value.setTime(h.dataMax+6E4*y.Value.getTimezoneOffset());
var v=!0,p=!0,A=!0,C=!0,o=!0,D=!0,n=!0,G=!0;gx.date.year(u)==gx.date.year(y)&&(v=!1,6>=gx.date.month(u)&&7<=gx.date.month(y)||(p=!1,3>=gx.date.month(u)&&4<=gx.date.month(y)||(6>=gx.date.month(u)&&7<=gx.date.month(y)||9>=gx.date.month(u)&&10<=gx.date.month(y))||(A=!1,gx.date.month(u)==gx.date.month(y)&&(C=!1,gx.date.day(u)-gx.date.dow(u)==gx.date.day(y)-gx.date.dow(y)&&(o=!1,gx.date.day(u)==gx.date.day(y)&&(D=!1,gx.date.hour(u)==gx.date.hour(y)&&(n=!1,gx.date.minute(u)==gx.date.minute(y)&&(G=!1))))))));
(function(a,b,e,d,g,f,h,l,m,k,z,u,s,y){function t(a){return qv.util.dom.createDiv(a,"","QVTimelineHeaderGroup","",{height:ia+"px",flexGrow:1},"")}function v(a,b,c){return qv.util.dom.createAnchor(a,c,{cursor:"pointer",paddingLeft:"6px"},b)}var p=b.userControlId(),a=qv.util.dom.createDiv(a,"","QVTimelineHeader","",{display:"flex",flexDirection:"row",flexWrap:"wrap"},""),A=t(a),w=t(a),C=t(a),A=qv.util.dom.createDiv(A,"","","",{"float":"left"},"");qv.util.dom.createText(A,gx.getMessage("GXPL_QViewerJSChartZoom"));
if(e){v(A,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneMonth"),p+"_Zoom_1m");if(d){v(A,gx.getMessage("GXPL_QViewerJSChartZoomLevelToTwoMonth"),p+"_Zoom_2m");if(g){v(A,gx.getMessage("GXPL_QViewerJSChartZoomLevelToThreeMonth"),p+"_Zoom_3m");if(f){v(A,gx.getMessage("GXPL_QViewerJSChartZoomLevelToSixMonth"),p+"_Zoom_6m");h&&v(A,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneYear"),p+"_Zoom_12m")}}}}v(A,gx.getMessage("GXPL_QViewerJSChartZoomLevelToAll"),p+"_Zoom_0m");e=qv.util.dom.createDiv(w,"","",
"",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createSpan(e,U(p)+"_groupby_text","","",{whiteSpace:"nowrap",paddingRight:"6px"},null,gx.getMessage("GXPL_QViewerGroupBy"));c(e,b,l,m,k,z,u,s,y);b=qv.util.dom.createDiv(C,"","","",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createInput(b,U(p)+"_compare_enable","checkbox",{verticalAlign:"text-bottom"});qv.util.dom.createSpan(b,U(p)+"_compare_text","","",{whiteSpace:"nowrap",paddingRight:"6px",paddingLeft:"6px"},null,gx.getMessage("GXPL_QViewerCompareWith"));
p=qv.util.dom.createSelect(b,U(p)+"_compare_options");qv.util.dom.createOption(p,"PrevPeriod",false,gx.getMessage("GXPL_QViewerPreviousPeriod"));qv.util.dom.createOption(p,"PrevYear",false,gx.getMessage("GXPL_QViewerPreviousYear"));return a})(g,d,m,k,z,s,l,v,p,A,C,o,n,G);na(f,S);ma(S);gx.dom.el(g.id+"_compare_enable").onclick=function(){aa(a)};gx.dom.el(g.id+"_compare_options").onchange=function(){gx.dom.el(g.id+"_compare_enable").checked&&aa(a)};gx.dom.el(g.id+"_group_options").onchange=function(){aa(a)};
var f=function(b){var c=gx.dom.el(g.id+"_compare_enable").checked;if(b>0){var d,f;f=e.get("xaxis").getExtremes().dataMax;d=f-b*2628028800;var h=c?false:true;jQuery.each(a,function(a,b){b.get("xaxis").setExtremes(d,f,h)});var l=e.options.qv;fa(e.options.qv.viewerId,(d-l.dataMin)/(l.dataMax-l.dataMin)*100,(f-l.dataMin)/(l.dataMax-l.dataMin)*100);M(e.options.qv.viewerId,true)}else{jQuery.each(a,function(a,b){b.zoomOut()});M(e.options.qv.viewerId,false)}t(W,"none");t(this.id,"underline");jQuery.each(a,
function(a,c){c.options.qv.predef_zoom=b+"m"});W=this.id;c&&aa(a)},m=[0,1,2,3,6,12],r;for(r in m)if(k=m[r],z=gx.dom.el(S+"_Zoom_"+k+"m"))z.onclick=f.closure(z,[k]);r=pa(e.series[0].points,20);w(r);d=oa(d,b);new Highcharts.Chart(d)}function ra(b){var e=qv.collection[b.options.qv.viewerId];if(!c(e)){var d=e.SelectionAllowed(),f=!1;if(e.ItemClick)for(var h=0;h<e.Metadata.Axes.length;h++)if(e.Metadata.Axes[h].RaiseItemClick){f=!0;break}(f||d)&&jQuery.each(b.xAxis[0].ticks,function(c,e){e&&e.label&&(f&&
e.label.addClass("gx-qv-clickable-element"),e.label.on("click",function(){var h=f,l=qv.collection[b.options.qv.viewerId],m=!1;d&&!a(l)&&(m=g(l.Charts,e.pos));h&&(h=1==l.Chart.Categories.DataFields.length?qv.util.GetAxisByDataField(l,l.Chart.Categories.DataFields[0]).Name:"",r(l.ItemClickData,l,h,QueryViewerElementType.Axis,e.label.textStr,m,l.Data.Rows[c]),l.ItemClick())}))})}}var W=null,S=null,ia=35,P=50,Q=10,la=0,L="",ca=0,ga=0,ha=0,da=0,O=!1,N=!1,Z=!1;return{tryToRenderChart:function(b){var c=
"";(new Date).getTime();b.xml=b.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(b,function(b,e){var d=!1;b!=e.xml.recordsetCacheKey&&(e.xml.recordsetCacheKey=b,d=!0);qv.util.anyError(b)?(c=qv.util.getErrorFromText(b),qv.util.renderError(e,c)):(d&&qv.services.parseRecordsetCacheKeyXML(e),qv.services.GetMetadataIfNeeded(e,function(b,e){var d=false;if(b!=e.xml.metadata){e.xml.metadata=b;d=true}(new Date).getTime();if(qv.util.anyError(b)){c=qv.util.getErrorFromText(b);qv.util.renderError(e,c)}else{d&&
qv.services.parseMetadataXML(e);e.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(e,function(b,e){var d=false;if(b!=e.xml.data){e.xml.data=b;d=true}(new Date).getTime();if(qv.util.anyError(b)){c=qv.util.getErrorFromText(b);qv.util.renderError(e,c)}else{d&&qv.services.parseDataXML(e);d=qv.util.GetContainerControlClasses(e);d!=""&&qv.util.SetUserControlClass(e,d);d=qv.util.ProcessDataAndMetadata(e);if(d==""){var g=e.userControlId(),d=qv.util.dom.getEmptyContainer(e);if((a(e)||k(e))&&d.offsetHeight==
0)d.style.height="400px";if(a(e)){qv.util.dom.createDiv(d,U(g),"QVTimelineHeaderContainer","",{width:"100%",height:ia+"px"},"");var f=qv.util.dom.createDiv(d,X(g),"","",{width:"100%",height:"calc(100% - "+ia+"px - "+P+"px)"},"");qv.util.dom.createDiv(d,g+"_footer","gx-qv-footer","",{width:"100%",height:P+"px"},"");d.style.padding=DEFAULTCHARTSPACING+"px";d=f}if(k(e))for(var f=e.Chart.Series.DataFields.length,l=parseInt(100/f),h=100%f,g=a(e)?X(g):g,m=0;m<f;m++)qv.util.dom.createDiv(d,g+"_chart"+m.toString(),
"","",{width:"100%",height:(l+(m<h?1:0)).toString()+"%"},"");d=[];if(k(e))for(f=0;f<e.Chart.Series.ByIndex.length;f++){l=D(e,e.Chart.Series.ByIndex[f],f);d.push(l)}else{l=D(e,null,null);d.push(l)}if(e.RealChartType==QueryViewerChartType.CircularGauge){f=qv.util.GetThemeStyleSheet(e);f.insertRule("#"+e.ContainerName+" .highcharts-tooltip-box {fill: none !important; stroke-width: 0 !important; }",f.cssRules.length)}Highcharts.setOptions({lang:{months:[gx.getMessage("GXPL_QViewerJanuary"),gx.getMessage("GXPL_QViewerFebruary"),
gx.getMessage("GXPL_QViewerMarch"),gx.getMessage("GXPL_QViewerApril"),gx.getMessage("GXPL_QViewerMay"),gx.getMessage("GXPL_QViewerJune"),gx.getMessage("GXPL_QViewerJuly"),gx.getMessage("GXPL_QViewerAugust"),gx.getMessage("GXPL_QViewerSeptember"),gx.getMessage("GXPL_QViewerOctober"),gx.getMessage("GXPL_QViewerNovember"),gx.getMessage("GXPL_QViewerDecember")],weekdays:[gx.getMessage("GXPL_QViewerSunday"),gx.getMessage("GXPL_QViewerMonday"),gx.getMessage("GXPL_QViewerTuesday"),gx.getMessage("GXPL_QViewerWednesday"),
gx.getMessage("GXPL_QViewerThursday"),gx.getMessage("GXPL_QViewerFriday"),gx.getMessage("GXPL_QViewerSaturday")],shortMonths:[gx.getMessage("GXPL_QViewerJanuary").substring(0,3),gx.getMessage("GXPL_QViewerFebruary").substring(0,3),gx.getMessage("GXPL_QViewerMarch").substring(0,3),gx.getMessage("GXPL_QViewerApril").substring(0,3),gx.getMessage("GXPL_QViewerMay").substring(0,3),gx.getMessage("GXPL_QViewerJune").substring(0,3),gx.getMessage("GXPL_QViewerJuly").substring(0,3),gx.getMessage("GXPL_QViewerAugust").substring(0,
3),gx.getMessage("GXPL_QViewerSeptember").substring(0,3),gx.getMessage("GXPL_QViewerOctober").substring(0,3),gx.getMessage("GXPL_QViewerNovember").substring(0,3),gx.getMessage("GXPL_QViewerDecember").substring(0,3)],numericSymbols:null}});f=[];for(l=0;l<d.length;l++){HCChart=new Highcharts.Chart(d[l],ra);f.push(HCChart)}e.Charts=f;a(e)&&qa(f,d);e._ControlRenderedTo=e.RealType;qv.util.hideActivityIndicator(e)}else qv.util.renderError(e,d)}}):qv.util.renderError(e,e.Metadata.ParserResult.Message)}}))})},
GetMetadataChart:function(a){var b=qv.util.GetDesigntimeMetadata(a);(function(a,b){function c(a,b,e){for(var d=0;d<a.length;d++){var g=a[d];if(g.Name==b){g.Visible=e?QueryViewerVisible.Yes:QueryViewerVisible.No;break}}}if(a.PlotSeries==QueryViewerPlotSeries.InTheSameChart)for(var e=0;e<a.Charts[0].series.length;e++){var d=a.Charts[0].series[e],g=a.Chart.Series.ByIndex[e].FieldName;c(b,g,d.visible)}else for(e=0;e<a.Charts.length;e++)d=a.Charts[e].series[0],g=a.Chart.Series.ByIndex[e].FieldName,c(b,
g,d.visible)})(a,b);return b},GetRuntimeMetadata:function(a){for(var b=[],c,e=c=0;e<a.Metadata.Axes.length;e++){var d=a.Metadata.Axes[e];d.Visible!=QueryViewerVisible.Never&&(c+=1);b.push({Name:d.Name,Type:QueryViewerElementType.Axis,Axis:d.Axis,Position:d.Visible!=QueryViewerVisible.Never?c:null,Hidden:d.Visible==QueryViewerVisible.Never||d.Visible==QueryViewerVisible.No})}for(e=c=0;e<a.Metadata.Data.length;e++)d=a.Metadata.Data[e],d.Visible!=QueryViewerVisible.Never&&(c+=1),b.push({Name:d.Name,
Type:QueryViewerElementType.Datum,Axis:"",Position:d.Visible!=QueryViewerVisible.Never?c:null,Hidden:d.Visible==QueryViewerVisible.Never||d.Visible==QueryViewerVisible.No});if(a.PlotSeries==QueryViewerPlotSeries.InTheSameChart)for(c=0;c<a.Charts[0].series.length;c++)e=a.Charts[0].series[c],d=a.Chart.Series.ByIndex[c].FieldName,d=qv.util.GetElementInCollection(b,"Name",d),d.Hidden=!e.visible;else for(c=0;c<a.Charts.length;c++)e=a.Charts[c].series[0],d=a.Chart.Series.ByIndex[c].FieldName,d=qv.util.GetElementInCollection(b,
"Name",d),d.Hidden=!e.visible;return b},GetDataChart:function(a){return a.xml.data},getSparklineChartOptions:function(a,b,c,e,d,g){a={chart:{}};a.chart.renderTo=b;a.chart.margin=0;a.chart.type=c;a.chart.styledMode=!0;e&&(a.chart.className="highcharts-no-background");a.title={};a.title.text="";a.credits={};a.credits.enabled=!1;a.xAxis={};a.xAxis.visible=!1;a.yAxis={};a.yAxis.visible=!1;a.legend={};a.legend.enabled=!1;a.tooltip={};a.tooltip.enabled=!1;a.plotOptions={};a.plotOptions.series={};a.plotOptions.series.animation=
!1;a.plotOptions.series.connectNulls=!0;a.plotOptions.series.enableMouseTracking=!1;a.plotOptions.series.lineWidth=1;a.plotOptions.series.shadow=!1;a.plotOptions.series.states={};a.plotOptions.series.states.hover={};a.plotOptions.series.states.hover.lineWidth=1;a.plotOptions.series.marker={};a.plotOptions.series.marker.radius=0;a.plotOptions.series.marker.states={};a.plotOptions.series.marker.states.hover={};a.plotOptions.series.marker.states.hover.radius=2;""!=d&&(a.plotOptions.series.step=d);a.series=
[];for(b=0;b<g.length;b++)a.series.push(g[b]);return a},IsDatetimeXAxis:function(a){return c(a)},IsSingleSerieChart:function(a){return d(a)||b(a)},IsAreaChart:function(a){return a.RealChartType==QueryViewerChartType.Area||a.RealChartType==QueryViewerChartType.StackedArea||a.RealChartType==QueryViewerChartType.StackedArea100||a.RealChartType==QueryViewerChartType.SmoothArea||a.RealChartType==QueryViewerChartType.StepArea},IsLineChart:function(b){return b.RealChartType==QueryViewerChartType.Line||b.RealChartType==
QueryViewerChartType.StackedLine||b.RealChartType==QueryViewerChartType.StackedLine100||b.RealChartType==QueryViewerChartType.SmoothLine||b.RealChartType==QueryViewerChartType.StepLine||b.RealChartType==QueryViewerChartType.Sparkline||a(b)},IsSplittedChart:function(a){return k(a)},IsGaugeChart:function(a){return o(a)},Select:function(a,b){for(var c=[],e=0;e<a.Data.Rows.length;e++){var d=a.Data.Rows[e],g=!0;for(j=0;j<b.length;j++){var f=b[j];if(d[f.DataField]&&qv.util.trim(d[f.DataField])!=qv.util.trim(f.Value)){g=
!1;break}}g&&c.push(e)}if(0<c.length){e=a.Charts;for(d=0;d<e.length;d++)for(var g=e[d],f=!1,l=0;l<c.length;l++)for(var h=c[l],m=0;m<g.series.length;m++)g.series[m].points[h].select(!0,f),f||(f=!0)}else x(a.Charts)},Deselect:function(a){x(a.Charts)}}}();
qv.card=function(){function a(a,b){if(0!=a.ConditionalStyles.length)for(var c=0;c<a.ConditionalStyles.length;c++){var d=a.ConditionalStyles[c];if(qv.util.satisfyStyle(b,d))return qv.util.css.parseStyle(d.StyleOrClass)}return qv.util.css.parseStyle(a.Style)}function c(a,b,c,d){function f(a,b){var c=gx.date.now(),e;switch(a){case QueryViewerTrendPeriod.LastYear:e=gx.date.addyr(c,-1);break;case QueryViewerTrendPeriod.LastSemester:e=gx.date.addmth(c,-6);break;case QueryViewerTrendPeriod.LastQuarter:e=
gx.date.addmth(c,-3);break;case QueryViewerTrendPeriod.LastMonth:e=gx.date.addmth(c,-1);break;case QueryViewerTrendPeriod.LastWeek:e=gx.date.dtadd(c,-604800);break;case QueryViewerTrendPeriod.LastDay:e=gx.date.dtadd(c,-86400);break;case QueryViewerTrendPeriod.LastHour:e=gx.date.dtadd(c,-3600);break;case QueryViewerTrendPeriod.LastMinute:e=gx.date.dtadd(c,-60);break;case QueryViewerTrendPeriod.LastSecond:e=gx.date.dtadd(c,-1)}return qv.util.dateToString(e,b==QueryViewerDataType.DateTime)}var k={};
if(a.IncludeTrend)if(a.TrendPeriod==QueryViewerTrendPeriod.SinceTheBeginning||""==a.TrendPeriod)k=0;else for(var e=f(a.TrendPeriod,d),k=a.Data.Rows.length-1,l=a.Data.Rows.length-2;0<=l&&!(a.Data.Rows[l][c]<e);l--)k=l;else k=a.Data.Rows.length-1;return k=function(a,b,c,e,d,g){var f=null,l=null,h=null,k=null,m=[],o={AnyTrend:!1};if(""!=c){for(var n=d.length-1,v=0,t=0,w=0,r=0,q=0,x=0,B=null,T=null;a<=n;a++)if(void 0!=d[a][c]&&void 0!=d[a][e]){var v=v+1,I=new gx.date.gxdate(d[a][c],"Y4MD"),H=parseFloat(d[a][e]);
m.push({x:I.Value.getTime()-6E4*I.Value.getTimezoneOffset(),y:H});if(null==f&&null==l)l=f=H,h=d[a][c],k=d[a][c];else if(H>l&&(k=d[a][c],l=H),H<f)h=d[a][c],f=H;a>=b&&(null==B&&null==T&&(B=I,T=H),I=g==QueryViewerDataType.Date?gx.date.daysDiff(I,B):gx.date.secDiff(I,B),H-=T,t+=I,w+=H,r+=I*H,q+=I*I,x+=H*H)}o.AnyTrend=1<v;o.Slope=(v*r-t*w)/(v*q-t*t);o.Intercept=(w-o.Slope*t)/v;o.R2=Math.pow((v*r-t*w)/Math.sqrt((v*q-t*t)*(v*x-w*w)),2)}b={};b.LinearRegression=o;b.MinValue=f;b.MinWhen=h;b.MaxValue=l;b.MaxWhen=
k;b.ChartSeriesData=m;return b}(a.IncludeSparkline||a.IncludeMaxAndMin?0:k,k,c,b.DataField,a.Data.Rows,d)}function d(a,b,c,d){function f(a,b){function c(a,b,e){var d=[];if(e)for(e=0;e<b.length;e++)d.push(b[e][a]);else d.push(b[b.length-1][a]);return d}for(var e=[],d=0;d<a.Metadata.Axes.length;d++){var g=a.Metadata.Axes[d];if(!g.IsComponent){var h={};h.Name=g.Name;h.Values=c(g.DataField,a.Data.Rows,b);e.push(h)}}for(d=0;d<a.Metadata.Data.length;d++)g=a.Metadata.Data[d],g.IsComponent||(h={},h.Name=
g.Name,h.Values=c(g.DataField,a.Data.Rows,b),e.push(h));return e}for(var k=null,e=0;e<b.Metadata.Data.length;e++)if(b.Metadata.Data[e].Name==c){k=b.Metadata.Data[e];break}null!=k&&(a.Name=k.Name,a.Type=QueryViewerElementType.Datum,a.Axis="",c=d?qv.util.aggregateData(b.Metadata.Data,b.Data.Rows):b.Data.Rows[b.Data.Rows.length-1],a.Value=c[k.DataField],a.Context=f(b,d))}function b(a,b){return a+"_card_sparkline_"+b}function f(a,c,d){d=b(a.userControlId(),d);return qv.chart.getSparklineChartOptions(a,
d,"line",!0,"",[{data:c}])}function q(a,b,c,d){var f={textAlign:"center",paddingTop:"0px",paddingRight:"5px",paddingBottom:"0px",paddingLeft:"5px"},a=qv.util.dom.createTable(a,"",{}),k;k=qv.util.dom.createRow(a);k=qv.util.dom.createCell(k,1,"",f,"");qv.util.dom.createSpan(k,"","qv-card-max-and-min-value",c,{},null,b);k=qv.util.dom.createRow(a);k=qv.util.dom.createCell(k,1,"",f,"");qv.util.dom.createSpan(k,"","qv-card-max-and-min-title",c,{},null,d);return a}function o(a){var a=new gx.date.gxdate(a,
"Y4MD"),b=gx.date.now(),a=gx.date.secDiff(b,a);return gx.getMessage("GXPL_QViewerTimeAgo").replace("{0}",qv.util.seconsdToText(a))}function k(a,b,c,d){""!=b?(d=qv.util.formatNumber(parseFloat(b),d,c.Picture,!1),b=qv.util.formatNumber(parseFloat(100*b/c.TargetValue),2,"ZZZZZZZZZZZZZZ9.99",!1)+"%"):b=d="";switch(a.ShowDataAs){case QueryViewerShowDataAs.Values:return d;case QueryViewerShowDataAs.Percentages:return b;case QueryViewerShowDataAs.ValuesAndPercentages:return d+" ("+b+")";default:return d}}
function n(d){function h(a,b,c){var c=0<c.LinearRegression.Slope?"keyboard_arrow_up":0>c.LinearRegression.Slope?"keyboard_arrow_down":"drag_handle",e;e=""==b.TrendPeriod?gx.getMessage("GXPL_QViewerSinceTheBeginningTrend"):gx.getMessage("GXPL_QViewer"+b.TrendPeriod+"Trend");var d={width:"0px",marginLeft:"5px"};b.IncludeSparkline||(d.position="relative",d.top="2px");d.fontSize="36px";return c=qv.util.dom.createIcon(a,e,d,c)}for(var n=0<d.Data.Rows.length,g=!0,x="",B,e=0;e<d.Metadata.Axes.length;e++){var l=
d.Metadata.Axes[e];if(l.DataType==QueryViewerDataType.Date||l.DataType==QueryViewerDataType.DateTime){g=!1;x=l.DataField;B=l.DataType;break}}var y;n&&(y=g?qv.util.aggregateData(d.Metadata.Data,d.Data.Rows):d.Data.Rows[d.Data.Rows.length-1]);var C=qv.util.dom.getEmptyContainer(d);l=d.IsAutoResize()?e="":e="100%";var e=qv.util.dom.createTable(C,qv.util.GetContainerControlClasses(d),{width:e,height:l}),e=qv.util.dom.createRow(e),C=qv.util.dom.createCell(e,1,"center",{},""),e=d.Orientation==QueryViewerOrientation.Horizontal?
"100%":"",l=d.Orientation==QueryViewerOrientation.Vertical?"100%":"",C=qv.util.dom.createTable(C,"",{width:e,height:l,whiteSpace:"nowrap"}),u;d.Orientation==QueryViewerOrientation.Horizontal&&(u=qv.util.dom.createRow(C));l=[];for(e=0;e<d.Metadata.Data.length;e++){var s=d.Metadata.Data[e];if(s.Visible==QueryViewerVisible.Yes||s.Visible==QueryViewerVisible.Always){var G=qv.util.ParseNumericPicture(s.DataType,s.Picture).DecimalPrecision,p,J,z;n?(p=y[s.DataField],J=k(d,y[s.DataField],s,G),z=o(y[x])):
z=J=p="";if((gx.lang.gxBoolean(d.IncludeTrend)||gx.lang.gxBoolean(d.IncludeSparkline)||gx.lang.gxBoolean(d.IncludeMaxAndMin))&&n){var A=c(d,s,x,B);l.push(A)}var K=a(s,p);p={};var F="qv-card-element-value";qv.util.startsWith(K,"{")&&qv.util.endsWith(K,"}")?p=JSON.parse(K):F=K;K=null;d.ItemClick&&s.RaiseItemClick&&(F+=(""==F?"":" ")+"gx-qv-clickable-element",K=function(){qv.card.fireItemClickEvent(event,d,g)});d.Orientation==QueryViewerOrientation.Vertical&&(u=qv.util.dom.createRow(C));var D=d.Orientation==
QueryViewerOrientation.Horizontal?"10px":"",E=d.Orientation==QueryViewerOrientation.Vertical?"10px":"",D=qv.util.dom.createCell(u,1,"center",{paddingRight:D,paddingLeft:D,paddingBottom:E,paddingTop:E},""),D=qv.util.dom.createTable(D,"",{}),E=qv.util.dom.createRow(D),E=qv.util.dom.createCell(E,1,"center",{},""),E=qv.util.dom.createTable(E,"",{}),E=qv.util.dom.createRow(E),v=qv.util.dom.createCell(E,1,"center",{},"");qv.util.dom.createSpan(v,d.getContainerControl().id+"_"+s.Name,F,""!=x?z:"",p,K,J);
var v=qv.util.dom.createCell(E,1,"",{},"");n&&(d.IncludeTrend&&!d.IncludeSparkline&&A.LinearRegression.AnyTrend)&&h(v,d,A);E=qv.util.dom.createRow(D);E=qv.util.dom.createCell(E,1,"center",{},"");span1=qv.util.dom.createSpan(E,"","qv-card-element-title",""!=x?z:"",{},null,s.Title);d.IncludeSparkline&&(""!=x&&n)&&(E=qv.util.dom.createRow(D),E=qv.util.dom.createCell(E,1,"",{},""),E=qv.util.dom.createTable(E,"",{width:"100%"}),E=qv.util.dom.createRow(E),v=qv.util.dom.createCell(E,1,"",{width:"100%"},
""),qv.util.dom.createDiv(v,b(d.userControlId(),e),"","",{height:"50px",width:"100%",minWidth:"100px"},""),v=qv.util.dom.createCell(E,1,"",{width:"0%"},""),n&&(d.IncludeTrend&&A.LinearRegression.AnyTrend)&&h(v,d,A));d.IncludeMaxAndMin&&(""!=x&&n)&&(E=qv.util.dom.createRow(D),E=qv.util.dom.createCell(E,1,"center",{},""),E=qv.util.dom.createTable(E,"",{"margin-top":"10px"}),E=qv.util.dom.createRow(E),v=qv.util.dom.createCell(E,1,"",{},""),q(v,k(d,A.MinValue,s,G),o(A.MinWhen),gx.getMessage("GXPL_QViewerCardMinimum")),
v=qv.util.dom.createCell(E,1,"",{},""),q(v,k(d,A.MaxValue,s,G),o(A.MaxWhen),gx.getMessage("GXPL_QViewerCardMaximum")))}}if(d.IncludeSparkline&&""!=x&&n)for(e=0;e<d.Metadata.Data.length;e++)n=f(d,l[e].ChartSeriesData,e),new Highcharts.Chart(n);d._ControlRenderedTo=d.RealType;qv.util.hideActivityIndicator(d)}return{tryToRenderCard:function(a){var b="";(new Date).getTime();a.xml=a.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(a,function(a,c){var d=!1;a!=c.xml.recordsetCacheKey&&(c.xml.recordsetCacheKey=
a,d=!0);qv.util.anyError(a)?(b=qv.util.getErrorFromText(a),qv.util.renderError(c,b)):(d&&qv.services.parseRecordsetCacheKeyXML(c),qv.services.GetMetadataIfNeeded(c,function(a,c){var d=false;if(a!=c.xml.metadata){c.xml.metadata=a;d=true}(new Date).getTime();if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(c,b)}else{d&&qv.services.parseMetadataXML(c);c.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(c,function(a,c){var e=false;if(a!=c.xml.data){c.xml.data=a;e=true}(new Date).getTime();
if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(c,b)}else{e&&qv.services.parseDataXML(c);n(c)}}):qv.util.renderError(c,c.Metadata.ParserResult.Message)}}))})},GetMetadataCard:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataCard:function(a){return a.xml.data},fireItemClickEvent:function(a,b,c){a=a.target.id;a=a.substr(a.lastIndexOf("_")+1);d(b.ItemClickData,b,a,c);b.ItemClick()}}}();
qv.map=function(){function a(a){if(a.MapType==QueryViewerMapType.Choropleth||a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.Character||a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&"F0"!=a.Chart.Series.DataFields[0])return a.Chart.Series.ByIndex[0].Color.Color?"#"+a.Chart.Series.ByIndex[0].Color.Color:"#0F5B78";if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&
"F0"==a.Chart.Series.DataFields[0])return a.Metadata.Axes[0].Style?a.Metadata.Axes[0].Style.substring(6,a.Metadata.Axes[0].Style.length):"#0F5B78"}function c(b){var c=[];if(b.Metadata.Axes[0].DataType==QueryViewerDataType.Character){if(0<b.Chart.Categories.DataFields.length&&0<b.Chart.Series.DataFields.length)for(var d=0;d<b.Chart.Categories.Values.length;d++){var f=b.Chart.Categories.Values[d].Value,h=parseFloat(b.Chart.Series.ByIndex[0].Points[d].Value);b.MapLibrary===QueryViewerMapLibrary.ECharts?
c.push({name:f,value:h}):c.push([axisvalue,h])}}else if(b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint)for(var c=[],k,m=b.Metadata.Axes[0],d=0;d<b.Data.Rows.length;d++){f=b.Data.Rows[d][m.DataField];f=f.substring(7,f.length-1);for(h=0;h<f.length;h++)if(" "==f[h])var p=parseFloat(f.substring(0,h)),o=parseFloat(f.substring(h+1,f.length));f=[p,o];h=parseFloat(b.Chart.Series.ByIndex[0].Points[d].Value);"F0"==b.Chart.Series.DataFields[0]?c.push({coord:[f[0],f[1]],additionalData:b.Data.Rows[d]}):
0==b.Chart.colorAxis.dataClasses.length?c.push({coord:[f[0],f[1]],value:h,itemStyle:{color:a(b)},additionalData:b.Data.Rows[d]}):(k=b.Chart.Series.ByIndex[0].Points[d].Color.Color,g(k)&&(k="#"+k),c.push({coord:[f[0],f[1]],value:h,itemStyle:{color:k},additionalData:b.Data.Rows[d]}))}return c}function d(a,b,c,d,f,g,h,k,m){function z(a,c){var e={};e.Name=a.Name;var d=qv.util.GetPictureProperties(a.DataType,a.Picture);a.DataType!=QueryViewerDataType.GeoPoint?(d=qv.util.ApplyPicture(c,a.Picture,a.DataType,
d),e.Values=[d]):e.Values=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Bubble?c[A.DataField]:[c];return e}var A=b.Metadata.Axes[0];a.Name=c;a.Type=d;a.Axis="";a.Value=f;a.Selected=g;a.Context=[];A.IsComponent||(d=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Bubble?z(A,b.Data.Rows[m]):b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Choropleth?z(A,k[m].name):z(A,k[m].Value),
a.Context.push(d));for(c=0;c<b.Metadata.Data.length;c++)d=b.Metadata.Data[c],d.IsComponent||(d=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Choropleth?z(d,h[m].value):z(d,h[m].Value),a.Context.push(d));a.Filters=[]}function b(a){a.on("mousedown",function(){a.getZr().setCursorStyle("auto")});a.on("mousemove",function(){a.getZr().setCursorStyle("auto")});a.on("mouseup",function(){a.getZr().setCursorStyle("auto")});a.on("mouseover",function(){a.getZr().setCursorStyle("auto")});
a.on("mouseout",function(){a.getZr().setCursorStyle("auto")})}function f(a,b){a.on("mousedown",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mousemove",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseup",
function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseover",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseout",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):
"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")})}function q(a,b){a.on("click",function(f){if(b.MapType==QueryViewerMapType.Choropleth||b.MapType==QueryViewerMapType.Bubble&&"markPoint"===f.componentType){var h=b.Chart.Series.ByIndex[0],m=qv.util.formatNumber(f.value,h.NumberFormat.DecimalPrecision,h.Picture,!1),s=b.Chart.Series.ByIndex[0].Points,o;b.MapType==QueryViewerMapType.Bubble&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint?o=b.Data.Rows:
b.MapType==QueryViewerMapType.Choropleth&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint?s=o=k(c(b),a,b):o=b.Chart.Categories.Values;var p;p=a.getOption();if(b.SelectionAllowed())if(b.MapType==QueryViewerMapType.Choropleth)p=p.series[0].selectedMap,p=!0==p[Object.keys(p)[0]]?!0:!1;else{var n;0==b.Chart.colorAxis.dataClasses.length?n=p.series[0].color:(n=b.Chart.Series.ByIndex[0].Points[f.dataIndex].Color.Color,g(n)&&(n="#"+n));p=a.BubbleSelect==f.dataIndex&&p.series[0].markPoint.data[f.dataIndex].itemStyle.color==
n?!0:a.BubbleSelect==f.dataIndex&&p.series[0].markPoint.data[f.dataIndex].itemStyle.color!=n?!1:a.BubbleSelect!=f.dataIndex&&p.series[0].markPoint.data[f.dataIndex].itemStyle.color==n?!0:!1}else p=!1;f.dataIndex>o.length-1&&Number.isNaN(f.value)||(d(b.ItemClickData,b,h.FieldName,QueryViewerElementType.Datum,m,p,s,o,f.dataIndex),b.ItemClick())}})}function o(a,b,c){function d(a,b){for(var c=a[0],e=a[1],f=!1,g=0,h=b.length-1;g<b.length;h=g++){var l=b[g][0],k=b[g][1],m=b[h][0],h=b[h][1];k>e!=h>e&&c<(m-
l)*(e-k)/(h-k)+l&&(f=!1==f?!0:!1)}return f}return function(a,b,c){var e=[];if(b.Region==QueryViewerRegion.Country&&(b.Country==QueryViewerCountry.US||b.Country==QueryViewerCountry.ES||b.Country==QueryViewerCountry.PT||b.Country==QueryViewerCountry.FR||b.Country==QueryViewerCountry.GQ||b.Country==QueryViewerCountry.MU)){for(var f=[[QueryViewerCountry.US,["US-AK","US-HI","US-PR"]],[QueryViewerCountry.ES,["ES-CN","ES-IB"]],[QueryViewerCountry.PT,["PT-20","PT-30"]],[QueryViewerCountry.FR,["FR-GF","FR-RE",
"FR-GP","FR-MQ","FR-YT"]],[QueryViewerCountry.GQ,["GQ-AN","GQ-BS","GQ-BN"]],[QueryViewerCountry.MU,["MU-RO","MU-CC","MU-AG"]]],g,h,l,k,m,n,v,t=0;t<f.length;t++)if(f[t][0]==b.Country){k=f[t];break}for(b=0;b<c._coordSysMgr._coordinateSystems[0].regions.length;b++)for(f=0;f<k[1].length;f++)for(t=0;t<a.length;t++)if(c._coordSysMgr._coordinateSystems[0].regions[b].name==k[1][f]){if(g=d(a[t].coord,c._coordSysMgr._coordinateSystems[0].regions[b].properties.specialArea),!0==g){height=c._coordSysMgr._coordinateSystems[0].regions[b].properties.specialAreaHeight;
h=c._coordSysMgr._coordinateSystems[0].regions[b]._rect.x;g=c._coordSysMgr._coordinateSystems[0].regions[b]._rect.y;l=c._coordSysMgr._coordinateSystems[0].regions[b]._rect.width;void 0!=c._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaWidth&&c._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit?(m=c._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit[0],n=c._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit[1],v=c._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaWidth,
areaHeight=c._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaHeight,h-=[(m-a[t].coord[0])/v*l],g=g+height-Math.abs((n-a[t].coord[1])/areaHeight*height)):(h=a[t].coord[0]+(h-a[t].coord[0])+l,g=a[t].coord[1]*height/90+g);a[t].coord=[h,g];n=a[t];n.name=null;n.name=c._coordSysMgr._coordinateSystems[0].regions[b].name;e.push(n);break}}else for(g=0;g<c._coordSysMgr._coordinateSystems[0].regions[b].geometries.length;g++)if(d(a[t].coord,c._coordSysMgr._coordinateSystems[0].regions[b].geometries[g].exterior)){n=
a[t];h=!1;for(l=0;l<e.length;l++)e[l].coord===n.coord&&e[l].value===n.value&&(h=!0);h||(n=a[t],n.name=null,n.name=c._coordSysMgr._coordinateSystems[0].regions[b].name,e.push(n))}return e}if(b.Region==QueryViewerRegion.World&&b.MapType!=QueryViewerMapType.Choropleth)return a;for(k=0;k<a.length;k++){f=!1;for(b=0;b<c._coordSysMgr._coordinateSystems[0].regions.length&&!1==f;b++)for(g=0;g<c._coordSysMgr._coordinateSystems[0].regions[b].geometries.length&&!1==f;g++)if(d(a[k].coord,c._coordSysMgr._coordinateSystems[0].regions[b].geometries[g].exterior)){n=
a[k];n.name=null;n.name=c._coordSysMgr._coordinateSystems[0].regions[b].name;e.push(n);f=!0;break}}return e}(a,b,c)}function k(a,b,c){for(var d=[],b=o(a,c,b),a=[],f=0;f<b.length;f++)d.push({name:b[f].name,value:0,additionalData:[b[f].additionalData]});for(b=0;b<d.length;b++){for(var f=d[b],g=!1,h=[],k=0;k<a.length;k++)a[k].name===f.name&&(h=a[k].additionalData,h.push(f.additionalData[0]),a[k].additionalData=h,g=!0);!1==g&&a.push(f)}for(b=0;b<a.length;b++)d=qv.util.aggregateData(c.Metadata.Data,a[b].additionalData,
c),a[b].value=d[c.Metadata.Data[0].DataField];return a}function n(b){var c;if(b.MapType==QueryViewerMapType.Choropleth&&0==b.Chart.colorAxis.dataClasses.length)return c={min:0,maxColor:a(b)};if(b.MapType==QueryViewerMapType.Choropleth&&0!=b.Chart.colorAxis.dataClasses.length||b.MapType==QueryViewerMapType.Bubble&&0!=b.Chart.colorAxis.dataClasses.length)return c=b.Chart.colorAxis;b.MapType==QueryViewerMapType.Bubble&&0==b.Chart.colorAxis.dataClasses.length&&(c=[]);return c}function m(a){var b;if(a.MapType==
QueryViewerMapType.Choropleth)return b={enabled:!0};a.MapType==QueryViewerMapType.Bubble&&(b=0!=a.Chart.colorAxis.dataClasses.length?{enabled:!0}:{enabled:!1});return b}function h(b){var d;if(b.MapType==QueryViewerMapType.Choropleth)return d=[{name:qv.util.getTranslation(b.Title),type:"map",borderColor:"gray",colorByPoint:!1,data:c(b),joinBy:["name","hc-key"],dataLabels:{enabled:!0,format:"{point.name}"}}];b.MapType==QueryViewerMapType.Bubble&&(d=0==b.Chart.colorAxis.dataClasses.length?b.Chart.Series.ByIndex[0].Color.Color?
[{color:"#E0E0E0",enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",joinBy:["name","hc-key"],data:c(b),styledMode:!1,color:a(b),showInLegend:!0,minSize:4,maxSize:"12%"}]:[{enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",joinBy:["name","hc-key"],data:c(b),colorIndex:b.Metadata.Data[0].colorIndex,opacity:0.5,showInLegend:!0,minSize:4,maxSize:"12%"}]:[{color:"#E0E0E0",enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",
joinBy:["name","hc-key"],data:c(b),styledMode:!1,showInLegend:!0,minSize:4,maxSize:"12%"}]);return d}function r(a){var b;if(a.MapType==QueryViewerMapType.Choropleth)return b={};a.MapType==QueryViewerMapType.Bubble&&(b={});return b}function g(a){var b=/[0-9A-Fa-f]{6}/g,a=b.test(a)?!0:!1;b.lastIndex=0;return a}function x(b,c,d){var f=[],h;if(d.MapType==QueryViewerMapType.Choropleth&&d.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint)for(var k=0;k<b.length;k++)for(var m=0;m<c._coordSysMgr._coordinateSystems[0].regions.length;m++){if(c._coordSysMgr._coordinateSystems[0].regions[m].name==
b[k].name){0!=d.Chart.colorAxis.dataClasses.length?void 0!=c._coordSysMgr._coordinateSystems[0].regions[m].properties.center?(h=d.Chart.Series.ByIndex[0].Points[k].Color.Color,g(h)&&(h="#"+h),f.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[m].properties.center[0],c._coordSysMgr._coordinateSystems[0].regions[m].properties.center[1]],value:b[k].value,itemStyle:{color:h}})):f.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[m].center[0],c._coordSysMgr._coordinateSystems[0].regions[m].center[1]],
value:b[k].value,itemStyle:{color:h}}):void 0!=c._coordSysMgr._coordinateSystems[0].regions[m].properties.center?f.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[m].properties.center[0],c._coordSysMgr._coordinateSystems[0].regions[m].properties.center[1]],value:b[k].value,itemStyle:{color:a(d)}}):f.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[m].center[0],c._coordSysMgr._coordinateSystems[0].regions[m].center[1]],value:b[k].value,itemStyle:{color:a(d)}});
break}}else for(k=0;k<d.Chart.Categories.Values.length;k++)for(m=0;m<c._coordSysMgr._coordinateSystems[0].regions.length;m++)if(c._coordSysMgr._coordinateSystems[0].regions[m].name==d.Chart.Categories.Values[k].Value){0!=d.Chart.colorAxis.dataClasses.length?void 0!=c._coordSysMgr._coordinateSystems[0].regions[m].properties.center?(h=d.Chart.Series.ByIndex[0].Points[k].Color.Color,g(h)&&(h="#"+h),f.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[m].properties.center[0],
c._coordSysMgr._coordinateSystems[0].regions[m].properties.center[1]],value:b[k].value,itemStyle:{color:h}})):f.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[m].center[0],c._coordSysMgr._coordinateSystems[0].regions[m].center[1]],value:b[k].value,itemStyle:{color:h}}):void 0!=c._coordSysMgr._coordinateSystems[0].regions[m].properties.center?f.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[m].properties.center[0],
c._coordSysMgr._coordinateSystems[0].regions[m].properties.center[1]],value:b[k].value,itemStyle:{color:a(d)}}):f.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[m].center[0],c._coordSysMgr._coordinateSystems[0].regions[m].center[1]],value:b[k].value,itemStyle:{color:a(d)}});break}return f}function B(e,d){function h(a,b,c){var d=[],e=function(a){for(var b=qv.util.GetPictureProperties(a.Chart.Series.ByIndex[0].DataType,a.Chart.Series.ByIndex[0].Picture),
c=[],d,e=0;e<a.Chart.colorAxis.dataClasses.length;e++)d=a.Chart.colorAxis.dataClasses[e].Operator,d=d==QueryViewerConditionOperatorSymbol.Interval?qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[e].from,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b)+d+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[e].to,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):d==QueryViewerConditionOperatorSymbol.Equal?""+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[e].from,
a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):d==QueryViewerConditionOperatorSymbol.LessThan||d==QueryViewerConditionOperatorSymbol.LessOrEqual?d+" "+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[e].to,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):d+" "+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[e].from,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b),c.push(d);return c}(a),f=function(a){for(var b=a.MapType==QueryViewerMapType.Bubble&&
a.Metadata.Axes[0].DataType==QueryViewerDataType.Character?[""]:[],c,d=0;d<a.Chart.colorAxis.dataClasses.length;d++)c=a.Chart.colorAxis.dataClasses[d].color,b.push(c);return b}(a),a=function(a,b,c,d){var e=[];if(a.Metadata.Axes[0].DataType==QueryViewerDataType.Character)b={name:"serie",type:"map",markPoint:{nameProperty:"iso-code",data:b}};else var b=o(b,a,d),f=Math.max.apply(Math,b.map(function(a){return a.value})),d=a.getContainerControl(),g=Math.min(d.offsetWidth,d.offsetHeight),b={name:"serie",
type:"map",markPoint:{data:b,symbolSize:function(a){return void 0==a?8:Math.sqrt(a/f)*g/10}}};e.push(b);for(b=0;b<a.Chart.colorAxis.dataClasses.length;b++)e.push({name:c[b],type:"map",data:[]});return e}(a,b,e,c);d.push(e,f,a);return d}function m(a,b){b.TextStyle.fontFamily&&(a.fontFamily=b.TextStyle.fontFamily);b.TextStyle.fontSize&&(a.fontSize=b.TextStyle.fontSize);b.TextStyle.fontStyle&&(a.fontStyle=b.TextStyle.fontStyle);b.TextStyle.fontWeight&&(a.fontWeight=b.TextStyle.fontWeight);b.TextStyle.color&&
(a.color=b.TextStyle.color);b.BoxStyle.backgroundColor&&(a.backgroundColor=qv.util.color.resolveColor(b.BoxStyle.backgroundColor,b.BoxStyle.opacity));b.BoxStyle.borderColor&&(a.borderColor=b.BoxStyle.borderColor);b.BoxStyle.borderWidth&&(a.padding=3,a.borderWidth=b.BoxStyle.borderWidth)}0==e.offsetHeight&&(e.style.height="400px",e.style.overflow="hidden");var n=echarts.init(e),s=function(a){function b(a,c){if(a.fontFamily&&!c.fontFamily)c.fontFamily=a.fontFamily;if(a.fontSize&&!c.fontSize)c.fontSize=
a.fontSize;if(a.fontStyle&&!c.fontStyle)c.fontStyle=a.fontStyle;if(a.fontWeight&&!c.fontWeight)c.fontWeight=a.fontWeight;if(a.color&&!c.color)c.color=a.color}function c(a,b){if(a.fontFamily)b.fontFamily=qv.util.css.resolveVariable(a.fontFamily);if(a.fontSize)b.fontSize=parseFloat(qv.util.css.resolveVariable(a.fontSize));if(a.fontStyle)b.fontStyle=qv.util.css.resolveVariable(a.fontStyle);if(a.fontWeight)b.fontWeight=qv.util.css.resolveVariable(a.fontWeight);if(a.color)b.color=qv.util.css.resolveVariable(a.color)}
function d(a,b){if(a.backgroundColor)b.backgroundColor=qv.util.css.resolveVariable(a.backgroundColor);if(a.opacity)b.opacity=qv.util.css.resolveVariable(a.opacity);if(a.borderWidth)b.borderWidth=parseFloat(qv.util.css.resolveVariable(a.borderWidth));if(a.borderColor)b.borderColor=qv.util.css.resolveVariable(a.borderColor)}function e(a,b,f){f.BackgroundColor=f.BackgroundColor||"white";f.SelectionColor=f.SelectionColor||"lightcoral";f.Opacity=f.Opacity||"1";f.TextStyle=f.TextStyle||{fontFamily:"Source Sans Pro"};
f.Title=f.Title||{TextStyle:{}};f.SeriesLabels=f.SeriesLabels||{TextStyle:{},BoxStyle:{}};f.Legend=f.Legend||{TextStyle:{},BoxStyle:{}};f.Tooltip=f.Tooltip||{TextStyle:{},BoxStyle:{}};for(var g=0;g<a.length;g++){var h=a[g];if(h instanceof CSSStyleRule){var k=h.style;if(h.selectorText==="."+b)c(k,f.TextStyle);else if(h.selectorText==="."+b+" .gx-qv-selected-element")f.SelectionColor=qv.util.css.resolveVariable(k.backgroundColor);else if(h.selectorText==="."+b+".qv-map"){f.BackgroundColor=qv.util.css.resolveVariable(k.backgroundColor);
f.Opacity=qv.util.css.resolveVariable(k.opacity)}else h.selectorText==="."+b+" .gx-qv-title"?c(k,f.Title.TextStyle):h.selectorText==="."+b+" .gx-qv-legend-box"?d(k,f.Legend.BoxStyle):h.selectorText==="."+b+" .gx-qv-legend-text"?c(k,f.Legend.TextStyle):h.selectorText==="."+b+" .gx-qv-series-labels-box"?d(k,f.SeriesLabels.BoxStyle):h.selectorText==="."+b+" .gx-qv-series-labels-text"?c(k,f.SeriesLabels.TextStyle):h.selectorText==="."+b+" .gx-qv-tooltip-box"?d(k,f.Tooltip.BoxStyle):h.selectorText==="."+
b+" .gx-qv-tooltip-text"&&c(k,f.Tooltip.TextStyle)}else h instanceof CSSImportRule?e(h.styleSheet.rules||h.styleSheet.cssRules,b,f):h instanceof CSSLayerBlockRule&&e(h.cssRules,b,f)}}var f=qv.util.GetThemeStyleSheet(a),f=f.rules||f.cssRules,a=qv.util.GetContainerControlClass(a),g={};e(f,a,g);b(g.TextStyle,g.Title.TextStyle);b(g.TextStyle,g.Legend.TextStyle);b(g.TextStyle,g.SeriesLabels.TextStyle);b(g.TextStyle,g.Tooltip.TextStyle);return g}(d);n.clear();var r={backgroundColor:qv.util.color.resolveColor(s.BackgroundColor,
s.Opacity),series:function(b,d){var e=a(b),f=gx.lang.gxBoolean(b.ShowValues)&&b.MapType===QueryViewerMapType.Bubble,g=b.getContainerControl(),h=Math.min(g.offsetWidth,g.offsetHeight),k=qv.util.GetPictureProperties(b.Chart.Series.ByIndex[0].DataType,b.Chart.Series.ByIndex[0].Picture),g={type:"map",map:qv.map.getMapDirectory(b).mapKey,roam:true,scaleLimit:{min:1},selectedMode:b.SelectionAllowed()?"single":false,label:{show:false,formatter:"{c}"},emphasis:{label:{show:false},itemStyle:{borderWidth:0.5}},
select:{label:{show:false},itemStyle:{borderWidth:0.5}}};if(b.MapType===QueryViewerMapType.Choropleth){g.nameProperty="iso-code";if(b.Metadata.Axes[0].DataType==QueryViewerDataType.Character)g.data=c(b);m(g.label,d.SeriesLabels);g.select.itemStyle.areaColor=d.SelectionColor;g.emphasis.itemStyle.borderWidth=1;g.emphasis.itemStyle.areaColor=null;g.emphasis.itemStyle.borderColor=qv.util.color.lightenDarkenColor(e,50)}else if(b.MapType==QueryViewerMapType.Bubble&&b.Metadata.Axes[0].DataType==QueryViewerDataType.Character){var l=
b.Chart.Series.ByIndex[0].MaxValue;if(b.Chart.colorAxis.dataClasses.length===0)g.color=e;g.nameProperty="iso-code";g.emphasis.itemStyle.areaColor="#eeeeee";g.select.itemStyle.areaColor="#eeeeee";g.data=c(b);g.showLegendSymbol=false;g.markPoint={symbol:"circle",symbolSize:function(a){return Math.sqrt(a/l)*h/10},label:{show:f,formatter:function(a){return qv.util.ApplyPicture(a.value,b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,k)}},itemStyle:{opacity:0.6,borderColor:qv.util.color.lightenDarkenColor(e,
50),borderWidth:1},emphasis:{label:{show:f},itemStyle:{opacity:0.7,borderColor:qv.util.color.lightenDarkenColor(e,100),borderWidth:2}}};m(g.markPoint.label,d.SeriesLabels)}else if(b.MapType==QueryViewerMapType.Bubble&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint){g.color=e;g.nameProperty="iso-code";g.emphasis.itemStyle.areaColor="#eeeeee";g.select.itemStyle.areaColor="#eeeeee";g.data=[];g.markPoint={symbol:"circle",label:{show:f,formatter:function(a){return qv.util.ApplyPicture(a.value,
b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,k)}},itemStyle:{opacity:0.6,borderColor:qv.util.color.lightenDarkenColor(e,50),borderWidth:1},emphasis:{label:{show:f},itemStyle:{opacity:0.7,borderColor:qv.util.color.lightenDarkenColor(e,100),borderWidth:2}}};m(g.markPoint.label,d.SeriesLabels)}return g}(d,s),title:{text:qv.util.getTranslation(d.Title),left:"center",textStyle:s.Title.TextStyle},dataRange:function(b,c){function d(a,b){var c=a;if(qv.util.isRTL(b))var e=a.split("-"),
c=e[0].trim(),e=e[1].trim(),c=c.split(" "),e=e.split(" "),c=e[1]+" "+e[0]+" - "+c[1]+" "+c[0];return c}function e(c){return c!=null?c:a(b)}var f,g=qv.util.GetPictureProperties(b.Chart.Series.ByIndex[0].DataType,b.Chart.Series.ByIndex[0].Picture);if(b.MapType==QueryViewerMapType.Choropleth&&b.Chart.colorAxis.dataClasses.length!=0){f=[];for(var k=0;k<b.Chart.colorAxis.dataClasses.length;k++){var l={},m=h(b,"",null)[0];b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.Interval?
l={start:b.Chart.colorAxis.dataClasses[k].from,end:b.Chart.colorAxis.dataClasses[k].to,color:e(b.Chart.colorAxis.dataClasses[k].color),label:d(m[k],b)}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.Equal||b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.NotEqual?l={value:b.Chart.colorAxis.dataClasses[k].from,color:e(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.GreaterThan?
l={start:b.Chart.colorAxis.dataClasses[k].from,color:e(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.GreaterOrEqual?l={start:b.Chart.colorAxis.dataClasses[k].from-1,color:e(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.LessThan?l={end:b.Chart.colorAxis.dataClasses[k].to,color:e(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==
QueryViewerConditionOperatorSymbol.LessOrEqual&&(l={end:b.Chart.colorAxis.dataClasses[k].to+1,color:e(b.Chart.colorAxis.dataClasses[k].color),label:m[k]});f.push(l)}f={x:qv.util.isRTL(b)?"right":"left",orient:"vertical",splitList:f,textStyle:c.TextStyle}}else if(b.MapType==QueryViewerMapType.Choropleth&&b.Chart.colorAxis.dataClasses.length==0){f={min:0,calculable:true,orient:"horizontal",left:"center",color:[a(b),"white"],textStyle:c.TextStyle,inverse:qv.util.isRTL(b),formatter:function(a){return qv.util.ApplyPicture(a,
b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,g)}};if(b.Metadata.Axes[0].DataType==QueryViewerDataType.Character){k=b.Chart.Series.ByIndex[0].MaxValue;f.max=k}}if(b.MapType==QueryViewerMapType.Choropleth){if(c.BoxStyle.backgroundColor)f.backgroundColor=qv.util.color.resolveColor(c.BoxStyle.backgroundColor,c.BoxStyle.opacity);if(c.BoxStyle.borderColor)f.borderColor=c.BoxStyle.borderColor;if(c.BoxStyle.borderWidth)f.borderWidth=c.BoxStyle.borderWidth}return f}(d,s.Legend),tooltip:function(a,
b){var d=qv.util.GetPictureProperties(a.Chart.Series.ByIndex[0].DataType,a.Chart.Series.ByIndex[0].Picture),e;if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.Character||a.MapType==QueryViewerMapType.Choropleth)e={trigger:"item",textStyle:b.TextStyle,formatter:function(b){for(var c=0;c<n._coordSysMgr._coordinateSystems[0].regions.length;c++)if(n._coordSysMgr._coordinateSystems[0].regions[c].name==b.name)return Number.isNaN(b.value)?qv.util.isRTL(a)?qv.util.dom.createSpan(null,
"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,"0 : "+n._coordSysMgr._coordinateSystems[0].regions[c].properties.name).outerHTML:n._coordSysMgr._coordinateSystems[0].regions[c].properties.name+" : 0":qv.util.isRTL(a)?qv.util.dom.createSpan(null,"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,d)+" : "+n._coordSysMgr._coordinateSystems[0].regions[c].properties.name).outerHTML:
n._coordSysMgr._coordinateSystems[0].regions[c].properties.name+" : "+qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,d)}};else if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint){coordData=c(a);e={trigger:"item",textStyle:b.TextStyle,formatter:function(b){var c=a.Chart.Series.ByIndex[0].Name;if(Number.isNaN(b.value))for(c=0;c<n._coordSysMgr._coordinateSystems[0].regions.length;c++){if(n._coordSysMgr._coordinateSystems[0].regions[c].name==
b.name)return n._coordSysMgr._coordinateSystems[0].regions[c].properties.name}else return b.value!=void 0?qv.util.isRTL(a)?qv.util.dom.createSpan(null,"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,d)+" :"+c+"<br />"+b.data.coord[1]+" "+gx.getMessage("GXPL_QViewerMapLongitude")+"<br />"+b.data.coord[0]+" "+gx.getMessage("GXPL_QViewerMapLatitude")).outerHTML:gx.getMessage("GXPL_QViewerMapLatitude")+
" "+b.data.coord[0]+"<br />"+gx.getMessage("GXPL_QViewerMapLongitude")+" "+b.data.coord[1]+"<br />"+c+": "+qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,d):qv.util.isRTL(a)?qv.util.dom.createSpan(null,"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,b.data.coord[1]+" "+gx.getMessage("GXPL_QViewerMapLongitude")+"<br />"+b.data.coord[0]+" "+gx.getMessage("GXPL_QViewerMapLatitude")).outerHTML:gx.getMessage("GXPL_QViewerMapLatitude")+
" "+b.data.coord[0]+"<br />"+gx.getMessage("GXPL_QViewerMapLongitude")+" "+b.data.coord[1]}}}if(b.BoxStyle.backgroundColor)e.backgroundColor=qv.util.color.resolveColor(b.BoxStyle.backgroundColor,b.BoxStyle.opacity);if(b.BoxStyle.borderColor)e.borderColor=b.BoxStyle.borderColor;if(b.BoxStyle.borderWidth)e.borderWidth=b.BoxStyle.borderWidth;return e}(d,s.Tooltip)};b(n);n.setOption(r);var p=qv.util.GetPictureProperties(d.Chart.Series.ByIndex[0].DataType,d.Chart.Series.ByIndex[0].Picture);n.lastSelected=
null;n.BubbleSelect=null;d.SelectionAllowed()&&f(n,d);d.ItemClick&&d.Metadata.Data[0].RaiseItemClick&&q(n,d);if(d.MapType==QueryViewerMapType.Bubble){var B=x(c(d),n,d),B=d.Metadata.Axes[0].DataType==QueryViewerDataType.Character?x(c(d),n,d):c(d),r=h(d,B,n),r={color:r[1],series:r[2],legend:{orient:"vertical",x:"left",y:"bottom",selectedMode:!1,data:r[0],textStyle:s.Legend.TextStyle,formatter:function(a){return a}}};if(d.SelectionAllowed())n.on("click",function(a){if(a.componentType==="markPoint"){var b=
n.getOption(),c;if(d.Chart.colorAxis.dataClasses.length==0)c=b.series[0].color;else{c=d.Chart.Series.ByIndex[0].Points[a.dataIndex].Color.Color;g(c)&&(c="#"+c)}if(n.lastSelected!=a.dataIndex){if(n.lastSelected!=null)if(d.Chart.colorAxis.dataClasses.length==0)b.series[0].markPoint.data[n.lastSelected].itemStyle={color:b.series[0].color};else{colorLastBubble=d.Chart.Series.ByIndex[0].Points[n.lastSelected].Color.Color;g(colorLastBubble)&&(colorLastBubble="#"+colorLastBubble);b.series[0].markPoint.data[n.lastSelected].itemStyle=
{color:colorLastBubble}}b.series[0].markPoint.data[a.dataIndex].itemStyle={color:s.SelectionColor};n.lastSelected=a.dataIndex}else{b.series[0].markPoint.data[a.dataIndex].itemStyle={color:c};n.lastSelected=null}n.BubbleSelect=a.dataIndex;n.setOption(b)}});if(0!=d.Chart.colorAxis.dataClasses.length&&(s.Legend.BoxStyle.backgroundColor&&(r.legend.backgroundColor=qv.util.color.resolveColor(s.Legend.BoxStyle.backgroundColor,s.Legend.BoxStyle.opacity)),s.Legend.BoxStyle.borderColor&&(r.legend.borderColor=
s.Legend.BoxStyle.borderColor),s.Legend.BoxStyle.borderWidth))r.legend.borderWidth=s.Legend.BoxStyle.borderWidth;n.setOption(r)}else d.MapType==QueryViewerMapType.Choropleth&&(d.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&(B=k(c(d),n,d),maxValue=Math.max.apply(Math,B.map(function(a){return a.value})),r={series:{data:B},dataRange:{max:maxValue}}),n.setOption(r),gx.lang.gxBoolean(d.ShowValues)&&(dataValues=d.Metadata.Axes[0].DataType==QueryViewerDataType.Character?x(c(d),n,d):x(B,n,d),
r={series:{markPoint:{symbol:"circle",symbolSize:function(){return 0},label:{show:!0,color:"black",formatter:function(a){return qv.util.ApplyPicture(a.value,d.Chart.Series.ByIndex[0].Picture,d.Chart.Series.ByIndex[0].DataType,p)}},data:dataValues}}},m(r.series.markPoint.label,s.SeriesLabels)),n.setOption(r));d.Charts=[n];(function(a){var b="try { qv.map.CheckMapSize("+a.me()+") } catch (e) {}";a.IntervalCheckChartSize=setInterval(b,500)})(d);d._ControlRenderedTo=d.RealType}return{tryToRenderMap:function(a){var b=
"";(new Date).getTime();a.xml=a.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(a,function(c,d){var f=!1;c!=d.xml.recordsetCacheKey&&(d.xml.recordsetCacheKey=c,f=!0);qv.util.anyError(c)?(b=qv.util.getErrorFromText(c),qv.util.renderError(d,b)):(f&&qv.services.parseRecordsetCacheKeyXML(d),qv.services.GetMetadataIfNeeded(d,function(c,d){var f=false;if(c!=d.xml.metadata){d.xml.metadata=c;f=true}(new Date).getTime();if(qv.util.anyError(c)){b=qv.util.getErrorFromText(c);qv.util.renderError(d,b)}else{f&&
qv.services.parseMetadataXML(d);d.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(d,function(c,d){var f=false;if(c!=d.xml.data){d.xml.data=c;f=true}(new Date).getTime();if(qv.util.anyError(c)){b=qv.util.getErrorFromText(c);qv.util.renderError(d,b)}else{f&&qv.services.parseDataXML(d);f=qv.util.GetContainerControlClasses(a);f!=""&&qv.util.SetUserControlClass(a,f);f=qv.util.ProcessDataAndMetadata(a);if(f==""){f=a.getContainerControl();qv.util.hideActivityIndicator(a);if(a.MapLibrary==QueryViewerMapLibrary.Highcharts){Highcharts.mapChart(f,
{chart:a.MapType==QueryViewerMapType.Bubble&&a.Chart.Series.ByIndex[0].Color.Color||a.MapType==QueryViewerMapType.Choropleth&&a.Chart.colorAxis.dataClasses.length!=0&&!a.Chart.Series.ByIndex[0].Color.Color||a.MapType==QueryViewerMapType.Bubble&&a.Chart.colorAxis.dataClasses.length!=0&&!a.Chart.Series.ByIndex[0].Color.Color?{map:qv.map.getMapDirectory(a).mapKey,styledMode:false}:{map:qv.map.getMapDirectory(a).mapKey,styledMode:true},title:{text:qv.util.getTranslation(a.Title)},mapNavigation:{enabled:true,
buttonOptions:{verticalAlign:"bottom"}},tooltip:r(a),series:h(a),colorAxis:n(a),legend:m(a)});a._ControlRenderedTo=a.RealType}else echarts.getMap(qv.map.getMapDirectory(a).mapKey)==null?qv.util.renderError(a,gx.getMessage("GXPL_QViewerNoMapSupport")):B(f,a)}else qv.util.renderError(a,f)}}):qv.util.renderError(d,d.Metadata.ParserResult.Message)}}))})},getMapDirectory:function(a){var b="QueryViewer/"+(a.MapLibrary===QueryViewerMapLibrary.Highchart?"highcharts/":"Echarts/"),c;c={};if(a.Region==QueryViewerRegion.Country)b=
b+"countries/"+a.Country.toLowerCase()+"-all.js",c="countries/"+a.Country.toLowerCase()+"/"+a.Country.toLowerCase()+"-all";else if(a.Region==QueryViewerRegion.Continent){c="custom/";b+="continents/";switch(a.Continent){case QueryViewerContinent.SouthAmerica:a="south-america";break;case QueryViewerContinent.NorthAmerica:a="north-america";break;default:a=a.Continent.toLowerCase()}c+=a;b+=a+".js"}else a.MapLibrary==QueryViewerMapLibrary.Highcharts?(c="custom/world-highres",b+="continents/world-highres.js"):
(c="world",b+="World/world.js");return c={mapKey:c,mapDir:b}},GetMetadataMap:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataMap:function(a){return a.xml.data},CheckMapSize:function(a){var b=a.getContainerControl();if(b.offsetWidth!=a.Chart._lastWidth||b.offsetHeight!=a.Chart._lastHeight)a.Charts[0].resize({width:b.offsetWidth+"px",height:b.offsetHeight+"px"}),a.Chart._lastWidth=b.offsetWidth,a.Chart._lastHeight=b.offsetHeight},IsAfricanCountry:function(a){return 0<="DZ AO BJ BW BF BI CM CV CF TD KM CD DJ EG GQ ER SZ ET GA GM GH GN GW CI KE LS LR LY MG MW ML MR MU MA MZ NA NE NG CG RW ST SN SC SL SO ZA SS SD TZ TG TN UG EH ZM ZW".split(" ").indexOf(a)},
IsAsianCountry:function(a){return 0<="AF AZ AM BH BD BT BN KH CN CY TL GE IN ID IR IQ IL JP JO KZ KW KG LA LB MY MV MN MM NP KP OM PK PS PH QA RU SA SG KR LK PS SY TW TJ TH TR TM AE UZ VN YE".split(" ").indexOf(a)},IsEuropeanCountry:function(a){return 0<="AL AD AT AZ AM BY BE BA BG HR CY CZ DK EE FO FI FR GE DE GR HU IS IE IT XK LV LI LT LU MT MD MC ME NL MK NO PL PT RO RU SM RS SK SI ES SE CH TR UA GB VA".split(" ").indexOf(a)},IsNorthAmericanCountry:function(a){return 0<="AI AG BB BZ BM VG CA CR CU DM DO SV GL GD GT HT HN JM MX NI PA PR LC KN VC BS US TT".split(" ").indexOf(a)},
IsOceanianCountry:function(a){return 0<="AU CK FJ ID KI MY MH FM NR NC NZ PW PG PH WS SB TK TO TV VU".split(" ").indexOf(a)},IsSouthAmericanCountry:function(a){return 0<="AR BO BR CL CO EC GF GY PY PE SR TT UY VE".split(" ").indexOf(a)},Select:function(a,b){var c=a.Charts[0].getOption();c.series[0].selectedMode="single";a.Charts[0].setOption(c);a._selectedValue=b[0].Value;a.Charts[0].dispatchAction({type:"select",seriesIndex:0,name:a._selectedValue});c=a.Charts[0].getOption();c.series[0].selectedMode=
!1;a.Charts[0].setOption(c)},Deselect:function(a){a.Charts[0].dispatchAction({type:"unselect",seriesIndex:0,name:a._selectedValue});a._selectedValue=void 0}}}();
