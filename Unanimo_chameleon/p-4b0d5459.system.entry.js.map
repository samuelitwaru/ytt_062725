{"version":3,"names":["nextProgressBarCss","ChNextProgressBarStyle0","MIN_VALUE","TIME_TO_REMOVE_ANIMATION","INCREMENT_ADJUSTMENT_BETWEEN_STEPS","NextProgressBar","exports","this","didLoad","incrementFromLastStep","class_1","prototype","handleCurrentStepChange","newCurrentStep","oldCurrentStep","handleCaptionChange","_newDescription","oldDescription","_this","shouldAddFadeInOutAnimation","lastDescription","setTimeout","handlePresentedChange","newPresentedValue","currentStep","getStepPartName","stepValue","amountOfSteps","partName","componentWillLoad","presented","componentDidLoad","render","calculatedCurrentStep","Math","max","steps","accessibilityAttributes","role","caption","undefined","description","toString","h","Host","key","class","cssClass","__assign","part","id","style","concat","__spreadArray","Array","keys","map","step"],"sources":["src/components/next/progress-bar/next-progress-bar.scss?tag=ch-next-progress-bar&encapsulation=shadow","src/components/next/progress-bar/next-progress-bar.tsx"],"sourcesContent":["$step-background-color--last-checked: #fff;\r\n\r\n$checked-load-duration: 0.3s;\r\n\r\n*,\r\n::before,\r\n::after {\r\n  box-sizing: border-box;\r\n}\r\n\r\n:where(.title, .description) {\r\n  font: unset;\r\n  margin: 0;\r\n  padding: 0;\r\n  text-align: start;\r\n}\r\n\r\n:host {\r\n  /**\r\n   * @prop --last-checked-gradient:\r\n   * Define the gradient background that the last checked step will animate.\r\n   */\r\n  --last-checked-gradient: linear-gradient(\r\n    90deg,\r\n    #00000000,\r\n    #{$step-background-color--last-checked},\r\n    #00000000\r\n  );\r\n\r\n  /**\r\n   * @prop --step-background-color:\r\n   * Define the gradient background color of the steps.\r\n   */\r\n  --step-background-color: #ddd;\r\n\r\n  /**\r\n   * @prop --step-background-color:\r\n   * Define the gradient background color of the steps when checked.\r\n   */\r\n  --step-background-color--checked: #bbb;\r\n\r\n  display: block;\r\n  width: 100%;\r\n}\r\n\r\n.steps-container {\r\n  display: flex;\r\n  column-gap: 4px;\r\n  height: 8px;\r\n}\r\n\r\n// - - - - - - - - - - - - - - - -\r\n//              Steps\r\n// - - - - - - - - - - - - - - - -\r\n.step {\r\n  position: relative;\r\n  background-color: var(--step-background-color);\r\n  border-radius: 20px;\r\n  width: 68px;\r\n  max-width: calc(100% / var(--amount-of-steps));\r\n  height: 100%;\r\n  overflow: hidden;\r\n\r\n  &--checked::before {\r\n    content: \"\";\r\n    display: flex;\r\n    position: absolute;\r\n    width: 0;\r\n    height: 100%;\r\n    background-color: var(--step-background-color--checked);\r\n    animation: checked-load $checked-load-duration linear\r\n      calc(var(--delay) * #{$checked-load-duration}) forwards;\r\n  }\r\n\r\n  &--last-checked::after {\r\n    content: \"\";\r\n    display: flex;\r\n    position: absolute;\r\n    background: var(--last-checked-gradient), var(--last-checked-gradient);\r\n    width: 80%;\r\n    height: 100%;\r\n    margin-inline-start: -128%;\r\n    animation: last-checked-animation 2.25s ease-in-out\r\n      calc(var(--delay) * #{$checked-load-duration}) infinite;\r\n  }\r\n}\r\n\r\n// - - - - - - - - - - - - - - - -\r\n//           Description\r\n// - - - - - - - - - - - - - - - -\r\n.description {\r\n  transition: opacity 300ms linear;\r\n}\r\n\r\n.description-transition {\r\n  opacity: 0;\r\n}\r\n\r\n// - - - - - - - - - - - - - - - -\r\n//           Key frames\r\n// - - - - - - - - - - - - - - - -\r\n@keyframes checked-load {\r\n  to {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n@keyframes last-checked-animation {\r\n  to {\r\n    margin-inline-start: 192%;\r\n  }\r\n}\r\n","import { Component, Host, Prop, Watch, State, h } from \"@stencil/core\";\r\nimport { Component as ChComponent } from \"../../../common/interfaces\";\r\n\r\nconst MIN_VALUE = 0;\r\nconst TIME_TO_REMOVE_ANIMATION = 325; // 325ms\r\nconst INCREMENT_ADJUSTMENT_BETWEEN_STEPS = 1;\r\n\r\n/**\r\n * @part ch-next-progress-bar__main-container - The main container of the control.\r\n * @part ch-next-progress-bar__caption - The caption displayed in the top of the control.\r\n * @part ch-next-progress-bar__steps-container - The container of the steps displayed below the caption of the control.\r\n * @part ch-next-progress-bar__step - Each step displayed in the control.\r\n * @part ch-next-progress-bar__description - The description displayed below the steps of the control.\r\n */\r\n@Component({\r\n  shadow: true,\r\n  styleUrl: \"next-progress-bar.scss\",\r\n  tag: \"ch-next-progress-bar\"\r\n})\r\nexport class NextProgressBar implements ChComponent {\r\n  /**\r\n   * `true` if the componentDidLoad lifecycle method was executed\r\n   */\r\n  private didLoad = false;\r\n\r\n  private incrementFromLastStep = 0;\r\n  private lastDescription: string;\r\n\r\n  @State() shouldAddFadeInOutAnimation = false;\r\n\r\n  /**\r\n   * It specifies the main text that is shown on the progress.\r\n   */\r\n  @Prop() readonly caption: string = null;\r\n\r\n  /**\r\n   * This attribute lets you specify the value of the progress.\r\n   */\r\n  @Prop() readonly currentStep: number = MIN_VALUE;\r\n\r\n  /**\r\n   * A CSS class to set as the `ch-next-progress-bar` element class.\r\n   */\r\n  @Prop() readonly cssClass: string;\r\n\r\n  /**\r\n   * It specifies more information that is shown on the progress.\r\n   */\r\n  @Prop() readonly description: string = null;\r\n\r\n  /**\r\n   * This attribute lets you specify if the progress bar is rendered.\r\n   */\r\n  @Prop() readonly presented: boolean = false;\r\n\r\n  /**\r\n   * This attribute lets you specify the amount of steps for the progress.\r\n   */\r\n  @Prop() readonly steps: number = 1;\r\n\r\n  @Watch(\"currentStep\")\r\n  handleCurrentStepChange(newCurrentStep: number, oldCurrentStep: number) {\r\n    this.incrementFromLastStep =\r\n      newCurrentStep - oldCurrentStep - INCREMENT_ADJUSTMENT_BETWEEN_STEPS;\r\n  }\r\n\r\n  @Watch(\"description\")\r\n  handleCaptionChange(_newDescription: string, oldDescription: string) {\r\n    if (this.didLoad && !this.shouldAddFadeInOutAnimation) {\r\n      this.shouldAddFadeInOutAnimation = true;\r\n      this.lastDescription = oldDescription; // Store the last description\r\n\r\n      setTimeout(() => {\r\n        this.shouldAddFadeInOutAnimation = false;\r\n      }, TIME_TO_REMOVE_ANIMATION);\r\n    }\r\n  }\r\n\r\n  @Watch(\"presented\")\r\n  handlePresentedChange(newPresentedValue: boolean) {\r\n    if (newPresentedValue) {\r\n      this.incrementFromLastStep = this.currentStep;\r\n    }\r\n  }\r\n\r\n  private getStepPartName(stepValue: number, amountOfSteps: number): string {\r\n    let partName = \"ch-next-progress-bar__step\";\r\n\r\n    if (stepValue <= amountOfSteps) {\r\n      partName += \" checked\";\r\n    }\r\n\r\n    if (stepValue === amountOfSteps) {\r\n      partName += \" last\";\r\n    }\r\n\r\n    return partName;\r\n  }\r\n\r\n  componentWillLoad() {\r\n    if (this.presented) {\r\n      this.incrementFromLastStep = this.currentStep;\r\n    }\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.didLoad = true;\r\n  }\r\n\r\n  render() {\r\n    const calculatedCurrentStep = Math.max(this.currentStep, MIN_VALUE);\r\n    const amountOfSteps = Math.max(this.steps, MIN_VALUE);\r\n\r\n    const accessibilityAttributes = {\r\n      role: \"progressbar\",\r\n      \"aria-labelledby\": this.caption ? \"title\" : undefined,\r\n      \"aria-describedby\": this.description ? \"description\" : undefined,\r\n      \"aria-valuemin\": \"0\",\r\n      \"aria-valuemax\": amountOfSteps.toString(),\r\n      \"aria-valuenow\": calculatedCurrentStep.toString()\r\n    };\r\n\r\n    return (\r\n      <Host\r\n        class={this.cssClass || null}\r\n        aria-hidden={!this.presented ? \"true\" : undefined}\r\n      >\r\n        {this.presented && (\r\n          <div\r\n            {...accessibilityAttributes}\r\n            class=\"progress-bar\"\r\n            part=\"ch-next-progress-bar__main-container\"\r\n          >\r\n            {!!this.caption && (\r\n              <h1 id=\"title\" class=\"title\" part=\"ch-next-progress-bar__caption\">\r\n                {this.caption}\r\n              </h1>\r\n            )}\r\n\r\n            <div\r\n              class=\"steps-container\"\r\n              style={{\r\n                \"--amount-of-steps\": `${amountOfSteps}`\r\n              }}\r\n              part=\"ch-next-progress-bar__steps-container\"\r\n            >\r\n              {[...Array(amountOfSteps).keys()].map((step: number) => (\r\n                <div\r\n                  class={{\r\n                    step: true,\r\n                    \"step--checked\": step <= calculatedCurrentStep,\r\n                    \"step--last-checked\": step === calculatedCurrentStep\r\n                  }}\r\n                  part={this.getStepPartName(step, amountOfSteps)}\r\n                  style={{\r\n                    \"--delay\":\r\n                      calculatedCurrentStep - step <= this.incrementFromLastStep\r\n                        ? (\r\n                            this.incrementFromLastStep -\r\n                            calculatedCurrentStep +\r\n                            step\r\n                          ).toString()\r\n                        : \"0\"\r\n                  }}\r\n                ></div>\r\n              ))}\r\n            </div>\r\n\r\n            {!!this.description && (\r\n              <p\r\n                id=\"description\"\r\n                class={{\r\n                  description: true,\r\n                  \"description-transition\": this.shouldAddFadeInOutAnimation\r\n                }}\r\n                part=\"ch-next-progress-bar__description\"\r\n              >\r\n                {this.shouldAddFadeInOutAnimation\r\n                  ? this.lastDescription\r\n                  : this.description}\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"qoBAAA,IAAMA,EAAqB,ytDAC3B,IAAAC,EAAeD,ECEf,IAAME,EAAY,EAClB,IAAMC,EAA2B,IACjC,IAAMC,EAAqC,E,IAc9BC,EAAeC,EAAA,kC,cAIlBC,KAAAC,QAAU,MAEVD,KAAAE,sBAAwB,E,2CAGO,M,aAKJ,K,iBAKIP,E,yCAUA,K,eAKD,M,WAKL,C,CAGjCQ,EAAAC,UAAAC,wBAAA,SAAwBC,EAAwBC,GAC9CP,KAAKE,sBACHI,EAAiBC,EAAiBV,C,EAItCM,EAAAC,UAAAI,oBAAA,SAAoBC,EAAyBC,GAA7C,IAAAC,EAAAX,KACE,GAAIA,KAAKC,UAAYD,KAAKY,4BAA6B,CACrDZ,KAAKY,4BAA8B,KACnCZ,KAAKa,gBAAkBH,EAEvBI,YAAW,WACTH,EAAKC,4BAA8B,K,GAClChB,E,GAKPO,EAAAC,UAAAW,sBAAA,SAAsBC,GACpB,GAAIA,EAAmB,CACrBhB,KAAKE,sBAAwBF,KAAKiB,W,GAI9Bd,EAAAC,UAAAc,gBAAA,SAAgBC,EAAmBC,GACzC,IAAIC,EAAW,6BAEf,GAAIF,GAAaC,EAAe,CAC9BC,GAAY,U,CAGd,GAAIF,IAAcC,EAAe,CAC/BC,GAAY,O,CAGd,OAAOA,C,EAGTlB,EAAAC,UAAAkB,kBAAA,WACE,GAAItB,KAAKuB,UAAW,CAClBvB,KAAKE,sBAAwBF,KAAKiB,W,GAItCd,EAAAC,UAAAoB,iBAAA,WACExB,KAAKC,QAAU,I,EAGjBE,EAAAC,UAAAqB,OAAA,eAAAd,EAAAX,KACE,IAAM0B,EAAwBC,KAAKC,IAAI5B,KAAKiB,YAAatB,GACzD,IAAMyB,EAAgBO,KAAKC,IAAI5B,KAAK6B,MAAOlC,GAE3C,IAAMmC,EAA0B,CAC9BC,KAAM,cACN,kBAAmB/B,KAAKgC,QAAU,QAAUC,UAC5C,mBAAoBjC,KAAKkC,YAAc,cAAgBD,UACvD,gBAAiB,IACjB,gBAAiBb,EAAce,WAC/B,gBAAiBT,EAAsBS,YAGzC,OACEC,EAACC,EAAI,CAAAC,IAAA,2CACHC,MAAOvC,KAAKwC,UAAY,KAAI,eACdxC,KAAKuB,UAAY,OAASU,WAEvCjC,KAAKuB,WACJa,EAAA,MAAAK,kBAAA,CAAAH,IAAA,4CACMR,GAAuB,CAC3BS,MAAM,eACNG,KAAK,2CAEF1C,KAAKgC,SACNI,EAAA,MAAAE,IAAA,2CAAIK,GAAG,QAAQJ,MAAM,QAAQG,KAAK,iCAC/B1C,KAAKgC,SAIVI,EAAA,OAAAE,IAAA,2CACEC,MAAM,kBACNK,MAAO,CACL,oBAAqB,GAAAC,OAAGzB,IAE1BsB,KAAK,yCAEJI,cAAA,GAAIC,MAAM3B,GAAe4B,OAAM,MAAEC,KAAI,SAACC,GAAY,OACjDd,EAAA,OACEG,MAAO,CACLW,KAAM,KACN,gBAAiBA,GAAQxB,EACzB,qBAAsBwB,IAASxB,GAEjCgB,KAAM/B,EAAKO,gBAAgBgC,EAAM9B,GACjCwB,MAAO,CACL,UACElB,EAAwBwB,GAAQvC,EAAKT,uBAE/BS,EAAKT,sBACLwB,EACAwB,GACAf,WACF,MAhBuC,OAsBlDnC,KAAKkC,aACNE,EAAA,KAAAE,IAAA,2CACEK,GAAG,cACHJ,MAAO,CACLL,YAAa,KACb,yBAA0BlC,KAAKY,6BAEjC8B,KAAK,qCAEJ1C,KAAKY,4BACFZ,KAAKa,gBACLb,KAAKkC,c,4NAhKG,I"}