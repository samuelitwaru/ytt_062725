var __awaiter=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i["throw"](e))}catch(e){a(e)}}function l(e){e.done?n(e.value):r(e.value).then(o,s)}l((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return l([e,t])}}function l(s){if(i)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(n=0)),n)try{if(i=1,r&&(a=s[0]&2?r["return"]:s[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;if(r=0,a)s=[s[0]&2,a.value];switch(s[0]){case 0:case 1:a=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;r=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(a=n.trys,a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1];a=s;break}if(a&&n.label<a[2]){n.label=a[2];n.ops.push(s);break}if(a[2])n.ops.pop();n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e];r=0}finally{i=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./p-62fc4e49.system.js","./p-07d94fab.system.js"],(function(e){"use strict";var t,n,i,r,a,o;return{setters:[function(e){t=e.r;n=e.h;i=e.H;r=e.c;a=e.g},function(e){o=e.K}],execute:function(){var s='ch-next-data-modeling{--delete-icon:url(\'data:image/svg+xml,<svg width="14" height="16" viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg"><path d="M1.87729 4.55154H12.1585V14.3936C12.1613 14.8186 11.9944 15.2273 11.6949 15.5288C11.3953 15.8304 10.9878 16 10.5627 16H3.47304C3.04797 16 2.64046 15.8304 2.34089 15.5288C2.04133 15.2273 1.87447 14.8186 1.87729 14.3936V4.55154ZM10.5734 1.42436V1.25301C10.5676 0.559264 10.0035 0 9.30972 0H4.72605C4.03228 0 3.46821 0.559264 3.46233 1.25301V1.42436H0.078125V3.03079H14.0005V1.42436H10.5734Z" fill="%23000"/></svg>\');--edit-icon:url(\'data:image/svg+xml,<svg width="17" height="16" viewBox="0 0 17 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.4291 5.4137L10.8838 1.73151L12.0517 0.50411C12.3715 0.168037 12.7644 0 13.2304 0C13.6964 0 14.089 0.168037 14.4082 0.50411L15.5761 1.73151C15.8958 2.06758 16.0627 2.47321 16.0766 2.94838C16.0905 3.42356 15.9376 3.82889 15.6178 4.16438L14.4291 5.4137ZM13.2195 6.70685L4.37728 16H0.832031V12.274L9.67429 2.98082L13.2195 6.70685Z" fill="%23000"/></svg>\');display:grid;grid-template-columns:1fr;grid-auto-rows:-webkit-min-content;grid-auto-rows:min-content;-ms-flex:1;flex:1;height:100%}';var l=s;var d=e("ch_next_data_modeling",function(){function e(e){t(this,e)}e.prototype.render=function(){return n(i,{key:"8659c418f958e320f87370dbe258a5d3a75a2806",role:"list"},n("slot",{key:"ec8f13131eb2afd32a496ba9f37e0c2910f32ffc"}))};return e}());d.style=l;var c=':where(button){all:unset;display:-ms-inline-flexbox;display:inline-flex;cursor:pointer}*,::before,::after{-webkit-box-sizing:border-box;box-sizing:border-box}.error-text,.name{color:inherit;font:inherit;margin:0;padding:0;outline:0}gx-edit:is(.gx-edit--auto-fill,.gx-edit--auto-fill:focus-within,.gx-edit--auto-fill:hover){background-color:var(--gx-edit-auto-fill-background-color)}:host{display:grid;--chevron-color:#ccc}:host(:not(.gx-disabled):hover) .button-primary,:host(:not(.gx-disabled):focus-within) .button-primary{display:grid}:host(:not(.gx-disabled):hover) .button-primary::before,:host(:not(.gx-disabled):focus-within) .button-primary::before{content:""}:host(.gx-disabled){pointer-events:none}:host(.gx-disabled) .accordion{pointer-events:all}.add-new-field--level-0{display:grid;grid-template:"name . . ." -webkit-min-content "field-name type confirm cancel" 1fr "error-text . confirm cancel" -webkit-min-content "sub-item sub-item confirm cancel" min-content/1fr -webkit-min-content 56px 32px;grid-template:"name . . ." min-content "field-name type confirm cancel" 1fr "error-text . confirm cancel" min-content "sub-item sub-item confirm cancel" min-content/1fr min-content 56px 32px;row-gap:8px}.add-new-field--level-0 ::slotted(ch-next-data-modeling){grid-area:sub-item}.add-new-field--level-1{display:grid;grid-template:"name . . ." -webkit-min-content "field-name type confirm cancel" 1fr "error-text . . ." min-content/1fr -webkit-min-content 56px 32px;grid-template:"name . . ." min-content "field-name type confirm cancel" 1fr "error-text . . ." min-content/1fr min-content 56px 32px;row-gap:8px}.add-new-field--level-2{display:grid;grid-template:"sub-field name . . ." -webkit-min-content ". field-name type confirm cancel" 1fr ". error-text . . ." min-content/min-content 1fr -webkit-min-content 56px 32px;grid-template:"sub-field name . . ." min-content ". field-name type confirm cancel" 1fr ". error-text . . ." min-content/min-content 1fr min-content 56px 32px;row-gap:4px}.add-new-field--no-actions{grid-template:"sub-field name ." -webkit-min-content ". field-name type" 1fr ". error-text ." min-content/min-content 1fr -webkit-min-content;grid-template:"sub-field name ." min-content ". field-name type" 1fr ". error-text ." min-content/min-content 1fr min-content}.accordion:hover .edit-button,.accordion:hover .delete-button,.accordion:focus-within .edit-button,.accordion:focus-within .delete-button{display:grid}.sub-field{grid-area:sub-field}.field-name{grid-area:field-name;-webkit-margin-end:8px;margin-inline-end:8px}.button-confirm{grid-area:confirm;margin-inline:16px 8px}.button-cancel{grid-area:cancel}.error-text{grid-area:error-text;display:-ms-flexbox;display:flex;white-space:break-spaces}.header{display:grid;grid-template:"sub-field name type edit delete" 1fr/min-content -webkit-max-content 1fr -webkit-min-content -webkit-max-content;grid-template:"sub-field name type edit delete" 1fr/min-content max-content 1fr min-content max-content;-ms-flex-align:center;align-items:center;width:100%;-webkit-margin-end:12px;margin-inline-end:12px}.accordion::part(accordion__header){-webkit-column-gap:24px;-moz-column-gap:24px;column-gap:24px}.edit-mode{grid-template:"sub-field field-name type confirm cancel" -webkit-min-content "sub-field error-text error-text confirm cancel" min-content/min-content 1fr -webkit-min-content 56px 32px;grid-template:"sub-field field-name type confirm cancel" min-content "sub-field error-text error-text confirm cancel" min-content/min-content 1fr min-content 56px 32px}.name{grid-area:name}.name-entity{text-decoration:underline}.type{grid-area:type}.select-wrapper{--chevron:url(\'data:image/svg+xml,<svg width="12" height="8" viewBox="0 0 12 8" xmlns="http://www.w3.org/2000/svg"><path d="M1.41 0L6 4.59L10.59 0L12 1.42L6 7.42L0 1.42L1.41 0Z"/></svg>\');grid-area:type;position:relative}.select-wrapper::after{content:"";display:-ms-flexbox;display:flex;position:absolute;inset-inline-end:0;inset-block-start:calc(50% - 3.75px);width:12px;height:7.5px;margin-inline:8px 16px;-webkit-mask:var(--chevron) no-repeat;background-color:var(--chevron-color);pointer-events:none}.select{display:-ms-flexbox;display:flex;height:100%;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:unset;cursor:pointer;outline:unset;-webkit-transition-property:background-color, border-color, color;transition-property:background-color, border-color, color;-webkit-transition-duration:250ms;transition-duration:250ms}.button-new-entity{-ms-flex-align:center;align-items:center;-webkit-transition:color 250ms;transition:color 250ms}.optimization{display:contents}.button-primary{display:none;-ms-flex-item-align:center;align-self:center;height:20px;padding:2px}.button-primary::before{display:-ms-flexbox;display:flex}.button-edit{grid-area:edit;width:21px}.button-edit::before{-webkit-mask:var(--edit-icon) no-repeat}.button-delete{grid-area:delete;width:18px;-webkit-margin-start:12px;margin-inline-start:12px}.button-delete::before{-webkit-mask:var(--delete-icon) no-repeat}.delete-mode,.waiting-mode{grid-area:delete;display:grid;grid-template-columns:1fr 24px 24px;-ms-flex-align:center;align-items:center;-webkit-column-gap:8px;-moz-column-gap:8px;column-gap:8px;cursor:auto;-webkit-animation:fade-in 250ms ease-in-out;animation:fade-in 250ms ease-in-out}.waiting-mode{grid-template-columns:24px 1fr}.waiting-mode__loading{-ms-flex-order:-1;order:-1;width:100%;fill:none;-webkit-animation:rotate 1.5s linear 0.125s infinite;animation:rotate 1.5s linear 0.125s infinite}circle{stroke:currentColor;stroke-dasharray:1, 200;stroke-linecap:round;-webkit-animation:indeterminate-loading 1.25s ease-in-out 0.125s infinite;animation:indeterminate-loading 1.25s ease-in-out 0.125s infinite}@-webkit-keyframes fade-in{0%{opacity:0}}@keyframes fade-in{0%{opacity:0}}@-webkit-keyframes rotate{100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes indeterminate-loading{50%,60%{stroke-dasharray:20, 200;stroke-dashoffset:-8px}100%{stroke-dashoffset:-24px}}@keyframes indeterminate-loading{50%,60%{stroke-dasharray:20, 200;stroke-dashoffset:-8px}100%{stroke-dashoffset:-24px}}';var u=c;var f="name";var m="dm-item__";var p="button-cancel";var h="button-confirm";var b=function(e){return"".concat(m,"button-action confirm").concat(e)};var g=function(e){return"".concat(m,"button-action cancel").concat(e)};var x="".concat(m,"select-option");var w=e("ch_next_data_modeling_item",function(){function e(e){var i=this;this.actions=function(e,t){return{add:[{label:e.confirm,class:h,part:b(t),event:i.confirmAction("new")},{label:e.cancel,class:p,part:g(t),event:i.toggleShowNewField}],delete:[{label:e.confirm,class:undefined,part:"".concat(m,"button-delete-action confirm").concat(t),event:i.emitDelete},{label:e.cancel,class:undefined,part:"".concat(m,"button-delete-action cancel").concat(t),event:i.toggleMode("delete")}],edit:[{label:e.confirm,class:h,part:b(t),event:i.confirmAction("edit")},{label:e.cancel,class:p,part:g(t),event:i.toggleMode("edit")}],normal:[{label:e.edit,class:"button-primary button-edit",part:"".concat(m,"button-primary edit").concat(t),event:i.toggleMode("edit")},{label:e.delete,class:"button-primary button-delete",part:"".concat(m,"button-primary delete").concat(t),event:i.toggleMode("delete")}]}};this.lastEditInfo={name:"",type:"ATT"};this.focusInputInNextRender=false;this.makeAttsPrettier=function(e,t){return e.length<=t?"("+e.join(", ")+")":"(".concat(e.slice(0,t).join(", ")," (+").concat(e.length-t,"))")};this.emitDelete=function(e){if(i.level!==0&&i.fieldNames.length===1){var t=i.el.parentElement.parentElement;t.delete(e);i.mode="normal";return}e.stopPropagation();i.waitingMode="deleting";i.deleteField.emit()};this.toggleMode=function(e){return function(t){t.stopPropagation();i.mode=i.mode==="normal"?e:"normal";i.focusInputInNextRender=e==="edit"}};this.toggleShowNewField=function(e){e.stopPropagation();i.errorType="None";var t=!i.showNewFieldBtn;i.showNewFieldBtn=t;i.focusInputInNextRender=!t;if(!t&&i.level===0){var n=i.el.firstElementChild.firstElementChild;n.clearInput()}};this.getGxEditInputValue=function(e){return e.shadowRoot.firstElementChild.value};this.handleKeyDown=function(e){return function(t){if(t.code!==o.ENTER){return}t.preventDefault();i.confirmAction(e)(t)}};this.checkChildErrors=function(e,t){i.el.firstElementChild.firstElementChild.checkErrors(e,t)};this.validateErrorsWhenAddingEntity=function(e,t,n){if(t===void 0){t="unknown"}if(i.level===0&&e==="new"&&t==="unknown"){i.checkChildErrors(t,n)}else if(!i.actionsVisible&&t==="unknown"){i.firstNewFieldErrors.emit()}};this.confirmAction=function(e,t,n){if(t===void 0){t="unknown"}if(n===void 0){n=null}return function(r){r.stopPropagation();var a=i.getGxEditInputValue(i.inputName).trim();i.errorType="None";if(a===""){i.errorType="Empty";i.validateErrorsWhenAddingEntity(e,t,r);return}if(i.name!==a&&i.fieldNames.includes(a)){i.errorType="AlreadyDefined";i.errorName=a;i.validateErrorsWhenAddingEntity(e,t,r);return}if(e==="new"){i.lastEditInfo={name:a,type:i.level===0?"ATT":i.inputType.value};if(i.level===0){if(t==="unknown"){i.checkChildErrors(t,r)}else if(t==="no"){i.waitingMode="adding";i.expanded=true;i.newEntity.emit({name:a,level:[n]});i.toggleShowNewField(r);i.el.firstElementChild.firstElementChild.setAddingMode()}}else if(i.actionsVisible){i.waitingMode="adding";i.newField.emit(i.lastEditInfo);i.toggleShowNewField(r)}else{i.firstNewField.emit(i.lastEditInfo)}return}if(i.name!==a||i.level!==0&&i.type!==i.inputType.value){i.waitingMode="editing";i.lastEditInfo={name:a,type:i.level===0?"ATT":i.inputType.value};i.editField.emit(i.lastEditInfo)}i.toggleMode("edit")(r)}};this.loading=function(){return n("svg",{class:"waiting-mode__loading",height:"28",viewBox:"6 6 12 12"},n("circle",{cx:"12",cy:"12",r:"4","stroke-width":"1.125"}))};this.errorText=function(e){return n("p",{class:"error-text",part:"".concat(m,"error-text")},i.errorType==="Empty"?e.Empty:[i.level===0?e.AlreadyDefinedEntity1:e.AlreadyDefined1,n("span",{part:"".concat(m,"error-text-name")},i.errorName),e.AlreadyDefined2])};this.readonlyContent=function(e,t,r){return[n("h1",{id:f,class:{name:true,"name-entity":r==="ENTITY"},part:"".concat(m,"name")},t),i.level!==0&&r!=="ATT"&&n("span",{class:"type",part:r==="LEVEL"?"".concat(m,"collection"):"".concat(m,"entity")},r==="LEVEL"?e.collection:i.makeAttsPrettier(i.entityNameToATTs[i.dataType]||[],i.maxAtts))]};this.editableContent=function(e,t,r,a){return[n("gx-edit",{class:"field-name",part:"".concat(m,"input").concat(a).concat(r),disabled:i.disabled,type:"text",value:i.name,ref:function(e){return i.inputName=e},onKeydown:i.handleKeyDown(e)}),i.level!==0&&n("div",{class:"select-wrapper"},n("select",{class:"select",part:"".concat(m,"input").concat(r," select"),disabled:i.disabled,ref:function(e){return i.inputType=e}},n("option",{part:x,value:"ATT",selected:i.type==="ATT"},t.ATT),n("option",{part:x,value:"ENTITY",selected:i.type==="ENTITY"},t.ENTITY),n("option",{part:x,value:"LEVEL",selected:i.type==="LEVEL"},t.LEVEL))),i.errorType!=="None"&&i.errorText(i.errorTexts)]};this.newFieldMode=function(e,t,r,a){var o;return i.showNewFieldBtn?n("button",{class:"button-new-entity",part:"".concat(m,"button-new-entity").concat(r),disabled:i.disabled,type:"button",onClick:i.toggleShowNewField},i.level===0?e.addNewEntity:e.addNewField):n("div",{slot:i.level===0?"header":undefined,class:(o={},o["add-new-field--level-".concat(i.level)]=true,o["add-new-field--no-actions"]=!i.actionsVisible,o),part:"".concat(m,"header-content"),tabindex:i.level!==0&&i.actionsVisible?"0":undefined},i.level===2&&n("div",{"aria-hidden":"true",class:"sub-field",part:"".concat(m,"sub-field")}),n("h1",{class:"name",part:"".concat(m,"name")},i.level===0?e.newEntity:e.newField),i.editableContent("new",e,r,t),i.level===0&&n("slot",null),i.actionsVisible&&[n("button",{"aria-label":a[0].label,class:a[0].class,part:a[0].part,disabled:i.disabled,type:"button",onClick:a[0].event}),n("button",{"aria-label":a[1].label,class:a[1].class,part:a[1].part,disabled:i.disabled,type:"button",onClick:a[1].event})])};this.normalMode=function(e,t,r,a,o,s){return[n("div",{slot:i.level===0?"header":undefined,class:{header:true,"edit-mode":i.mode==="edit"},part:"".concat(m,"header-content ").concat(i.level!==0?i.type.toLowerCase():""),tabindex:i.level!==0?"0":undefined},i.level===2&&n("div",{"aria-hidden":"true",class:"sub-field",part:"".concat(m,"sub-field")}),i.mode==="edit"?i.editableContent("edit",e,r,t):i.readonlyContent(e,s?i.lastEditInfo.name:i.name,s?i.lastEditInfo.type:i.type),!i.readonly&&i.actionsVisible&&n("div",{class:{"delete-mode":i.mode==="delete",optimization:i.mode!=="delete","waiting-mode":i.waitingMode!=="none"},part:"".concat(m,"delete-mode").concat(a)},i.waitingMode==="none"?[i.mode==="delete"&&e.deleteMode,n("button",{"aria-label":o[0].label,class:o[0].class,part:o[0].part,disabled:i.disabled,type:"button",onClick:o[0].event}),n("button",{"aria-label":o[1].label,class:o[1].class,part:o[1].part,disabled:i.disabled,type:"button",onClick:o[1].event})]:[e[i.waitingMode],i.loading()])),i.type==="LEVEL"&&(i.level===0?n("div",{slot:"content",part:"".concat(m,"content")},n("slot",null)):n("slot",null))]};t(this,e);this.deleteField=r(this,"deleteField",7);this.editField=r(this,"editField",7);this.newEntity=r(this,"newEntity",7);this.firstNewField=r(this,"firstNewField",7);this.firstNewFieldErrors=r(this,"firstNewFieldErrors",7);this.newField=r(this,"newField",7);this.expanded=false;this.errorType="None";this.waitingMode="none";this.actionsVisible=true;this.captions=undefined;this.dataType="";this.disabled=false;this.entityNameToATTs={};this.errorTexts=undefined;this.fieldNames=[];this.level=1;this.maxAtts=3;this.mode="normal";this.name="";this.readonly=false;this.showNewFieldBtn=true;this.type="LEVEL"}Object.defineProperty(e.prototype,"el",{get:function(){return a(this)},enumerable:false,configurable:true});e.prototype.handleExpandedChange=function(e){e.stopPropagation()};e.prototype.handleFirstNewField=function(e){if(this.level!==0){return}this.confirmAction("new","no",e.detail)(e)};e.prototype.handleFirstNewFieldErrors=function(e){this.confirmAction("new","yes")(e)};e.prototype.setAddingMode=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.clearInput();this.waitingMode="adding";return[2]}))}))};e.prototype.clearInput=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){if(this.inputName){e=this.inputName.shadowRoot.firstElementChild;e.value=""}this.errorType="None";return[2]}))}))};e.prototype.checkErrors=function(e,t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){this.confirmAction("new",e)(t);return[2]}))}))};e.prototype.delete=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.emitDelete(e);return[2]}))}))};e.prototype.hideWaitingMode=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){if(this.mode==="add"&&this.level===0){e=this.el.firstElementChild.firstElementChild;e.hideWaitingMode()}else if(this.mode!=="add"){this.mode="normal"}this.waitingMode="none";return[2]}))}))};e.prototype.componentDidUpdate=function(){var e=this;if(this.focusInputInNextRender&&this.inputName){this.focusInputInNextRender=false;requestAnimationFrame((function(){e.inputName.click()}))}};e.prototype.render=function(){var e=this.disabled?" disabled":"";var t=this.waitingMode==="none"?"":" ".concat(m,"waiting-mode");var r=this.errorType!=="None"?" error":"";var a=this.captions;var o=this.actions(a,e)[this.mode];var s=this.waitingMode==="editing"||this.waitingMode==="adding";return n(i,{key:"166401c890597a08a7e4e1a1676630408392578e",role:"listitem","aria-labelledby":f,class:{"gx-disabled":this.disabled}},this.mode==="add"&&this.waitingMode!=="adding"?this.newFieldMode(a,r,e,o):this.level===0?n("ch-accordion",{class:"accordion",part:"".concat(m,"accordion"),accessibleName:this.name,expanded:this.expanded,exportparts:"accordion__chevron:".concat(m,"chevron,accordion__expandable:").concat(m,"expandable,accordion__header:").concat(m,"header")},this.normalMode(a,r,e,t,o,s)):this.normalMode(a,r,e,t,o,s))};return e}());w.style=u}}}));
//# sourceMappingURL=p-b66af2c3.system.entry.js.map