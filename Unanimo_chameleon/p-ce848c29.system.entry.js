System.register(["./p-62fc4e49.system.js","./p-779b24cc.system.js"],(function(t){"use strict";var n,r,e,i,u;return{setters:[function(t){n=t.r;r=t.g;e=t.h;i=t.H},function(t){u=t.f}],execute:function(){var o=new Map;var a;function s(t,n,r){r.forEach((function(r){var e=p(r.keyShortcuts);e.forEach((function(e){var i=b(e.ctrl,e.alt,e.shift,e.meta,e.key);o.set(i,{name:t,root:n,shortcut:r})}))}));l()}function f(t){var n=[];o.forEach((function(r,e){if(r.name===t){n.push(e)}}));n.forEach((function(t){return o.delete(t)}));v()}function c(t){return Array.from(o.values()).filter((function(n){var r;return n.name===t&&!((r=n.shortcut.conditions)===null||r===void 0?void 0:r.focusInclude)})).map((function(t){return{element:y(t.shortcut.selector,t.root),keyShortcuts:t.shortcut.keyShortcuts,legendPosition:t.shortcut.legendPosition}}))}function l(){if(o.size>0){window.addEventListener("keydown",d,{capture:true})}}function v(){if(o.size===0){window.removeEventListener("keydown",d,{capture:true})}}function d(t){var n;if(!t.repeat||t.repeat&&((n=a===null||a===void 0?void 0:a.shortcut.conditions)===null||n===void 0?void 0:n.allowRepeat)){a=h(t)}}function h(t){var n=b(t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.key);var r=o.get(n);var e=u();if(r&&k(r,e)){var i=y(r.shortcut.selector,r.root);var a=m(n,r.shortcut.id,i,e);if(r.root.dispatchEvent(a)){switch(r.shortcut.action){case"click":i===null||i===void 0?void 0:i.dispatchEvent(new Event("click"));break;default:i===null||i===void 0?void 0:i.focus()}if(r.shortcut.preventDefault!==false){t.preventDefault()}}else{t.preventDefault()}}return r}function p(t){if(t===void 0){t=""}return t.split(/(?<!(?:[+]|^))\s/).map((function(t){return t.split(/(?<!(?:[+]|^))[+]/).reduce((function(t,n){switch(n.toLowerCase()){case"ctrl":t.ctrl=true;break;case"alt":t.alt=true;break;case"shift":t.shift=true;break;case"meta":t.meta=true;break;default:t.key=n}return t}),{ctrl:false,alt:false,shift:false,meta:false,key:""})}))}function b(t,n,r,e,i){return[t?"Ctrl":null,n?"Alt":null,r?"Shift":null,e?"Meta":null,i?i.charAt(0).toUpperCase()+i.slice(1):null].filter((function(t){return t!==null})).join("+")}function k(t,n){var r,e;if((r=t.shortcut.conditions)===null||r===void 0?void 0:r.focusInclude){return w(t.shortcut.conditions.focusInclude,t.root).some((function(t){return n.includes(t)}))}if((e=t.shortcut.conditions)===null||e===void 0?void 0:e.focusExclude){return!w(t.shortcut.conditions.focusExclude,t.root).some((function(t){return n.includes(t)}))}return true}function m(t,n,r,e){return new CustomEvent("keyShortcutPressed",{bubbles:true,cancelable:true,composed:false,detail:{keyShortcut:t,id:n,target:r,focusComposedPath:e}})}function w(t,n){var r;return(r=t===null||t===void 0?void 0:t.split(",").map((function(r){if(t.includes("::part")){return y(r,n)}return Array.from(n.querySelectorAll(t))})).flat())!==null&&r!==void 0?r:[]}function y(t,n){var r=function(t,n){var e=t.shadowRoot;var i=n.split(" ");var u=e.querySelector(i.map((function(t){return'[part~="'.concat(t,'"]')})).join(""));if(u){return u}var o=e.querySelector(i.map((function(t){return'[exportparts*="'.concat(t,'"]')})).join(""));if(o){var a=[];var s=o.getAttribute("exportparts");i.forEach((function(t){var n=s.match("(?:([\\w-]+):)?(".concat(t,")"))[1];if(n){a.push(n)}}));if(i.length===a.length){return r(o,a.join(" "))}}return null};if(t===null||t===void 0?void 0:t.includes("::part")){var e=t.match("(.*)::part\\(([^)]+)\\)");var i=e[1];var u=e[2];return r(n.querySelector(i),u)}return n.querySelector(t)}var g=":host{display:contents}";var A=g;var C={" ":"âŒ´"};var S=t("ch_shortcuts",function(){function t(t){var r=this;this.windowClosedHandler=function(){r.showShortcuts=false};n(this,t);this.showShortcuts=false;this.src=undefined;this.showKey="F10";this.suspend=false}Object.defineProperty(t.prototype,"el",{get:function(){return r(this)},enumerable:false,configurable:true});t.prototype.suspendHandler=function(){if(this.suspend){f(this.src)}else{var t=this.el.getRootNode();s(this.src,t,this.shortcuts)}};t.prototype.componentDidLoad=function(){var t=this;if(this.src){fetch(this.src).then((function(n){if(n.ok){n.json().then((function(n){var r=t.el.getRootNode();t.shortcuts=n;s(t.src,r,t.shortcuts)}))}}))}};t.prototype.disconnectedCallback=function(){f(this.src)};t.prototype.windowKeyDownHandler=function(t){var n=["Ctrl","Alt","Shift","Meta"];if(t.repeat||this.suspend){return}if(t.key===this.showKey){this.showShortcuts=!this.showShortcuts;t.preventDefault()}else if(this.showShortcuts&&!n.includes(t.key)){this.showShortcuts=false}};t.prototype.renderShortcuts=function(){var t=this;return c(this.src).filter((function(t){return t.element})).map((function(n){return e("ch-window",{container:n.element,modal:false,hidden:false,closeOnEscape:true,closeOnOutsideClick:true,xAlign:"outside-end",yAlign:"inside-start",onWindowClosed:t.windowClosedHandler,exportparts:"mask:element, main:tooltip"},t.renderKeyShortcuts(n.keyShortcuts))}))};t.prototype.renderKeyShortcuts=function(t){return t.split(/(?<!(?:[+]|^))([+\s])/).map((function(t,n,r){var i;if(t==="+"&&n>0&&r[n-1]!=="+"){return e("span",{part:"plus"},"+")}if(t===" "&&n>0&&r[n-1]!=="+"){return e("span",{part:"slash"},"/")}return e("kbd",{part:"key"},(i=C[t])!==null&&i!==void 0?i:t)}))};t.prototype.render=function(){return e(i,{key:"92d5871056ed3fb105566293d1e9b67d698b51df"},this.showShortcuts&&this.renderShortcuts())};Object.defineProperty(t,"watchers",{get:function(){return{suspend:["suspendHandler"]}},enumerable:false,configurable:true});return t}());S.style=A}}}));
//# sourceMappingURL=p-ce848c29.system.entry.js.map