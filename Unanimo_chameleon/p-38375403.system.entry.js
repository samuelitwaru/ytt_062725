System.register(["./p-62fc4e49.system.js"],(function(t){"use strict";var i,s,h;return{setters:[function(t){i=t.r;s=t.c;h=t.g}],execute:function(){var e="@layer ch-grid{ch-grid:has(ch-grid-virtual-scroller)::part(main) {\n    grid-template-rows: -webkit-max-content var(--ch-grid-virtual-scroller-height);grid-template-rows:max-content var(--ch-grid-virtual-scroller-height)}ch-grid-virtual-scroller{display:grid;height:-webkit-max-content;height:-moz-max-content;height:max-content;position:-webkit-sticky;position:sticky;top:0px;grid-auto-rows:-webkit-max-content;grid-auto-rows:max-content;grid-column:1/-1;grid-row:2;grid-template-columns:subgrid}";var n=e;var r=t("ch_grid_virtual_scroller",function(){function t(t){var h=this;this.scrollHandler=function(){h.isScrolling=true;h.definePercentScroll()};this.scrollEndHandler=function(){h.isScrolling=false};this.resizeHandler=function(t){t.forEach((function(t){switch(t.target){case h.el:h.rowsHeight=t.contentRect.height;break;case document.documentElement:case document.body:h.browserHeight=document.documentElement.clientHeight;break}}));h.defineHasScroll()};i(this,t);this.viewPortItemsChanged=s(this,"viewPortItemsChanged",7);this.hasGridScroll=false;this.hasWindowScroll=false;this.browserHeight=document.documentElement.clientHeight;this.headerHeight=undefined;this.rowsHeight=0;this.rowHeight=0;this.virtualHeight=0;this.maxViewPortItems=7;this.percentScroll=0;this.startIndex=null;this.isScrolling=false;this.items=undefined;this.itemsCount=undefined;this.viewPortItems=undefined}Object.defineProperty(t.prototype,"el",{get:function(){return h(this)},enumerable:false,configurable:true});t.prototype.hasGridScrollHandler=function(){this.unobserveScroll();this.observeScroll();this.definePercentScroll()};t.prototype.hasWindowScrollHandler=function(){this.gridLayoutEl.style.overflowX=this.hasWindowScroll?"visible":"auto";this.unobserveScroll();this.observeScroll();this.definePercentScroll()};t.prototype.browserHeightHandler=function(){this.defineMaxViewPortItems();this.defineVirtualHeight()};t.prototype.headerHeightHandler=function(){this.el.style.top="".concat(this.headerHeight,"px")};t.prototype.rowsHeightHandler=function(){this.defineHeaderHeight();this.defineRowHeight()};t.prototype.rowHeightHandler=function(){this.defineMaxViewPortItems();this.defineVirtualHeight()};t.prototype.virtualHeightHandler=function(){this.unobserveScroll();this.unobserveResize();this.gridLayoutEl.style.setProperty("--ch-grid-virtual-scroller-height","".concat(this.virtualHeight,"px"));if(Math.ceil(this.percentScroll)!==100){if(this.hasGridScroll){this.gridLayoutEl.scrollTop=this.percentScroll/(100/(this.gridLayoutEl.scrollHeight-this.gridLayoutEl.clientHeight))}else if(this.hasWindowScroll){window.scrollY=this.percentScroll/(100/(this.gridEl.clientHeight-this.browserHeight))}}this.observeScroll();this.observeResize()};t.prototype.maxViewPortItemsHandler=function(){this.defineViewPortItems()};t.prototype.percentScrollHandler=function(){this.defineStartIndex()};t.prototype.startIndexHandler=function(){this.defineViewPortItems()};t.prototype.isScrollingHandler=function(){if(!this.isScrolling){this.defineMaxViewPortItems();this.defineVirtualHeight()}};t.prototype.itemsHandler=function(){if(!this.startIndex===null){this.defineStartIndex()}else{this.defineViewPortItems();this.defineVirtualHeight()}};t.prototype.itemsCountHandler=function(){if(!this.startIndex===null){this.defineStartIndex()}else{this.defineViewPortItems();this.defineVirtualHeight()}};t.prototype.viewPortItemsHandler=function(){this.viewPortItemsChanged.emit()};t.prototype.componentWillLoad=function(){this.gridLayoutEl=this.el.assignedSlot.parentElement;this.gridEl=this.el.closest("ch-grid");this.resizeObserver=new ResizeObserver(this.resizeHandler);this.observeScroll();this.observeResize()};t.prototype.observeScroll=function(){var t;if(this.hasGridScroll){t=this.gridLayoutEl}else if(this.hasWindowScroll){t=document}t===null||t===void 0?void 0:t.addEventListener("scroll",this.scrollHandler,{passive:true});t===null||t===void 0?void 0:t.addEventListener("scrollend",this.scrollEndHandler,{passive:true})};t.prototype.observeResize=function(){this.resizeObserver.observe(this.el);this.resizeObserver.observe(this.gridEl);this.resizeObserver.observe(document.documentElement);this.resizeObserver.observe(document.body)};t.prototype.unobserveScroll=function(){document.removeEventListener("scroll",this.scrollHandler);this.gridLayoutEl.removeEventListener("scroll",this.scrollHandler)};t.prototype.unobserveResize=function(){this.resizeObserver.unobserve(this.el);this.resizeObserver.unobserve(this.gridEl);this.resizeObserver.unobserve(document.documentElement);this.resizeObserver.unobserve(document.body)};t.prototype.defineHasScroll=function(){this.hasGridScroll=this.gridLayoutEl.scrollHeight!==this.gridLayoutEl.clientHeight;this.hasWindowScroll=!this.hasGridScroll&&this.gridEl.clientHeight>this.browserHeight};t.prototype.defineHeaderHeight=function(){this.headerHeight=parseFloat(getComputedStyle(this.gridLayoutEl).gridTemplateRows)};t.prototype.defineRowHeight=function(){if(this.viewPortItems.length===0){this.rowHeight=0}else if(this.viewPortItems.length>0&&this.percentScroll===0){this.rowHeight=this.rowsHeight/this.viewPortItems.length}else{this.rowHeight=Math.min(this.rowHeight,this.rowsHeight/this.viewPortItems.length)}};t.prototype.defineMaxViewPortItems=function(){if(this.rowHeight===0){this.maxViewPortItems=7}else{this.maxViewPortItems=Math.ceil(this.browserHeight/this.rowHeight)}};t.prototype.defineVirtualHeight=function(){if(!this.isScrolling){this.virtualHeight=this.items.length*this.rowHeight}};t.prototype.defineViewPortItems=function(){this.viewPortItems=this.items.slice(this.startIndex,this.startIndex+this.maxViewPortItems)};t.prototype.defineStartIndex=function(){var t=this.percentScroll*Math.max(this.items.length-this.maxViewPortItems,0)/100;this.startIndex=this.percentScroll<=50?Math.floor(t):Math.ceil(t)};t.prototype.definePercentScroll=function(){var t=0;var i=0;if(this.hasGridScroll){t=this.gridLayoutEl.scrollHeight-this.gridLayoutEl.clientHeight;i=this.gridLayoutEl.scrollTop}else if(this.hasWindowScroll){var s=this.gridEl.getBoundingClientRect();t=this.gridEl.clientHeight-this.browserHeight;i=Math.min(s.top>=0?0:s.top*-1,t)}this.percentScroll=t>0?i*100/t:0};Object.defineProperty(t,"watchers",{get:function(){return{hasGridScroll:["hasGridScrollHandler"],hasWindowScroll:["hasWindowScrollHandler"],browserHeight:["browserHeightHandler"],headerHeight:["headerHeightHandler"],rowsHeight:["rowsHeightHandler"],rowHeight:["rowHeightHandler"],virtualHeight:["virtualHeightHandler"],maxViewPortItems:["maxViewPortItemsHandler"],percentScroll:["percentScrollHandler"],startIndex:["startIndexHandler"],isScrolling:["isScrollingHandler"],items:["itemsHandler"],itemsCount:["itemsCountHandler"],viewPortItems:["viewPortItemsHandler"]}},enumerable:false,configurable:true});return t}());r.style=n}}}));
//# sourceMappingURL=p-38375403.system.entry.js.map