import{r as t,c as e,g as i,h as s,H as n}from"./p-7af91c05.js";import{f as o}from"./p-b3df8b9e.js";import{i as r}from"./p-0978aac4.js";import{D as a}from"./p-d031f0c4.js";const d=':where(a,button){all:unset}a,button{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;inline-size:100%;block-size:100%;cursor:pointer}*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{--ch-dropdown-item__image-size:0.875em;--ch-dropdown-item__background-image-size:100%;--ch-dropdown-separation:0px;--ch-dropdown-separation-x:var(--ch-dropdown-separation);--ch-dropdown-separation-y:var(--ch-dropdown-separation);display:-ms-flexbox;display:flex;position:relative;inline-size:100%;block-size:100%}.expandable-button{-ms-flex-pack:center;justify-content:center;-ms-flex-item-align:center;align-self:center;position:relative;z-index:108}::slotted([slot=action]){pointer-events:none}ch-popover{--ch-popover-separation-x:var(--ch-dropdown-separation-x);--ch-popover-separation-y:var(--ch-dropdown-separation-y)}ch-popover:not(.hydrated){opacity:0}.list{display:contents}.action{text-align:start}.pseudo-img--start::before,.pseudo-img--end::after{content:"";display:block;inline-size:var(--ch-dropdown-item__image-size);block-size:var(--ch-dropdown-item__image-size);min-inline-size:var(--ch-dropdown-item__image-size)}.pseudo-img--start{--ch-dropdown-item-img:var(--ch-dropdown-item-start-img)}.pseudo-img--end{--ch-dropdown-item-img:var(--ch-dropdown-item-end-img)}.start-img-type--background::before,.end-img-type--background::after{background:no-repeat center/var(--ch-dropdown-item__background-image-size) var(--ch-dropdown-item-img)}.start-img-type--mask::before,.end-img-type--mask::after{-webkit-mask:var(--ch-dropdown-item-img) 50% 50%/var(--ch-dropdown-item__background-image-size) var(--ch-dropdown-item__background-image-size) no-repeat;background-color:currentColor}.content{inline-size:100%}';const h=d;const l={OutsideStart:"outside-start",InsideStart:"inside-start",Center:"center",InsideEnd:"inside-end",OutsideEnd:"outside-end"};const c=`${a.ACTION} ${a.LINK}`;const p=`${c} ${a.EXPANDABLE}`;const u=`${a.ACTION} ${a.BUTTON}`;const m=`${u} ${a.EXPANDABLE}`;const f="ch-dropdown";const g="window";const b=t=>t?.tagName?.toLowerCase()===f;const w=class{constructor(i){t(this,i);this.expandedChange=e(this,"expandedChange",7);this.actionGroupParent=false;this.buttonAccessibleName=undefined;this.caption=undefined;this.endImgSrc=undefined;this.endImgType="background";this.expanded=false;this.href=undefined;this.itemClickCallback=undefined;this.leaf=false;this.level=undefined;this.nestedDropdown=false;this.openOnFocus=false;this.position="Center_OutsideEnd";this.shortcut=undefined;this.showFooter=false;this.showHeader=false;this.startImgSrc=undefined;this.startImgType="background"}#t=false;#e;get el(){return i(this)}handleExpandedChange(t){if(t){document.addEventListener("click",this.#i,{capture:true,passive:true})}else{document.removeEventListener("click",this.#i,{capture:true});this.#e.popoverTargetElement=null}}expandedChange;onActionClick(){}onRecursiveClose(t){const e=t.detail;if(this.level===e){t.stopPropagation()}this.#s()}async focusElement(){this.#e.focus()}async collapseDropdown(){if(this.expanded){this.expandedChange.emit(false);this.expanded=false}}async expandDropdown(){if(!this.expanded){this.expandedChange.emit(true);this.expanded=true}}#n=()=>{const t=o();const e=t[t.length-1];if(!b(e)){return}if(e.level<this.level){return}e.dispatchEvent(new CustomEvent("recursiveClose",{bubbles:true,detail:this.level}))};#s=()=>{this.expandedChange.emit(false);this.expanded=false};#i=t=>{if(t.composedPath().find((t=>t===this.el))===undefined){this.#s()}};#o=t=>{t.stopPropagation();this.#n();if(!this.expanded){this.expandedChange.emit(true);this.expanded=true}};#r=t=>{t.stopPropagation();if(this.expanded){this.expandedChange.emit(false);this.expanded=false}};#a=t=>{t.stopPropagation();if(this.level!==-1&&this.itemClickCallback){this.itemClickCallback(t)}if(this.nestedDropdown&&this.expanded&&t.pointerType){return}if(this.leaf){this.el.dispatchEvent(new CustomEvent("recursiveClose",{bubbles:true,detail:this.level+1}));return}const e=!this.expanded;this.expanded=e;this.expandedChange.emit(e)};#d=()=>[s("span",{slot:"action",class:"content",part:a.CONTENT},this.caption),!!this.shortcut&&s("span",{"aria-hidden":"true",slot:"action",part:a.SHORTCUT},this.shortcut)];#h=()=>s("button",{popoverTarget:g,"aria-controls":g,"aria-expanded":this.expanded.toString(),"aria-haspopup":"true","aria-label":this.buttonAccessibleName,class:"expandable-button",part:a.EXPANDABLE_BUTTON,type:"button",onClick:this.#a,ref:t=>this.#e=t},s("slot",{name:"action"}));#l=()=>{const t=r(this.startImgSrc,this.startImgType);const e=r(this.endImgSrc,this.endImgType);return this.href?s("a",{"aria-controls":!this.leaf?g:null,"aria-expanded":!this.leaf?this.expanded.toString():null,"aria-haspopup":!this.leaf?"true":null,class:{action:true,[`start-img-type--${this.startImgType} pseudo-img--start`]:t,[`end-img-type--${this.endImgType} pseudo-img--end`]:e},part:this.leaf?c:p,href:this.href,onClick:this.#a,onMouseEnter:!this.leaf&&!this.actionGroupParent?this.#o:null,ref:t=>this.#e=t},this.#d()):s("button",{popoverTarget:g,"aria-controls":!this.leaf?g:null,"aria-expanded":!this.leaf?this.expanded.toString():null,"aria-haspopup":!this.leaf?"true":null,class:{action:true,[`start-img-type--${this.startImgType} pseudo-img--start`]:t,[`end-img-type--${this.endImgType} pseudo-img--end`]:e},part:this.leaf?u:m,type:"button",onMouseEnter:!this.leaf&&!this.actionGroupParent?this.#o:null,onClick:this.#a,ref:t=>this.#e=t},this.#d())};#c=()=>{this.#t||=this.expanded;if(!this.#t){return""}const t=this.position.split("_");const e=t[0];const i=t[1];const n=l[e];const o=l[i];const r=!this.showHeader&&!this.showFooter;return s("ch-popover",{role:r?"list":null,id:g,part:a.WINDOW,actionById:true,actionElement:this.#e,firstLayer:this.level===-1||this.actionGroupParent,popover:"manual",hidden:!this.expanded,inlineAlign:n,blockAlign:o},r?s("slot",null):[this.showHeader&&s("slot",{name:"header"}),s("div",{role:"list",class:"list"},s("slot",null)),this.showFooter&&s("slot",{name:"footer"})])};render(){return s(n,{key:"8e5ddbb1eed37e4273a46ef5f623597725a9b918",role:this.level!==-1?"listitem":null,style:!!this.startImgSrc||!!this.endImgSrc?{"--ch-dropdown-item-start-img":`url("${this.startImgSrc}")`,"--ch-dropdown-item-end-img":`url("${this.endImgSrc}")`}:undefined,onMouseLeave:!this.actionGroupParent&&this.level!==-1?this.#r:null},this.level===-1&&!this.leaf?this.#h():this.#l(),!this.leaf&&this.#c())}static get watchers(){return{expanded:["handleExpandedChange"]}}};w.style=h;export{w as ch_dropdown};
//# sourceMappingURL=p-39cf0fd4.entry.js.map