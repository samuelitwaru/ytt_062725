{"version":3,"names":["alertCss","ChAlertStyle0","ChAlert","this","dismissTimeout","timerId","timeoutWatcher","newValue","countdown","start","presentedWatcher","handleAlertClose","clearInterval","presented","close","emit","countdownWatcher","counter","timerInterval","setInterval","handleMouseEnter","handleMouseLeave","componentDidLoad","render","h","Host","key","role","onMouseEnter","pauseOnHover","onMouseLeave","class","leftImgSrc","part","src","alt","loading","name","showCloseButton","type","closeButtonAccessibleName","onClick","showTimeoutBar","exportparts","progress","accessibleName"],"sources":["src/components/alert/alert.scss?tag=ch-alert&encapsulation=shadow","src/components/alert/alert.tsx"],"sourcesContent":[":host {\r\n  display: grid;\r\n  width: 100%;\r\n  height: 100%;\r\n  grid-template:\r\n    \"img content button\" 1fr\r\n    \"progress-bar progress-bar progress-bar\" min-content\r\n    / min-content 1fr min-content;\r\n}\r\n:host(.pause-on-hover:hover) {\r\n  ::part(indicator) {\r\n    animation-play-state: paused;\r\n  }\r\n}\r\n::slotted([slot=\"button\"]) {\r\n  pointer-events: none;\r\n}\r\n.image {\r\n  max-width: 40px;\r\n  height: 40px;\r\n  grid-area: img;\r\n  align-self: center;\r\n}\r\n\r\n.content {\r\n  grid-area: content;\r\n}\r\n\r\n.close-button {\r\n  grid-area: button;\r\n  .close-button-img {\r\n    -webkit-mask: url(\"data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.875 18L6.75 16.875L11.25 12.375L6.75 7.875L7.875 6.75L12.375 11.25L16.875 6.75L18 7.875L13.5 12.375L18 16.875L16.875 18L12.375 13.5L7.875 18Z'/%3E%3C/svg%3E\")\r\n      50% 50% / 24px 24px no-repeat;\r\n    width: 24px;\r\n    height: 24px;\r\n    background-color: currentColor;\r\n  }\r\n}\r\n\r\n.indicator-container {\r\n  grid-area: progress-bar;\r\n}\r\n\r\n:where(button) {\r\n  all: unset;\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Watch,\r\n  Event,\r\n  EventEmitter\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"ch-alert\",\r\n  styleUrl: \"alert.scss\",\r\n  shadow: true\r\n})\r\nexport class ChAlert {\r\n  /** Sets the timer id */\r\n  private timerId = null;\r\n\r\n  /** Sets the desired interval */\r\n  @Prop() readonly timerInterval = 50;\r\n\r\n  /**\r\n   * Determine the accessible name of the close button.\r\n   * Important for accessibility.\r\n   */\r\n  @Prop() readonly closeButtonAccessibleName: string = \"Close\";\r\n\r\n  /**\r\n   * Specifies the time (ms) for the alert to be displayed.\r\n   * if `dismissTimeout = 0`, the alert will be always visible\r\n   * (unless is dismissed by the closeButton).\r\n   */\r\n  @Prop() readonly dismissTimeout = 0;\r\n\r\n  @Watch(\"dismissTimeout\")\r\n  timeoutWatcher(newValue) {\r\n    if (newValue) {\r\n      this.countdown = newValue;\r\n      this.start();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Determine src of the left image.\r\n   */\r\n  @Prop() readonly leftImgSrc = \"\";\r\n\r\n  /**\r\n   * Determine if the element is displayed or not.\r\n   */\r\n  @Prop({ reflect: true, mutable: true }) presented = false;\r\n\r\n  @Watch(\"presented\")\r\n  presentedWatcher(newValue) {\r\n    if (newValue) {\r\n      this.start();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Determine if the closeButton is displayed or not.\r\n   */\r\n  @Prop() readonly showCloseButton: boolean = false;\r\n\r\n  /**\r\n   * If dismissTimeout > 0, a progress bar is displayed at the bottom of the element\r\n   * showing the time left for the alert to show.\r\n   * The progress stops when the element is hovered.\r\n   */\r\n  @Prop() readonly showTimeoutBar: boolean = false;\r\n\r\n  /** Toggles the Pause on Hover functionality */\r\n  @Prop() readonly pauseOnHover: boolean = true;\r\n\r\n  /** Closes the alert when the close button is clicked.\r\n   * Also restarts the counter and sets its value to match dismissTimeout.\r\n   */\r\n  private handleAlertClose = () => {\r\n    clearInterval(this.timerId);\r\n    this.presented = false;\r\n    this.close.emit();\r\n    this.countdown = this.dismissTimeout;\r\n  };\r\n\r\n  /** Countdown which initial state is dismissTimeout ms. */\r\n  @Prop({ mutable: true }) countdown: number = this.dismissTimeout;\r\n\r\n  /** Countdown watcher that hides the alert if dismissTimeout is reached\r\n   * and stops the countdown.\r\n   * See handleAlertClose for more details. */\r\n  @Watch(\"countdown\")\r\n  countdownWatcher(newValue) {\r\n    if (newValue <= 0) {\r\n      this.handleAlertClose();\r\n    }\r\n  }\r\n\r\n  /** Fires close event */\r\n  @Event() close: EventEmitter;\r\n\r\n  /** Counter decremental function */\r\n  private counter = () => {\r\n    this.countdown -= this.timerInterval;\r\n  };\r\n\r\n  /** Starts a new countdown which interval is set in timerInterval,\r\n   * Only if is presented, dismissTimeout is greater than 0,\r\n   * and countdown is still running.\r\n   */\r\n  private start = () => {\r\n    clearInterval(this.timerId);\r\n    if (this.presented && this.dismissTimeout !== 0 && this.countdown >= 0) {\r\n      this.timerId = setInterval(this.counter, this.timerInterval);\r\n    }\r\n  };\r\n\r\n  /** Pauses the countdown */\r\n  private handleMouseEnter = () => {\r\n    clearInterval(this.timerId);\r\n  };\r\n\r\n  /** Resumes the countdown */\r\n  private handleMouseLeave = () => {\r\n    this.start();\r\n  };\r\n\r\n  componentDidLoad() {\r\n    this.start();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host\r\n        role=\"alert\"\r\n        onMouseEnter={this.pauseOnHover && this.handleMouseEnter}\r\n        onMouseLeave={this.pauseOnHover && this.handleMouseLeave}\r\n        aria-hidden={!this.presented ? \"true\" : \"false\"}\r\n        class={this.pauseOnHover && \"pause-on-hover\"}\r\n      >\r\n        {this.presented && [\r\n          this.leftImgSrc && (\r\n            <img\r\n              part=\"image\"\r\n              class=\"image\"\r\n              src={this.leftImgSrc}\r\n              alt=\"\"\r\n              aria-hidden=\"true\"\r\n              loading=\"lazy\"\r\n            />\r\n          ),\r\n          <div part=\"content\" class=\"content\">\r\n            <slot name=\"content\"></slot>\r\n          </div>,\r\n          this.showCloseButton && (\r\n            <button\r\n              part=\"close-button\"\r\n              class=\"close-button\"\r\n              type=\"button\"\r\n              aria-label={this.closeButtonAccessibleName}\r\n              onClick={this.handleAlertClose}\r\n            >\r\n              <slot name=\"button\" aria-hidden=\"true\">\r\n                <div aria-hidden=\"true\" class=\"close-button-img\"></div>\r\n              </slot>\r\n            </button>\r\n          ),\r\n          this.showTimeoutBar && (\r\n            <ch-timer\r\n              part=\"indicator-container\"\r\n              class=\"indicator-container\"\r\n              exportparts=\"indicator\"\r\n              progress={(this.countdown * 100) / this.dismissTimeout}\r\n              accessibleName={`${this.countdown / 1000} seconds left`}\r\n              animation-time={this.dismissTimeout}\r\n              presented={this.presented}\r\n            ></ch-timer>\r\n          )\r\n        ]}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"yDAAA,MAAMA,EAAW,+nCACjB,MAAAC,EAAeD,E,MCcFE,EAAO,M,yEAKe,G,+BAMoB,Q,oBAOnB,E,gBAaJ,G,eAKsB,M,qBAYR,M,oBAOD,M,kBAGF,K,eAaIC,KAAKC,c,CArE1CC,QAAU,KAmBlB,cAAAC,CAAeC,GACb,GAAIA,EAAU,CACZJ,KAAKK,UAAYD,EACjBJ,KAAKM,O,EAeT,gBAAAC,CAAiBH,GACf,GAAIA,EAAU,CACZJ,KAAKM,O,EAsBDE,iBAAmB,KACzBC,cAAcT,KAAKE,SACnBF,KAAKU,UAAY,MACjBV,KAAKW,MAAMC,OACXZ,KAAKK,UAAYL,KAAKC,cAAc,EAUtC,gBAAAY,CAAiBT,GACf,GAAIA,GAAY,EAAG,CACjBJ,KAAKQ,kB,EAKAG,MAGDG,QAAU,KAChBd,KAAKK,WAAaL,KAAKe,aAAa,EAO9BT,MAAQ,KACdG,cAAcT,KAAKE,SACnB,GAAIF,KAAKU,WAAaV,KAAKC,iBAAmB,GAAKD,KAAKK,WAAa,EAAG,CACtEL,KAAKE,QAAUc,YAAYhB,KAAKc,QAASd,KAAKe,c,GAK1CE,iBAAmB,KACzBR,cAAcT,KAAKE,QAAQ,EAIrBgB,iBAAmB,KACzBlB,KAAKM,OAAO,EAGd,gBAAAa,GACEnB,KAAKM,O,CAGP,MAAAc,GACE,OACEC,EAACC,EAAI,CAAAC,IAAA,2CACHC,KAAK,QACLC,aAAczB,KAAK0B,cAAgB1B,KAAKiB,iBACxCU,aAAc3B,KAAK0B,cAAgB1B,KAAKkB,iBAAgB,eAC1ClB,KAAKU,UAAY,OAAS,QACxCkB,MAAO5B,KAAK0B,cAAgB,kBAE3B1B,KAAKU,WAAa,CACjBV,KAAK6B,YACHR,EAAA,OAAAE,IAAA,2CACEO,KAAK,QACLF,MAAM,QACNG,IAAK/B,KAAK6B,WACVG,IAAI,GAAE,cACM,OACZC,QAAQ,SAGZZ,EAAA,OAAAE,IAAA,2CAAKO,KAAK,UAAUF,MAAM,WACxBP,EAAA,QAAAE,IAAA,2CAAMW,KAAK,aAEblC,KAAKmC,iBACHd,EAAA,UAAAE,IAAA,2CACEO,KAAK,eACLF,MAAM,eACNQ,KAAK,SAAQ,aACDpC,KAAKqC,0BACjBC,QAAStC,KAAKQ,kBAEda,EAAA,QAAAE,IAAA,2CAAMW,KAAK,SAAQ,cAAa,QAC9Bb,EAAA,OAAAE,IAAA,yDAAiB,OAAOK,MAAM,uBAIpC5B,KAAKuC,gBACHlB,EAAA,YAAAE,IAAA,2CACEO,KAAK,sBACLF,MAAM,sBACNY,YAAY,YACZC,SAAWzC,KAAKK,UAAY,IAAOL,KAAKC,eACxCyC,eAAgB,GAAG1C,KAAKK,UAAY,mBAAmB,iBACvCL,KAAKC,eACrBS,UAAWV,KAAKU,a"}