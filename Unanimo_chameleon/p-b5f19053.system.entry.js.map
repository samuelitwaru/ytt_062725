{"version":3,"names":["alertCss","ChAlertStyle0","ChAlert","exports","this","timerId","handleAlertClose","clearInterval","_this","presented","close","emit","countdown","dismissTimeout","counter","timerInterval","start","setInterval","handleMouseEnter","handleMouseLeave","class_1","prototype","timeoutWatcher","newValue","presentedWatcher","countdownWatcher","componentDidLoad","render","h","Host","key","role","onMouseEnter","pauseOnHover","onMouseLeave","class","leftImgSrc","part","src","alt","loading","name","showCloseButton","type","closeButtonAccessibleName","onClick","showTimeoutBar","exportparts","progress","accessibleName","concat"],"sources":["src/components/alert/alert.scss?tag=ch-alert&encapsulation=shadow","src/components/alert/alert.tsx"],"sourcesContent":[":host {\r\n  display: grid;\r\n  width: 100%;\r\n  height: 100%;\r\n  grid-template:\r\n    \"img content button\" 1fr\r\n    \"progress-bar progress-bar progress-bar\" min-content\r\n    / min-content 1fr min-content;\r\n}\r\n:host(.pause-on-hover:hover) {\r\n  ::part(indicator) {\r\n    animation-play-state: paused;\r\n  }\r\n}\r\n::slotted([slot=\"button\"]) {\r\n  pointer-events: none;\r\n}\r\n.image {\r\n  max-width: 40px;\r\n  height: 40px;\r\n  grid-area: img;\r\n  align-self: center;\r\n}\r\n\r\n.content {\r\n  grid-area: content;\r\n}\r\n\r\n.close-button {\r\n  grid-area: button;\r\n  .close-button-img {\r\n    -webkit-mask: url(\"data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.875 18L6.75 16.875L11.25 12.375L6.75 7.875L7.875 6.75L12.375 11.25L16.875 6.75L18 7.875L13.5 12.375L18 16.875L16.875 18L12.375 13.5L7.875 18Z'/%3E%3C/svg%3E\")\r\n      50% 50% / 24px 24px no-repeat;\r\n    width: 24px;\r\n    height: 24px;\r\n    background-color: currentColor;\r\n  }\r\n}\r\n\r\n.indicator-container {\r\n  grid-area: progress-bar;\r\n}\r\n\r\n:where(button) {\r\n  all: unset;\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n","import {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Watch,\r\n  Event,\r\n  EventEmitter\r\n} from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"ch-alert\",\r\n  styleUrl: \"alert.scss\",\r\n  shadow: true\r\n})\r\nexport class ChAlert {\r\n  /** Sets the timer id */\r\n  private timerId = null;\r\n\r\n  /** Sets the desired interval */\r\n  @Prop() readonly timerInterval = 50;\r\n\r\n  /**\r\n   * Determine the accessible name of the close button.\r\n   * Important for accessibility.\r\n   */\r\n  @Prop() readonly closeButtonAccessibleName: string = \"Close\";\r\n\r\n  /**\r\n   * Specifies the time (ms) for the alert to be displayed.\r\n   * if `dismissTimeout = 0`, the alert will be always visible\r\n   * (unless is dismissed by the closeButton).\r\n   */\r\n  @Prop() readonly dismissTimeout = 0;\r\n\r\n  @Watch(\"dismissTimeout\")\r\n  timeoutWatcher(newValue) {\r\n    if (newValue) {\r\n      this.countdown = newValue;\r\n      this.start();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Determine src of the left image.\r\n   */\r\n  @Prop() readonly leftImgSrc = \"\";\r\n\r\n  /**\r\n   * Determine if the element is displayed or not.\r\n   */\r\n  @Prop({ reflect: true, mutable: true }) presented = false;\r\n\r\n  @Watch(\"presented\")\r\n  presentedWatcher(newValue) {\r\n    if (newValue) {\r\n      this.start();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Determine if the closeButton is displayed or not.\r\n   */\r\n  @Prop() readonly showCloseButton: boolean = false;\r\n\r\n  /**\r\n   * If dismissTimeout > 0, a progress bar is displayed at the bottom of the element\r\n   * showing the time left for the alert to show.\r\n   * The progress stops when the element is hovered.\r\n   */\r\n  @Prop() readonly showTimeoutBar: boolean = false;\r\n\r\n  /** Toggles the Pause on Hover functionality */\r\n  @Prop() readonly pauseOnHover: boolean = true;\r\n\r\n  /** Closes the alert when the close button is clicked.\r\n   * Also restarts the counter and sets its value to match dismissTimeout.\r\n   */\r\n  private handleAlertClose = () => {\r\n    clearInterval(this.timerId);\r\n    this.presented = false;\r\n    this.close.emit();\r\n    this.countdown = this.dismissTimeout;\r\n  };\r\n\r\n  /** Countdown which initial state is dismissTimeout ms. */\r\n  @Prop({ mutable: true }) countdown: number = this.dismissTimeout;\r\n\r\n  /** Countdown watcher that hides the alert if dismissTimeout is reached\r\n   * and stops the countdown.\r\n   * See handleAlertClose for more details. */\r\n  @Watch(\"countdown\")\r\n  countdownWatcher(newValue) {\r\n    if (newValue <= 0) {\r\n      this.handleAlertClose();\r\n    }\r\n  }\r\n\r\n  /** Fires close event */\r\n  @Event() close: EventEmitter;\r\n\r\n  /** Counter decremental function */\r\n  private counter = () => {\r\n    this.countdown -= this.timerInterval;\r\n  };\r\n\r\n  /** Starts a new countdown which interval is set in timerInterval,\r\n   * Only if is presented, dismissTimeout is greater than 0,\r\n   * and countdown is still running.\r\n   */\r\n  private start = () => {\r\n    clearInterval(this.timerId);\r\n    if (this.presented && this.dismissTimeout !== 0 && this.countdown >= 0) {\r\n      this.timerId = setInterval(this.counter, this.timerInterval);\r\n    }\r\n  };\r\n\r\n  /** Pauses the countdown */\r\n  private handleMouseEnter = () => {\r\n    clearInterval(this.timerId);\r\n  };\r\n\r\n  /** Resumes the countdown */\r\n  private handleMouseLeave = () => {\r\n    this.start();\r\n  };\r\n\r\n  componentDidLoad() {\r\n    this.start();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host\r\n        role=\"alert\"\r\n        onMouseEnter={this.pauseOnHover && this.handleMouseEnter}\r\n        onMouseLeave={this.pauseOnHover && this.handleMouseLeave}\r\n        aria-hidden={!this.presented ? \"true\" : \"false\"}\r\n        class={this.pauseOnHover && \"pause-on-hover\"}\r\n      >\r\n        {this.presented && [\r\n          this.leftImgSrc && (\r\n            <img\r\n              part=\"image\"\r\n              class=\"image\"\r\n              src={this.leftImgSrc}\r\n              alt=\"\"\r\n              aria-hidden=\"true\"\r\n              loading=\"lazy\"\r\n            />\r\n          ),\r\n          <div part=\"content\" class=\"content\">\r\n            <slot name=\"content\"></slot>\r\n          </div>,\r\n          this.showCloseButton && (\r\n            <button\r\n              part=\"close-button\"\r\n              class=\"close-button\"\r\n              type=\"button\"\r\n              aria-label={this.closeButtonAccessibleName}\r\n              onClick={this.handleAlertClose}\r\n            >\r\n              <slot name=\"button\" aria-hidden=\"true\">\r\n                <div aria-hidden=\"true\" class=\"close-button-img\"></div>\r\n              </slot>\r\n            </button>\r\n          ),\r\n          this.showTimeoutBar && (\r\n            <ch-timer\r\n              part=\"indicator-container\"\r\n              class=\"indicator-container\"\r\n              exportparts=\"indicator\"\r\n              progress={(this.countdown * 100) / this.dismissTimeout}\r\n              accessibleName={`${this.countdown / 1000} seconds left`}\r\n              animation-time={this.dismissTimeout}\r\n              presented={this.presented}\r\n            ></ch-timer>\r\n          )\r\n        ]}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"0JAAA,IAAMA,EAAW,+nCACjB,IAAAC,EAAeD,E,ICcFE,EAAOC,EAAA,sB,yBAEVC,KAAAC,QAAU,KA6DVD,KAAAE,iBAAmB,WACzBC,cAAcC,EAAKH,SACnBG,EAAKC,UAAY,MACjBD,EAAKE,MAAMC,OACXH,EAAKI,UAAYJ,EAAKK,c,EAoBhBT,KAAAU,QAAU,WAChBN,EAAKI,WAAaJ,EAAKO,a,EAOjBX,KAAAY,MAAQ,WACdT,cAAcC,EAAKH,SACnB,GAAIG,EAAKC,WAAaD,EAAKK,iBAAmB,GAAKL,EAAKI,WAAa,EAAG,CACtEJ,EAAKH,QAAUY,YAAYT,EAAKM,QAASN,EAAKO,c,GAK1CX,KAAAc,iBAAmB,WACzBX,cAAcC,EAAKH,Q,EAIbD,KAAAe,iBAAmB,WACzBX,EAAKQ,O,4DAxG0B,G,+BAMoB,Q,oBAOnB,E,gBAaJ,G,eAKsB,M,qBAYR,M,oBAOD,M,kBAGF,K,eAaIZ,KAAKS,c,CAlDlDO,EAAAC,UAAAC,eAAA,SAAeC,GACb,GAAIA,EAAU,CACZnB,KAAKQ,UAAYW,EACjBnB,KAAKY,O,GAeTI,EAAAC,UAAAG,iBAAA,SAAiBD,GACf,GAAIA,EAAU,CACZnB,KAAKY,O,GAoCTI,EAAAC,UAAAI,iBAAA,SAAiBF,GACf,GAAIA,GAAY,EAAG,CACjBnB,KAAKE,kB,GAiCTc,EAAAC,UAAAK,iBAAA,WACEtB,KAAKY,O,EAGPI,EAAAC,UAAAM,OAAA,WACE,OACEC,EAACC,EAAI,CAAAC,IAAA,2CACHC,KAAK,QACLC,aAAc5B,KAAK6B,cAAgB7B,KAAKc,iBACxCgB,aAAc9B,KAAK6B,cAAgB7B,KAAKe,iBAAgB,eAC1Cf,KAAKK,UAAY,OAAS,QACxC0B,MAAO/B,KAAK6B,cAAgB,kBAE3B7B,KAAKK,WAAa,CACjBL,KAAKgC,YACHR,EAAA,OAAAE,IAAA,2CACEO,KAAK,QACLF,MAAM,QACNG,IAAKlC,KAAKgC,WACVG,IAAI,GAAE,cACM,OACZC,QAAQ,SAGZZ,EAAA,OAAAE,IAAA,2CAAKO,KAAK,UAAUF,MAAM,WACxBP,EAAA,QAAAE,IAAA,2CAAMW,KAAK,aAEbrC,KAAKsC,iBACHd,EAAA,UAAAE,IAAA,2CACEO,KAAK,eACLF,MAAM,eACNQ,KAAK,SAAQ,aACDvC,KAAKwC,0BACjBC,QAASzC,KAAKE,kBAEdsB,EAAA,QAAAE,IAAA,2CAAMW,KAAK,SAAQ,cAAa,QAC9Bb,EAAA,OAAAE,IAAA,yDAAiB,OAAOK,MAAM,uBAIpC/B,KAAK0C,gBACHlB,EAAA,YAAAE,IAAA,2CACEO,KAAK,sBACLF,MAAM,sBACNY,YAAY,YACZC,SAAW5C,KAAKQ,UAAY,IAAOR,KAAKS,eACxCoC,eAAgB,GAAAC,OAAG9C,KAAKQ,UAAY,IAAI,iBAAe,iBACvCR,KAAKS,eACrBJ,UAAWL,KAAKK,a,4MAhKV,I"}