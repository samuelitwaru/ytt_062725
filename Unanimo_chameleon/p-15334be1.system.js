var __extends=this&&this.__extends||function(){var n=function(t,r){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))n[r]=t[r]};return n(t,r)};return function(t,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();System.register(["./p-079094fd.system.js","./p-62fc4e49.system.js"],(function(n){"use strict";var t;return{setters:[function(n){t=n.q},function(){}],execute:function(){n({fromPosition:vt,fromRange:ht,setupMode:Lt,setupMode1:Wt,toRange:dt,toTextEdit:gt});var r=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.prototype.hasOwnProperty,o=function(n,t,o,c){if(t&&typeof t=="object"||typeof t=="function"){var a=function(i){u.call(n,i)||i===o||r(n,i,{get:function(){return t[i]},enumerable:!(c=e(t,i))||c.enumerable})};for(var f=0,s=i(t);f<s.length;f++){var v=s[f];a(v)}}return n},c={};o(c,t,"default");var a,f,s,v,h,d,l,g,w,m,b,p,j,x,y,O,k,A,E,R,S,T,D,I,N,_,M,C,W,L,z,F,P,U,H,$,q,B,G,J,K,Q,V,X,Y,Z,nn,tn,rn,en=n("WorkerManager",function(){function n(n){var t=this;this._defaults=n,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval((function(){return t._checkIfIdle()}),3e4),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange((function(){return t._stopWorker()}))}n.prototype._stopWorker=function(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null};n.prototype.dispose=function(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()};n.prototype._checkIfIdle=function(){this._worker&&Date.now()-this._lastUsedTime>12e4&&this._stopWorker()};n.prototype._getClient=function(){return this._lastUsedTime=Date.now(),this._client||(this._worker=c.editor.createWebWorker({moduleId:"vs/language/html/htmlWorker",createData:{languageSettings:this._defaults.options,languageId:this._defaults.languageId},label:this._defaults.languageId}),this._client=this._worker.getProxy()),this._client};n.prototype.getLanguageServiceWorker=function(){var n=this;var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}var e;return this._getClient().then((function(n){e=n})).then((function(r){if(n._worker)return n._worker.withSyncedResources(t)})).then((function(n){return e}))};return n}());(f=a||(a={})).MIN_VALUE=-2147483648,f.MAX_VALUE=2147483647,(v=s||(s={})).MIN_VALUE=0,v.MAX_VALUE=2147483647,(d=h||(h={})).create=function(n,t){return n===Number.MAX_VALUE&&(n=s.MAX_VALUE),t===Number.MAX_VALUE&&(t=s.MAX_VALUE),{line:n,character:t}},d.is=function(n){var t=n;return it.objectLiteral(t)&&it.uinteger(t.line)&&it.uinteger(t.character)},(g=l||(l={})).create=function(n,t,r,e){if(it.uinteger(n)&&it.uinteger(t)&&it.uinteger(r)&&it.uinteger(e))return{start:h.create(n,t),end:h.create(r,e)};if(h.is(n)&&h.is(t))return{start:n,end:t};throw new Error("Range#create called with invalid arguments["+n+", "+t+", "+r+", "+e+"]")},g.is=function(n){var t=n;return it.objectLiteral(t)&&h.is(t.start)&&h.is(t.end)},(m=w||(w={})).create=function(n,t){return{uri:n,range:t}},m.is=function(n){var t=n;return it.defined(t)&&l.is(t.range)&&(it.string(t.uri)||it.undefined(t.uri))},(p=b||(b={})).create=function(n,t,r,e){return{targetUri:n,targetRange:t,targetSelectionRange:r,originSelectionRange:e}},p.is=function(n){var t=n;return it.defined(t)&&l.is(t.targetRange)&&it.string(t.targetUri)&&(l.is(t.targetSelectionRange)||it.undefined(t.targetSelectionRange))&&(l.is(t.originSelectionRange)||it.undefined(t.originSelectionRange))},(x=j||(j={})).create=function(n,t,r,e){return{red:n,green:t,blue:r,alpha:e}},x.is=function(n){var t=n;return it.numberRange(t.red,0,1)&&it.numberRange(t.green,0,1)&&it.numberRange(t.blue,0,1)&&it.numberRange(t.alpha,0,1)},(O=y||(y={})).create=function(n,t){return{range:n,color:t}},O.is=function(n){var t=n;return l.is(t.range)&&j.is(t.color)},(A=k||(k={})).create=function(n,t,r){return{label:n,textEdit:t,additionalTextEdits:r}},A.is=function(n){var t=n;return it.string(t.label)&&(it.undefined(t.textEdit)||U.is(t))&&(it.undefined(t.additionalTextEdits)||it.typedArray(t.additionalTextEdits,U.is))},(R=E||(E={})).Comment="comment",R.Imports="imports",R.Region="region",(T=S||(S={})).create=function(n,t,r,e,i){var u={startLine:n,endLine:t};return it.defined(r)&&(u.startCharacter=r),it.defined(e)&&(u.endCharacter=e),it.defined(i)&&(u.kind=i),u},T.is=function(n){var t=n;return it.uinteger(t.startLine)&&it.uinteger(t.startLine)&&(it.undefined(t.startCharacter)||it.uinteger(t.startCharacter))&&(it.undefined(t.endCharacter)||it.uinteger(t.endCharacter))&&(it.undefined(t.kind)||it.string(t.kind))},(I=D||(D={})).create=function(n,t){return{location:n,message:t}},I.is=function(n){var t=n;return it.defined(t)&&w.is(t.location)&&it.string(t.message)},(_=N||(N={})).Error=1,_.Warning=2,_.Information=3,_.Hint=4,(C=M||(M={})).Unnecessary=1,C.Deprecated=2,(W||(W={})).is=function(n){var t=n;return t!=null&&it.string(t.href)},(z=L||(L={})).create=function(n,t,r,e,i,u){var o={range:n,message:t};return it.defined(r)&&(o.severity=r),it.defined(e)&&(o.code=e),it.defined(i)&&(o.source=i),it.defined(u)&&(o.relatedInformation=u),o},z.is=function(n){var t,r=n;return it.defined(r)&&l.is(r.range)&&it.string(r.message)&&(it.number(r.severity)||it.undefined(r.severity))&&(it.integer(r.code)||it.string(r.code)||it.undefined(r.code))&&(it.undefined(r.codeDescription)||it.string((t=r.codeDescription)===null||t===void 0?void 0:t.href))&&(it.string(r.source)||it.undefined(r.source))&&(it.undefined(r.relatedInformation)||it.typedArray(r.relatedInformation,D.is))},(P=F||(F={})).create=function(n,t){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];var i={title:n,command:t};return it.defined(r)&&r.length>0&&(i.arguments=r),i},P.is=function(n){var t=n;return it.defined(t)&&it.string(t.title)&&it.string(t.command)},(H=U||(U={})).replace=function(n,t){return{range:n,newText:t}},H.insert=function(n,t){return{range:{start:n,end:n},newText:t}},H.del=function(n){return{range:n,newText:""}},H.is=function(n){var t=n;return it.objectLiteral(t)&&it.string(t.newText)&&l.is(t.range)},(q=$||($={})).create=function(n,t,r){var e={label:n};return t!==void 0&&(e.needsConfirmation=t),r!==void 0&&(e.description=r),e},q.is=function(n){var t=n;return t!==void 0&&it.objectLiteral(t)&&it.string(t.label)&&(it.boolean(t.needsConfirmation)||t.needsConfirmation===void 0)&&(it.string(t.description)||t.description===void 0)},(B||(B={})).is=function(n){return typeof n=="string"},(J=G||(G={})).replace=function(n,t,r){return{range:n,newText:t,annotationId:r}},J.insert=function(n,t,r){return{range:{start:n,end:n},newText:t,annotationId:r}},J.del=function(n,t){return{range:n,newText:"",annotationId:t}},J.is=function(n){var t=n;return U.is(t)&&($.is(t.annotationId)||B.is(t.annotationId))},(Q=K||(K={})).create=function(n,t){return{textDocument:n,edits:t}},Q.is=function(n){var t=n;return it.defined(t)&&fn.is(t.textDocument)&&Array.isArray(t.edits)},(X=V||(V={})).create=function(n,t,r){var e={kind:"create",uri:n};return t===void 0||t.overwrite===void 0&&t.ignoreIfExists===void 0||(e.options=t),r!==void 0&&(e.annotationId=r),e},X.is=function(n){var t=n;return t&&t.kind==="create"&&it.string(t.uri)&&(t.options===void 0||(t.options.overwrite===void 0||it.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||it.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||B.is(t.annotationId))},(Z=Y||(Y={})).create=function(n,t,r,e){var i={kind:"rename",oldUri:n,newUri:t};return r===void 0||r.overwrite===void 0&&r.ignoreIfExists===void 0||(i.options=r),e!==void 0&&(i.annotationId=e),i},Z.is=function(n){var t=n;return t&&t.kind==="rename"&&it.string(t.oldUri)&&it.string(t.newUri)&&(t.options===void 0||(t.options.overwrite===void 0||it.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||it.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||B.is(t.annotationId))},(tn=nn||(nn={})).create=function(n,t,r){var e={kind:"delete",uri:n};return t===void 0||t.recursive===void 0&&t.ignoreIfNotExists===void 0||(e.options=t),r!==void 0&&(e.annotationId=r),e},tn.is=function(n){var t=n;return t&&t.kind==="delete"&&it.string(t.uri)&&(t.options===void 0||(t.options.recursive===void 0||it.boolean(t.options.recursive))&&(t.options.ignoreIfNotExists===void 0||it.boolean(t.options.ignoreIfNotExists)))&&(t.annotationId===void 0||B.is(t.annotationId))},(rn||(rn={})).is=function(n){var t=n;return t&&(t.changes!==void 0||t.documentChanges!==void 0)&&(t.documentChanges===void 0||t.documentChanges.every((function(n){return it.string(n.kind)?V.is(n)||Y.is(n)||nn.is(n):K.is(n)})))};var un,on,cn,an,fn,sn,vn,hn,dn,ln,gn,wn,mn,bn,pn,jn,xn,yn,On,kn,An,En,Rn,Sn,Tn,Dn,In,Nn,_n,Mn,Cn,Wn,Ln,zn,Fn,Pn,Un,Hn,$n,qn,Bn,Gn,Jn,Kn,Qn,Vn,Xn,Yn,Zn,nt,tt,rt=function(){function n(n,t){this.edits=n,this.changeAnnotations=t}return n.prototype.insert=function(n,t,r){var e,i;if(r===void 0?e=U.insert(n,t):B.is(r)?(i=r,e=G.insert(n,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),e=G.insert(n,t,i)),this.edits.push(e),i!==void 0)return i},n.prototype.replace=function(n,t,r){var e,i;if(r===void 0?e=U.replace(n,t):B.is(r)?(i=r,e=G.replace(n,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),e=G.replace(n,t,i)),this.edits.push(e),i!==void 0)return i},n.prototype.delete=function(n,t){var r,e;if(t===void 0?r=U.del(n):B.is(t)?(e=t,r=G.del(n,t)):(this.assertChangeAnnotations(this.changeAnnotations),e=this.changeAnnotations.manage(t),r=G.del(n,e)),this.edits.push(r),e!==void 0)return e},n.prototype.add=function(n){this.edits.push(n)},n.prototype.all=function(){return this.edits},n.prototype.clear=function(){this.edits.splice(0,this.edits.length)},n.prototype.assertChangeAnnotations=function(n){if(n===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},n}(),et=function(){function n(n){this._annotations=n===void 0?Object.create(null):n,this._counter=0,this._size=0}return n.prototype.all=function(){return this._annotations},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),n.prototype.manage=function(n,t){var r;if(B.is(n)?r=n:(r=this.nextId(),t=n),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(t===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=t,this._size++,r},n.prototype.nextId=function(){return this._counter++,this._counter.toString()},n}();(function(){function n(n){var t=this;this._textEditChanges=Object.create(null),n!==void 0?(this._workspaceEdit=n,n.documentChanges?(this._changeAnnotations=new et(n.changeAnnotations),n.changeAnnotations=this._changeAnnotations.all(),n.documentChanges.forEach((function(n){if(K.is(n)){var r=new rt(n.edits,t._changeAnnotations);t._textEditChanges[n.textDocument.uri]=r}}))):n.changes&&Object.keys(n.changes).forEach((function(r){var e=new rt(n.changes[r]);t._textEditChanges[r]=e}))):this._workspaceEdit={}}Object.defineProperty(n.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),n.prototype.getTextEditChange=function(n){if(fn.is(n)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var t={uri:n.uri,version:n.version};if(!(e=this._textEditChanges[t.uri])){var r={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(r),e=new rt(i,this._changeAnnotations),this._textEditChanges[t.uri]=e}return e}if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var e;if(!(e=this._textEditChanges[n])){var i=[];this._workspaceEdit.changes[n]=i,e=new rt(i),this._textEditChanges[n]=e}return e},n.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new et,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},n.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},n.prototype.createFile=function(n,t,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var e,i,u;if($.is(t)||B.is(t)?e=t:r=t,e===void 0?i=V.create(n,r):(u=B.is(e)?e:this._changeAnnotations.manage(e),i=V.create(n,r,u)),this._workspaceEdit.documentChanges.push(i),u!==void 0)return u},n.prototype.renameFile=function(n,t,r,e){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i,u,o;if($.is(r)||B.is(r)?i=r:e=r,i===void 0?u=Y.create(n,t,e):(o=B.is(i)?i:this._changeAnnotations.manage(i),u=Y.create(n,t,e,o)),this._workspaceEdit.documentChanges.push(u),o!==void 0)return o},n.prototype.deleteFile=function(n,t,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var e,i,u;if($.is(t)||B.is(t)?e=t:r=t,e===void 0?i=nn.create(n,r):(u=B.is(e)?e:this._changeAnnotations.manage(e),i=nn.create(n,r,u)),this._workspaceEdit.documentChanges.push(i),u!==void 0)return u}})(),(on=un||(un={})).create=function(n){return{uri:n}},on.is=function(n){var t=n;return it.defined(t)&&it.string(t.uri)},(an=cn||(cn={})).create=function(n,t){return{uri:n,version:t}},an.is=function(n){var t=n;return it.defined(t)&&it.string(t.uri)&&it.integer(t.version)},(sn=fn||(fn={})).create=function(n,t){return{uri:n,version:t}},sn.is=function(n){var t=n;return it.defined(t)&&it.string(t.uri)&&(t.version===null||it.integer(t.version))},(hn=vn||(vn={})).create=function(n,t,r,e){return{uri:n,languageId:t,version:r,text:e}},hn.is=function(n){var t=n;return it.defined(t)&&it.string(t.uri)&&it.string(t.languageId)&&it.integer(t.version)&&it.string(t.text)},(ln=dn||(dn={})).PlainText="plaintext",ln.Markdown="markdown",function(n){n.is=function(t){var r=t;return r===n.PlainText||r===n.Markdown}}(dn||(dn={})),(gn||(gn={})).is=function(n){var t=n;return it.objectLiteral(n)&&dn.is(t.kind)&&it.string(t.value)},(mn=wn||(wn={})).Text=1,mn.Method=2,mn.Function=3,mn.Constructor=4,mn.Field=5,mn.Variable=6,mn.Class=7,mn.Interface=8,mn.Module=9,mn.Property=10,mn.Unit=11,mn.Value=12,mn.Enum=13,mn.Keyword=14,mn.Snippet=15,mn.Color=16,mn.File=17,mn.Reference=18,mn.Folder=19,mn.EnumMember=20,mn.Constant=21,mn.Struct=22,mn.Event=23,mn.Operator=24,mn.TypeParameter=25,(pn=bn||(bn={})).PlainText=1,pn.Snippet=2,(jn||(jn={})).Deprecated=1,(yn=xn||(xn={})).create=function(n,t,r){return{newText:n,insert:t,replace:r}},yn.is=function(n){var t=n;return t&&it.string(t.newText)&&l.is(t.insert)&&l.is(t.replace)},(kn=On||(On={})).asIs=1,kn.adjustIndentation=2,(An||(An={})).create=function(n){return{label:n}},(En||(En={})).create=function(n,t){return{items:n||[],isIncomplete:!!t}},(Sn=Rn||(Rn={})).fromPlainText=function(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},Sn.is=function(n){var t=n;return it.string(t)||it.objectLiteral(t)&&it.string(t.language)&&it.string(t.value)},(Tn||(Tn={})).is=function(n){var t=n;return!!t&&it.objectLiteral(t)&&(gn.is(t.contents)||Rn.is(t.contents)||it.typedArray(t.contents,Rn.is))&&(n.range===void 0||l.is(n.range))},(Dn||(Dn={})).create=function(n,t){return t?{label:n,documentation:t}:{label:n}},(In||(In={})).create=function(n,t){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];var i={label:n};return it.defined(t)&&(i.documentation=t),it.defined(r)?i.parameters=r:i.parameters=[],i},(_n=Nn||(Nn={})).Text=1,_n.Read=2,_n.Write=3,(Mn||(Mn={})).create=function(n,t){var r={range:n};return it.number(t)&&(r.kind=t),r},(Wn=Cn||(Cn={})).File=1,Wn.Module=2,Wn.Namespace=3,Wn.Package=4,Wn.Class=5,Wn.Method=6,Wn.Property=7,Wn.Field=8,Wn.Constructor=9,Wn.Enum=10,Wn.Interface=11,Wn.Function=12,Wn.Variable=13,Wn.Constant=14,Wn.String=15,Wn.Number=16,Wn.Boolean=17,Wn.Array=18,Wn.Object=19,Wn.Key=20,Wn.Null=21,Wn.EnumMember=22,Wn.Struct=23,Wn.Event=24,Wn.Operator=25,Wn.TypeParameter=26,(Ln||(Ln={})).Deprecated=1,(zn||(zn={})).create=function(n,t,r,e,i){var u={name:n,kind:t,location:{uri:e,range:r}};return i&&(u.containerName=i),u},(Pn=Fn||(Fn={})).create=function(n,t,r,e,i,u){var o={name:n,detail:t,kind:r,range:e,selectionRange:i};return u!==void 0&&(o.children=u),o},Pn.is=function(n){var t=n;return t&&it.string(t.name)&&it.number(t.kind)&&l.is(t.range)&&l.is(t.selectionRange)&&(t.detail===void 0||it.string(t.detail))&&(t.deprecated===void 0||it.boolean(t.deprecated))&&(t.children===void 0||Array.isArray(t.children))&&(t.tags===void 0||Array.isArray(t.tags))},(Hn=Un||(Un={})).Empty="",Hn.QuickFix="quickfix",Hn.Refactor="refactor",Hn.RefactorExtract="refactor.extract",Hn.RefactorInline="refactor.inline",Hn.RefactorRewrite="refactor.rewrite",Hn.Source="source",Hn.SourceOrganizeImports="source.organizeImports",Hn.SourceFixAll="source.fixAll",(qn=$n||($n={})).create=function(n,t){var r={diagnostics:n};return t!=null&&(r.only=t),r},qn.is=function(n){var t=n;return it.defined(t)&&it.typedArray(t.diagnostics,L.is)&&(t.only===void 0||it.typedArray(t.only,it.string))},(Gn=Bn||(Bn={})).create=function(n,t,r){var e={title:n},i=!0;return typeof t=="string"?(i=!1,e.kind=t):F.is(t)?e.command=t:e.edit=t,i&&r!==void 0&&(e.kind=r),e},Gn.is=function(n){var t=n;return t&&it.string(t.title)&&(t.diagnostics===void 0||it.typedArray(t.diagnostics,L.is))&&(t.kind===void 0||it.string(t.kind))&&(t.edit!==void 0||t.command!==void 0)&&(t.command===void 0||F.is(t.command))&&(t.isPreferred===void 0||it.boolean(t.isPreferred))&&(t.edit===void 0||rn.is(t.edit))},(Kn=Jn||(Jn={})).create=function(n,t){var r={range:n};return it.defined(t)&&(r.data=t),r},Kn.is=function(n){var t=n;return it.defined(t)&&l.is(t.range)&&(it.undefined(t.command)||F.is(t.command))},(Vn=Qn||(Qn={})).create=function(n,t){return{tabSize:n,insertSpaces:t}},Vn.is=function(n){var t=n;return it.defined(t)&&it.uinteger(t.tabSize)&&it.boolean(t.insertSpaces)},(Yn=Xn||(Xn={})).create=function(n,t,r){return{range:n,target:t,data:r}},Yn.is=function(n){var t=n;return it.defined(t)&&l.is(t.range)&&(it.undefined(t.target)||it.string(t.target))},(nt=Zn||(Zn={})).create=function(n,t){return{range:n,parent:t}},nt.is=function(n){var t=n;return t!==void 0&&l.is(t.range)&&(t.parent===void 0||nt.is(t.parent))},function(n){function t(n,r){if(n.length<=1)return n;var e=n.length/2|0,i=n.slice(0,e),u=n.slice(e);t(i,r),t(u,r);for(var o=0,c=0,a=0;o<i.length&&c<u.length;){var f=r(i[o],u[c]);n[a++]=f<=0?i[o++]:u[c++]}for(;o<i.length;)n[a++]=i[o++];for(;c<u.length;)n[a++]=u[c++];return n}n.create=function(n,t,r,e){return new ct(n,t,r,e)},n.is=function(n){var t=n;return!!(it.defined(t)&&it.string(t.uri)&&(it.undefined(t.languageId)||it.string(t.languageId))&&it.uinteger(t.lineCount)&&it.func(t.getText)&&it.func(t.positionAt)&&it.func(t.offsetAt))},n.applyEdits=function(n,r){for(var e=n.getText(),i=t(r,(function(n,t){var r=n.range.start.line-t.range.start.line;return r===0?n.range.start.character-t.range.start.character:r})),u=e.length,o=i.length-1;o>=0;o--){var c=i[o],a=n.offsetAt(c.range.start),f=n.offsetAt(c.range.end);if(!(f<=u))throw new Error("Overlapping edit");e=e.substring(0,a)+c.newText+e.substring(f,e.length),u=a}return e}}(tt||(tt={}));var it,ut,ot,ct=function(){function n(n,t,r,e){this._uri=n,this._languageId=t,this._version=r,this._content=e,this._lineOffsets=void 0}return Object.defineProperty(n.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),n.prototype.getText=function(n){if(n){var t=this.offsetAt(n.start),r=this.offsetAt(n.end);return this._content.substring(t,r)}return this._content},n.prototype.update=function(n,t){this._content=n.text,this._version=t,this._lineOffsets=void 0},n.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var n=[],t=this._content,r=!0,e=0;e<t.length;e++){r&&(n.push(e),r=!1);var i=t.charAt(e);r=i==="\r"||i==="\n",i==="\r"&&e+1<t.length&&t.charAt(e+1)==="\n"&&e++}r&&t.length>0&&n.push(t.length),this._lineOffsets=n}return this._lineOffsets},n.prototype.positionAt=function(n){n=Math.max(Math.min(n,this._content.length),0);var t=this.getLineOffsets(),r=0,e=t.length;if(e===0)return h.create(0,n);for(;r<e;){var i=Math.floor((r+e)/2);t[i]>n?e=i:r=i+1}var u=r-1;return h.create(u,n-t[u])},n.prototype.offsetAt=function(n){var t=this.getLineOffsets();if(n.line>=t.length)return this._content.length;if(n.line<0)return 0;var r=t[n.line],e=n.line+1<t.length?t[n.line+1]:this._content.length;return Math.max(Math.min(r+n.character,e),r)},Object.defineProperty(n.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),n}();ut=it||(it={}),ot=Object.prototype.toString,ut.defined=function(n){return n!==void 0},ut.undefined=function(n){return n===void 0},ut.boolean=function(n){return n===!0||n===!1},ut.string=function(n){return ot.call(n)==="[object String]"},ut.number=function(n){return ot.call(n)==="[object Number]"},ut.numberRange=function(n,t,r){return ot.call(n)==="[object Number]"&&t<=n&&n<=r},ut.integer=function(n){return ot.call(n)==="[object Number]"&&-2147483648<=n&&n<=2147483647},ut.uinteger=function(n){return ot.call(n)==="[object Number]"&&0<=n&&n<=2147483647},ut.func=function(n){return ot.call(n)==="[object Function]"},ut.objectLiteral=function(n){return n!==null&&typeof n=="object"},ut.typedArray=function(n,t){return Array.isArray(n)&&n.every(t)};var at=n("DiagnosticsAdapter",function(){function n(n,t,r){var e=this;this._languageId=n,this._worker=t,this._disposables=[],this._listener=Object.create(null);var i=function(n){var t,r=n.getLanguageId();r===e._languageId&&(e._listener[n.uri.toString()]=n.onDidChangeContent((function(){window.clearTimeout(t),t=window.setTimeout((function(){return e._doValidate(n.uri,r)}),500)})),e._doValidate(n.uri,r))},u=function(n){c.editor.setModelMarkers(n,e._languageId,[]);var t=n.uri.toString(),r=e._listener[t];r&&(r.dispose(),delete e._listener[t])};this._disposables.push(c.editor.onDidCreateModel(i)),this._disposables.push(c.editor.onWillDisposeModel(u)),this._disposables.push(c.editor.onDidChangeModelLanguage((function(n){u(n.model),i(n.model)}))),this._disposables.push(r((function(n){c.editor.getModels().forEach((function(n){n.getLanguageId()===e._languageId&&(u(n),i(n))}))}))),this._disposables.push({dispose:function(){c.editor.getModels().forEach(u);for(var n in e._listener)e._listener[n].dispose()}}),c.editor.getModels().forEach(i)}n.prototype.dispose=function(){this._disposables.forEach((function(n){return n&&n.dispose()})),this._disposables.length=0};n.prototype._doValidate=function(n,t){this._worker(n).then((function(t){return t.doValidation(n.toString())})).then((function(r){var e=r.map((function(n){return function(n,t){var r=typeof t.code=="number"?String(t.code):t.code;return{severity:ft(t.severity),startLineNumber:t.range.start.line+1,startColumn:t.range.start.character+1,endLineNumber:t.range.end.line+1,endColumn:t.range.end.character+1,message:t.message,code:r,source:t.source}}(0,n)}));var i=c.editor.getModel(n);i&&i.getLanguageId()===t&&c.editor.setModelMarkers(i,t,e)})).then(void 0,(function(n){console.error(n)}))};return n}());function ft(n){switch(n){case N.Error:return c.MarkerSeverity.Error;case N.Warning:return c.MarkerSeverity.Warning;case N.Information:return c.MarkerSeverity.Info;case N.Hint:return c.MarkerSeverity.Hint;default:return c.MarkerSeverity.Info}}var st=n("CompletionAdapter",function(){function n(n,t){this._worker=n,this._triggerCharacters=t}Object.defineProperty(n.prototype,"triggerCharacters",{get:function(){return this._triggerCharacters},enumerable:false,configurable:true});n.prototype.provideCompletionItems=function(n,t,r,e){var i=n.uri;return this._worker(i).then((function(n){return n.doComplete(i.toString(),vt(t))})).then((function(r){if(!r)return;var e=n.getWordUntilPosition(t),i=new c.Range(t.lineNumber,e.startColumn,t.lineNumber,e.endColumn),u=r.items.map((function(n){var t={label:n.label,insertText:n.insertText||n.label,sortText:n.sortText,filterText:n.filterText,documentation:n.documentation,detail:n.detail,command:(r=n.command,r&&r.command==="editor.action.triggerSuggest"?{id:r.command,title:r.title,arguments:r.arguments}:void 0),range:i,kind:lt(n.kind)};var r,e;return n.textEdit&&((e=n.textEdit).insert!==void 0&&e.replace!==void 0?t.range={insert:dt(n.textEdit.insert),replace:dt(n.textEdit.replace)}:t.range=dt(n.textEdit.range),t.insertText=n.textEdit.newText),n.additionalTextEdits&&(t.additionalTextEdits=n.additionalTextEdits.map(gt)),n.insertTextFormat===bn.Snippet&&(t.insertTextRules=c.languages.CompletionItemInsertTextRule.InsertAsSnippet),t}));return{isIncomplete:r.isIncomplete,suggestions:u}}))};return n}());function vt(n){if(n)return{character:n.column-1,line:n.lineNumber-1}}function ht(n){if(n)return{start:{line:n.startLineNumber-1,character:n.startColumn-1},end:{line:n.endLineNumber-1,character:n.endColumn-1}}}function dt(n){if(n)return new c.Range(n.start.line+1,n.start.character+1,n.end.line+1,n.end.character+1)}function lt(n){var t=c.languages.CompletionItemKind;switch(n){case wn.Text:return t.Text;case wn.Method:return t.Method;case wn.Function:return t.Function;case wn.Constructor:return t.Constructor;case wn.Field:return t.Field;case wn.Variable:return t.Variable;case wn.Class:return t.Class;case wn.Interface:return t.Interface;case wn.Module:return t.Module;case wn.Property:return t.Property;case wn.Unit:return t.Unit;case wn.Value:return t.Value;case wn.Enum:return t.Enum;case wn.Keyword:return t.Keyword;case wn.Snippet:return t.Snippet;case wn.Color:return t.Color;case wn.File:return t.File;case wn.Reference:return t.Reference}return t.Property}function gt(n){if(n)return{range:dt(n.range),text:n.newText}}var wt=n("HoverAdapter",function(){function n(n){this._worker=n}n.prototype.provideHover=function(n,t,r){var e=n.uri;return this._worker(e).then((function(n){return n.doHover(e.toString(),vt(t))})).then((function(n){if(n)return{range:dt(n.range),contents:bt(n.contents)}}))};return n}());function mt(n){return typeof n=="string"?{value:n}:(t=n)&&typeof t=="object"&&typeof t.kind=="string"?n.kind==="plaintext"?{value:n.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}:{value:n.value}:{value:"```"+n.language+"\n"+n.value+"\n```\n"};var t}function bt(n){if(n)return Array.isArray(n)?n.map(mt):[mt(n)]}var pt=n("DocumentHighlightAdapter",function(){function n(n){this._worker=n}n.prototype.provideDocumentHighlights=function(n,t,r){var e=n.uri;return this._worker(e).then((function(n){return n.findDocumentHighlights(e.toString(),vt(t))})).then((function(n){if(n)return n.map((function(n){return{range:dt(n.range),kind:jt(n.kind)}}))}))};return n}());function jt(n){switch(n){case Nn.Read:return c.languages.DocumentHighlightKind.Read;case Nn.Write:return c.languages.DocumentHighlightKind.Write;case Nn.Text:return c.languages.DocumentHighlightKind.Text}return c.languages.DocumentHighlightKind.Text}var xt=n("DefinitionAdapter",function(){function n(n){this._worker=n}n.prototype.provideDefinition=function(n,t,r){var e=n.uri;return this._worker(e).then((function(n){return n.findDefinition(e.toString(),vt(t))})).then((function(n){if(n)return[yt(n)]}))};return n}());function yt(n){return{uri:c.Uri.parse(n.uri),range:dt(n.range)}}var Ot=function(){function n(n){this._worker=n}n.prototype.provideReferences=function(n,t,r,e){var i=n.uri;return this._worker(i).then((function(n){return n.findReferences(i.toString(),vt(t))})).then((function(n){if(n)return n.map(yt)}))};return n}(),kt=function(){function n(n){this._worker=n}n.prototype.provideRenameEdits=function(n,t,r,e){var i=n.uri;return this._worker(i).then((function(n){return n.doRename(i.toString(),vt(t),r)})).then((function(n){return function(n){if(!n||!n.changes)return;var t=[];for(var r in n.changes){var e=c.Uri.parse(r);for(var i=0,u=n.changes[r];i<u.length;i++){var o=u[i];t.push({resource:e,versionId:void 0,textEdit:{range:dt(o.range),text:o.newText}})}}return{edits:t}}(n)}))};return n}(),At=function(){function n(n){this._worker=n}n.prototype.provideDocumentSymbols=function(n,t){var r=n.uri;return this._worker(r).then((function(n){return n.findDocumentSymbols(r.toString())})).then((function(n){if(n)return n.map((function(n){return"children"in n?Et(n):{name:n.name,detail:"",containerName:n.containerName,kind:Rt(n.kind),range:dt(n.location.range),selectionRange:dt(n.location.range),tags:[]}}))}))};return n}();n({ReferenceAdapter:Ot,RenameAdapter:kt,DocumentSymbolAdapter:At});function Et(n){var t,r,e;return{name:n.name,detail:(t=n.detail)!==null&&t!==void 0?t:"",kind:Rt(n.kind),range:dt(n.range),selectionRange:dt(n.selectionRange),tags:(r=n.tags)!==null&&r!==void 0?r:[],children:((e=n.children)!==null&&e!==void 0?e:[]).map((function(n){return Et(n)}))}}function Rt(n){var t=c.languages.SymbolKind;switch(n){case Cn.File:return t.File;case Cn.Module:return t.Module;case Cn.Namespace:return t.Namespace;case Cn.Package:return t.Package;case Cn.Class:return t.Class;case Cn.Method:return t.Method;case Cn.Property:return t.Property;case Cn.Field:return t.Field;case Cn.Constructor:return t.Constructor;case Cn.Enum:return t.Enum;case Cn.Interface:return t.Interface;case Cn.Function:return t.Function;case Cn.Variable:return t.Variable;case Cn.Constant:return t.Constant;case Cn.String:return t.String;case Cn.Number:return t.Number;case Cn.Boolean:return t.Boolean;case Cn.Array:return t.Array}return t.Function}var St=function(){function n(n){this._worker=n}n.prototype.provideLinks=function(n,t){var r=n.uri;return this._worker(r).then((function(n){return n.findDocumentLinks(r.toString())})).then((function(n){if(n)return{links:n.map((function(n){return{range:dt(n.range),url:n.target}}))}}))};return n}(),Tt=function(){function n(n){this._worker=n}n.prototype.provideDocumentFormattingEdits=function(n,t,r){var e=n.uri;return this._worker(e).then((function(n){return n.format(e.toString(),null,It(t)).then((function(n){if(n&&n.length!==0)return n.map(gt)}))}))};return n}(),Dt=function(){function n(n){this._worker=n,this.canFormatMultipleRanges=!1}n.prototype.provideDocumentRangeFormattingEdits=function(n,t,r,e){var i=n.uri;return this._worker(i).then((function(n){return n.format(i.toString(),ht(t),It(r)).then((function(n){if(n&&n.length!==0)return n.map(gt)}))}))};return n}();n({DocumentLinkAdapter:St,DocumentFormattingEditProvider:Tt,DocumentRangeFormattingEditProvider:Dt});function It(n){return{tabSize:n.tabSize,insertSpaces:n.insertSpaces}}var Nt=function(){function n(n){this._worker=n}n.prototype.provideDocumentColors=function(n,t){var r=n.uri;return this._worker(r).then((function(n){return n.findDocumentColors(r.toString())})).then((function(n){if(n)return n.map((function(n){return{color:n.color,range:dt(n.range)}}))}))};n.prototype.provideColorPresentations=function(n,t,r){var e=n.uri;return this._worker(e).then((function(n){return n.getColorPresentations(e.toString(),t.color,ht(t.range))})).then((function(n){if(n)return n.map((function(n){var t={label:n.label};return n.textEdit&&(t.textEdit=gt(n.textEdit)),n.additionalTextEdits&&(t.additionalTextEdits=n.additionalTextEdits.map(gt)),t}))}))};return n}(),_t=function(){function n(n){this._worker=n}n.prototype.provideFoldingRanges=function(n,t,r){var e=n.uri;return this._worker(e).then((function(n){return n.getFoldingRanges(e.toString(),t)})).then((function(n){if(n)return n.map((function(n){var t={start:n.startLine+1,end:n.endLine+1};return n.kind!==void 0&&(t.kind=function(n){switch(n){case E.Comment:return c.languages.FoldingRangeKind.Comment;case E.Imports:return c.languages.FoldingRangeKind.Imports;case E.Region:return c.languages.FoldingRangeKind.Region}}(n.kind)),t}))}))};return n}(),Mt=function(){function n(n){this._worker=n}n.prototype.provideSelectionRanges=function(n,t,r){var e=n.uri;return this._worker(e).then((function(n){return n.getSelectionRanges(e.toString(),t.map(vt))})).then((function(n){if(n)return n.map((function(n){var t=[];for(;n;)t.push({range:dt(n.range)}),n=n.parent;return t}))}))};return n}(),Ct=function(n){__extends(t,n);function t(t){return n.call(this,t,[".",":","<",'"',"=","/"])||this}return t}(st);n({DocumentColorAdapter:Nt,FoldingRangeAdapter:_t,SelectionRangeAdapter:Mt});function Wt(n){var t=new en(n),r=function(){var n=[];for(var r=0;r<arguments.length;r++){n[r]=arguments[r]}return t.getLanguageServiceWorker.apply(t,n)};var e=n.languageId;c.languages.registerCompletionItemProvider(e,new Ct(r)),c.languages.registerHoverProvider(e,new wt(r)),c.languages.registerDocumentHighlightProvider(e,new pt(r)),c.languages.registerLinkProvider(e,new St(r)),c.languages.registerFoldingRangeProvider(e,new _t(r)),c.languages.registerDocumentSymbolProvider(e,new At(r)),c.languages.registerSelectionRangeProvider(e,new Mt(r)),c.languages.registerRenameProvider(e,new kt(r)),e==="html"&&(c.languages.registerDocumentFormattingEditProvider(e,new Tt(r)),c.languages.registerDocumentRangeFormattingEditProvider(e,new Dt(r)))}function Lt(n){var t=[],r=[],e=new en(n);t.push(e);var i=function(){var n=[];for(var t=0;t<arguments.length;t++){n[t]=arguments[t]}return e.getLanguageServiceWorker.apply(e,n)};return function(){var t=n.languageId,e=n.modeConfiguration;Ft(r),e.completionItems&&r.push(c.languages.registerCompletionItemProvider(t,new Ct(i))),e.hovers&&r.push(c.languages.registerHoverProvider(t,new wt(i))),e.documentHighlights&&r.push(c.languages.registerDocumentHighlightProvider(t,new pt(i))),e.links&&r.push(c.languages.registerLinkProvider(t,new St(i))),e.documentSymbols&&r.push(c.languages.registerDocumentSymbolProvider(t,new At(i))),e.rename&&r.push(c.languages.registerRenameProvider(t,new kt(i))),e.foldingRanges&&r.push(c.languages.registerFoldingRangeProvider(t,new _t(i))),e.selectionRanges&&r.push(c.languages.registerSelectionRangeProvider(t,new Mt(i))),e.documentFormattingEdits&&r.push(c.languages.registerDocumentFormattingEditProvider(t,new Tt(i))),e.documentRangeFormattingEdits&&r.push(c.languages.registerDocumentRangeFormattingEditProvider(t,new Dt(i)))}(),t.push(zt(r)),zt(t)}function zt(n){return{dispose:function(){return Ft(n)}}}function Ft(n){for(;n.length;)n.pop().dispose()}}}}));
//# sourceMappingURL=p-15334be1.system.js.map