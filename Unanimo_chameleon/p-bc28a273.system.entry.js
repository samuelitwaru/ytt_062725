var __extends=this&&this.__extends||function(){var r=function(n,t){r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t))r[t]=n[t]};return r(n,t)};return function(n,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(n,t);function i(){this.constructor=n}n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();var __awaiter=this&&this.__awaiter||function(r,n,t,i){function e(r){return r instanceof t?r:new t((function(n){n(r)}))}return new(t||(t=Promise))((function(t,a){function u(r){try{s(i.next(r))}catch(r){a(r)}}function f(r){try{s(i["throw"](r))}catch(r){a(r)}}function s(r){r.done?t(r.value):e(r.value).then(u,f)}s((i=i.apply(r,n||[])).next())}))};var __generator=this&&this.__generator||function(r,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,e,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(r){return function(n){return s([r,n])}}function s(f){if(i)throw new TypeError("Generator is already executing.");while(u&&(u=0,f[0]&&(t=0)),t)try{if(i=1,e&&(a=f[0]&2?e["return"]:f[0]?e["throw"]||((a=e["return"])&&a.call(e),0):e.next)&&!(a=a.call(e,f[1])).done)return a;if(e=0,a)f=[f[0]&2,a.value];switch(f[0]){case 0:case 1:a=f;break;case 4:t.label++;return{value:f[1],done:false};case 5:t.label++;e=f[1];f=[0];continue;case 7:f=t.ops.pop();t.trys.pop();continue;default:if(!(a=t.trys,a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1];a=f;break}if(a&&t.label<a[2]){t.label=a[2];t.ops.push(f);break}if(a[2])t.ops.pop();t.trys.pop();continue}f=n.call(r,t)}catch(r){f=[6,r];e=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:true}}};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(r,n,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n==="function"?r!==n||!i:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(r):i?i.value:n.get(r)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(r,n,t,i,e){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!e)throw new TypeError("Private accessor was defined without a setter");if(typeof n==="function"?r!==n||!e:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?e.call(r,t):e?e.value=t:n.set(r,t),t};System.register(["./p-62fc4e49.system.js"],(function(r){"use strict";var n,t,i,e;return{setters:[function(r){n=r.r;t=r.c;i=r.g;e=r.h}],execute:function(){var a,u,f,s,o,h,v,c,w,l,d,y,A,I,b,p,M,_;var m;(function(r){r[r["QR_CODE"]=0]="QR_CODE";r[r["AZTEC"]=1]="AZTEC";r[r["CODABAR"]=2]="CODABAR";r[r["CODE_39"]=3]="CODE_39";r[r["CODE_93"]=4]="CODE_93";r[r["CODE_128"]=5]="CODE_128";r[r["DATA_MATRIX"]=6]="DATA_MATRIX";r[r["MAXICODE"]=7]="MAXICODE";r[r["ITF"]=8]="ITF";r[r["EAN_13"]=9]="EAN_13";r[r["EAN_8"]=10]="EAN_8";r[r["PDF_417"]=11]="PDF_417";r[r["RSS_14"]=12]="RSS_14";r[r["RSS_EXPANDED"]=13]="RSS_EXPANDED";r[r["UPC_A"]=14]="UPC_A";r[r["UPC_E"]=15]="UPC_E";r[r["UPC_EAN_EXTENSION"]=16]="UPC_EAN_EXTENSION"})(m||(m={}));var k=new Map([[m.QR_CODE,"QR_CODE"],[m.AZTEC,"AZTEC"],[m.CODABAR,"CODABAR"],[m.CODE_39,"CODE_39"],[m.CODE_93,"CODE_93"],[m.CODE_128,"CODE_128"],[m.DATA_MATRIX,"DATA_MATRIX"],[m.MAXICODE,"MAXICODE"],[m.ITF,"ITF"],[m.EAN_13,"EAN_13"],[m.EAN_8,"EAN_8"],[m.PDF_417,"PDF_417"],[m.RSS_14,"RSS_14"],[m.RSS_EXPANDED,"RSS_EXPANDED"],[m.UPC_A,"UPC_A"],[m.UPC_E,"UPC_E"],[m.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);var g;(function(r){r[r["UNKNOWN"]=0]="UNKNOWN";r[r["URL"]=1]="URL"})(g||(g={}));function S(r){return Object.values(m).includes(r)}var E;(function(r){r[r["SCAN_TYPE_CAMERA"]=0]="SCAN_TYPE_CAMERA";r[r["SCAN_TYPE_FILE"]=1]="SCAN_TYPE_FILE"})(E||(E={}));var C=function(){function r(){}r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode";r.SCAN_DEFAULT_FPS=2;r.DEFAULT_DISABLE_FLIP=false;r.DEFAULT_REMEMBER_LAST_CAMERA_USED=true;r.DEFAULT_SUPPORTED_SCAN_TYPE=[E.SCAN_TYPE_CAMERA,E.SCAN_TYPE_FILE];return r}();var N=function(){function r(r,n){this.format=r;this.formatName=n}r.prototype.toString=function(){return this.formatName};r.create=function(n){if(!k.has(n)){throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap")}return new r(n,k.get(n))};return r}();var O=function(){function r(){}r.createFromText=function(r){var n={text:r};return{decodedText:r,result:n}};r.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}};return r}();var T;(function(r){r[r["UNKWOWN_ERROR"]=0]="UNKWOWN_ERROR";r[r["IMPLEMENTATION_ERROR"]=1]="IMPLEMENTATION_ERROR";r[r["NO_CODE_FOUND_ERROR"]=2]="NO_CODE_FOUND_ERROR"})(T||(T={}));var R=function(){function r(){}r.createFrom=function(r){return{errorMessage:r,type:T.UNKWOWN_ERROR}};return r}();var P=function(){function r(r){this.verbose=r}r.prototype.log=function(r){if(this.verbose){console.log(r)}};r.prototype.warn=function(r){if(this.verbose){console.warn(r)}};r.prototype.logError=function(r,n){if(this.verbose||n===true){console.error(r)}};r.prototype.logErrors=function(r){if(r.length===0){throw"Logger#logError called without arguments"}if(this.verbose){console.error(r)}};return r}();function D(r){return typeof r==="undefined"||r===null}var U=function(){function r(){}r.codeParseError=function(r){return"QR code parse error, error = ".concat(r)};r.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)};r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only "+"supported cameraIdOrConfig in this case is deviceId parameter "+"(string)."};r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."};r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."};r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https "+"or localhost."};r.scannerPaused=function(){return"Scanner paused"};return r}();var x=function(){function r(){}r.isMediaStreamConstraintsValid=function(r,n){if(typeof r!=="object"){var t=typeof r;n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(t,"."),true);return false}var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"];var e=new Set(i);var a=Object.keys(r);for(var u=0,f=a;u<f.length;u++){var s=f[u];if(e.has(s)){n.logError("".concat(s," is not supported videoConstaints."),true);return false}}return true};return r}();var F=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function L(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r["default"]:r}var G={exports:{}};(function(r,n){(function(r,t){t(n)})(F,(function(r){function n(r){return r===null||r===undefined}var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)if(n.hasOwnProperty(t))r[t]=n[t]};function i(r,n){t(r,n);function i(){this.constructor=r}r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}function e(r,n){var t=Object.setPrototypeOf;t?t(r,n):r.__proto__=n}function a(r,n){if(n===void 0){n=r.constructor}var t=Error.captureStackTrace;t&&t(r,n)}var u=function(r){i(n,r);function n(n){var t=this.constructor;var i=r.call(this,n)||this;Object.defineProperty(i,"name",{value:t.name,enumerable:false});e(i,t.prototype);a(i);return i}return n}(Error);var f=function(r){i(n,r);function n(n){if(n===void 0){n=undefined}var t=r.call(this,n)||this;t.message=n;return t}n.prototype.getKind=function(){var r=this.constructor;return r.kind};return n}(u);f.kind="Exception";var s=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(f);s.kind="ArgumentException";var o=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(f);o.kind="IllegalArgumentException";var h=function(){function r(r){this.binarizer=r;if(r===null){throw new o("Binarizer must be non-null.")}}r.prototype.getWidth=function(){return this.binarizer.getWidth()};r.prototype.getHeight=function(){return this.binarizer.getHeight()};r.prototype.getBlackRow=function(r,n){return this.binarizer.getBlackRow(r,n)};r.prototype.getBlackMatrix=function(){if(this.matrix===null||this.matrix===undefined){this.matrix=this.binarizer.getBlackMatrix()}return this.matrix};r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()};r.prototype.crop=function(n,t,i,e){var a=this.binarizer.getLuminanceSource().crop(n,t,i,e);return new r(this.binarizer.createBinarizer(a))};r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()};r.prototype.rotateCounterClockwise=function(){var n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(n))};r.prototype.rotateCounterClockwise45=function(){var n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(n))};r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(r){return""}};return r}();var v=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}n.getChecksumInstance=function(){return new n};return n}(f);v.kind="ChecksumException";var c=function(){function r(r){this.source=r}r.prototype.getLuminanceSource=function(){return this.source};r.prototype.getWidth=function(){return this.source.getWidth()};r.prototype.getHeight=function(){return this.source.getHeight()};return r}();var w=function(){function r(){}r.arraycopy=function(r,n,t,i,e){while(e--){t[i++]=r[n++]}};r.currentTimeMillis=function(){return Date.now()};return r}();var l=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(f);l.kind="IndexOutOfBoundsException";var d=function(r){i(n,r);function n(n,t){if(n===void 0){n=undefined}if(t===void 0){t=undefined}var i=r.call(this,t)||this;i.index=n;i.message=t;return i}return n}(l);d.kind="ArrayIndexOutOfBoundsException";var y=function(){function r(){}r.fill=function(r,n){for(var t=0,i=r.length;t<i;t++)r[t]=n};r.fillWithin=function(n,t,i,e){r.rangeCheck(n.length,t,i);for(var a=t;a<i;a++)n[a]=e};r.rangeCheck=function(r,n,t){if(n>t){throw new o("fromIndex("+n+") > toIndex("+t+")")}if(n<0){throw new d(n)}if(t>r){throw new d(t)}};r.asList=function(){var r=[];for(var n=0;n<arguments.length;n++){r[n]=arguments[n]}return r};r.create=function(r,n,t){var i=Array.from({length:r});return i.map((function(r){return Array.from({length:n}).fill(t)}))};r.createInt32Array=function(r,n,t){var i=Array.from({length:r});return i.map((function(r){return Int32Array.from({length:n}).fill(t)}))};r.equals=function(r,n){if(!r){return false}if(!n){return false}if(!r.length){return false}if(!n.length){return false}if(r.length!==n.length){return false}for(var t=0,i=r.length;t<i;t++){if(r[t]!==n[t]){return false}}return true};r.hashCode=function(r){if(r===null){return 0}var n=1;for(var t=0,i=r;t<i.length;t++){var e=i[t];n=31*n+e}return n};r.fillUint8Array=function(r,n){for(var t=0;t!==r.length;t++){r[t]=n}};r.copyOf=function(r,n){return r.slice(0,n)};r.copyOfUint8Array=function(r,n){if(r.length<=n){var t=new Uint8Array(n);t.set(r);return t}return r.slice(0,n)};r.copyOfRange=function(r,n,t){var i=t-n;var e=new Int32Array(i);w.arraycopy(r,n,e,0,i);return e};r.binarySearch=function(n,t,i){if(undefined===i){i=r.numberComparator}var e=0;var a=n.length-1;while(e<=a){var u=a+e>>1;var f=i(t,n[u]);if(f>0){e=u+1}else if(f<0){a=u-1}else{return u}}return-e-1};r.numberComparator=function(r,n){return r-n};return r}();var A=function(){function r(){}r.numberOfTrailingZeros=function(r){var n;if(r===0)return 32;var t=31;n=r<<16;if(n!==0){t-=16;r=n}n=r<<8;if(n!==0){t-=8;r=n}n=r<<4;if(n!==0){t-=4;r=n}n=r<<2;if(n!==0){t-=2;r=n}return t-(r<<1>>>31)};r.numberOfLeadingZeros=function(r){if(r===0){return 32}var n=1;if(r>>>16===0){n+=16;r<<=16}if(r>>>24===0){n+=8;r<<=8}if(r>>>28===0){n+=4;r<<=4}if(r>>>30===0){n+=2;r<<=2}n-=r>>>31;return n};r.toHexString=function(r){return r.toString(16)};r.toBinaryString=function(r){return String(parseInt(String(r),2))};r.bitCount=function(r){r=r-(r>>>1&1431655765);r=(r&858993459)+(r>>>2&858993459);r=r+(r>>>4)&252645135;r=r+(r>>>8);r=r+(r>>>16);return r&63};r.truncDivision=function(r,n){return Math.trunc(r/n)};r.parseInt=function(r,n){if(n===void 0){n=undefined}return parseInt(r,n)};return r}();A.MIN_VALUE_32_BITS=-2147483648;A.MAX_VALUE=Number.MAX_SAFE_INTEGER;var I=function(){function r(n,t){if(undefined===n){this.size=0;this.bits=new Int32Array(1)}else{this.size=n;if(undefined===t||null===t){this.bits=r.makeArray(n)}else{this.bits=t}}}r.prototype.getSize=function(){return this.size};r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)};r.prototype.ensureCapacity=function(n){if(n>this.bits.length*32){var t=r.makeArray(n);w.arraycopy(this.bits,0,t,0,this.bits.length);this.bits=t}};r.prototype.get=function(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0};r.prototype.set=function(r){this.bits[Math.floor(r/32)]|=1<<(r&31)};r.prototype.flip=function(r){this.bits[Math.floor(r/32)]^=1<<(r&31)};r.prototype.getNextSet=function(r){var n=this.size;if(r>=n){return n}var t=this.bits;var i=Math.floor(r/32);var e=t[i];e&=~((1<<(r&31))-1);var a=t.length;while(e===0){if(++i===a){return n}e=t[i]}var u=i*32+A.numberOfTrailingZeros(e);return u>n?n:u};r.prototype.getNextUnset=function(r){var n=this.size;if(r>=n){return n}var t=this.bits;var i=Math.floor(r/32);var e=~t[i];e&=~((1<<(r&31))-1);var a=t.length;while(e===0){if(++i===a){return n}e=~t[i]}var u=i*32+A.numberOfTrailingZeros(e);return u>n?n:u};r.prototype.setBulk=function(r,n){this.bits[Math.floor(r/32)]=n};r.prototype.setRange=function(r,n){if(n<r||r<0||n>this.size){throw new o}if(n===r){return}n--;var t=Math.floor(r/32);var i=Math.floor(n/32);var e=this.bits;for(var a=t;a<=i;a++){var u=a>t?0:r&31;var f=a<i?31:n&31;var s=(2<<f)-(1<<u);e[a]|=s}};r.prototype.clear=function(){var r=this.bits.length;var n=this.bits;for(var t=0;t<r;t++){n[t]=0}};r.prototype.isRange=function(r,n,t){if(n<r||r<0||n>this.size){throw new o}if(n===r){return true}n--;var i=Math.floor(r/32);var e=Math.floor(n/32);var a=this.bits;for(var u=i;u<=e;u++){var f=u>i?0:r&31;var s=u<e?31:n&31;var h=(2<<s)-(1<<f)&4294967295;if((a[u]&h)!==(t?h:0)){return false}}return true};r.prototype.appendBit=function(r){this.ensureCapacity(this.size+1);if(r){this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)}this.size++};r.prototype.appendBits=function(r,n){if(n<0||n>32){throw new o("Num bits must be between 0 and 32")}this.ensureCapacity(this.size+n);for(var t=n;t>0;t--){this.appendBit((r>>t-1&1)===1)}};r.prototype.appendBitArray=function(r){var n=r.size;this.ensureCapacity(this.size+n);for(var t=0;t<n;t++){this.appendBit(r.get(t))}};r.prototype.xor=function(r){if(this.size!==r.size){throw new o("Sizes don't match")}var n=this.bits;for(var t=0,i=n.length;t<i;t++){n[t]^=r.bits[t]}};r.prototype.toBytes=function(r,n,t,i){for(var e=0;e<i;e++){var a=0;for(var u=0;u<8;u++){if(this.get(r)){a|=1<<7-u}r++}n[t+e]=a}};r.prototype.getBitArray=function(){return this.bits};r.prototype.reverse=function(){var r=new Int32Array(this.bits.length);var n=Math.floor((this.size-1)/32);var t=n+1;var i=this.bits;for(var e=0;e<t;e++){var a=i[e];a=a>>1&1431655765|(a&1431655765)<<1;a=a>>2&858993459|(a&858993459)<<2;a=a>>4&252645135|(a&252645135)<<4;a=a>>8&16711935|(a&16711935)<<8;a=a>>16&65535|(a&65535)<<16;r[n-e]=a}if(this.size!==t*32){var u=t*32-this.size;var f=r[0]>>>u;for(var e=1;e<t;e++){var s=r[e];f|=s<<32-u;r[e-1]=f;f=s>>>u}r[t-1]=f}this.bits=r};r.makeArray=function(r){return new Int32Array(Math.floor((r+31)/32))};r.prototype.equals=function(n){if(!(n instanceof r)){return false}var t=n;return this.size===t.size&&y.equals(this.bits,t.bits)};r.prototype.hashCode=function(){return 31*this.size+y.hashCode(this.bits)};r.prototype.toString=function(){var r="";for(var n=0,t=this.size;n<t;n++){if((n&7)===0){r+=" "}r+=this.get(n)?"X":"."}return r};r.prototype.clone=function(){return new r(this.size,this.bits.slice())};return r}();var b;(function(r){r[r["OTHER"]=0]="OTHER";r[r["PURE_BARCODE"]=1]="PURE_BARCODE";r[r["POSSIBLE_FORMATS"]=2]="POSSIBLE_FORMATS";r[r["TRY_HARDER"]=3]="TRY_HARDER";r[r["CHARACTER_SET"]=4]="CHARACTER_SET";r[r["ALLOWED_LENGTHS"]=5]="ALLOWED_LENGTHS";r[r["ASSUME_CODE_39_CHECK_DIGIT"]=6]="ASSUME_CODE_39_CHECK_DIGIT";r[r["ASSUME_GS1"]=7]="ASSUME_GS1";r[r["RETURN_CODABAR_START_END"]=8]="RETURN_CODABAR_START_END";r[r["NEED_RESULT_POINT_CALLBACK"]=9]="NEED_RESULT_POINT_CALLBACK";r[r["ALLOWED_EAN_EXTENSIONS"]=10]="ALLOWED_EAN_EXTENSIONS"})(b||(b={}));var p=b;var M=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}n.getFormatInstance=function(){return new n};return n}(f);M.kind="FormatException";var _;(function(r){r[r["Cp437"]=0]="Cp437";r[r["ISO8859_1"]=1]="ISO8859_1";r[r["ISO8859_2"]=2]="ISO8859_2";r[r["ISO8859_3"]=3]="ISO8859_3";r[r["ISO8859_4"]=4]="ISO8859_4";r[r["ISO8859_5"]=5]="ISO8859_5";r[r["ISO8859_6"]=6]="ISO8859_6";r[r["ISO8859_7"]=7]="ISO8859_7";r[r["ISO8859_8"]=8]="ISO8859_8";r[r["ISO8859_9"]=9]="ISO8859_9";r[r["ISO8859_10"]=10]="ISO8859_10";r[r["ISO8859_11"]=11]="ISO8859_11";r[r["ISO8859_13"]=12]="ISO8859_13";r[r["ISO8859_14"]=13]="ISO8859_14";r[r["ISO8859_15"]=14]="ISO8859_15";r[r["ISO8859_16"]=15]="ISO8859_16";r[r["SJIS"]=16]="SJIS";r[r["Cp1250"]=17]="Cp1250";r[r["Cp1251"]=18]="Cp1251";r[r["Cp1252"]=19]="Cp1252";r[r["Cp1256"]=20]="Cp1256";r[r["UnicodeBigUnmarked"]=21]="UnicodeBigUnmarked";r[r["UTF8"]=22]="UTF8";r[r["ASCII"]=23]="ASCII";r[r["Big5"]=24]="Big5";r[r["GB18030"]=25]="GB18030";r[r["EUC_KR"]=26]="EUC_KR"})(_||(_={}));var m=function(){function r(n,t,i){var e=[];for(var a=3;a<arguments.length;a++){e[a-3]=arguments[a]}this.valueIdentifier=n;this.name=i;if(typeof t==="number"){this.values=Int32Array.from([t])}else{this.values=t}this.otherEncodingNames=e;r.VALUE_IDENTIFIER_TO_ECI.set(n,this);r.NAME_TO_ECI.set(i,this);var u=this.values;for(var f=0,s=u.length;f!==s;f++){var o=u[f];r.VALUES_TO_ECI.set(o,this)}for(var h=0,v=e;h<v.length;h++){var c=v[h];r.NAME_TO_ECI.set(c,this)}}r.prototype.getValueIdentifier=function(){return this.valueIdentifier};r.prototype.getName=function(){return this.name};r.prototype.getValue=function(){return this.values[0]};r.getCharacterSetECIByValue=function(n){if(n<0||n>=900){throw new M("incorect value")}var t=r.VALUES_TO_ECI.get(n);if(undefined===t){throw new M("incorect value")}return t};r.getCharacterSetECIByName=function(n){var t=r.NAME_TO_ECI.get(n);if(undefined===t){throw new M("incorect value")}return t};r.prototype.equals=function(n){if(!(n instanceof r)){return false}var t=n;return this.getName()===t.getName()};return r}();m.VALUE_IDENTIFIER_TO_ECI=new Map;m.VALUES_TO_ECI=new Map;m.NAME_TO_ECI=new Map;m.Cp437=new m(_.Cp437,Int32Array.from([0,2]),"Cp437");m.ISO8859_1=new m(_.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1");m.ISO8859_2=new m(_.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2");m.ISO8859_3=new m(_.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3");m.ISO8859_4=new m(_.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4");m.ISO8859_5=new m(_.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5");m.ISO8859_6=new m(_.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6");m.ISO8859_7=new m(_.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7");m.ISO8859_8=new m(_.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8");m.ISO8859_9=new m(_.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9");m.ISO8859_10=new m(_.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10");m.ISO8859_11=new m(_.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11");m.ISO8859_13=new m(_.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13");m.ISO8859_14=new m(_.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14");m.ISO8859_15=new m(_.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15");m.ISO8859_16=new m(_.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16");m.SJIS=new m(_.SJIS,20,"SJIS","Shift_JIS");m.Cp1250=new m(_.Cp1250,21,"Cp1250","windows-1250");m.Cp1251=new m(_.Cp1251,22,"Cp1251","windows-1251");m.Cp1252=new m(_.Cp1252,23,"Cp1252","windows-1252");m.Cp1256=new m(_.Cp1256,24,"Cp1256","windows-1256");m.UnicodeBigUnmarked=new m(_.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig");m.UTF8=new m(_.UTF8,26,"UTF8","UTF-8");m.ASCII=new m(_.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII");m.Big5=new m(_.Big5,28,"Big5");m.GB18030=new m(_.GB18030,29,"GB18030","GB2312","EUC_CN","GBK");m.EUC_KR=new m(_.EUC_KR,30,"EUC_KR","EUC-KR");var k=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(f);k.kind="UnsupportedOperationException";var g=function(){function r(){}r.decode=function(r,n){var t=this.encodingName(n);if(this.customDecoder){return this.customDecoder(r,t)}if(typeof TextDecoder==="undefined"||this.shouldDecodeOnFallback(t)){return this.decodeFallback(r,t)}return new TextDecoder(t).decode(r)};r.shouldDecodeOnFallback=function(n){return!r.isBrowser()&&n==="ISO-8859-1"};r.encode=function(r,n){var t=this.encodingName(n);if(this.customEncoder){return this.customEncoder(r,t)}if(typeof TextEncoder==="undefined"){return this.encodeFallback(r)}return(new TextEncoder).encode(r)};r.isBrowser=function(){return typeof window!=="undefined"&&{}.toString.call(window)==="[object Window]"};r.encodingName=function(r){return typeof r==="string"?r:r.getName()};r.encodingCharacterSet=function(r){if(r instanceof m){return r}return m.getCharacterSetECIByName(r)};r.decodeFallback=function(n,t){var i=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(i)){var e="";for(var a=0,u=n.length;a<u;a++){var f=n[a].toString(16);if(f.length<2){f="0"+f}e+="%"+f}return decodeURIComponent(e)}if(i.equals(m.UnicodeBigUnmarked)){return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}throw new k("Encoding ".concat(this.encodingName(t)," not supported by fallback."))};r.isDecodeFallbackSupported=function(r){return r.equals(m.UTF8)||r.equals(m.ISO8859_1)||r.equals(m.ASCII)};r.encodeFallback=function(r){var n=btoa(unescape(encodeURIComponent(r)));var t=n.split("");var i=[];for(var e=0;e<t.length;e++){i.push(t[e].charCodeAt(0))}return new Uint8Array(i)};return r}();var S=function(){function r(){}r.castAsNonUtf8Char=function(r,n){if(n===void 0){n=null}var t=n?n.getName():this.ISO88591;return g.decode(new Uint8Array([r]),t)};r.guessEncoding=function(n,t){if(t!==null&&t!==undefined&&undefined!==t.get(p.CHARACTER_SET)){return t.get(p.CHARACTER_SET).toString()}var i=n.length;var e=true;var a=true;var u=true;var f=0;var s=0;var o=0;var h=0;var v=0;var c=0;var w=0;var l=0;var d=0;var y=0;var A=0;var I=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(var b=0;b<i&&(e||a||u);b++){var M=n[b]&255;if(u){if(f>0){if((M&128)===0){u=false}else{f--}}else if((M&128)!==0){if((M&64)===0){u=false}else{f++;if((M&32)===0){s++}else{f++;if((M&16)===0){o++}else{f++;if((M&8)===0){h++}else{u=false}}}}}}if(e){if(M>127&&M<160){e=false}else if(M>159){if(M<192||M===215||M===247){A++}}}if(a){if(v>0){if(M<64||M===127||M>252){a=false}else{v--}}else if(M===128||M===160||M>239){a=false}else if(M>160&&M<224){c++;l=0;w++;if(w>d){d=w}}else if(M>127){v++;w=0;l++;if(l>y){y=l}}else{w=0;l=0}}}if(u&&f>0){u=false}if(a&&v>0){a=false}if(u&&(I||s+o+h>0)){return r.UTF8}if(a&&(r.ASSUME_SHIFT_JIS||d>=3||y>=3)){return r.SHIFT_JIS}if(e&&a){return d===2&&c===2||A*10>=i?r.SHIFT_JIS:r.ISO88591}if(e){return r.ISO88591}if(a){return r.SHIFT_JIS}if(u){return r.UTF8}return r.PLATFORM_DEFAULT_ENCODING};r.format=function(r){var n=[];for(var t=1;t<arguments.length;t++){n[t-1]=arguments[t]}var i=-1;function e(r,t,e,a,u,f){if(r==="%%")return"%";if(n[++i]===undefined)return undefined;r=a?parseInt(a.substr(1)):undefined;var s=u?parseInt(u.substr(1)):undefined;var o;switch(f){case"s":o=n[i];break;case"c":o=n[i][0];break;case"f":o=parseFloat(n[i]).toFixed(r);break;case"p":o=parseFloat(n[i]).toPrecision(r);break;case"e":o=parseFloat(n[i]).toExponential(r);break;case"x":o=parseInt(n[i]).toString(s?s:16);break;case"d":o=parseFloat(parseInt(n[i],s?s:10).toPrecision(r)).toFixed(0);break}o=typeof o==="object"?JSON.stringify(o):(+o).toString(s);var h=parseInt(e);var v=e&&e[0]+""==="0"?"0":" ";while(o.length<h)o=t!==undefined?o+v:v+o;return o}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(a,e)};r.getBytes=function(r,n){return g.encode(r,n)};r.getCharCode=function(r,n){if(n===void 0){n=0}return r.charCodeAt(n)};r.getCharAt=function(r){return String.fromCharCode(r)};return r}();S.SHIFT_JIS=m.SJIS.getName();S.GB2312="GB2312";S.ISO88591=m.ISO8859_1.getName();S.EUC_JP="EUC_JP";S.UTF8=m.UTF8.getName();S.PLATFORM_DEFAULT_ENCODING=S.UTF8;S.ASSUME_SHIFT_JIS=false;var E=function(){function r(r){if(r===void 0){r=""}this.value=r}r.prototype.enableDecoding=function(r){this.encoding=r;return this};r.prototype.append=function(r){if(typeof r==="string"){this.value+=r.toString()}else if(this.encoding){this.value+=S.castAsNonUtf8Char(r,this.encoding)}else{this.value+=String.fromCharCode(r)}return this};r.prototype.appendChars=function(r,n,t){for(var i=n;n<n+t;i++){this.append(r[i])}return this};r.prototype.length=function(){return this.value.length};r.prototype.charAt=function(r){return this.value.charAt(r)};r.prototype.deleteCharAt=function(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)};r.prototype.setCharAt=function(r,n){this.value=this.value.substr(0,r)+n+this.value.substr(r+1)};r.prototype.substring=function(r,n){return this.value.substring(r,n)};r.prototype.setLengthToZero=function(){this.value=""};r.prototype.toString=function(){return this.value};r.prototype.insert=function(r,n){this.value=this.value.substr(0,r)+n+this.value.substr(r+n.length)};return r}();var C=function(){function r(r,n,t,i){this.width=r;this.height=n;this.rowSize=t;this.bits=i;if(undefined===n||null===n){n=r}this.height=n;if(r<1||n<1){throw new o("Both dimensions must be greater than 0")}if(undefined===t||null===t){t=Math.floor((r+31)/32)}this.rowSize=t;if(undefined===i||null===i){this.bits=new Int32Array(this.rowSize*this.height)}}r.parseFromBooleanArray=function(n){var t=n.length;var i=n[0].length;var e=new r(i,t);for(var a=0;a<t;a++){var u=n[a];for(var f=0;f<i;f++){if(u[f]){e.set(f,a)}}}return e};r.parseFromString=function(n,t,i){if(n===null){throw new o("stringRepresentation cannot be null")}var e=new Array(n.length);var a=0;var u=0;var f=-1;var s=0;var h=0;while(h<n.length){if(n.charAt(h)==="\n"||n.charAt(h)==="\r"){if(a>u){if(f===-1){f=a-u}else if(a-u!==f){throw new o("row lengths do not match")}u=a;s++}h++}else if(n.substring(h,h+t.length)===t){h+=t.length;e[a]=true;a++}else if(n.substring(h,h+i.length)===i){h+=i.length;e[a]=false;a++}else{throw new o("illegal character encountered: "+n.substring(h))}}if(a>u){if(f===-1){f=a-u}else if(a-u!==f){throw new o("row lengths do not match")}s++}var v=new r(f,s);for(var c=0;c<a;c++){if(e[c]){v.set(Math.floor(c%f),Math.floor(c/f))}}return v};r.prototype.get=function(r,n){var t=n*this.rowSize+Math.floor(r/32);return(this.bits[t]>>>(r&31)&1)!==0};r.prototype.set=function(r,n){var t=n*this.rowSize+Math.floor(r/32);this.bits[t]|=1<<(r&31)&4294967295};r.prototype.unset=function(r,n){var t=n*this.rowSize+Math.floor(r/32);this.bits[t]&=~(1<<(r&31)&4294967295)};r.prototype.flip=function(r,n){var t=n*this.rowSize+Math.floor(r/32);this.bits[t]^=1<<(r&31)&4294967295};r.prototype.xor=function(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize()){throw new o("input matrix dimensions do not match")}var n=new I(Math.floor(this.width/32)+1);var t=this.rowSize;var i=this.bits;for(var e=0,a=this.height;e<a;e++){var u=e*t;var f=r.getRow(e,n).getBitArray();for(var s=0;s<t;s++){i[u+s]^=f[s]}}};r.prototype.clear=function(){var r=this.bits;var n=r.length;for(var t=0;t<n;t++){r[t]=0}};r.prototype.setRegion=function(r,n,t,i){if(n<0||r<0){throw new o("Left and top must be nonnegative")}if(i<1||t<1){throw new o("Height and width must be at least 1")}var e=r+t;var a=n+i;if(a>this.height||e>this.width){throw new o("The region must fit inside the matrix")}var u=this.rowSize;var f=this.bits;for(var s=n;s<a;s++){var h=s*u;for(var v=r;v<e;v++){f[h+Math.floor(v/32)]|=1<<(v&31)&4294967295}}};r.prototype.getRow=function(r,n){if(n===null||n===undefined||n.getSize()<this.width){n=new I(this.width)}else{n.clear()}var t=this.rowSize;var i=this.bits;var e=r*t;for(var a=0;a<t;a++){n.setBulk(a*32,i[e+a])}return n};r.prototype.setRow=function(r,n){w.arraycopy(n.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)};r.prototype.rotate180=function(){var r=this.getWidth();var n=this.getHeight();var t=new I(r);var i=new I(r);for(var e=0,a=Math.floor((n+1)/2);e<a;e++){t=this.getRow(e,t);i=this.getRow(n-1-e,i);t.reverse();i.reverse();this.setRow(e,i);this.setRow(n-1-e,t)}};r.prototype.getEnclosingRectangle=function(){var r=this.width;var n=this.height;var t=this.rowSize;var i=this.bits;var e=r;var a=n;var u=-1;var f=-1;for(var s=0;s<n;s++){for(var o=0;o<t;o++){var h=i[s*t+o];if(h!==0){if(s<a){a=s}if(s>f){f=s}if(o*32<e){var v=0;while((h<<31-v&4294967295)===0){v++}if(o*32+v<e){e=o*32+v}}if(o*32+31>u){var v=31;while(h>>>v===0){v--}if(o*32+v>u){u=o*32+v}}}}}if(u<e||f<a){return null}return Int32Array.from([e,a,u-e+1,f-a+1])};r.prototype.getTopLeftOnBit=function(){var r=this.rowSize;var n=this.bits;var t=0;while(t<n.length&&n[t]===0){t++}if(t===n.length){return null}var i=t/r;var e=t%r*32;var a=n[t];var u=0;while((a<<31-u&4294967295)===0){u++}e+=u;return Int32Array.from([e,i])};r.prototype.getBottomRightOnBit=function(){var r=this.rowSize;var n=this.bits;var t=n.length-1;while(t>=0&&n[t]===0){t--}if(t<0){return null}var i=Math.floor(t/r);var e=Math.floor(t%r)*32;var a=n[t];var u=31;while(a>>>u===0){u--}e+=u;return Int32Array.from([e,i])};r.prototype.getWidth=function(){return this.width};r.prototype.getHeight=function(){return this.height};r.prototype.getRowSize=function(){return this.rowSize};r.prototype.equals=function(n){if(!(n instanceof r)){return false}var t=n;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&y.equals(this.bits,t.bits)};r.prototype.hashCode=function(){var r=this.width;r=31*r+this.width;r=31*r+this.height;r=31*r+this.rowSize;r=31*r+y.hashCode(this.bits);return r};r.prototype.toString=function(r,n,t){if(r===void 0){r="X "}if(n===void 0){n="  "}if(t===void 0){t="\n"}return this.buildToString(r,n,t)};r.prototype.buildToString=function(r,n,t){var i=new E;for(var e=0,a=this.height;e<a;e++){for(var u=0,f=this.width;u<f;u++){i.append(this.get(u,e)?r:n)}i.append(t)}return i.toString()};r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())};return r}();var N=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}n.getNotFoundInstance=function(){return new n};return n}(f);N.kind="NotFoundException";var O=function(r){i(n,r);function n(t){var i=r.call(this,t)||this;i.luminances=n.EMPTY;i.buckets=new Int32Array(n.LUMINANCE_BUCKETS);return i}n.prototype.getBlackRow=function(r,t){var i=this.getLuminanceSource();var e=i.getWidth();if(t===undefined||t===null||t.getSize()<e){t=new I(e)}else{t.clear()}this.initArrays(e);var a=i.getRow(r,this.luminances);var u=this.buckets;for(var f=0;f<e;f++){u[(a[f]&255)>>n.LUMINANCE_SHIFT]++}var s=n.estimateBlackPoint(u);if(e<3){for(var f=0;f<e;f++){if((a[f]&255)<s){t.set(f)}}}else{var o=a[0]&255;var h=a[1]&255;for(var f=1;f<e-1;f++){var v=a[f+1]&255;if((h*4-o-v)/2<s){t.set(f)}o=h;h=v}}return t};n.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource();var t=r.getWidth();var i=r.getHeight();var e=new C(t,i);this.initArrays(t);var a=this.buckets;for(var u=1;u<5;u++){var f=Math.floor(i*u/5);var s=r.getRow(f,this.luminances);var o=Math.floor(t*4/5);for(var h=Math.floor(t/5);h<o;h++){var v=s[h]&255;a[v>>n.LUMINANCE_SHIFT]++}}var c=n.estimateBlackPoint(a);var w=r.getMatrix();for(var u=0;u<i;u++){var l=u*t;for(var h=0;h<t;h++){var v=w[l+h]&255;if(v<c){e.set(h,u)}}}return e};n.prototype.createBinarizer=function(r){return new n(r)};n.prototype.initArrays=function(r){if(this.luminances.length<r){this.luminances=new Uint8ClampedArray(r)}var t=this.buckets;for(var i=0;i<n.LUMINANCE_BUCKETS;i++){t[i]=0}};n.estimateBlackPoint=function(r){var t=r.length;var i=0;var e=0;var a=0;for(var u=0;u<t;u++){if(r[u]>a){e=u;a=r[u]}if(r[u]>i){i=r[u]}}var f=0;var s=0;for(var u=0;u<t;u++){var o=u-e;var h=r[u]*o*o;if(h>s){f=u;s=h}}if(e>f){var v=e;e=f;f=v}if(f-e<=t/16){throw new N}var c=f-1;var w=-1;for(var u=f-1;u>e;u--){var l=u-e;var h=l*l*(f-u)*(i-r[u]);if(h>w){c=u;w=h}}return c<<n.LUMINANCE_SHIFT};return n}(c);O.LUMINANCE_BITS=5;O.LUMINANCE_SHIFT=8-O.LUMINANCE_BITS;O.LUMINANCE_BUCKETS=1<<O.LUMINANCE_BITS;O.EMPTY=Uint8ClampedArray.from([0]);var T=function(r){i(n,r);function n(n){var t=r.call(this,n)||this;t.matrix=null;return t}n.prototype.getBlackMatrix=function(){if(this.matrix!==null){return this.matrix}var t=this.getLuminanceSource();var i=t.getWidth();var e=t.getHeight();if(i>=n.MINIMUM_DIMENSION&&e>=n.MINIMUM_DIMENSION){var a=t.getMatrix();var u=i>>n.BLOCK_SIZE_POWER;if((i&n.BLOCK_SIZE_MASK)!==0){u++}var f=e>>n.BLOCK_SIZE_POWER;if((e&n.BLOCK_SIZE_MASK)!==0){f++}var s=n.calculateBlackPoints(a,u,f,i,e);var o=new C(i,e);n.calculateThresholdForBlock(a,u,f,i,e,s,o);this.matrix=o}else{this.matrix=r.prototype.getBlackMatrix.call(this)}return this.matrix};n.prototype.createBinarizer=function(r){return new n(r)};n.calculateThresholdForBlock=function(r,t,i,e,a,u,f){var s=a-n.BLOCK_SIZE;var o=e-n.BLOCK_SIZE;for(var h=0;h<i;h++){var v=h<<n.BLOCK_SIZE_POWER;if(v>s){v=s}var c=n.cap(h,2,i-3);for(var w=0;w<t;w++){var l=w<<n.BLOCK_SIZE_POWER;if(l>o){l=o}var d=n.cap(w,2,t-3);var y=0;for(var A=-2;A<=2;A++){var I=u[c+A];y+=I[d-2]+I[d-1]+I[d]+I[d+1]+I[d+2]}var b=y/25;n.thresholdBlock(r,l,v,b,e,f)}}};n.cap=function(r,n,t){return r<n?n:r>t?t:r};n.thresholdBlock=function(r,t,i,e,a,u){for(var f=0,s=i*a+t;f<n.BLOCK_SIZE;f++,s+=a){for(var o=0;o<n.BLOCK_SIZE;o++){if((r[s+o]&255)<=e){u.set(t+o,i+f)}}}};n.calculateBlackPoints=function(r,t,i,e,a){var u=a-n.BLOCK_SIZE;var f=e-n.BLOCK_SIZE;var s=new Array(i);for(var o=0;o<i;o++){s[o]=new Int32Array(t);var h=o<<n.BLOCK_SIZE_POWER;if(h>u){h=u}for(var v=0;v<t;v++){var c=v<<n.BLOCK_SIZE_POWER;if(c>f){c=f}var w=0;var l=255;var d=0;for(var y=0,A=h*e+c;y<n.BLOCK_SIZE;y++,A+=e){for(var I=0;I<n.BLOCK_SIZE;I++){var b=r[A+I]&255;w+=b;if(b<l){l=b}if(b>d){d=b}}if(d-l>n.MIN_DYNAMIC_RANGE){for(y++,A+=e;y<n.BLOCK_SIZE;y++,A+=e){for(var I=0;I<n.BLOCK_SIZE;I++){w+=r[A+I]&255}}}}var p=w>>n.BLOCK_SIZE_POWER*2;if(d-l<=n.MIN_DYNAMIC_RANGE){p=l/2;if(o>0&&v>0){var M=(s[o-1][v]+2*s[o][v-1]+s[o-1][v-1])/4;if(l<M){p=M}}}s[o][v]=p}}return s};return n}(O);T.BLOCK_SIZE_POWER=3;T.BLOCK_SIZE=1<<T.BLOCK_SIZE_POWER;T.BLOCK_SIZE_MASK=T.BLOCK_SIZE-1;T.MINIMUM_DIMENSION=T.BLOCK_SIZE*5;T.MIN_DYNAMIC_RANGE=24;var R=function(){function r(r,n){this.width=r;this.height=n}r.prototype.getWidth=function(){return this.width};r.prototype.getHeight=function(){return this.height};r.prototype.isCropSupported=function(){return false};r.prototype.crop=function(r,n,t,i){throw new k("This luminance source does not support cropping.")};r.prototype.isRotateSupported=function(){return false};r.prototype.rotateCounterClockwise=function(){throw new k("This luminance source does not support rotation by 90 degrees.")};r.prototype.rotateCounterClockwise45=function(){throw new k("This luminance source does not support rotation by 45 degrees.")};r.prototype.toString=function(){var r=new Uint8ClampedArray(this.width);var n=new E;for(var t=0;t<this.height;t++){var i=this.getRow(t,r);for(var e=0;e<this.width;e++){var a=i[e]&255;var u=void 0;if(a<64){u="#"}else if(a<128){u="+"}else if(a<192){u="."}else{u=" "}n.append(u)}n.append("\n")}return n.toString()};return r}();var P=function(r){i(n,r);function n(n){var t=r.call(this,n.getWidth(),n.getHeight())||this;t.delegate=n;return t}n.prototype.getRow=function(r,n){var t=this.delegate.getRow(r,n);var i=this.getWidth();for(var e=0;e<i;e++){t[e]=255-(t[e]&255)}return t};n.prototype.getMatrix=function(){var r=this.delegate.getMatrix();var n=this.getWidth()*this.getHeight();var t=new Uint8ClampedArray(n);for(var i=0;i<n;i++){t[i]=255-(r[i]&255)}return t};n.prototype.isCropSupported=function(){return this.delegate.isCropSupported()};n.prototype.crop=function(r,t,i,e){return new n(this.delegate.crop(r,t,i,e))};n.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()};n.prototype.invert=function(){return this.delegate};n.prototype.rotateCounterClockwise=function(){return new n(this.delegate.rotateCounterClockwise())};n.prototype.rotateCounterClockwise45=function(){return new n(this.delegate.rotateCounterClockwise45())};return n}(R);var D=function(r){i(n,r);function n(t){var i=r.call(this,t.width,t.height)||this;i.canvas=t;i.tempCanvasElement=null;i.buffer=n.makeBufferFromCanvasImageData(t);return i}n.makeBufferFromCanvasImageData=function(r){var t=r.getContext("2d").getImageData(0,0,r.width,r.height);return n.toGrayscaleBuffer(t.data,r.width,r.height)};n.toGrayscaleBuffer=function(r,n,t){var i=new Uint8ClampedArray(n*t);for(var e=0,a=0,u=r.length;e<u;e+=4,a++){var f=void 0;var s=r[e+3];if(s===0){f=255}else{var o=r[e];var h=r[e+1];var v=r[e+2];f=306*o+601*h+117*v+512>>10}i[a]=f}return i};n.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight()){throw new o("Requested row is outside the image: "+r)}var t=this.getWidth();var i=r*t;if(n===null){n=this.buffer.slice(i,i+t)}else{if(n.length<t){n=new Uint8ClampedArray(t)}n.set(this.buffer.slice(i,i+t))}return n};n.prototype.getMatrix=function(){return this.buffer};n.prototype.isCropSupported=function(){return true};n.prototype.crop=function(n,t,i,e){r.prototype.crop.call(this,n,t,i,e);return this};n.prototype.isRotateSupported=function(){return true};n.prototype.rotateCounterClockwise=function(){this.rotate(-90);return this};n.prototype.rotateCounterClockwise45=function(){this.rotate(-45);return this};n.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width;r.height=this.canvas.height;this.tempCanvasElement=r}return this.tempCanvasElement};n.prototype.rotate=function(r){var t=this.getTempCanvasElement();var i=t.getContext("2d");var e=r*n.DEGREE_TO_RADIANS;var a=this.canvas.width;var u=this.canvas.height;var f=Math.ceil(Math.abs(Math.cos(e))*a+Math.abs(Math.sin(e))*u);var s=Math.ceil(Math.abs(Math.sin(e))*a+Math.abs(Math.cos(e))*u);t.width=f;t.height=s;i.translate(f/2,s/2);i.rotate(e);i.drawImage(this.canvas,a/-2,u/-2);this.buffer=n.makeBufferFromCanvasImageData(t);return this};n.prototype.invert=function(){return new P(this)};return n}(R);D.DEGREE_TO_RADIANS=Math.PI/180;var U=function(){function r(r,n,t){this.deviceId=r;this.label=n;this.kind="videoinput";this.groupId=t||undefined}r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}};return r}();var x=(globalThis||F||self||window||undefined)&&(globalThis||F||self||window||undefined).__awaiter||function(r,n,t,i){function e(r){return r instanceof t?r:new t((function(n){n(r)}))}return new(t||(t=Promise))((function(t,a){function u(r){try{s(i.next(r))}catch(r){a(r)}}function f(r){try{s(i["throw"](r))}catch(r){a(r)}}function s(r){r.done?t(r.value):e(r.value).then(u,f)}s((i=i.apply(r,n||[])).next())}))};var L=function(){function r(r,n,t){if(n===void 0){n=500}this.reader=r;this.timeBetweenScansMillis=n;this._hints=t;this._stopContinuousDecode=false;this._stopAsyncDecode=false;this._timeBetweenDecodingAttempts=0}Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator!=="undefined"},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(r){this._timeBetweenDecodingAttempts=r<0?0:r},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(r){this._hints=r||null},enumerable:false,configurable:true});r.prototype.listVideoInputDevices=function(){return x(this,void 0,void 0,(function(){var r,n,t,i,e,a,u,f,s,o;return or(this,(function(h){switch(h.label){case 0:if(!this.hasNavigator){throw new Error("Can't enumerate devices, navigator is not present.")}if(!this.canEnumerateDevices){throw new Error("Can't enumerate devices, method not supported.")}return[4,navigator.mediaDevices.enumerateDevices()];case 1:r=h.sent();n=[];for(t=0,i=r;t<i.length;t++){e=i[t];a=e.kind==="video"?"videoinput":e.kind;if(a!=="videoinput"){continue}u=e.deviceId||e.id;f=e.label||"Video device ".concat(n.length+1);s=e.groupId;o={deviceId:u,label:f,kind:a,groupId:s};n.push(o)}return[2,n]}}))}))};r.prototype.getVideoInputDevices=function(){return x(this,void 0,void 0,(function(){var r;return or(this,(function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:r=n.sent();return[2,r.map((function(r){return new U(r.deviceId,r.label)}))]}}))}))};r.prototype.findDeviceById=function(r){return x(this,void 0,void 0,(function(){var n;return or(this,(function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:n=t.sent();if(!n){return[2,null]}return[2,n.find((function(n){return n.deviceId===r}))]}}))}))};r.prototype.decodeFromInputVideoDevice=function(r,n){return x(this,void 0,void 0,(function(){return or(this,(function(t){switch(t.label){case 0:return[4,this.decodeOnceFromVideoDevice(r,n)];case 1:return[2,t.sent()]}}))}))};r.prototype.decodeOnceFromVideoDevice=function(r,n){return x(this,void 0,void 0,(function(){var t,i;return or(this,(function(e){switch(e.label){case 0:this.reset();if(!r){t={facingMode:"environment"}}else{t={deviceId:{exact:r}}}i={video:t};return[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,e.sent()]}}))}))};r.prototype.decodeOnceFromConstraints=function(r,n){return x(this,void 0,void 0,(function(){var t;return or(this,(function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(r)];case 1:t=i.sent();return[4,this.decodeOnceFromStream(t,n)];case 2:return[2,i.sent()]}}))}))};r.prototype.decodeOnceFromStream=function(r,n){return x(this,void 0,void 0,(function(){var t,i;return or(this,(function(e){switch(e.label){case 0:this.reset();return[4,this.attachStreamToVideo(r,n)];case 1:t=e.sent();return[4,this.decodeOnce(t)];case 2:i=e.sent();return[2,i]}}))}))};r.prototype.decodeFromInputVideoDeviceContinuously=function(r,n,t){return x(this,void 0,void 0,(function(){return or(this,(function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(r,n,t)];case 1:return[2,i.sent()]}}))}))};r.prototype.decodeFromVideoDevice=function(r,n,t){return x(this,void 0,void 0,(function(){var i,e;return or(this,(function(a){switch(a.label){case 0:if(!r){i={facingMode:"environment"}}else{i={deviceId:{exact:r}}}e={video:i};return[4,this.decodeFromConstraints(e,n,t)];case 1:return[2,a.sent()]}}))}))};r.prototype.decodeFromConstraints=function(r,n,t){return x(this,void 0,void 0,(function(){var i;return or(this,(function(e){switch(e.label){case 0:return[4,navigator.mediaDevices.getUserMedia(r)];case 1:i=e.sent();return[4,this.decodeFromStream(i,n,t)];case 2:return[2,e.sent()]}}))}))};r.prototype.decodeFromStream=function(r,n,t){return x(this,void 0,void 0,(function(){var i;return or(this,(function(e){switch(e.label){case 0:this.reset();return[4,this.attachStreamToVideo(r,n)];case 1:i=e.sent();return[4,this.decodeContinuously(i,t)];case 2:return[2,e.sent()]}}))}))};r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=true};r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=true};r.prototype.attachStreamToVideo=function(r,n){return x(this,void 0,void 0,(function(){var t;return or(this,(function(i){switch(i.label){case 0:t=this.prepareVideoElement(n);this.addVideoSource(t,r);this.videoElement=t;this.stream=r;return[4,this.playVideoOnLoadAsync(t)];case 1:i.sent();return[2,t]}}))}))};r.prototype.playVideoOnLoadAsync=function(r){var n=this;return new Promise((function(t,i){return n.playVideoOnLoad(r,(function(){return t()}))}))};r.prototype.playVideoOnLoad=function(r,n){var t=this;this.videoEndedListener=function(){return t.stopStreams()};this.videoCanPlayListener=function(){return t.tryPlayVideo(r)};r.addEventListener("ended",this.videoEndedListener);r.addEventListener("canplay",this.videoCanPlayListener);r.addEventListener("playing",n);this.tryPlayVideo(r)};r.prototype.isVideoPlaying=function(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2};r.prototype.tryPlayVideo=function(r){return x(this,void 0,void 0,(function(){var n;return or(this,(function(t){switch(t.label){case 0:if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return[2]}t.label=1;case 1:t.trys.push([1,3,,4]);return[4,r.play()];case 2:t.sent();return[3,4];case 3:n=t.sent();console.warn("It was not possible to play the video.");return[3,4];case 4:return[2]}}))}))};r.prototype.getMediaElement=function(r,n){var t=document.getElementById(r);if(!t){throw new s("element with id '".concat(r,"' not found"))}if(t.nodeName.toLowerCase()!==n.toLowerCase()){throw new s("element with id '".concat(r,"' must be an ").concat(n," element"))}return t};r.prototype.decodeFromImage=function(r,n){if(!r&&!n){throw new s("either imageElement with a src set or an url must be provided")}if(n&&!r){return this.decodeFromImageUrl(n)}return this.decodeFromImageElement(r)};r.prototype.decodeFromVideo=function(r,n){if(!r&&!n){throw new s("Either an element with a src set or an URL must be provided")}if(n&&!r){return this.decodeFromVideoUrl(n)}return this.decodeFromVideoElement(r)};r.prototype.decodeFromVideoContinuously=function(r,n,t){if(undefined===r&&undefined===n){throw new s("Either an element with a src set or an URL must be provided")}if(n&&!r){return this.decodeFromVideoUrlContinuously(n,t)}return this.decodeFromVideoElementContinuously(r,t)};r.prototype.decodeFromImageElement=function(r){if(!r){throw new s("An image element must be provided.")}this.reset();var n=this.prepareImageElement(r);this.imageElement=n;var t;if(this.isImageLoaded(n)){t=this.decodeOnce(n,false,true)}else{t=this._decodeOnLoadImage(n)}return t};r.prototype.decodeFromVideoElement=function(r){var n=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(n)};r.prototype.decodeFromVideoElementContinuously=function(r,n){var t=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(t,n)};r.prototype._decodeFromVideoElementSetup=function(r){if(!r){throw new s("A video element must be provided.")}this.reset();var n=this.prepareVideoElement(r);this.videoElement=n;return n};r.prototype.decodeFromImageUrl=function(r){if(!r){throw new s("An URL must be provided.")}this.reset();var n=this.prepareImageElement();this.imageElement=n;var t=this._decodeOnLoadImage(n);n.src=r;return t};r.prototype.decodeFromVideoUrl=function(r){if(!r){throw new s("An URL must be provided.")}this.reset();var n=this.prepareVideoElement();var t=this.decodeFromVideoElement(n);n.src=r;return t};r.prototype.decodeFromVideoUrlContinuously=function(r,n){if(!r){throw new s("An URL must be provided.")}this.reset();var t=this.prepareVideoElement();var i=this.decodeFromVideoElementContinuously(t,n);t.src=r;return i};r.prototype._decodeOnLoadImage=function(r){var n=this;return new Promise((function(t,i){n.imageLoadedListener=function(){return n.decodeOnce(r,false,true).then(t,i)};r.addEventListener("load",n.imageLoadedListener)}))};r.prototype._decodeOnLoadVideo=function(r){return x(this,void 0,void 0,(function(){return or(this,(function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(r)];case 1:n.sent();return[4,this.decodeOnce(r)];case 2:return[2,n.sent()]}}))}))};r.prototype._decodeOnLoadVideoContinuously=function(r,n){return x(this,void 0,void 0,(function(){return or(this,(function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(r)];case 1:t.sent();this.decodeContinuously(r,n);return[2]}}))}))};r.prototype.isImageLoaded=function(r){if(!r.complete){return false}if(r.naturalWidth===0){return false}return true};r.prototype.prepareImageElement=function(r){var n;if(typeof r==="undefined"){n=document.createElement("img");n.width=200;n.height=200}if(typeof r==="string"){n=this.getMediaElement(r,"img")}if(r instanceof HTMLImageElement){n=r}return n};r.prototype.prepareVideoElement=function(r){var n;if(!r&&typeof document!=="undefined"){n=document.createElement("video");n.width=200;n.height=200}if(typeof r==="string"){n=this.getMediaElement(r,"video")}if(r instanceof HTMLVideoElement){n=r}n.setAttribute("autoplay","true");n.setAttribute("muted","true");n.setAttribute("playsinline","true");return n};r.prototype.decodeOnce=function(r,n,t){var i=this;if(n===void 0){n=true}if(t===void 0){t=true}this._stopAsyncDecode=false;var e=function(a,u){if(i._stopAsyncDecode){u(new N("Video stream has ended before any code could be detected."));i._stopAsyncDecode=undefined;return}try{var f=i.decode(r);a(f)}catch(r){var s=n&&r instanceof N;var o=r instanceof v||r instanceof M;var h=o&&t;if(s||h){return setTimeout(e,i._timeBetweenDecodingAttempts,a,u)}u(r)}};return new Promise((function(r,n){return e(r,n)}))};r.prototype.decodeContinuously=function(r,n){var t=this;this._stopContinuousDecode=false;var i=function(){if(t._stopContinuousDecode){t._stopContinuousDecode=undefined;return}try{var e=t.decode(r);n(e,null);setTimeout(i,t.timeBetweenScansMillis)}catch(r){n(null,r);var a=r instanceof v||r instanceof M;var u=r instanceof N;if(a||u){setTimeout(i,t._timeBetweenDecodingAttempts)}}};i()};r.prototype.decode=function(r){var n=this.createBinaryBitmap(r);return this.decodeBitmap(n)};r.prototype._isHTMLVideoElement=function(r){var n=r;return n.videoWidth!==0};r.prototype.drawFrameOnCanvas=function(r,n,t){if(!n){n={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}}if(!t){t=this.captureCanvasContext}t.drawImage(r,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)};r.prototype.drawImageOnCanvas=function(r,n,t){if(t===void 0){t=this.captureCanvasContext}if(!n){n={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}}if(!t){t=this.captureCanvasContext}t.drawImage(r,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)};r.prototype.createBinaryBitmap=function(r){this.getCaptureCanvasContext(r);if(this._isHTMLVideoElement(r)){this.drawFrameOnCanvas(r)}else{this.drawImageOnCanvas(r)}var n=this.getCaptureCanvas(r);var t=new D(n);var i=new T(t);return new h(i)};r.prototype.getCaptureCanvasContext=function(r){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(r);var t=n.getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext};r.prototype.getCaptureCanvas=function(r){if(!this.captureCanvas){var n=this.createCaptureCanvas(r);this.captureCanvas=n}return this.captureCanvas};r.prototype.decodeBitmap=function(r){return this.reader.decode(r,this._hints)};r.prototype.createCaptureCanvas=function(r){if(typeof document==="undefined"){this._destroyCaptureCanvas();return null}var n=document.createElement("canvas");var t;var i;if(typeof r!=="undefined"){if(r instanceof HTMLVideoElement){t=r.videoWidth;i=r.videoHeight}else if(r instanceof HTMLImageElement){t=r.naturalWidth||r.width;i=r.naturalHeight||r.height}}n.style.width=t+"px";n.style.height=i+"px";n.width=t;n.height=i;return n};r.prototype.stopStreams=function(){if(this.stream){this.stream.getVideoTracks().forEach((function(r){return r.stop()}));this.stream=undefined}if(this._stopAsyncDecode===false){this.stopAsyncDecode()}if(this._stopContinuousDecode===false){this.stopContinuousDecode()}};r.prototype.reset=function(){this.stopStreams();this._destroyVideoElement();this._destroyImageElement();this._destroyCaptureCanvas()};r.prototype._destroyVideoElement=function(){if(!this.videoElement){return}if(typeof this.videoEndedListener!=="undefined"){this.videoElement.removeEventListener("ended",this.videoEndedListener)}if(typeof this.videoPlayingEventListener!=="undefined"){this.videoElement.removeEventListener("playing",this.videoPlayingEventListener)}if(typeof this.videoCanPlayListener!=="undefined"){this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener)}this.cleanVideoSource(this.videoElement);this.videoElement=undefined};r.prototype._destroyImageElement=function(){if(!this.imageElement){return}if(undefined!==this.imageLoadedListener){this.imageElement.removeEventListener("load",this.imageLoadedListener)}this.imageElement.src=undefined;this.imageElement.removeAttribute("src");this.imageElement=undefined};r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=undefined;this.captureCanvas=undefined};r.prototype.addVideoSource=function(r,n){try{r.srcObject=n}catch(t){r.src=URL.createObjectURL(n)}};r.prototype.cleanVideoSource=function(r){try{r.srcObject=null}catch(n){r.src=""}this.videoElement.removeAttribute("src")};return r}();var G=function(){function r(r,n,t,i,e,a){if(t===void 0){t=n==null?0:8*n.length}if(a===void 0){a=w.currentTimeMillis()}this.text=r;this.rawBytes=n;this.numBits=t;this.resultPoints=i;this.format=e;this.timestamp=a;this.text=r;this.rawBytes=n;if(undefined===t||null===t){this.numBits=n===null||n===undefined?0:8*n.length}else{this.numBits=t}this.resultPoints=i;this.format=e;this.resultMetadata=null;if(undefined===a||null===a){this.timestamp=w.currentTimeMillis()}else{this.timestamp=a}}r.prototype.getText=function(){return this.text};r.prototype.getRawBytes=function(){return this.rawBytes};r.prototype.getNumBits=function(){return this.numBits};r.prototype.getResultPoints=function(){return this.resultPoints};r.prototype.getBarcodeFormat=function(){return this.format};r.prototype.getResultMetadata=function(){return this.resultMetadata};r.prototype.putMetadata=function(r,n){if(this.resultMetadata===null){this.resultMetadata=new Map}this.resultMetadata.set(r,n)};r.prototype.putAllMetadata=function(r){if(r!==null){if(this.resultMetadata===null){this.resultMetadata=r}else{this.resultMetadata=new Map(r)}}};r.prototype.addResultPoints=function(r){var n=this.resultPoints;if(n===null){this.resultPoints=r}else if(r!==null&&r.length>0){var t=new Array(n.length+r.length);w.arraycopy(n,0,t,0,n.length);w.arraycopy(r,0,t,n.length,r.length);this.resultPoints=t}};r.prototype.getTimestamp=function(){return this.timestamp};r.prototype.toString=function(){return this.text};return r}();var B;(function(r){r[r["AZTEC"]=0]="AZTEC";r[r["CODABAR"]=1]="CODABAR";r[r["CODE_39"]=2]="CODE_39";r[r["CODE_93"]=3]="CODE_93";r[r["CODE_128"]=4]="CODE_128";r[r["DATA_MATRIX"]=5]="DATA_MATRIX";r[r["EAN_8"]=6]="EAN_8";r[r["EAN_13"]=7]="EAN_13";r[r["ITF"]=8]="ITF";r[r["MAXICODE"]=9]="MAXICODE";r[r["PDF_417"]=10]="PDF_417";r[r["QR_CODE"]=11]="QR_CODE";r[r["RSS_14"]=12]="RSS_14";r[r["RSS_EXPANDED"]=13]="RSS_EXPANDED";r[r["UPC_A"]=14]="UPC_A";r[r["UPC_E"]=15]="UPC_E";r[r["UPC_EAN_EXTENSION"]=16]="UPC_EAN_EXTENSION"})(B||(B={}));var j=B;var W;(function(r){r[r["OTHER"]=0]="OTHER";r[r["ORIENTATION"]=1]="ORIENTATION";r[r["BYTE_SEGMENTS"]=2]="BYTE_SEGMENTS";r[r["ERROR_CORRECTION_LEVEL"]=3]="ERROR_CORRECTION_LEVEL";r[r["ISSUE_NUMBER"]=4]="ISSUE_NUMBER";r[r["SUGGESTED_PRICE"]=5]="SUGGESTED_PRICE";r[r["POSSIBLE_COUNTRY"]=6]="POSSIBLE_COUNTRY";r[r["UPC_EAN_EXTENSION"]=7]="UPC_EAN_EXTENSION";r[r["PDF417_EXTRA_METADATA"]=8]="PDF417_EXTRA_METADATA";r[r["STRUCTURED_APPEND_SEQUENCE"]=9]="STRUCTURED_APPEND_SEQUENCE";r[r["STRUCTURED_APPEND_PARITY"]=10]="STRUCTURED_APPEND_PARITY"})(W||(W={}));var H=W;var q=function(){function r(r,n,t,i,e,a){if(e===void 0){e=-1}if(a===void 0){a=-1}this.rawBytes=r;this.text=n;this.byteSegments=t;this.ecLevel=i;this.structuredAppendSequenceNumber=e;this.structuredAppendParity=a;this.numBits=r===undefined||r===null?0:8*r.length}r.prototype.getRawBytes=function(){return this.rawBytes};r.prototype.getNumBits=function(){return this.numBits};r.prototype.setNumBits=function(r){this.numBits=r};r.prototype.getText=function(){return this.text};r.prototype.getByteSegments=function(){return this.byteSegments};r.prototype.getECLevel=function(){return this.ecLevel};r.prototype.getErrorsCorrected=function(){return this.errorsCorrected};r.prototype.setErrorsCorrected=function(r){this.errorsCorrected=r};r.prototype.getErasures=function(){return this.erasures};r.prototype.setErasures=function(r){this.erasures=r};r.prototype.getOther=function(){return this.other};r.prototype.setOther=function(r){this.other=r};r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0};r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity};r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber};return r}();var X=function(){function r(){}r.prototype.exp=function(r){return this.expTable[r]};r.prototype.log=function(r){if(r===0){throw new o}return this.logTable[r]};r.addOrSubtract=function(r,n){return r^n};return r}();var K=function(){function r(r,n){if(n.length===0){throw new o}this.field=r;var t=n.length;if(t>1&&n[0]===0){var i=1;while(i<t&&n[i]===0){i++}if(i===t){this.coefficients=Int32Array.from([0])}else{this.coefficients=new Int32Array(t-i);w.arraycopy(n,i,this.coefficients,0,this.coefficients.length)}}else{this.coefficients=n}}r.prototype.getCoefficients=function(){return this.coefficients};r.prototype.getDegree=function(){return this.coefficients.length-1};r.prototype.isZero=function(){return this.coefficients[0]===0};r.prototype.getCoefficient=function(r){return this.coefficients[this.coefficients.length-1-r]};r.prototype.evaluateAt=function(r){if(r===0){return this.getCoefficient(0)}var n=this.coefficients;var t;if(r===1){t=0;for(var i=0,e=n.length;i!==e;i++){var a=n[i];t=X.addOrSubtract(t,a)}return t}t=n[0];var u=n.length;var f=this.field;for(var i=1;i<u;i++){t=X.addOrSubtract(f.multiply(r,t),n[i])}return t};r.prototype.addOrSubtract=function(n){if(!this.field.equals(n.field)){throw new o("GenericGFPolys do not have same GenericGF field")}if(this.isZero()){return n}if(n.isZero()){return this}var t=this.coefficients;var i=n.coefficients;if(t.length>i.length){var e=t;t=i;i=e}var a=new Int32Array(i.length);var u=i.length-t.length;w.arraycopy(i,0,a,0,u);for(var f=u;f<i.length;f++){a[f]=X.addOrSubtract(t[f-u],i[f])}return new r(this.field,a)};r.prototype.multiply=function(n){if(!this.field.equals(n.field)){throw new o("GenericGFPolys do not have same GenericGF field")}if(this.isZero()||n.isZero()){return this.field.getZero()}var t=this.coefficients;var i=t.length;var e=n.coefficients;var a=e.length;var u=new Int32Array(i+a-1);var f=this.field;for(var s=0;s<i;s++){var h=t[s];for(var v=0;v<a;v++){u[s+v]=X.addOrSubtract(u[s+v],f.multiply(h,e[v]))}}return new r(f,u)};r.prototype.multiplyScalar=function(n){if(n===0){return this.field.getZero()}if(n===1){return this}var t=this.coefficients.length;var i=this.field;var e=new Int32Array(t);var a=this.coefficients;for(var u=0;u<t;u++){e[u]=i.multiply(a[u],n)}return new r(i,e)};r.prototype.multiplyByMonomial=function(n,t){if(n<0){throw new o}if(t===0){return this.field.getZero()}var i=this.coefficients;var e=i.length;var a=new Int32Array(e+n);var u=this.field;for(var f=0;f<e;f++){a[f]=u.multiply(i[f],t)}return new r(u,a)};r.prototype.divide=function(r){if(!this.field.equals(r.field)){throw new o("GenericGFPolys do not have same GenericGF field")}if(r.isZero()){throw new o("Divide by 0")}var n=this.field;var t=n.getZero();var i=this;var e=r.getCoefficient(r.getDegree());var a=n.inverse(e);while(i.getDegree()>=r.getDegree()&&!i.isZero()){var u=i.getDegree()-r.getDegree();var f=n.multiply(i.getCoefficient(i.getDegree()),a);var s=r.multiplyByMonomial(u,f);var h=n.buildMonomial(u,f);t=t.addOrSubtract(h);i=i.addOrSubtract(s)}return[t,i]};r.prototype.toString=function(){var r="";for(var n=this.getDegree();n>=0;n--){var t=this.getCoefficient(n);if(t!==0){if(t<0){r+=" - ";t=-t}else{if(r.length>0){r+=" + "}}if(n===0||t!==1){var i=this.field.log(t);if(i===0){r+="1"}else if(i===1){r+="a"}else{r+="a^";r+=i}}if(n!==0){if(n===1){r+="x"}else{r+="x^";r+=n}}}}return r};return r}();var Q=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(f);Q.kind="ArithmeticException";var z=function(r){i(n,r);function n(n,t,i){var e=r.call(this)||this;e.primitive=n;e.size=t;e.generatorBase=i;var a=new Int32Array(t);var u=1;for(var f=0;f<t;f++){a[f]=u;u*=2;if(u>=t){u^=n;u&=t-1}}e.expTable=a;var s=new Int32Array(t);for(var f=0;f<t-1;f++){s[a[f]]=f}e.logTable=s;e.zero=new K(e,Int32Array.from([0]));e.one=new K(e,Int32Array.from([1]));return e}n.prototype.getZero=function(){return this.zero};n.prototype.getOne=function(){return this.one};n.prototype.buildMonomial=function(r,n){if(r<0){throw new o}if(n===0){return this.zero}var t=new Int32Array(r+1);t[0]=n;return new K(this,t)};n.prototype.inverse=function(r){if(r===0){throw new Q}return this.expTable[this.size-this.logTable[r]-1]};n.prototype.multiply=function(r,n){if(r===0||n===0){return 0}return this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]};n.prototype.getSize=function(){return this.size};n.prototype.getGeneratorBase=function(){return this.generatorBase};n.prototype.toString=function(){return"GF(0x"+A.toHexString(this.primitive)+","+this.size+")"};n.prototype.equals=function(r){return r===this};return n}(X);z.AZTEC_DATA_12=new z(4201,4096,1);z.AZTEC_DATA_10=new z(1033,1024,1);z.AZTEC_DATA_6=new z(67,64,1);z.AZTEC_PARAM=new z(19,16,1);z.QR_CODE_FIELD_256=new z(285,256,0);z.DATA_MATRIX_FIELD_256=new z(301,256,1);z.AZTEC_DATA_8=z.DATA_MATRIX_FIELD_256;z.MAXICODE_FIELD_64=z.AZTEC_DATA_6;var Z=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(f);Z.kind="ReedSolomonException";var Y=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(f);Y.kind="IllegalStateException";var J=function(){function r(r){this.field=r}r.prototype.decode=function(r,n){var t=this.field;var i=new K(t,r);var e=new Int32Array(n);var a=true;for(var u=0;u<n;u++){var f=i.evaluateAt(t.exp(u+t.getGeneratorBase()));e[e.length-1-u]=f;if(f!==0){a=false}}if(a){return}var s=new K(t,e);var o=this.runEuclideanAlgorithm(t.buildMonomial(n,1),s,n);var h=o[0];var v=o[1];var c=this.findErrorLocations(h);var w=this.findErrorMagnitudes(v,c);for(var u=0;u<c.length;u++){var l=r.length-1-t.log(c[u]);if(l<0){throw new Z("Bad error location")}r[l]=z.addOrSubtract(r[l],w[u])}};r.prototype.runEuclideanAlgorithm=function(r,n,t){if(r.getDegree()<n.getDegree()){var i=r;r=n;n=i}var e=this.field;var a=r;var u=n;var f=e.getZero();var s=e.getOne();while(u.getDegree()>=(t/2|0)){var o=a;var h=f;a=u;f=s;if(a.isZero()){throw new Z("r_{i-1} was zero")}u=o;var v=e.getZero();var c=a.getCoefficient(a.getDegree());var w=e.inverse(c);while(u.getDegree()>=a.getDegree()&&!u.isZero()){var l=u.getDegree()-a.getDegree();var d=e.multiply(u.getCoefficient(u.getDegree()),w);v=v.addOrSubtract(e.buildMonomial(l,d));u=u.addOrSubtract(a.multiplyByMonomial(l,d))}s=v.multiply(f).addOrSubtract(h);if(u.getDegree()>=a.getDegree()){throw new Y("Division algorithm failed to reduce polynomial?")}}var y=s.getCoefficient(0);if(y===0){throw new Z("sigmaTilde(0) was zero")}var A=e.inverse(y);var I=s.multiplyScalar(A);var b=u.multiplyScalar(A);return[I,b]};r.prototype.findErrorLocations=function(r){var n=r.getDegree();if(n===1){return Int32Array.from([r.getCoefficient(1)])}var t=new Int32Array(n);var i=0;var e=this.field;for(var a=1;a<e.getSize()&&i<n;a++){if(r.evaluateAt(a)===0){t[i]=e.inverse(a);i++}}if(i!==n){throw new Z("Error locator degree does not match number of roots")}return t};r.prototype.findErrorMagnitudes=function(r,n){var t=n.length;var i=new Int32Array(t);var e=this.field;for(var a=0;a<t;a++){var u=e.inverse(n[a]);var f=1;for(var s=0;s<t;s++){if(a!==s){var o=e.multiply(n[s],u);var h=(o&1)===0?o|1:o&~1;f=e.multiply(f,h)}}i[a]=e.multiply(r.evaluateAt(u),e.inverse(f));if(e.getGeneratorBase()!==0){i[a]=e.multiply(i[a],u)}}return i};return r}();var V;(function(r){r[r["UPPER"]=0]="UPPER";r[r["LOWER"]=1]="LOWER";r[r["MIXED"]=2]="MIXED";r[r["DIGIT"]=3]="DIGIT";r[r["PUNCT"]=4]="PUNCT";r[r["BINARY"]=5]="BINARY"})(V||(V={}));var $=function(){function r(){}r.prototype.decode=function(n){this.ddata=n;var t=n.getBits();var i=this.extractBits(t);var e=this.correctBits(i);var a=r.convertBoolArrayToByteArray(e);var u=r.getEncodedData(e);var f=new q(a,u,null,null);f.setNumBits(e.length);return f};r.highLevelDecode=function(r){return this.getEncodedData(r)};r.getEncodedData=function(n){var t=n.length;var i=V.UPPER;var e=V.UPPER;var a="";var u=0;while(u<t){if(e===V.BINARY){if(t-u<5){break}var f=r.readCode(n,u,5);u+=5;if(f===0){if(t-u<11){break}f=r.readCode(n,u,11)+31;u+=11}for(var s=0;s<f;s++){if(t-u<8){u=t;break}var o=r.readCode(n,u,8);a+=S.castAsNonUtf8Char(o);u+=8}e=i}else{var h=e===V.DIGIT?4:5;if(t-u<h){break}var o=r.readCode(n,u,h);u+=h;var v=r.getCharacter(e,o);if(v.startsWith("CTRL_")){i=e;e=r.getTable(v.charAt(5));if(v.charAt(6)==="L"){i=e}}else{a+=v;e=i}}}return a};r.getTable=function(r){switch(r){case"L":return V.LOWER;case"P":return V.PUNCT;case"M":return V.MIXED;case"D":return V.DIGIT;case"B":return V.BINARY;case"U":default:return V.UPPER}};r.getCharacter=function(n,t){switch(n){case V.UPPER:return r.UPPER_TABLE[t];case V.LOWER:return r.LOWER_TABLE[t];case V.MIXED:return r.MIXED_TABLE[t];case V.PUNCT:return r.PUNCT_TABLE[t];case V.DIGIT:return r.DIGIT_TABLE[t];default:throw new Y("Bad table")}};r.prototype.correctBits=function(n){var t;var i;if(this.ddata.getNbLayers()<=2){i=6;t=z.AZTEC_DATA_6}else if(this.ddata.getNbLayers()<=8){i=8;t=z.AZTEC_DATA_8}else if(this.ddata.getNbLayers()<=22){i=10;t=z.AZTEC_DATA_10}else{i=12;t=z.AZTEC_DATA_12}var e=this.ddata.getNbDatablocks();var a=n.length/i;if(a<e){throw new M}var u=n.length%i;var f=new Int32Array(a);for(var s=0;s<a;s++,u+=i){f[s]=r.readCode(n,u,i)}try{var o=new J(t);o.decode(f,a-e)}catch(r){throw new M(r)}var h=(1<<i)-1;var v=0;for(var s=0;s<e;s++){var c=f[s];if(c===0||c===h){throw new M}else if(c===1||c===h-1){v++}}var w=new Array(e*i-v);var l=0;for(var s=0;s<e;s++){var c=f[s];if(c===1||c===h-1){w.fill(c>1,l,l+i-1);l+=i-1}else{for(var d=i-1;d>=0;--d){w[l++]=(c&1<<d)!==0}}}return w};r.prototype.extractBits=function(r){var n=this.ddata.isCompact();var t=this.ddata.getNbLayers();var i=(n?11:14)+t*4;var e=new Int32Array(i);var a=new Array(this.totalBitsInLayer(t,n));if(n){for(var u=0;u<e.length;u++){e[u]=u}}else{var f=i+1+2*A.truncDivision(A.truncDivision(i,2)-1,15);var s=i/2;var o=A.truncDivision(f,2);for(var u=0;u<s;u++){var h=u+A.truncDivision(u,15);e[s-u-1]=o-h-1;e[s+u]=o+h+1}}for(var u=0,v=0;u<t;u++){var c=(t-u)*4+(n?9:12);var w=u*2;var l=i-1-w;for(var d=0;d<c;d++){var y=d*2;for(var I=0;I<2;I++){a[v+y+I]=r.get(e[w+I],e[w+d]);a[v+2*c+y+I]=r.get(e[w+d],e[l-I]);a[v+4*c+y+I]=r.get(e[l-I],e[l-d]);a[v+6*c+y+I]=r.get(e[l-d],e[w+I])}}v+=c*8}return a};r.readCode=function(r,n,t){var i=0;for(var e=n;e<n+t;e++){i<<=1;if(r[e]){i|=1}}return i};r.readByte=function(n,t){var i=n.length-t;if(i>=8){return r.readCode(n,t,8)}return r.readCode(n,t,i)<<8-i};r.convertBoolArrayToByteArray=function(n){var t=new Uint8Array((n.length+7)/8);for(var i=0;i<t.length;i++){t[i]=r.readByte(n,8*i)}return t};r.prototype.totalBitsInLayer=function(r,n){return((n?88:112)+16*r)*r};return r}();$.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"];$.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"];$.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"];$.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"];$.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];var rr=function(){function r(){}r.round=function(r){if(NaN===r)return 0;if(r<=Number.MIN_SAFE_INTEGER)return Number.MIN_SAFE_INTEGER;if(r>=Number.MAX_SAFE_INTEGER)return Number.MAX_SAFE_INTEGER;return r+(r<0?-.5:.5)|0};r.distance=function(r,n,t,i){var e=r-t;var a=n-i;return Math.sqrt(e*e+a*a)};r.sum=function(r){var n=0;for(var t=0,i=r.length;t!==i;t++){var e=r[t];n+=e}return n};return r}();var nr=function(){function r(){}r.floatToIntBits=function(r){return r};return r}();nr.MAX_VALUE=Number.MAX_SAFE_INTEGER;var tr=function(){function r(r,n){this.x=r;this.y=n}r.prototype.getX=function(){return this.x};r.prototype.getY=function(){return this.y};r.prototype.equals=function(n){if(n instanceof r){var t=n;return this.x===t.x&&this.y===t.y}return false};r.prototype.hashCode=function(){return 31*nr.floatToIntBits(this.x)+nr.floatToIntBits(this.y)};r.prototype.toString=function(){return"("+this.x+","+this.y+")"};r.orderBestPatterns=function(r){var n=this.distance(r[0],r[1]);var t=this.distance(r[1],r[2]);var i=this.distance(r[0],r[2]);var e;var a;var u;if(t>=n&&t>=i){a=r[0];e=r[1];u=r[2]}else if(i>=t&&i>=n){a=r[1];e=r[0];u=r[2]}else{a=r[2];e=r[0];u=r[1]}if(this.crossProductZ(e,a,u)<0){var f=e;e=u;u=f}r[0]=e;r[1]=a;r[2]=u};r.distance=function(r,n){return rr.distance(r.x,r.y,n.x,n.y)};r.crossProductZ=function(r,n,t){var i=n.x;var e=n.y;return(t.x-i)*(r.y-e)-(t.y-e)*(r.x-i)};return r}();var ir=function(){function r(r,n){this.bits=r;this.points=n}r.prototype.getBits=function(){return this.bits};r.prototype.getPoints=function(){return this.points};return r}();var er=function(r){i(n,r);function n(n,t,i,e,a){var u=r.call(this,n,t)||this;u.compact=i;u.nbDatablocks=e;u.nbLayers=a;return u}n.prototype.getNbLayers=function(){return this.nbLayers};n.prototype.getNbDatablocks=function(){return this.nbDatablocks};n.prototype.isCompact=function(){return this.compact};return n}(ir);var ar=function(){function r(n,t,i,e){this.image=n;this.height=n.getHeight();this.width=n.getWidth();if(undefined===t||null===t){t=r.INIT_SIZE}if(undefined===i||null===i){i=n.getWidth()/2|0}if(undefined===e||null===e){e=n.getHeight()/2|0}var a=t/2|0;this.leftInit=i-a;this.rightInit=i+a;this.upInit=e-a;this.downInit=e+a;if(this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width){throw new N}}r.prototype.detect=function(){var r=this.leftInit;var n=this.rightInit;var t=this.upInit;var i=this.downInit;var e=false;var a=true;var u=false;var f=false;var s=false;var o=false;var h=false;var v=this.width;var c=this.height;while(a){a=false;var w=true;while((w||!f)&&n<v){w=this.containsBlackPoint(t,i,n,false);if(w){n++;a=true;f=true}else if(!f){n++}}if(n>=v){e=true;break}var l=true;while((l||!s)&&i<c){l=this.containsBlackPoint(r,n,i,true);if(l){i++;a=true;s=true}else if(!s){i++}}if(i>=c){e=true;break}var d=true;while((d||!o)&&r>=0){d=this.containsBlackPoint(t,i,r,false);if(d){r--;a=true;o=true}else if(!o){r--}}if(r<0){e=true;break}var y=true;while((y||!h)&&t>=0){y=this.containsBlackPoint(r,n,t,true);if(y){t--;a=true;h=true}else if(!h){t--}}if(t<0){e=true;break}if(a){u=true}}if(!e&&u){var A=n-r;var I=null;for(var b=1;I===null&&b<A;b++){I=this.getBlackPointOnSegment(r,i-b,r+b,i)}if(I==null){throw new N}var p=null;for(var b=1;p===null&&b<A;b++){p=this.getBlackPointOnSegment(r,t+b,r+b,t)}if(p==null){throw new N}var M=null;for(var b=1;M===null&&b<A;b++){M=this.getBlackPointOnSegment(n,t+b,n-b,t)}if(M==null){throw new N}var _=null;for(var b=1;_===null&&b<A;b++){_=this.getBlackPointOnSegment(n,i-b,n-b,i)}if(_==null){throw new N}return this.centerEdges(_,I,M,p)}else{throw new N}};r.prototype.getBlackPointOnSegment=function(r,n,t,i){var e=rr.round(rr.distance(r,n,t,i));var a=(t-r)/e;var u=(i-n)/e;var f=this.image;for(var s=0;s<e;s++){var o=rr.round(r+s*a);var h=rr.round(n+s*u);if(f.get(o,h)){return new tr(o,h)}}return null};r.prototype.centerEdges=function(n,t,i,e){var a=n.getX();var u=n.getY();var f=t.getX();var s=t.getY();var o=i.getX();var h=i.getY();var v=e.getX();var c=e.getY();var w=r.CORR;if(a<this.width/2){return[new tr(v-w,c+w),new tr(f+w,s+w),new tr(o-w,h-w),new tr(a+w,u-w)]}else{return[new tr(v+w,c+w),new tr(f+w,s-w),new tr(o-w,h+w),new tr(a-w,u-w)]}};r.prototype.containsBlackPoint=function(r,n,t,i){var e=this.image;if(i){for(var a=r;a<=n;a++){if(e.get(a,t)){return true}}}else{for(var u=r;u<=n;u++){if(e.get(t,u)){return true}}}return false};return r}();ar.INIT_SIZE=10;ar.CORR=1;var ur=function(){function r(){}r.checkAndNudgePoints=function(r,n){var t=r.getWidth();var i=r.getHeight();var e=true;for(var a=0;a<n.length&&e;a+=2){var u=Math.floor(n[a]);var f=Math.floor(n[a+1]);if(u<-1||u>t||f<-1||f>i){throw new N}e=false;if(u===-1){n[a]=0;e=true}else if(u===t){n[a]=t-1;e=true}if(f===-1){n[a+1]=0;e=true}else if(f===i){n[a+1]=i-1;e=true}}e=true;for(var a=n.length-2;a>=0&&e;a-=2){var u=Math.floor(n[a]);var f=Math.floor(n[a+1]);if(u<-1||u>t||f<-1||f>i){throw new N}e=false;if(u===-1){n[a]=0;e=true}else if(u===t){n[a]=t-1;e=true}if(f===-1){n[a+1]=0;e=true}else if(f===i){n[a+1]=i-1;e=true}}};return r}();var fr=function(){function r(r,n,t,i,e,a,u,f,s){this.a11=r;this.a21=n;this.a31=t;this.a12=i;this.a22=e;this.a32=a;this.a13=u;this.a23=f;this.a33=s}r.quadrilateralToQuadrilateral=function(n,t,i,e,a,u,f,s,o,h,v,c,w,l,d,y){var A=r.quadrilateralToSquare(n,t,i,e,a,u,f,s);var I=r.squareToQuadrilateral(o,h,v,c,w,l,d,y);return I.times(A)};r.prototype.transformPoints=function(r){var n=r.length;var t=this.a11;var i=this.a12;var e=this.a13;var a=this.a21;var u=this.a22;var f=this.a23;var s=this.a31;var o=this.a32;var h=this.a33;for(var v=0;v<n;v+=2){var c=r[v];var w=r[v+1];var l=e*c+f*w+h;r[v]=(t*c+a*w+s)/l;r[v+1]=(i*c+u*w+o)/l}};r.prototype.transformPointsWithValues=function(r,n){var t=this.a11;var i=this.a12;var e=this.a13;var a=this.a21;var u=this.a22;var f=this.a23;var s=this.a31;var o=this.a32;var h=this.a33;var v=r.length;for(var c=0;c<v;c++){var w=r[c];var l=n[c];var d=e*w+f*l+h;r[c]=(t*w+a*l+s)/d;n[c]=(i*w+u*l+o)/d}};r.squareToQuadrilateral=function(n,t,i,e,a,u,f,s){var o=n-i+a-f;var h=t-e+u-s;if(o===0&&h===0){return new r(i-n,a-i,n,e-t,u-e,t,0,0,1)}else{var v=i-a;var c=f-a;var w=e-u;var l=s-u;var d=v*l-c*w;var y=(o*l-c*h)/d;var A=(v*h-o*w)/d;return new r(i-n+y*i,f-n+A*f,n,e-t+y*e,s-t+A*s,t,y,A,1)}};r.quadrilateralToSquare=function(n,t,i,e,a,u,f,s){return r.squareToQuadrilateral(n,t,i,e,a,u,f,s).buildAdjoint()};r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)};r.prototype.times=function(n){return new r(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)};return r}();var sr=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}n.prototype.sampleGrid=function(r,n,t,i,e,a,u,f,s,o,h,v,c,w,l,d,y,A,I){var b=fr.quadrilateralToQuadrilateral(i,e,a,u,f,s,o,h,v,c,w,l,d,y,A,I);return this.sampleGridWithTransform(r,n,t,b)};n.prototype.sampleGridWithTransform=function(r,n,t,i){if(n<=0||t<=0){throw new N}var e=new C(n,t);var a=new Float32Array(2*n);for(var u=0;u<t;u++){var f=a.length;var s=u+.5;for(var o=0;o<f;o+=2){a[o]=o/2+.5;a[o+1]=s}i.transformPoints(a);ur.checkAndNudgePoints(r,a);try{for(var o=0;o<f;o+=2){if(r.get(Math.floor(a[o]),Math.floor(a[o+1]))){e.set(o/2,u)}}}catch(r){throw new N}}return e};return n}(ur);var hr=function(){function r(){}r.setGridSampler=function(n){r.gridSampler=n};r.getInstance=function(){return r.gridSampler};return r}();hr.gridSampler=new sr;var vr=function(){function r(r,n){this.x=r;this.y=n}r.prototype.toResultPoint=function(){return new tr(this.getX(),this.getY())};r.prototype.getX=function(){return this.x};r.prototype.getY=function(){return this.y};return r}();var cr=function(){function r(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]);this.image=r}r.prototype.detect=function(){return this.detectMirror(false)};r.prototype.detectMirror=function(r){var n=this.getMatrixCenter();var t=this.getBullsEyeCorners(n);if(r){var i=t[0];t[0]=t[2];t[2]=i}this.extractParameters(t);var e=this.sampleGrid(this.image,t[this.shift%4],t[(this.shift+1)%4],t[(this.shift+2)%4],t[(this.shift+3)%4]);var a=this.getMatrixCornerPoints(t);return new er(e,a,this.compact,this.nbDataBlocks,this.nbLayers)};r.prototype.extractParameters=function(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3])){throw new N}var n=2*this.nbCenterLayers;var t=new Int32Array([this.sampleLine(r[0],r[1],n),this.sampleLine(r[1],r[2],n),this.sampleLine(r[2],r[3],n),this.sampleLine(r[3],r[0],n)]);this.shift=this.getRotation(t,n);var i=0;for(var e=0;e<4;e++){var a=t[(this.shift+e)%4];if(this.compact){i<<=7;i+=a>>1&127}else{i<<=10;i+=(a>>2&31<<5)+(a>>1&31)}}var u=this.getCorrectedParameterData(i,this.compact);if(this.compact){this.nbLayers=(u>>6)+1;this.nbDataBlocks=(u&63)+1}else{this.nbLayers=(u>>11)+1;this.nbDataBlocks=(u&2047)+1}};r.prototype.getRotation=function(r,n){var t=0;r.forEach((function(r,i,e){var a=(r>>n-2<<1)+(r&1);t=(t<<3)+a}));t=((t&1)<<11)+(t>>1);for(var i=0;i<4;i++){if(A.bitCount(t^this.EXPECTED_CORNER_BITS[i])<=2){return i}}throw new N};r.prototype.getCorrectedParameterData=function(r,n){var t;var i;if(n){t=7;i=2}else{t=10;i=4}var e=t-i;var a=new Int32Array(t);for(var u=t-1;u>=0;--u){a[u]=r&15;r>>=4}try{var f=new J(z.AZTEC_PARAM);f.decode(a,e)}catch(r){throw new N}var s=0;for(var u=0;u<i;u++){s=(s<<4)+a[u]}return s};r.prototype.getBullsEyeCorners=function(r){var n=r;var t=r;var i=r;var e=r;var a=true;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var u=this.getFirstDifferent(n,a,1,-1);var f=this.getFirstDifferent(t,a,1,1);var s=this.getFirstDifferent(i,a,-1,1);var o=this.getFirstDifferent(e,a,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(o,u)*this.nbCenterLayers/(this.distancePoint(e,n)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(u,f,s,o)){break}}n=u;t=f;i=s;e=o;a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7){throw new N}this.compact=this.nbCenterLayers===5;var v=new tr(n.getX()+.5,n.getY()-.5);var c=new tr(t.getX()+.5,t.getY()+.5);var w=new tr(i.getX()-.5,i.getY()+.5);var l=new tr(e.getX()-.5,e.getY()-.5);return this.expandSquare([v,c,w,l],2*this.nbCenterLayers-3,2*this.nbCenterLayers)};r.prototype.getMatrixCenter=function(){var r;var n;var t;var i;try{var e=new ar(this.image).detect();r=e[0];n=e[1];t=e[2];i=e[3]}catch(e){var a=this.image.getWidth()/2;var u=this.image.getHeight()/2;r=this.getFirstDifferent(new vr(a+7,u-7),false,1,-1).toResultPoint();n=this.getFirstDifferent(new vr(a+7,u+7),false,1,1).toResultPoint();t=this.getFirstDifferent(new vr(a-7,u+7),false,-1,1).toResultPoint();i=this.getFirstDifferent(new vr(a-7,u-7),false,-1,-1).toResultPoint()}var f=rr.round((r.getX()+i.getX()+n.getX()+t.getX())/4);var s=rr.round((r.getY()+i.getY()+n.getY()+t.getY())/4);try{var e=new ar(this.image,15,f,s).detect();r=e[0];n=e[1];t=e[2];i=e[3]}catch(e){r=this.getFirstDifferent(new vr(f+7,s-7),false,1,-1).toResultPoint();n=this.getFirstDifferent(new vr(f+7,s+7),false,1,1).toResultPoint();t=this.getFirstDifferent(new vr(f-7,s+7),false,-1,1).toResultPoint();i=this.getFirstDifferent(new vr(f-7,s-7),false,-1,-1).toResultPoint()}f=rr.round((r.getX()+i.getX()+n.getX()+t.getX())/4);s=rr.round((r.getY()+i.getY()+n.getY()+t.getY())/4);return new vr(f,s)};r.prototype.getMatrixCornerPoints=function(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())};r.prototype.sampleGrid=function(r,n,t,i,e){var a=hr.getInstance();var u=this.getDimension();var f=u/2-this.nbCenterLayers;var s=u/2+this.nbCenterLayers;return a.sampleGrid(r,u,u,f,f,s,f,s,s,f,s,n.getX(),n.getY(),t.getX(),t.getY(),i.getX(),i.getY(),e.getX(),e.getY())};r.prototype.sampleLine=function(r,n,t){var i=0;var e=this.distanceResultPoint(r,n);var a=e/t;var u=r.getX();var f=r.getY();var s=a*(n.getX()-r.getX())/e;var o=a*(n.getY()-r.getY())/e;for(var h=0;h<t;h++){if(this.image.get(rr.round(u+h*s),rr.round(f+h*o))){i|=1<<t-h-1}}return i};r.prototype.isWhiteOrBlackRectangle=function(r,n,t,i){var e=3;r=new vr(r.getX()-e,r.getY()+e);n=new vr(n.getX()-e,n.getY()-e);t=new vr(t.getX()+e,t.getY()-e);i=new vr(i.getX()+e,i.getY()+e);var a=this.getColor(i,r);if(a===0){return false}var u=this.getColor(r,n);if(u!==a){return false}u=this.getColor(n,t);if(u!==a){return false}u=this.getColor(t,i);return u===a};r.prototype.getColor=function(r,n){var t=this.distancePoint(r,n);var i=(n.getX()-r.getX())/t;var e=(n.getY()-r.getY())/t;var a=0;var u=r.getX();var f=r.getY();var s=this.image.get(r.getX(),r.getY());var o=Math.ceil(t);for(var h=0;h<o;h++){u+=i;f+=e;if(this.image.get(rr.round(u),rr.round(f))!==s){a++}}var v=a/t;if(v>.1&&v<.9){return 0}return v<=.1===s?1:-1};r.prototype.getFirstDifferent=function(r,n,t,i){var e=r.getX()+t;var a=r.getY()+i;while(this.isValid(e,a)&&this.image.get(e,a)===n){e+=t;a+=i}e-=t;a-=i;while(this.isValid(e,a)&&this.image.get(e,a)===n){e+=t}e-=t;while(this.isValid(e,a)&&this.image.get(e,a)===n){a+=i}a-=i;return new vr(e,a)};r.prototype.expandSquare=function(r,n,t){var i=t/(2*n);var e=r[0].getX()-r[2].getX();var a=r[0].getY()-r[2].getY();var u=(r[0].getX()+r[2].getX())/2;var f=(r[0].getY()+r[2].getY())/2;var s=new tr(u+i*e,f+i*a);var o=new tr(u-i*e,f-i*a);e=r[1].getX()-r[3].getX();a=r[1].getY()-r[3].getY();u=(r[1].getX()+r[3].getX())/2;f=(r[1].getY()+r[3].getY())/2;var h=new tr(u+i*e,f+i*a);var v=new tr(u-i*e,f-i*a);var c=[s,h,o,v];return c};r.prototype.isValid=function(r,n){return r>=0&&r<this.image.getWidth()&&n>0&&n<this.image.getHeight()};r.prototype.isValidPoint=function(r){var n=rr.round(r.getX());var t=rr.round(r.getY());return this.isValid(n,t)};r.prototype.distancePoint=function(r,n){return rr.distance(r.getX(),r.getY(),n.getX(),n.getY())};r.prototype.distanceResultPoint=function(r,n){return rr.distance(r.getX(),r.getY(),n.getX(),n.getY())};r.prototype.getDimension=function(){if(this.compact){return 4*this.nbLayers+11}if(this.nbLayers<=4){return 4*this.nbLayers+15}return 4*this.nbLayers+2*(A.truncDivision(this.nbLayers-4,8)+1)+15};return r}();var wr=function(){function r(){}r.prototype.decode=function(r,n){if(n===void 0){n=null}var t=null;var i=new cr(r.getBlackMatrix());var e=null;var a=null;try{var u=i.detectMirror(false);e=u.getPoints();this.reportFoundResultPoints(n,e);a=(new $).decode(u)}catch(r){t=r}if(a==null){try{var u=i.detectMirror(true);e=u.getPoints();this.reportFoundResultPoints(n,e);a=(new $).decode(u)}catch(r){if(t!=null){throw t}throw r}}var f=new G(a.getText(),a.getRawBytes(),a.getNumBits(),e,j.AZTEC,w.currentTimeMillis());var s=a.getByteSegments();if(s!=null){f.putMetadata(H.BYTE_SEGMENTS,s)}var o=a.getECLevel();if(o!=null){f.putMetadata(H.ERROR_CORRECTION_LEVEL,o)}return f};r.prototype.reportFoundResultPoints=function(r,n){if(r!=null){var t=r.get(p.NEED_RESULT_POINT_CALLBACK);if(t!=null){n.forEach((function(r,n,i){t.foundPossibleResultPoint(r)}))}}};r.prototype.reset=function(){};return r}();var lr=function(r){i(n,r);function n(n){if(n===void 0){n=500}return r.call(this,new wr,n)||this}return n}(L);var dr=function(){function r(){}r.prototype.decode=function(r,n){try{return this.doDecode(r,n)}catch(h){var t=n&&n.get(p.TRY_HARDER)===true;if(t&&r.isRotateSupported()){var i=r.rotateCounterClockwise();var e=this.doDecode(i,n);var a=e.getResultMetadata();var u=270;if(a!==null&&a.get(H.ORIENTATION)===true){u=u+a.get(H.ORIENTATION)%360}e.putMetadata(H.ORIENTATION,u);var f=e.getResultPoints();if(f!==null){var s=i.getHeight();for(var o=0;o<f.length;o++){f[o]=new tr(s-f[o].getY()-1,f[o].getX())}}return e}else{throw new N}}};r.prototype.reset=function(){};r.prototype.doDecode=function(r,n){var t=r.getWidth();var i=r.getHeight();var e=new I(t);var a=n&&n.get(p.TRY_HARDER)===true;var u=Math.max(1,i>>(a?8:5));var f;if(a){f=i}else{f=15}var s=Math.trunc(i/2);for(var o=0;o<f;o++){var h=Math.trunc((o+1)/2);var v=(o&1)===0;var c=s+u*(v?h:-h);if(c<0||c>=i){break}try{e=r.getBlackRow(c,e)}catch(r){continue}var w=function(r){if(r===1){e.reverse();if(n&&n.get(p.NEED_RESULT_POINT_CALLBACK)===true){var i=new Map;n.forEach((function(r,n){return i.set(n,r)}));i.delete(p.NEED_RESULT_POINT_CALLBACK);n=i}}try{var a=l.decodeRow(c,e,n);if(r===1){a.putMetadata(H.ORIENTATION,180);var u=a.getResultPoints();if(u!==null){u[0]=new tr(t-u[0].getX()-1,u[0].getY());u[1]=new tr(t-u[1].getX()-1,u[1].getY())}}return{value:a}}catch(r){}};var l=this;for(var d=0;d<2;d++){var y=w(d);if(typeof y==="object")return y.value}}throw new N};r.recordPattern=function(r,n,t){var i=t.length;for(var e=0;e<i;e++)t[e]=0;var a=r.getSize();if(n>=a){throw new N}var u=!r.get(n);var f=0;var s=n;while(s<a){if(r.get(s)!==u){t[f]++}else{if(++f===i){break}else{t[f]=1;u=!u}}s++}if(!(f===i||f===i-1&&s===a)){throw new N}};r.recordPatternInReverse=function(n,t,i){var e=i.length;var a=n.get(t);while(t>0&&e>=0){if(n.get(--t)!==a){e--;a=!a}}if(e>=0){throw new N}r.recordPattern(n,t+1,i)};r.patternMatchVariance=function(r,n,t){var i=r.length;var e=0;var a=0;for(var u=0;u<i;u++){e+=r[u];a+=n[u]}if(e<a){return Number.POSITIVE_INFINITY}var f=e/a;t*=f;var s=0;for(var o=0;o<i;o++){var h=r[o];var v=n[o]*f;var c=h>v?h-v:v-h;if(c>t){return Number.POSITIVE_INFINITY}s+=c}return s/e};return r}();var yr=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}n.findStartPattern=function(r){var t=r.getSize();var i=r.getNextSet(0);var e=0;var a=Int32Array.from([0,0,0,0,0,0]);var u=i;var f=false;var s=6;for(var o=i;o<t;o++){if(r.get(o)!==f){a[e]++}else{if(e===s-1){var h=n.MAX_AVG_VARIANCE;var v=-1;for(var c=n.CODE_START_A;c<=n.CODE_START_C;c++){var w=dr.patternMatchVariance(a,n.CODE_PATTERNS[c],n.MAX_INDIVIDUAL_VARIANCE);if(w<h){h=w;v=c}}if(v>=0&&r.isRange(Math.max(0,u-(o-u)/2),u,false)){return Int32Array.from([u,o,v])}u+=a[0]+a[1];a=a.slice(2,a.length-1);a[e-1]=0;a[e]=0;e--}else{e++}a[e]=1;f=!f}}throw new N};n.decodeCode=function(r,t,i){dr.recordPattern(r,i,t);var e=n.MAX_AVG_VARIANCE;var a=-1;for(var u=0;u<n.CODE_PATTERNS.length;u++){var f=n.CODE_PATTERNS[u];var s=this.patternMatchVariance(t,f,n.MAX_INDIVIDUAL_VARIANCE);if(s<e){e=s;a=u}}if(a>=0){return a}else{throw new N}};n.prototype.decodeRow=function(r,t,i){var e=i&&i.get(p.ASSUME_GS1)===true;var a=n.findStartPattern(t);var u=a[2];var f=0;var s=new Uint8Array(20);s[f++]=u;var o;switch(u){case n.CODE_START_A:o=n.CODE_CODE_A;break;case n.CODE_START_B:o=n.CODE_CODE_B;break;case n.CODE_START_C:o=n.CODE_CODE_C;break;default:throw new M}var h=false;var c=false;var w="";var l=a[0];var d=a[1];var y=Int32Array.from([0,0,0,0,0,0]);var A=0;var I=0;var b=u;var _=0;var m=true;var k=false;var g=false;while(!h){var S=c;c=false;A=I;I=n.decodeCode(t,y,d);s[f++]=I;if(I!==n.CODE_STOP){m=true}if(I!==n.CODE_STOP){_++;b+=_*I}l=d;d+=y.reduce((function(r,n){return r+n}),0);switch(I){case n.CODE_START_A:case n.CODE_START_B:case n.CODE_START_C:throw new M}switch(o){case n.CODE_CODE_A:if(I<64){if(g===k){w+=String.fromCharCode(" ".charCodeAt(0)+I)}else{w+=String.fromCharCode(" ".charCodeAt(0)+I+128)}g=false}else if(I<96){if(g===k){w+=String.fromCharCode(I-64)}else{w+=String.fromCharCode(I+64)}g=false}else{if(I!==n.CODE_STOP){m=false}switch(I){case n.CODE_FNC_1:if(e){if(w.length===0){w+="]C1"}else{w+=String.fromCharCode(29)}}break;case n.CODE_FNC_2:case n.CODE_FNC_3:break;case n.CODE_FNC_4_A:if(!k&&g){k=true;g=false}else if(k&&g){k=false;g=false}else{g=true}break;case n.CODE_SHIFT:c=true;o=n.CODE_CODE_B;break;case n.CODE_CODE_B:o=n.CODE_CODE_B;break;case n.CODE_CODE_C:o=n.CODE_CODE_C;break;case n.CODE_STOP:h=true;break}}break;case n.CODE_CODE_B:if(I<96){if(g===k){w+=String.fromCharCode(" ".charCodeAt(0)+I)}else{w+=String.fromCharCode(" ".charCodeAt(0)+I+128)}g=false}else{if(I!==n.CODE_STOP){m=false}switch(I){case n.CODE_FNC_1:if(e){if(w.length===0){w+="]C1"}else{w+=String.fromCharCode(29)}}break;case n.CODE_FNC_2:case n.CODE_FNC_3:break;case n.CODE_FNC_4_B:if(!k&&g){k=true;g=false}else if(k&&g){k=false;g=false}else{g=true}break;case n.CODE_SHIFT:c=true;o=n.CODE_CODE_A;break;case n.CODE_CODE_A:o=n.CODE_CODE_A;break;case n.CODE_CODE_C:o=n.CODE_CODE_C;break;case n.CODE_STOP:h=true;break}}break;case n.CODE_CODE_C:if(I<100){if(I<10){w+="0"}w+=I}else{if(I!==n.CODE_STOP){m=false}switch(I){case n.CODE_FNC_1:if(e){if(w.length===0){w+="]C1"}else{w+=String.fromCharCode(29)}}break;case n.CODE_CODE_A:o=n.CODE_CODE_A;break;case n.CODE_CODE_B:o=n.CODE_CODE_B;break;case n.CODE_STOP:h=true;break}}break}if(S){o=o===n.CODE_CODE_A?n.CODE_CODE_B:n.CODE_CODE_A}}var E=d-l;d=t.getNextUnset(d);if(!t.isRange(d,Math.min(t.getSize(),d+(d-l)/2),false)){throw new N}b-=_*A;if(b%103!==A){throw new v}var C=w.length;if(C===0){throw new N}if(C>0&&m){if(o===n.CODE_CODE_C){w=w.substring(0,C-2)}else{w=w.substring(0,C-1)}}var O=(a[1]+a[0])/2;var T=l+E/2;var R=s.length;var P=new Uint8Array(R);for(var D=0;D<R;D++){P[D]=s[D]}var U=[new tr(O,r),new tr(T,r)];return new G(w,P,0,U,j.CODE_128,(new Date).getTime())};return n}(dr);yr.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])];yr.MAX_AVG_VARIANCE=.25;yr.MAX_INDIVIDUAL_VARIANCE=.7;yr.CODE_SHIFT=98;yr.CODE_CODE_C=99;yr.CODE_CODE_B=100;yr.CODE_CODE_A=101;yr.CODE_FNC_1=102;yr.CODE_FNC_2=97;yr.CODE_FNC_3=96;yr.CODE_FNC_4_A=101;yr.CODE_FNC_4_B=100;yr.CODE_START_A=103;yr.CODE_START_B=104;yr.CODE_START_C=105;yr.CODE_STOP=106;var Ar=function(r){i(n,r);function n(n,t){if(n===void 0){n=false}if(t===void 0){t=false}var i=r.call(this)||this;i.usingCheckDigit=n;i.extendedMode=t;i.decodeRowResult="";i.counters=new Int32Array(9);return i}n.prototype.decodeRow=function(r,t,i){var e=this.counters;e.fill(0);this.decodeRowResult="";var a=n.findAsteriskPattern(t,e);var u=t.getNextSet(a[1]);var f=t.getSize();var s;var o;do{n.recordPattern(t,u,e);var h=n.toNarrowWidePattern(e);if(h<0){throw new N}s=n.patternToChar(h);this.decodeRowResult+=s;o=u;for(var c=0,w=e;c<w.length;c++){var l=w[c];u+=l}u=t.getNextSet(u)}while(s!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var d=0;for(var y=0,A=e;y<A.length;y++){var l=A[y];d+=l}var I=u-o-d;if(u!==f&&I*2<d){throw new N}if(this.usingCheckDigit){var b=this.decodeRowResult.length-1;var p=0;for(var M=0;M<b;M++){p+=n.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(M))}if(this.decodeRowResult.charAt(b)!==n.ALPHABET_STRING.charAt(p%43)){throw new v}this.decodeRowResult=this.decodeRowResult.substring(0,b)}if(this.decodeRowResult.length===0){throw new N}var _;if(this.extendedMode){_=n.decodeExtended(this.decodeRowResult)}else{_=this.decodeRowResult}var m=(a[1]+a[0])/2;var k=o+d/2;return new G(_,null,0,[new tr(m,r),new tr(k,r)],j.CODE_39,(new Date).getTime())};n.findAsteriskPattern=function(r,t){var i=r.getSize();var e=r.getNextSet(0);var a=0;var u=e;var f=false;var s=t.length;for(var o=e;o<i;o++){if(r.get(o)!==f){t[a]++}else{if(a===s-1){if(this.toNarrowWidePattern(t)===n.ASTERISK_ENCODING&&r.isRange(Math.max(0,u-Math.floor((o-u)/2)),u,false)){return[u,o]}u+=t[0]+t[1];t.copyWithin(0,2,2+a-1);t[a-1]=0;t[a]=0;a--}else{a++}t[a]=1;f=!f}}throw new N};n.toNarrowWidePattern=function(r){var n=r.length;var t=0;var i;do{var e=2147483647;for(var a=0,u=r;a<u.length;a++){var f=u[a];if(f<e&&f>t){e=f}}t=e;i=0;var s=0;var o=0;for(var h=0;h<n;h++){var f=r[h];if(f>t){o|=1<<n-1-h;i++;s+=f}}if(i===3){for(var h=0;h<n&&i>0;h++){var f=r[h];if(f>t){i--;if(f*2>=s){return-1}}}return o}}while(i>3);return-1};n.patternToChar=function(r){for(var t=0;t<n.CHARACTER_ENCODINGS.length;t++){if(n.CHARACTER_ENCODINGS[t]===r){return n.ALPHABET_STRING.charAt(t)}}if(r===n.ASTERISK_ENCODING){return"*"}throw new N};n.decodeExtended=function(r){var n=r.length;var t="";for(var i=0;i<n;i++){var e=r.charAt(i);if(e==="+"||e==="$"||e==="%"||e==="/"){var a=r.charAt(i+1);var u="\0";switch(e){case"+":if(a>="A"&&a<="Z"){u=String.fromCharCode(a.charCodeAt(0)+32)}else{throw new M}break;case"$":if(a>="A"&&a<="Z"){u=String.fromCharCode(a.charCodeAt(0)-64)}else{throw new M}break;case"%":if(a>="A"&&a<="E"){u=String.fromCharCode(a.charCodeAt(0)-38)}else if(a>="F"&&a<="J"){u=String.fromCharCode(a.charCodeAt(0)-11)}else if(a>="K"&&a<="O"){u=String.fromCharCode(a.charCodeAt(0)+16)}else if(a>="P"&&a<="T"){u=String.fromCharCode(a.charCodeAt(0)+43)}else if(a==="U"){u="\0"}else if(a==="V"){u="@"}else if(a==="W"){u="`"}else if(a==="X"||a==="Y"||a==="Z"){u=""}else{throw new M}break;case"/":if(a>="A"&&a<="O"){u=String.fromCharCode(a.charCodeAt(0)-32)}else if(a==="Z"){u=":"}else{throw new M}break}t+=u;i++}else{t+=e}}return t};return n}(dr);Ar.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%";Ar.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42];Ar.ASTERISK_ENCODING=148;var Ir=function(r){i(n,r);function n(){var n=r.apply(this,arguments)||this;n.narrowLineWidth=-1;return n}n.prototype.decodeRow=function(r,t,i){var e=this.decodeStart(t);var a=this.decodeEnd(t);var u=new E;n.decodeMiddle(t,e[1],a[0],u);var f=u.toString();var s=null;if(i!=null){s=i.get(p.ALLOWED_LENGTHS)}if(s==null){s=n.DEFAULT_ALLOWED_LENGTHS}var o=f.length;var h=false;var v=0;for(var c=0,w=s;c<w.length;c++){var l=w[c];if(o===l){h=true;break}if(l>v){v=l}}if(!h&&o>v){h=true}if(!h){throw new M}var d=[new tr(e[1],r),new tr(a[0],r)];var y=new G(f,null,0,d,j.ITF,(new Date).getTime());return y};n.decodeMiddle=function(r,t,i,e){var a=new Int32Array(10);var u=new Int32Array(5);var f=new Int32Array(5);a.fill(0);u.fill(0);f.fill(0);while(t<i){dr.recordPattern(r,t,a);for(var s=0;s<5;s++){var o=2*s;u[s]=a[o];f[s]=a[o+1]}var h=n.decodeDigit(u);e.append(h.toString());h=this.decodeDigit(f);e.append(h.toString());a.forEach((function(r){t+=r}))}};n.prototype.decodeStart=function(r){var t=n.skipWhiteSpace(r);var i=n.findGuardPattern(r,t,n.START_PATTERN);this.narrowLineWidth=(i[1]-i[0])/4;this.validateQuietZone(r,i[0]);return i};n.prototype.validateQuietZone=function(r,n){var t=this.narrowLineWidth*10;t=t<n?t:n;for(var i=n-1;t>0&&i>=0;i--){if(r.get(i)){break}t--}if(t!==0){throw new N}};n.skipWhiteSpace=function(r){var n=r.getSize();var t=r.getNextSet(0);if(t===n){throw new N}return t};n.prototype.decodeEnd=function(r){r.reverse();try{var t=n.skipWhiteSpace(r);var i=void 0;try{i=n.findGuardPattern(r,t,n.END_PATTERN_REVERSED[0])}catch(e){if(e instanceof N){i=n.findGuardPattern(r,t,n.END_PATTERN_REVERSED[1])}}this.validateQuietZone(r,i[0]);var e=i[0];i[0]=r.getSize()-i[1];i[1]=r.getSize()-e;return i}finally{r.reverse()}};n.findGuardPattern=function(r,t,i){var e=i.length;var a=new Int32Array(e);var u=r.getSize();var f=false;var s=0;var o=t;a.fill(0);for(var h=t;h<u;h++){if(r.get(h)!==f){a[s]++}else{if(s===e-1){if(dr.patternMatchVariance(a,i,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE){return[o,h]}o+=a[0]+a[1];w.arraycopy(a,2,a,0,s-1);a[s-1]=0;a[s]=0;s--}else{s++}a[s]=1;f=!f}}throw new N};n.decodeDigit=function(r){var t=n.MAX_AVG_VARIANCE;var i=-1;var e=n.PATTERNS.length;for(var a=0;a<e;a++){var u=n.PATTERNS[a];var f=dr.patternMatchVariance(r,u,n.MAX_INDIVIDUAL_VARIANCE);if(f<t){t=f;i=a}else if(f===t){i=-1}}if(i>=0){return i%10}else{throw new N}};return n}(dr);Ir.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])];Ir.MAX_AVG_VARIANCE=.38;Ir.MAX_INDIVIDUAL_VARIANCE=.5;Ir.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14];Ir.START_PATTERN=Int32Array.from([1,1,1,1]);Ir.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];var br=function(r){i(n,r);function n(){var n=r.apply(this,arguments)||this;n.decodeRowStringBuffer="";return n}n.findStartGuardPattern=function(r){var t=false;var i;var e=0;var a=Int32Array.from([0,0,0]);while(!t){a=Int32Array.from([0,0,0]);i=n.findGuardPattern(r,e,false,this.START_END_PATTERN,a);var u=i[0];e=i[1];var f=u-(e-u);if(f>=0){t=r.isRange(f,u,false)}}return i};n.checkChecksum=function(r){return n.checkStandardUPCEANChecksum(r)};n.checkStandardUPCEANChecksum=function(r){var t=r.length;if(t===0)return false;var i=parseInt(r.charAt(t-1),10);return n.getStandardUPCEANChecksum(r.substring(0,t-1))===i};n.getStandardUPCEANChecksum=function(r){var n=r.length;var t=0;for(var i=n-1;i>=0;i-=2){var e=r.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9){throw new M}t+=e}t*=3;for(var i=n-2;i>=0;i-=2){var e=r.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9){throw new M}t+=e}return(1e3-t)%10};n.decodeEnd=function(r,t){return n.findGuardPattern(r,t,false,n.START_END_PATTERN,new Int32Array(n.START_END_PATTERN.length).fill(0))};n.findGuardPatternWithoutCounters=function(r,n,t,i){return this.findGuardPattern(r,n,t,i,new Int32Array(i.length))};n.findGuardPattern=function(r,t,i,e,a){var u=r.getSize();t=i?r.getNextUnset(t):r.getNextSet(t);var f=0;var s=t;var o=e.length;var h=i;for(var v=t;v<u;v++){if(r.get(v)!==h){a[f]++}else{if(f===o-1){if(dr.patternMatchVariance(a,e,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE){return Int32Array.from([s,v])}s+=a[0]+a[1];var c=a.slice(2,a.length-1);for(var w=0;w<f-1;w++){a[w]=c[w]}a[f-1]=0;a[f]=0;f--}else{f++}a[f]=1;h=!h}}throw new N};n.decodeDigit=function(r,t,i,e){this.recordPattern(r,i,t);var a=this.MAX_AVG_VARIANCE;var u=-1;var f=e.length;for(var s=0;s<f;s++){var o=e[s];var h=dr.patternMatchVariance(t,o,n.MAX_INDIVIDUAL_VARIANCE);if(h<a){a=h;u=s}}if(u>=0){return u}else{throw new N}};return n}(dr);br.MAX_AVG_VARIANCE=.48;br.MAX_INDIVIDUAL_VARIANCE=.7;br.START_END_PATTERN=Int32Array.from([1,1,1]);br.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]);br.END_PATTERN=Int32Array.from([1,1,1,1,1,1]);br.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];var pr=function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5];this.decodeMiddleCounters=Int32Array.from([0,0,0,0]);this.decodeRowStringBuffer=""}r.prototype.decodeRow=function(n,t,i){var e=this.decodeRowStringBuffer;var a=this.decodeMiddle(t,i,e);var u=e.toString();var f=r.parseExtensionString(u);var s=[new tr((i[0]+i[1])/2,n),new tr(a,n)];var o=new G(u,null,0,s,j.UPC_EAN_EXTENSION,(new Date).getTime());if(f!=null){o.putAllMetadata(f)}return o};r.prototype.decodeMiddle=function(n,t,i){var e=this.decodeMiddleCounters;e[0]=0;e[1]=0;e[2]=0;e[3]=0;var a=n.getSize();var u=t[1];var f=0;for(var s=0;s<5&&u<a;s++){var o=br.decodeDigit(n,e,u,br.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+o%10);for(var h=0,v=e;h<v.length;h++){var c=v[h];u+=c}if(o>=10){f|=1<<4-s}if(s!==4){u=n.getNextSet(u);u=n.getNextUnset(u)}}if(i.length!==5){throw new N}var w=this.determineCheckDigit(f);if(r.extensionChecksum(i.toString())!==w){throw new N}return u};r.extensionChecksum=function(r){var n=r.length;var t=0;for(var i=n-2;i>=0;i-=2){t+=r.charAt(i).charCodeAt(0)-"0".charCodeAt(0)}t*=3;for(var i=n-1;i>=0;i-=2){t+=r.charAt(i).charCodeAt(0)-"0".charCodeAt(0)}t*=3;return t%10};r.prototype.determineCheckDigit=function(r){for(var n=0;n<10;n++){if(r===this.CHECK_DIGIT_ENCODINGS[n]){return n}}throw new N};r.parseExtensionString=function(n){if(n.length!==5){return null}var t=r.parseExtension5String(n);if(t==null){return null}return new Map([[H.SUGGESTED_PRICE,t]])};r.parseExtension5String=function(r){var n;switch(r.charAt(0)){case"0":n="£";break;case"5":n="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}var t=parseInt(r.substring(1));var i=(t/100).toString();var e=t%100;var a=e<10?"0"+e:e.toString();return n+i+"."+a};return r}();var Mr=function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]);this.decodeRowStringBuffer=""}r.prototype.decodeRow=function(n,t,i){var e=this.decodeRowStringBuffer;var a=this.decodeMiddle(t,i,e);var u=e.toString();var f=r.parseExtensionString(u);var s=[new tr((i[0]+i[1])/2,n),new tr(a,n)];var o=new G(u,null,0,s,j.UPC_EAN_EXTENSION,(new Date).getTime());if(f!=null){o.putAllMetadata(f)}return o};r.prototype.decodeMiddle=function(r,n,t){var i=this.decodeMiddleCounters;i[0]=0;i[1]=0;i[2]=0;i[3]=0;var e=r.getSize();var a=n[1];var u=0;for(var f=0;f<2&&a<e;f++){var s=br.decodeDigit(r,i,a,br.L_AND_G_PATTERNS);t+=String.fromCharCode("0".charCodeAt(0)+s%10);for(var o=0,h=i;o<h.length;o++){var v=h[o];a+=v}if(s>=10){u|=1<<1-f}if(f!==1){a=r.getNextSet(a);a=r.getNextUnset(a)}}if(t.length!==2){throw new N}if(parseInt(t.toString())%4!==u){throw new N}return a};r.parseExtensionString=function(r){if(r.length!==2){return null}return new Map([[H.ISSUE_NUMBER,parseInt(r)]])};return r}();var _r=function(){function r(){}r.decodeRow=function(r,n,t){var i=br.findGuardPattern(n,t,false,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var e=new pr;return e.decodeRow(r,n,i)}catch(t){var a=new Mr;return a.decodeRow(r,n,i)}};return r}();_r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);var mr=function(r){i(n,r);function n(){var t=r.call(this)||this;t.decodeRowStringBuffer="";n.L_AND_G_PATTERNS=n.L_PATTERNS.map((function(r){return Int32Array.from(r)}));for(var i=10;i<20;i++){var e=n.L_PATTERNS[i-10];var a=new Int32Array(e.length);for(var u=0;u<e.length;u++){a[u]=e[e.length-u-1]}n.L_AND_G_PATTERNS[i]=a}return t}n.prototype.decodeRow=function(r,t,i){var e=n.findStartGuardPattern(t);var a=i==null?null:i.get(p.NEED_RESULT_POINT_CALLBACK);if(a!=null){var u=new tr((e[0]+e[1])/2,r);a.foundPossibleResultPoint(u)}var f=this.decodeMiddle(t,e,this.decodeRowStringBuffer);var s=f.rowOffset;var o=f.resultString;if(a!=null){var h=new tr(s,r);a.foundPossibleResultPoint(h)}var c=this.decodeEnd(t,s);if(a!=null){var w=new tr((c[0]+c[1])/2,r);a.foundPossibleResultPoint(w)}var l=c[1];var d=l+(l-c[0]);if(d>=t.getSize()||!t.isRange(l,d,false)){throw new N}var y=o.toString();if(y.length<8){throw new M}if(!n.checkChecksum(y)){throw new v}var A=(e[1]+e[0])/2;var I=(c[1]+c[0])/2;var b=this.getBarcodeFormat();var _=[new tr(A,r),new tr(I,r)];var m=new G(y,null,0,_,b,(new Date).getTime());var k=0;try{var g=_r.decodeRow(r,t,c[1]);m.putMetadata(H.UPC_EAN_EXTENSION,g.getText());m.putAllMetadata(g.getResultMetadata());m.addResultPoints(g.getResultPoints());k=g.getText().length}catch(r){}var S=i==null?null:i.get(p.ALLOWED_EAN_EXTENSIONS);if(S!=null){var E=false;for(var C in S){if(k.toString()===C){E=true;break}}if(!E){throw new N}}return m};n.prototype.decodeEnd=function(r,t){return n.findGuardPattern(r,t,false,n.START_END_PATTERN,new Int32Array(n.START_END_PATTERN.length).fill(0))};n.checkChecksum=function(r){return n.checkStandardUPCEANChecksum(r)};n.checkStandardUPCEANChecksum=function(r){var t=r.length;if(t===0)return false;var i=parseInt(r.charAt(t-1),10);return n.getStandardUPCEANChecksum(r.substring(0,t-1))===i};n.getStandardUPCEANChecksum=function(r){var n=r.length;var t=0;for(var i=n-1;i>=0;i-=2){var e=r.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9){throw new M}t+=e}t*=3;for(var i=n-2;i>=0;i-=2){var e=r.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9){throw new M}t+=e}return(1e3-t)%10};return n}(br);var kr=function(r){i(n,r);function n(){var n=r.call(this)||this;n.decodeMiddleCounters=Int32Array.from([0,0,0,0]);return n}n.prototype.decodeMiddle=function(r,t,i){var e=this.decodeMiddleCounters;e[0]=0;e[1]=0;e[2]=0;e[3]=0;var a=r.getSize();var u=t[1];var f=0;for(var s=0;s<6&&u<a;s++){var o=mr.decodeDigit(r,e,u,mr.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+o%10);for(var h=0,v=e;h<v.length;h++){var c=v[h];u+=c}if(o>=10){f|=1<<5-s}}i=n.determineFirstDigit(i,f);var w=mr.findGuardPattern(r,u,true,mr.MIDDLE_PATTERN,new Int32Array(mr.MIDDLE_PATTERN.length).fill(0));u=w[1];for(var s=0;s<6&&u<a;s++){var o=mr.decodeDigit(r,e,u,mr.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+o);for(var l=0,d=e;l<d.length;l++){var c=d[l];u+=c}}return{rowOffset:u,resultString:i}};n.prototype.getBarcodeFormat=function(){return j.EAN_13};n.determineFirstDigit=function(r,n){for(var t=0;t<10;t++){if(n===this.FIRST_DIGIT_ENCODINGS[t]){r=String.fromCharCode("0".charCodeAt(0)+t)+r;return r}}throw new N};return n}(mr);kr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];var gr=function(r){i(n,r);function n(){var n=r.call(this)||this;n.decodeMiddleCounters=Int32Array.from([0,0,0,0]);return n}n.prototype.decodeMiddle=function(r,n,t){var i=this.decodeMiddleCounters;i[0]=0;i[1]=0;i[2]=0;i[3]=0;var e=r.getSize();var a=n[1];for(var u=0;u<4&&a<e;u++){var f=mr.decodeDigit(r,i,a,mr.L_PATTERNS);t+=String.fromCharCode("0".charCodeAt(0)+f);for(var s=0,o=i;s<o.length;s++){var h=o[s];a+=h}}var v=mr.findGuardPattern(r,a,true,mr.MIDDLE_PATTERN,new Int32Array(mr.MIDDLE_PATTERN.length).fill(0));a=v[1];for(var u=0;u<4&&a<e;u++){var f=mr.decodeDigit(r,i,a,mr.L_PATTERNS);t+=String.fromCharCode("0".charCodeAt(0)+f);for(var c=0,w=i;c<w.length;c++){var h=w[c];a+=h}}return{rowOffset:a,resultString:t}};n.prototype.getBarcodeFormat=function(){return j.EAN_8};return n}(mr);var Sr=function(r){i(n,r);function n(){var n=r.apply(this,arguments)||this;n.ean13Reader=new kr;return n}n.prototype.getBarcodeFormat=function(){return j.UPC_A};n.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))};n.prototype.decodeRow=function(r,n,t){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,t))};n.prototype.decodeMiddle=function(r,n,t){return this.ean13Reader.decodeMiddle(r,n,t)};n.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var t=new G(n.substring(1),null,null,r.getResultPoints(),j.UPC_A);if(r.getResultMetadata()!=null){t.putAllMetadata(r.getResultMetadata())}return t}else{throw new N}};n.prototype.reset=function(){this.ean13Reader.reset()};return n}(mr);var Er=function(r){i(n,r);function n(){var n=r.call(this)||this;n.decodeMiddleCounters=new Int32Array(4);return n}n.prototype.decodeMiddle=function(r,t,i){var e=this.decodeMiddleCounters.map((function(r){return r}));e[0]=0;e[1]=0;e[2]=0;e[3]=0;var a=r.getSize();var u=t[1];var f=0;for(var s=0;s<6&&u<a;s++){var o=n.decodeDigit(r,e,u,n.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+o%10);for(var h=0,v=e;h<v.length;h++){var c=v[h];u+=c}if(o>=10){f|=1<<5-s}}var w=n.determineNumSysAndCheckDigit(i,f);return{rowOffset:u,resultString:w}};n.prototype.decodeEnd=function(r,t){return n.findGuardPatternWithoutCounters(r,t,true,n.MIDDLE_END_PATTERN)};n.prototype.checkChecksum=function(r){return mr.checkChecksum(n.convertUPCEtoUPCA(r))};n.determineNumSysAndCheckDigit=function(r,n){for(var t=0;t<=1;t++){for(var i=0;i<10;i++){if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[t][i]){var e=String.fromCharCode("0".charCodeAt(0)+t);var a=String.fromCharCode("0".charCodeAt(0)+i);return e+r+a}}}throw N.getNotFoundInstance()};n.prototype.getBarcodeFormat=function(){return j.UPC_E};n.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map((function(r){return r.charCodeAt(0)}));var t=new E;t.append(r.charAt(0));var i=n[5];switch(i){case 0:case 1:case 2:t.appendChars(n,0,2);t.append(i);t.append("0000");t.appendChars(n,2,3);break;case 3:t.appendChars(n,0,3);t.append("00000");t.appendChars(n,3,2);break;case 4:t.appendChars(n,0,4);t.append("00000");t.append(n[4]);break;default:t.appendChars(n,0,5);t.append("0000");t.append(i);break}if(r.length>=8){t.append(r.charAt(7))}return t.toString()};return n}(mr);Er.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]);Er.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];var Cr=function(r){i(t,r);function t(t){var i=r.call(this)||this;var e=t==null?null:t.get(p.POSSIBLE_FORMATS);var a=[];if(!n(e)){if(e.indexOf(j.EAN_13)>-1){a.push(new kr)}if(e.indexOf(j.UPC_A)>-1){a.push(new Sr)}if(e.indexOf(j.EAN_8)>-1){a.push(new gr)}if(e.indexOf(j.UPC_E)>-1){a.push(new Er)}}else{a.push(new kr);a.push(new Sr);a.push(new gr);a.push(new Er)}i.readers=a;return i}t.prototype.decodeRow=function(r,n,t){for(var i=0,e=this.readers;i<e.length;i++){var a=e[i];try{var u=a.decodeRow(r,n,t);var f=u.getBarcodeFormat()===j.EAN_13&&u.getText().charAt(0)==="0";var s=t==null?null:t.get(p.POSSIBLE_FORMATS);var o=s==null||s.includes(j.UPC_A);if(f&&o){var h=u.getRawBytes();var v=new G(u.getText().substring(1),h,h?h.length:null,u.getResultPoints(),j.UPC_A);v.putAllMetadata(u.getResultMetadata());return v}return u}catch(r){}}throw new N};t.prototype.reset=function(){for(var r=0,n=this.readers;r<n.length;r++){var t=n[r];t.reset()}};return t}(dr);var Nr=function(r){i(n,r);function n(){var n=r.call(this)||this;n.decodeFinderCounters=new Int32Array(4);n.dataCharacterCounters=new Int32Array(8);n.oddRoundingErrors=new Array(4);n.evenRoundingErrors=new Array(4);n.oddCounts=new Array(n.dataCharacterCounters.length/2);n.evenCounts=new Array(n.dataCharacterCounters.length/2);return n}n.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters};n.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters};n.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors};n.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors};n.prototype.getOddCounts=function(){return this.oddCounts};n.prototype.getEvenCounts=function(){return this.evenCounts};n.prototype.parseFinderValue=function(r,t){for(var i=0;i<t.length;i++){if(dr.patternMatchVariance(r,t[i],n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE){return i}}throw new N};n.count=function(r){return rr.sum(new Int32Array(r))};n.increment=function(r,n){var t=0;var i=n[0];for(var e=1;e<r.length;e++){if(n[e]>i){i=n[e];t=e}}r[t]++};n.decrement=function(r,n){var t=0;var i=n[0];for(var e=1;e<r.length;e++){if(n[e]<i){i=n[e];t=e}}r[t]--};n.isFinderPattern=function(r){var t=r[0]+r[1];var i=t+r[2]+r[3];var e=t/i;if(e>=n.MIN_FINDER_PATTERN_RATIO&&e<=n.MAX_FINDER_PATTERN_RATIO){var a=Number.MAX_SAFE_INTEGER;var u=Number.MIN_SAFE_INTEGER;for(var f=0,s=r;f<s.length;f++){var o=s[f];if(o>u){u=o}if(o<a){a=o}}return u<10*a}return false};return n}(dr);Nr.MAX_AVG_VARIANCE=.2;Nr.MAX_INDIVIDUAL_VARIANCE=.45;Nr.MIN_FINDER_PATTERN_RATIO=9.5/12;Nr.MAX_FINDER_PATTERN_RATIO=12.5/14;var Or=function(){function r(r,n){this.value=r;this.checksumPortion=n}r.prototype.getValue=function(){return this.value};r.prototype.getChecksumPortion=function(){return this.checksumPortion};r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"};r.prototype.equals=function(n){if(!(n instanceof r)){return false}var t=n;return this.value===t.value&&this.checksumPortion===t.checksumPortion};r.prototype.hashCode=function(){return this.value^this.checksumPortion};return r}();var Tr=function(){function r(r,n,t,i,e){this.value=r;this.startEnd=n;this.value=r;this.startEnd=n;this.resultPoints=new Array;this.resultPoints.push(new tr(t,e));this.resultPoints.push(new tr(i,e))}r.prototype.getValue=function(){return this.value};r.prototype.getStartEnd=function(){return this.startEnd};r.prototype.getResultPoints=function(){return this.resultPoints};r.prototype.equals=function(n){if(!(n instanceof r)){return false}var t=n;return this.value===t.value};r.prototype.hashCode=function(){return this.value};return r}();var Rr=function(){function r(){}r.getRSSvalue=function(n,t,i){var e=0;for(var a=0,u=n;a<u.length;a++){var f=u[a];e+=f}var s=0;var o=0;var h=n.length;for(var v=0;v<h-1;v++){var c=void 0;for(c=1,o|=1<<v;c<n[v];c++,o&=~(1<<v)){var w=r.combins(e-c-1,h-v-2);if(i&&o===0&&e-c-(h-v-1)>=h-v-1){w-=r.combins(e-c-(h-v),h-v-2)}if(h-v-1>1){var l=0;for(var d=e-c-(h-v-2);d>t;d--){l+=r.combins(e-c-d-1,h-v-3)}w-=l*(h-1-v)}else if(e-c>t){w--}s+=w}e-=c}return s};r.combins=function(r,n){var t;var i;if(r-n>n){i=n;t=r-n}else{i=r-n;t=n}var e=1;var a=1;for(var u=r;u>t;u--){e*=u;if(a<=i){e/=a;a++}}while(a<=i){e/=a;a++}return e};return r}();var Pr=function(){function r(){}r.buildBitArray=function(r){var n=r.length*2-1;if(r[r.length-1].getRightChar()==null){n-=1}var t=12*n;var i=new I(t);var e=0;var a=r[0];var u=a.getRightChar().getValue();for(var f=11;f>=0;--f){if((u&1<<f)!=0){i.set(e)}e++}for(var f=1;f<r.length;++f){var s=r[f];var o=s.getLeftChar().getValue();for(var h=11;h>=0;--h){if((o&1<<h)!=0){i.set(e)}e++}if(s.getRightChar()!=null){var v=s.getRightChar().getValue();for(var h=11;h>=0;--h){if((v&1<<h)!=0){i.set(e)}e++}}}return i};return r}();var Dr=function(){function r(r,n){if(n){this.decodedInformation=null}else{this.finished=r;this.decodedInformation=n}}r.prototype.getDecodedInformation=function(){return this.decodedInformation};r.prototype.isFinished=function(){return this.finished};return r}();var Ur=function(){function r(r){this.newPosition=r}r.prototype.getNewPosition=function(){return this.newPosition};return r}();var xr=function(r){i(n,r);function n(n,t){var i=r.call(this,n)||this;i.value=t;return i}n.prototype.getValue=function(){return this.value};n.prototype.isFNC1=function(){return this.value===n.FNC1};return n}(Ur);xr.FNC1="$";var Fr=function(r){i(n,r);function n(n,t,i){var e=r.call(this,n)||this;if(i){e.remaining=true;e.remainingValue=e.remainingValue}else{e.remaining=false;e.remainingValue=0}e.newString=t;return e}n.prototype.getNewString=function(){return this.newString};n.prototype.isRemaining=function(){return this.remaining};n.prototype.getRemainingValue=function(){return this.remainingValue};return n}(Ur);var Lr=function(r){i(n,r);function n(n,t,i){var e=r.call(this,n)||this;if(t<0||t>10||i<0||i>10){throw new M}e.firstDigit=t;e.secondDigit=i;return e}n.prototype.getFirstDigit=function(){return this.firstDigit};n.prototype.getSecondDigit=function(){return this.secondDigit};n.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit};n.prototype.isFirstDigitFNC1=function(){return this.firstDigit===n.FNC1};n.prototype.isSecondDigitFNC1=function(){return this.secondDigit===n.FNC1};n.prototype.isAnyFNC1=function(){return this.firstDigit===n.FNC1||this.secondDigit===n.FNC1};return n}(Ur);Lr.FNC1=10;var Gr=function(){function r(){}r.parseFieldsInGeneralPurpose=function(n){if(!n){return null}if(n.length<2){throw new N}var t=n.substring(0,2);for(var i=0,e=r.TWO_DIGIT_DATA_LENGTH;i<e.length;i++){var a=e[i];if(a[0]===t){if(a[1]===r.VARIABLE_LENGTH){return r.processVariableAI(2,a[2],n)}return r.processFixedAI(2,a[1],n)}}if(n.length<3){throw new N}var u=n.substring(0,3);for(var f=0,s=r.THREE_DIGIT_DATA_LENGTH;f<s.length;f++){var a=s[f];if(a[0]===u){if(a[1]===r.VARIABLE_LENGTH){return r.processVariableAI(3,a[2],n)}return r.processFixedAI(3,a[1],n)}}for(var o=0,h=r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH;o<h.length;o++){var a=h[o];if(a[0]===u){if(a[1]===r.VARIABLE_LENGTH){return r.processVariableAI(4,a[2],n)}return r.processFixedAI(4,a[1],n)}}if(n.length<4){throw new N}var v=n.substring(0,4);for(var c=0,w=r.FOUR_DIGIT_DATA_LENGTH;c<w.length;c++){var a=w[c];if(a[0]===v){if(a[1]===r.VARIABLE_LENGTH){return r.processVariableAI(4,a[2],n)}return r.processFixedAI(4,a[1],n)}}throw new N};r.processFixedAI=function(n,t,i){if(i.length<n){throw new N}var e=i.substring(0,n);if(i.length<n+t){throw new N}var a=i.substring(n,n+t);var u=i.substring(n+t);var f="("+e+")"+a;var s=r.parseFieldsInGeneralPurpose(u);return s==null?f:f+s};r.processVariableAI=function(n,t,i){var e=i.substring(0,n);var a;if(i.length<n+t){a=i.length}else{a=n+t}var u=i.substring(n,a);var f=i.substring(a);var s="("+e+")"+u;var o=r.parseFieldsInGeneralPurpose(f);return o==null?s:s+o};return r}();Gr.VARIABLE_LENGTH=[];Gr.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Gr.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Gr.VARIABLE_LENGTH,20],["22",Gr.VARIABLE_LENGTH,29],["30",Gr.VARIABLE_LENGTH,8],["37",Gr.VARIABLE_LENGTH,8],["90",Gr.VARIABLE_LENGTH,30],["91",Gr.VARIABLE_LENGTH,30],["92",Gr.VARIABLE_LENGTH,30],["93",Gr.VARIABLE_LENGTH,30],["94",Gr.VARIABLE_LENGTH,30],["95",Gr.VARIABLE_LENGTH,30],["96",Gr.VARIABLE_LENGTH,30],["97",Gr.VARIABLE_LENGTH,3],["98",Gr.VARIABLE_LENGTH,30],["99",Gr.VARIABLE_LENGTH,30]];Gr.THREE_DIGIT_DATA_LENGTH=[["240",Gr.VARIABLE_LENGTH,30],["241",Gr.VARIABLE_LENGTH,30],["242",Gr.VARIABLE_LENGTH,6],["250",Gr.VARIABLE_LENGTH,30],["251",Gr.VARIABLE_LENGTH,30],["253",Gr.VARIABLE_LENGTH,17],["254",Gr.VARIABLE_LENGTH,20],["400",Gr.VARIABLE_LENGTH,30],["401",Gr.VARIABLE_LENGTH,30],["402",17],["403",Gr.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Gr.VARIABLE_LENGTH,20],["421",Gr.VARIABLE_LENGTH,15],["422",3],["423",Gr.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]];Gr.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Gr.VARIABLE_LENGTH,15],["391",Gr.VARIABLE_LENGTH,18],["392",Gr.VARIABLE_LENGTH,15],["393",Gr.VARIABLE_LENGTH,18],["703",Gr.VARIABLE_LENGTH,30]];Gr.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Gr.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Gr.VARIABLE_LENGTH,20],["8003",Gr.VARIABLE_LENGTH,30],["8004",Gr.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Gr.VARIABLE_LENGTH,30],["8008",Gr.VARIABLE_LENGTH,12],["8018",18],["8020",Gr.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Gr.VARIABLE_LENGTH,70],["8200",Gr.VARIABLE_LENGTH,70]];var Br=function(){function r(r){this.buffer=new E;this.information=r}r.prototype.decodeAllCodes=function(r,n){var t=n;var i=null;do{var e=this.decodeGeneralPurposeField(t,i);var a=Gr.parseFieldsInGeneralPurpose(e.getNewString());if(a!=null){r.append(a)}if(e.isRemaining()){i=""+e.getRemainingValue()}else{i=null}if(t===e.getNewPosition()){break}t=e.getNewPosition()}while(true);return r.toString()};r.prototype.isStillNumeric=function(r){if(r+7>this.information.getSize()){return r+4<=this.information.getSize()}for(var n=r;n<r+3;++n){if(this.information.get(n)){return true}}return this.information.get(r+3)};r.prototype.decodeNumeric=function(r){if(r+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(r,4);if(n===0){return new Lr(this.information.getSize(),Lr.FNC1,Lr.FNC1)}return new Lr(this.information.getSize(),n-1,Lr.FNC1)}var t=this.extractNumericValueFromBitArray(r,7);var i=(t-8)/11;var e=(t-8)%11;return new Lr(r+7,i,e)};r.prototype.extractNumericValueFromBitArray=function(n,t){return r.extractNumericValueFromBitArray(this.information,n,t)};r.extractNumericValueFromBitArray=function(r,n,t){var i=0;for(var e=0;e<t;++e){if(r.get(n+e)){i|=1<<t-e-1}}return i};r.prototype.decodeGeneralPurposeField=function(r,n){this.buffer.setLengthToZero();if(n!=null){this.buffer.append(n)}this.current.setPosition(r);var t=this.parseBlocks();if(t!=null&&t.isRemaining()){return new Fr(this.current.getPosition(),this.buffer.toString(),t.getRemainingValue())}return new Fr(this.current.getPosition(),this.buffer.toString())};r.prototype.parseBlocks=function(){var r;var n;do{var t=this.current.getPosition();if(this.current.isAlpha()){n=this.parseAlphaBlock();r=n.isFinished()}else if(this.current.isIsoIec646()){n=this.parseIsoIec646Block();r=n.isFinished()}else{n=this.parseNumericBlock();r=n.isFinished()}var i=t!==this.current.getPosition();if(!i&&!r){break}}while(!r);return n.getDecodedInformation()};r.prototype.parseNumericBlock=function(){while(this.isStillNumeric(this.current.getPosition())){var r=this.decodeNumeric(this.current.getPosition());this.current.setPosition(r.getNewPosition());if(r.isFirstDigitFNC1()){var n=void 0;if(r.isSecondDigitFNC1()){n=new Fr(this.current.getPosition(),this.buffer.toString())}else{n=new Fr(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit())}return new Dr(true,n)}this.buffer.append(r.getFirstDigit());if(r.isSecondDigitFNC1()){var n=new Fr(this.current.getPosition(),this.buffer.toString());return new Dr(true,n)}this.buffer.append(r.getSecondDigit())}if(this.isNumericToAlphaNumericLatch(this.current.getPosition())){this.current.setAlpha();this.current.incrementPosition(4)}return new Dr(false)};r.prototype.parseIsoIec646Block=function(){while(this.isStillIsoIec646(this.current.getPosition())){var r=this.decodeIsoIec646(this.current.getPosition());this.current.setPosition(r.getNewPosition());if(r.isFNC1()){var n=new Fr(this.current.getPosition(),this.buffer.toString());return new Dr(true,n)}this.buffer.append(r.getValue())}if(this.isAlphaOr646ToNumericLatch(this.current.getPosition())){this.current.incrementPosition(3);this.current.setNumeric()}else if(this.isAlphaTo646ToAlphaLatch(this.current.getPosition())){if(this.current.getPosition()+5<this.information.getSize()){this.current.incrementPosition(5)}else{this.current.setPosition(this.information.getSize())}this.current.setAlpha()}return new Dr(false)};r.prototype.parseAlphaBlock=function(){while(this.isStillAlpha(this.current.getPosition())){var r=this.decodeAlphanumeric(this.current.getPosition());this.current.setPosition(r.getNewPosition());if(r.isFNC1()){var n=new Fr(this.current.getPosition(),this.buffer.toString());return new Dr(true,n)}this.buffer.append(r.getValue())}if(this.isAlphaOr646ToNumericLatch(this.current.getPosition())){this.current.incrementPosition(3);this.current.setNumeric()}else if(this.isAlphaTo646ToAlphaLatch(this.current.getPosition())){if(this.current.getPosition()+5<this.information.getSize()){this.current.incrementPosition(5)}else{this.current.setPosition(this.information.getSize())}this.current.setIsoIec646()}return new Dr(false)};r.prototype.isStillIsoIec646=function(r){if(r+5>this.information.getSize()){return false}var n=this.extractNumericValueFromBitArray(r,5);if(n>=5&&n<16){return true}if(r+7>this.information.getSize()){return false}var t=this.extractNumericValueFromBitArray(r,7);if(t>=64&&t<116){return true}if(r+8>this.information.getSize()){return false}var i=this.extractNumericValueFromBitArray(r,8);return i>=232&&i<253};r.prototype.decodeIsoIec646=function(r){var n=this.extractNumericValueFromBitArray(r,5);if(n===15){return new xr(r+5,xr.FNC1)}if(n>=5&&n<15){return new xr(r+5,"0"+(n-5))}var t=this.extractNumericValueFromBitArray(r,7);if(t>=64&&t<90){return new xr(r+7,""+(t+1))}if(t>=90&&t<116){return new xr(r+7,""+(t+7))}var i=this.extractNumericValueFromBitArray(r,8);var e;switch(i){case 232:e="!";break;case 233:e='"';break;case 234:e="%";break;case 235:e="&";break;case 236:e="'";break;case 237:e="(";break;case 238:e=")";break;case 239:e="*";break;case 240:e="+";break;case 241:e=",";break;case 242:e="-";break;case 243:e=".";break;case 244:e="/";break;case 245:e=":";break;case 246:e=";";break;case 247:e="<";break;case 248:e="=";break;case 249:e=">";break;case 250:e="?";break;case 251:e="_";break;case 252:e=" ";break;default:throw new M}return new xr(r+8,e)};r.prototype.isStillAlpha=function(r){if(r+5>this.information.getSize()){return false}var n=this.extractNumericValueFromBitArray(r,5);if(n>=5&&n<16){return true}if(r+6>this.information.getSize()){return false}var t=this.extractNumericValueFromBitArray(r,6);return t>=16&&t<63};r.prototype.decodeAlphanumeric=function(r){var n=this.extractNumericValueFromBitArray(r,5);if(n===15){return new xr(r+5,xr.FNC1)}if(n>=5&&n<15){return new xr(r+5,"0"+(n-5))}var t=this.extractNumericValueFromBitArray(r,6);if(t>=32&&t<58){return new xr(r+6,""+(t+33))}var i;switch(t){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Y("Decoding invalid alphanumeric value: "+t)}return new xr(r+6,i)};r.prototype.isAlphaTo646ToAlphaLatch=function(r){if(r+1>this.information.getSize()){return false}for(var n=0;n<5&&n+r<this.information.getSize();++n){if(n===2){if(!this.information.get(r+2)){return false}}else if(this.information.get(r+n)){return false}}return true};r.prototype.isAlphaOr646ToNumericLatch=function(r){if(r+3>this.information.getSize()){return false}for(var n=r;n<r+3;++n){if(this.information.get(n)){return false}}return true};r.prototype.isNumericToAlphaNumericLatch=function(r){if(r+1>this.information.getSize()){return false}for(var n=0;n<4&&n+r<this.information.getSize();++n){if(this.information.get(r+n)){return false}}return true};return r}();var jr=function(){function r(r){this.information=r;this.generalDecoder=new Br(r)}r.prototype.getInformation=function(){return this.information};r.prototype.getGeneralDecoder=function(){return this.generalDecoder};return r}();var Wr=function(r){i(n,r);function n(n){return r.call(this,n)||this}n.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var t=r.length();r.append("9");this.encodeCompressedGtinWithoutAI(r,n,t)};n.prototype.encodeCompressedGtinWithoutAI=function(r,t,i){for(var e=0;e<4;++e){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*e,10);if(a/100===0){r.append("0")}if(a/10===0){r.append("0")}r.append(a)}n.appendCheckDigit(r,i)};n.appendCheckDigit=function(r,n){var t=0;for(var i=0;i<13;i++){var e=r.charAt(i+n).charCodeAt(0)-"0".charCodeAt(0);t+=(i&1)===0?3*e:e}t=10-t%10;if(t===10){t=0}r.append(t)};return n}(jr);Wr.GTIN_SIZE=40;var Hr=function(r){i(n,r);function n(n){return r.call(this,n)||this}n.prototype.parseInformation=function(){var r=new E;r.append("(01)");var t=r.length();var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n.HEADER_SIZE,4);r.append(i);this.encodeCompressedGtinWithoutAI(r,n.HEADER_SIZE+4,t);return this.getGeneralDecoder().decodeAllCodes(r,n.HEADER_SIZE+44)};return n}(Wr);Hr.HEADER_SIZE=1+1+2;var qr=function(r){i(n,r);function n(n){return r.call(this,n)||this}n.prototype.parseInformation=function(){var r=new E;return this.getGeneralDecoder().decodeAllCodes(r,n.HEADER_SIZE)};return n}(jr);qr.HEADER_SIZE=2+1+2;var Xr=function(r){i(n,r);function n(n){return r.call(this,n)||this}n.prototype.encodeCompressedWeight=function(r,n,t){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,t);this.addWeightCode(r,i);var e=this.checkWeight(i);var a=1e5;for(var u=0;u<5;++u){if(e/a===0){r.append("0")}a/=10}r.append(e)};return n}(Wr);var Kr=function(r){i(n,r);function n(n){return r.call(this,n)||this}n.prototype.parseInformation=function(){if(this.getInformation().getSize()!=n.HEADER_SIZE+Xr.GTIN_SIZE+n.WEIGHT_SIZE){throw new N}var r=new E;this.encodeCompressedGtin(r,n.HEADER_SIZE);this.encodeCompressedWeight(r,n.HEADER_SIZE+Xr.GTIN_SIZE,n.WEIGHT_SIZE);return r.toString()};return n}(Xr);Kr.HEADER_SIZE=4+1;Kr.WEIGHT_SIZE=15;var Qr=function(r){i(n,r);function n(n){return r.call(this,n)||this}n.prototype.addWeightCode=function(r,n){r.append("(3103)")};n.prototype.checkWeight=function(r){return r};return n}(Kr);var zr=function(r){i(n,r);function n(n){return r.call(this,n)||this}n.prototype.addWeightCode=function(r,n){if(n<1e4){r.append("(3202)")}else{r.append("(3203)")}};n.prototype.checkWeight=function(r){if(r<1e4){return r}return r-1e4};return n}(Kr);var Zr=function(r){i(n,r);function n(n){return r.call(this,n)||this}n.prototype.parseInformation=function(){if(this.getInformation().getSize()<n.HEADER_SIZE+Wr.GTIN_SIZE){throw new N}var r=new E;this.encodeCompressedGtin(r,n.HEADER_SIZE);var t=this.getGeneralDecoder().extractNumericValueFromBitArray(n.HEADER_SIZE+Wr.GTIN_SIZE,n.LAST_DIGIT_SIZE);r.append("(392");r.append(t);r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(n.HEADER_SIZE+Wr.GTIN_SIZE+n.LAST_DIGIT_SIZE,null);r.append(i.getNewString());return r.toString()};return n}(Wr);Zr.HEADER_SIZE=5+1+2;Zr.LAST_DIGIT_SIZE=2;var Yr=function(r){i(n,r);function n(n){return r.call(this,n)||this}n.prototype.parseInformation=function(){if(this.getInformation().getSize()<n.HEADER_SIZE+Wr.GTIN_SIZE){throw new N}var r=new E;this.encodeCompressedGtin(r,n.HEADER_SIZE);var t=this.getGeneralDecoder().extractNumericValueFromBitArray(n.HEADER_SIZE+Wr.GTIN_SIZE,n.LAST_DIGIT_SIZE);r.append("(393");r.append(t);r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n.HEADER_SIZE+Wr.GTIN_SIZE+n.LAST_DIGIT_SIZE,n.FIRST_THREE_DIGITS_SIZE);if(i/100==0){r.append("0")}if(i/10==0){r.append("0")}r.append(i);var e=this.getGeneralDecoder().decodeGeneralPurposeField(n.HEADER_SIZE+Wr.GTIN_SIZE+n.LAST_DIGIT_SIZE+n.FIRST_THREE_DIGITS_SIZE,null);r.append(e.getNewString());return r.toString()};return n}(Wr);Yr.HEADER_SIZE=5+1+2;Yr.LAST_DIGIT_SIZE=2;Yr.FIRST_THREE_DIGITS_SIZE=10;var Jr=function(r){i(n,r);function n(n,t,i){var e=r.call(this,n)||this;e.dateCode=i;e.firstAIdigits=t;return e}n.prototype.parseInformation=function(){if(this.getInformation().getSize()!=n.HEADER_SIZE+n.GTIN_SIZE+n.WEIGHT_SIZE+n.DATE_SIZE){throw new N}var r=new E;this.encodeCompressedGtin(r,n.HEADER_SIZE);this.encodeCompressedWeight(r,n.HEADER_SIZE+n.GTIN_SIZE,n.WEIGHT_SIZE);this.encodeCompressedDate(r,n.HEADER_SIZE+n.GTIN_SIZE+n.WEIGHT_SIZE);return r.toString()};n.prototype.encodeCompressedDate=function(r,t){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n.DATE_SIZE);if(i==38400){return}r.append("(");r.append(this.dateCode);r.append(")");var e=i%32;i/=32;var a=i%12+1;i/=12;var u=i;if(u/10==0){r.append("0")}r.append(u);if(a/10==0){r.append("0")}r.append(a);if(e/10==0){r.append("0")}r.append(e)};n.prototype.addWeightCode=function(r,n){r.append("(");r.append(this.firstAIdigits);r.append(n/1e5);r.append(")")};n.prototype.checkWeight=function(r){return r%1e5};return n}(Xr);Jr.HEADER_SIZE=7+1;Jr.WEIGHT_SIZE=20;Jr.DATE_SIZE=16;function Vr(r){try{if(r.get(1)){return new Hr(r)}if(!r.get(2)){return new qr(r)}var n=Br.extractNumericValueFromBitArray(r,1,4);switch(n){case 4:return new Qr(r);case 5:return new zr(r)}var t=Br.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new Zr(r);case 13:return new Yr(r)}var i=Br.extractNumericValueFromBitArray(r,1,7);switch(i){case 56:return new Jr(r,"310","11");case 57:return new Jr(r,"320","11");case 58:return new Jr(r,"310","13");case 59:return new Jr(r,"320","13");case 60:return new Jr(r,"310","15");case 61:return new Jr(r,"320","15");case 62:return new Jr(r,"310","17");case 63:return new Jr(r,"320","17")}}catch(n){console.log(n);throw new Y("unknown decoder: "+r)}}var $r=function(){function r(r,n,t,i){this.leftchar=r;this.rightchar=n;this.finderpattern=t;this.maybeLast=i}r.prototype.mayBeLast=function(){return this.maybeLast};r.prototype.getLeftChar=function(){return this.leftchar};r.prototype.getRightChar=function(){return this.rightchar};r.prototype.getFinderPattern=function(){return this.finderpattern};r.prototype.mustBeLast=function(){return this.rightchar==null};r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"};r.equals=function(n,t){if(!(n instanceof r)){return false}return r.equalsOrNull(n.leftchar,t.leftchar)&&r.equalsOrNull(n.rightchar,t.rightchar)&&r.equalsOrNull(n.finderpattern,t.finderpattern)};r.equalsOrNull=function(n,t){return n===null?t===null:r.equals(n,t)};r.prototype.hashCode=function(){var r=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return r};return r}();var rn=function(){function r(r,n,t){this.pairs=r;this.rowNumber=n;this.wasReversed=t}r.prototype.getPairs=function(){return this.pairs};r.prototype.getRowNumber=function(){return this.rowNumber};r.prototype.isReversed=function(){return this.wasReversed};r.prototype.isEquivalent=function(r){return this.checkEqualitity(this,r)};r.prototype.toString=function(){return"{ "+this.pairs+" }"};r.prototype.equals=function(n,t){if(!(n instanceof r)){return false}return this.checkEqualitity(n,t)&&n.wasReversed===t.wasReversed};r.prototype.checkEqualitity=function(r,n){if(!r||!n)return;var t;r.forEach((function(r,i){n.forEach((function(n){if(r.getLeftChar().getValue()===n.getLeftChar().getValue()&&r.getRightChar().getValue()===n.getRightChar().getValue()&&r.getFinderPatter().getValue()===n.getFinderPatter().getValue()){t=true}}))}));return t};return r}();var nn=function(r){i(n,r);function n(t){var i=r.apply(this,arguments)||this;i.pairs=new Array(n.MAX_PAIRS);i.rows=new Array;i.startEnd=[2];i.verbose=t===true;return i}n.prototype.decodeRow=function(r,t,i){this.pairs.length=0;this.startFromEven=false;try{return n.constructResult(this.decodeRow2pairs(r,t))}catch(r){if(this.verbose){console.log(r)}}this.pairs.length=0;this.startFromEven=true;return n.constructResult(this.decodeRow2pairs(r,t))};n.prototype.reset=function(){this.pairs.length=0;this.rows.length=0};n.prototype.decodeRow2pairs=function(r,n){var t=false;while(!t){try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(r){if(r instanceof N){if(!this.pairs.length){throw new N}t=true}}}if(this.checkChecksum()){return this.pairs}var i;if(this.rows.length){i=true}else{i=false}this.storeRow(r,false);if(i){var e=this.checkRowsBoolean(false);if(e!=null){return e}e=this.checkRowsBoolean(true);if(e!=null){return e}}throw new N};n.prototype.checkRowsBoolean=function(r){if(this.rows.length>25){this.rows.length=0;return null}this.pairs.length=0;if(r){this.rows=this.rows.reverse()}var n=null;try{n=this.checkRows(new Array,0)}catch(r){if(this.verbose){console.log(r)}}if(r){this.rows=this.rows.reverse()}return n};n.prototype.checkRows=function(r,t){for(var i=t;i<this.rows.length;i++){var e=this.rows[i];this.pairs.length=0;for(var a=0,u=r;a<u.length;a++){var f=u[a];this.pairs.push(f.getPairs())}this.pairs.push(e.getPairs());if(!n.isValidSequence(this.pairs)){continue}if(this.checkChecksum()){return this.pairs}var s=new Array(r);s.push(e);try{return this.checkRows(s,i+1)}catch(r){if(this.verbose){console.log(r)}}}throw new N};n.isValidSequence=function(r){for(var t=0,i=n.FINDER_PATTERN_SEQUENCES;t<i.length;t++){var e=i[t];if(r.length>e.length){continue}var a=true;for(var u=0;u<r.length;u++){if(r[u].getFinderPattern().getValue()!=e[u]){a=false;break}}if(a){return true}}return false};n.prototype.storeRow=function(r,t){var i=0;var e=false;var a=false;while(i<this.rows.length){var u=this.rows[i];if(u.getRowNumber()>r){a=u.isEquivalent(this.pairs);break}e=u.isEquivalent(this.pairs);i++}if(a||e){return}if(n.isPartialRow(this.pairs,this.rows)){return}this.rows.push(i,new rn(this.pairs,r,t));this.removePartialRows(this.pairs,this.rows)};n.prototype.removePartialRows=function(r,n){for(var t=0,i=n;t<i.length;t++){var e=i[t];if(e.getPairs().length===r.length){continue}for(var a=0,u=e.getPairs();a<u.length;a++){var f=u[a];for(var s=0,o=r;s<o.length;s++){var h=o[s];if($r.equals(f,h)){break}}}}};n.isPartialRow=function(r,n){for(var t=0,i=n;t<i.length;t++){var e=i[t];var a=true;for(var u=0,f=r;u<f.length;u++){var s=f[u];var o=false;for(var h=0,v=e.getPairs();h<v.length;h++){var c=v[h];if(s.equals(c)){o=true;break}}if(!o){a=false;break}}if(a){return true}}return false};n.prototype.getRows=function(){return this.rows};n.constructResult=function(r){var n=Pr.buildBitArray(r);var t=Vr(n);var i=t.parseInformation();var e=r[0].getFinderPattern().getResultPoints();var a=r[r.length-1].getFinderPattern().getResultPoints();var u=[e[0],e[1],a[0],a[1]];return new G(i,null,null,u,j.RSS_EXPANDED,null)};n.prototype.checkChecksum=function(){var r=this.pairs.get(0);var n=r.getLeftChar();var t=r.getRightChar();if(t==null){return false}var i=t.getChecksumPortion();var e=2;for(var a=1;a<this.pairs.size();++a){var u=this.pairs.get(a);i+=u.getLeftChar().getChecksumPortion();e++;var f=u.getRightChar();if(f!=null){i+=f.getChecksumPortion();e++}}i%=211;var s=211*(e-4)+i;return s==n.getValue()};n.getNextSecondBar=function(r,n){var t;if(r.get(n)){t=r.getNextUnset(n);t=r.getNextSet(t)}else{t=r.getNextSet(n);t=r.getNextUnset(t)}return t};n.prototype.retrieveNextPair=function(r,t,i){var e=t.length%2==0;if(this.startFromEven){e=!e}var a;var u=true;var f=-1;do{this.findNextPair(r,t,f);a=this.parseFoundFinderPattern(r,i,e);if(a==null){f=n.getNextSecondBar(r,this.startEnd[0])}else{u=false}}while(u);var s=this.decodeDataCharacter(r,a,e,true);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast()){throw new N}var o;try{o=this.decodeDataCharacter(r,a,e,false)}catch(r){o=null;if(this.verbose){console.log(r)}}return new $r(s,o,a,true)};n.prototype.isEmptyPair=function(r){if(r.length===0){return true}return false};n.prototype.findNextPair=function(r,t,i){var e=this.getDecodeFinderCounters();e[0]=0;e[1]=0;e[2]=0;e[3]=0;var a=r.getSize();var u;if(i>=0){u=i}else if(this.isEmptyPair(t)){u=0}else{var f=t[t.length-1];u=f.getFinderPattern().getStartEnd()[1]}var s=t.length%2!=0;if(this.startFromEven){s=!s}var o=false;while(u<a){o=!r.get(u);if(!o){break}u++}var h=0;var v=u;for(var c=u;c<a;c++){if(r.get(c)!=o){e[h]++}else{if(h==3){if(s){n.reverseCounters(e)}if(n.isFinderPattern(e)){this.startEnd[0]=v;this.startEnd[1]=c;return}if(s){n.reverseCounters(e)}v+=e[0]+e[1];e[0]=e[2];e[1]=e[3];e[2]=0;e[3]=0;h--}else{h++}e[h]=1;o=!o}}throw new N};n.reverseCounters=function(r){var n=r.length;for(var t=0;t<n/2;++t){var i=r[t];r[t]=r[n-t-1];r[n-t-1]=i}};n.prototype.parseFoundFinderPattern=function(r,t,i){var e;var a;var u;if(i){var f=this.startEnd[0]-1;while(f>=0&&!r.get(f)){f--}f++;e=this.startEnd[0]-f;a=f;u=this.startEnd[1]}else{a=this.startEnd[0];u=r.getNextUnset(this.startEnd[1]+1);e=u-this.startEnd[1]}var s=this.getDecodeFinderCounters();w.arraycopy(s,0,s,1,s.length-1);s[0]=e;var o;try{o=this.parseFinderValue(s,n.FINDER_PATTERNS)}catch(r){return null}return new Tr(o,[a,u],a,u,t)};n.prototype.decodeDataCharacter=function(r,t,i,e){var a=this.getDataCharacterCounters();for(var u=0;u<a.length;u++){a[u]=0}if(e){n.recordPatternInReverse(r,t.getStartEnd()[0],a)}else{n.recordPattern(r,t.getStartEnd()[1],a);for(var f=0,s=a.length-1;f<s;f++,s--){var o=a[f];a[f]=a[s];a[s]=o}}var h=17;var v=rr.sum(new Int32Array(a))/h;var c=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(v-c)/c>.3){throw new N}var w=this.getOddCounts();var l=this.getEvenCounts();var d=this.getOddRoundingErrors();var y=this.getEvenRoundingErrors();for(var f=0;f<a.length;f++){var A=1*a[f]/v;var I=A+.5;if(I<1){if(A<.3){throw new N}I=1}else if(I>8){if(A>8.7){throw new N}I=8}var b=f/2;if((f&1)==0){w[b]=I;d[b]=A-I}else{l[b]=I;y[b]=A-I}}this.adjustOddEvenCounts(h);var p=4*t.getValue()+(i?0:2)+(e?0:1)-1;var M=0;var _=0;for(var f=w.length-1;f>=0;f--){if(n.isNotA1left(t,i,e)){var m=n.WEIGHTS[p][2*f];_+=w[f]*m}M+=w[f]}var k=0;for(var f=l.length-1;f>=0;f--){if(n.isNotA1left(t,i,e)){var m=n.WEIGHTS[p][2*f+1];k+=l[f]*m}}var g=_+k;if((M&1)!=0||M>13||M<4){throw new N}var S=(13-M)/2;var E=n.SYMBOL_WIDEST[S];var C=9-E;var O=Rr.getRSSvalue(w,E,true);var T=Rr.getRSSvalue(l,C,false);var R=n.EVEN_TOTAL_SUBSET[S];var P=n.GSUM[S];var D=O*R+T+P;return new Or(D,g)};n.isNotA1left=function(r,n,t){return!(r.getValue()==0&&n&&t)};n.prototype.adjustOddEvenCounts=function(r){var t=rr.sum(new Int32Array(this.getOddCounts()));var i=rr.sum(new Int32Array(this.getEvenCounts()));var e=false;var a=false;if(t>13){a=true}else if(t<4){e=true}var u=false;var f=false;if(i>13){f=true}else if(i<4){u=true}var s=t+i-r;var o=(t&1)==1;var h=(i&1)==0;if(s==1){if(o){if(h){throw new N}a=true}else{if(!h){throw new N}f=true}}else if(s==-1){if(o){if(h){throw new N}e=true}else{if(!h){throw new N}u=true}}else if(s==0){if(o){if(!h){throw new N}if(t<i){e=true;f=true}else{a=true;u=true}}else{if(h){throw new N}}}else{throw new N}if(e){if(a){throw new N}n.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a){n.decrement(this.getOddCounts(),this.getOddRoundingErrors())}if(u){if(f){throw new N}n.increment(this.getEvenCounts(),this.getOddRoundingErrors())}if(f){n.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}};return n}(Nr);nn.SYMBOL_WIDEST=[7,5,4,3,1];nn.EVEN_TOTAL_SUBSET=[4,20,52,104,204];nn.GSUM=[0,348,1388,2948,3988];nn.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])];nn.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]];nn.FINDER_PAT_A=0;nn.FINDER_PAT_B=1;nn.FINDER_PAT_C=2;nn.FINDER_PAT_D=3;nn.FINDER_PAT_E=4;nn.FINDER_PAT_F=5;nn.FINDER_PATTERN_SEQUENCES=[[nn.FINDER_PAT_A,nn.FINDER_PAT_A],[nn.FINDER_PAT_A,nn.FINDER_PAT_B,nn.FINDER_PAT_B],[nn.FINDER_PAT_A,nn.FINDER_PAT_C,nn.FINDER_PAT_B,nn.FINDER_PAT_D],[nn.FINDER_PAT_A,nn.FINDER_PAT_E,nn.FINDER_PAT_B,nn.FINDER_PAT_D,nn.FINDER_PAT_C],[nn.FINDER_PAT_A,nn.FINDER_PAT_E,nn.FINDER_PAT_B,nn.FINDER_PAT_D,nn.FINDER_PAT_D,nn.FINDER_PAT_F],[nn.FINDER_PAT_A,nn.FINDER_PAT_E,nn.FINDER_PAT_B,nn.FINDER_PAT_D,nn.FINDER_PAT_E,nn.FINDER_PAT_F,nn.FINDER_PAT_F],[nn.FINDER_PAT_A,nn.FINDER_PAT_A,nn.FINDER_PAT_B,nn.FINDER_PAT_B,nn.FINDER_PAT_C,nn.FINDER_PAT_C,nn.FINDER_PAT_D,nn.FINDER_PAT_D],[nn.FINDER_PAT_A,nn.FINDER_PAT_A,nn.FINDER_PAT_B,nn.FINDER_PAT_B,nn.FINDER_PAT_C,nn.FINDER_PAT_C,nn.FINDER_PAT_D,nn.FINDER_PAT_E,nn.FINDER_PAT_E],[nn.FINDER_PAT_A,nn.FINDER_PAT_A,nn.FINDER_PAT_B,nn.FINDER_PAT_B,nn.FINDER_PAT_C,nn.FINDER_PAT_C,nn.FINDER_PAT_D,nn.FINDER_PAT_E,nn.FINDER_PAT_F,nn.FINDER_PAT_F],[nn.FINDER_PAT_A,nn.FINDER_PAT_A,nn.FINDER_PAT_B,nn.FINDER_PAT_B,nn.FINDER_PAT_C,nn.FINDER_PAT_D,nn.FINDER_PAT_D,nn.FINDER_PAT_E,nn.FINDER_PAT_E,nn.FINDER_PAT_F,nn.FINDER_PAT_F]];nn.MAX_PAIRS=11;var tn=function(r){i(n,r);function n(n,t,i){var e=r.call(this,n,t)||this;e.count=0;e.finderPattern=i;return e}n.prototype.getFinderPattern=function(){return this.finderPattern};n.prototype.getCount=function(){return this.count};n.prototype.incrementCount=function(){this.count++};return n}(Or);var en=function(r){i(n,r);function n(){var n=r.apply(this,arguments)||this;n.possibleLeftPairs=[];n.possibleRightPairs=[];return n}n.prototype.decodeRow=function(r,t,i){var e=this.decodePair(t,false,r,i);n.addOrTally(this.possibleLeftPairs,e);t.reverse();var a=this.decodePair(t,true,r,i);n.addOrTally(this.possibleRightPairs,a);t.reverse();for(var u=0,f=this.possibleLeftPairs;u<f.length;u++){var s=f[u];if(s.getCount()>1){for(var o=0,h=this.possibleRightPairs;o<h.length;o++){var v=h[o];if(v.getCount()>1&&n.checkChecksum(s,v)){return n.constructResult(s,v)}}}}throw new N};n.addOrTally=function(r,n){if(n==null){return}var t=false;for(var i=0,e=r;i<e.length;i++){var a=e[i];if(a.getValue()===n.getValue()){a.incrementCount();t=true;break}}if(!t){r.push(n)}};n.prototype.reset=function(){this.possibleLeftPairs.length=0;this.possibleRightPairs.length=0};n.constructResult=function(r,n){var t=4537077*r.getValue()+n.getValue();var i=new String(t).toString();var e=new E;for(var a=13-i.length;a>0;a--){e.append("0")}e.append(i);var u=0;for(var a=0;a<13;a++){var f=e.charAt(a).charCodeAt(0)-"0".charCodeAt(0);u+=(a&1)===0?3*f:f}u=10-u%10;if(u===10){u=0}e.append(u.toString());var s=r.getFinderPattern().getResultPoints();var o=n.getFinderPattern().getResultPoints();return new G(e.toString(),null,0,[s[0],s[1],o[0],o[1]],j.RSS_14,(new Date).getTime())};n.checkChecksum=function(r,n){var t=(r.getChecksumPortion()+16*n.getChecksumPortion())%79;var i=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();if(i>72){i--}if(i>8){i--}return t===i};n.prototype.decodePair=function(r,n,t,i){try{var e=this.findFinderPattern(r,n);var a=this.parseFoundFinderPattern(r,t,n,e);var u=i==null?null:i.get(p.NEED_RESULT_POINT_CALLBACK);if(u!=null){var f=(e[0]+e[1])/2;if(n){f=r.getSize()-1-f}u.foundPossibleResultPoint(new tr(f,t))}var s=this.decodeDataCharacter(r,a,true);var o=this.decodeDataCharacter(r,a,false);return new tn(1597*s.getValue()+o.getValue(),s.getChecksumPortion()+4*o.getChecksumPortion(),a)}catch(r){return null}};n.prototype.decodeDataCharacter=function(r,t,i){var e=this.getDataCharacterCounters();for(var a=0;a<e.length;a++){e[a]=0}if(i){dr.recordPatternInReverse(r,t.getStartEnd()[0],e)}else{dr.recordPattern(r,t.getStartEnd()[1]+1,e);for(var u=0,f=e.length-1;u<f;u++,f--){var s=e[u];e[u]=e[f];e[f]=s}}var o=i?16:15;var h=rr.sum(new Int32Array(e))/o;var v=this.getOddCounts();var c=this.getEvenCounts();var w=this.getOddRoundingErrors();var l=this.getEvenRoundingErrors();for(var u=0;u<e.length;u++){var d=e[u]/h;var y=Math.floor(d+.5);if(y<1){y=1}else if(y>8){y=8}var A=Math.floor(u/2);if((u&1)===0){v[A]=y;w[A]=d-y}else{c[A]=y;l[A]=d-y}}this.adjustOddEvenCounts(i,o);var I=0;var b=0;for(var u=v.length-1;u>=0;u--){b*=9;b+=v[u];I+=v[u]}var p=0;var M=0;for(var u=c.length-1;u>=0;u--){p*=9;p+=c[u];M+=c[u]}var _=b+3*p;if(i){if((I&1)!==0||I>12||I<4){throw new N}var m=(12-I)/2;var k=n.OUTSIDE_ODD_WIDEST[m];var g=9-k;var S=Rr.getRSSvalue(v,k,false);var E=Rr.getRSSvalue(c,g,true);var C=n.OUTSIDE_EVEN_TOTAL_SUBSET[m];var O=n.OUTSIDE_GSUM[m];return new Or(S*C+E+O,_)}else{if((M&1)!==0||M>10||M<4){throw new N}var m=(10-M)/2;var k=n.INSIDE_ODD_WIDEST[m];var g=9-k;var S=Rr.getRSSvalue(v,k,true);var E=Rr.getRSSvalue(c,g,false);var T=n.INSIDE_ODD_TOTAL_SUBSET[m];var O=n.INSIDE_GSUM[m];return new Or(E*T+S+O,_)}};n.prototype.findFinderPattern=function(r,n){var t=this.getDecodeFinderCounters();t[0]=0;t[1]=0;t[2]=0;t[3]=0;var i=r.getSize();var e=false;var a=0;while(a<i){e=!r.get(a);if(n===e){break}a++}var u=0;var f=a;for(var s=a;s<i;s++){if(r.get(s)!==e){t[u]++}else{if(u===3){if(Nr.isFinderPattern(t)){return[f,s]}f+=t[0]+t[1];t[0]=t[2];t[1]=t[3];t[2]=0;t[3]=0;u--}else{u++}t[u]=1;e=!e}}throw new N};n.prototype.parseFoundFinderPattern=function(r,t,i,e){var a=r.get(e[0]);var u=e[0]-1;while(u>=0&&a!==r.get(u)){u--}u++;var f=e[0]-u;var s=this.getDecodeFinderCounters();var o=new Int32Array(s.length);w.arraycopy(s,0,o,1,s.length-1);o[0]=f;var h=this.parseFinderValue(o,n.FINDER_PATTERNS);var v=u;var c=e[1];if(i){v=r.getSize()-1-v;c=r.getSize()-1-c}return new Tr(h,[u,e[1]],v,c,t)};n.prototype.adjustOddEvenCounts=function(r,n){var t=rr.sum(new Int32Array(this.getOddCounts()));var i=rr.sum(new Int32Array(this.getEvenCounts()));var e=false;var a=false;var u=false;var f=false;if(r){if(t>12){a=true}else if(t<4){e=true}if(i>12){f=true}else if(i<4){u=true}}else{if(t>11){a=true}else if(t<5){e=true}if(i>10){f=true}else if(i<4){u=true}}var s=t+i-n;var o=(t&1)===(r?1:0);var h=(i&1)===1;if(s===1){if(o){if(h){throw new N}a=true}else{if(!h){throw new N}f=true}}else if(s===-1){if(o){if(h){throw new N}e=true}else{if(!h){throw new N}u=true}}else if(s===0){if(o){if(!h){throw new N}if(t<i){e=true;f=true}else{a=true;u=true}}else{if(h){throw new N}}}else{throw new N}if(e){if(a){throw new N}Nr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a){Nr.decrement(this.getOddCounts(),this.getOddRoundingErrors())}if(u){if(f){throw new N}Nr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}if(f){Nr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}};return n}(Nr);en.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126];en.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81];en.OUTSIDE_GSUM=[0,161,961,2015,2715];en.INSIDE_GSUM=[0,336,1036,1516];en.OUTSIDE_ODD_WIDEST=[8,6,4,3,1];en.INSIDE_ODD_WIDEST=[2,4,6,8];en.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];var an=function(r){i(n,r);function n(n,t){var i=r.call(this)||this;i.readers=[];i.verbose=t===true;var e=!n?null:n.get(p.POSSIBLE_FORMATS);var a=n&&n.get(p.ASSUME_CODE_39_CHECK_DIGIT)!==undefined;if(e){if(e.includes(j.EAN_13)||e.includes(j.UPC_A)||e.includes(j.EAN_8)||e.includes(j.UPC_E)){i.readers.push(new Cr(n))}if(e.includes(j.CODE_39)){i.readers.push(new Ar(a))}if(e.includes(j.CODE_128)){i.readers.push(new yr)}if(e.includes(j.ITF)){i.readers.push(new Ir)}if(e.includes(j.RSS_14)){i.readers.push(new en)}if(e.includes(j.RSS_EXPANDED)){i.readers.push(new nn(i.verbose))}}else{i.readers.push(new Cr(n));i.readers.push(new Ar);i.readers.push(new Cr(n));i.readers.push(new yr);i.readers.push(new Ir);i.readers.push(new en);i.readers.push(new nn(i.verbose))}return i}n.prototype.decodeRow=function(r,n,t){for(var i=0;i<this.readers.length;i++){try{return this.readers[i].decodeRow(r,n,t)}catch(r){}}throw new N};n.prototype.reset=function(){this.readers.forEach((function(r){return r.reset()}))};return n}(dr);var un=function(r){i(n,r);function n(n,t){if(n===void 0){n=500}return r.call(this,new an(t),n,t)||this}return n}(L);var fn=function(){function r(r,n,t){this.ecCodewords=r;this.ecBlocks=[n];t&&this.ecBlocks.push(t)}r.prototype.getECCodewords=function(){return this.ecCodewords};r.prototype.getECBlocks=function(){return this.ecBlocks};return r}();var sn=function(){function r(r,n){this.count=r;this.dataCodewords=n}r.prototype.getCount=function(){return this.count};r.prototype.getDataCodewords=function(){return this.dataCodewords};return r}();var on=function(){function r(r,n,t,i,e,a){this.versionNumber=r;this.symbolSizeRows=n;this.symbolSizeColumns=t;this.dataRegionSizeRows=i;this.dataRegionSizeColumns=e;this.ecBlocks=a;var u=0;var f=a.getECCodewords();var s=a.getECBlocks();for(var o=0,h=s;o<h.length;o++){var v=h[o];u+=v.getCount()*(v.getDataCodewords()+f)}this.totalCodewords=u}r.prototype.getVersionNumber=function(){return this.versionNumber};r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows};r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns};r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows};r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns};r.prototype.getTotalCodewords=function(){return this.totalCodewords};r.prototype.getECBlocks=function(){return this.ecBlocks};r.getVersionForDimensions=function(n,t){if((n&1)!==0||(t&1)!==0){throw new M}for(var i=0,e=r.VERSIONS;i<e.length;i++){var a=e[i];if(a.symbolSizeRows===n&&a.symbolSizeColumns===t){return a}}throw new M};r.prototype.toString=function(){return""+this.versionNumber};r.buildVersions=function(){return[new r(1,10,10,8,8,new fn(5,new sn(1,3))),new r(2,12,12,10,10,new fn(7,new sn(1,5))),new r(3,14,14,12,12,new fn(10,new sn(1,8))),new r(4,16,16,14,14,new fn(12,new sn(1,12))),new r(5,18,18,16,16,new fn(14,new sn(1,18))),new r(6,20,20,18,18,new fn(18,new sn(1,22))),new r(7,22,22,20,20,new fn(20,new sn(1,30))),new r(8,24,24,22,22,new fn(24,new sn(1,36))),new r(9,26,26,24,24,new fn(28,new sn(1,44))),new r(10,32,32,14,14,new fn(36,new sn(1,62))),new r(11,36,36,16,16,new fn(42,new sn(1,86))),new r(12,40,40,18,18,new fn(48,new sn(1,114))),new r(13,44,44,20,20,new fn(56,new sn(1,144))),new r(14,48,48,22,22,new fn(68,new sn(1,174))),new r(15,52,52,24,24,new fn(42,new sn(2,102))),new r(16,64,64,14,14,new fn(56,new sn(2,140))),new r(17,72,72,16,16,new fn(36,new sn(4,92))),new r(18,80,80,18,18,new fn(48,new sn(4,114))),new r(19,88,88,20,20,new fn(56,new sn(4,144))),new r(20,96,96,22,22,new fn(68,new sn(4,174))),new r(21,104,104,24,24,new fn(56,new sn(6,136))),new r(22,120,120,18,18,new fn(68,new sn(6,175))),new r(23,132,132,20,20,new fn(62,new sn(8,163))),new r(24,144,144,22,22,new fn(62,new sn(8,156),new sn(2,155))),new r(25,8,18,6,16,new fn(7,new sn(1,5))),new r(26,8,32,6,14,new fn(11,new sn(1,10))),new r(27,12,26,10,24,new fn(14,new sn(1,16))),new r(28,12,36,10,16,new fn(18,new sn(1,22))),new r(29,16,36,14,16,new fn(24,new sn(1,32))),new r(30,16,48,14,22,new fn(28,new sn(1,49)))]};return r}();on.VERSIONS=on.buildVersions();var hn=function(){function r(n){var t=n.getHeight();if(t<8||t>144||(t&1)!==0){throw new M}this.version=r.readVersion(n);this.mappingBitMatrix=this.extractDataRegion(n);this.readMappingMatrix=new C(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}r.prototype.getVersion=function(){return this.version};r.readVersion=function(r){var n=r.getHeight();var t=r.getWidth();return on.getVersionForDimensions(n,t)};r.prototype.readCodewords=function(){var r=new Int8Array(this.version.getTotalCodewords());var n=0;var t=4;var i=0;var e=this.mappingBitMatrix.getHeight();var a=this.mappingBitMatrix.getWidth();var u=false;var f=false;var s=false;var o=false;do{if(t===e&&i===0&&!u){r[n++]=this.readCorner1(e,a)&255;t-=2;i+=2;u=true}else if(t===e-2&&i===0&&(a&3)!==0&&!f){r[n++]=this.readCorner2(e,a)&255;t-=2;i+=2;f=true}else if(t===e+4&&i===2&&(a&7)===0&&!s){r[n++]=this.readCorner3(e,a)&255;t-=2;i+=2;s=true}else if(t===e-2&&i===0&&(a&7)===4&&!o){r[n++]=this.readCorner4(e,a)&255;t-=2;i+=2;o=true}else{do{if(t<e&&i>=0&&!this.readMappingMatrix.get(i,t)){r[n++]=this.readUtah(t,i,e,a)&255}t-=2;i+=2}while(t>=0&&i<a);t+=1;i+=3;do{if(t>=0&&i<a&&!this.readMappingMatrix.get(i,t)){r[n++]=this.readUtah(t,i,e,a)&255}t+=2;i-=2}while(t<e&&i>=0);t+=3;i+=1}}while(t<e||i<a);if(n!==this.version.getTotalCodewords()){throw new M}return r};r.prototype.readModule=function(r,n,t,i){if(r<0){r+=t;n+=4-(t+4&7)}if(n<0){n+=i;r+=4-(i+4&7)}this.readMappingMatrix.set(n,r);return this.mappingBitMatrix.get(n,r)};r.prototype.readUtah=function(r,n,t,i){var e=0;if(this.readModule(r-2,n-2,t,i)){e|=1}e<<=1;if(this.readModule(r-2,n-1,t,i)){e|=1}e<<=1;if(this.readModule(r-1,n-2,t,i)){e|=1}e<<=1;if(this.readModule(r-1,n-1,t,i)){e|=1}e<<=1;if(this.readModule(r-1,n,t,i)){e|=1}e<<=1;if(this.readModule(r,n-2,t,i)){e|=1}e<<=1;if(this.readModule(r,n-1,t,i)){e|=1}e<<=1;if(this.readModule(r,n,t,i)){e|=1}return e};r.prototype.readCorner1=function(r,n){var t=0;if(this.readModule(r-1,0,r,n)){t|=1}t<<=1;if(this.readModule(r-1,1,r,n)){t|=1}t<<=1;if(this.readModule(r-1,2,r,n)){t|=1}t<<=1;if(this.readModule(0,n-2,r,n)){t|=1}t<<=1;if(this.readModule(0,n-1,r,n)){t|=1}t<<=1;if(this.readModule(1,n-1,r,n)){t|=1}t<<=1;if(this.readModule(2,n-1,r,n)){t|=1}t<<=1;if(this.readModule(3,n-1,r,n)){t|=1}return t};r.prototype.readCorner2=function(r,n){var t=0;if(this.readModule(r-3,0,r,n)){t|=1}t<<=1;if(this.readModule(r-2,0,r,n)){t|=1}t<<=1;if(this.readModule(r-1,0,r,n)){t|=1}t<<=1;if(this.readModule(0,n-4,r,n)){t|=1}t<<=1;if(this.readModule(0,n-3,r,n)){t|=1}t<<=1;if(this.readModule(0,n-2,r,n)){t|=1}t<<=1;if(this.readModule(0,n-1,r,n)){t|=1}t<<=1;if(this.readModule(1,n-1,r,n)){t|=1}return t};r.prototype.readCorner3=function(r,n){var t=0;if(this.readModule(r-1,0,r,n)){t|=1}t<<=1;if(this.readModule(r-1,n-1,r,n)){t|=1}t<<=1;if(this.readModule(0,n-3,r,n)){t|=1}t<<=1;if(this.readModule(0,n-2,r,n)){t|=1}t<<=1;if(this.readModule(0,n-1,r,n)){t|=1}t<<=1;if(this.readModule(1,n-3,r,n)){t|=1}t<<=1;if(this.readModule(1,n-2,r,n)){t|=1}t<<=1;if(this.readModule(1,n-1,r,n)){t|=1}return t};r.prototype.readCorner4=function(r,n){var t=0;if(this.readModule(r-3,0,r,n)){t|=1}t<<=1;if(this.readModule(r-2,0,r,n)){t|=1}t<<=1;if(this.readModule(r-1,0,r,n)){t|=1}t<<=1;if(this.readModule(0,n-2,r,n)){t|=1}t<<=1;if(this.readModule(0,n-1,r,n)){t|=1}t<<=1;if(this.readModule(1,n-1,r,n)){t|=1}t<<=1;if(this.readModule(2,n-1,r,n)){t|=1}t<<=1;if(this.readModule(3,n-1,r,n)){t|=1}return t};r.prototype.extractDataRegion=function(r){var n=this.version.getSymbolSizeRows();var t=this.version.getSymbolSizeColumns();if(r.getHeight()!==n){throw new o("Dimension of bitMatrix must match the version size")}var i=this.version.getDataRegionSizeRows();var e=this.version.getDataRegionSizeColumns();var a=n/i|0;var u=t/e|0;var f=a*i;var s=u*e;var h=new C(s,f);for(var v=0;v<a;++v){var c=v*i;for(var w=0;w<u;++w){var l=w*e;for(var d=0;d<i;++d){var y=v*(i+2)+1+d;var A=c+d;for(var I=0;I<e;++I){var b=w*(e+2)+1+I;if(r.get(b,y)){var p=l+I;h.set(p,A)}}}}}return h};return r}();var vn=function(){function r(r,n){this.numDataCodewords=r;this.codewords=n}r.getDataBlocks=function(n,t){var i=t.getECBlocks();var e=0;var a=i.getECBlocks();for(var u=0,f=a;u<f.length;u++){var s=f[u];e+=s.getCount()}var h=new Array(e);var v=0;for(var c=0,w=a;c<w.length;c++){var s=w[c];for(var l=0;l<s.getCount();l++){var d=s.getDataCodewords();var y=i.getECCodewords()+d;h[v++]=new r(d,new Uint8Array(y))}}var A=h[0].codewords.length;var I=A-i.getECCodewords();var b=I-1;var p=0;for(var l=0;l<b;l++){for(var M=0;M<v;M++){h[M].codewords[l]=n[p++]}}var _=t.getVersionNumber()===24;var m=_?8:v;for(var M=0;M<m;M++){h[M].codewords[I-1]=n[p++]}var k=h[0].codewords.length;for(var l=I;l<k;l++){for(var M=0;M<v;M++){var g=_?(M+8)%v:M;var S=_&&g>7?l-1:l;h[g].codewords[S]=n[p++]}}if(p!==n.length){throw new o}return h};r.prototype.getNumDataCodewords=function(){return this.numDataCodewords};r.prototype.getCodewords=function(){return this.codewords};return r}();var cn=function(){function r(r){this.bytes=r;this.byteOffset=0;this.bitOffset=0}r.prototype.getBitOffset=function(){return this.bitOffset};r.prototype.getByteOffset=function(){return this.byteOffset};r.prototype.readBits=function(r){if(r<1||r>32||r>this.available()){throw new o(""+r)}var n=0;var t=this.bitOffset;var i=this.byteOffset;var e=this.bytes;if(t>0){var a=8-t;var u=r<a?r:a;var f=a-u;var s=255>>8-u<<f;n=(e[i]&s)>>f;r-=u;t+=u;if(t===8){t=0;i++}}if(r>0){while(r>=8){n=n<<8|e[i]&255;i++;r-=8}if(r>0){var f=8-r;var s=255>>f<<f;n=n<<r|(e[i]&s)>>f;t+=r}}this.bitOffset=t;this.byteOffset=i;return n};r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset};return r}();var wn;(function(r){r[r["PAD_ENCODE"]=0]="PAD_ENCODE";r[r["ASCII_ENCODE"]=1]="ASCII_ENCODE";r[r["C40_ENCODE"]=2]="C40_ENCODE";r[r["TEXT_ENCODE"]=3]="TEXT_ENCODE";r[r["ANSIX12_ENCODE"]=4]="ANSIX12_ENCODE";r[r["EDIFACT_ENCODE"]=5]="EDIFACT_ENCODE";r[r["BASE256_ENCODE"]=6]="BASE256_ENCODE"})(wn||(wn={}));var ln=function(){function r(){}r.decode=function(r){var n=new cn(r);var t=new E;var i=new E;var e=new Array;var a=wn.ASCII_ENCODE;do{if(a===wn.ASCII_ENCODE){a=this.decodeAsciiSegment(n,t,i)}else{switch(a){case wn.C40_ENCODE:this.decodeC40Segment(n,t);break;case wn.TEXT_ENCODE:this.decodeTextSegment(n,t);break;case wn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,t);break;case wn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,t);break;case wn.BASE256_ENCODE:this.decodeBase256Segment(n,t,e);break;default:throw new M}a=wn.ASCII_ENCODE}}while(a!==wn.PAD_ENCODE&&n.available()>0);if(i.length()>0){t.append(i.toString())}return new q(r,t.toString(),e.length===0?null:e,null)};r.decodeAsciiSegment=function(r,n,t){var i=false;do{var e=r.readBits(8);if(e===0){throw new M}else if(e<=128){if(i){e+=128}n.append(String.fromCharCode(e-1));return wn.ASCII_ENCODE}else if(e===129){return wn.PAD_ENCODE}else if(e<=229){var a=e-130;if(a<10){n.append("0")}n.append(""+a)}else{switch(e){case 230:return wn.C40_ENCODE;case 231:return wn.BASE256_ENCODE;case 232:n.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:i=true;break;case 236:n.append("[)>05");t.insert(0,"");break;case 237:n.append("[)>06");t.insert(0,"");break;case 238:return wn.ANSIX12_ENCODE;case 239:return wn.TEXT_ENCODE;case 240:return wn.EDIFACT_ENCODE;case 241:break;default:if(e!==254||r.available()!==0){throw new M}break}}}while(r.available()>0);return wn.ASCII_ENCODE};r.decodeC40Segment=function(r,n){var t=false;var i=[];var e=0;do{if(r.available()===8){return}var a=r.readBits(8);if(a===254){return}this.parseTwoBytes(a,r.readBits(8),i);for(var u=0;u<3;u++){var f=i[u];switch(e){case 0:if(f<3){e=f+1}else if(f<this.C40_BASIC_SET_CHARS.length){var s=this.C40_BASIC_SET_CHARS[f];if(t){n.append(String.fromCharCode(s.charCodeAt(0)+128));t=false}else{n.append(s)}}else{throw new M}break;case 1:if(t){n.append(String.fromCharCode(f+128));t=false}else{n.append(String.fromCharCode(f))}e=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){var s=this.C40_SHIFT2_SET_CHARS[f];if(t){n.append(String.fromCharCode(s.charCodeAt(0)+128));t=false}else{n.append(s)}}else{switch(f){case 27:n.append(String.fromCharCode(29));break;case 30:t=true;break;default:throw new M}}e=0;break;case 3:if(t){n.append(String.fromCharCode(f+224));t=false}else{n.append(String.fromCharCode(f+96))}e=0;break;default:throw new M}}}while(r.available()>0)};r.decodeTextSegment=function(r,n){var t=false;var i=[];var e=0;do{if(r.available()===8){return}var a=r.readBits(8);if(a===254){return}this.parseTwoBytes(a,r.readBits(8),i);for(var u=0;u<3;u++){var f=i[u];switch(e){case 0:if(f<3){e=f+1}else if(f<this.TEXT_BASIC_SET_CHARS.length){var s=this.TEXT_BASIC_SET_CHARS[f];if(t){n.append(String.fromCharCode(s.charCodeAt(0)+128));t=false}else{n.append(s)}}else{throw new M}break;case 1:if(t){n.append(String.fromCharCode(f+128));t=false}else{n.append(String.fromCharCode(f))}e=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){var s=this.TEXT_SHIFT2_SET_CHARS[f];if(t){n.append(String.fromCharCode(s.charCodeAt(0)+128));t=false}else{n.append(s)}}else{switch(f){case 27:n.append(String.fromCharCode(29));break;case 30:t=true;break;default:throw new M}}e=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){var s=this.TEXT_SHIFT3_SET_CHARS[f];if(t){n.append(String.fromCharCode(s.charCodeAt(0)+128));t=false}else{n.append(s)}e=0}else{throw new M}break;default:throw new M}}}while(r.available()>0)};r.decodeAnsiX12Segment=function(r,n){var t=[];do{if(r.available()===8){return}var i=r.readBits(8);if(i===254){return}this.parseTwoBytes(i,r.readBits(8),t);for(var e=0;e<3;e++){var a=t[e];switch(a){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(a<14){n.append(String.fromCharCode(a+44))}else if(a<40){n.append(String.fromCharCode(a+51))}else{throw new M}break}}}while(r.available()>0)};r.parseTwoBytes=function(r,n,t){var i=(r<<8)+n-1;var e=Math.floor(i/1600);t[0]=e;i-=e*1600;e=Math.floor(i/40);t[1]=e;t[2]=i-e*40};r.decodeEdifactSegment=function(r,n){do{if(r.available()<=16){return}for(var t=0;t<4;t++){var i=r.readBits(6);if(i===31){var e=8-r.getBitOffset();if(e!==8){r.readBits(e)}return}if((i&32)===0){i|=64}n.append(String.fromCharCode(i))}}while(r.available()>0)};r.decodeBase256Segment=function(r,n,t){var i=1+r.getByteOffset();var e=this.unrandomize255State(r.readBits(8),i++);var a;if(e===0){a=r.available()/8|0}else if(e<250){a=e}else{a=250*(e-249)+this.unrandomize255State(r.readBits(8),i++)}if(a<0){throw new M}var u=new Uint8Array(a);for(var f=0;f<a;f++){if(r.available()<8){throw new M}u[f]=this.unrandomize255State(r.readBits(8),i++)}t.push(u);try{n.append(g.decode(u,S.ISO88591))}catch(r){throw new Y("Platform does not support required encoding: "+r.message)}};r.unrandomize255State=function(r,n){var t=149*n%255+1;var i=r-t;return i>=0?i:i+256};return r}();ln.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];ln.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"];ln.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];ln.TEXT_SHIFT2_SET_CHARS=ln.C40_SHIFT2_SET_CHARS;ln.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];var dn=function(){function r(){this.rsDecoder=new J(z.DATA_MATRIX_FIELD_256)}r.prototype.decode=function(r){var n=new hn(r);var t=n.getVersion();var i=n.readCodewords();var e=vn.getDataBlocks(i,t);var a=0;for(var u=0,f=e;u<f.length;u++){var s=f[u];a+=s.getNumDataCodewords()}var o=new Uint8Array(a);var h=e.length;for(var v=0;v<h;v++){var c=e[v];var w=c.getCodewords();var l=c.getNumDataCodewords();this.correctErrors(w,l);for(var d=0;d<l;d++){o[d*h+v]=w[d]}}return ln.decode(o)};r.prototype.correctErrors=function(r,n){var t=new Int32Array(r);try{this.rsDecoder.decode(t,r.length-n)}catch(r){throw new v}for(var i=0;i<n;i++){r[i]=t[i]}};return r}();var yn=function(){function r(r){this.image=r;this.rectangleDetector=new ar(this.image)}r.prototype.detect=function(){var n=this.rectangleDetector.detect();var t=this.detectSolid1(n);t=this.detectSolid2(t);t[3]=this.correctTopRight(t);if(!t[3]){throw new N}t=this.shiftToModuleCenter(t);var i=t[0];var e=t[1];var a=t[2];var u=t[3];var f=this.transitionsBetween(i,u)+1;var s=this.transitionsBetween(a,u)+1;if((f&1)===1){f+=1}if((s&1)===1){s+=1}if(4*f<7*s&&4*s<7*f){f=s=Math.max(f,s)}var o=r.sampleGrid(this.image,i,e,a,u,f,s);return new ir(o,[i,e,a,u])};r.shiftPoint=function(r,n,t){var i=(n.getX()-r.getX())/(t+1);var e=(n.getY()-r.getY())/(t+1);return new tr(r.getX()+i,r.getY()+e)};r.moveAway=function(r,n,t){var i=r.getX();var e=r.getY();if(i<n){i-=1}else{i+=1}if(e<t){e-=1}else{e+=1}return new tr(i,e)};r.prototype.detectSolid1=function(r){var n=r[0];var t=r[1];var i=r[3];var e=r[2];var a=this.transitionsBetween(n,t);var u=this.transitionsBetween(t,i);var f=this.transitionsBetween(i,e);var s=this.transitionsBetween(e,n);var o=a;var h=[e,n,t,i];if(o>u){o=u;h[0]=n;h[1]=t;h[2]=i;h[3]=e}if(o>f){o=f;h[0]=t;h[1]=i;h[2]=e;h[3]=n}if(o>s){h[0]=i;h[1]=e;h[2]=n;h[3]=t}return h};r.prototype.detectSolid2=function(n){var t=n[0];var i=n[1];var e=n[2];var a=n[3];var u=this.transitionsBetween(t,a);var f=r.shiftPoint(i,e,(u+1)*4);var s=r.shiftPoint(e,i,(u+1)*4);var o=this.transitionsBetween(f,t);var h=this.transitionsBetween(s,a);if(o<h){n[0]=t;n[1]=i;n[2]=e;n[3]=a}else{n[0]=i;n[1]=e;n[2]=a;n[3]=t}return n};r.prototype.correctTopRight=function(n){var t=n[0];var i=n[1];var e=n[2];var a=n[3];var u=this.transitionsBetween(t,a);var f=this.transitionsBetween(i,a);var s=r.shiftPoint(t,i,(f+1)*4);var o=r.shiftPoint(e,i,(u+1)*4);u=this.transitionsBetween(s,a);f=this.transitionsBetween(o,a);var h=new tr(a.getX()+(e.getX()-i.getX())/(u+1),a.getY()+(e.getY()-i.getY())/(u+1));var v=new tr(a.getX()+(t.getX()-i.getX())/(f+1),a.getY()+(t.getY()-i.getY())/(f+1));if(!this.isValid(h)){if(this.isValid(v)){return v}return null}if(!this.isValid(v)){return h}var c=this.transitionsBetween(s,h)+this.transitionsBetween(o,h);var w=this.transitionsBetween(s,v)+this.transitionsBetween(o,v);if(c>w){return h}else{return v}};r.prototype.shiftToModuleCenter=function(n){var t=n[0];var i=n[1];var e=n[2];var a=n[3];var u=this.transitionsBetween(t,a)+1;var f=this.transitionsBetween(e,a)+1;var s=r.shiftPoint(t,i,f*4);var o=r.shiftPoint(e,i,u*4);u=this.transitionsBetween(s,a)+1;f=this.transitionsBetween(o,a)+1;if((u&1)===1){u+=1}if((f&1)===1){f+=1}var h=(t.getX()+i.getX()+e.getX()+a.getX())/4;var v=(t.getY()+i.getY()+e.getY()+a.getY())/4;t=r.moveAway(t,h,v);i=r.moveAway(i,h,v);e=r.moveAway(e,h,v);a=r.moveAway(a,h,v);var c;var w;s=r.shiftPoint(t,i,f*4);s=r.shiftPoint(s,a,u*4);c=r.shiftPoint(i,t,f*4);c=r.shiftPoint(c,e,u*4);o=r.shiftPoint(e,a,f*4);o=r.shiftPoint(o,i,u*4);w=r.shiftPoint(a,e,f*4);w=r.shiftPoint(w,t,u*4);return[s,c,o,w]};r.prototype.isValid=function(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()};r.sampleGrid=function(r,n,t,i,e,a,u){var f=hr.getInstance();return f.sampleGrid(r,a,u,.5,.5,a-.5,.5,a-.5,u-.5,.5,u-.5,n.getX(),n.getY(),e.getX(),e.getY(),i.getX(),i.getY(),t.getX(),t.getY())};r.prototype.transitionsBetween=function(r,n){var t=Math.trunc(r.getX());var i=Math.trunc(r.getY());var e=Math.trunc(n.getX());var a=Math.trunc(n.getY());var u=Math.abs(a-i)>Math.abs(e-t);if(u){var f=t;t=i;i=f;f=e;e=a;a=f}var s=Math.abs(e-t);var o=Math.abs(a-i);var h=-s/2;var v=i<a?1:-1;var c=t<e?1:-1;var w=0;var l=this.image.get(u?i:t,u?t:i);for(var d=t,y=i;d!==e;d+=c){var A=this.image.get(u?y:d,u?d:y);if(A!==l){w++;l=A}h+=o;if(h>0){if(y===a){break}y+=v;h-=s}}return w};return r}();var An=function(){function r(){this.decoder=new dn}r.prototype.decode=function(n,t){if(t===void 0){t=null}var i;var e;if(t!=null&&t.has(p.PURE_BARCODE)){var a=r.extractPureBits(n.getBlackMatrix());i=this.decoder.decode(a);e=r.NO_POINTS}else{var u=new yn(n.getBlackMatrix()).detect();i=this.decoder.decode(u.getBits());e=u.getPoints()}var f=i.getRawBytes();var s=new G(i.getText(),f,8*f.length,e,j.DATA_MATRIX,w.currentTimeMillis());var o=i.getByteSegments();if(o!=null){s.putMetadata(H.BYTE_SEGMENTS,o)}var h=i.getECLevel();if(h!=null){s.putMetadata(H.ERROR_CORRECTION_LEVEL,h)}return s};r.prototype.reset=function(){};r.extractPureBits=function(r){var n=r.getTopLeftOnBit();var t=r.getBottomRightOnBit();if(n==null||t==null){throw new N}var i=this.moduleSize(n,r);var e=n[1];var a=t[1];var u=n[0];var f=t[0];var s=(f-u+1)/i;var o=(a-e+1)/i;if(s<=0||o<=0){throw new N}var h=i/2;e+=h;u+=h;var v=new C(s,o);for(var c=0;c<o;c++){var w=e+c*i;for(var l=0;l<s;l++){if(r.get(u+l*i,w)){v.set(l,c)}}}return v};r.moduleSize=function(r,n){var t=n.getWidth();var i=r[0];var e=r[1];while(i<t&&n.get(i,e)){i++}if(i===t){throw new N}var a=i-r[0];if(a===0){throw new N}return a};return r}();An.NO_POINTS=[];var In=function(r){i(n,r);function n(n){if(n===void 0){n=500}return r.call(this,new An,n)||this}return n}(L);var bn;(function(r){r[r["L"]=0]="L";r[r["M"]=1]="M";r[r["Q"]=2]="Q";r[r["H"]=3]="H"})(bn||(bn={}));var pn=function(){function r(n,t,i){this.value=n;this.stringValue=t;this.bits=i;r.FOR_BITS.set(i,this);r.FOR_VALUE.set(n,this)}r.prototype.getValue=function(){return this.value};r.prototype.getBits=function(){return this.bits};r.fromString=function(n){switch(n){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new s(n+"not available")}};r.prototype.toString=function(){return this.stringValue};r.prototype.equals=function(n){if(!(n instanceof r)){return false}var t=n;return this.value===t.value};r.forBits=function(n){if(n<0||n>=r.FOR_BITS.size){throw new o}return r.FOR_BITS.get(n)};return r}();pn.FOR_BITS=new Map;pn.FOR_VALUE=new Map;pn.L=new pn(bn.L,"L",1);pn.M=new pn(bn.M,"M",0);pn.Q=new pn(bn.Q,"Q",3);pn.H=new pn(bn.H,"H",2);var Mn=function(){function r(r){this.errorCorrectionLevel=pn.forBits(r>>3&3);this.dataMask=r&7}r.numBitsDiffering=function(r,n){return A.bitCount(r^n)};r.decodeFormatInformation=function(n,t){var i=r.doDecodeFormatInformation(n,t);if(i!==null){return i}return r.doDecodeFormatInformation(n^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)};r.doDecodeFormatInformation=function(n,t){var i=Number.MAX_SAFE_INTEGER;var e=0;for(var a=0,u=r.FORMAT_INFO_DECODE_LOOKUP;a<u.length;a++){var f=u[a];var s=f[0];if(s===n||s===t){return new r(f[1])}var o=r.numBitsDiffering(n,s);if(o<i){e=f[1];i=o}if(n!==t){o=r.numBitsDiffering(t,s);if(o<i){e=f[1];i=o}}}if(i<=3){return new r(e)}return null};r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel};r.prototype.getDataMask=function(){return this.dataMask};r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask};r.prototype.equals=function(n){if(!(n instanceof r)){return false}var t=n;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask};return r}();Mn.FORMAT_INFO_MASK_QR=21522;Mn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];var _n=function(){function r(r){var n=[];for(var t=1;t<arguments.length;t++){n[t-1]=arguments[t]}this.ecCodewordsPerBlock=r;this.ecBlocks=n}r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock};r.prototype.getNumBlocks=function(){var r=0;var n=this.ecBlocks;for(var t=0,i=n;t<i.length;t++){var e=i[t];r+=e.getCount()}return r};r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()};r.prototype.getECBlocks=function(){return this.ecBlocks};return r}();var mn=function(){function r(r,n){this.count=r;this.dataCodewords=n}r.prototype.getCount=function(){return this.count};r.prototype.getDataCodewords=function(){return this.dataCodewords};return r}();var kn=function(){function r(r,n){var t=[];for(var i=2;i<arguments.length;i++){t[i-2]=arguments[i]}this.versionNumber=r;this.alignmentPatternCenters=n;this.ecBlocks=t;var e=0;var a=t[0].getECCodewordsPerBlock();var u=t[0].getECBlocks();for(var f=0,s=u;f<s.length;f++){var o=s[f];e+=o.getCount()*(o.getDataCodewords()+a)}this.totalCodewords=e}r.prototype.getVersionNumber=function(){return this.versionNumber};r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters};r.prototype.getTotalCodewords=function(){return this.totalCodewords};r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber};r.prototype.getECBlocksForLevel=function(r){return this.ecBlocks[r.getValue()]};r.getProvisionalVersionForDimension=function(r){if(r%4!==1){throw new M}try{return this.getVersionForNumber((r-17)/4)}catch(r){throw new M}};r.getVersionForNumber=function(n){if(n<1||n>40){throw new o}return r.VERSIONS[n-1]};r.decodeVersionInformation=function(n){var t=Number.MAX_SAFE_INTEGER;var i=0;for(var e=0;e<r.VERSION_DECODE_INFO.length;e++){var a=r.VERSION_DECODE_INFO[e];if(a===n){return r.getVersionForNumber(e+7)}var u=Mn.numBitsDiffering(n,a);if(u<t){i=e+7;t=u}}if(t<=3){return r.getVersionForNumber(i)}return null};r.prototype.buildFunctionPattern=function(){var r=this.getDimensionForVersion();var n=new C(r);n.setRegion(0,0,9,9);n.setRegion(r-8,0,8,9);n.setRegion(0,r-8,9,8);var t=this.alignmentPatternCenters.length;for(var i=0;i<t;i++){var e=this.alignmentPatternCenters[i]-2;for(var a=0;a<t;a++){if(i===0&&(a===0||a===t-1)||i===t-1&&a===0){continue}n.setRegion(this.alignmentPatternCenters[a]-2,e,5,5)}}n.setRegion(6,9,1,r-17);n.setRegion(9,6,r-17,1);if(this.versionNumber>6){n.setRegion(r-11,0,3,6);n.setRegion(0,r-11,6,3)}return n};r.prototype.toString=function(){return""+this.versionNumber};return r}();kn.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]);kn.VERSIONS=[new kn(1,new Int32Array(0),new _n(7,new mn(1,19)),new _n(10,new mn(1,16)),new _n(13,new mn(1,13)),new _n(17,new mn(1,9))),new kn(2,Int32Array.from([6,18]),new _n(10,new mn(1,34)),new _n(16,new mn(1,28)),new _n(22,new mn(1,22)),new _n(28,new mn(1,16))),new kn(3,Int32Array.from([6,22]),new _n(15,new mn(1,55)),new _n(26,new mn(1,44)),new _n(18,new mn(2,17)),new _n(22,new mn(2,13))),new kn(4,Int32Array.from([6,26]),new _n(20,new mn(1,80)),new _n(18,new mn(2,32)),new _n(26,new mn(2,24)),new _n(16,new mn(4,9))),new kn(5,Int32Array.from([6,30]),new _n(26,new mn(1,108)),new _n(24,new mn(2,43)),new _n(18,new mn(2,15),new mn(2,16)),new _n(22,new mn(2,11),new mn(2,12))),new kn(6,Int32Array.from([6,34]),new _n(18,new mn(2,68)),new _n(16,new mn(4,27)),new _n(24,new mn(4,19)),new _n(28,new mn(4,15))),new kn(7,Int32Array.from([6,22,38]),new _n(20,new mn(2,78)),new _n(18,new mn(4,31)),new _n(18,new mn(2,14),new mn(4,15)),new _n(26,new mn(4,13),new mn(1,14))),new kn(8,Int32Array.from([6,24,42]),new _n(24,new mn(2,97)),new _n(22,new mn(2,38),new mn(2,39)),new _n(22,new mn(4,18),new mn(2,19)),new _n(26,new mn(4,14),new mn(2,15))),new kn(9,Int32Array.from([6,26,46]),new _n(30,new mn(2,116)),new _n(22,new mn(3,36),new mn(2,37)),new _n(20,new mn(4,16),new mn(4,17)),new _n(24,new mn(4,12),new mn(4,13))),new kn(10,Int32Array.from([6,28,50]),new _n(18,new mn(2,68),new mn(2,69)),new _n(26,new mn(4,43),new mn(1,44)),new _n(24,new mn(6,19),new mn(2,20)),new _n(28,new mn(6,15),new mn(2,16))),new kn(11,Int32Array.from([6,30,54]),new _n(20,new mn(4,81)),new _n(30,new mn(1,50),new mn(4,51)),new _n(28,new mn(4,22),new mn(4,23)),new _n(24,new mn(3,12),new mn(8,13))),new kn(12,Int32Array.from([6,32,58]),new _n(24,new mn(2,92),new mn(2,93)),new _n(22,new mn(6,36),new mn(2,37)),new _n(26,new mn(4,20),new mn(6,21)),new _n(28,new mn(7,14),new mn(4,15))),new kn(13,Int32Array.from([6,34,62]),new _n(26,new mn(4,107)),new _n(22,new mn(8,37),new mn(1,38)),new _n(24,new mn(8,20),new mn(4,21)),new _n(22,new mn(12,11),new mn(4,12))),new kn(14,Int32Array.from([6,26,46,66]),new _n(30,new mn(3,115),new mn(1,116)),new _n(24,new mn(4,40),new mn(5,41)),new _n(20,new mn(11,16),new mn(5,17)),new _n(24,new mn(11,12),new mn(5,13))),new kn(15,Int32Array.from([6,26,48,70]),new _n(22,new mn(5,87),new mn(1,88)),new _n(24,new mn(5,41),new mn(5,42)),new _n(30,new mn(5,24),new mn(7,25)),new _n(24,new mn(11,12),new mn(7,13))),new kn(16,Int32Array.from([6,26,50,74]),new _n(24,new mn(5,98),new mn(1,99)),new _n(28,new mn(7,45),new mn(3,46)),new _n(24,new mn(15,19),new mn(2,20)),new _n(30,new mn(3,15),new mn(13,16))),new kn(17,Int32Array.from([6,30,54,78]),new _n(28,new mn(1,107),new mn(5,108)),new _n(28,new mn(10,46),new mn(1,47)),new _n(28,new mn(1,22),new mn(15,23)),new _n(28,new mn(2,14),new mn(17,15))),new kn(18,Int32Array.from([6,30,56,82]),new _n(30,new mn(5,120),new mn(1,121)),new _n(26,new mn(9,43),new mn(4,44)),new _n(28,new mn(17,22),new mn(1,23)),new _n(28,new mn(2,14),new mn(19,15))),new kn(19,Int32Array.from([6,30,58,86]),new _n(28,new mn(3,113),new mn(4,114)),new _n(26,new mn(3,44),new mn(11,45)),new _n(26,new mn(17,21),new mn(4,22)),new _n(26,new mn(9,13),new mn(16,14))),new kn(20,Int32Array.from([6,34,62,90]),new _n(28,new mn(3,107),new mn(5,108)),new _n(26,new mn(3,41),new mn(13,42)),new _n(30,new mn(15,24),new mn(5,25)),new _n(28,new mn(15,15),new mn(10,16))),new kn(21,Int32Array.from([6,28,50,72,94]),new _n(28,new mn(4,116),new mn(4,117)),new _n(26,new mn(17,42)),new _n(28,new mn(17,22),new mn(6,23)),new _n(30,new mn(19,16),new mn(6,17))),new kn(22,Int32Array.from([6,26,50,74,98]),new _n(28,new mn(2,111),new mn(7,112)),new _n(28,new mn(17,46)),new _n(30,new mn(7,24),new mn(16,25)),new _n(24,new mn(34,13))),new kn(23,Int32Array.from([6,30,54,78,102]),new _n(30,new mn(4,121),new mn(5,122)),new _n(28,new mn(4,47),new mn(14,48)),new _n(30,new mn(11,24),new mn(14,25)),new _n(30,new mn(16,15),new mn(14,16))),new kn(24,Int32Array.from([6,28,54,80,106]),new _n(30,new mn(6,117),new mn(4,118)),new _n(28,new mn(6,45),new mn(14,46)),new _n(30,new mn(11,24),new mn(16,25)),new _n(30,new mn(30,16),new mn(2,17))),new kn(25,Int32Array.from([6,32,58,84,110]),new _n(26,new mn(8,106),new mn(4,107)),new _n(28,new mn(8,47),new mn(13,48)),new _n(30,new mn(7,24),new mn(22,25)),new _n(30,new mn(22,15),new mn(13,16))),new kn(26,Int32Array.from([6,30,58,86,114]),new _n(28,new mn(10,114),new mn(2,115)),new _n(28,new mn(19,46),new mn(4,47)),new _n(28,new mn(28,22),new mn(6,23)),new _n(30,new mn(33,16),new mn(4,17))),new kn(27,Int32Array.from([6,34,62,90,118]),new _n(30,new mn(8,122),new mn(4,123)),new _n(28,new mn(22,45),new mn(3,46)),new _n(30,new mn(8,23),new mn(26,24)),new _n(30,new mn(12,15),new mn(28,16))),new kn(28,Int32Array.from([6,26,50,74,98,122]),new _n(30,new mn(3,117),new mn(10,118)),new _n(28,new mn(3,45),new mn(23,46)),new _n(30,new mn(4,24),new mn(31,25)),new _n(30,new mn(11,15),new mn(31,16))),new kn(29,Int32Array.from([6,30,54,78,102,126]),new _n(30,new mn(7,116),new mn(7,117)),new _n(28,new mn(21,45),new mn(7,46)),new _n(30,new mn(1,23),new mn(37,24)),new _n(30,new mn(19,15),new mn(26,16))),new kn(30,Int32Array.from([6,26,52,78,104,130]),new _n(30,new mn(5,115),new mn(10,116)),new _n(28,new mn(19,47),new mn(10,48)),new _n(30,new mn(15,24),new mn(25,25)),new _n(30,new mn(23,15),new mn(25,16))),new kn(31,Int32Array.from([6,30,56,82,108,134]),new _n(30,new mn(13,115),new mn(3,116)),new _n(28,new mn(2,46),new mn(29,47)),new _n(30,new mn(42,24),new mn(1,25)),new _n(30,new mn(23,15),new mn(28,16))),new kn(32,Int32Array.from([6,34,60,86,112,138]),new _n(30,new mn(17,115)),new _n(28,new mn(10,46),new mn(23,47)),new _n(30,new mn(10,24),new mn(35,25)),new _n(30,new mn(19,15),new mn(35,16))),new kn(33,Int32Array.from([6,30,58,86,114,142]),new _n(30,new mn(17,115),new mn(1,116)),new _n(28,new mn(14,46),new mn(21,47)),new _n(30,new mn(29,24),new mn(19,25)),new _n(30,new mn(11,15),new mn(46,16))),new kn(34,Int32Array.from([6,34,62,90,118,146]),new _n(30,new mn(13,115),new mn(6,116)),new _n(28,new mn(14,46),new mn(23,47)),new _n(30,new mn(44,24),new mn(7,25)),new _n(30,new mn(59,16),new mn(1,17))),new kn(35,Int32Array.from([6,30,54,78,102,126,150]),new _n(30,new mn(12,121),new mn(7,122)),new _n(28,new mn(12,47),new mn(26,48)),new _n(30,new mn(39,24),new mn(14,25)),new _n(30,new mn(22,15),new mn(41,16))),new kn(36,Int32Array.from([6,24,50,76,102,128,154]),new _n(30,new mn(6,121),new mn(14,122)),new _n(28,new mn(6,47),new mn(34,48)),new _n(30,new mn(46,24),new mn(10,25)),new _n(30,new mn(2,15),new mn(64,16))),new kn(37,Int32Array.from([6,28,54,80,106,132,158]),new _n(30,new mn(17,122),new mn(4,123)),new _n(28,new mn(29,46),new mn(14,47)),new _n(30,new mn(49,24),new mn(10,25)),new _n(30,new mn(24,15),new mn(46,16))),new kn(38,Int32Array.from([6,32,58,84,110,136,162]),new _n(30,new mn(4,122),new mn(18,123)),new _n(28,new mn(13,46),new mn(32,47)),new _n(30,new mn(48,24),new mn(14,25)),new _n(30,new mn(42,15),new mn(32,16))),new kn(39,Int32Array.from([6,26,54,82,110,138,166]),new _n(30,new mn(20,117),new mn(4,118)),new _n(28,new mn(40,47),new mn(7,48)),new _n(30,new mn(43,24),new mn(22,25)),new _n(30,new mn(10,15),new mn(67,16))),new kn(40,Int32Array.from([6,30,58,86,114,142,170]),new _n(30,new mn(19,118),new mn(6,119)),new _n(28,new mn(18,47),new mn(31,48)),new _n(30,new mn(34,24),new mn(34,25)),new _n(30,new mn(20,15),new mn(61,16)))];var gn;(function(r){r[r["DATA_MASK_000"]=0]="DATA_MASK_000";r[r["DATA_MASK_001"]=1]="DATA_MASK_001";r[r["DATA_MASK_010"]=2]="DATA_MASK_010";r[r["DATA_MASK_011"]=3]="DATA_MASK_011";r[r["DATA_MASK_100"]=4]="DATA_MASK_100";r[r["DATA_MASK_101"]=5]="DATA_MASK_101";r[r["DATA_MASK_110"]=6]="DATA_MASK_110";r[r["DATA_MASK_111"]=7]="DATA_MASK_111"})(gn||(gn={}));var Sn=function(){function r(r,n){this.value=r;this.isMasked=n}r.prototype.unmaskBitMatrix=function(r,n){for(var t=0;t<n;t++){for(var i=0;i<n;i++){if(this.isMasked(t,i)){r.flip(i,t)}}}};return r}();Sn.values=new Map([[gn.DATA_MASK_000,new Sn(gn.DATA_MASK_000,(function(r,n){return(r+n&1)===0}))],[gn.DATA_MASK_001,new Sn(gn.DATA_MASK_001,(function(r,n){return(r&1)===0}))],[gn.DATA_MASK_010,new Sn(gn.DATA_MASK_010,(function(r,n){return n%3===0}))],[gn.DATA_MASK_011,new Sn(gn.DATA_MASK_011,(function(r,n){return(r+n)%3===0}))],[gn.DATA_MASK_100,new Sn(gn.DATA_MASK_100,(function(r,n){return(Math.floor(r/2)+Math.floor(n/3)&1)===0}))],[gn.DATA_MASK_101,new Sn(gn.DATA_MASK_101,(function(r,n){return r*n%6===0}))],[gn.DATA_MASK_110,new Sn(gn.DATA_MASK_110,(function(r,n){return r*n%6<3}))],[gn.DATA_MASK_111,new Sn(gn.DATA_MASK_111,(function(r,n){return(r+n+r*n%3&1)===0}))]]);var En=function(){function r(r){var n=r.getHeight();if(n<21||(n&3)!==1){throw new M}this.bitMatrix=r}r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==undefined){return this.parsedFormatInfo}var r=0;for(var n=0;n<6;n++){r=this.copyBit(n,8,r)}r=this.copyBit(7,8,r);r=this.copyBit(8,8,r);r=this.copyBit(8,7,r);for(var t=5;t>=0;t--){r=this.copyBit(8,t,r)}var i=this.bitMatrix.getHeight();var e=0;var a=i-7;for(var t=i-1;t>=a;t--){e=this.copyBit(8,t,e)}for(var n=i-8;n<i;n++){e=this.copyBit(n,8,e)}this.parsedFormatInfo=Mn.decodeFormatInformation(r,e);if(this.parsedFormatInfo!==null){return this.parsedFormatInfo}throw new M};r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==undefined){return this.parsedVersion}var r=this.bitMatrix.getHeight();var n=Math.floor((r-17)/4);if(n<=6){return kn.getVersionForNumber(n)}var t=0;var i=r-11;for(var e=5;e>=0;e--){for(var a=r-9;a>=i;a--){t=this.copyBit(a,e,t)}}var u=kn.decodeVersionInformation(t);if(u!==null&&u.getDimensionForVersion()===r){this.parsedVersion=u;return u}t=0;for(var a=5;a>=0;a--){for(var e=r-9;e>=i;e--){t=this.copyBit(a,e,t)}}u=kn.decodeVersionInformation(t);if(u!==null&&u.getDimensionForVersion()===r){this.parsedVersion=u;return u}throw new M};r.prototype.copyBit=function(r,n,t){var i=this.isMirror?this.bitMatrix.get(n,r):this.bitMatrix.get(r,n);return i?t<<1|1:t<<1};r.prototype.readCodewords=function(){var r=this.readFormatInformation();var n=this.readVersion();var t=Sn.values.get(r.getDataMask());var i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i);var e=n.buildFunctionPattern();var a=true;var u=new Uint8Array(n.getTotalCodewords());var f=0;var s=0;var o=0;for(var h=i-1;h>0;h-=2){if(h===6){h--}for(var v=0;v<i;v++){var c=a?i-1-v:v;for(var w=0;w<2;w++){if(!e.get(h-w,c)){o++;s<<=1;if(this.bitMatrix.get(h-w,c)){s|=1}if(o===8){u[f++]=s;o=0;s=0}}}}a=!a}if(f!==n.getTotalCodewords()){throw new M}return u};r.prototype.remask=function(){if(this.parsedFormatInfo===null){return}var r=Sn.values[this.parsedFormatInfo.getDataMask()];var n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n)};r.prototype.setMirror=function(r){this.parsedVersion=null;this.parsedFormatInfo=null;this.isMirror=r};r.prototype.mirror=function(){var r=this.bitMatrix;for(var n=0,t=r.getWidth();n<t;n++){for(var i=n+1,e=r.getHeight();i<e;i++){if(r.get(n,i)!==r.get(i,n)){r.flip(i,n);r.flip(n,i)}}}};return r}();var Cn=function(){function r(r,n){this.numDataCodewords=r;this.codewords=n}r.getDataBlocks=function(n,t,i){if(n.length!==t.getTotalCodewords()){throw new o}var e=t.getECBlocksForLevel(i);var a=0;var u=e.getECBlocks();for(var f=0,s=u;f<s.length;f++){var h=s[f];a+=h.getCount()}var v=new Array(a);var c=0;for(var w=0,l=u;w<l.length;w++){var h=l[w];for(var d=0;d<h.getCount();d++){var y=h.getDataCodewords();var A=e.getECCodewordsPerBlock()+y;v[c++]=new r(y,new Uint8Array(A))}}var I=v[0].codewords.length;var b=v.length-1;while(b>=0){var p=v[b].codewords.length;if(p===I){break}b--}b++;var M=I-e.getECCodewordsPerBlock();var _=0;for(var d=0;d<M;d++){for(var m=0;m<c;m++){v[m].codewords[d]=n[_++]}}for(var m=b;m<c;m++){v[m].codewords[M]=n[_++]}var k=v[0].codewords.length;for(var d=M;d<k;d++){for(var m=0;m<c;m++){var g=m<b?d:d+1;v[m].codewords[g]=n[_++]}}return v};r.prototype.getNumDataCodewords=function(){return this.numDataCodewords};r.prototype.getCodewords=function(){return this.codewords};return r}();var Nn;(function(r){r[r["TERMINATOR"]=0]="TERMINATOR";r[r["NUMERIC"]=1]="NUMERIC";r[r["ALPHANUMERIC"]=2]="ALPHANUMERIC";r[r["STRUCTURED_APPEND"]=3]="STRUCTURED_APPEND";r[r["BYTE"]=4]="BYTE";r[r["ECI"]=5]="ECI";r[r["KANJI"]=6]="KANJI";r[r["FNC1_FIRST_POSITION"]=7]="FNC1_FIRST_POSITION";r[r["FNC1_SECOND_POSITION"]=8]="FNC1_SECOND_POSITION";r[r["HANZI"]=9]="HANZI"})(Nn||(Nn={}));var On=function(){function r(n,t,i,e){this.value=n;this.stringValue=t;this.characterCountBitsForVersions=i;this.bits=e;r.FOR_BITS.set(e,this);r.FOR_VALUE.set(n,this)}r.forBits=function(n){var t=r.FOR_BITS.get(n);if(undefined===t){throw new o}return t};r.prototype.getCharacterCountBits=function(r){var n=r.getVersionNumber();var t;if(n<=9){t=0}else if(n<=26){t=1}else{t=2}return this.characterCountBitsForVersions[t]};r.prototype.getValue=function(){return this.value};r.prototype.getBits=function(){return this.bits};r.prototype.equals=function(n){if(!(n instanceof r)){return false}var t=n;return this.value===t.value};r.prototype.toString=function(){return this.stringValue};return r}();On.FOR_BITS=new Map;On.FOR_VALUE=new Map;On.TERMINATOR=new On(Nn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0);On.NUMERIC=new On(Nn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1);On.ALPHANUMERIC=new On(Nn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2);On.STRUCTURED_APPEND=new On(Nn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3);On.BYTE=new On(Nn.BYTE,"BYTE",Int32Array.from([8,16,16]),4);On.ECI=new On(Nn.ECI,"ECI",Int32Array.from([0,0,0]),7);On.KANJI=new On(Nn.KANJI,"KANJI",Int32Array.from([8,10,12]),8);On.FNC1_FIRST_POSITION=new On(Nn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5);On.FNC1_SECOND_POSITION=new On(Nn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9);On.HANZI=new On(Nn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);var Tn=function(){function r(){}r.decode=function(n,t,i,e){var a=new cn(n);var u=new E;var f=new Array;var s=-1;var o=-1;try{var h=null;var v=false;var c=void 0;do{if(a.available()<4){c=On.TERMINATOR}else{var w=a.readBits(4);c=On.forBits(w)}switch(c){case On.TERMINATOR:break;case On.FNC1_FIRST_POSITION:case On.FNC1_SECOND_POSITION:v=true;break;case On.STRUCTURED_APPEND:if(a.available()<16){throw new M}s=a.readBits(8);o=a.readBits(8);break;case On.ECI:var l=r.parseECIValue(a);h=m.getCharacterSetECIByValue(l);if(h===null){throw new M}break;case On.HANZI:var d=a.readBits(4);var y=a.readBits(c.getCharacterCountBits(t));if(d===r.GB2312_SUBSET){r.decodeHanziSegment(a,u,y)}break;default:var A=a.readBits(c.getCharacterCountBits(t));switch(c){case On.NUMERIC:r.decodeNumericSegment(a,u,A);break;case On.ALPHANUMERIC:r.decodeAlphanumericSegment(a,u,A,v);break;case On.BYTE:r.decodeByteSegment(a,u,A,h,f,e);break;case On.KANJI:r.decodeKanjiSegment(a,u,A);break;default:throw new M}break}}while(c!==On.TERMINATOR)}catch(r){throw new M}return new q(n,u.toString(),f.length===0?null:f,i===null?null:i.toString(),s,o)};r.decodeHanziSegment=function(r,n,t){if(t*13>r.available()){throw new M}var i=new Uint8Array(2*t);var e=0;while(t>0){var a=r.readBits(13);var u=a/96<<8&4294967295|a%96;if(u<959){u+=41377}else{u+=42657}i[e]=u>>8&255;i[e+1]=u&255;e+=2;t--}try{n.append(g.decode(i,S.GB2312))}catch(r){throw new M(r)}};r.decodeKanjiSegment=function(r,n,t){if(t*13>r.available()){throw new M}var i=new Uint8Array(2*t);var e=0;while(t>0){var a=r.readBits(13);var u=a/192<<8&4294967295|a%192;if(u<7936){u+=33088}else{u+=49472}i[e]=u>>8;i[e+1]=u;e+=2;t--}try{n.append(g.decode(i,S.SHIFT_JIS))}catch(r){throw new M(r)}};r.decodeByteSegment=function(r,n,t,i,e,a){if(8*t>r.available()){throw new M}var u=new Uint8Array(t);for(var f=0;f<t;f++){u[f]=r.readBits(8)}var s;if(i===null){s=S.guessEncoding(u,a)}else{s=i.getName()}try{n.append(g.decode(u,s))}catch(r){throw new M(r)}e.push(u)};r.toAlphaNumericChar=function(n){if(n>=r.ALPHANUMERIC_CHARS.length){throw new M}return r.ALPHANUMERIC_CHARS[n]};r.decodeAlphanumericSegment=function(n,t,i,e){var a=t.length();while(i>1){if(n.available()<11){throw new M}var u=n.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(u/45)));t.append(r.toAlphaNumericChar(u%45));i-=2}if(i===1){if(n.available()<6){throw new M}t.append(r.toAlphaNumericChar(n.readBits(6)))}if(e){for(var f=a;f<t.length();f++){if(t.charAt(f)==="%"){if(f<t.length()-1&&t.charAt(f+1)==="%"){t.deleteCharAt(f+1)}else{t.setCharAt(f,String.fromCharCode(29))}}}}};r.decodeNumericSegment=function(n,t,i){while(i>=3){if(n.available()<10){throw new M}var e=n.readBits(10);if(e>=1e3){throw new M}t.append(r.toAlphaNumericChar(Math.floor(e/100)));t.append(r.toAlphaNumericChar(Math.floor(e/10)%10));t.append(r.toAlphaNumericChar(e%10));i-=3}if(i===2){if(n.available()<7){throw new M}var a=n.readBits(7);if(a>=100){throw new M}t.append(r.toAlphaNumericChar(Math.floor(a/10)));t.append(r.toAlphaNumericChar(a%10))}else if(i===1){if(n.available()<4){throw new M}var u=n.readBits(4);if(u>=10){throw new M}t.append(r.toAlphaNumericChar(u))}};r.parseECIValue=function(r){var n=r.readBits(8);if((n&128)===0){return n&127}if((n&192)===128){var t=r.readBits(8);return(n&63)<<8&4294967295|t}if((n&224)===192){var i=r.readBits(16);return(n&31)<<16&4294967295|i}throw new M};return r}();Tn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";Tn.GB2312_SUBSET=1;var Rn=function(){function r(r){this.mirrored=r}r.prototype.isMirrored=function(){return this.mirrored};r.prototype.applyMirroredCorrection=function(r){if(!this.mirrored||r===null||r.length<3){return}var n=r[0];r[0]=r[2];r[2]=n};return r}();var Pn=function(){function r(){this.rsDecoder=new J(z.QR_CODE_FIELD_256)}r.prototype.decodeBooleanArray=function(r,n){return this.decodeBitMatrix(C.parseFromBooleanArray(r),n)};r.prototype.decodeBitMatrix=function(r,n){var t=new En(r);var i=null;try{return this.decodeBitMatrixParser(t,n)}catch(r){i=r}try{t.remask();t.setMirror(true);t.readVersion();t.readFormatInformation();t.mirror();var e=this.decodeBitMatrixParser(t,n);e.setOther(new Rn(true));return e}catch(r){if(i!==null){throw i}throw r}};r.prototype.decodeBitMatrixParser=function(r,n){var t=r.readVersion();var i=r.readFormatInformation().getErrorCorrectionLevel();var e=r.readCodewords();var a=Cn.getDataBlocks(e,t,i);var u=0;for(var f=0,s=a;f<s.length;f++){var o=s[f];u+=o.getNumDataCodewords()}var h=new Uint8Array(u);var v=0;for(var c=0,w=a;c<w.length;c++){var o=w[c];var l=o.getCodewords();var d=o.getNumDataCodewords();this.correctErrors(l,d);for(var y=0;y<d;y++){h[v++]=l[y]}}return Tn.decode(h,t,i,n)};r.prototype.correctErrors=function(r,n){var t=new Int32Array(r);try{this.rsDecoder.decode(t,r.length-n)}catch(r){throw new v}for(var i=0;i<n;i++){r[i]=t[i]}};return r}();var Dn=function(r){i(n,r);function n(n,t,i){var e=r.call(this,n,t)||this;e.estimatedModuleSize=i;return e}n.prototype.aboutEquals=function(r,n,t){if(Math.abs(n-this.getY())<=r&&Math.abs(t-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return false};n.prototype.combineEstimate=function(r,t,i){var e=(this.getX()+t)/2;var a=(this.getY()+r)/2;var u=(this.estimatedModuleSize+i)/2;return new n(e,a,u)};return n}(tr);var Un=function(){function r(r,n,t,i,e,a,u){this.image=r;this.startX=n;this.startY=t;this.width=i;this.height=e;this.moduleSize=a;this.resultPointCallback=u;this.possibleCenters=[];this.crossCheckStateCount=new Int32Array(3)}r.prototype.find=function(){var r=this.startX;var n=this.height;var t=this.width;var i=r+t;var e=this.startY+n/2;var a=new Int32Array(3);var u=this.image;for(var f=0;f<n;f++){var s=e+((f&1)===0?Math.floor((f+1)/2):-Math.floor((f+1)/2));a[0]=0;a[1]=0;a[2]=0;var o=r;while(o<i&&!u.get(o,s)){o++}var h=0;while(o<i){if(u.get(o,s)){if(h===1){a[1]++}else{if(h===2){if(this.foundPatternCross(a)){var v=this.handlePossibleCenter(a,s,o);if(v!==null){return v}}a[0]=a[2];a[1]=1;a[2]=0;h=1}else{a[++h]++}}}else{if(h===1){h++}a[h]++}o++}if(this.foundPatternCross(a)){var v=this.handlePossibleCenter(a,s,i);if(v!==null){return v}}}if(this.possibleCenters.length!==0){return this.possibleCenters[0]}throw new N};r.centerFromEnd=function(r,n){return n-r[2]-r[1]/2};r.prototype.foundPatternCross=function(r){var n=this.moduleSize;var t=n/2;for(var i=0;i<3;i++){if(Math.abs(n-r[i])>=t){return false}}return true};r.prototype.crossCheckVertical=function(n,t,i,e){var a=this.image;var u=a.getHeight();var f=this.crossCheckStateCount;f[0]=0;f[1]=0;f[2]=0;var s=n;while(s>=0&&a.get(t,s)&&f[1]<=i){f[1]++;s--}if(s<0||f[1]>i){return NaN}while(s>=0&&!a.get(t,s)&&f[0]<=i){f[0]++;s--}if(f[0]>i){return NaN}s=n+1;while(s<u&&a.get(t,s)&&f[1]<=i){f[1]++;s++}if(s===u||f[1]>i){return NaN}while(s<u&&!a.get(t,s)&&f[2]<=i){f[2]++;s++}if(f[2]>i){return NaN}var o=f[0]+f[1]+f[2];if(5*Math.abs(o-e)>=2*e){return NaN}return this.foundPatternCross(f)?r.centerFromEnd(f,s):NaN};r.prototype.handlePossibleCenter=function(n,t,i){var e=n[0]+n[1]+n[2];var a=r.centerFromEnd(n,i);var u=this.crossCheckVertical(t,a,2*n[1],e);if(!isNaN(u)){var f=(n[0]+n[1]+n[2])/3;for(var s=0,o=this.possibleCenters;s<o.length;s++){var h=o[s];if(h.aboutEquals(f,u,a)){return h.combineEstimate(u,a,f)}}var v=new Dn(a,u,f);this.possibleCenters.push(v);if(this.resultPointCallback!==null&&this.resultPointCallback!==undefined){this.resultPointCallback.foundPossibleResultPoint(v)}}return null};return r}();var xn=function(r){i(n,r);function n(n,t,i,e){var a=r.call(this,n,t)||this;a.estimatedModuleSize=i;a.count=e;if(undefined===e){a.count=1}return a}n.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize};n.prototype.getCount=function(){return this.count};n.prototype.aboutEquals=function(r,n,t){if(Math.abs(n-this.getY())<=r&&Math.abs(t-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return false};n.prototype.combineEstimate=function(r,t,i){var e=this.count+1;var a=(this.count*this.getX()+t)/e;var u=(this.count*this.getY()+r)/e;var f=(this.count*this.estimatedModuleSize+i)/e;return new n(a,u,f,e)};return n}(tr);var Fn=function(){function r(r){this.bottomLeft=r[0];this.topLeft=r[1];this.topRight=r[2]}r.prototype.getBottomLeft=function(){return this.bottomLeft};r.prototype.getTopLeft=function(){return this.topLeft};r.prototype.getTopRight=function(){return this.topRight};return r}();var Ln=function(){function r(r,n){this.image=r;this.resultPointCallback=n;this.possibleCenters=[];this.crossCheckStateCount=new Int32Array(5);this.resultPointCallback=n}r.prototype.getImage=function(){return this.image};r.prototype.getPossibleCenters=function(){return this.possibleCenters};r.prototype.find=function(n){var t=n!==null&&n!==undefined&&undefined!==n.get(p.TRY_HARDER);var i=n!==null&&n!==undefined&&undefined!==n.get(p.PURE_BARCODE);var e=this.image;var a=e.getHeight();var u=e.getWidth();var f=Math.floor(3*a/(4*r.MAX_MODULES));if(f<r.MIN_SKIP||t){f=r.MIN_SKIP}var s=false;var o=new Int32Array(5);for(var h=f-1;h<a&&!s;h+=f){o[0]=0;o[1]=0;o[2]=0;o[3]=0;o[4]=0;var v=0;for(var c=0;c<u;c++){if(e.get(c,h)){if((v&1)===1){v++}o[v]++}else{if((v&1)===0){if(v===4){if(r.foundPatternCross(o)){var w=this.handlePossibleCenter(o,h,c,i);if(w===true){f=2;if(this.hasSkipped===true){s=this.haveMultiplyConfirmedCenters()}else{var l=this.findRowSkip();if(l>o[2]){h+=l-o[2]-f;c=u-1}}}else{o[0]=o[2];o[1]=o[3];o[2]=o[4];o[3]=1;o[4]=0;v=3;continue}v=0;o[0]=0;o[1]=0;o[2]=0;o[3]=0;o[4]=0}else{o[0]=o[2];o[1]=o[3];o[2]=o[4];o[3]=1;o[4]=0;v=3}}else{o[++v]++}}else{o[v]++}}}if(r.foundPatternCross(o)){var w=this.handlePossibleCenter(o,h,u,i);if(w===true){f=o[0];if(this.hasSkipped){s=this.haveMultiplyConfirmedCenters()}}}}var d=this.selectBestPatterns();tr.orderBestPatterns(d);return new Fn(d)};r.centerFromEnd=function(r,n){return n-r[4]-r[3]-r[2]/2};r.foundPatternCross=function(r){var n=0;for(var t=0;t<5;t++){var i=r[t];if(i===0){return false}n+=i}if(n<7){return false}var e=n/7;var a=e/2;return Math.abs(e-r[0])<a&&Math.abs(e-r[1])<a&&Math.abs(3*e-r[2])<3*a&&Math.abs(e-r[3])<a&&Math.abs(e-r[4])<a};r.prototype.getCrossCheckStateCount=function(){var r=this.crossCheckStateCount;r[0]=0;r[1]=0;r[2]=0;r[3]=0;r[4]=0;return r};r.prototype.crossCheckDiagonal=function(n,t,i,e){var a=this.getCrossCheckStateCount();var u=0;var f=this.image;while(n>=u&&t>=u&&f.get(t-u,n-u)){a[2]++;u++}if(n<u||t<u){return false}while(n>=u&&t>=u&&!f.get(t-u,n-u)&&a[1]<=i){a[1]++;u++}if(n<u||t<u||a[1]>i){return false}while(n>=u&&t>=u&&f.get(t-u,n-u)&&a[0]<=i){a[0]++;u++}if(a[0]>i){return false}var s=f.getHeight();var o=f.getWidth();u=1;while(n+u<s&&t+u<o&&f.get(t+u,n+u)){a[2]++;u++}if(n+u>=s||t+u>=o){return false}while(n+u<s&&t+u<o&&!f.get(t+u,n+u)&&a[3]<i){a[3]++;u++}if(n+u>=s||t+u>=o||a[3]>=i){return false}while(n+u<s&&t+u<o&&f.get(t+u,n+u)&&a[4]<i){a[4]++;u++}if(a[4]>=i){return false}var h=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(h-e)<2*e&&r.foundPatternCross(a)};r.prototype.crossCheckVertical=function(n,t,i,e){var a=this.image;var u=a.getHeight();var f=this.getCrossCheckStateCount();var s=n;while(s>=0&&a.get(t,s)){f[2]++;s--}if(s<0){return NaN}while(s>=0&&!a.get(t,s)&&f[1]<=i){f[1]++;s--}if(s<0||f[1]>i){return NaN}while(s>=0&&a.get(t,s)&&f[0]<=i){f[0]++;s--}if(f[0]>i){return NaN}s=n+1;while(s<u&&a.get(t,s)){f[2]++;s++}if(s===u){return NaN}while(s<u&&!a.get(t,s)&&f[3]<i){f[3]++;s++}if(s===u||f[3]>=i){return NaN}while(s<u&&a.get(t,s)&&f[4]<i){f[4]++;s++}if(f[4]>=i){return NaN}var o=f[0]+f[1]+f[2]+f[3]+f[4];if(5*Math.abs(o-e)>=2*e){return NaN}return r.foundPatternCross(f)?r.centerFromEnd(f,s):NaN};r.prototype.crossCheckHorizontal=function(n,t,i,e){var a=this.image;var u=a.getWidth();var f=this.getCrossCheckStateCount();var s=n;while(s>=0&&a.get(s,t)){f[2]++;s--}if(s<0){return NaN}while(s>=0&&!a.get(s,t)&&f[1]<=i){f[1]++;s--}if(s<0||f[1]>i){return NaN}while(s>=0&&a.get(s,t)&&f[0]<=i){f[0]++;s--}if(f[0]>i){return NaN}s=n+1;while(s<u&&a.get(s,t)){f[2]++;s++}if(s===u){return NaN}while(s<u&&!a.get(s,t)&&f[3]<i){f[3]++;s++}if(s===u||f[3]>=i){return NaN}while(s<u&&a.get(s,t)&&f[4]<i){f[4]++;s++}if(f[4]>=i){return NaN}var o=f[0]+f[1]+f[2]+f[3]+f[4];if(5*Math.abs(o-e)>=e){return NaN}return r.foundPatternCross(f)?r.centerFromEnd(f,s):NaN};r.prototype.handlePossibleCenter=function(n,t,i,e){var a=n[0]+n[1]+n[2]+n[3]+n[4];var u=r.centerFromEnd(n,i);var f=this.crossCheckVertical(t,Math.floor(u),n[2],a);if(!isNaN(f)){u=this.crossCheckHorizontal(Math.floor(u),Math.floor(f),n[2],a);if(!isNaN(u)&&(!e||this.crossCheckDiagonal(Math.floor(f),Math.floor(u),n[2],a))){var s=a/7;var o=false;var h=this.possibleCenters;for(var v=0,c=h.length;v<c;v++){var w=h[v];if(w.aboutEquals(s,f,u)){h[v]=w.combineEstimate(f,u,s);o=true;break}}if(!o){var l=new xn(u,f,s);h.push(l);if(this.resultPointCallback!==null&&this.resultPointCallback!==undefined){this.resultPointCallback.foundPossibleResultPoint(l)}}return true}}return false};r.prototype.findRowSkip=function(){var n=this.possibleCenters.length;if(n<=1){return 0}var t=null;for(var i=0,e=this.possibleCenters;i<e.length;i++){var a=e[i];if(a.getCount()>=r.CENTER_QUORUM){if(t==null){t=a}else{this.hasSkipped=true;return Math.floor((Math.abs(t.getX()-a.getX())-Math.abs(t.getY()-a.getY()))/2)}}}return 0};r.prototype.haveMultiplyConfirmedCenters=function(){var n=0;var t=0;var i=this.possibleCenters.length;for(var e=0,a=this.possibleCenters;e<a.length;e++){var u=a[e];if(u.getCount()>=r.CENTER_QUORUM){n++;t+=u.getEstimatedModuleSize()}}if(n<3){return false}var f=t/i;var s=0;for(var o=0,h=this.possibleCenters;o<h.length;o++){var u=h[o];s+=Math.abs(u.getEstimatedModuleSize()-f)}return s<=.05*t};r.prototype.selectBestPatterns=function(){var r=this.possibleCenters.length;if(r<3){throw new N}var n=this.possibleCenters;var t;if(r>3){var i=0;var e=0;for(var a=0,u=this.possibleCenters;a<u.length;a++){var f=u[a];var s=f.getEstimatedModuleSize();i+=s;e+=s*s}t=i/r;var o=Math.sqrt(e/r-t*t);n.sort((function(r,n){var i=Math.abs(n.getEstimatedModuleSize()-t);var e=Math.abs(r.getEstimatedModuleSize()-t);return i<e?-1:i>e?1:0}));var h=Math.max(.2*t,o);for(var v=0;v<n.length&&n.length>3;v++){var c=n[v];if(Math.abs(c.getEstimatedModuleSize()-t)>h){n.splice(v,1);v--}}}if(n.length>3){var i=0;for(var w=0,l=n;w<l.length;w++){var d=l[w];i+=d.getEstimatedModuleSize()}t=i/n.length;n.sort((function(r,n){if(n.getCount()===r.getCount()){var i=Math.abs(n.getEstimatedModuleSize()-t);var e=Math.abs(r.getEstimatedModuleSize()-t);return i<e?1:i>e?-1:0}else{return n.getCount()-r.getCount()}}));n.splice(3)}return[n[0],n[1],n[2]]};return r}();Ln.CENTER_QUORUM=2;Ln.MIN_SKIP=3;Ln.MAX_MODULES=57;var Gn=function(){function r(r){this.image=r}r.prototype.getImage=function(){return this.image};r.prototype.getResultPointCallback=function(){return this.resultPointCallback};r.prototype.detect=function(r){this.resultPointCallback=r===null||r===undefined?null:r.get(p.NEED_RESULT_POINT_CALLBACK);var n=new Ln(this.image,this.resultPointCallback);var t=n.find(r);return this.processFinderPatternInfo(t)};r.prototype.processFinderPatternInfo=function(n){var t=n.getTopLeft();var i=n.getTopRight();var e=n.getBottomLeft();var a=this.calculateModuleSize(t,i,e);if(a<1){throw new N("No pattern found in proccess finder.")}var u=r.computeDimension(t,i,e,a);var f=kn.getProvisionalVersionForDimension(u);var s=f.getDimensionForVersion()-7;var o=null;if(f.getAlignmentPatternCenters().length>0){var h=i.getX()-t.getX()+e.getX();var v=i.getY()-t.getY()+e.getY();var c=1-3/s;var w=Math.floor(t.getX()+c*(h-t.getX()));var l=Math.floor(t.getY()+c*(v-t.getY()));for(var d=4;d<=16;d<<=1){try{o=this.findAlignmentInRegion(a,w,l,d);break}catch(r){if(!(r instanceof N)){throw r}}}}var y=r.createTransform(t,i,e,o,u);var A=r.sampleGrid(this.image,y,u);var I;if(o===null){I=[e,t,i]}else{I=[e,t,i,o]}return new ir(A,I)};r.createTransform=function(r,n,t,i,e){var a=e-3.5;var u;var f;var s;var o;if(i!==null){u=i.getX();f=i.getY();s=a-3;o=s}else{u=n.getX()-r.getX()+t.getX();f=n.getY()-r.getY()+t.getY();s=a;o=a}return fr.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,s,o,3.5,a,r.getX(),r.getY(),n.getX(),n.getY(),u,f,t.getX(),t.getY())};r.sampleGrid=function(r,n,t){var i=hr.getInstance();return i.sampleGridWithTransform(r,t,t,n)};r.computeDimension=function(r,n,t,i){var e=rr.round(tr.distance(r,n)/i);var a=rr.round(tr.distance(r,t)/i);var u=Math.floor((e+a)/2)+7;switch(u&3){case 0:u++;break;case 2:u--;break;case 3:throw new N("Dimensions could be not found.")}return u};r.prototype.calculateModuleSize=function(r,n,t){return(this.calculateModuleSizeOneWay(r,n)+this.calculateModuleSizeOneWay(r,t))/2};r.prototype.calculateModuleSizeOneWay=function(r,n){var t=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(n.getX()),Math.floor(n.getY()));var i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(r.getX()),Math.floor(r.getY()));if(isNaN(t)){return i/7}if(isNaN(i)){return t/7}return(t+i)/14};r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(r,n,t,i){var e=this.sizeOfBlackWhiteBlackRun(r,n,t,i);var a=1;var u=r-(t-r);if(u<0){a=r/(r-u);u=0}else if(u>=this.image.getWidth()){a=(this.image.getWidth()-1-r)/(u-r);u=this.image.getWidth()-1}var f=Math.floor(n-(i-n)*a);a=1;if(f<0){a=n/(n-f);f=0}else if(f>=this.image.getHeight()){a=(this.image.getHeight()-1-n)/(f-n);f=this.image.getHeight()-1}u=Math.floor(r+(u-r)*a);e+=this.sizeOfBlackWhiteBlackRun(r,n,u,f);return e-1};r.prototype.sizeOfBlackWhiteBlackRun=function(r,n,t,i){var e=Math.abs(i-n)>Math.abs(t-r);if(e){var a=r;r=n;n=a;a=t;t=i;i=a}var u=Math.abs(t-r);var f=Math.abs(i-n);var s=-u/2;var o=r<t?1:-1;var h=n<i?1:-1;var v=0;var c=t+o;for(var w=r,l=n;w!==c;w+=o){var d=e?l:w;var y=e?w:l;if(v===1===this.image.get(d,y)){if(v===2){return rr.distance(w,l,r,n)}v++}s+=f;if(s>0){if(l===i){break}l+=h;s-=u}}if(v===2){return rr.distance(t+o,i,r,n)}return NaN};r.prototype.findAlignmentInRegion=function(r,n,t,i){var e=Math.floor(i*r);var a=Math.max(0,n-e);var u=Math.min(this.image.getWidth()-1,n+e);if(u-a<r*3){throw new N("Alignment top exceeds estimated module size.")}var f=Math.max(0,t-e);var s=Math.min(this.image.getHeight()-1,t+e);if(s-f<r*3){throw new N("Alignment bottom exceeds estimated module size.")}var o=new Un(this.image,a,f,u-a,s-f,r,this.resultPointCallback);return o.find()};return r}();var Bn=function(){function r(){this.decoder=new Pn}r.prototype.getDecoder=function(){return this.decoder};r.prototype.decode=function(n,t){var i;var e;if(t!==undefined&&t!==null&&undefined!==t.get(p.PURE_BARCODE)){var a=r.extractPureBits(n.getBlackMatrix());i=this.decoder.decodeBitMatrix(a,t);e=r.NO_POINTS}else{var u=new Gn(n.getBlackMatrix()).detect(t);i=this.decoder.decodeBitMatrix(u.getBits(),t);e=u.getPoints()}if(i.getOther()instanceof Rn){i.getOther().applyMirroredCorrection(e)}var f=new G(i.getText(),i.getRawBytes(),undefined,e,j.QR_CODE,undefined);var s=i.getByteSegments();if(s!==null){f.putMetadata(H.BYTE_SEGMENTS,s)}var o=i.getECLevel();if(o!==null){f.putMetadata(H.ERROR_CORRECTION_LEVEL,o)}if(i.hasStructuredAppend()){f.putMetadata(H.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber());f.putMetadata(H.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())}return f};r.prototype.reset=function(){};r.extractPureBits=function(r){var n=r.getTopLeftOnBit();var t=r.getBottomRightOnBit();if(n===null||t===null){throw new N}var i=this.moduleSize(n,r);var e=n[1];var a=t[1];var u=n[0];var f=t[0];if(u>=f||e>=a){throw new N}if(a-e!==f-u){f=u+(a-e);if(f>=r.getWidth()){throw new N}}var s=Math.round((f-u+1)/i);var o=Math.round((a-e+1)/i);if(s<=0||o<=0){throw new N}if(o!==s){throw new N}var h=Math.floor(i/2);e+=h;u+=h;var v=u+Math.floor((s-1)*i)-f;if(v>0){if(v>h){throw new N}u-=v}var c=e+Math.floor((o-1)*i)-a;if(c>0){if(c>h){throw new N}e-=c}var w=new C(s,o);for(var l=0;l<o;l++){var d=e+Math.floor(l*i);for(var y=0;y<s;y++){if(r.get(u+Math.floor(y*i),d)){w.set(y,l)}}}return w};r.moduleSize=function(r,n){var t=n.getHeight();var i=n.getWidth();var e=r[0];var a=r[1];var u=true;var f=0;while(e<i&&a<t){if(u!==n.get(e,a)){if(++f===5){break}u=!u}e++;a++}if(e===i||a===t){throw new N}return(e-r[0])/7};return r}();Bn.NO_POINTS=new Array;var jn=function(){function r(){}r.prototype.PDF417Common=function(){};r.getBitCountSum=function(r){return rr.sum(r)};r.toIntArray=function(n){if(n==null||!n.length){return r.EMPTY_INT_ARRAY}var t=new Int32Array(n.length);var i=0;for(var e=0,a=n;e<a.length;e++){var u=a[e];t[i++]=u}return t};r.getCodeword=function(n){var t=y.binarySearch(r.SYMBOL_TABLE,n&262143);if(t<0){return-1}return(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS};return r}();jn.NUMBER_OF_CODEWORDS=929;jn.MAX_CODEWORDS_IN_BARCODE=jn.NUMBER_OF_CODEWORDS-1;jn.MIN_ROWS_IN_BARCODE=3;jn.MAX_ROWS_IN_BARCODE=90;jn.MODULES_IN_CODEWORD=17;jn.MODULES_IN_STOP_PATTERN=18;jn.BARS_IN_MODULE=8;jn.EMPTY_INT_ARRAY=new Int32Array([]);jn.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]);jn.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);var Wn=function(){function r(r,n){this.bits=r;this.points=n}r.prototype.getBits=function(){return this.bits};r.prototype.getPoints=function(){return this.points};return r}();var Hn=function(){function r(){}r.detectMultiple=function(n,t,i){var e=n.getBlackMatrix();var a=r.detect(i,e);if(!a.length){e=e.clone();e.rotate180();a=r.detect(i,e)}return new Wn(e,a)};r.detect=function(n,t){var i=new Array;var e=0;var a=0;var u=false;while(e<t.getHeight()){var f=r.findVertices(t,e,a);if(f[0]==null&&f[3]==null){if(!u){break}u=false;a=0;for(var s=0,o=i;s<o.length;s++){var h=o[s];if(h[1]!=null){e=Math.trunc(Math.max(e,h[1].getY()))}if(h[3]!=null){e=Math.max(e,Math.trunc(h[3].getY()))}}e+=r.ROW_STEP;continue}u=true;i.push(f);if(!n){break}if(f[2]!=null){a=Math.trunc(f[2].getX());e=Math.trunc(f[2].getY())}else{a=Math.trunc(f[4].getX());e=Math.trunc(f[4].getY())}}return i};r.findVertices=function(n,t,i){var e=n.getHeight();var a=n.getWidth();var u=new Array(8);r.copyToResult(u,r.findRowsWithPattern(n,e,a,t,i,r.START_PATTERN),r.INDEXES_START_PATTERN);if(u[4]!=null){i=Math.trunc(u[4].getX());t=Math.trunc(u[4].getY())}r.copyToResult(u,r.findRowsWithPattern(n,e,a,t,i,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN);return u};r.copyToResult=function(r,n,t){for(var i=0;i<t.length;i++){r[t[i]]=n[i]}};r.findRowsWithPattern=function(n,t,i,e,a,u){var f=new Array(4);var s=false;var o=new Int32Array(u.length);for(;e<t;e+=r.ROW_STEP){var h=r.findGuardPattern(n,a,e,i,false,u,o);if(h!=null){while(e>0){var v=r.findGuardPattern(n,a,--e,i,false,u,o);if(v!=null){h=v}else{e++;break}}f[0]=new tr(h[0],e);f[1]=new tr(h[1],e);s=true;break}}var c=e+1;if(s){var w=0;var v=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;c<t;c++){var h=r.findGuardPattern(n,v[0],c,i,false,u,o);if(h!=null&&Math.abs(v[0]-h[0])<r.MAX_PATTERN_DRIFT&&Math.abs(v[1]-h[1])<r.MAX_PATTERN_DRIFT){v=h;w=0}else{if(w>r.SKIPPED_ROW_COUNT_MAX){break}else{w++}}}c-=w+1;f[2]=new tr(v[0],c);f[3]=new tr(v[1],c)}if(c-e<r.BARCODE_MIN_HEIGHT){y.fill(f,null)}return f};r.findGuardPattern=function(n,t,i,e,a,u,f){y.fillWithin(f,0,f.length,0);var s=t;var o=0;while(n.get(s,i)&&s>0&&o++<r.MAX_PIXEL_DRIFT){s--}var h=s;var v=0;var c=u.length;for(var l=a;h<e;h++){var d=n.get(h,i);if(d!==l){f[v]++}else{if(v===c-1){if(r.patternMatchVariance(f,u,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE){return new Int32Array([s,h])}s+=f[0]+f[1];w.arraycopy(f,2,f,0,v-1);f[v-1]=0;f[v]=0;v--}else{v++}f[v]=1;l=!l}}if(v===c-1&&r.patternMatchVariance(f,u,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE){return new Int32Array([s,h-1])}return null};r.patternMatchVariance=function(r,n,t){var i=r.length;var e=0;var a=0;for(var u=0;u<i;u++){e+=r[u];a+=n[u]}if(e<a){return Infinity}var f=e/a;t*=f;var s=0;for(var o=0;o<i;o++){var h=r[o];var v=n[o]*f;var c=h>v?h-v:v-h;if(c>t){return Infinity}s+=c}return s/e};return r}();Hn.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]);Hn.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]);Hn.MAX_AVG_VARIANCE=.42;Hn.MAX_INDIVIDUAL_VARIANCE=.8;Hn.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]);Hn.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]);Hn.MAX_PIXEL_DRIFT=3;Hn.MAX_PATTERN_DRIFT=5;Hn.SKIPPED_ROW_COUNT_MAX=25;Hn.ROW_STEP=5;Hn.BARCODE_MIN_HEIGHT=10;var qn=function(){function r(r,n){if(n.length===0){throw new o}this.field=r;var t=n.length;if(t>1&&n[0]===0){var i=1;while(i<t&&n[i]===0){i++}if(i===t){this.coefficients=new Int32Array([0])}else{this.coefficients=new Int32Array(t-i);w.arraycopy(n,i,this.coefficients,0,this.coefficients.length)}}else{this.coefficients=n}}r.prototype.getCoefficients=function(){return this.coefficients};r.prototype.getDegree=function(){return this.coefficients.length-1};r.prototype.isZero=function(){return this.coefficients[0]===0};r.prototype.getCoefficient=function(r){return this.coefficients[this.coefficients.length-1-r]};r.prototype.evaluateAt=function(r){if(r===0){return this.getCoefficient(0)}if(r===1){var n=0;for(var t=0,i=this.coefficients;t<i.length;t++){var e=i[t];n=this.field.add(n,e)}return n}var a=this.coefficients[0];var u=this.coefficients.length;for(var f=1;f<u;f++){a=this.field.add(this.field.multiply(r,a),this.coefficients[f])}return a};r.prototype.add=function(n){if(!this.field.equals(n.field)){throw new o("ModulusPolys do not have same ModulusGF field")}if(this.isZero()){return n}if(n.isZero()){return this}var t=this.coefficients;var i=n.coefficients;if(t.length>i.length){var e=t;t=i;i=e}var a=new Int32Array(i.length);var u=i.length-t.length;w.arraycopy(i,0,a,0,u);for(var f=u;f<i.length;f++){a[f]=this.field.add(t[f-u],i[f])}return new r(this.field,a)};r.prototype.subtract=function(r){if(!this.field.equals(r.field)){throw new o("ModulusPolys do not have same ModulusGF field")}if(r.isZero()){return this}return this.add(r.negative())};r.prototype.multiply=function(n){if(n instanceof r){return this.multiplyOther(n)}return this.multiplyScalar(n)};r.prototype.multiplyOther=function(n){if(!this.field.equals(n.field)){throw new o("ModulusPolys do not have same ModulusGF field")}if(this.isZero()||n.isZero()){return new r(this.field,new Int32Array([0]))}var t=this.coefficients;var i=t.length;var e=n.coefficients;var a=e.length;var u=new Int32Array(i+a-1);for(var f=0;f<i;f++){var s=t[f];for(var h=0;h<a;h++){u[f+h]=this.field.add(u[f+h],this.field.multiply(s,e[h]))}}return new r(this.field,u)};r.prototype.negative=function(){var n=this.coefficients.length;var t=new Int32Array(n);for(var i=0;i<n;i++){t[i]=this.field.subtract(0,this.coefficients[i])}return new r(this.field,t)};r.prototype.multiplyScalar=function(n){if(n===0){return new r(this.field,new Int32Array([0]))}if(n===1){return this}var t=this.coefficients.length;var i=new Int32Array(t);for(var e=0;e<t;e++){i[e]=this.field.multiply(this.coefficients[e],n)}return new r(this.field,i)};r.prototype.multiplyByMonomial=function(n,t){if(n<0){throw new o}if(t===0){return new r(this.field,new Int32Array([0]))}var i=this.coefficients.length;var e=new Int32Array(i+n);for(var a=0;a<i;a++){e[a]=this.field.multiply(this.coefficients[a],t)}return new r(this.field,e)};r.prototype.toString=function(){var r=new E;for(var n=this.getDegree();n>=0;n--){var t=this.getCoefficient(n);if(t!==0){if(t<0){r.append(" - ");t=-t}else{if(r.length()>0){r.append(" + ")}}if(n===0||t!==1){r.append(t)}if(n!==0){if(n===1){r.append("x")}else{r.append("x^");r.append(n)}}}}return r.toString()};return r}();var Xn=function(){function r(){}r.prototype.add=function(r,n){return(r+n)%this.modulus};r.prototype.subtract=function(r,n){return(this.modulus+r-n)%this.modulus};r.prototype.exp=function(r){return this.expTable[r]};r.prototype.log=function(r){if(r===0){throw new o}return this.logTable[r]};r.prototype.inverse=function(r){if(r===0){throw new Q}return this.expTable[this.modulus-this.logTable[r]-1]};r.prototype.multiply=function(r,n){if(r===0||n===0){return 0}return this.expTable[(this.logTable[r]+this.logTable[n])%(this.modulus-1)]};r.prototype.getSize=function(){return this.modulus};r.prototype.equals=function(r){return r===this};return r}();var Kn=function(r){i(n,r);function n(n,t){var i=r.call(this)||this;i.modulus=n;i.expTable=new Int32Array(n);i.logTable=new Int32Array(n);var e=1;for(var a=0;a<n;a++){i.expTable[a]=e;e=e*t%n}for(var a=0;a<n-1;a++){i.logTable[i.expTable[a]]=a}i.zero=new qn(i,new Int32Array([0]));i.one=new qn(i,new Int32Array([1]));return i}n.prototype.getZero=function(){return this.zero};n.prototype.getOne=function(){return this.one};n.prototype.buildMonomial=function(r,n){if(r<0){throw new o}if(n===0){return this.zero}var t=new Int32Array(r+1);t[0]=n;return new qn(this,t)};return n}(Xn);Kn.PDF417_GF=new Kn(jn.NUMBER_OF_CODEWORDS,3);var Qn=function(){function r(){this.field=Kn.PDF417_GF}r.prototype.decode=function(r,n,t){var i=new qn(this.field,r);var e=new Int32Array(n);var a=false;for(var u=n;u>0;u--){var f=i.evaluateAt(this.field.exp(u));e[n-u]=f;if(f!==0){a=true}}if(!a){return 0}var s=this.field.getOne();if(t!=null){for(var o=0,h=t;o<h.length;o++){var c=h[o];var w=this.field.exp(r.length-1-c);var l=new qn(this.field,new Int32Array([this.field.subtract(0,w),1]));s=s.multiply(l)}}var d=new qn(this.field,e);var y=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),d,n);var A=y[0];var I=y[1];var b=this.findErrorLocations(A);var p=this.findErrorMagnitudes(I,A,b);for(var u=0;u<b.length;u++){var M=r.length-1-this.field.log(b[u]);if(M<0){throw v.getChecksumInstance()}r[M]=this.field.subtract(r[M],p[u])}return b.length};r.prototype.runEuclideanAlgorithm=function(r,n,t){if(r.getDegree()<n.getDegree()){var i=r;r=n;n=i}var e=r;var a=n;var u=this.field.getZero();var f=this.field.getOne();while(a.getDegree()>=Math.round(t/2)){var s=e;var o=u;e=a;u=f;if(e.isZero()){throw v.getChecksumInstance()}a=s;var h=this.field.getZero();var c=e.getCoefficient(e.getDegree());var w=this.field.inverse(c);while(a.getDegree()>=e.getDegree()&&!a.isZero()){var l=a.getDegree()-e.getDegree();var d=this.field.multiply(a.getCoefficient(a.getDegree()),w);h=h.add(this.field.buildMonomial(l,d));a=a.subtract(e.multiplyByMonomial(l,d))}f=h.multiply(u).subtract(o).negative()}var y=f.getCoefficient(0);if(y===0){throw v.getChecksumInstance()}var A=this.field.inverse(y);var I=f.multiply(A);var b=a.multiply(A);return[I,b]};r.prototype.findErrorLocations=function(r){var n=r.getDegree();var t=new Int32Array(n);var i=0;for(var e=1;e<this.field.getSize()&&i<n;e++){if(r.evaluateAt(e)===0){t[i]=this.field.inverse(e);i++}}if(i!==n){throw v.getChecksumInstance()}return t};r.prototype.findErrorMagnitudes=function(r,n,t){var i=n.getDegree();var e=new Int32Array(i);for(var a=1;a<=i;a++){e[i-a]=this.field.multiply(a,n.getCoefficient(a))}var u=new qn(this.field,e);var f=t.length;var s=new Int32Array(f);for(var a=0;a<f;a++){var o=this.field.inverse(t[a]);var h=this.field.subtract(0,r.evaluateAt(o));var v=this.field.inverse(u.evaluateAt(o));s[a]=this.field.multiply(h,v)}return s};return r}();var zn=function(){function r(n,t,i,e,a){if(n instanceof r){this.constructor_2(n)}else{this.constructor_1(n,t,i,e,a)}}r.prototype.constructor_1=function(r,n,t,i,e){var a=n==null||t==null;var u=i==null||e==null;if(a&&u){throw new N}if(a){n=new tr(0,i.getY());t=new tr(0,e.getY())}else if(u){i=new tr(r.getWidth()-1,n.getY());e=new tr(r.getWidth()-1,t.getY())}this.image=r;this.topLeft=n;this.bottomLeft=t;this.topRight=i;this.bottomRight=e;this.minX=Math.trunc(Math.min(n.getX(),t.getX()));this.maxX=Math.trunc(Math.max(i.getX(),e.getX()));this.minY=Math.trunc(Math.min(n.getY(),i.getY()));this.maxY=Math.trunc(Math.max(t.getY(),e.getY()))};r.prototype.constructor_2=function(r){this.image=r.image;this.topLeft=r.getTopLeft();this.bottomLeft=r.getBottomLeft();this.topRight=r.getTopRight();this.bottomRight=r.getBottomRight();this.minX=r.getMinX();this.maxX=r.getMaxX();this.minY=r.getMinY();this.maxY=r.getMaxY()};r.merge=function(n,t){if(n==null){return t}if(t==null){return n}return new r(n.image,n.topLeft,n.bottomLeft,t.topRight,t.bottomRight)};r.prototype.addMissingRows=function(n,t,i){var e=this.topLeft;var a=this.bottomLeft;var u=this.topRight;var f=this.bottomRight;if(n>0){var s=i?this.topLeft:this.topRight;var o=Math.trunc(s.getY()-n);if(o<0){o=0}var h=new tr(s.getX(),o);if(i){e=h}else{u=h}}if(t>0){var v=i?this.bottomLeft:this.bottomRight;var c=Math.trunc(v.getY()+t);if(c>=this.image.getHeight()){c=this.image.getHeight()-1}var w=new tr(v.getX(),c);if(i){a=w}else{f=w}}return new r(this.image,e,a,u,f)};r.prototype.getMinX=function(){return this.minX};r.prototype.getMaxX=function(){return this.maxX};r.prototype.getMinY=function(){return this.minY};r.prototype.getMaxY=function(){return this.maxY};r.prototype.getTopLeft=function(){return this.topLeft};r.prototype.getTopRight=function(){return this.topRight};r.prototype.getBottomLeft=function(){return this.bottomLeft};r.prototype.getBottomRight=function(){return this.bottomRight};return r}();var Zn=function(){function r(r,n,t,i){this.columnCount=r;this.errorCorrectionLevel=i;this.rowCountUpperPart=n;this.rowCountLowerPart=t;this.rowCount=n+t}r.prototype.getColumnCount=function(){return this.columnCount};r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel};r.prototype.getRowCount=function(){return this.rowCount};r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart};r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart};return r}();var Yn=function(){function r(){this.buffer=""}r.form=function(r,n){var t=-1;function i(r,i,e,a,u,f){if(r==="%%")return"%";if(n[++t]===undefined)return undefined;r=a?parseInt(a.substr(1)):undefined;var s=u?parseInt(u.substr(1)):undefined;var o;switch(f){case"s":o=n[t];break;case"c":o=n[t][0];break;case"f":o=parseFloat(n[t]).toFixed(r);break;case"p":o=parseFloat(n[t]).toPrecision(r);break;case"e":o=parseFloat(n[t]).toExponential(r);break;case"x":o=parseInt(n[t]).toString(s?s:16);break;case"d":o=parseFloat(parseInt(n[t],s?s:10).toPrecision(r)).toFixed(0);break}o=typeof o==="object"?JSON.stringify(o):(+o).toString(s);var h=parseInt(e);var v=e&&e[0]+""==="0"?"0":" ";while(o.length<h)o=i!==undefined?o+v:v+o;return o}var e=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(e,i)};r.prototype.format=function(n){var t=[];for(var i=1;i<arguments.length;i++){t[i-1]=arguments[i]}this.buffer+=r.form(n,t)};r.prototype.toString=function(){return this.buffer};return r}();var Jn=function(){function r(r){this.boundingBox=new zn(r);this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}r.prototype.getCodewordNearby=function(n){var t=this.getCodeword(n);if(t!=null){return t}for(var i=1;i<r.MAX_NEARBY_DISTANCE;i++){var e=this.imageRowToCodewordIndex(n)-i;if(e>=0){t=this.codewords[e];if(t!=null){return t}}e=this.imageRowToCodewordIndex(n)+i;if(e<this.codewords.length){t=this.codewords[e];if(t!=null){return t}}}return null};r.prototype.imageRowToCodewordIndex=function(r){return r-this.boundingBox.getMinY()};r.prototype.setCodeword=function(r,n){this.codewords[this.imageRowToCodewordIndex(r)]=n};r.prototype.getCodeword=function(r){return this.codewords[this.imageRowToCodewordIndex(r)]};r.prototype.getBoundingBox=function(){return this.boundingBox};r.prototype.getCodewords=function(){return this.codewords};r.prototype.toString=function(){var r=new Yn;var n=0;for(var t=0,i=this.codewords;t<i.length;t++){var e=i[t];if(e==null){r.format("%3d:    |   %n",n++);continue}r.format("%3d: %3d|%3d%n",n++,e.getRowNumber(),e.getValue())}return r.toString()};return r}();Jn.MAX_NEARBY_DISTANCE=5;var Vn=function(){function r(){this.values=new Map}r.prototype.setValue=function(r){r=Math.trunc(r);var n=this.values.get(r);if(n==null){n=0}n++;this.values.set(r,n)};r.prototype.getValue=function(){var r=-1;var n=new Array;var t=function(t,i){var e={getKey:function(){return t},getValue:function(){return i}};if(e.getValue()>r){r=e.getValue();n=[];n.push(e.getKey())}else if(e.getValue()===r){n.push(e.getKey())}};for(var i=0,e=this.values.entries();i<e.length;i++){var a=e[i],u=a[0],f=a[1];t(u,f)}return jn.toIntArray(n)};r.prototype.getConfidence=function(r){return this.values.get(r)};return r}();var $n=function(r){i(n,r);function n(n,t){var i=r.call(this,n)||this;i._isLeft=t;return i}n.prototype.setRowNumbers=function(){for(var r=0,n=this.getCodewords();r<n.length;r++){var t=n[r];if(t!=null){t.setRowNumberAsRowIndicatorColumn()}}};n.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers();this.removeIncorrectCodewords(n,r);var t=this.getBoundingBox();var i=this._isLeft?t.getTopLeft():t.getTopRight();var e=this._isLeft?t.getBottomLeft():t.getBottomRight();var a=this.imageRowToCodewordIndex(Math.trunc(i.getY()));var u=this.imageRowToCodewordIndex(Math.trunc(e.getY()));var f=-1;var s=1;var o=0;for(var h=a;h<u;h++){if(n[h]==null){continue}var v=n[h];var c=v.getRowNumber()-f;if(c===0){o++}else if(c===1){s=Math.max(s,o);o=1;f=v.getRowNumber()}else if(c<0||v.getRowNumber()>=r.getRowCount()||c>h){n[h]=null}else{var w=void 0;if(s>2){w=(s-2)*c}else{w=c}var l=w>=h;for(var d=1;d<=w&&!l;d++){l=n[h-d]!=null}if(l){n[h]=null}else{f=v.getRowNumber();o=1}}}};n.prototype.getRowHeights=function(){var r=this.getBarcodeMetadata();if(r==null){return null}this.adjustIncompleteIndicatorColumnRowNumbers(r);var n=new Int32Array(r.getRowCount());for(var t=0,i=this.getCodewords();t<i.length;t++){var e=i[t];if(e!=null){var a=e.getRowNumber();if(a>=n.length){continue}n[a]++}}return n};n.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){var n=this.getBoundingBox();var t=this._isLeft?n.getTopLeft():n.getTopRight();var i=this._isLeft?n.getBottomLeft():n.getBottomRight();var e=this.imageRowToCodewordIndex(Math.trunc(t.getY()));var a=this.imageRowToCodewordIndex(Math.trunc(i.getY()));var u=this.getCodewords();var f=-1;for(var s=e;s<a;s++){if(u[s]==null){continue}var o=u[s];o.setRowNumberAsRowIndicatorColumn();var h=o.getRowNumber()-f;if(h===0);else if(h===1){f=o.getRowNumber()}else if(o.getRowNumber()>=r.getRowCount()){u[s]=null}else{f=o.getRowNumber()}}};n.prototype.getBarcodeMetadata=function(){var r=this.getCodewords();var n=new Vn;var t=new Vn;var i=new Vn;var e=new Vn;for(var a=0,u=r;a<u.length;a++){var f=u[a];if(f==null){continue}f.setRowNumberAsRowIndicatorColumn();var s=f.getValue()%30;var o=f.getRowNumber();if(!this._isLeft){o+=2}switch(o%3){case 0:t.setValue(s*3+1);break;case 1:e.setValue(s/3);i.setValue(s%3);break;case 2:n.setValue(s+1);break}}if(n.getValue().length===0||t.getValue().length===0||i.getValue().length===0||e.getValue().length===0||n.getValue()[0]<1||t.getValue()[0]+i.getValue()[0]<jn.MIN_ROWS_IN_BARCODE||t.getValue()[0]+i.getValue()[0]>jn.MAX_ROWS_IN_BARCODE){return null}var h=new Zn(n.getValue()[0],t.getValue()[0],i.getValue()[0],e.getValue()[0]);this.removeIncorrectCodewords(r,h);return h};n.prototype.removeIncorrectCodewords=function(r,n){for(var t=0;t<r.length;t++){var i=r[t];if(r[t]==null){continue}var e=i.getValue()%30;var a=i.getRowNumber();if(a>n.getRowCount()){r[t]=null;continue}if(!this._isLeft){a+=2}switch(a%3){case 0:if(e*3+1!==n.getRowCountUpperPart()){r[t]=null}break;case 1:if(Math.trunc(e/3)!==n.getErrorCorrectionLevel()||e%3!==n.getRowCountLowerPart()){r[t]=null}break;case 2:if(e+1!==n.getColumnCount()){r[t]=null}break}}};n.prototype.isLeft=function(){return this._isLeft};n.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+r.prototype.toString.call(this)};return n}(Jn);var rt=function(){function r(r,n){this.ADJUST_ROW_NUMBER_SKIP=2;this.barcodeMetadata=r;this.barcodeColumnCount=r.getColumnCount();this.boundingBox=n;this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]);this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var r=jn.MAX_CODEWORDS_IN_BARCODE;var n;do{n=r;r=this.adjustRowNumbersAndGetCount()}while(r>0&&r<n);return this.detectionResultColumns};r.prototype.adjustIndicatorColumnRowNumbers=function(r){if(r!=null){r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}};r.prototype.adjustRowNumbersAndGetCount=function(){var r=this.adjustRowNumbersByRow();if(r===0){return 0}for(var n=1;n<this.barcodeColumnCount+1;n++){var t=this.detectionResultColumns[n].getCodewords();for(var i=0;i<t.length;i++){if(t[i]==null){continue}if(!t[i].hasValidRowNumber()){this.adjustRowNumbers(n,i,t)}}}return r};r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var r=this.adjustRowNumbersFromLRI();return r+this.adjustRowNumbersFromRRI()};r.prototype.adjustRowNumbersFromBothRI=function(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null){return}var r=this.detectionResultColumns[0].getCodewords();var n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(var t=0;t<r.length;t++){if(r[t]!=null&&n[t]!=null&&r[t].getRowNumber()===n[t].getRowNumber()){for(var i=1;i<=this.barcodeColumnCount;i++){var e=this.detectionResultColumns[i].getCodewords()[t];if(e==null){continue}e.setRowNumber(r[t].getRowNumber());if(!e.hasValidRowNumber()){this.detectionResultColumns[i].getCodewords()[t]=null}}}}};r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null){return 0}var n=0;var t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(var i=0;i<t.length;i++){if(t[i]==null){continue}var e=t[i].getRowNumber();var a=0;for(var u=this.barcodeColumnCount+1;u>0&&a<this.ADJUST_ROW_NUMBER_SKIP;u--){var f=this.detectionResultColumns[u].getCodewords()[i];if(f!=null){a=r.adjustRowNumberIfValid(e,a,f);if(!f.hasValidRowNumber()){n++}}}}return n};r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null){return 0}var n=0;var t=this.detectionResultColumns[0].getCodewords();for(var i=0;i<t.length;i++){if(t[i]==null){continue}var e=t[i].getRowNumber();var a=0;for(var u=1;u<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;u++){var f=this.detectionResultColumns[u].getCodewords()[i];if(f!=null){a=r.adjustRowNumberIfValid(e,a,f);if(!f.hasValidRowNumber()){n++}}}}return n};r.adjustRowNumberIfValid=function(r,n,t){if(t==null){return n}if(!t.hasValidRowNumber()){if(t.isValidRowNumber(r)){t.setRowNumber(r);n=0}else{++n}}return n};r.prototype.adjustRowNumbers=function(n,t,i){if(!this.detectionResultColumns[n-1]){return}var e=i[t];var a=this.detectionResultColumns[n-1].getCodewords();var u=a;if(this.detectionResultColumns[n+1]!=null){u=this.detectionResultColumns[n+1].getCodewords()}var f=new Array(14);f[2]=a[t];f[3]=u[t];if(t>0){f[0]=i[t-1];f[4]=a[t-1];f[5]=u[t-1]}if(t>1){f[8]=i[t-2];f[10]=a[t-2];f[11]=u[t-2]}if(t<i.length-1){f[1]=i[t+1];f[6]=a[t+1];f[7]=u[t+1]}if(t<i.length-2){f[9]=i[t+2];f[12]=a[t+2];f[13]=u[t+2]}for(var s=0,o=f;s<o.length;s++){var h=o[s];if(r.adjustRowNumber(e,h)){return}}};r.adjustRowNumber=function(r,n){if(n==null){return false}if(n.hasValidRowNumber()&&n.getBucket()===r.getBucket()){r.setRowNumber(n.getRowNumber());return true}return false};r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount};r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()};r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()};r.prototype.setBoundingBox=function(r){this.boundingBox=r};r.prototype.getBoundingBox=function(){return this.boundingBox};r.prototype.setDetectionResultColumn=function(r,n){this.detectionResultColumns[r]=n};r.prototype.getDetectionResultColumn=function(r){return this.detectionResultColumns[r]};r.prototype.toString=function(){var r=this.detectionResultColumns[0];if(r==null){r=this.detectionResultColumns[this.barcodeColumnCount+1]}var n=new Yn;for(var t=0;t<r.getCodewords().length;t++){n.format("CW %3d:",t);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}var e=this.detectionResultColumns[i].getCodewords()[t];if(e==null){n.format("    |   ");continue}n.format(" %3d|%3d",e.getRowNumber(),e.getValue())}n.format("%n")}return n.toString()};return r}();var nt=function(){function r(n,t,i,e){this.rowNumber=r.BARCODE_ROW_UNKNOWN;this.startX=Math.trunc(n);this.endX=Math.trunc(t);this.bucket=Math.trunc(i);this.value=Math.trunc(e)}r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)};r.prototype.isValidRowNumber=function(n){return n!==r.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3};r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))};r.prototype.getWidth=function(){return this.endX-this.startX};r.prototype.getStartX=function(){return this.startX};r.prototype.getEndX=function(){return this.endX};r.prototype.getBucket=function(){return this.bucket};r.prototype.getValue=function(){return this.value};r.prototype.getRowNumber=function(){return this.rowNumber};r.prototype.setRowNumber=function(r){this.rowNumber=r};r.prototype.toString=function(){return this.rowNumber+"|"+this.value};return r}();nt.BARCODE_ROW_UNKNOWN=-1;var tt=function(){function r(){}r.initialize=function(){for(var n=0;n<jn.SYMBOL_TABLE.length;n++){var t=jn.SYMBOL_TABLE[n];var i=t&1;for(var e=0;e<jn.BARS_IN_MODULE;e++){var a=0;while((t&1)===i){a+=1;t>>=1}i=t&1;if(!r.RATIOS_TABLE[n]){r.RATIOS_TABLE[n]=new Array(jn.BARS_IN_MODULE)}r.RATIOS_TABLE[n][jn.BARS_IN_MODULE-e-1]=Math.fround(a/jn.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=true};r.getDecodedValue=function(n){var t=r.getDecodedCodewordValue(r.sampleBitCounts(n));if(t!==-1){return t}return r.getClosestDecodedValue(n)};r.sampleBitCounts=function(r){var n=rr.sum(r);var t=new Int32Array(jn.BARS_IN_MODULE);var i=0;var e=0;for(var a=0;a<jn.MODULES_IN_CODEWORD;a++){var u=n/(2*jn.MODULES_IN_CODEWORD)+a*n/jn.MODULES_IN_CODEWORD;if(e+r[i]<=u){e+=r[i];i++}t[i]++}return t};r.getDecodedCodewordValue=function(n){var t=r.getBitValue(n);return jn.getCodeword(t)===-1?-1:t};r.getBitValue=function(r){var n=0;for(var t=0;t<r.length;t++){for(var i=0;i<r[t];i++){n=n<<1|(t%2===0?1:0)}}return Math.trunc(n)};r.getClosestDecodedValue=function(n){var t=rr.sum(n);var i=new Array(jn.BARS_IN_MODULE);if(t>1){for(var e=0;e<i.length;e++){i[e]=Math.fround(n[e]/t)}}var a=nr.MAX_VALUE;var u=-1;if(!this.bSymbolTableReady){r.initialize()}for(var f=0;f<r.RATIOS_TABLE.length;f++){var s=0;var o=r.RATIOS_TABLE[f];for(var h=0;h<jn.BARS_IN_MODULE;h++){var v=Math.fround(o[h]-i[h]);s+=Math.fround(v*v);if(s>=a){break}}if(s<a){a=s;u=jn.SYMBOL_TABLE[f]}}return u};return r}();tt.bSymbolTableReady=false;tt.RATIOS_TABLE=new Array(jn.SYMBOL_TABLE.length).map((function(r){return new Array(jn.BARS_IN_MODULE)}));var it=function(){function r(){this.segmentCount=-1;this.fileSize=-1;this.timestamp=-1;this.checksum=-1}r.prototype.getSegmentIndex=function(){return this.segmentIndex};r.prototype.setSegmentIndex=function(r){this.segmentIndex=r};r.prototype.getFileId=function(){return this.fileId};r.prototype.setFileId=function(r){this.fileId=r};r.prototype.getOptionalData=function(){return this.optionalData};r.prototype.setOptionalData=function(r){this.optionalData=r};r.prototype.isLastSegment=function(){return this.lastSegment};r.prototype.setLastSegment=function(r){this.lastSegment=r};r.prototype.getSegmentCount=function(){return this.segmentCount};r.prototype.setSegmentCount=function(r){this.segmentCount=r};r.prototype.getSender=function(){return this.sender||null};r.prototype.setSender=function(r){this.sender=r};r.prototype.getAddressee=function(){return this.addressee||null};r.prototype.setAddressee=function(r){this.addressee=r};r.prototype.getFileName=function(){return this.fileName};r.prototype.setFileName=function(r){this.fileName=r};r.prototype.getFileSize=function(){return this.fileSize};r.prototype.setFileSize=function(r){this.fileSize=r};r.prototype.getChecksum=function(){return this.checksum};r.prototype.setChecksum=function(r){this.checksum=r};r.prototype.getTimestamp=function(){return this.timestamp};r.prototype.setTimestamp=function(r){this.timestamp=r};return r}();var et=function(){function r(){}r.parseLong=function(r,n){if(n===void 0){n=undefined}return parseInt(r,n)};return r}();var at=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(f);at.kind="NullPointerException";var ut=function(){function r(){}r.prototype.writeBytes=function(r){this.writeBytesOffset(r,0,r.length)};r.prototype.writeBytesOffset=function(r,n,t){if(r==null){throw new at}else if(n<0||n>r.length||t<0||n+t>r.length||n+t<0){throw new l}else if(t===0){return}for(var i=0;i<t;i++){this.write(r[n+i])}};r.prototype.flush=function(){};r.prototype.close=function(){};return r}();var ft=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(f);var st=function(r){i(n,r);function n(n){if(n===void 0){n=32}var t=r.call(this)||this;t.count=0;if(n<0){throw new o("Negative initial size: "+n)}t.buf=new Uint8Array(n);return t}n.prototype.ensureCapacity=function(r){if(r-this.buf.length>0)this.grow(r)};n.prototype.grow=function(r){var n=this.buf.length;var t=n<<1;if(t-r<0)t=r;if(t<0){if(r<0)throw new ft;t=A.MAX_VALUE}this.buf=y.copyOfUint8Array(this.buf,t)};n.prototype.write=function(r){this.ensureCapacity(this.count+1);this.buf[this.count]=r;this.count+=1};n.prototype.writeBytesOffset=function(r,n,t){if(n<0||n>r.length||t<0||n+t-r.length>0){throw new l}this.ensureCapacity(this.count+t);w.arraycopy(r,n,this.buf,this.count,t);this.count+=t};n.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)};n.prototype.reset=function(){this.count=0};n.prototype.toByteArray=function(){return y.copyOfUint8Array(this.buf,this.count)};n.prototype.size=function(){return this.count};n.prototype.toString=function(r){if(!r){return this.toString_void()}if(typeof r==="string"){return this.toString_string(r)}return this.toString_number(r)};n.prototype.toString_void=function(){return new String(this.buf).toString()};n.prototype.toString_string=function(r){return new String(this.buf).toString()};n.prototype.toString_number=function(r){return new String(this.buf).toString()};n.prototype.close=function(){};return n}(ut);var ot;(function(r){r[r["ALPHA"]=0]="ALPHA";r[r["LOWER"]=1]="LOWER";r[r["MIXED"]=2]="MIXED";r[r["PUNCT"]=3]="PUNCT";r[r["ALPHA_SHIFT"]=4]="ALPHA_SHIFT";r[r["PUNCT_SHIFT"]=5]="PUNCT_SHIFT"})(ot||(ot={}));function ht(){if(typeof window!=="undefined"){return window["BigInt"]||null}if(typeof F!=="undefined"){return F["BigInt"]||null}if(typeof self!=="undefined"){return self["BigInt"]||null}throw new Error("Can't search globals for BigInt!")}var vt;function ct(r){if(typeof vt==="undefined"){vt=ht()}if(vt===null){throw new Error("BigInt is not supported!")}return vt(r)}function wt(){var r=[];r[0]=ct(1);var n=ct(900);r[1]=n;for(var t=2;t<16;t++){r[t]=r[t-1]*n}return r}var lt=function(){function r(){}r.decode=function(n,t){var i=new E("");var e=m.ISO8859_1;i.enableDecoding(e);var a=1;var u=n[a++];var f=new it;while(a<n[0]){switch(u){case r.TEXT_COMPACTION_MODE_LATCH:a=r.textCompaction(n,a,i);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:a=r.byteCompaction(u,n,e,a,i);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:a=r.numericCompaction(n,a,i);break;case r.ECI_CHARSET:m.getCharacterSetECIByValue(n[a++]);break;case r.ECI_GENERAL_PURPOSE:a+=2;break;case r.ECI_USER_DEFINED:a++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=r.decodeMacroBlock(n,a,f);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new M;default:a--;a=r.textCompaction(n,a,i);break}if(a<n.length){u=n[a++]}else{throw M.getFormatInstance()}}if(i.length()===0){throw M.getFormatInstance()}var s=new q(null,i.toString(),null,t);s.setOther(f);return s};r.decodeMacroBlock=function(n,t,i){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>n[0]){throw M.getFormatInstance()}var e=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS);for(var a=0;a<r.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++){e[a]=n[t]}i.setSegmentIndex(A.parseInt(r.decodeBase900toBase10(e,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var u=new E;t=r.textCompaction(n,t,u);i.setFileId(u.toString());var f=-1;if(n[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD){f=t+1}while(t<n[0]){switch(n[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:t++;switch(n[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var s=new E;t=r.textCompaction(n,t+1,s);i.setFileName(s.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var o=new E;t=r.textCompaction(n,t+1,o);i.setSender(o.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var h=new E;t=r.textCompaction(n,t+1,h);i.setAddressee(h.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var v=new E;t=r.numericCompaction(n,t+1,v);i.setSegmentCount(A.parseInt(v.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var c=new E;t=r.numericCompaction(n,t+1,c);i.setTimestamp(et.parseLong(c.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var w=new E;t=r.numericCompaction(n,t+1,w);i.setChecksum(A.parseInt(w.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var l=new E;t=r.numericCompaction(n,t+1,l);i.setFileSize(et.parseLong(l.toString()));break;default:throw M.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++;i.setLastSegment(true);break;default:throw M.getFormatInstance()}}if(f!==-1){var d=t-f;if(i.isLastSegment()){d--}i.setOptionalData(y.copyOfRange(n,f,f+d))}return t};r.textCompaction=function(n,t,i){var e=new Int32Array((n[0]-t)*2);var a=new Int32Array((n[0]-t)*2);var u=0;var f=false;while(t<n[0]&&!f){var s=n[t++];if(s<r.TEXT_COMPACTION_MODE_LATCH){e[u]=s/30;e[u+1]=s%30;u+=2}else{switch(s){case r.TEXT_COMPACTION_MODE_LATCH:e[u++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--;f=true;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e[u]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE;s=n[t++];a[u]=s;u++;break}}}r.decodeTextCompaction(e,a,u,i);return t};r.decodeTextCompaction=function(n,t,i,e){var a=ot.ALPHA;var u=ot.ALPHA;var f=0;while(f<i){var s=n[f];var o="";switch(a){case ot.ALPHA:if(s<26){o=String.fromCharCode(65+s)}else{switch(s){case 26:o=" ";break;case r.LL:a=ot.LOWER;break;case r.ML:a=ot.MIXED;break;case r.PS:u=a;a=ot.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e.append(t[f]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=ot.ALPHA;break}}break;case ot.LOWER:if(s<26){o=String.fromCharCode(97+s)}else{switch(s){case 26:o=" ";break;case r.AS:u=a;a=ot.ALPHA_SHIFT;break;case r.ML:a=ot.MIXED;break;case r.PS:u=a;a=ot.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e.append(t[f]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=ot.ALPHA;break}}break;case ot.MIXED:if(s<r.PL){o=r.MIXED_CHARS[s]}else{switch(s){case r.PL:a=ot.PUNCT;break;case 26:o=" ";break;case r.LL:a=ot.LOWER;break;case r.AL:a=ot.ALPHA;break;case r.PS:u=a;a=ot.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e.append(t[f]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=ot.ALPHA;break}}break;case ot.PUNCT:if(s<r.PAL){o=r.PUNCT_CHARS[s]}else{switch(s){case r.PAL:a=ot.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e.append(t[f]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=ot.ALPHA;break}}break;case ot.ALPHA_SHIFT:a=u;if(s<26){o=String.fromCharCode(65+s)}else{switch(s){case 26:o=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:a=ot.ALPHA;break}}break;case ot.PUNCT_SHIFT:a=u;if(s<r.PAL){o=r.PUNCT_CHARS[s]}else{switch(s){case r.PAL:a=ot.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e.append(t[f]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=ot.ALPHA;break}}break}if(o!==""){e.append(o)}f++}};r.byteCompaction=function(n,t,i,e,a){var u=new st;var f=0;var s=0;var o=false;switch(n){case r.BYTE_COMPACTION_MODE_LATCH:var h=new Int32Array(6);var v=t[e++];while(e<t[0]&&!o){h[f++]=v;s=900*s+v;v=t[e++];switch(v){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:e--;o=true;break;default:if(f%5===0&&f>0){for(var c=0;c<6;++c){u.write(Number(ct(s)>>ct(8*(5-c))))}s=0;f=0}break}}if(e===t[0]&&v<r.TEXT_COMPACTION_MODE_LATCH){h[f++]=v}for(var w=0;w<f;w++){u.write(h[w])}break;case r.BYTE_COMPACTION_MODE_LATCH_6:while(e<t[0]&&!o){var l=t[e++];if(l<r.TEXT_COMPACTION_MODE_LATCH){f++;s=900*s+l}else{switch(l){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:e--;o=true;break}}if(f%5===0&&f>0){for(var c=0;c<6;++c){u.write(Number(ct(s)>>ct(8*(5-c))))}s=0;f=0}}break}a.append(g.decode(u.toByteArray(),i));return e};r.numericCompaction=function(n,t,i){var e=0;var a=false;var u=new Int32Array(r.MAX_NUMERIC_CODEWORDS);while(t<n[0]&&!a){var f=n[t++];if(t===n[0]){a=true}if(f<r.TEXT_COMPACTION_MODE_LATCH){u[e]=f;e++}else{switch(f){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--;a=true;break}}if((e%r.MAX_NUMERIC_CODEWORDS===0||f===r.NUMERIC_COMPACTION_MODE_LATCH||a)&&e>0){i.append(r.decodeBase900toBase10(u,e));e=0}}return t};r.decodeBase900toBase10=function(n,t){var i=ct(0);for(var e=0;e<t;e++){i+=r.EXP900[t-e-1]*ct(n[e])}var a=i.toString();if(a.charAt(0)!=="1"){throw new M}return a.substring(1)};return r}();lt.TEXT_COMPACTION_MODE_LATCH=900;lt.BYTE_COMPACTION_MODE_LATCH=901;lt.NUMERIC_COMPACTION_MODE_LATCH=902;lt.BYTE_COMPACTION_MODE_LATCH_6=924;lt.ECI_USER_DEFINED=925;lt.ECI_GENERAL_PURPOSE=926;lt.ECI_CHARSET=927;lt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928;lt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923;lt.MACRO_PDF417_TERMINATOR=922;lt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913;lt.MAX_NUMERIC_CODEWORDS=15;lt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0;lt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1;lt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2;lt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3;lt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4;lt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5;lt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6;lt.PL=25;lt.LL=27;lt.AS=27;lt.ML=28;lt.AL=28;lt.PS=29;lt.PAL=29;lt.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'";lt.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^";lt.EXP900=ht()?wt():[];lt.NUMBER_OF_SEQUENCE_CODEWORDS=2;var dt=function(){function r(){}r.decode=function(n,t,i,e,a,u,f){var s=new zn(n,t,i,e,a);var o=null;var h=null;var v;for(var c=true;;c=false){if(t!=null){o=r.getRowIndicatorColumn(n,s,t,true,u,f)}if(e!=null){h=r.getRowIndicatorColumn(n,s,e,false,u,f)}v=r.merge(o,h);if(v==null){throw N.getNotFoundInstance()}var w=v.getBoundingBox();if(c&&w!=null&&(w.getMinY()<s.getMinY()||w.getMaxY()>s.getMaxY())){s=w}else{break}}v.setBoundingBox(s);var l=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,o);v.setDetectionResultColumn(l,h);var d=o!=null;for(var y=1;y<=l;y++){var A=d?y:l-y;if(v.getDetectionResultColumn(A)!==undefined){continue}var I=void 0;if(A===0||A===l){I=new $n(s,A===0)}else{I=new Jn(s)}v.setDetectionResultColumn(A,I);var b=-1;var p=b;for(var M=s.getMinY();M<=s.getMaxY();M++){b=r.getStartColumn(v,A,M,d);if(b<0||b>s.getMaxX()){if(p===-1){continue}b=p}var _=r.detectCodeword(n,s.getMinX(),s.getMaxX(),d,b,M,u,f);if(_!=null){I.setCodeword(M,_);p=b;u=Math.min(u,_.getWidth());f=Math.max(f,_.getWidth())}}}return r.createDecoderResult(v)};r.merge=function(n,t){if(n==null&&t==null){return null}var i=r.getBarcodeMetadata(n,t);if(i==null){return null}var e=zn.merge(r.adjustBoundingBox(n),r.adjustBoundingBox(t));return new rt(i,e)};r.adjustBoundingBox=function(n){if(n==null){return null}var t=n.getRowHeights();if(t==null){return null}var i=r.getMax(t);var e=0;for(var a=0,u=t;a<u.length;a++){var f=u[a];e+=i-f;if(f>0){break}}var s=n.getCodewords();for(var o=0;e>0&&s[o]==null;o++){e--}var h=0;for(var o=t.length-1;o>=0;o--){h+=i-t[o];if(t[o]>0){break}}for(var o=s.length-1;h>0&&s[o]==null;o--){h--}return n.getBoundingBox().addMissingRows(e,h,n.isLeft())};r.getMax=function(r){var n=-1;for(var t=0,i=r;t<i.length;t++){var e=i[t];n=Math.max(n,e)}return n};r.getBarcodeMetadata=function(r,n){var t;if(r==null||(t=r.getBarcodeMetadata())==null){return n==null?null:n.getBarcodeMetadata()}var i;if(n==null||(i=n.getBarcodeMetadata())==null){return t}if(t.getColumnCount()!==i.getColumnCount()&&t.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&t.getRowCount()!==i.getRowCount()){return null}return t};r.getRowIndicatorColumn=function(n,t,i,e,a,u){var f=new $n(t,e);for(var s=0;s<2;s++){var o=s===0?1:-1;var h=Math.trunc(Math.trunc(i.getX()));for(var v=Math.trunc(Math.trunc(i.getY()));v<=t.getMaxY()&&v>=t.getMinY();v+=o){var c=r.detectCodeword(n,0,n.getWidth(),e,h,v,a,u);if(c!=null){f.setCodeword(v,c);if(e){h=c.getStartX()}else{h=c.getEndX()}}}}return f};r.adjustCodewordCount=function(n,t){var i=t[0][1];var e=i.getValue();var a=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-r.getNumberOfECCodeWords(n.getBarcodeECLevel());if(e.length===0){if(a<1||a>jn.MAX_CODEWORDS_IN_BARCODE){throw N.getNotFoundInstance()}i.setValue(a)}else if(e[0]!==a){i.setValue(a)}};r.createDecoderResult=function(n){var t=r.createBarcodeMatrix(n);r.adjustCodewordCount(n,t);var i=new Array;var e=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount());var a=[];var u=new Array;for(var f=0;f<n.getBarcodeRowCount();f++){for(var s=0;s<n.getBarcodeColumnCount();s++){var o=t[f][s+1].getValue();var h=f*n.getBarcodeColumnCount()+s;if(o.length===0){i.push(h)}else if(o.length===1){e[h]=o[0]}else{u.push(h);a.push(o)}}}var v=new Array(a.length);for(var c=0;c<v.length;c++){v[c]=a[c]}return r.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),e,jn.toIntArray(i),jn.toIntArray(u),v)};r.createDecoderResultFromAmbiguousValues=function(n,t,i,e,a){var u=new Int32Array(e.length);var f=100;while(f-- >0){for(var s=0;s<u.length;s++){t[e[s]]=a[s][u[s]]}try{return r.decodeCodewords(t,n,i)}catch(r){var o=r instanceof v;if(!o){throw r}}if(u.length===0){throw v.getChecksumInstance()}for(var s=0;s<u.length;s++){if(u[s]<a[s].length-1){u[s]++;break}else{u[s]=0;if(s===u.length-1){throw v.getChecksumInstance()}}}}throw v.getChecksumInstance()};r.createBarcodeMatrix=function(r){var n=Array.from({length:r.getBarcodeRowCount()},(function(){return new Array(r.getBarcodeColumnCount()+2)}));for(var t=0;t<n.length;t++){for(var i=0;i<n[t].length;i++){n[t][i]=new Vn}}var e=0;for(var a=0,u=r.getDetectionResultColumns();a<u.length;a++){var f=u[a];if(f!=null){for(var s=0,o=f.getCodewords();s<o.length;s++){var h=o[s];if(h!=null){var v=h.getRowNumber();if(v>=0){if(v>=n.length){continue}n[v][e].setValue(h.getValue())}}}}e++}return n};r.isValidBarcodeColumn=function(r,n){return n>=0&&n<=r.getBarcodeColumnCount()+1};r.getStartColumn=function(n,t,i,e){var a=e?1:-1;var u=null;if(r.isValidBarcodeColumn(n,t-a)){u=n.getDetectionResultColumn(t-a).getCodeword(i)}if(u!=null){return e?u.getEndX():u.getStartX()}u=n.getDetectionResultColumn(t).getCodewordNearby(i);if(u!=null){return e?u.getStartX():u.getEndX()}if(r.isValidBarcodeColumn(n,t-a)){u=n.getDetectionResultColumn(t-a).getCodewordNearby(i)}if(u!=null){return e?u.getEndX():u.getStartX()}var f=0;while(r.isValidBarcodeColumn(n,t-a)){t-=a;for(var s=0,o=n.getDetectionResultColumn(t).getCodewords();s<o.length;s++){var h=o[s];if(h!=null){return(e?h.getEndX():h.getStartX())+a*f*(h.getEndX()-h.getStartX())}}f++}return e?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()};r.detectCodeword=function(n,t,i,e,a,u,f,s){a=r.adjustCodewordStartColumn(n,t,i,e,a,u);var o=r.getModuleBitCount(n,t,i,e,a,u);if(o==null){return null}var h;var v=rr.sum(o);if(e){h=a+v}else{for(var c=0;c<o.length/2;c++){var w=o[c];o[c]=o[o.length-1-c];o[o.length-1-c]=w}h=a;a=h-v}if(!r.checkCodewordSkew(v,f,s)){return null}var l=tt.getDecodedValue(o);var d=jn.getCodeword(l);if(d===-1){return null}return new nt(a,h,r.getCodewordBucketNumber(l),d)};r.getModuleBitCount=function(r,n,t,i,e,a){var u=e;var f=new Int32Array(8);var s=0;var o=i?1:-1;var h=i;while((i?u<t:u>=n)&&s<f.length){if(r.get(u,a)===h){f[s]++;u+=o}else{s++;h=!h}}if(s===f.length||u===(i?t:n)&&s===f.length-1){return f}return null};r.getNumberOfECCodeWords=function(r){return 2<<r};r.adjustCodewordStartColumn=function(n,t,i,e,a,u){var f=a;var s=e?-1:1;for(var o=0;o<2;o++){while((e?f>=t:f<i)&&e===n.get(f,u)){if(Math.abs(a-f)>r.CODEWORD_SKEW_SIZE){return a}f+=s}s=-s;e=!e}return f};r.checkCodewordSkew=function(n,t,i){return t-r.CODEWORD_SKEW_SIZE<=n&&n<=i+r.CODEWORD_SKEW_SIZE};r.decodeCodewords=function(n,t,i){if(n.length===0){throw M.getFormatInstance()}var e=1<<t+1;var a=r.correctErrors(n,i,e);r.verifyCodewordCount(n,e);var u=lt.decode(n,""+t);u.setErrorsCorrected(a);u.setErasures(i.length);return u};r.correctErrors=function(n,t,i){if(t!=null&&t.length>i/2+r.MAX_ERRORS||i<0||i>r.MAX_EC_CODEWORDS){throw v.getChecksumInstance()}return r.errorCorrection.decode(n,i,t)};r.verifyCodewordCount=function(r,n){if(r.length<4){throw M.getFormatInstance()}var t=r[0];if(t>r.length){throw M.getFormatInstance()}if(t===0){if(n<r.length){r[0]=r.length-n}else{throw M.getFormatInstance()}}};r.getBitCountForCodeword=function(r){var n=new Int32Array(8);var t=0;var i=n.length-1;while(true){if((r&1)!==t){t=r&1;i--;if(i<0){break}}n[i]++;r>>=1}return n};r.getCodewordBucketNumber=function(r){if(r instanceof Int32Array){return this.getCodewordBucketNumber_Int32Array(r)}return this.getCodewordBucketNumber_number(r)};r.getCodewordBucketNumber_number=function(n){return r.getCodewordBucketNumber(r.getBitCountForCodeword(n))};r.getCodewordBucketNumber_Int32Array=function(r){return(r[0]-r[2]+r[4]-r[6]+9)%9};r.toString=function(r){var n=new Yn;for(var t=0;t<r.length;t++){n.format("Row %2d: ",t);for(var i=0;i<r[t].length;i++){var e=r[t][i];if(e.getValue().length===0){n.format("        ",null)}else{n.format("%4d(%2d)",e.getValue()[0],e.getConfidence(e.getValue()[0]))}}n.format("%n")}return n.toString()};return r}();dt.CODEWORD_SKEW_SIZE=2;dt.MAX_ERRORS=3;dt.MAX_EC_CODEWORDS=512;dt.errorCorrection=new Qn;var yt=function(){function r(){}r.prototype.decode=function(n,t){if(t===void 0){t=null}var i=r.decode(n,t,false);if(i==null||i.length===0||i[0]==null){throw N.getNotFoundInstance()}return i[0]};r.prototype.decodeMultiple=function(n,t){if(t===void 0){t=null}try{return r.decode(n,t,true)}catch(r){if(r instanceof M||r instanceof v){throw N.getNotFoundInstance()}throw r}};r.decode=function(n,t,i){var e=new Array;var a=Hn.detectMultiple(n,t,i);for(var u=0,f=a.getPoints();u<f.length;u++){var s=f[u];var o=dt.decode(a.getBits(),s[4],s[5],s[6],s[7],r.getMinCodewordWidth(s),r.getMaxCodewordWidth(s));var h=new G(o.getText(),o.getRawBytes(),undefined,s,j.PDF_417);h.putMetadata(H.ERROR_CORRECTION_LEVEL,o.getECLevel());var v=o.getOther();if(v!=null){h.putMetadata(H.PDF417_EXTRA_METADATA,v)}e.push(h)}return e.map((function(r){return r}))};r.getMaxWidth=function(r,n){if(r==null||n==null){return 0}return Math.trunc(Math.abs(r.getX()-n.getX()))};r.getMinWidth=function(r,n){if(r==null||n==null){return A.MAX_VALUE}return Math.trunc(Math.abs(r.getX()-n.getX()))};r.getMaxCodewordWidth=function(n){return Math.floor(Math.max(Math.max(r.getMaxWidth(n[0],n[4]),r.getMaxWidth(n[6],n[2])*jn.MODULES_IN_CODEWORD/jn.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(n[1],n[5]),r.getMaxWidth(n[7],n[3])*jn.MODULES_IN_CODEWORD/jn.MODULES_IN_STOP_PATTERN)))};r.getMinCodewordWidth=function(n){return Math.floor(Math.min(Math.min(r.getMinWidth(n[0],n[4]),r.getMinWidth(n[6],n[2])*jn.MODULES_IN_CODEWORD/jn.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(n[1],n[5]),r.getMinWidth(n[7],n[3])*jn.MODULES_IN_CODEWORD/jn.MODULES_IN_STOP_PATTERN)))};r.prototype.reset=function(){};return r}();var At=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(f);At.kind="ReaderException";var It=function(){function r(r,n){this.verbose=r===true;if(n){this.setHints(n)}}r.prototype.decode=function(r,n){if(n){this.setHints(n)}return this.decodeInternal(r)};r.prototype.decodeWithState=function(r){if(this.readers===null||this.readers===undefined){this.setHints(null)}return this.decodeInternal(r)};r.prototype.setHints=function(r){this.hints=r;var t=!n(r)&&r.get(p.TRY_HARDER)===true;var i=n(r)?null:r.get(p.POSSIBLE_FORMATS);var e=new Array;if(!n(i)){var a=i.some((function(r){return r===j.UPC_A||r===j.UPC_E||r===j.EAN_13||r===j.EAN_8||r===j.CODABAR||r===j.CODE_39||r===j.CODE_93||r===j.CODE_128||r===j.ITF||r===j.RSS_14||r===j.RSS_EXPANDED}));if(a&&!t){e.push(new an(r,this.verbose))}if(i.includes(j.QR_CODE)){e.push(new Bn)}if(i.includes(j.DATA_MATRIX)){e.push(new An)}if(i.includes(j.AZTEC)){e.push(new wr)}if(i.includes(j.PDF_417)){e.push(new yt)}if(a&&t){e.push(new an(r,this.verbose))}}if(e.length===0){if(!t){e.push(new an(r,this.verbose))}e.push(new Bn);e.push(new An);e.push(new wr);e.push(new yt);if(t){e.push(new an(r,this.verbose))}}this.readers=e};r.prototype.reset=function(){if(this.readers!==null){for(var r=0,n=this.readers;r<n.length;r++){var t=n[r];t.reset()}}};r.prototype.decodeInternal=function(r){if(this.readers===null){throw new At("No readers where selected, nothing can be read.")}for(var n=0,t=this.readers;n<t.length;n++){var i=t[n];try{return i.decode(r,this.hints)}catch(r){if(r instanceof At){continue}}}throw new N("No MultiFormat Readers were able to detect the code.")};return r}();var bt=function(r){i(n,r);function n(n,t){if(n===void 0){n=null}if(t===void 0){t=500}var i=new It;i.setHints(n);return r.call(this,i,t)||this}n.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)};return n}(L);var pt=function(r){i(n,r);function n(n){if(n===void 0){n=500}return r.call(this,new yt,n)||this}return n}(L);var Mt=function(r){i(n,r);function n(n){if(n===void 0){n=500}return r.call(this,new Bn,n)||this}return n}(L);var _t;(function(r){r[r["ERROR_CORRECTION"]=0]="ERROR_CORRECTION";r[r["CHARACTER_SET"]=1]="CHARACTER_SET";r[r["DATA_MATRIX_SHAPE"]=2]="DATA_MATRIX_SHAPE";r[r["MIN_SIZE"]=3]="MIN_SIZE";r[r["MAX_SIZE"]=4]="MAX_SIZE";r[r["MARGIN"]=5]="MARGIN";r[r["PDF417_COMPACT"]=6]="PDF417_COMPACT";r[r["PDF417_COMPACTION"]=7]="PDF417_COMPACTION";r[r["PDF417_DIMENSIONS"]=8]="PDF417_DIMENSIONS";r[r["AZTEC_LAYERS"]=9]="AZTEC_LAYERS";r[r["QR_VERSION"]=10]="QR_VERSION"})(_t||(_t={}));var mt=_t;var kt=function(){function r(r){this.field=r;this.cachedGenerators=[];this.cachedGenerators.push(new K(r,Int32Array.from([1])))}r.prototype.buildGenerator=function(r){var n=this.cachedGenerators;if(r>=n.length){var t=n[n.length-1];var i=this.field;for(var e=n.length;e<=r;e++){var a=t.multiply(new K(i,Int32Array.from([1,i.exp(e-1+i.getGeneratorBase())])));n.push(a);t=a}}return n[r]};r.prototype.encode=function(r,n){if(n===0){throw new o("No error correction bytes")}var t=r.length-n;if(t<=0){throw new o("No data bytes provided")}var i=this.buildGenerator(n);var e=new Int32Array(t);w.arraycopy(r,0,e,0,t);var a=new K(this.field,e);a=a.multiplyByMonomial(n,1);var u=a.divide(i)[1];var f=u.getCoefficients();var s=n-f.length;for(var h=0;h<s;h++){r[t+h]=0}w.arraycopy(f,0,r,t+s,f.length)};return r}();var gt=function(){function r(){}r.applyMaskPenaltyRule1=function(n){return r.applyMaskPenaltyRule1Internal(n,true)+r.applyMaskPenaltyRule1Internal(n,false)};r.applyMaskPenaltyRule2=function(n){var t=0;var i=n.getArray();var e=n.getWidth();var a=n.getHeight();for(var u=0;u<a-1;u++){var f=i[u];for(var s=0;s<e-1;s++){var o=f[s];if(o===f[s+1]&&o===i[u+1][s]&&o===i[u+1][s+1]){t++}}}return r.N2*t};r.applyMaskPenaltyRule3=function(n){var t=0;var i=n.getArray();var e=n.getWidth();var a=n.getHeight();for(var u=0;u<a;u++){for(var f=0;f<e;f++){var s=i[u];if(f+6<e&&s[f]===1&&s[f+1]===0&&s[f+2]===1&&s[f+3]===1&&s[f+4]===1&&s[f+5]===0&&s[f+6]===1&&(r.isWhiteHorizontal(s,f-4,f)||r.isWhiteHorizontal(s,f+7,f+11))){t++}if(u+6<a&&i[u][f]===1&&i[u+1][f]===0&&i[u+2][f]===1&&i[u+3][f]===1&&i[u+4][f]===1&&i[u+5][f]===0&&i[u+6][f]===1&&(r.isWhiteVertical(i,f,u-4,u)||r.isWhiteVertical(i,f,u+7,u+11))){t++}}}return t*r.N3};r.isWhiteHorizontal=function(r,n,t){n=Math.max(n,0);t=Math.min(t,r.length);for(var i=n;i<t;i++){if(r[i]===1){return false}}return true};r.isWhiteVertical=function(r,n,t,i){t=Math.max(t,0);i=Math.min(i,r.length);for(var e=t;e<i;e++){if(r[e][n]===1){return false}}return true};r.applyMaskPenaltyRule4=function(n){var t=0;var i=n.getArray();var e=n.getWidth();var a=n.getHeight();for(var u=0;u<a;u++){var f=i[u];for(var s=0;s<e;s++){if(f[s]===1){t++}}}var o=n.getHeight()*n.getWidth();var h=Math.floor(Math.abs(t*2-o)*10/o);return h*r.N4};r.getDataMaskBit=function(r,n,t){var i;var e;switch(r){case 0:i=t+n&1;break;case 1:i=t&1;break;case 2:i=n%3;break;case 3:i=(t+n)%3;break;case 4:i=Math.floor(t/2)+Math.floor(n/3)&1;break;case 5:e=t*n;i=(e&1)+e%3;break;case 6:e=t*n;i=(e&1)+e%3&1;break;case 7:e=t*n;i=e%3+(t+n&1)&1;break;default:throw new o("Invalid mask pattern: "+r)}return i===0};r.applyMaskPenaltyRule1Internal=function(n,t){var i=0;var e=t?n.getHeight():n.getWidth();var a=t?n.getWidth():n.getHeight();var u=n.getArray();for(var f=0;f<e;f++){var s=0;var o=-1;for(var h=0;h<a;h++){var v=t?u[f][h]:u[h][f];if(v===o){s++}else{if(s>=5){i+=r.N1+(s-5)}s=1;o=v}}if(s>=5){i+=r.N1+(s-5)}}return i};return r}();gt.N1=3;gt.N2=3;gt.N3=40;gt.N4=10;var St=function(){function r(r,n){this.width=r;this.height=n;var t=new Array(n);for(var i=0;i!==n;i++){t[i]=new Uint8Array(r)}this.bytes=t}r.prototype.getHeight=function(){return this.height};r.prototype.getWidth=function(){return this.width};r.prototype.get=function(r,n){return this.bytes[n][r]};r.prototype.getArray=function(){return this.bytes};r.prototype.setNumber=function(r,n,t){this.bytes[n][r]=t};r.prototype.setBoolean=function(r,n,t){this.bytes[n][r]=t?1:0};r.prototype.clear=function(r){for(var n=0,t=this.bytes;n<t.length;n++){var i=t[n];y.fill(i,r)}};r.prototype.equals=function(n){if(!(n instanceof r)){return false}var t=n;if(this.width!==t.width){return false}if(this.height!==t.height){return false}for(var i=0,e=this.height;i<e;++i){var a=this.bytes[i];var u=t.bytes[i];for(var f=0,s=this.width;f<s;++f){if(a[f]!==u[f]){return false}}}return true};r.prototype.toString=function(){var r=new E;for(var n=0,t=this.height;n<t;++n){var i=this.bytes[n];for(var e=0,a=this.width;e<a;++e){switch(i[e]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}}r.append("\n")}return r.toString()};return r}();var Et=function(){function r(){this.maskPattern=-1}r.prototype.getMode=function(){return this.mode};r.prototype.getECLevel=function(){return this.ecLevel};r.prototype.getVersion=function(){return this.version};r.prototype.getMaskPattern=function(){return this.maskPattern};r.prototype.getMatrix=function(){return this.matrix};r.prototype.toString=function(){var r=new E;r.append("<<\n");r.append(" mode: ");r.append(this.mode?this.mode.toString():"null");r.append("\n ecLevel: ");r.append(this.ecLevel?this.ecLevel.toString():"null");r.append("\n version: ");r.append(this.version?this.version.toString():"null");r.append("\n maskPattern: ");r.append(this.maskPattern.toString());if(this.matrix){r.append("\n matrix:\n");r.append(this.matrix.toString())}else{r.append("\n matrix: null\n")}r.append(">>\n");return r.toString()};r.prototype.setMode=function(r){this.mode=r};r.prototype.setECLevel=function(r){this.ecLevel=r};r.prototype.setVersion=function(r){this.version=r};r.prototype.setMaskPattern=function(r){this.maskPattern=r};r.prototype.setMatrix=function(r){this.matrix=r};r.isValidMaskPattern=function(n){return n>=0&&n<r.NUM_MASK_PATTERNS};return r}();Et.NUM_MASK_PATTERNS=8;var Ct=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n}(f);Ct.kind="WriterException";var Nt=function(){function r(){}r.clearMatrix=function(r){r.clear(255)};r.buildMatrix=function(n,t,i,e,a){r.clearMatrix(a);r.embedBasicPatterns(i,a);r.embedTypeInfo(t,e,a);r.maybeEmbedVersionInfo(i,a);r.embedDataBits(n,e,a)};r.embedBasicPatterns=function(n,t){r.embedPositionDetectionPatternsAndSeparators(t);r.embedDarkDotAtLeftBottomCorner(t);r.maybeEmbedPositionAdjustmentPatterns(n,t);r.embedTimingPatterns(t)};r.embedTypeInfo=function(n,t,i){var e=new I;r.makeTypeInfoBits(n,t,e);for(var a=0,u=e.getSize();a<u;++a){var f=e.get(e.getSize()-1-a);var s=r.TYPE_INFO_COORDINATES[a];var o=s[0];var h=s[1];i.setBoolean(o,h,f);if(a<8){var v=i.getWidth()-a-1;var c=8;i.setBoolean(v,c,f)}else{var v=8;var c=i.getHeight()-7+(a-8);i.setBoolean(v,c,f)}}};r.maybeEmbedVersionInfo=function(n,t){if(n.getVersionNumber()<7){return}var i=new I;r.makeVersionInfoBits(n,i);var e=6*3-1;for(var a=0;a<6;++a){for(var u=0;u<3;++u){var f=i.get(e);e--;t.setBoolean(a,t.getHeight()-11+u,f);t.setBoolean(t.getHeight()-11+u,a,f)}}};r.embedDataBits=function(n,t,i){var e=0;var a=-1;var u=i.getWidth()-1;var f=i.getHeight()-1;while(u>0){if(u===6){u-=1}while(f>=0&&f<i.getHeight()){for(var s=0;s<2;++s){var o=u-s;if(!r.isEmpty(i.get(o,f))){continue}var h=void 0;if(e<n.getSize()){h=n.get(e);++e}else{h=false}if(t!==255&&gt.getDataMaskBit(t,o,f)){h=!h}i.setBoolean(o,f,h)}f+=a}a=-a;f+=a;u-=2}if(e!==n.getSize()){throw new Ct("Not all bits consumed: "+e+"/"+n.getSize())}};r.findMSBSet=function(r){return 32-A.numberOfLeadingZeros(r)};r.calculateBCHCode=function(n,t){if(t===0){throw new o("0 polynomial")}var i=r.findMSBSet(t);n<<=i-1;while(r.findMSBSet(n)>=i){n^=t<<r.findMSBSet(n)-i}return n};r.makeTypeInfoBits=function(n,t,i){if(!Et.isValidMaskPattern(t)){throw new Ct("Invalid mask pattern")}var e=n.getBits()<<3|t;i.appendBits(e,5);var a=r.calculateBCHCode(e,r.TYPE_INFO_POLY);i.appendBits(a,10);var u=new I;u.appendBits(r.TYPE_INFO_MASK_PATTERN,15);i.xor(u);if(i.getSize()!==15){throw new Ct("should not happen but we got: "+i.getSize())}};r.makeVersionInfoBits=function(n,t){t.appendBits(n.getVersionNumber(),6);var i=r.calculateBCHCode(n.getVersionNumber(),r.VERSION_INFO_POLY);t.appendBits(i,12);if(t.getSize()!==18){throw new Ct("should not happen but we got: "+t.getSize())}};r.isEmpty=function(r){return r===255};r.embedTimingPatterns=function(n){for(var t=8;t<n.getWidth()-8;++t){var i=(t+1)%2;if(r.isEmpty(n.get(t,6))){n.setNumber(t,6,i)}if(r.isEmpty(n.get(6,t))){n.setNumber(6,t,i)}}};r.embedDarkDotAtLeftBottomCorner=function(r){if(r.get(8,r.getHeight()-8)===0){throw new Ct}r.setNumber(8,r.getHeight()-8,1)};r.embedHorizontalSeparationPattern=function(n,t,i){for(var e=0;e<8;++e){if(!r.isEmpty(i.get(n+e,t))){throw new Ct}i.setNumber(n+e,t,0)}};r.embedVerticalSeparationPattern=function(n,t,i){for(var e=0;e<7;++e){if(!r.isEmpty(i.get(n,t+e))){throw new Ct}i.setNumber(n,t+e,0)}};r.embedPositionAdjustmentPattern=function(n,t,i){for(var e=0;e<5;++e){var a=r.POSITION_ADJUSTMENT_PATTERN[e];for(var u=0;u<5;++u){i.setNumber(n+u,t+e,a[u])}}};r.embedPositionDetectionPattern=function(n,t,i){for(var e=0;e<7;++e){var a=r.POSITION_DETECTION_PATTERN[e];for(var u=0;u<7;++u){i.setNumber(n+u,t+e,a[u])}}};r.embedPositionDetectionPatternsAndSeparators=function(n){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,n);r.embedPositionDetectionPattern(n.getWidth()-t,0,n);r.embedPositionDetectionPattern(0,n.getWidth()-t,n);var i=8;r.embedHorizontalSeparationPattern(0,i-1,n);r.embedHorizontalSeparationPattern(n.getWidth()-i,i-1,n);r.embedHorizontalSeparationPattern(0,n.getWidth()-i,n);var e=7;r.embedVerticalSeparationPattern(e,0,n);r.embedVerticalSeparationPattern(n.getHeight()-e-1,0,n);r.embedVerticalSeparationPattern(e,n.getHeight()-e,n)};r.maybeEmbedPositionAdjustmentPatterns=function(n,t){if(n.getVersionNumber()<2){return}var i=n.getVersionNumber()-1;var e=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(var a=0,u=e.length;a!==u;a++){var f=e[a];if(f>=0){for(var s=0;s!==u;s++){var o=e[s];if(o>=0&&r.isEmpty(t.get(o,f))){r.embedPositionAdjustmentPattern(o-2,f-2,t)}}}}};return r}();Nt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]);Nt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]);Nt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]);Nt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]);Nt.VERSION_INFO_POLY=7973;Nt.TYPE_INFO_POLY=1335;Nt.TYPE_INFO_MASK_PATTERN=21522;var Ot=function(){function r(r,n){this.dataBytes=r;this.errorCorrectionBytes=n}r.prototype.getDataBytes=function(){return this.dataBytes};r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes};return r}();var Tt=function(){function r(){}r.calculateMaskPenalty=function(r){return gt.applyMaskPenaltyRule1(r)+gt.applyMaskPenaltyRule2(r)+gt.applyMaskPenaltyRule3(r)+gt.applyMaskPenaltyRule4(r)};r.encode=function(n,t,i){if(i===void 0){i=null}var e=r.DEFAULT_BYTE_MODE_ENCODING;var a=i!==null&&undefined!==i.get(mt.CHARACTER_SET);if(a){e=i.get(mt.CHARACTER_SET).toString()}var u=this.chooseMode(n,e);var f=new I;if(u===On.BYTE&&(a||r.DEFAULT_BYTE_MODE_ENCODING!==e)){var s=m.getCharacterSetECIByName(e);if(s!==undefined){this.appendECI(s,f)}}this.appendModeInfo(u,f);var o=new I;this.appendBytes(n,u,o,e);var h;if(i!==null&&undefined!==i.get(mt.QR_VERSION)){var v=Number.parseInt(i.get(mt.QR_VERSION).toString(),10);h=kn.getVersionForNumber(v);var c=this.calculateBitsNeeded(u,f,o,h);if(!this.willFit(c,h,t)){throw new Ct("Data too big for requested version")}}else{h=this.recommendVersion(t,u,f,o)}var w=new I;w.appendBitArray(f);var l=u===On.BYTE?o.getSizeInBytes():n.length;this.appendLengthInfo(l,h,u,w);w.appendBitArray(o);var d=h.getECBlocksForLevel(t);var y=h.getTotalCodewords()-d.getTotalECCodewords();this.terminateBits(y,w);var A=this.interleaveWithECBytes(w,h.getTotalCodewords(),y,d.getNumBlocks());var b=new Et;b.setECLevel(t);b.setMode(u);b.setVersion(h);var p=h.getDimensionForVersion();var M=new St(p,p);var _=this.chooseMaskPattern(A,t,h,M);b.setMaskPattern(_);Nt.buildMatrix(A,t,h,_,M);b.setMatrix(M);return b};r.recommendVersion=function(r,n,t,i){var e=this.calculateBitsNeeded(n,t,i,kn.getVersionForNumber(1));var a=this.chooseVersion(e,r);var u=this.calculateBitsNeeded(n,t,i,a);return this.chooseVersion(u,r)};r.calculateBitsNeeded=function(r,n,t,i){return n.getSize()+r.getCharacterCountBits(i)+t.getSize()};r.getAlphanumericCode=function(n){if(n<r.ALPHANUMERIC_TABLE.length){return r.ALPHANUMERIC_TABLE[n]}return-1};r.chooseMode=function(n,t){if(t===void 0){t=null}if(m.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(n)){return On.KANJI}var i=false;var e=false;for(var a=0,u=n.length;a<u;++a){var f=n.charAt(a);if(r.isDigit(f)){i=true}else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1){e=true}else{return On.BYTE}}if(e){return On.ALPHANUMERIC}if(i){return On.NUMERIC}return On.BYTE};r.isOnlyDoubleByteKanji=function(r){var n;try{n=g.encode(r,m.SJIS)}catch(r){return false}var t=n.length;if(t%2!==0){return false}for(var i=0;i<t;i+=2){var e=n[i]&255;if((e<129||e>159)&&(e<224||e>235)){return false}}return true};r.chooseMaskPattern=function(r,n,t,i){var e=Number.MAX_SAFE_INTEGER;var a=-1;for(var u=0;u<Et.NUM_MASK_PATTERNS;u++){Nt.buildMatrix(r,n,t,u,i);var f=this.calculateMaskPenalty(i);if(f<e){e=f;a=u}}return a};r.chooseVersion=function(n,t){for(var i=1;i<=40;i++){var e=kn.getVersionForNumber(i);if(r.willFit(n,e,t)){return e}}throw new Ct("Data too big")};r.willFit=function(r,n,t){var i=n.getTotalCodewords();var e=n.getECBlocksForLevel(t);var a=e.getTotalECCodewords();var u=i-a;var f=(r+7)/8;return u>=f};r.terminateBits=function(r,n){var t=r*8;if(n.getSize()>t){throw new Ct("data bits cannot fit in the QR Code"+n.getSize()+" > "+t)}for(var i=0;i<4&&n.getSize()<t;++i){n.appendBit(false)}var e=n.getSize()&7;if(e>0){for(var i=e;i<8;i++){n.appendBit(false)}}var a=r-n.getSizeInBytes();for(var i=0;i<a;++i){n.appendBits((i&1)===0?236:17,8)}if(n.getSize()!==t){throw new Ct("Bits size does not equal capacity")}};r.getNumDataBytesAndNumECBytesForBlockID=function(r,n,t,i,e,a){if(i>=t){throw new Ct("Block ID too large")}var u=r%t;var f=t-u;var s=Math.floor(r/t);var o=s+1;var h=Math.floor(n/t);var v=h+1;var c=s-h;var w=o-v;if(c!==w){throw new Ct("EC bytes mismatch")}if(t!==f+u){throw new Ct("RS blocks mismatch")}if(r!==(h+c)*f+(v+w)*u){throw new Ct("Total bytes mismatch")}if(i<f){e[0]=h;a[0]=c}else{e[0]=v;a[0]=w}};r.interleaveWithECBytes=function(n,t,i,e){if(n.getSizeInBytes()!==i){throw new Ct("Number of bits and data bytes does not match")}var a=0;var u=0;var f=0;var s=new Array;for(var o=0;o<e;++o){var h=new Int32Array(1);var v=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,i,e,o,h,v);var c=h[0];var w=new Uint8Array(c);n.toBytes(8*a,w,0,c);var l=r.generateECBytes(w,v[0]);s.push(new Ot(w,l));u=Math.max(u,c);f=Math.max(f,l.length);a+=h[0]}if(i!==a){throw new Ct("Data bytes does not match offset")}var d=new I;for(var o=0;o<u;++o){for(var y=0,A=s;y<A.length;y++){var b=A[y];var w=b.getDataBytes();if(o<w.length){d.appendBits(w[o],8)}}}for(var o=0;o<f;++o){for(var p=0,M=s;p<M.length;p++){var b=M[p];var l=b.getErrorCorrectionBytes();if(o<l.length){d.appendBits(l[o],8)}}}if(t!==d.getSizeInBytes()){throw new Ct("Interleaving error: "+t+" and "+d.getSizeInBytes()+" differ.")}return d};r.generateECBytes=function(r,n){var t=r.length;var i=new Int32Array(t+n);for(var e=0;e<t;e++){i[e]=r[e]&255}new kt(z.QR_CODE_FIELD_256).encode(i,n);var a=new Uint8Array(n);for(var e=0;e<n;e++){a[e]=i[t+e]}return a};r.appendModeInfo=function(r,n){n.appendBits(r.getBits(),4)};r.appendLengthInfo=function(r,n,t,i){var e=t.getCharacterCountBits(n);if(r>=1<<e){throw new Ct(r+" is bigger than "+((1<<e)-1))}i.appendBits(r,e)};r.appendBytes=function(n,t,i,e){switch(t){case On.NUMERIC:r.appendNumericBytes(n,i);break;case On.ALPHANUMERIC:r.appendAlphanumericBytes(n,i);break;case On.BYTE:r.append8BitBytes(n,i,e);break;case On.KANJI:r.appendKanjiBytes(n,i);break;default:throw new Ct("Invalid mode: "+t)}};r.getDigit=function(r){return r.charCodeAt(0)-48};r.isDigit=function(n){var t=r.getDigit(n);return t>=0&&t<=9};r.appendNumericBytes=function(n,t){var i=n.length;var e=0;while(e<i){var a=r.getDigit(n.charAt(e));if(e+2<i){var u=r.getDigit(n.charAt(e+1));var f=r.getDigit(n.charAt(e+2));t.appendBits(a*100+u*10+f,10);e+=3}else if(e+1<i){var u=r.getDigit(n.charAt(e+1));t.appendBits(a*10+u,7);e+=2}else{t.appendBits(a,4);e++}}};r.appendAlphanumericBytes=function(n,t){var i=n.length;var e=0;while(e<i){var a=r.getAlphanumericCode(n.charCodeAt(e));if(a===-1){throw new Ct}if(e+1<i){var u=r.getAlphanumericCode(n.charCodeAt(e+1));if(u===-1){throw new Ct}t.appendBits(a*45+u,11);e+=2}else{t.appendBits(a,6);e++}}};r.append8BitBytes=function(r,n,t){var i;try{i=g.encode(r,t)}catch(r){throw new Ct(r)}for(var e=0,a=i.length;e!==a;e++){var u=i[e];n.appendBits(u,8)}};r.appendKanjiBytes=function(r,n){var t;try{t=g.encode(r,m.SJIS)}catch(r){throw new Ct(r)}var i=t.length;for(var e=0;e<i;e+=2){var a=t[e]&255;var u=t[e+1]&255;var f=a<<8&4294967295|u;var s=-1;if(f>=33088&&f<=40956){s=f-33088}else if(f>=57408&&f<=60351){s=f-49472}if(s===-1){throw new Ct("Invalid byte sequence")}var o=(s>>8)*192+(s&255);n.appendBits(o,13)}};r.appendECI=function(r,n){n.appendBits(On.ECI.getBits(),4);n.appendBits(r.getValue(),8)};return r}();Tt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]);Tt.DEFAULT_BYTE_MODE_ENCODING=m.UTF8.getName();var Rt=function(){function r(){}r.prototype.write=function(n,t,i,e){if(e===void 0){e=null}if(n.length===0){throw new o("Found empty contents")}if(t<0||i<0){throw new o("Requested dimensions are too small: "+t+"x"+i)}var a=pn.L;var u=r.QUIET_ZONE_SIZE;if(e!==null){if(undefined!==e.get(mt.ERROR_CORRECTION)){a=pn.fromString(e.get(mt.ERROR_CORRECTION).toString())}if(undefined!==e.get(mt.MARGIN)){u=Number.parseInt(e.get(mt.MARGIN).toString(),10)}}var f=Tt.encode(n,a,e);return this.renderResult(f,t,i,u)};r.prototype.writeToDom=function(r,n,t,i,e){if(e===void 0){e=null}if(typeof r==="string"){r=document.querySelector(r)}var a=this.write(n,t,i,e);if(r)r.appendChild(a)};r.prototype.renderResult=function(r,n,t,i){var e=r.getMatrix();if(e===null){throw new Y}var a=e.getWidth();var u=e.getHeight();var f=a+i*2;var s=u+i*2;var o=Math.max(n,f);var h=Math.max(t,s);var v=Math.min(Math.floor(o/f),Math.floor(h/s));var c=Math.floor((o-a*v)/2);var w=Math.floor((h-u*v)/2);var l=this.createSVGElement(o,h);for(var d=0,y=w;d<u;d++,y+=v){for(var A=0,I=c;A<a;A++,I+=v){if(e.get(A,d)===1){var b=this.createSvgRectElement(I,y,v,v);l.appendChild(b)}}}return l};r.prototype.createSVGElement=function(n,t){var i=document.createElementNS(r.SVG_NS,"svg");i.setAttributeNS(null,"height",n.toString());i.setAttributeNS(null,"width",t.toString());return i};r.prototype.createSvgRectElement=function(n,t,i,e){var a=document.createElementNS(r.SVG_NS,"rect");a.setAttributeNS(null,"x",n.toString());a.setAttributeNS(null,"y",t.toString());a.setAttributeNS(null,"height",i.toString());a.setAttributeNS(null,"width",e.toString());a.setAttributeNS(null,"fill","#000000");return a};return r}();Rt.QUIET_ZONE_SIZE=4;Rt.SVG_NS="http://www.w3.org/2000/svg";var Pt=function(){function r(){}r.prototype.encode=function(n,t,i,e,a){if(n.length===0){throw new o("Found empty contents")}if(t!==j.QR_CODE){throw new o("Can only encode QR_CODE, but got "+t)}if(i<0||e<0){throw new o("Requested dimensions are too small: ".concat(i,"x").concat(e))}var u=pn.L;var f=r.QUIET_ZONE_SIZE;if(a!==null){if(undefined!==a.get(mt.ERROR_CORRECTION)){u=pn.fromString(a.get(mt.ERROR_CORRECTION).toString())}if(undefined!==a.get(mt.MARGIN)){f=Number.parseInt(a.get(mt.MARGIN).toString(),10)}}var s=Tt.encode(n,u,a);return r.renderResult(s,i,e,f)};r.renderResult=function(r,n,t,i){var e=r.getMatrix();if(e===null){throw new Y}var a=e.getWidth();var u=e.getHeight();var f=a+i*2;var s=u+i*2;var o=Math.max(n,f);var h=Math.max(t,s);var v=Math.min(Math.floor(o/f),Math.floor(h/s));var c=Math.floor((o-a*v)/2);var w=Math.floor((h-u*v)/2);var l=new C(o,h);for(var d=0,y=w;d<u;d++,y+=v){for(var A=0,I=c;A<a;A++,I+=v){if(e.get(A,d)===1){l.setRegion(I,y,v,v)}}}return l};return r}();Pt.QUIET_ZONE_SIZE=4;var Dt=function(){function r(){}r.prototype.encode=function(r,n,t,i,e){var a;switch(n){case j.QR_CODE:a=new Pt;break;default:throw new o("No encoder available for format "+n)}return a.encode(r,n,t,i,e)};return r}();var Ut=function(r){i(n,r);function n(n,t,i,e,a,u,f,s){var h=r.call(this,u,f)||this;h.yuvData=n;h.dataWidth=t;h.dataHeight=i;h.left=e;h.top=a;if(e+u>t||a+f>i){throw new o("Crop rectangle does not fit within image data.")}if(s){h.reverseHorizontal(u,f)}return h}n.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight()){throw new o("Requested row is outside the image: "+r)}var t=this.getWidth();if(n===null||n===undefined||n.length<t){n=new Uint8ClampedArray(t)}var i=(r+this.top)*this.dataWidth+this.left;w.arraycopy(this.yuvData,i,n,0,t);return n};n.prototype.getMatrix=function(){var r=this.getWidth();var n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight){return this.yuvData}var t=r*n;var i=new Uint8ClampedArray(t);var e=this.top*this.dataWidth+this.left;if(r===this.dataWidth){w.arraycopy(this.yuvData,e,i,0,t);return i}for(var a=0;a<n;a++){var u=a*r;w.arraycopy(this.yuvData,e,i,u,r);e+=this.dataWidth}return i};n.prototype.isCropSupported=function(){return true};n.prototype.crop=function(r,t,i,e){return new n(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+t,i,e,false)};n.prototype.renderThumbnail=function(){var r=this.getWidth()/n.THUMBNAIL_SCALE_FACTOR;var t=this.getHeight()/n.THUMBNAIL_SCALE_FACTOR;var i=new Int32Array(r*t);var e=this.yuvData;var a=this.top*this.dataWidth+this.left;for(var u=0;u<t;u++){var f=u*r;for(var s=0;s<r;s++){var o=e[a+s*n.THUMBNAIL_SCALE_FACTOR]&255;i[f+s]=4278190080|o*65793}a+=this.dataWidth*n.THUMBNAIL_SCALE_FACTOR}return i};n.prototype.getThumbnailWidth=function(){return this.getWidth()/n.THUMBNAIL_SCALE_FACTOR};n.prototype.getThumbnailHeight=function(){return this.getHeight()/n.THUMBNAIL_SCALE_FACTOR};n.prototype.reverseHorizontal=function(r,n){var t=this.yuvData;for(var i=0,e=this.top*this.dataWidth+this.left;i<n;i++,e+=this.dataWidth){var a=e+r/2;for(var u=e,f=e+r-1;u<a;u++,f--){var s=t[u];t[u]=t[f];t[f]=s}}};n.prototype.invert=function(){return new P(this)};return n}(R);Ut.THUMBNAIL_SCALE_FACTOR=2;var xt=function(r){i(n,r);function n(n,t,i,e,a,u,f){var s=r.call(this,t,i)||this;s.dataWidth=e;s.dataHeight=a;s.left=u;s.top=f;if(n.BYTES_PER_ELEMENT===4){var h=t*i;var v=new Uint8ClampedArray(h);for(var c=0;c<h;c++){var w=n[c];var l=w>>16&255;var d=w>>7&510;var y=w&255;v[c]=(l+d+y)/4&255}s.luminances=v}else{s.luminances=n}if(undefined===e){s.dataWidth=t}if(undefined===a){s.dataHeight=i}if(undefined===u){s.left=0}if(undefined===f){s.top=0}if(s.left+t>s.dataWidth||s.top+i>s.dataHeight){throw new o("Crop rectangle does not fit within image data.")}return s}n.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight()){throw new o("Requested row is outside the image: "+r)}var t=this.getWidth();if(n===null||n===undefined||n.length<t){n=new Uint8ClampedArray(t)}var i=(r+this.top)*this.dataWidth+this.left;w.arraycopy(this.luminances,i,n,0,t);return n};n.prototype.getMatrix=function(){var r=this.getWidth();var n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight){return this.luminances}var t=r*n;var i=new Uint8ClampedArray(t);var e=this.top*this.dataWidth+this.left;if(r===this.dataWidth){w.arraycopy(this.luminances,e,i,0,t);return i}for(var a=0;a<n;a++){var u=a*r;w.arraycopy(this.luminances,e,i,u,r);e+=this.dataWidth}return i};n.prototype.isCropSupported=function(){return true};n.prototype.crop=function(r,t,i,e){return new n(this.luminances,i,e,this.dataWidth,this.dataHeight,this.left+r,this.top+t)};n.prototype.invert=function(){return new P(this)};return n}(R);var Ft=function(r){i(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}n.forName=function(r){return this.getCharacterSetECIByName(r)};return n}(m);var Lt=function(){function r(){}return r}();Lt.ISO_8859_1=m.ISO8859_1;var Gt=function(){function r(){}r.prototype.isCompact=function(){return this.compact};r.prototype.setCompact=function(r){this.compact=r};r.prototype.getSize=function(){return this.size};r.prototype.setSize=function(r){this.size=r};r.prototype.getLayers=function(){return this.layers};r.prototype.setLayers=function(r){this.layers=r};r.prototype.getCodeWords=function(){return this.codeWords};r.prototype.setCodeWords=function(r){this.codeWords=r};r.prototype.getMatrix=function(){return this.matrix};r.prototype.setMatrix=function(r){this.matrix=r};return r}();var Bt=function(){function r(){}r.singletonList=function(r){return[r]};r.min=function(r,n){return r.sort(n)[0]};return r}();var jt=function(){function r(r){this.previous=r}r.prototype.getPrevious=function(){return this.previous};return r}();var Wt=function(r){i(n,r);function n(n,t,i){var e=r.call(this,n)||this;e.value=t;e.bitCount=i;return e}n.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)};n.prototype.add=function(r,t){return new n(this,r,t)};n.prototype.addBinaryShift=function(r,t){console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token");return new n(this,r,t)};n.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;r|=1<<this.bitCount;return"<"+A.toBinaryString(r|1<<this.bitCount).substring(1)+">"};return n}(jt);var Ht=function(r){i(n,r);function n(n,t,i){var e=r.call(this,n,0,0)||this;e.binaryShiftStart=t;e.binaryShiftByteCount=i;return e}n.prototype.appendTo=function(r,n){for(var t=0;t<this.binaryShiftByteCount;t++){if(t===0||t===31&&this.binaryShiftByteCount<=62){r.appendBits(31,5);if(this.binaryShiftByteCount>62){r.appendBits(this.binaryShiftByteCount-31,16)}else if(t===0){r.appendBits(Math.min(this.binaryShiftByteCount,31),5)}else{r.appendBits(this.binaryShiftByteCount-31,5)}}r.appendBits(n[this.binaryShiftStart+t],8)}};n.prototype.addBinaryShift=function(r,t){return new n(this,r,t)};n.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"};return n}(Wt);function qt(r,n,t){return new Ht(r,n,t)}function Xt(r,n,t){return new Wt(r,n,t)}var Kt=["UPPER","LOWER","DIGIT","MIXED","PUNCT"];var Qt=0;var zt=1;var Zt=2;var Yt=3;var Jt=4;var Vt=new Wt(null,0,0);var $t=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,(10<<16)+(29<<5)+30]),Int32Array.from([(9<<16)+(30<<4)+14,0,(5<<16)+30,(5<<16)+29,(10<<16)+(29<<5)+30]),Int32Array.from([(4<<16)+14,(9<<16)+(14<<5)+28,0,(9<<16)+(14<<5)+29,(14<<16)+(14<<10)+(29<<5)+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,(10<<16)+(29<<5)+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,(10<<16)+(31<<5)+28,(10<<16)+(31<<5)+30,(10<<16)+(31<<5)+29,0])];function ri(r){for(var n=0,t=r;n<t.length;n++){var i=t[n];y.fill(i,-1)}r[Qt][Jt]=0;r[zt][Jt]=0;r[zt][Qt]=28;r[Yt][Jt]=0;r[Zt][Jt]=0;r[Zt][Qt]=15;return r}var ni=ri(y.createInt32Array(6,6));var ti=function(){function r(r,n,t,i){this.token=r;this.mode=n;this.binaryShiftByteCount=t;this.bitCount=i}r.prototype.getMode=function(){return this.mode};r.prototype.getToken=function(){return this.token};r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount};r.prototype.getBitCount=function(){return this.bitCount};r.prototype.latchAndAppend=function(n,t){var i=this.bitCount;var e=this.token;if(n!==this.mode){var a=$t[this.mode][n];e=Xt(e,a&65535,a>>16);i+=a>>16}var u=n===Zt?4:5;e=Xt(e,t,u);return new r(e,n,0,i+u)};r.prototype.shiftAndAppend=function(n,t){var i=this.token;var e=this.mode===Zt?4:5;i=Xt(i,ni[this.mode][n],e);i=Xt(i,t,5);return new r(i,this.mode,0,this.bitCount+e+5)};r.prototype.addBinaryShiftChar=function(n){var t=this.token;var i=this.mode;var e=this.bitCount;if(this.mode===Jt||this.mode===Zt){var a=$t[i][Qt];t=Xt(t,a&65535,a>>16);e+=a>>16;i=Qt}var u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8;var f=new r(t,i,this.binaryShiftByteCount+1,e+u);if(f.binaryShiftByteCount===2047+31){f=f.endBinaryShift(n+1)}return f};r.prototype.endBinaryShift=function(n){if(this.binaryShiftByteCount===0){return this}var t=this.token;t=qt(t,n-this.binaryShiftByteCount,this.binaryShiftByteCount);return new r(t,this.mode,0,this.bitCount)};r.prototype.isBetterThanOrEqualTo=function(n){var t=this.bitCount+($t[this.mode][n.mode]>>16);if(this.binaryShiftByteCount<n.binaryShiftByteCount){t+=r.calculateBinaryShiftCost(n)-r.calculateBinaryShiftCost(this)}else if(this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0){t+=10}return t<=n.bitCount};r.prototype.toBitArray=function(r){var n=[];for(var t=this.endBinaryShift(r.length).token;t!==null;t=t.getPrevious()){n.unshift(t)}var i=new I;for(var e=0,a=n;e<a.length;e++){var u=a[e];u.appendTo(i,r)}return i};r.prototype.toString=function(){return S.format("%s bits=%d bytes=%d",Kt[this.mode],this.bitCount,this.binaryShiftByteCount)};r.calculateBinaryShiftCost=function(r){if(r.binaryShiftByteCount>62){return 21}if(r.binaryShiftByteCount>31){return 20}if(r.binaryShiftByteCount>0){return 10}return 0};return r}();ti.INITIAL_STATE=new ti(Vt,Qt,0,0);function ii(r){var n=S.getCharCode(" ");var t=S.getCharCode(".");var i=S.getCharCode(",");r[Qt][n]=1;var e=S.getCharCode("Z");var a=S.getCharCode("A");for(var u=a;u<=e;u++){r[Qt][u]=u-a+2}r[zt][n]=1;var f=S.getCharCode("z");var s=S.getCharCode("a");for(var u=s;u<=f;u++){r[zt][u]=u-s+2}r[Zt][n]=1;var o=S.getCharCode("9");var h=S.getCharCode("0");for(var u=h;u<=o;u++){r[Zt][u]=u-h+2}r[Zt][i]=12;r[Zt][t]=13;var v=["\0"," ","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","@","\\","^","_","`","|","~",""];for(var c=0;c<v.length;c++){r[Yt][S.getCharCode(v[c])]=c}var w=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(var c=0;c<w.length;c++){if(S.getCharCode(w[c])>0){r[Jt][S.getCharCode(w[c])]=c}}return r}var ei=ii(y.createInt32Array(5,256));var ai=function(){function r(r){this.text=r}r.prototype.encode=function(){var n=S.getCharCode(" ");var t=S.getCharCode("\n");var i=Bt.singletonList(ti.INITIAL_STATE);for(var e=0;e<this.text.length;e++){var a=void 0;var u=e+1<this.text.length?this.text[e+1]:0;switch(this.text[e]){case S.getCharCode("\r"):a=u===t?2:0;break;case S.getCharCode("."):a=u===n?3:0;break;case S.getCharCode(","):a=u===n?4:0;break;case S.getCharCode(":"):a=u===n?5:0;break;default:a=0}if(a>0){i=r.updateStateListForPair(i,e,a);e++}else{i=this.updateStateListForChar(i,e)}}var f=Bt.min(i,(function(r,n){return r.getBitCount()-n.getBitCount()}));return f.toBitArray(this.text)};r.prototype.updateStateListForChar=function(n,t){var i=[];for(var e=0,a=n;e<a.length;e++){var u=a[e];this.updateStateForChar(u,t,i)}return r.simplifyStates(i)};r.prototype.updateStateForChar=function(r,n,t){var i=this.text[n]&255;var e=ei[r.getMode()][i]>0;var a=null;for(var u=0;u<=Jt;u++){var f=ei[u][i];if(f>0){if(a==null){a=r.endBinaryShift(n)}if(!e||u===r.getMode()||u===Zt){var s=a.latchAndAppend(u,f);t.push(s)}if(!e&&ni[r.getMode()][u]>=0){var o=a.shiftAndAppend(u,f);t.push(o)}}}if(r.getBinaryShiftByteCount()>0||ei[r.getMode()][i]===0){var h=r.addBinaryShiftChar(n);t.push(h)}};r.updateStateListForPair=function(r,n,t){var i=[];for(var e=0,a=r;e<a.length;e++){var u=a[e];this.updateStateForPair(u,n,t,i)}return this.simplifyStates(i)};r.updateStateForPair=function(r,n,t,i){var e=r.endBinaryShift(n);i.push(e.latchAndAppend(Jt,t));if(r.getMode()!==Jt){i.push(e.shiftAndAppend(Jt,t))}if(t===3||t===4){var a=e.latchAndAppend(Zt,16-t).latchAndAppend(Zt,1);i.push(a)}if(r.getBinaryShiftByteCount()>0){var u=r.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(u)}};r.simplifyStates=function(r){var n=[];for(var t=0,i=r;t<i.length;t++){var e=i[t];var a=true;var u=function(r){if(r.isBetterThanOrEqualTo(e)){a=false;return"break"}if(e.isBetterThanOrEqualTo(r)){n=n.filter((function(n){return n!==r}))}};for(var f=0,s=n;f<s.length;f++){var o=s[f];var h=u(o);if(h==="break")break}if(a){n.push(e)}}return n};return r}();var ui=function(){function r(){}r.encodeBytes=function(n){return r.encode(n,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)};r.encode=function(n,t,i){var e=new ai(n).encode();var a=A.truncDivision(e.getSize()*t,100)+11;var u=e.getSize()+a;var f;var s;var h;var v;var c;if(i!==r.DEFAULT_AZTEC_LAYERS){f=i<0;s=Math.abs(i);if(s>(f?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS)){throw new o(S.format("Illegal value %s for layers",i))}h=r.totalBitsInLayer(s,f);v=r.WORD_SIZE[s];var w=h-h%v;c=r.stuffBits(e,v);if(c.getSize()+a>w){throw new o("Data to large for user specified layer")}if(f&&c.getSize()>v*64){throw new o("Data to large for user specified layer")}}else{v=0;c=null;for(var l=0;;l++){if(l>r.MAX_NB_BITS){throw new o("Data too large for an Aztec code")}f=l<=3;s=f?l+1:l;h=r.totalBitsInLayer(s,f);if(u>h){continue}if(c==null||v!==r.WORD_SIZE[s]){v=r.WORD_SIZE[s];c=r.stuffBits(e,v)}var w=h-h%v;if(f&&c.getSize()>v*64){continue}if(c.getSize()+a<=w){break}}}var d=r.generateCheckWords(c,h,v);var y=c.getSize()/v;var I=r.generateModeMessage(f,s,y);var b=(f?11:14)+s*4;var p=new Int32Array(b);var M;if(f){M=b;for(var l=0;l<p.length;l++){p[l]=l}}else{M=b+1+2*A.truncDivision(A.truncDivision(b,2)-1,15);var _=A.truncDivision(b,2);var m=A.truncDivision(M,2);for(var l=0;l<_;l++){var k=l+A.truncDivision(l,15);p[_-l-1]=m-k-1;p[_+l]=m+k+1}}var g=new C(M);for(var l=0,E=0;l<s;l++){var N=(s-l)*4+(f?9:12);for(var O=0;O<N;O++){var T=O*2;for(var R=0;R<2;R++){if(d.get(E+T+R)){g.set(p[l*2+R],p[l*2+O])}if(d.get(E+N*2+T+R)){g.set(p[l*2+O],p[b-1-l*2-R])}if(d.get(E+N*4+T+R)){g.set(p[b-1-l*2-R],p[b-1-l*2-O])}if(d.get(E+N*6+T+R)){g.set(p[b-1-l*2-O],p[l*2+R])}}}E+=N*8}r.drawModeMessage(g,f,M,I);if(f){r.drawBullsEye(g,A.truncDivision(M,2),5)}else{r.drawBullsEye(g,A.truncDivision(M,2),7);for(var l=0,O=0;l<A.truncDivision(b,2)-1;l+=15,O+=16){for(var R=A.truncDivision(M,2)&1;R<M;R+=2){g.set(A.truncDivision(M,2)-O,R);g.set(A.truncDivision(M,2)+O,R);g.set(R,A.truncDivision(M,2)-O);g.set(R,A.truncDivision(M,2)+O)}}}var P=new Gt;P.setCompact(f);P.setSize(M);P.setLayers(s);P.setCodeWords(y);P.setMatrix(g);return P};r.drawBullsEye=function(r,n,t){for(var i=0;i<t;i+=2){for(var e=n-i;e<=n+i;e++){r.set(e,n-i);r.set(e,n+i);r.set(n-i,e);r.set(n+i,e)}}r.set(n-t,n-t);r.set(n-t+1,n-t);r.set(n-t,n-t+1);r.set(n+t,n-t);r.set(n+t,n-t+1);r.set(n+t,n+t-1)};r.generateModeMessage=function(n,t,i){var e=new I;if(n){e.appendBits(t-1,2);e.appendBits(i-1,6);e=r.generateCheckWords(e,28,4)}else{e.appendBits(t-1,5);e.appendBits(i-1,11);e=r.generateCheckWords(e,40,4)}return e};r.drawModeMessage=function(r,n,t,i){var e=A.truncDivision(t,2);if(n){for(var a=0;a<7;a++){var u=e-3+a;if(i.get(a)){r.set(u,e-5)}if(i.get(a+7)){r.set(e+5,u)}if(i.get(20-a)){r.set(u,e+5)}if(i.get(27-a)){r.set(e-5,u)}}}else{for(var a=0;a<10;a++){var u=e-5+a+A.truncDivision(a,5);if(i.get(a)){r.set(u,e-7)}if(i.get(a+10)){r.set(e+7,u)}if(i.get(29-a)){r.set(u,e+7)}if(i.get(39-a)){r.set(e-7,u)}}}};r.generateCheckWords=function(n,t,i){var e=n.getSize()/i;var a=new kt(r.getGF(i));var u=A.truncDivision(t,i);var f=r.bitsToWords(n,i,u);a.encode(f,u-e);var s=t%i;var o=new I;o.appendBits(0,s);for(var h=0,v=Array.from(f);h<v.length;h++){var c=v[h];o.appendBits(c,i)}return o};r.bitsToWords=function(r,n,t){var i=new Int32Array(t);var e;var a;for(e=0,a=r.getSize()/n;e<a;e++){var u=0;for(var f=0;f<n;f++){u|=r.get(e*n+f)?1<<n-f-1:0}i[e]=u}return i};r.getGF=function(r){switch(r){case 4:return z.AZTEC_PARAM;case 6:return z.AZTEC_DATA_6;case 8:return z.AZTEC_DATA_8;case 10:return z.AZTEC_DATA_10;case 12:return z.AZTEC_DATA_12;default:throw new o("Unsupported word size "+r)}};r.stuffBits=function(r,n){var t=new I;var i=r.getSize();var e=(1<<n)-2;for(var a=0;a<i;a+=n){var u=0;for(var f=0;f<n;f++){if(a+f>=i||r.get(a+f)){u|=1<<n-1-f}}if((u&e)===e){t.appendBits(u&e,n);a--}else if((u&e)===0){t.appendBits(u|1,n);a--}else{t.appendBits(u,n)}}return t};r.totalBitsInLayer=function(r,n){return((n?88:112)+16*r)*r};return r}();ui.DEFAULT_EC_PERCENT=33;ui.DEFAULT_AZTEC_LAYERS=0;ui.MAX_NB_BITS=32;ui.MAX_NB_BITS_COMPACT=4;ui.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);var fi=function(){function r(){}r.prototype.encode=function(r,n,t,i){return this.encodeWithHints(r,n,t,i,null)};r.prototype.encodeWithHints=function(n,t,i,e,a){var u=Lt.ISO_8859_1;var f=ui.DEFAULT_EC_PERCENT;var s=ui.DEFAULT_AZTEC_LAYERS;if(a!=null){if(a.has(mt.CHARACTER_SET)){u=Ft.forName(a.get(mt.CHARACTER_SET).toString())}if(a.has(mt.ERROR_CORRECTION)){f=A.parseInt(a.get(mt.ERROR_CORRECTION).toString())}if(a.has(mt.AZTEC_LAYERS)){s=A.parseInt(a.get(mt.AZTEC_LAYERS).toString())}}return r.encodeLayers(n,t,i,e,u,f,s)};r.encodeLayers=function(n,t,i,e,a,u,f){if(t!==j.AZTEC){throw new o("Can only encode AZTEC, but got "+t)}var s=ui.encode(S.getBytes(n,a),u,f);return r.renderResult(s,i,e)};r.renderResult=function(r,n,t){var i=r.getMatrix();if(i==null){throw new Y}var e=i.getWidth();var a=i.getHeight();var u=Math.max(n,e);var f=Math.max(t,a);var s=Math.min(u/e,f/a);var o=(u-e*s)/2;var h=(f-a*s)/2;var v=new C(u,f);for(var c=0,w=h;c<a;c++,w+=s){for(var l=0,d=o;l<e;l++,d+=s){if(i.get(l,c)){v.setRegion(d,w,s,s)}}}return v};return r}();r.AbstractExpandedDecoder=jr;r.ArgumentException=s;r.ArithmeticException=Q;r.AztecCode=Gt;r.AztecCodeReader=wr;r.AztecCodeWriter=fi;r.AztecDecoder=$;r.AztecDetector=cr;r.AztecDetectorResult=er;r.AztecEncoder=ui;r.AztecHighLevelEncoder=ai;r.AztecPoint=vr;r.BarcodeFormat=j;r.Binarizer=c;r.BinaryBitmap=h;r.BitArray=I;r.BitMatrix=C;r.BitSource=cn;r.BrowserAztecCodeReader=lr;r.BrowserBarcodeReader=un;r.BrowserCodeReader=L;r.BrowserDatamatrixCodeReader=In;r.BrowserMultiFormatReader=bt;r.BrowserPDF417Reader=pt;r.BrowserQRCodeReader=Mt;r.BrowserQRCodeSvgWriter=Rt;r.CharacterSetECI=m;r.ChecksumException=v;r.Code128Reader=yr;r.Code39Reader=Ar;r.DataMatrixDecodedBitStreamParser=ln;r.DataMatrixReader=An;r.DecodeHintType=p;r.DecoderResult=q;r.DefaultGridSampler=sr;r.DetectorResult=ir;r.EAN13Reader=kr;r.EncodeHintType=mt;r.Exception=f;r.FormatException=M;r.GenericGF=z;r.GenericGFPoly=K;r.GlobalHistogramBinarizer=O;r.GridSampler=ur;r.GridSamplerInstance=hr;r.HTMLCanvasElementLuminanceSource=D;r.HybridBinarizer=T;r.ITFReader=Ir;r.IllegalArgumentException=o;r.IllegalStateException=Y;r.InvertedLuminanceSource=P;r.LuminanceSource=R;r.MathUtils=rr;r.MultiFormatOneDReader=an;r.MultiFormatReader=It;r.MultiFormatWriter=Dt;r.NotFoundException=N;r.OneDReader=dr;r.PDF417DecodedBitStreamParser=lt;r.PDF417DecoderErrorCorrection=Qn;r.PDF417Reader=yt;r.PDF417ResultMetadata=it;r.PerspectiveTransform=fr;r.PlanarYUVLuminanceSource=Ut;r.QRCodeByteMatrix=St;r.QRCodeDataMask=Sn;r.QRCodeDecodedBitStreamParser=Tn;r.QRCodeDecoderErrorCorrectionLevel=pn;r.QRCodeDecoderFormatInformation=Mn;r.QRCodeEncoder=Tt;r.QRCodeEncoderQRCode=Et;r.QRCodeMaskUtil=gt;r.QRCodeMatrixUtil=Nt;r.QRCodeMode=On;r.QRCodeReader=Bn;r.QRCodeVersion=kn;r.QRCodeWriter=Pt;r.RGBLuminanceSource=xt;r.RSS14Reader=en;r.RSSExpandedReader=nn;r.ReaderException=At;r.ReedSolomonDecoder=J;r.ReedSolomonEncoder=kt;r.ReedSolomonException=Z;r.Result=G;r.ResultMetadataType=H;r.ResultPoint=tr;r.StringUtils=S;r.UnsupportedOperationException=k;r.VideoInputDevice=U;r.WhiteRectangleDetector=ar;r.WriterException=Ct;r.ZXingArrays=y;r.ZXingCharset=Ft;r.ZXingInteger=A;r.ZXingStandardCharsets=Lt;r.ZXingStringBuilder=E;r.ZXingStringEncoding=g;r.ZXingSystem=w;r.createAbstractExpandedDecoder=Vr;Object.defineProperty(r,"__esModule",{value:true})}))})(G,G.exports);var B=L(G.exports);var j=Object.freeze(Object.assign(Object.create(null),G.exports,{default:B}));var W=function(){function r(r,n,t){this.formatMap=new Map([[m.QR_CODE,G.exports.BarcodeFormat.QR_CODE],[m.AZTEC,G.exports.BarcodeFormat.AZTEC],[m.CODABAR,G.exports.BarcodeFormat.CODABAR],[m.CODE_39,G.exports.BarcodeFormat.CODE_39],[m.CODE_93,G.exports.BarcodeFormat.CODE_93],[m.CODE_128,G.exports.BarcodeFormat.CODE_128],[m.DATA_MATRIX,G.exports.BarcodeFormat.DATA_MATRIX],[m.MAXICODE,G.exports.BarcodeFormat.MAXICODE],[m.ITF,G.exports.BarcodeFormat.ITF],[m.EAN_13,G.exports.BarcodeFormat.EAN_13],[m.EAN_8,G.exports.BarcodeFormat.EAN_8],[m.PDF_417,G.exports.BarcodeFormat.PDF_417],[m.RSS_14,G.exports.BarcodeFormat.RSS_14],[m.RSS_EXPANDED,G.exports.BarcodeFormat.RSS_EXPANDED],[m.UPC_A,G.exports.BarcodeFormat.UPC_A],[m.UPC_E,G.exports.BarcodeFormat.UPC_E],[m.UPC_EAN_EXTENSION,G.exports.BarcodeFormat.UPC_EAN_EXTENSION]]);this.reverseFormatMap=this.createReverseFormatMap();if(!j){throw"Use html5qrcode.min.js without edit, ZXing not found."}this.verbose=n;this.logger=t;var i=this.createZXingFormats(r);var e=new Map;e.set(G.exports.DecodeHintType.POSSIBLE_FORMATS,i);e.set(G.exports.DecodeHintType.TRY_HARDER,false);this.hints=e}r.prototype.decodeAsync=function(r){var n=this;return new Promise((function(t,i){try{t(n.decode(r))}catch(r){i(r)}}))};r.prototype.decode=function(r){var n=new G.exports.MultiFormatReader(this.verbose,this.hints);var t=new G.exports.HTMLCanvasElementLuminanceSource(r);var i=new G.exports.BinaryBitmap(new G.exports.HybridBinarizer(t));var e=n.decode(i);return{text:e.text,format:N.create(this.toHtml5QrcodeSupportedFormats(e.format)),debugData:this.createDebugData()}};r.prototype.createReverseFormatMap=function(){var r=new Map;this.formatMap.forEach((function(n,t,i){r.set(n,t)}));return r};r.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r)){throw"reverseFormatMap doesn't have ".concat(r)}return this.reverseFormatMap.get(r)};r.prototype.createZXingFormats=function(r){var n=[];for(var t=0,i=r;t<i.length;t++){var e=i[t];if(this.formatMap.has(e)){n.push(this.formatMap.get(e))}else{this.logger.logError("".concat(e," is not supported by")+"ZXingHtml5QrcodeShim")}}return n};r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}};return r}();var H=undefined&&undefined.__awaiter||function(r,n,t,i){function e(r){return r instanceof t?r:new t((function(n){n(r)}))}return new(t||(t=Promise))((function(t,a){function u(r){try{s(i.next(r))}catch(r){a(r)}}function f(r){try{s(i["throw"](r))}catch(r){a(r)}}function s(r){r.done?t(r.value):e(r.value).then(u,f)}s((i=i.apply(r,n||[])).next())}))};var q=undefined&&undefined.__generator||function(r,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,e,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(r){return function(n){return s([r,n])}}function s(f){if(i)throw new TypeError("Generator is already executing.");while(u&&(u=0,f[0]&&(t=0)),t)try{if(i=1,e&&(a=f[0]&2?e["return"]:f[0]?e["throw"]||((a=e["return"])&&a.call(e),0):e.next)&&!(a=a.call(e,f[1])).done)return a;if(e=0,a)f=[f[0]&2,a.value];switch(f[0]){case 0:case 1:a=f;break;case 4:t.label++;return{value:f[1],done:false};case 5:t.label++;e=f[1];f=[0];continue;case 7:f=t.ops.pop();t.trys.pop();continue;default:if(!(a=t.trys,a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1];a=f;break}if(a&&t.label<a[2]){t.label=a[2];t.ops.push(f);break}if(a[2])t.ops.pop();t.trys.pop();continue}f=n.call(r,t)}catch(r){f=[6,r];e=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:true}}};var X=function(){function r(n,t,i){this.formatMap=new Map([[m.QR_CODE,"qr_code"],[m.AZTEC,"aztec"],[m.CODABAR,"codabar"],[m.CODE_39,"code_39"],[m.CODE_93,"code_93"],[m.CODE_128,"code_128"],[m.DATA_MATRIX,"data_matrix"],[m.ITF,"itf"],[m.EAN_13,"ean_13"],[m.EAN_8,"ean_8"],[m.PDF_417,"pdf417"],[m.UPC_A,"upc_a"],[m.UPC_E,"upc_e"]]);this.reverseFormatMap=this.createReverseFormatMap();if(!r.isSupported()){throw"Use html5qrcode.min.js without edit, Use "+"BarcodeDetectorDelegate only if it isSupported();"}this.verbose=t;this.logger=i;var e=this.createBarcodeDetectorFormats(n);this.detector=new BarcodeDetector(e);if(!this.detector){throw"BarcodeDetector detector not supported"}}r.isSupported=function(){if(!("BarcodeDetector"in window)){return false}var r=new BarcodeDetector({formats:["qr_code"]});return typeof r!=="undefined"};r.prototype.decodeAsync=function(r){return H(this,void 0,void 0,(function(){var n,t;return q(this,(function(i){switch(i.label){case 0:return[4,this.detector.detect(r)];case 1:n=i.sent();if(!n||n.length===0){throw"No barcode or QR code detected."}t=this.selectLargestBarcode(n);return[2,{text:t.rawValue,format:N.create(this.toHtml5QrcodeSupportedFormats(t.format)),debugData:this.createDebugData()}]}}))}))};r.prototype.selectLargestBarcode=function(r){var n=null;var t=0;for(var i=0,e=r;i<e.length;i++){var a=e[i];var u=a.boundingBox.width*a.boundingBox.height;if(u>t){t=u;n=a}}if(!n){throw"No largest barcode found"}return n};r.prototype.createBarcodeDetectorFormats=function(r){var n=[];for(var t=0,i=r;t<i.length;t++){var e=i[t];if(this.formatMap.has(e)){n.push(this.formatMap.get(e))}else{this.logger.warn("".concat(e," is not supported by")+"BarcodeDetectorDelegate")}}return{formats:n}};r.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r)){throw"reverseFormatMap doesn't have ".concat(r)}return this.reverseFormatMap.get(r)};r.prototype.createReverseFormatMap=function(){var r=new Map;this.formatMap.forEach((function(n,t,i){r.set(n,t)}));return r};r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}};return r}();var K=undefined&&undefined.__awaiter||function(r,n,t,i){function e(r){return r instanceof t?r:new t((function(n){n(r)}))}return new(t||(t=Promise))((function(t,a){function u(r){try{s(i.next(r))}catch(r){a(r)}}function f(r){try{s(i["throw"](r))}catch(r){a(r)}}function s(r){r.done?t(r.value):e(r.value).then(u,f)}s((i=i.apply(r,n||[])).next())}))};var Q=undefined&&undefined.__generator||function(r,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,e,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(r){return function(n){return s([r,n])}}function s(f){if(i)throw new TypeError("Generator is already executing.");while(u&&(u=0,f[0]&&(t=0)),t)try{if(i=1,e&&(a=f[0]&2?e["return"]:f[0]?e["throw"]||((a=e["return"])&&a.call(e),0):e.next)&&!(a=a.call(e,f[1])).done)return a;if(e=0,a)f=[f[0]&2,a.value];switch(f[0]){case 0:case 1:a=f;break;case 4:t.label++;return{value:f[1],done:false};case 5:t.label++;e=f[1];f=[0];continue;case 7:f=t.ops.pop();t.trys.pop();continue;default:if(!(a=t.trys,a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1];a=f;break}if(a&&t.label<a[2]){t.label=a[2];t.ops.push(f);break}if(a[2])t.ops.pop();t.trys.pop();continue}f=n.call(r,t)}catch(r){f=[6,r];e=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:true}}};var z=function(){function r(r,n,t,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100;this.executions=0;this.executionResults=[];this.wasPrimaryDecoderUsedInLastDecode=false;this.verbose=t;if(n&&X.isSupported()){this.primaryDecoder=new X(r,t,i);this.secondaryDecoder=new W(r,t,i)}else{this.primaryDecoder=new W(r,t,i)}}r.prototype.decodeAsync=function(r){return K(this,void 0,void 0,(function(){var n;return Q(this,(function(t){switch(t.label){case 0:n=performance.now();t.label=1;case 1:t.trys.push([1,,3,4]);return[4,this.getDecoder().decodeAsync(r)];case 2:return[2,t.sent()];case 3:this.possiblyLogPerformance(n);return[7];case 4:return[2]}}))}))};r.prototype.decodeRobustlyAsync=function(r){return K(this,void 0,void 0,(function(){var n,t;return Q(this,(function(i){switch(i.label){case 0:n=performance.now();i.label=1;case 1:i.trys.push([1,3,4,5]);return[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,i.sent()];case 3:t=i.sent();if(this.secondaryDecoder){return[2,this.secondaryDecoder.decodeAsync(r)]}throw t;case 4:this.possiblyLogPerformance(n);return[7];case 5:return[2]}}))}))};r.prototype.getDecoder=function(){if(!this.secondaryDecoder){return this.primaryDecoder}if(this.wasPrimaryDecoderUsedInLastDecode===false){this.wasPrimaryDecoderUsedInLastDecode=true;return this.primaryDecoder}this.wasPrimaryDecoderUsedInLastDecode=false;return this.secondaryDecoder};r.prototype.possiblyLogPerformance=function(r){if(!this.verbose){return}var n=performance.now()-r;this.executionResults.push(n);this.executions++;this.possiblyFlushPerformanceReport()};r.prototype.possiblyFlushPerformanceReport=function(){if(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE){return}var r=0;for(var n=0,t=this.executionResults;n<t.length;n++){var i=t[n];r+=i}var e=r/this.executionResults.length;console.log("".concat(e," ms for ").concat(this.executionResults.length," last runs."));this.executions=0;this.executionResults=[]};return r}();var Z=undefined&&undefined.__extends||function(){var r=function(n,t){r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t))r[t]=n[t]};return r(n,t)};return function(n,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(n,t);function i(){this.constructor=n}n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();var Y=undefined&&undefined.__awaiter||function(r,n,t,i){function e(r){return r instanceof t?r:new t((function(n){n(r)}))}return new(t||(t=Promise))((function(t,a){function u(r){try{s(i.next(r))}catch(r){a(r)}}function f(r){try{s(i["throw"](r))}catch(r){a(r)}}function s(r){r.done?t(r.value):e(r.value).then(u,f)}s((i=i.apply(r,n||[])).next())}))};var J=undefined&&undefined.__generator||function(r,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,e,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(r){return function(n){return s([r,n])}}function s(f){if(i)throw new TypeError("Generator is already executing.");while(u&&(u=0,f[0]&&(t=0)),t)try{if(i=1,e&&(a=f[0]&2?e["return"]:f[0]?e["throw"]||((a=e["return"])&&a.call(e),0):e.next)&&!(a=a.call(e,f[1])).done)return a;if(e=0,a)f=[f[0]&2,a.value];switch(f[0]){case 0:case 1:a=f;break;case 4:t.label++;return{value:f[1],done:false};case 5:t.label++;e=f[1];f=[0];continue;case 7:f=t.ops.pop();t.trys.pop();continue;default:if(!(a=t.trys,a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1];a=f;break}if(a&&t.label<a[2]){t.label=a[2];t.ops.push(f);break}if(a[2])t.ops.pop();t.trys.pop();continue}f=n.call(r,t)}catch(r){f=[6,r];e=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:true}}};var V=function(){function r(r,n){this.name=r;this.track=n}r.prototype.isSupported=function(){if(!this.track.getCapabilities){return false}return this.name in this.track.getCapabilities()};r.prototype.apply=function(r){var n={};n[this.name]=r;var t={advanced:[n]};return this.track.applyConstraints(t)};r.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var n=r[this.name];return n}return null};return r}();var $=function(r){Z(n,r);function n(n,t){return r.call(this,n,t)||this}n.prototype.min=function(){return this.getCapabilities().min};n.prototype.max=function(){return this.getCapabilities().max};n.prototype.step=function(){return this.getCapabilities().step};n.prototype.apply=function(r){var n={};n[this.name]=r;var t={advanced:[n]};return this.track.applyConstraints(t)};n.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities();var n=r[this.name];return{min:n.min,max:n.max,step:n.step}};n.prototype.failIfNotSupported=function(){if(!this.isSupported()){throw new Error("".concat(this.name," capability not supported"))}};return n}(V);var rr=function(r){Z(n,r);function n(n){return r.call(this,"zoom",n)||this}return n}($);var nr=function(r){Z(n,r);function n(n){return r.call(this,"torch",n)||this}return n}(V);var tr=function(){function r(r){this.track=r}r.prototype.zoomFeature=function(){return new rr(this.track)};r.prototype.torchFeature=function(){return new nr(this.track)};return r}();var ir=function(){function r(r,n,t){this.isClosed=false;this.parentElement=r;this.mediaStream=n;this.callbacks=t;this.surface=this.createVideoElement(this.parentElement.clientWidth);r.append(this.surface)}r.prototype.createVideoElement=function(r){var n=document.createElement("video");n.style.width="".concat(r,"px");n.style.display="block";n.muted=true;n.setAttribute("muted","true");n.playsInline=true;return n};r.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"};this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var t=r.surface.clientWidth;var i=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(t,i);r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n);this.surface.srcObject=this.mediaStream;this.surface.play()};r.create=function(n,t,i,e){return Y(this,void 0,void 0,(function(){var a,u;return J(this,(function(f){switch(f.label){case 0:a=new r(n,t,e);if(!i.aspectRatio)return[3,2];u={aspectRatio:i.aspectRatio};return[4,a.getFirstTrackOrFail().applyConstraints(u)];case 1:f.sent();f.label=2;case 2:a.setupSurface();return[2,a]}}))}))};r.prototype.failIfClosed=function(){if(this.isClosed){throw"The RenderedCamera has already been closed."}};r.prototype.getFirstTrackOrFail=function(){this.failIfClosed();if(this.mediaStream.getVideoTracks().length===0){throw"No video tracks found"}return this.mediaStream.getVideoTracks()[0]};r.prototype.pause=function(){this.failIfClosed();this.surface.pause()};r.prototype.resume=function(r){this.failIfClosed();var n=this;var t=function(){setTimeout(r,200);n.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t);this.surface.play()};r.prototype.isPaused=function(){this.failIfClosed();return this.surface.paused};r.prototype.getSurface=function(){this.failIfClosed();return this.surface};r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()};r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()};r.prototype.applyVideoConstraints=function(r){return Y(this,void 0,void 0,(function(){return J(this,(function(n){if("aspectRatio"in r){throw"Changing 'aspectRatio' in run-time is not yet supported."}return[2,this.getFirstTrackOrFail().applyConstraints(r)]}))}))};r.prototype.close=function(){if(this.isClosed){return Promise.resolve()}var r=this;return new Promise((function(n,t){var i=r.mediaStream.getVideoTracks();var e=i.length;var a=0;r.mediaStream.getVideoTracks().forEach((function(t){r.mediaStream.removeTrack(t);t.stop();++a;if(a>=e){r.isClosed=true;r.parentElement.removeChild(r.surface);n()}}))}))};r.prototype.getCapabilities=function(){return new tr(this.getFirstTrackOrFail())};return r}();var er=function(){function r(r){this.mediaStream=r}r.prototype.render=function(r,n,t){return Y(this,void 0,void 0,(function(){return J(this,(function(i){return[2,ir.create(r,this.mediaStream,n,t)]}))}))};r.create=function(n){return Y(this,void 0,void 0,(function(){var t,i;return J(this,(function(e){switch(e.label){case 0:if(!navigator.mediaDevices){throw"navigator.mediaDevices not supported"}t={audio:false,video:n};return[4,navigator.mediaDevices.getUserMedia(t)];case 1:i=e.sent();return[2,new r(i)]}}))}))};return r}();var ar=undefined&&undefined.__awaiter||function(r,n,t,i){function e(r){return r instanceof t?r:new t((function(n){n(r)}))}return new(t||(t=Promise))((function(t,a){function u(r){try{s(i.next(r))}catch(r){a(r)}}function f(r){try{s(i["throw"](r))}catch(r){a(r)}}function s(r){r.done?t(r.value):e(r.value).then(u,f)}s((i=i.apply(r,n||[])).next())}))};var ur=undefined&&undefined.__generator||function(r,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,e,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(r){return function(n){return s([r,n])}}function s(f){if(i)throw new TypeError("Generator is already executing.");while(u&&(u=0,f[0]&&(t=0)),t)try{if(i=1,e&&(a=f[0]&2?e["return"]:f[0]?e["throw"]||((a=e["return"])&&a.call(e),0):e.next)&&!(a=a.call(e,f[1])).done)return a;if(e=0,a)f=[f[0]&2,a.value];switch(f[0]){case 0:case 1:a=f;break;case 4:t.label++;return{value:f[1],done:false};case 5:t.label++;e=f[1];f=[0];continue;case 7:f=t.ops.pop();t.trys.pop();continue;default:if(!(a=t.trys,a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1];a=f;break}if(a&&t.label<a[2]){t.label=a[2];t.ops.push(f);break}if(a[2])t.ops.pop();t.trys.pop();continue}f=n.call(r,t)}catch(r){f=[6,r];e=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:true}}};var fr=function(){function r(){}r.failIfNotSupported=function(){return ar(this,void 0,void 0,(function(){return ur(this,(function(n){if(!navigator.mediaDevices){throw"navigator.mediaDevices not supported"}return[2,new r]}))}))};r.prototype.create=function(r){return ar(this,void 0,void 0,(function(){return ur(this,(function(n){return[2,er.create(r)]}))}))};return r}();var sr=undefined&&undefined.__awaiter||function(r,n,t,i){function e(r){return r instanceof t?r:new t((function(n){n(r)}))}return new(t||(t=Promise))((function(t,a){function u(r){try{s(i.next(r))}catch(r){a(r)}}function f(r){try{s(i["throw"](r))}catch(r){a(r)}}function s(r){r.done?t(r.value):e(r.value).then(u,f)}s((i=i.apply(r,n||[])).next())}))};var or=undefined&&undefined.__generator||function(r,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,e,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(r){return function(n){return s([r,n])}}function s(f){if(i)throw new TypeError("Generator is already executing.");while(u&&(u=0,f[0]&&(t=0)),t)try{if(i=1,e&&(a=f[0]&2?e["return"]:f[0]?e["throw"]||((a=e["return"])&&a.call(e),0):e.next)&&!(a=a.call(e,f[1])).done)return a;if(e=0,a)f=[f[0]&2,a.value];switch(f[0]){case 0:case 1:a=f;break;case 4:t.label++;return{value:f[1],done:false};case 5:t.label++;e=f[1];f=[0];continue;case 7:f=t.ops.pop();t.trys.pop();continue;default:if(!(a=t.trys,a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1];a=f;break}if(a&&t.label<a[2]){t.label=a[2];t.ops.push(f);break}if(a[2])t.ops.pop();t.trys.pop();continue}f=n.call(r,t)}catch(r){f=[6,r];e=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:true}}};var hr=function(){function r(){}r.retrieve=function(){if(navigator.mediaDevices){return r.getCamerasFromMediaDevices()}var n=MediaStreamTrack;if(MediaStreamTrack&&n.getSources){return r.getCamerasFromMediaStreamTrack()}return r.rejectWithError()};r.rejectWithError=function(){var n=U.unableToQuerySupportedDevices();if(!r.isHttpsOrLocalhost()){n=U.insecureContextCameraQueryError()}return Promise.reject(n)};r.isHttpsOrLocalhost=function(){if(location.protocol==="https:"){return true}var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"};r.getCamerasFromMediaDevices=function(){return sr(this,void 0,void 0,(function(){var r,n,t,i,e,a,u;return or(this,(function(f){switch(f.label){case 0:r=function(r){var n=r.getVideoTracks();for(var t=0,i=n;t<i.length;t++){var e=i[t];e.enabled=false;e.stop();r.removeTrack(e)}};return[4,navigator.mediaDevices.getUserMedia({audio:false,video:true})];case 1:n=f.sent();return[4,navigator.mediaDevices.enumerateDevices()];case 2:t=f.sent();i=[];for(e=0,a=t;e<a.length;e++){u=a[e];if(u.kind==="videoinput"){i.push({id:u.deviceId,label:u.label})}}r(n);return[2,i]}}))}))};r.getCamerasFromMediaStreamTrack=function(){return new Promise((function(r,n){var t=function(n){var t=[];for(var i=0,e=n;i<e.length;i++){var a=e[i];if(a.kind==="video"){t.push({id:a.id,label:a.label})}}r(t)};var i=MediaStreamTrack;i.getSources(t)}))};return r}();var vr;(function(r){r[r["UNKNOWN"]=0]="UNKNOWN";r[r["NOT_STARTED"]=1]="NOT_STARTED";r[r["SCANNING"]=2]="SCANNING";r[r["PAUSED"]=3]="PAUSED"})(vr||(vr={}));var cr=function(){function r(){this.state=vr.NOT_STARTED;this.onGoingTransactionNewState=vr.UNKNOWN}r.prototype.directTransition=function(r){this.failIfTransitionOngoing();this.validateTransition(r);this.state=r};r.prototype.startTransition=function(r){this.failIfTransitionOngoing();this.validateTransition(r);this.onGoingTransactionNewState=r;return this};r.prototype.execute=function(){if(this.onGoingTransactionNewState===vr.UNKNOWN){throw"Transaction is already cancelled, cannot execute()."}var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=vr.UNKNOWN;this.directTransition(r)};r.prototype.cancel=function(){if(this.onGoingTransactionNewState===vr.UNKNOWN){throw"Transaction is already cancelled, cannot cancel()."}this.onGoingTransactionNewState=vr.UNKNOWN};r.prototype.getState=function(){return this.state};r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==vr.UNKNOWN){throw"Cannot transition to a new state, already under transition"}};r.prototype.validateTransition=function(r){switch(this.state){case vr.UNKNOWN:throw"Transition from unknown is not allowed";case vr.NOT_STARTED:this.failIfNewStateIs(r,[vr.PAUSED]);break}};r.prototype.failIfNewStateIs=function(r,n){for(var t=0,i=n;t<i.length;t++){var e=i[t];if(r===e){throw"Cannot transition from ".concat(this.state," to ").concat(r)}}};return r}();var wr=function(){function r(r){this.stateManager=r}r.prototype.startTransition=function(r){return this.stateManager.startTransition(r)};r.prototype.directTransition=function(r){this.stateManager.directTransition(r)};r.prototype.getState=function(){return this.stateManager.getState()};r.prototype.canScanFile=function(){return this.stateManager.getState()===vr.NOT_STARTED};r.prototype.isScanning=function(){return this.stateManager.getState()!==vr.NOT_STARTED};r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===vr.SCANNING};r.prototype.isPaused=function(){return this.stateManager.getState()===vr.PAUSED};return r}();var lr=function(){function r(){}r.create=function(){return new wr(new cr)};return r}();var dr=undefined&&undefined.__extends||function(){var r=function(n,t){r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t))r[t]=n[t]};return r(n,t)};return function(n,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(n,t);function i(){this.constructor=n}n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();var yr=function(r){dr(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}n.DEFAULT_WIDTH=300;n.DEFAULT_WIDTH_OFFSET=2;n.FILE_SCAN_MIN_HEIGHT=300;n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100;n.MIN_QR_BOX_SIZE=50;n.SHADED_LEFT=1;n.SHADED_RIGHT=2;n.SHADED_TOP=3;n.SHADED_BOTTOM=4;n.SHADED_REGION_ELEMENT_ID="qr-shaded-region";n.VERBOSE=false;n.BORDER_SHADER_DEFAULT_COLOR="#ffffff";n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)";return n}(C);var Ar=function(){function r(r,n){this.logger=n;this.fps=yr.SCAN_DEFAULT_FPS;if(!r){this.disableFlip=yr.DEFAULT_DISABLE_FLIP}else{if(r.fps){this.fps=r.fps}this.disableFlip=r.disableFlip===true;this.qrbox=r.qrbox;this.aspectRatio=r.aspectRatio;this.videoConstraints=r.videoConstraints}}r.prototype.isMediaStreamConstraintsValid=function(){if(!this.videoConstraints){this.logger.logError("Empty videoConstraints",true);return false}return x.isMediaStreamConstraintsValid(this.videoConstraints,this.logger)};r.prototype.isShadedBoxEnabled=function(){return!D(this.qrbox)};r.create=function(n,t){return new r(n,t)};return r}();var Ir=function(){function r(r,n){this.element=null;this.canvasElement=null;this.scannerPausedUiElement=null;this.hasBorderShaders=null;this.borderShaders=null;this.qrMatch=null;this.renderedCamera=null;this.qrRegion=null;this.context=null;this.lastScanImageFile=null;this.isScanning=false;if(!document.getElementById(r)){throw"HTML Element with id=".concat(r," not found")}this.elementId=r;this.verbose=false;var t;if(typeof n=="boolean"){this.verbose=n===true}else if(n){t=n;this.verbose=t.verbose===true}this.logger=new P(this.verbose);this.qrcode=new z(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(t),this.verbose,this.logger);this.shouldScan=true;this.stateManagerProxy=lr.create()}r.prototype.start=function(r,n,t,i){var e=this;if(!r){throw"cameraIdOrConfig is required"}if(!t||typeof t!="function"){throw"qrCodeSuccessCallback is required and should be a function."}var a;if(i){a=i}else{a=this.verbose?this.logger.log:function(){}}var u=Ar.create(n,this.logger);this.clearElement();var f=false;if(u.videoConstraints){if(!u.isMediaStreamConstraintsValid()){this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, "+"it will be ignored.'",true)}else{f=true}}var s=f;var o=document.getElementById(this.elementId);o.style.position="relative";this.shouldScan=true;this.element=o;var h=this;var v=this.stateManagerProxy.startTransition(vr.SCANNING);return new Promise((function(n,i){var f=s?u.videoConstraints:h.createVideoConstraints(r);if(!f){v.cancel();i("videoConstraints should be defined");return}var o={};if(!s||u.aspectRatio){o.aspectRatio=u.aspectRatio}var c={onRenderSurfaceReady:function(r,n){h.setupUi(r,n,u);h.isScanning=true;h.foreverScan(u,t,a)}};fr.failIfNotSupported().then((function(r){r.create(f).then((function(r){return r.render(e.element,o,c).then((function(r){h.renderedCamera=r;v.execute();n(null)})).catch((function(r){v.cancel();i(r)}))})).catch((function(r){v.cancel();i(U.errorGettingUserMedia(r))}))})).catch((function(r){v.cancel();i(U.cameraStreamingNotSupported())}))}))};r.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning()){throw"Cannot pause, scanner is not scanning."}this.stateManagerProxy.directTransition(vr.PAUSED);this.showPausedState();if(D(r)||r!==true){r=false}if(r&&this.renderedCamera){this.renderedCamera.pause()}};r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused()){throw"Cannot result, scanner is not paused."}if(!this.renderedCamera){throw"renderedCamera doesn't exist while trying resume()"}var r=this;var n=function(){r.stateManagerProxy.directTransition(vr.SCANNING);r.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume((function(){n()}))};r.prototype.getState=function(){return this.stateManagerProxy.getState()};r.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning()){throw"Cannot stop, scanner is not running or paused."}var n=this.stateManagerProxy.startTransition(vr.NOT_STARTED);this.shouldScan=false;if(this.foreverScanTimeout){clearTimeout(this.foreverScanTimeout)}var t=function(){if(!r.element){return}var n=document.getElementById(yr.SHADED_REGION_ELEMENT_ID);if(n){r.element.removeChild(n)}};var i=this;return this.renderedCamera.close().then((function(){i.renderedCamera=null;if(i.element){i.element.removeChild(i.canvasElement);i.canvasElement=null}t();if(i.qrRegion){i.qrRegion=null}if(i.context){i.context=null}n.execute();i.hidePausedState();i.isScanning=false;return Promise.resolve()}))};r.prototype.scanFile=function(r,n){return this.scanFileV2(r,n).then((function(r){return r.decodedText}))};r.prototype.scanFileV2=function(r,n){var t=this;if(!r||!(r instanceof File)){throw"imageFile argument is mandatory and should be instance "+"of File. Use 'event.target.files[0]'."}if(D(n)){n=true}if(!this.stateManagerProxy.canScanFile()){throw"Cannot start file scan - ongoing camera scan"}return new Promise((function(i,e){t.possiblyCloseLastScanImageFile();t.clearElement();t.lastScanImageFile=URL.createObjectURL(r);var a=new Image;a.onload=function(){var r=a.width;var u=a.height;var f=document.getElementById(t.elementId);var s=f.clientWidth?f.clientWidth:yr.DEFAULT_WIDTH;var o=Math.max(f.clientHeight?f.clientHeight:u,yr.FILE_SCAN_MIN_HEIGHT);var h=t.computeCanvasDrawConfig(r,u,s,o);if(n){var v=t.createCanvasElement(s,o,"qr-canvas-visible");v.style.display="inline-block";f.appendChild(v);var c=v.getContext("2d");if(!c){throw"Unable to get 2d context from canvas"}c.canvas.width=s;c.canvas.height=o;c.drawImage(a,0,0,r,u,h.x,h.y,h.width,h.height)}var w=yr.FILE_SCAN_HIDDEN_CANVAS_PADDING;var l=Math.max(a.width,h.width);var d=Math.max(a.height,h.height);var y=l+2*w;var A=d+2*w;var I=t.createCanvasElement(y,A);f.appendChild(I);var b=I.getContext("2d");if(!b){throw"Unable to get 2d context from canvas"}b.canvas.width=y;b.canvas.height=A;b.drawImage(a,0,0,r,u,w,w,l,d);try{t.qrcode.decodeRobustlyAsync(I).then((function(r){i(O.createFromQrcodeResult(r))})).catch(e)}catch(r){e("QR code parse error, error = ".concat(r))}};a.onerror=e;a.onabort=e;a.onstalled=e;a.onsuspend=e;a.src=URL.createObjectURL(r)}))};r.prototype.clear=function(){this.clearElement()};r.getCameras=function(){return hr.retrieve()};r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()};r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()};r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()};r.prototype.applyVideoConstraints=function(r){if(!r){throw"videoConstaints is required argument."}else if(!x.isMediaStreamConstraintsValid(r,this.logger)){throw"invalid videoConstaints passed, check logs for more details"}return this.getRenderedCameraOrFail().applyVideoConstraints(r)};r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null){throw"Scanning is not in running state, call this API only when"+" QR code scanning using camera is in running state."}return this.renderedCamera};r.prototype.getSupportedFormats=function(r){var n=[m.QR_CODE,m.AZTEC,m.CODABAR,m.CODE_39,m.CODE_93,m.CODE_128,m.DATA_MATRIX,m.MAXICODE,m.ITF,m.EAN_13,m.EAN_8,m.PDF_417,m.RSS_14,m.RSS_EXPANDED,m.UPC_A,m.UPC_E,m.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"){return n}if(!r.formatsToSupport){return n}if(!Array.isArray(r.formatsToSupport)){throw"configOrVerbosityFlag.formatsToSupport should be undefined "+"or an array."}if(r.formatsToSupport.length===0){throw"Atleast 1 formatsToSupport is needed."}var t=[];for(var i=0,e=r.formatsToSupport;i<e.length;i++){var a=e[i];if(S(a)){t.push(a)}else{this.logger.warn("Invalid format: ".concat(a," passed in config, ignoring."))}}if(t.length===0){throw"None of formatsToSupport match supported values."}return t};r.prototype.getUseBarCodeDetectorIfSupported=function(r){if(D(r)){return true}if(!D(r.useBarCodeDetectorIfSupported)){return r.useBarCodeDetectorIfSupported!==false}if(D(r.experimentalFeatures)){return true}var n=r.experimentalFeatures;if(D(n.useBarCodeDetectorIfSupported)){return true}return n.useBarCodeDetectorIfSupported!==false};r.prototype.validateQrboxSize=function(r,n,t){var i=this;var e=t.qrbox;this.validateQrboxConfig(e);var a=this.toQrdimensions(r,n,e);var u=function(r){if(r<yr.MIN_QR_BOX_SIZE){throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(yr.MIN_QR_BOX_SIZE,"px.")}};var f=function(n){if(n>r){i.logger.warn("`qrbox.width` or `qrbox` is larger than the"+" width of the root element. The width will be truncated"+" to the width of root element.");n=r}return n};u(a.width);u(a.height);a.width=f(a.width)};r.prototype.validateQrboxConfig=function(r){if(typeof r==="number"){return}if(typeof r==="function"){return}if(r.width===undefined||r.height===undefined){throw"Invalid instance of QrDimensions passed for "+"'config.qrbox'. Both 'width' and 'height' should be set."}};r.prototype.toQrdimensions=function(r,n,t){if(typeof t==="number"){return{width:t,height:t}}else if(typeof t==="function"){try{return t(r,n)}catch(r){throw new Error("qrbox config was passed as a function but it failed with "+"unknown error"+r)}}return t};r.prototype.setupUi=function(r,n,t){if(t.isShadedBoxEnabled()){this.validateQrboxSize(r,n,t)}var i=D(t.qrbox)?{width:r,height:n}:t.qrbox;this.validateQrboxConfig(i);var e=this.toQrdimensions(r,n,i);if(e.height>n){this.logger.warn("[Html5Qrcode] config.qrbox has height that is"+"greater than the height of the video stream. Shading will be"+" ignored")}var a=t.isShadedBoxEnabled()&&e.height<=n;var u={x:0,y:0,width:r,height:n};var f=a?this.getShadedRegionBounds(r,n,e):u;var s=this.createCanvasElement(f.width,f.height);var o={willReadFrequently:true};var h=s.getContext("2d",o);h.canvas.width=f.width;h.canvas.height=f.height;this.element.append(s);if(a){this.possiblyInsertShadingElement(this.element,r,n,e)}this.createScannerPausedUiElement(this.element);this.qrRegion=f;this.context=h;this.canvasElement=s};r.prototype.createScannerPausedUiElement=function(r){var n=document.createElement("div");n.innerText=U.scannerPaused();n.style.display="none";n.style.position="absolute";n.style.top="0px";n.style.zIndex="1";n.style.background="rgba(9, 9, 9, 0.46)";n.style.color="#FFECEC";n.style.textAlign="center";n.style.width="100%";r.appendChild(n);this.scannerPausedUiElement=n};r.prototype.scanContext=function(r,n){var t=this;if(this.stateManagerProxy.isPaused()){return Promise.resolve(false)}return this.qrcode.decodeAsync(this.canvasElement).then((function(n){r(n.text,O.createFromQrcodeResult(n));t.possiblyUpdateShaders(true);return true})).catch((function(r){t.possiblyUpdateShaders(false);var i=U.codeParseError(r);n(i,R.createFrom(i));return false}))};r.prototype.foreverScan=function(r,n,t){var i=this;if(!this.shouldScan){return}if(!this.renderedCamera){return}var e=this.renderedCamera.getSurface();var a=e.videoWidth/e.clientWidth;var u=e.videoHeight/e.clientHeight;if(!this.qrRegion){throw"qrRegion undefined when localMediaStream is ready."}var f=this.qrRegion.width*a;var s=this.qrRegion.height*u;var o=this.qrRegion.x*a;var h=this.qrRegion.y*u;this.context.drawImage(e,o,h,f,s,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){i.foreverScanTimeout=setTimeout((function(){i.foreverScan(r,n,t)}),i.getTimeoutFps(r.fps))};this.scanContext(n,t).then((function(e){if(!e&&r.disableFlip!==true){i.context.translate(i.context.canvas.width,0);i.context.scale(-1,1);i.scanContext(n,t).finally((function(){v()}))}else{v()}})).catch((function(r){i.logger.logError("Error happend while scanning context",r);v()}))};r.prototype.createVideoConstraints=function(r){if(typeof r=="string"){return{deviceId:{exact:r}}}else if(typeof r=="object"){var n="facingMode";var t="deviceId";var i={user:true,environment:true};var e="exact";var a=function(r){if(r in i){return true}else{throw"config has invalid 'facingMode' value = "+"'".concat(r,"'")}};var u=Object.keys(r);if(u.length!==1){throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(u.length," keys")}var f=Object.keys(r)[0];if(f!==n&&f!==t){throw"Only '".concat(n,"' and '").concat(t,"' ")+" are supported for 'cameraIdOrConfig'"}if(f===n){var s=r.facingMode;if(typeof s=="string"){if(a(s)){return{facingMode:s}}}else if(typeof s=="object"){if(e in s){if(a(s["".concat(e)])){return{facingMode:{exact:s["".concat(e)]}}}}else{throw"'facingMode' should be string or object with"+" ".concat(e," as key.")}}else{var o=typeof s;throw"Invalid type of 'facingMode' = ".concat(o)}}else{var h=r.deviceId;if(typeof h=="string"){return{deviceId:h}}else if(typeof h=="object"){if(e in h){return{deviceId:{exact:h["".concat(e)]}}}else{throw"'deviceId' should be string or object with"+" ".concat(e," as key.")}}else{var v=typeof h;throw"Invalid type of 'deviceId' = ".concat(v)}}}var c=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(c)};r.prototype.computeCanvasDrawConfig=function(r,n,t,i){if(r<=t&&n<=i){var e=(t-r)/2;var a=(i-n)/2;return{x:e,y:a,width:r,height:n}}else{var u=r;var f=n;if(r>t){n=t/r*n;r=t}if(n>i){r=i/n*r;n=i}this.logger.log("Image downsampled from "+"".concat(u,"X").concat(f)+" to ".concat(r,"X").concat(n,"."));return this.computeCanvasDrawConfig(r,n,t,i)}};r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning()){throw"Cannot clear while scan is ongoing, close it first."}var r=document.getElementById(this.elementId);if(r){r.innerHTML=""}};r.prototype.possiblyUpdateShaders=function(r){if(this.qrMatch===r){return}if(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length){this.borderShaders.forEach((function(n){n.style.backgroundColor=r?yr.BORDER_SHADER_MATCH_COLOR:yr.BORDER_SHADER_DEFAULT_COLOR}))}this.qrMatch=r};r.prototype.possiblyCloseLastScanImageFile=function(){if(this.lastScanImageFile){URL.revokeObjectURL(this.lastScanImageFile);this.lastScanImageFile=null}};r.prototype.createCanvasElement=function(r,n,t){var i=r;var e=n;var a=document.createElement("canvas");a.style.width="".concat(i,"px");a.style.height="".concat(e,"px");a.style.display="none";a.id=D(t)?"qr-canvas":t;return a};r.prototype.getShadedRegionBounds=function(r,n,t){if(t.width>r||t.height>n){throw"'config.qrbox' dimensions should not be greater than the "+"dimensions of the root HTML element."}return{x:(r-t.width)/2,y:(n-t.height)/2,width:t.width,height:t.height}};r.prototype.possiblyInsertShadingElement=function(r,n,t,i){if(n-i.width<1||t-i.height<1){return}var e=document.createElement("div");e.style.position="absolute";var a=(n-i.width)/2;var u=(t-i.height)/2;e.style.borderLeft="".concat(a,"px solid rgba(0, 0, 0, 0.48)");e.style.borderRight="".concat(a,"px solid rgba(0, 0, 0, 0.48)");e.style.borderTop="".concat(u,"px solid rgba(0, 0, 0, 0.48)");e.style.borderBottom="".concat(u,"px solid rgba(0, 0, 0, 0.48)");e.style.boxSizing="border-box";e.style.top="0px";e.style.bottom="0px";e.style.left="0px";e.style.right="0px";e.id="".concat(yr.SHADED_REGION_ELEMENT_ID);if(n-i.width<11||t-i.height<11){this.hasBorderShaders=false}else{var f=5;var s=40;this.insertShaderBorders(e,s,f,-f,null,0,true);this.insertShaderBorders(e,s,f,-f,null,0,false);this.insertShaderBorders(e,s,f,null,-f,0,true);this.insertShaderBorders(e,s,f,null,-f,0,false);this.insertShaderBorders(e,f,s+f,-f,null,-f,true);this.insertShaderBorders(e,f,s+f,null,-f,-f,true);this.insertShaderBorders(e,f,s+f,-f,null,-f,false);this.insertShaderBorders(e,f,s+f,null,-f,-f,false);this.hasBorderShaders=true}r.append(e)};r.prototype.insertShaderBorders=function(r,n,t,i,e,a,u){var f=document.createElement("div");f.style.position="absolute";f.style.backgroundColor=yr.BORDER_SHADER_DEFAULT_COLOR;f.style.width="".concat(n,"px");f.style.height="".concat(t,"px");if(i!==null){f.style.top="".concat(i,"px")}if(e!==null){f.style.bottom="".concat(e,"px")}if(u){f.style.left="".concat(a,"px")}else{f.style.right="".concat(a,"px")}if(!this.borderShaders){this.borderShaders=[]}this.borderShaders.push(f);r.appendChild(f)};r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement){throw"[internal error] scanner paused UI element not found"}this.scannerPausedUiElement.style.display="block"};r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement){throw"[internal error] scanner paused UI element not found"}this.scannerPausedUiElement.style.display="none"};r.prototype.getTimeoutFps=function(r){return 1e3/r};return r}();var br;(function(r){r[r["STATUS_DEFAULT"]=0]="STATUS_DEFAULT";r[r["STATUS_SUCCESS"]=1]="STATUS_SUCCESS";r[r["STATUS_WARNING"]=2]="STATUS_WARNING";r[r["STATUS_REQUESTING_PERMISSION"]=3]="STATUS_REQUESTING_PERMISSION"})(br||(br={}));var pr="ch-barcode-scanner{display:grid;position:relative;inline-size:100%;overflow:hidden;overflow:clip}ch-barcode-scanner>.ch-barcode-scanner-absolute{display:grid;align-self:center;position:absolute;inline-size:100%}";var Mr=pr;var _r=0;var mr={FrontCamera:{facingMode:{exact:"user"}},BackCamera:{facingMode:{exact:"environment"}}};var kr=r("ch_barcode_scanner",(_=function(){function r(r){var i=this;a.set(this,null);u.set(this,null);f.set(this,true);s.set(this,void 0);o.set(this,void 0);h.set(this,false);v.set(this,void 0);c.set(this,void 0);w.set(this,void 0);l.set(this,void 0);d.set(this,(function(r){var n=new Date;if(__classPrivateFieldGet(i,w,"f")===r){var t=n.getTime()-__classPrivateFieldGet(i,l,"f").getTime();if(t<i.readDebounce){__classPrivateFieldSet(i,l,n,"f");return}}__classPrivateFieldSet(i,w,r,"f");__classPrivateFieldSet(i,l,n,"f");i.read.emit(r)}));y.set(this,(function(){if(!__classPrivateFieldGet(i,a,"f")){return}if(__classPrivateFieldGet(i,f,"f")){__classPrivateFieldSet(i,f,false,"f");return}if(__classPrivateFieldGet(i,a,"f").getState()!==vr.SCANNING){return}clearTimeout(__classPrivateFieldGet(i,s,"f"));__classPrivateFieldSet(i,s,setTimeout(__classPrivateFieldGet(i,A,"f"),75),"f")}));A.set(this,(function(){var r=i.el.clientWidth/i.el.clientHeight;__classPrivateFieldSet(i,a,new Ir(__classPrivateFieldGet(i,u,"f")),"f");__classPrivateFieldGet(i,a,"f").start(__classPrivateFieldGet(i,c,"f"),{fps:30,qrbox:{width:i.barcodeBoxWidth,height:i.barcodeBoxHeight},aspectRatio:Math.max(1,r)},__classPrivateFieldGet(i,d,"f"),(function(){}))}));I.set(this,(function(){if(__classPrivateFieldGet(i,a,"f")){__classPrivateFieldGet(i,a,"f").stop()}if(__classPrivateFieldGet(i,o,"f")){__classPrivateFieldGet(i,o,"f").disconnect();__classPrivateFieldSet(i,o,null,"f")}}));b.set(this,(function(){var r;__classPrivateFieldSet(i,o,(r=__classPrivateFieldGet(i,o,"f"))!==null&&r!==void 0?r:new ResizeObserver(__classPrivateFieldGet(i,y,"f")),"f");__classPrivateFieldGet(i,o,"f").observe(i.el)}));p.set(this,(function(){if(i.cameraId){__classPrivateFieldSet(i,c,i.cameraId,"f");return}__classPrivateFieldSet(i,c,i.cameraPreference==="Default"?__classPrivateFieldGet(i,v,"f")[0]:mr[i.cameraPreference],"f")}));M.set(this,(function(r){if(!r){return}if(__classPrivateFieldGet(i,v,"f")==null||__classPrivateFieldGet(i,v,"f").length===0){return}__classPrivateFieldGet(i,p,"f").call(i);__classPrivateFieldGet(i,A,"f").call(i);__classPrivateFieldGet(i,b,"f").call(i)}));n(this,r);this.cameras=t(this,"cameras",7);this.read=t(this,"read",7);this.barcodeBoxWidth=200;this.barcodeBoxHeight=200;this.cameraId=undefined;this.cameraPreference="Default";this.readDebounce=200;this.scanning=true}Object.defineProperty(r.prototype,"el",{get:function(){return i(this)},enumerable:false,configurable:true});r.prototype.cameraChange=function(){__classPrivateFieldSet(this,h,true,"f")};r.prototype.scanningChange=function(r){if(r){__classPrivateFieldGet(this,M,"f").call(this,r)}else{__classPrivateFieldGet(this,I,"f").call(this)}};r.prototype.scan=function(r){return sr(this,void 0,void 0,(function(){var n;return or(this,(function(t){__classPrivateFieldSet(this,a,(n=__classPrivateFieldGet(this,a,"f"))!==null&&n!==void 0?n:new Ir(__classPrivateFieldGet(this,u,"f")),"f");return[2,__classPrivateFieldGet(this,a,"f").scanFile(r)]}))}))};r.prototype.componentWillLoad=function(){__classPrivateFieldSet(this,u,"ch-barcode-scanner-".concat(_r++),"f")};r.prototype.componentWillUpdate=function(){if(__classPrivateFieldGet(this,h,"f")){__classPrivateFieldSet(this,h,false,"f");__classPrivateFieldGet(this,M,"f").call(this,this.scanning)}};r.prototype.componentDidLoad=function(){return sr(this,void 0,void 0,(function(){var r;return or(this,(function(n){switch(n.label){case 0:return[4,Ir.getCameras()];case 1:r=n.sent();__classPrivateFieldSet(this,v,r==null?[]:r.map((function(r){return r.id})),"f");this.cameras.emit(__classPrivateFieldGet(this,v,"f"));__classPrivateFieldGet(this,M,"f").call(this,this.scanning);return[2]}}))}))};r.prototype.disconnectedCallback=function(){__classPrivateFieldGet(this,I,"f").call(this)};r.prototype.render=function(){return e("div",{key:"a0cb5149ff2fa3bd916fe998f414176c2496ec33",class:"ch-barcode-scanner-absolute"},e("div",{key:"a3e19a6228b72a5fd0473932e61148ce6d5b34f5",id:__classPrivateFieldGet(this,u,"f")}))};Object.defineProperty(r,"watchers",{get:function(){return{cameraId:["cameraChange"],scanning:["scanningChange"]}},enumerable:false,configurable:true});return r}(),a=new WeakMap,u=new WeakMap,f=new WeakMap,s=new WeakMap,o=new WeakMap,h=new WeakMap,v=new WeakMap,c=new WeakMap,w=new WeakMap,l=new WeakMap,d=new WeakMap,y=new WeakMap,A=new WeakMap,I=new WeakMap,b=new WeakMap,p=new WeakMap,M=new WeakMap,_));kr.style=Mr}}}));
//# sourceMappingURL=p-bc28a273.system.entry.js.map