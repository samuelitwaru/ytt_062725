import{r as t,c as s,g as i,f as e,h as n,H as a}from"./p-7af91c05.js";import{i as r,t as o,b as l,e as h}from"./p-0978aac4.js";import{C as c,P as d,a as u,D as m,L as p,b as f,c as g,d as b,e as v,f as w,g as k,S as x}from"./p-fdd5c42c.js";import{r as y,i as z}from"./p-23a9d308.js";import{f as S}from"./p-b3df8b9e.js";const C=':where(button){all:unset;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer}*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{--ch-list-transition-duration:150ms;--ch-list-mask-image-size:100%;--ch-list-image-size:18px;display:grid;block-size:100%}:host(.ch-list-direction--block){grid-template-rows:-webkit-max-content 1fr;grid-template-rows:max-content 1fr}:host(.ch-list-direction--inline){grid-template-columns:-webkit-max-content 1fr;grid-template-columns:max-content 1fr}.sortable{-webkit-user-drag:element}.caption-image,.decorative-image::before{display:block;block-size:var(--ch-list-image-size);inline-size:var(--ch-list-image-size)}.decorative-image::before{content:"";-webkit-mask:var(--ch-list-decorative-image) 50% 50%/var(--ch-list-mask-image-size) var(--ch-list-mask-image-size) no-repeat;background-color:currentColor}.close-button::after{content:"";display:-ms-flexbox;display:flex;block-size:1em;inline-size:1em;-webkit-mask:url(\'data:image/svg+xml,<svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M2 2L15.5 15.5" stroke="white" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.5 2L2 15.5" stroke="white" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>\') 50% 50%/0.75em 0.75em no-repeat;background-color:currentColor;opacity:0}.button{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}.button:hover>.close-button::after,.button:focus-within>.close-button::after,.button[aria-selected=true]>.close-button::after{opacity:1}.dragged-element{opacity:0}.dragged-element--outside{display:none}.drag-preview{--ch-list-snap-drag-preview:clamp(\n    var(--ch-list-tab-list-start),\n    var(--ch-list-mouse-position),\n    var(--ch-list-tab-list-end)\n  );position:fixed;left:0;top:0;z-index:108}.drag-preview:popover-open{padding:0;margin:0;border:unset;color:unset;inset:unset;left:0;top:0;pointer-events:none}.drag-preview-element{cursor:-webkit-grabbing;cursor:grabbing}.drag-preview--outside-tab-list{-webkit-transform:translate(calc(var(--ch-list-mouse-position-x) - var(--ch-list-mouse-offset-x)), calc(var(--ch-list-mouse-position-y) - var(--ch-list-mouse-offset-y)));transform:translate(calc(var(--ch-list-mouse-position-x) - var(--ch-list-mouse-offset-x)), calc(var(--ch-list-mouse-position-y) - var(--ch-list-mouse-offset-y)))}.drag-preview--inside-tab-list__block{--ch-list-mouse-position:calc(\n    var(--ch-list-mouse-position-x) - var(--ch-list-mouse-offset-x)\n  );-webkit-transform:translate(var(--ch-list-snap-drag-preview), var(--ch-list-button-position-y));transform:translate(var(--ch-list-snap-drag-preview), var(--ch-list-button-position-y))}.drag-preview--inside-tab-list__inline{--ch-list-mouse-position:calc(\n    var(--ch-list-mouse-position-y) - var(--ch-list-mouse-offset-y)\n  );-webkit-transform:translate(var(--ch-list-button-position-x), var(--ch-list-snap-drag-preview));transform:translate(var(--ch-list-button-position-x), var(--ch-list-snap-drag-preview))}.shifted-element{-webkit-transition:-webkit-transform var(--ch-list-transition-duration);transition:-webkit-transform var(--ch-list-transition-duration);transition:transform var(--ch-list-transition-duration);transition:transform var(--ch-list-transition-duration), -webkit-transform var(--ch-list-transition-duration)}:host(.ch-list-direction--block) .shifted-element--start{-webkit-transform:translate(calc(var(--ch-list-button-size) * -1), 0);transform:translate(calc(var(--ch-list-button-size) * -1), 0)}:host(.ch-list-direction--block) .shifted-element--end{-webkit-transform:translate(var(--ch-list-button-size), 0);transform:translate(var(--ch-list-button-size), 0)}:host(.ch-list-direction--inline) .shifted-element--start{-webkit-transform:translateY(calc(var(--ch-list-button-size) * -1));transform:translateY(calc(var(--ch-list-button-size) * -1))}:host(.ch-list-direction--inline) .shifted-element--end{-webkit-transform:translateY(var(--ch-list-button-size));transform:translateY(var(--ch-list-button-size))}:host([direction=inline])>.tab-list{display:grid;grid-auto-flow:row;grid-auto-rows:-webkit-max-content;grid-auto-rows:max-content}:host([direction=block])>.tab-list{display:grid;grid-auto-flow:column;grid-auto-columns:-webkit-max-content;grid-auto-columns:max-content}.page{contain:strict;display:grid}.page-container{display:grid;grid-template:"selected" 1fr/1fr;block-size:100%;inline-size:100%}.page--selected{grid-area:selected}@supports (content-visibility: hidden){.page-container--collapsed,.page--hidden{content-visibility:hidden}.page-container--collapsed{inline-size:0}}@supports not (content-visibility: hidden){.page-container--collapsed,.page--hidden{display:none}}';const I=C;const D="--ch-list-transition-duration";const P="--ch-list-button-position-x";const j="--ch-list-button-position-y";const A="--ch-list-button-size";const E="--ch-list-mouse-offset-x";const L="--ch-list-mouse-offset-y";const R="--ch-list-mouse-position-x";const M="--ch-list-mouse-position-y";const F="--ch-list-tab-list-start";const T="--ch-list-tab-list-end";const V="--ch-list-decorative-image";const _="ArrowUp";const Y="ArrowRight";const $="ArrowDown";const B="ArrowLeft";const G="Home";const H="End";const q=t=>t.querySelector(":scope>button");const K=t=>t.querySelector(":scope>button:last-child");const U=t=>t==="block";const W=(t,s,i)=>t.style.setProperty(s,`${i}px`);const J=(t,s,i)=>{W(t,P,s);W(t,j,i)};const N=(t,s)=>{W(t,A,s)};const O=(t,s,i)=>{W(t,R,s);W(t,M,i)};const Q=(t,s,i)=>{W(t,F,s);W(t,T,i)};const X=(t,s,i,e)=>{const n=s.getBoundingClientRect();const a={xStart:n.x,xEnd:n.x+n.width,yStart:n.y,yEnd:n.y+n.height};if(U(i)){Q(t,a.xStart,a.xEnd-e.width)}else{Q(t,a.yStart,a.yEnd-e.height)}return a};const Z=(t,s,i)=>{W(t,E,s);W(t,L,i)};const tt=()=>document.body.style.setProperty("cursor","grabbing");const st=()=>document.body.style.removeProperty("cursor");const it=(t,s,i,e)=>{e.preventDefault();let n;if(t){n=i.nextElementSibling??q(s)}else{n=i.previousElementSibling??K(s)}n.focus();n.click()};const et=class{constructor(i){t(this,i);this.expandMainGroup=s(this,"expandMainGroup",7);this.itemClose=s(this,"itemClose",7);this.selectedItemChange=s(this,"selectedItemChange",7);this.itemDragStart=s(this,"itemDragStart",7);this.draggedElementIndex=-1;this.draggedElementNewIndex=-1;this.hasCrossedBoundaries=false;this.accessibleName=undefined;this.closeButtonAccessibleName="Close";this.closeButtonHidden=false;this.direction=undefined;this.dragOutsideDisabled=false;this.expanded=true;this.model=undefined;this.selectedId=undefined;this.showCaptions=true;this.sortable=false}#t;#s={};#i={};#e=-1;#n;#a=true;#r=-1;#o;#l;#h=new Set;#c;#d;#u;#m={[_]:(t,s,i)=>{if(t==="block"){return}it(false,this.#d,i,s)},[Y]:(t,s,i)=>{if(t==="inline"){return}it(!l(),this.#d,i,s)},[$]:(t,s,i)=>{if(t==="block"){return}it(true,this.#d,i,s)},[B]:(t,s,i)=>{if(t==="inline"){return}it(l(),this.#d,i,s)},[G]:()=>{const t=q(this.#d);t.focus();t.click()},[H]:()=>{const t=K(this.#d);t.focus();t.click()}};get el(){return i(this)}directionChange(t){this.#p(t)}modelChanged(t){this.#f(t)}handleSelectedIdChange(t){this.#h.add(t)}expandMainGroup;itemClose;selectedItemChange;itemDragStart;async endDragPreview(){this.#g()}async getDraggableViews(){return{mainView:this.el,pageView:this.#u,tabListView:this.#d}}async promoteDragPreviewToTopLayer(){if(this.draggedElementIndex===-1){return}this.#c.popover="manual";this.#c.showPopover()}async removePage(t,s=true){this.#h.delete(t);if(s){e(this)}}#b=(t,s)=>i=>{i.stopPropagation();const e=this.selectedItemChange.emit({lastSelectedIndex:this.#e,newSelectedId:s,newSelectedIndex:t});if(!e.defaultPrevented){this.#e=t;this.selectedId=s}};#f=t=>{(t??[]).forEach((t=>{if(t.wasRendered){this.#h.add(t.id)}}));if(this.selectedId){this.#h.add(this.selectedId)}};#v=t=>s=>{s.preventDefault();this.draggedElementIndex=t;const i=s.clientX;const e=s.clientY;const n=this.direction;const a=U(n)?t=>t.getBoundingClientRect().width:t=>t.getBoundingClientRect().height;this.#o=[...this.#d.children].map(a);const r=s.target.getBoundingClientRect();const o=X(this.el,this.#d,n,r);const l={xStart:r.x,xEnd:r.x+r.width,yStart:r.y,yEnd:r.y+r.height};const h=e-l.yStart;const c=l.yEnd-e;const d=i-l.xStart;const u=l.xEnd-i;if(!this.dragOutsideDisabled){this.#l={xStart:o.xStart-u,xEnd:o.xEnd+d,yStart:o.yStart-c,yEnd:o.yEnd+h}}this.#r=U(n)?i:e;O(this.el,i,e);J(this.el,l.xStart,l.yStart);N(this.el,U(n)?r.width:r.height);Z(this.el,d,h);tt();document.addEventListener("mousemove",this.#w,{capture:true,passive:true});document.addEventListener("mouseup",this.#g,{capture:true})};#g=()=>{cancelAnimationFrame(this.#t);this.#a=true;document.removeEventListener("mousemove",this.#w,{capture:true});document.removeEventListener("mouseup",this.#g,{capture:true});st();const t=!this.hasCrossedBoundaries&&this.draggedElementNewIndex!==this.draggedElementIndex;if(t){const t=y(this.model,this.draggedElementIndex);z(this.model,t,this.draggedElementNewIndex);this.#k()}this.draggedElementIndex=-1;this.draggedElementNewIndex=-1;this.#o=undefined;this.hasCrossedBoundaries=false;this.el.style.removeProperty(D)};#k=()=>{if(this.#e===this.draggedElementIndex){this.#e=this.draggedElementNewIndex}else if(this.draggedElementIndex<this.#e&&this.#e<=this.draggedElementNewIndex){this.#e--}else if(this.#e<this.draggedElementIndex&&this.draggedElementNewIndex<=this.#e){this.#e++}};#w=t=>{this.#n=t;if(!this.#a){return}this.#a=false;this.#t=requestAnimationFrame((()=>{this.#a=true;const t=this.#n.clientX;const s=this.#n.clientY;O(this.el,t,s);if(this.hasCrossedBoundaries){return}const i=this.#l;if(!this.dragOutsideDisabled){const e=h(i.xStart,t,i.xEnd)&&h(i.yStart,s,i.yEnd);if(!e){this.hasCrossedBoundaries=true;this.el.style.setProperty(D,"0s");this.itemDragStart.emit(this.draggedElementIndex);return}}if(this.model.length===1){return}const e=U(this.direction)?t:s;const n=this.#r<e;let a=Math.abs(this.#r-e);let r=this.draggedElementIndex;if(n){while(r<this.model.length-1&&a-this.#o[r+1]/2>0){a-=this.#o[r+1];r++}}else{while(r>0&&a-this.#o[r-1]/2>0){a-=this.#o[r-1];r--}}if(this.draggedElementNewIndex!==r){this.draggedElementNewIndex=r}}))};#x=(t,s)=>i=>{i.preventDefault();i.stopPropagation();this.itemClose.emit({itemIndex:t,itemId:s})};#y=t=>{if(this.model.length<2){return}const s=this.#m[t.code];if(!s){return}const i=S()[0].closest("."+this.#s.BUTTON);s(this.direction,t,i)};#z=t=>t.startImageType==="img"&&t.startImageSrc&&n("img",{"aria-hidden":"true",class:"caption-image "+this.#s.IMAGE,part:this.#i.IMAGE,alt:"",src:t.startImageSrc,loading:"lazy"});#S=t=>n("div",{role:"tablist","aria-label":this.accessibleName,class:this.#s.TAB_LIST,part:this.#i.TAB_LIST,ref:t=>this.#d=t,onKeyDown:this.#y},this.model.map(((s,i)=>n("button",{key:c(s.id),id:c(s.id),role:"tab","aria-controls":d(s.id),"aria-label":!this.showCaptions?s.name:null,"aria-selected":(s.id===this.selectedId).toString(),class:{[this.#s.BUTTON]:true,"decorative-image":r(s.startImageSrc,s.startImageType),"dragged-element":this.draggedElementIndex===i,"dragged-element--outside":this.draggedElementIndex===i&&this.hasCrossedBoundaries&&this.model.length>1,"shifted-element":this.draggedElementIndex!==-1,"shifted-element--start":t&&this.draggedElementIndex<i&&i<=this.draggedElementNewIndex,"shifted-element--end":t&&this.draggedElementNewIndex<=i&&i<this.draggedElementIndex,sortable:this.sortable},part:o({[this.#i.BUTTON]:true,[c(s.id)]:true,[x]:s.id===this.selectedId}),style:r(s.startImageSrc,s.startImageType)?{[V]:`url("${s.startImageSrc}")`}:null,onAuxClick:this.#x(i,s.id),onClick:!(s.id===this.selectedId)?this.#b(i,s.id):null,onDragStart:this.sortable?this.#v(i):null},this.#z(s),this.showCaptions&&s.name,!this.closeButtonHidden&&n("button",{"aria-label":this.closeButtonAccessibleName,class:"close-button",part:u,type:"button",onClick:this.#x(i,s.id)})))));#C=()=>n("div",{class:{[this.#s.PAGE_CONTAINER]:true,"page-container":true,"page-container--collapsed":!this.expanded},part:this.#i.PAGE_CONTAINER,ref:t=>this.#u=t},[...this.#h.keys()].map((t=>n("div",{key:d(t),id:d(t),role:"tabpanel","aria-labelledby":c(t),class:{[this.#s.PAGE]:true,"page--selected":t===this.selectedId,"page--hidden":!(t===this.selectedId)},part:this.#i.PAGE},n("slot",{name:t})))));#I=t=>{const s={[b]:true,[v]:this.hasCrossedBoundaries,[w]:!this.hasCrossedBoundaries&&!U(this.direction),[k]:!this.hasCrossedBoundaries&&U(this.direction)};const i=r(t.startImageSrc,t.startImageType);return n("div",{"aria-hidden":"true",class:s,part:o(s),ref:t=>this.#c=t},n("button",{class:{[this.#s.BUTTON]:true,[m]:true,"decorative-image":i},part:o({[this.#i.BUTTON]:true,[c(t.id)]:true,[m]:true,[x]:t.id===this.selectedId}),style:i?{[V]:`url("${t.startImageSrc}")`}:null},this.#z(t),this.showCaptions&&t.name))};#p=t=>{this.#f(this.model);this.#D(t)};#D=t=>{this.#s=p;this.#i=t==="block"?f:g};componentWillLoad(){this.#p(this.direction)}render(){if(this.model==null||this.model.length===0){return""}const t=this.draggedElementIndex;const s=this.model[t];const i=!this.hasCrossedBoundaries&&this.draggedElementNewIndex!==-1&&this.draggedElementIndex!==this.draggedElementNewIndex;return n(a,{class:`ch-list-direction--${this.direction}`},this.#S(i),this.#C(),t!==-1&&this.#I(s))}static get watchers(){return{direction:["directionChange"],model:["modelChanged"],selectedId:["handleSelectedIdChange"]}}};et.style=I;export{et as ch_list};
//# sourceMappingURL=p-c06c2012.entry.js.map