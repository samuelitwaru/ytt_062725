{"version":3,"names":["chSuggestCss","ChSuggestStyle0","ARROW_DOWN","ARROW_UP","ChSuggest","timeoutReference","keyEventsDictionary","ArrowDown","e","newFocusedItem","this","getNewFocusedItem","currentFocusedItem","nextFocusedItem","focus","scrollListToBottom","ArrowUp","scrollListToTop","textInput","chWindow","slot","valueChanged","selectionChanged","itemSelectedHandler","event","stopPropagation","value","detail","closeWindow","emit","focusChangeAttemptHandler","keyEventHandler","code","el","chSuggestListItemsArray","getChSuggestListItems","currentFocusedItemIndex","findIndex","item","newItemToSetFocusOn","windowClosedHandler","windowHidden","innerHTML","selectInputText","select","evaluateSlotIsEmpty","hidden","firstElementChild","setFocusOnFirstItem","firstItem","querySelector","Array","from","querySelectorAll","direction","getListChild","list","listItems","listChild","length","parentListItems","nextElementSibling","previousElementSibling","nodeName","parent","parentElement","sibling","parentIsList","parentList","handleInput","inputValue","target","clearTimeout","setTimeout","processInputEvent","debounce","handleKeyDown","key","preventDefault","evaluateWindowMaxHeight","viewportHeight","window","innerHeight","documentHeight","document","body","scrollHeight","height","inputBottomPosition","getBoundingClientRect","bottom","scrollY","windowMaxHeight","style","setProperty","partWindow","shadowRoot","scrollTop","onFocusHandler","cursorEnd","setSelectionRange","render","h","Host","class","part","showLabel","label","id","htmlFor","type","ref","onInput","onKeyDown","onFocus","autocomplete","undefined","toString","container","xAlign","yAlign","showHeader","caption","suggestTitle","exportparts","onSlotchange","chSuggestListCss","ChSuggestListStyle0","ChSuggestList","chSuggestListItemCss","ChSuggestListItemStyle0","ChSuggestListItem","itemSelected","focusChangeAttempt","getItemIndexes","chSuggest","itemIndex","suggestListItemsArray","index","listIndex","chSuggestList","chSuggestListsArray","listItemsArray","handleClick","indexes","innerText","description","icon","iconSrc","role","onClick","name"],"sources":["src/components/suggest/ch-suggest.scss?tag=ch-suggest&encapsulation=shadow","src/components/suggest/ch-suggest.tsx","src/components/suggest/suggest-list/ch-suggest-list.scss?tag=ch-suggest-list&encapsulation=shadow","src/components/suggest/suggest-list/ch-suggest-list.tsx","src/components/suggest/suggest-list-item/ch-suggest-list-item.scss?tag=ch-suggest-list-item&encapsulation=shadow","src/components/suggest/suggest-list-item/ch-suggest-list-item.tsx"],"sourcesContent":["@import \"../../common/_base\";\r\n\r\n@include box-sizing();\r\n\r\n:host {\r\n  --window-max-height: none;\r\n  --window-gap: 50px;\r\n}\r\n.main-wrapper {\r\n  display: block;\r\n}\r\n/*label*/\r\n.label-input-wrapper {\r\n  display: flex;\r\n  .input {\r\n    flex: 1;\r\n  }\r\n}\r\n:host([label-position=\"start\"]) {\r\n  .label-input-wrapper {\r\n    flex-direction: row;\r\n  }\r\n}\r\n:host([label-position=\"above\"]) {\r\n  .label-input-wrapper {\r\n    flex-direction: column;\r\n  }\r\n}\r\n/*input*/\r\n.input {\r\n  background-color: unset;\r\n  border: none;\r\n  color: inherit;\r\n  font: inherit;\r\n  margin: 0;\r\n  padding: 0;\r\n  outline: 0;\r\n}\r\n/*window*/\r\n.ch-window-container {\r\n  position: relative;\r\n}\r\nch-window::part(window) {\r\n  width: 100%;\r\n  max-height: calc(var(--window-max-height) - var(--window-gap));\r\n  overflow-y: auto;\r\n}\r\n","/* STENCIL IMPORTS */\r\nimport {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Element,\r\n  Event,\r\n  EventEmitter,\r\n  Listen,\r\n  State,\r\n  Method\r\n} from \"@stencil/core\";\r\n/* OTHER LIBRARIES IMPORTS */\r\n/* CUSTOM IMPORTS */\r\nimport {\r\n  SuggestItemSelectedEvent,\r\n  SuggestItemData,\r\n  FocusChangeAttempt\r\n} from \"./suggest-list-item/ch-suggest-list-item\";\r\nimport { SuggestListData } from \"./suggest-list/ch-suggest-list\";\r\nimport { LabelPosition } from \"../../common/types\";\r\n\r\nconst ARROW_DOWN = \"ArrowDown\";\r\nconst ARROW_UP = \"ArrowUp\";\r\n@Component({\r\n  tag: \"ch-suggest\",\r\n  styleUrl: \"ch-suggest.scss\",\r\n  shadow: { delegatesFocus: true }\r\n})\r\nexport class ChSuggest {\r\n  /*\r\nINDEX:\r\n1.OWN PROPERTIES\r\n2.REFERENCE TO ELEMENTS\r\n3.STATE() VARIABLES\r\n4.PUBLIC PROPERTY API / WATCH'S\r\n5.EVENTS (EMIT)\r\n6.COMPONENT LIFECYCLE EVENTS\r\n7.LISTENERS\r\n8.PUBLIC METHODS API\r\n9.LOCAL METHODS\r\n10.RENDER() FUNCTION\r\n*/\r\n\r\n  // 1.OWN PROPERTIES //\r\n  private timeoutReference;\r\n\r\n  private keyEventsDictionary: {\r\n    [key in ChSuggestKeyDownEvents]: (\r\n      eventData?: FocusChangeAttemptEventData\r\n    ) => void;\r\n  } = {\r\n    ArrowDown: (e: FocusChangeAttemptEventData) => {\r\n      const newFocusedItem = this.getNewFocusedItem(\r\n        e.currentFocusedItem,\r\n        ARROW_DOWN\r\n      );\r\n      const nextFocusedItem = this.getNewFocusedItem(\r\n        newFocusedItem,\r\n        ARROW_DOWN\r\n      );\r\n      newFocusedItem && newFocusedItem.focus();\r\n      if (!nextFocusedItem) {\r\n        /* This is the last item. Adjust window scroll to be at the very bottom*/\r\n        this.scrollListToBottom();\r\n      }\r\n    },\r\n    ArrowUp: (e: FocusChangeAttemptEventData) => {\r\n      const newFocusedItem = this.getNewFocusedItem(\r\n        e.currentFocusedItem,\r\n        ARROW_UP\r\n      );\r\n      const nextFocusedItem = this.getNewFocusedItem(newFocusedItem, ARROW_UP);\r\n      newFocusedItem && newFocusedItem.focus();\r\n      if (!nextFocusedItem) {\r\n        /* This is the first item. Adjust window scroll to be at the very top*/\r\n        this.scrollListToTop();\r\n      }\r\n    }\r\n  };\r\n\r\n  // 2. REFERENCE TO ELEMENTS //\r\n\r\n  private textInput!: HTMLInputElement;\r\n  private chWindow!: HTMLChWindowElement;\r\n  private slot!: HTMLSlotElement;\r\n  @Element() el: HTMLChSuggestElement;\r\n\r\n  // 3.STATE() VARIABLES //\r\n  @State() windowHidden = true;\r\n\r\n  // 4.PUBLIC PROPERTY API / WATCH'S //\r\n\r\n  /**\r\n   * The debounce amount in milliseconds (This is the time the suggest waits after the user has finished typing, to show the suggestions).\r\n   */\r\n  @Prop() readonly debounce: number = 300;\r\n\r\n  /**\r\n   * The label\r\n   */\r\n  @Prop() readonly label: string;\r\n\r\n  /**\r\n   * The label position\r\n   */\r\n  @Prop({ reflect: true }) readonly labelPosition: LabelPosition = \"start\";\r\n\r\n  /**\r\n   * Whether or not to display the label\r\n   */\r\n  @Prop() readonly showLabel: boolean = true;\r\n\r\n  /**\r\n   * This is the suggest value.\r\n   */\r\n  @Prop({ mutable: true }) value: string;\r\n\r\n  /**\r\n   * Wether or not the suggest has a header. The header will show the \"suggestTitle\" if provided, and a close button.\r\n   */\r\n  @Prop() readonly showHeader = false;\r\n\r\n  /**\r\n   * The suggest title (optional). This is not the same as the \"label\", rather, this is the title that will appear inside the dropdown. This title will only be visible if \"showHeader\" is set to true.\r\n   */\r\n  @Prop() readonly suggestTitle: string;\r\n\r\n  /**\r\n   * If true, it will position the cursor at the end when the input is focused.\r\n   */\r\n  @Prop() readonly cursorEnd = false;\r\n\r\n  // 5.EVENTS (EMIT) //\r\n\r\n  /**\r\n   * This event is emitted every time there input events fires, and it emits the actual input value.\r\n   */\r\n  @Event() valueChanged: EventEmitter<string>;\r\n\r\n  /**\r\n   * This event is emitted when an item was selected.\r\n   */\r\n  @Event() selectionChanged: EventEmitter<SuggestItemSelectedEvent>;\r\n\r\n  // 6.COMPONENT LIFECYCLE EVENTS //\r\n\r\n  // 7.LISTENERS //\r\n\r\n  @Listen(\"itemSelected\", { capture: true })\r\n  itemSelectedHandler(event: CustomEvent<SuggestItemSelectedEvent>) {\r\n    event.stopPropagation();\r\n    this.value = event.detail.value;\r\n    this.closeWindow();\r\n    this.selectionChanged.emit(event.detail);\r\n  }\r\n\r\n  @Listen(\"focusChangeAttempt\")\r\n  focusChangeAttemptHandler(event: CustomEvent<FocusChangeAttempt>) {\r\n    const keyEventHandler:\r\n      | ((event?: FocusChangeAttemptEventData) => void)\r\n      | undefined = this.keyEventsDictionary[event.detail.code];\r\n\r\n    if (keyEventHandler) {\r\n      const currentFocusedItem = event.detail.el;\r\n      const chSuggestListItemsArray = this.getChSuggestListItems();\r\n      const currentFocusedItemIndex = chSuggestListItemsArray.findIndex(\r\n        item => {\r\n          return item === currentFocusedItem;\r\n        }\r\n      );\r\n      const newItemToSetFocusOn = null;\r\n\r\n      keyEventHandler({\r\n        event: event.detail,\r\n        currentFocusedItem: currentFocusedItem,\r\n        chSuggestListItemsArray: chSuggestListItemsArray,\r\n        currentFocusedItemIndex: currentFocusedItemIndex,\r\n        newItemToSetFocusOn: newItemToSetFocusOn\r\n      });\r\n    }\r\n  }\r\n\r\n  @Listen(\"windowClosed\")\r\n  windowClosedHandler() {\r\n    this.textInput.focus();\r\n    this.windowHidden = true;\r\n    this.slot.innerHTML = \"\";\r\n  }\r\n\r\n  // 9.PUBLIC METHODS API //\r\n\r\n  /**\r\n   * @description It selects/highlights the input text.\r\n   */\r\n  @Method()\r\n  async selectInputText() {\r\n    this.textInput.focus();\r\n    this.textInput.select();\r\n  }\r\n\r\n  // 10.LOCAL METHODS //\r\n\r\n  private evaluateSlotIsEmpty = () => {\r\n    this.chWindow.hidden = !this.el.firstElementChild;\r\n  };\r\n\r\n  private setFocusOnFirstItem = () => {\r\n    const firstItem = this.el.querySelector(\"ch-suggest-list-item\");\r\n    firstItem && firstItem.focus();\r\n  };\r\n\r\n  private getChSuggestListItems = (): HTMLChSuggestListItemElement[] =>\r\n    Array.from(this.el.querySelectorAll(\"ch-suggest-list-item\"));\r\n\r\n  private getNewFocusedItem = (\r\n    currentFocusedItem: HTMLChSuggestListItemElement,\r\n    direction: typeof ARROW_DOWN | typeof ARROW_UP\r\n  ): HTMLChSuggestListItemElement => {\r\n    /* Helper function that returns the list item that should get focus (the first one, or the last one)*/\r\n    const getListChild = (list: HTMLChSuggestListElement) => {\r\n      const listItems = list.querySelectorAll(\"ch-suggest-list-item\");\r\n      let listChild = listItems && listItems[listItems.length - 1];\r\n      if (direction === ARROW_DOWN) {\r\n        listChild = list.querySelector(\"ch-suggest-list-item\");\r\n      } else {\r\n        const parentListItems = list.querySelectorAll(\"ch-suggest-list-item\");\r\n        listChild =\r\n          parentListItems && parentListItems[parentListItems.length - 1];\r\n      }\r\n      return listChild;\r\n    };\r\n\r\n    if (!currentFocusedItem) {\r\n      // @ts-expect-error: TODO: Fix this error\r\n      return;\r\n    }\r\n    let newFocusedItem =\r\n      direction === ARROW_DOWN\r\n        ? currentFocusedItem.nextElementSibling\r\n        : currentFocusedItem.previousElementSibling;\r\n    if (newFocusedItem?.nodeName === \"CH-SUGGEST-LIST\") {\r\n      newFocusedItem = getListChild(newFocusedItem as HTMLChSuggestListElement);\r\n    } else if (!newFocusedItem) {\r\n      /* this could be the last item of a list, but not the last item*/\r\n      const parent = currentFocusedItem.parentElement;\r\n      const sibling =\r\n        direction === ARROW_DOWN\r\n          ? parent.nextElementSibling\r\n          : parent.previousElementSibling;\r\n      const parentIsList = parent.nodeName === \"CH-SUGGEST-LIST\";\r\n      if (\r\n        parentIsList &&\r\n        sibling &&\r\n        sibling.nodeName === \"CH-SUGGEST-LIST-ITEM\"\r\n      ) {\r\n        newFocusedItem =\r\n          direction === ARROW_DOWN\r\n            ? parent.nextElementSibling\r\n            : parent.previousElementSibling;\r\n      } else if (\r\n        parentIsList &&\r\n        sibling &&\r\n        sibling.nodeName === \"CH-SUGGEST-LIST\"\r\n      ) {\r\n        const parentList =\r\n          direction === ARROW_DOWN\r\n            ? parent.nextElementSibling\r\n            : parent.previousElementSibling;\r\n        let listChild;\r\n        if (direction === ARROW_DOWN) {\r\n          listChild = parentList.querySelector(\"ch-suggest-list-item\");\r\n        } else {\r\n          listChild = getListChild(parentList as HTMLChSuggestListElement);\r\n        }\r\n        newFocusedItem = listChild ? listChild : null;\r\n      }\r\n    }\r\n    return newFocusedItem as HTMLChSuggestListItemElement;\r\n  };\r\n\r\n  /**\r\n   * Every time the input event is triggered, the value of the input is sent to processInputEvent, which is responsible for displaying a window with the suggested options. this.debounce is a delay that, along with clearTimeout, ensures that the window is only shown after the user has stopped typing.\r\n   */\r\n  private handleInput = (e: InputEvent) => {\r\n    const inputValue = (e.target as HTMLInputElement).value;\r\n    this.value = inputValue;\r\n    if (this.timeoutReference) {\r\n      clearTimeout(this.timeoutReference);\r\n    }\r\n    this.timeoutReference = setTimeout(() => {\r\n      this.processInputEvent(inputValue);\r\n    }, this.debounce);\r\n  };\r\n\r\n  private handleKeyDown = (e: KeyboardEvent) => {\r\n    if (e.key === ARROW_DOWN) {\r\n      e.preventDefault();\r\n      this.setFocusOnFirstItem();\r\n    }\r\n  };\r\n\r\n  private evaluateWindowMaxHeight = () => {\r\n    const viewportHeight = window.innerHeight;\r\n    const documentHeight = document.body.scrollHeight;\r\n    const height =\r\n      documentHeight >= viewportHeight ? documentHeight : viewportHeight;\r\n    const inputBottomPosition =\r\n      this.textInput.getBoundingClientRect().bottom + window.scrollY;\r\n    const windowMaxHeight = height - inputBottomPosition + \"px\";\r\n    this.el.style.setProperty(\"--window-max-height\", windowMaxHeight);\r\n  };\r\n\r\n  private scrollListToTop = () => {\r\n    const partWindow =\r\n      this.chWindow.shadowRoot.querySelector(\"[part='window']\");\r\n    partWindow.scrollTop = 0;\r\n  };\r\n\r\n  private scrollListToBottom = () => {\r\n    const partWindow =\r\n      this.chWindow.shadowRoot.querySelector(\"[part='window']\");\r\n    partWindow.scrollTop = partWindow.scrollHeight;\r\n  };\r\n\r\n  private processInputEvent = (inputValue: string) => {\r\n    this.valueChanged.emit(inputValue);\r\n    this.evaluateWindowMaxHeight();\r\n  };\r\n\r\n  private closeWindow = () => {\r\n    this.chWindow.hidden = true;\r\n  };\r\n\r\n  private onFocusHandler = () => {\r\n    if (this.cursorEnd) {\r\n      this.textInput.setSelectionRange(\r\n        this.textInput.value.length,\r\n        this.textInput.value.length\r\n      );\r\n    }\r\n  };\r\n\r\n  // 10.RENDER() FUNCTION //\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"main-wrapper\" part=\"main-wrapper\">\r\n          <div class=\"label-input-wrapper\" part=\"label-input-wrapper\">\r\n            {this.showLabel && this.label && (\r\n              <label id=\"label\" htmlFor=\"input\" part=\"label\">\r\n                {this.label}\r\n              </label>\r\n            )}\r\n            <input\r\n              type=\"text\"\r\n              id=\"input\"\r\n              part=\"input\"\r\n              class=\"input\"\r\n              ref={el => (this.textInput = el as HTMLInputElement)}\r\n              onInput={this.handleInput}\r\n              onKeyDown={this.handleKeyDown}\r\n              onFocus={this.onFocusHandler}\r\n              value={this.value}\r\n              autocomplete=\"off\"\r\n              aria-controls=\"ch-window\"\r\n              aria-label={\r\n                !this.showLabel && this.label ? this.label : undefined\r\n              }\r\n              aria-labelledby={\r\n                this.showLabel && this.label ? \"label\" : undefined\r\n              }\r\n              aria-expanded={this.windowHidden.toString()}\r\n            ></input>\r\n          </div>\r\n\r\n          <ch-window\r\n            id=\"ch-window\"\r\n            container={this.textInput}\r\n            close-on-outside-click\r\n            close-on-escape\r\n            xAlign=\"inside-start\"\r\n            yAlign=\"outside-end\"\r\n            ref={el => (this.chWindow = el as HTMLChWindowElement)}\r\n            showHeader={this.showHeader}\r\n            caption={this.suggestTitle}\r\n            exportparts=\"\r\n            header:header, \r\n            caption:title, \r\n            close:close-button,\r\n            window:dropdown\"\r\n          >\r\n            <slot\r\n              onSlotchange={this.evaluateSlotIsEmpty}\r\n              ref={el => (this.slot = el as HTMLSlotElement)}\r\n            ></slot>\r\n          </ch-window>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n\r\nexport type ChSuggestKeyDownEvents = typeof ARROW_DOWN | typeof ARROW_UP;\r\ntype FocusChangeAttemptEventData = {\r\n  event: FocusChangeAttempt;\r\n  currentFocusedItem: HTMLChSuggestListItemElement;\r\n  chSuggestListItemsArray: HTMLChSuggestListItemElement[];\r\n  currentFocusedItemIndex: number;\r\n  newItemToSetFocusOn: HTMLElement | null;\r\n};\r\n\r\nexport type SuggestData = {\r\n  suggestItems: SuggestItemData[];\r\n  suggestLists: SuggestListData[];\r\n};\r\n","@import \"../../../common/_base\";\r\n\r\n@include box-sizing();\r\n\r\n:host {\r\n  display: block;\r\n}\r\n.title {\r\n  margin: 0;\r\n  font: inherit;\r\n}\r\n.list {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n","import { Component, Host, h, Prop } from \"@stencil/core\";\r\nimport { SuggestItemData } from \"../suggest-list-item/ch-suggest-list-item\";\r\n\r\n@Component({\r\n  tag: \"ch-suggest-list\",\r\n  styleUrl: \"ch-suggest-list.scss\",\r\n  shadow: true\r\n})\r\nexport class ChSuggestList {\r\n  /*\r\nINDEX:\r\n1.OWN PROPERTIES\r\n2.REFERENCE TO ELEMENTS\r\n3.STATE() VARIABLES\r\n4.PUBLIC PROPERTY API / WATCH'S\r\n5.EVENTS (EMIT)\r\n6.COMPONENT LIFECYCLE EVENTS\r\n7.LISTENERS\r\n8.PUBLIC METHODS API\r\n9.LOCAL METHODS\r\n10.RENDER() FUNCTION\r\n*/\r\n\r\n  // 1.OWN PROPERTIES //\r\n\r\n  /**\r\n   * The label\r\n   */\r\n  @Prop() readonly label: string;\r\n\r\n  // 2.REFERENCE TO ELEMENTS //\r\n\r\n  // 3.STATE() VARIABLES //\r\n\r\n  // 4.PUBLIC PROPERTY API / WATCH'S //\r\n\r\n  // 5.EVENTS (EMIT) //\r\n\r\n  // 6.COMPONENT LIFECYCLE EVENTS //\r\n\r\n  // 7.LISTENERS //\r\n\r\n  // 8.PUBLIC METHODS API //\r\n\r\n  // 9.LOCAL METHODS //\r\n\r\n  // 10.RENDER() FUNCTION //\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {this.label && (\r\n          <h2 id=\"heading\" part=\"title\" class=\"title\">\r\n            {this.label}\r\n          </h2>\r\n        )}\r\n        <ul\r\n          aria-labelledby={this.label ? \"heading\" : undefined}\r\n          part=\"list\"\r\n          class=\"list\"\r\n        >\r\n          <slot></slot>\r\n        </ul>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n\r\nexport type SuggestListData = {\r\n  label: string;\r\n  items: SuggestItemData[];\r\n};\r\n","@import \"../../../common/_base\";\r\n\r\n:host {\r\n  display: block;\r\n}\r\n:where(button) {\r\n  all: unset;\r\n  display: flex;\r\n  width: 100%;\r\n  cursor: pointer;\r\n}\r\n\r\n@include box-sizing();\r\n","/* STENCIL IMPORTS */\r\nimport {\r\n  Component,\r\n  Host,\r\n  h,\r\n  Prop,\r\n  Event,\r\n  EventEmitter,\r\n  Element\r\n} from \"@stencil/core\";\r\n/* OTHER LIBRARIES IMPORTS */\r\n/* CUSTOM IMPORTS */\r\nimport { ChSuggestKeyDownEvents } from \"../ch-suggest\";\r\n\r\nconst ARROW_DOWN = \"ArrowDown\";\r\nconst ARROW_UP = \"ArrowUp\";\r\n@Component({\r\n  tag: \"ch-suggest-list-item\",\r\n  styleUrl: \"ch-suggest-list-item.scss\",\r\n  shadow: { delegatesFocus: true }\r\n})\r\nexport class ChSuggestListItem {\r\n  /*\r\nINDEX:\r\n1.OWN PROPERTIES\r\n2.REFERENCE TO ELEMENTS\r\n3.STATE() VARIABLES\r\n4.PUBLIC PROPERTY API / WATCH'S\r\n5.EVENTS (EMIT)\r\n6.COMPONENT LIFECYCLE EVENTS\r\n7.LISTENERS\r\n8.PUBLIC METHODS API\r\n9.LOCAL METHODS\r\n10.RENDER() FUNCTION\r\n*/\r\n\r\n  // 1.OWN PROPERTIES //\r\n\r\n  /**\r\n   * The icon url\r\n   */\r\n  @Prop() readonly iconSrc: string;\r\n\r\n  /**\r\n   * The item value\r\n   */\r\n  @Prop() readonly value;\r\n\r\n  // 2.REFERENCE TO ELEMENTS //\r\n\r\n  @Element() el: HTMLChSuggestListItemElement;\r\n\r\n  // 3.STATE() VARIABLES //\r\n\r\n  // 4.PUBLIC PROPERTY API / WATCH'S //\r\n\r\n  // 5.EVENTS (EMIT) //\r\n\r\n  /**\r\n   * This event is emitted every time the item is selected, either by clicking on it, or by pressing Enter.\r\n   */\r\n  @Event() itemSelected: EventEmitter<SuggestItemSelectedEvent>;\r\n\r\n  /**\r\n   * This event is emitted every time the item is about to lose focus, by pressing the \"ArrowUp\" or \"ArrowDown\" keyboard keys.\r\n   */\r\n  @Event() focusChangeAttempt: EventEmitter<FocusChangeAttempt>;\r\n\r\n  // 6.COMPONENT LIFECYCLE EVENTS //\r\n\r\n  // 7.LISTENERS //\r\n\r\n  // 8.PUBLIC METHODS API //\r\n\r\n  // 9.LOCAL METHODS //\r\n\r\n  // @ts-expect-error: TODO: Check if the notation in this function is correct\r\n  private getItemIndexes = (): SuggestItemIndexes => {\r\n    const parentElement = this.el.parentElement;\r\n    if (parentElement.nodeName === \"CH-SUGGEST\") {\r\n      const chSuggest = parentElement;\r\n      let itemIndex = -1;\r\n      const suggestListItemsArray = Array.from(\r\n        chSuggest.querySelectorAll(\":scope > ch-suggest-list-item\")\r\n      );\r\n      for (let index = 0; index < suggestListItemsArray.length; index++) {\r\n        // Then get the item index\r\n        if (suggestListItemsArray[index] === this.el) {\r\n          itemIndex = index;\r\n          break;\r\n        }\r\n      }\r\n      return {\r\n        itemIndex: itemIndex,\r\n        listIndex: undefined // the items does not belongs to a list\r\n      };\r\n    }\r\n    if (parentElement.nodeName === \"CH-SUGGEST-LIST\") {\r\n      const chSuggestList = parentElement;\r\n      const chSuggestListsArray = Array.from(\r\n        chSuggestList.parentElement.querySelectorAll(\":scope > ch-suggest-list\")\r\n      );\r\n      const listIndex = chSuggestListsArray.findIndex(list => {\r\n        return list === chSuggestList;\r\n      });\r\n      if (listIndex !== -1) {\r\n        const listItemsArray = Array.from(\r\n          chSuggestList.querySelectorAll(\"ch-suggest-list-item\")\r\n        );\r\n        const itemIndex = listItemsArray.findIndex(item => {\r\n          return item === this.el;\r\n        });\r\n        return {\r\n          itemIndex: itemIndex,\r\n          listIndex: listIndex\r\n        };\r\n      }\r\n    }\r\n  };\r\n\r\n  private handleClick = () => {\r\n    const indexes: SuggestItemIndexes = this.getItemIndexes();\r\n    this.itemSelected.emit({\r\n      value: this.value || this.el.innerText,\r\n      description: this.el.innerText,\r\n      icon: this.iconSrc,\r\n      indexes: indexes\r\n    });\r\n  };\r\n\r\n  private handleKeyDown = (e: KeyboardEvent) => {\r\n    if (e.code === ARROW_UP || e.code === ARROW_DOWN) {\r\n      e.preventDefault();\r\n      this.focusChangeAttempt.emit({\r\n        el: this.el,\r\n        code: e.code\r\n      });\r\n    }\r\n  };\r\n\r\n  // 10.RENDER() FUNCTION //\r\n\r\n  render() {\r\n    return (\r\n      <Host role=\"listitem\" onKeyDown={this.handleKeyDown}>\r\n        <button part=\"button\" onClick={this.handleClick}>\r\n          <slot name=\"icon\"></slot>\r\n          <div class=\"content-wrapper\" part=\"content-wrapper\">\r\n            <slot></slot>\r\n          </div>\r\n        </button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n\r\nexport type SuggestItemData = {\r\n  value: any;\r\n  description?: string;\r\n  icon?: string;\r\n};\r\n\r\nexport type SuggestItemSelectedEvent = {\r\n  value: any;\r\n  indexes: SuggestItemIndexes;\r\n  description?: string;\r\n  icon?: string;\r\n};\r\n\r\nexport type FocusChangeAttempt = {\r\n  el: HTMLChSuggestListItemElement;\r\n  code: ChSuggestKeyDownEvents;\r\n};\r\n\r\nexport type SuggestItemIndexes = {\r\n  itemIndex: number;\r\n  listIndex: number | undefined;\r\n};\r\n"],"mappings":"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"}