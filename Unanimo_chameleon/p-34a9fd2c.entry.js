import{r as t,c as e,g as s,h as i,H as n}from"./p-7af91c05.js";const o="*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{--window-max-height:none;--window-gap:50px}.main-wrapper{display:block}.label-input-wrapper{display:-ms-flexbox;display:flex}.label-input-wrapper .input{-ms-flex:1;flex:1}:host([label-position=start]) .label-input-wrapper{-ms-flex-direction:row;flex-direction:row}:host([label-position=above]) .label-input-wrapper{-ms-flex-direction:column;flex-direction:column}.input{background-color:unset;border:none;color:inherit;font:inherit;margin:0;padding:0;outline:0}.ch-window-container{position:relative}ch-window::part(window){width:100%;max-height:calc(var(--window-max-height) - var(--window-gap));overflow-y:auto}";const a=o;const r="ArrowDown";const c="ArrowUp";const l=class{constructor(s){t(this,s);this.valueChanged=e(this,"valueChanged",7);this.selectionChanged=e(this,"selectionChanged",7);this.windowHidden=true;this.debounce=300;this.label=undefined;this.labelPosition="start";this.showLabel=true;this.value=undefined;this.showHeader=false;this.suggestTitle=undefined;this.cursorEnd=false}timeoutReference;keyEventsDictionary={ArrowDown:t=>{const e=this.getNewFocusedItem(t.currentFocusedItem,r);const s=this.getNewFocusedItem(e,r);e&&e.focus();if(!s){this.scrollListToBottom()}},ArrowUp:t=>{const e=this.getNewFocusedItem(t.currentFocusedItem,c);const s=this.getNewFocusedItem(e,c);e&&e.focus();if(!s){this.scrollListToTop()}}};textInput;chWindow;slot;get el(){return s(this)}valueChanged;selectionChanged;itemSelectedHandler(t){t.stopPropagation();this.value=t.detail.value;this.closeWindow();this.selectionChanged.emit(t.detail)}focusChangeAttemptHandler(t){const e=this.keyEventsDictionary[t.detail.code];if(e){const s=t.detail.el;const i=this.getChSuggestListItems();const n=i.findIndex((t=>t===s));const o=null;e({event:t.detail,currentFocusedItem:s,chSuggestListItemsArray:i,currentFocusedItemIndex:n,newItemToSetFocusOn:o})}}windowClosedHandler(){this.textInput.focus();this.windowHidden=true;this.slot.innerHTML=""}async selectInputText(){this.textInput.focus();this.textInput.select()}evaluateSlotIsEmpty=()=>{this.chWindow.hidden=!this.el.firstElementChild};setFocusOnFirstItem=()=>{const t=this.el.querySelector("ch-suggest-list-item");t&&t.focus()};getChSuggestListItems=()=>Array.from(this.el.querySelectorAll("ch-suggest-list-item"));getNewFocusedItem=(t,e)=>{const s=t=>{const s=t.querySelectorAll("ch-suggest-list-item");let i=s&&s[s.length-1];if(e===r){i=t.querySelector("ch-suggest-list-item")}else{const e=t.querySelectorAll("ch-suggest-list-item");i=e&&e[e.length-1]}return i};if(!t){return}let i=e===r?t.nextElementSibling:t.previousElementSibling;if(i?.nodeName==="CH-SUGGEST-LIST"){i=s(i)}else if(!i){const n=t.parentElement;const o=e===r?n.nextElementSibling:n.previousElementSibling;const a=n.nodeName==="CH-SUGGEST-LIST";if(a&&o&&o.nodeName==="CH-SUGGEST-LIST-ITEM"){i=e===r?n.nextElementSibling:n.previousElementSibling}else if(a&&o&&o.nodeName==="CH-SUGGEST-LIST"){const t=e===r?n.nextElementSibling:n.previousElementSibling;let o;if(e===r){o=t.querySelector("ch-suggest-list-item")}else{o=s(t)}i=o?o:null}}return i};handleInput=t=>{const e=t.target.value;this.value=e;if(this.timeoutReference){clearTimeout(this.timeoutReference)}this.timeoutReference=setTimeout((()=>{this.processInputEvent(e)}),this.debounce)};handleKeyDown=t=>{if(t.key===r){t.preventDefault();this.setFocusOnFirstItem()}};evaluateWindowMaxHeight=()=>{const t=window.innerHeight;const e=document.body.scrollHeight;const s=e>=t?e:t;const i=this.textInput.getBoundingClientRect().bottom+window.scrollY;const n=s-i+"px";this.el.style.setProperty("--window-max-height",n)};scrollListToTop=()=>{const t=this.chWindow.shadowRoot.querySelector("[part='window']");t.scrollTop=0};scrollListToBottom=()=>{const t=this.chWindow.shadowRoot.querySelector("[part='window']");t.scrollTop=t.scrollHeight};processInputEvent=t=>{this.valueChanged.emit(t);this.evaluateWindowMaxHeight()};closeWindow=()=>{this.chWindow.hidden=true};onFocusHandler=()=>{if(this.cursorEnd){this.textInput.setSelectionRange(this.textInput.value.length,this.textInput.value.length)}};render(){return i(n,{key:"f23e85d93ab9abc342d319e20684fac37240ec6f"},i("div",{key:"e0144bf6fb171bf12087a69c02a36394f34c0852",class:"main-wrapper",part:"main-wrapper"},i("div",{key:"596758f2ce406eb650d4e124e3ca0ab2eba0ba4a",class:"label-input-wrapper",part:"label-input-wrapper"},this.showLabel&&this.label&&i("label",{key:"732c8676c1731830ea8ffc989782621321094232",id:"label",htmlFor:"input",part:"label"},this.label),i("input",{key:"0645daae74474e8c74e7d303698f24116cc70f78",type:"text",id:"input",part:"input",class:"input",ref:t=>this.textInput=t,onInput:this.handleInput,onKeyDown:this.handleKeyDown,onFocus:this.onFocusHandler,value:this.value,autocomplete:"off","aria-controls":"ch-window","aria-label":!this.showLabel&&this.label?this.label:undefined,"aria-labelledby":this.showLabel&&this.label?"label":undefined,"aria-expanded":this.windowHidden.toString()})),i("ch-window",{key:"9143242d3e939f06372b242d5c66aac4932082e1",id:"ch-window",container:this.textInput,"close-on-outside-click":true,"close-on-escape":true,xAlign:"inside-start",yAlign:"outside-end",ref:t=>this.chWindow=t,showHeader:this.showHeader,caption:this.suggestTitle,exportparts:"\r\n            header:header, \r\n            caption:title, \r\n            close:close-button,\r\n            window:dropdown"},i("slot",{key:"af5994e9848b13754fa4de98c80f2a6b9b11bb9a",onSlotchange:this.evaluateSlotIsEmpty,ref:t=>this.slot=t}))))}static get delegatesFocus(){return true}};l.style=a;const h="*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block}.title{margin:0;font:inherit}.list{margin:0;padding:0}";const d=h;const f=class{constructor(e){t(this,e);this.label=undefined}render(){return i(n,{key:"6f271741eba4ec5f87297c62630a0df6a73a1435"},this.label&&i("h2",{key:"960a1f0e10dcfd8292da219268e93d59297f3eab",id:"heading",part:"title",class:"title"},this.label),i("ul",{key:"6fdf1ba0d9b625ac50e28133fe745afd2d795d8c","aria-labelledby":this.label?"heading":undefined,part:"list",class:"list"},i("slot",{key:"d0565fb5b6be96c51a96499b77293d25645ec042"})))}};f.style=d;const u=":host{display:block}:where(button){all:unset;display:-ms-flexbox;display:flex;width:100%;cursor:pointer}*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}";const b=u;const p="ArrowDown";const w="ArrowUp";const g=class{constructor(s){t(this,s);this.itemSelected=e(this,"itemSelected",7);this.focusChangeAttempt=e(this,"focusChangeAttempt",7);this.iconSrc=undefined;this.value=undefined}get el(){return s(this)}itemSelected;focusChangeAttempt;getItemIndexes=()=>{const t=this.el.parentElement;if(t.nodeName==="CH-SUGGEST"){const e=t;let s=-1;const i=Array.from(e.querySelectorAll(":scope > ch-suggest-list-item"));for(let t=0;t<i.length;t++){if(i[t]===this.el){s=t;break}}return{itemIndex:s,listIndex:undefined}}if(t.nodeName==="CH-SUGGEST-LIST"){const e=t;const s=Array.from(e.parentElement.querySelectorAll(":scope > ch-suggest-list"));const i=s.findIndex((t=>t===e));if(i!==-1){const t=Array.from(e.querySelectorAll("ch-suggest-list-item"));const s=t.findIndex((t=>t===this.el));return{itemIndex:s,listIndex:i}}}};handleClick=()=>{const t=this.getItemIndexes();this.itemSelected.emit({value:this.value||this.el.innerText,description:this.el.innerText,icon:this.iconSrc,indexes:t})};handleKeyDown=t=>{if(t.code===w||t.code===p){t.preventDefault();this.focusChangeAttempt.emit({el:this.el,code:t.code})}};render(){return i(n,{key:"d18b0a33fcb4630afe5164cfe2ea147ba7881f71",role:"listitem",onKeyDown:this.handleKeyDown},i("button",{key:"7b550df2ba6d1f9bb56137f6adfc706f8e8952e4",part:"button",onClick:this.handleClick},i("slot",{key:"81c6162926feb6b9d9a0fe94d25c77130a276a87",name:"icon"}),i("div",{key:"7e2f60ef17f4f049e622a40fb6b9e6bc6ffac4f8",class:"content-wrapper",part:"content-wrapper"},i("slot",{key:"a80dabe0e52a71579418265d2f928b24b8708c52"}))))}static get delegatesFocus(){return true}};g.style=b;export{l as ch_suggest,f as ch_suggest_list,g as ch_suggest_list_item};
//# sourceMappingURL=p-34a9fd2c.entry.js.map