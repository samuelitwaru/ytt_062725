import{r as t,h as i,H as e}from"./p-7af91c05.js";var s=Object.defineProperty;var n=(t,i,e)=>i in t?s(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e;var o=(t,i,e)=>(n(t,typeof i!="symbol"?i+"":i,e),e);function r(t,i=0){return t[t.length-(1+i)]}function h(t,i,e=((t,i)=>t===i)){if(t===i)return!0;if(!t||!i||t.length!==i.length)return!1;for(let s=0,n=t.length;s<n;s++)if(!e(t[s],i[s]))return!1;return!0}function c(t,i,e){return function(t,i){let e=0,s=t-1;for(;e<=s;){const t=(e+s)/2|0,n=i(t);if(n<0)e=t+1;else{if(!(n>0))return t;s=t-1}}return-(e+1)}(t.length,(s=>e(t[s],i)))}function a(t,i,e){if((t|=0)>=i.length)throw new TypeError("invalid index");const s=i[Math.floor(i.length*Math.random())],n=[],o=[],r=[];for(const t of i){const i=e(t,s);i<0?n.push(t):i>0?o.push(t):r.push(t)}return t<n.length?a(t,n,e):t<n.length+r.length?r[0]:a(t-(n.length+r.length),o,e)}function l(t,i){const e=[];let s;for(const n of t.slice(0).sort(i))s&&i(s[0],n)===0?s.push(n):(s=[n],e.push(s));return e}function*u(t,i){let e,s;for(const n of t)s!==void 0&&i(s,n)?e.push(n):(e&&(yield e),e=[n]),s=n;e&&(yield e)}function d(t,i){for(let e=0;e<=t.length;e++)i(e===0?void 0:t[e-1],e===t.length?void 0:t[e])}function f(t){return t.filter((t=>!!t))}function g(t){let i=0;for(let e=0;e<t.length;e++)t[e]&&(t[i]=t[e],i+=1);t.length=i}function A(t){return!Array.isArray(t)||t.length===0}function p(t){return Array.isArray(t)&&t.length>0}function w(t,i=(t=>t)){const e=new Set;return t.filter((t=>{const s=i(t);return!e.has(s)&&(e.add(s),!0)}))}function m(t,i){return t.length>0?t[0]:i}function v(t,i){let e=typeof i=="number"?t:0;typeof i=="number"?e=t:(e=0,i=t);const s=[];if(e<=i)for(let t=e;t<i;t++)s.push(t);else for(let t=e;t>i;t--)s.push(t);return s}function b(t,i,e){const s=t.slice(0,i),n=t.slice(i);return s.concat(e,n)}function y(t,i){const e=t.indexOf(i);e>-1&&(t.splice(e,1),t.unshift(i))}function k(t,i){const e=t.indexOf(i);e>-1&&(t.splice(e,1),t.push(i))}function x(t,i){for(const e of i)t.push(e)}function C(t){return Array.isArray(t)?t:[t]}function E(t,i,e,s){const n=B(t,i);let o=t.splice(n,e);return o===void 0&&(o=[]),function(t,i,e){const s=B(t,i),n=t.length,o=e.length;t.length=n+o;for(let i=n-1;i>=s;i--)t[i+o]=t[i];for(let i=0;i<o;i++)t[i+s]=e[i]}(t,n,s),o}function B(t,i){return i<0?Math.max(i+t.length,0):Math.min(i,t.length)}var D;function M(t,i){return(e,s)=>i(t(e),t(s))}(function(t){t.isLessThan=function(t){return t<0},t.isLessThanOrEqual=function(t){return t<=0},t.isGreaterThan=function(t){return t>0},t.isNeitherLessOrGreaterThan=function(t){return t===0},t.greaterThan=1,t.lessThan=-1,t.neitherLessOrGreaterThan=0})(D||(D={}));const S=(t,i)=>t-i,F=(t,i)=>S(t?1:0,i?1:0);function I(t){return(i,e)=>-t(i,e)}class L{constructor(t){this.items=t,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(t){let i=this.firstIdx;for(;i<this.items.length&&t(this.items[i]);)i++;const e=i===this.firstIdx?null:this.items.slice(this.firstIdx,i);return this.firstIdx=i,e}takeFromEndWhile(t){let i=this.lastIdx;for(;i>=0&&t(this.items[i]);)i--;const e=i===this.lastIdx?null:this.items.slice(i+1,this.lastIdx+1);return this.lastIdx=i,e}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const t=this.items[this.firstIdx];return this.firstIdx++,t}takeCount(t){const i=this.items.slice(this.firstIdx,this.firstIdx+t);return this.firstIdx+=t,i}}class R{constructor(t){this.iterate=t}toArray(){const t=[];return this.iterate((i=>(t.push(i),!0))),t}filter(t){return new R((i=>this.iterate((e=>!t(e)||i(e)))))}map(t){return new R((i=>this.iterate((e=>i(t(e))))))}findLast(t){let i;return this.iterate((e=>(t(e)&&(i=e),!0))),i}findLastMaxBy(t){let i,e=!0;return this.iterate((s=>((e||D.isGreaterThan(t(s,i)))&&(e=!1,i=s),!0))),i}}R.empty=new R((t=>{}));class T{constructor(t){this._indexMap=t}static createSortPermutation(t,i){const e=Array.from(t.keys()).sort(((e,s)=>i(t[e],t[s])));return new T(e)}apply(t){return t.map(((i,e)=>t[this._indexMap[e]]))}inverse(){const t=this._indexMap.slice();for(let i=0;i<this._indexMap.length;i++)t[this._indexMap[i]]=i;return new T(t)}}function N(t){return typeof t=="string"}function Q(t){return!(typeof t!="object"||t===null||Array.isArray(t)||t instanceof RegExp||t instanceof Date)}function O(t){const i=Object.getPrototypeOf(Uint8Array);return typeof t=="object"&&t instanceof i}function z(t){return typeof t=="number"&&!isNaN(t)}function U(t){return!!t&&typeof t[Symbol.iterator]=="function"}function H(t){return t===!0||t===!1}function P(t){return t===void 0}function j(t){return!W(t)}function W(t){return P(t)||t===null}function Y(t,i){if(!t)throw new Error(i?`Unexpected type, expected '${i}'`:"Unexpected type")}function _(t){if(W(t))throw new Error("Assertion Failed: argument is undefined or null");return t}function V(t){return typeof t=="function"}function J(t,i){if(N(i)){if(typeof t!==i)throw new Error(`argument does not match constraint: typeof ${i}`)}else if(V(i)){try{if(t instanceof i)return}catch{}if(!W(t)&&t.constructor===i||i.length===1&&i.call(void 0,t)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function G(t){if(!t||typeof t!="object"||t instanceof RegExp)return t;const i=Array.isArray(t)?[]:{};return Object.entries(t).forEach((([t,e])=>{i[t]=e&&typeof e=="object"?G(e):e})),i}const K=Object.prototype.hasOwnProperty;function $(t,i){return X(t,i,new Set)}function X(t,i,e){if(W(t))return t;const s=i(t);if(s!==void 0)return s;if(Array.isArray(t)){const s=[];for(const n of t)s.push(X(n,i,e));return s}if(Q(t)){if(e.has(t))throw new Error("Cannot clone recursive data-structure");e.add(t);const s={};for(const n in t)K.call(t,n)&&(s[n]=X(t[n],i,e));return e.delete(t),s}return t}function q(t,i,e=!0){return Q(t)?(Q(i)&&Object.keys(i).forEach((s=>{s in t?e&&(Q(t[s])&&Q(i[s])?q(t[s],i[s],e):t[s]=i[s]):t[s]=i[s]})),t):i}function Z(t,i){if(t===i)return!0;if(t==null||i==null||typeof t!=typeof i||typeof t!="object"||Array.isArray(t)!==Array.isArray(i))return!1;let e,s;if(Array.isArray(t)){if(t.length!==i.length)return!1;for(e=0;e<t.length;e++)if(!Z(t[e],i[e]))return!1}else{const n=[];for(s in t)n.push(s);n.sort();const o=[];for(s in i)o.push(s);if(o.sort(),!Z(n,o))return!1;for(e=0;e<n.length;e++)if(!Z(t[n[e]],i[n[e]]))return!1}return!0}function tt(t){const i=[];for(const e of function(t){let i=[];for(;Object.prototype!==t;)i=i.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return i}(t))typeof t[e]=="function"&&i.push(e);return i}let it=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function et(t,i){let e;return e=i.length===0?t:t.replace(/\{(\d+)\}/g,((t,e)=>{const s=e[0],n=i[s];let o=t;return typeof n=="string"?o=n:typeof n!="number"&&typeof n!="boolean"&&n!=null||(o=String(n)),o})),it&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),e}function st(t,i,...e){return et(i,e)}function nt(t,i,...e){const s=et(i,e);return{value:s,original:s}}var ot,rt;const ht="en";let ct,at,lt=!1,ut=!1,dt=!1,ft=!1,gt=!1,At=!1,pt=!1,wt=ht;const mt=globalThis;let vt;mt.vscode!==void 0&&mt.vscode.process!==void 0?vt=mt.vscode.process:typeof process<"u"&&typeof((ot=process==null?void 0:process.versions)===null||ot===void 0?void 0:ot.node)=="string"&&(vt=process);const bt=typeof((rt=vt==null?void 0:vt.versions)===null||rt===void 0?void 0:rt.electron)=="string"&&(vt==null?void 0:vt.type)==="renderer";if(typeof vt=="object"){lt=vt.platform==="win32",ut=vt.platform==="darwin",dt=vt.platform==="linux",ct=ht,wt=ht;const t=vt.env.VSCODE_NLS_CONFIG;if(t)try{const i=JSON.parse(t),e=i.availableLanguages["*"];ct=i.locale,wt=e||ht}catch{}ft=!0}else typeof navigator!="object"||bt?console.error("Unable to resolve platform."):(at=navigator.userAgent,lt=at.indexOf("Windows")>=0,ut=at.indexOf("Macintosh")>=0,At=(at.indexOf("Macintosh")>=0||at.indexOf("iPad")>=0||at.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,dt=at.indexOf("Linux")>=0,pt=(at==null?void 0:at.indexOf("Mobi"))>=0,gt=!0,st(0,"_"),ct=ht,wt=ct,navigator.language);const yt=lt,kt=ut,xt=dt,Ct=ft,Et=gt,Bt=gt&&typeof mt.importScripts=="function"?mt.origin:void 0,Dt=At,Mt=pt,St=at,Ft=wt,It=typeof mt.postMessage=="function"&&!mt.importScripts,Lt=(()=>{if(It){const t=[];mt.addEventListener("message",(i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let e=0,s=t.length;e<s;e++){const s=t[e];if(s.id===i.data.vscodeScheduleAsyncWork)return t.splice(e,1),void s.callback()}}));let i=0;return e=>{const s=++i;t.push({id:s,callback:e}),mt.postMessage({vscodeScheduleAsyncWork:s},"*")}}return t=>setTimeout(t)})(),Rt=ut||At?2:lt?1:3;let Tt=!0,Nt=!1;function Qt(){if(!Nt){Nt=!0;const t=new Uint8Array(2);t[0]=1,t[1]=2,Tt=new Uint16Array(t.buffer)[0]===513}return Tt}const Ot=!!(St&&St.indexOf("Chrome")>=0),zt=!!(St&&St.indexOf("Firefox")>=0),Ut=!!(!Ot&&St&&St.indexOf("Safari")>=0),Ht=!!(St&&St.indexOf("Edg/")>=0),Pt=!!(St&&St.indexOf("Android")>=0),jt={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var Wt;(function(t){function i(t){return t&&typeof t=="object"&&typeof t[Symbol.iterator]=="function"}t.is=i;const e=Object.freeze([]);function*s(t){yield t}t.empty=function(){return e},t.single=s,t.wrap=function(t){return i(t)?t:s(t)},t.from=function(t){return t||e},t.reverse=function*(t){for(let i=t.length-1;i>=0;i--)yield t[i]},t.isEmpty=function(t){return!t||t[Symbol.iterator]().next().done===!0},t.first=function(t){return t[Symbol.iterator]().next().value},t.some=function(t,i){for(const e of t)if(i(e))return!0;return!1},t.find=function(t,i){for(const e of t)if(i(e))return e},t.filter=function*(t,i){for(const e of t)i(e)&&(yield e)},t.map=function*(t,i){let e=0;for(const s of t)yield i(s,e++)},t.concat=function*(...t){for(const i of t)yield*i},t.reduce=function(t,i,e){let s=e;for(const e of t)s=i(s,e);return s},t.slice=function*(t,i,e=t.length){for(i<0&&(i+=t.length),e<0?e+=t.length:e>t.length&&(e=t.length);i<e;i++)yield t[i]},t.consume=function(i,e=Number.POSITIVE_INFINITY){const s=[];if(e===0)return[s,i];const n=i[Symbol.iterator]();for(let i=0;i<e;i++){const i=n.next();if(i.done)return[s,t.empty()];s.push(i.value)}return[s,{[Symbol.iterator]:()=>n}]},t.asyncToArray=async function(t){const i=[];for await(const e of t)i.push(e);return Promise.resolve(i)}})(Wt||(Wt={}));let Yt=class t{constructor(i){this.element=i,this.next=t.Undefined,this.prev=t.Undefined}};Yt.Undefined=new Yt(void 0);class _t{constructor(){this._first=Yt.Undefined,this._last=Yt.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Yt.Undefined}clear(){let t=this._first;for(;t!==Yt.Undefined;){const i=t.next;t.prev=Yt.Undefined,t.next=Yt.Undefined,t=i}this._first=Yt.Undefined,this._last=Yt.Undefined,this._size=0}unshift(t){return this._insert(t,!1)}push(t){return this._insert(t,!0)}_insert(t,i){const e=new Yt(t);if(this._first===Yt.Undefined)this._first=e,this._last=e;else if(i){const t=this._last;this._last=e,e.prev=t,t.next=e}else{const t=this._first;this._first=e,e.next=t,t.prev=e}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(e))}}shift(){if(this._first!==Yt.Undefined){const t=this._first.element;return this._remove(this._first),t}}pop(){if(this._last!==Yt.Undefined){const t=this._last.element;return this._remove(this._last),t}}_remove(t){if(t.prev!==Yt.Undefined&&t.next!==Yt.Undefined){const i=t.prev;i.next=t.next,t.next.prev=i}else t.prev===Yt.Undefined&&t.next===Yt.Undefined?(this._first=Yt.Undefined,this._last=Yt.Undefined):t.next===Yt.Undefined?(this._last=this._last.prev,this._last.next=Yt.Undefined):t.prev===Yt.Undefined&&(this._first=this._first.next,this._first.prev=Yt.Undefined);this._size-=1}*[Symbol.iterator](){let t=this._first;for(;t!==Yt.Undefined;)yield t.element,t=t.next}}const Vt="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?",Jt=function(t=""){let i="(-?\\d*\\.\\d\\w*)|([^";for(const e of Vt)t.indexOf(e)>=0||(i+="\\"+e);return i+="\\s]+)",new RegExp(i,"g")}();function Gt(t){let i=Jt;if(t&&t instanceof RegExp)if(t.global)i=t;else{let e="g";t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),i=new RegExp(t.source,e)}return i.lastIndex=0,i}const Kt=new _t;function $t(t,i,e,s,n){if(i=Gt(i),n||(n=Wt.first(Kt)),e.length>n.maxLen){let o=t-n.maxLen/2;return o<0?o=0:s+=o,$t(t,i,e=e.substring(o,t+n.maxLen/2),s,n)}const o=Date.now(),r=t-1-s;let h=-1,c=null;for(let t=1;!(Date.now()-o>=n.timeBudget);t++){const s=r-n.windowSize*t;i.lastIndex=Math.max(0,s);const o=Xt(i,e,r,h);if(!o&&c||(c=o,s<=0))break;h=s}if(c){const t={word:c[0],startColumn:s+1+c.index,endColumn:s+1+c.index+c[0].length};return i.lastIndex=0,t}return null}function Xt(t,i,e,s){let n;for(;n=t.exec(i);){const i=n.index||0;if(i<=e&&t.lastIndex>=e)return n;if(s>0&&i>s)return null}return null}Kt.unshift({maxLen:1e3,windowSize:15,timeBudget:150});class qt{constructor(t){this._values=t}hasChanged(t){return this._values[t]}}class Zt{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class ti{constructor(t,i,e,s){this.id=t,this.name=i,this.defaultValue=e,this.schema=s}applyUpdate(t,i){return ei(t,i)}compute(t,i,e){return e}}class ii{constructor(t,i){this.newValue=t,this.didChange=i}}function ei(t,i){if(typeof t!="object"||typeof i!="object"||!t||!i)return new ii(i,t!==i);if(Array.isArray(t)||Array.isArray(i)){const e=Array.isArray(t)&&Array.isArray(i)&&h(t,i);return new ii(i,!e)}let e=!1;for(const s in i)if(i.hasOwnProperty(s)){const n=ei(t[s],i[s]);n.didChange&&(t[s]=n.newValue,e=!0)}return new ii(t,e)}class si{constructor(t){this.schema=void 0,this.id=t,this.name="_never_",this.defaultValue=void 0}applyUpdate(t,i){return ei(t,i)}validate(t){return this.defaultValue}}class ni{constructor(t,i,e,s){this.id=t,this.name=i,this.defaultValue=e,this.schema=s}applyUpdate(t,i){return ei(t,i)}validate(t){return t===void 0?this.defaultValue:t}compute(t,i,e){return e}}function oi(t,i){return t===void 0?i:t!=="false"&&!!t}class ri extends ni{constructor(t,i,e,s=void 0){s!==void 0&&(s.type="boolean",s.default=e),super(t,i,e,s)}validate(t){return oi(t,this.defaultValue)}}function hi(t,i,e,s){if(t===void 0)return i;let n=parseInt(t,10);return isNaN(n)?i:(n=Math.max(e,n),n=Math.min(s,n),0|n)}class ci extends ni{static clampedInt(t,i,e,s){return hi(t,i,e,s)}constructor(t,i,e,s,n,o=void 0){o!==void 0&&(o.type="integer",o.default=e,o.minimum=s,o.maximum=n),super(t,i,e,o),this.minimum=s,this.maximum=n}validate(t){return ci.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}}function ai(t,i,e,s){if(t===void 0)return i;const n=li.float(t,i);return li.clamp(n,e,s)}class li extends ni{static clamp(t,i,e){return t<i?i:t>e?e:t}static float(t,i){if(typeof t=="number")return t;if(t===void 0)return i;const e=parseFloat(t);return isNaN(e)?i:e}constructor(t,i,e,s,n){n!==void 0&&(n.type="number",n.default=e),super(t,i,e,n),this.validationFn=s}validate(t){return this.validationFn(li.float(t,this.defaultValue))}}class ui extends ni{static string(t,i){return typeof t!="string"?i:t}constructor(t,i,e,s=void 0){s!==void 0&&(s.type="string",s.default=e),super(t,i,e,s)}validate(t){return ui.string(t,this.defaultValue)}}function di(t,i,e,s){return typeof t!="string"?i:s&&t in s?s[t]:e.indexOf(t)===-1?i:t}class fi extends ni{constructor(t,i,e,s,n=void 0){n!==void 0&&(n.type="string",n.enum=s,n.default=e),super(t,i,e,n),this._allowedValues=s}validate(t){return di(t,this.defaultValue,this._allowedValues)}}class gi extends ti{constructor(t,i,e,s,n,o,r=void 0){r!==void 0&&(r.type="string",r.enum=n,r.default=s),super(t,i,e,r),this._allowedValues=n,this._convert=o}validate(t){return typeof t!="string"||this._allowedValues.indexOf(t)===-1?this.defaultValue:this._convert(t)}}var Ai,pi;(function(t){t[t.Line=1]="Line",t[t.Block=2]="Block",t[t.Underline=3]="Underline",t[t.LineThin=4]="LineThin",t[t.BlockOutline=5]="BlockOutline",t[t.UnderlineThin=6]="UnderlineThin"})(Ai||(Ai={}));class wi extends ti{constructor(){super(51,"fontLigatures",wi.OFF,{anyOf:[{type:"boolean",description:st(0,"Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:st(0,"Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:st(0,"Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(t){return t===void 0?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?wi.OFF:t==="true"?wi.ON:t:t?wi.ON:wi.OFF}}wi.OFF='"liga" off, "calt" off',wi.ON='"liga" on, "calt" on';class mi extends ti{constructor(){super(54,"fontVariations",mi.OFF,{anyOf:[{type:"boolean",description:st(0,"Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:st(0,"Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:st(0,"Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(t){return t===void 0?this.defaultValue:typeof t=="string"?t==="false"?mi.OFF:t==="true"?mi.TRANSLATE:t:t?mi.TRANSLATE:mi.OFF}compute(t,i,e){return t.fontInfo.fontVariationSettings}}mi.OFF="normal",mi.TRANSLATE="translate";class vi extends ti{constructor(){super(53,"fontWeight",Li.fontWeight,{anyOf:[{type:"number",minimum:vi.MINIMUM_VALUE,maximum:vi.MAXIMUM_VALUE,errorMessage:st(0,'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:vi.SUGGESTION_VALUES}],default:Li.fontWeight,description:st(0,'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(t){return t==="normal"||t==="bold"?t:String(ci.clampedInt(t,Li.fontWeight,vi.MINIMUM_VALUE,vi.MAXIMUM_VALUE))}}vi.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],vi.MINIMUM_VALUE=1,vi.MAXIMUM_VALUE=1e3;class bi extends si{constructor(){super(145)}compute(t,i,e){return bi.computeLayout(i,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const i=t.height/t.lineHeight,e=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,i-1));const n=(e+t.viewLineCount+s)/(t.pixelRatio*t.height);return{typicalViewportLineCount:i,extraLinesBeforeFirstLine:e,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:Math.floor(t.viewLineCount/n)}}static _computeMinimapLayout(t,i){const e=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=i.stableMinimapLayoutInput,r=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,h=t.lineHeight,c=t.typicalHalfwidthCharacterWidth,a=t.scrollBeyondLastLine,l=t.minimap.renderCharacters;let u=n>=2?Math.round(2*t.minimap.scale):t.minimap.scale;const d=t.minimap.maxColumn,f=t.minimap.size,g=t.minimap.side,A=t.verticalScrollbarWidth,p=t.viewLineCount,w=t.remainingWidth,m=t.isViewportWrapping,v=l?2:3;let b=Math.floor(n*s);const y=b/n;let k=!1,x=!1,C=v*u,E=u/n,B=1;if(f==="fill"||f==="fit"){const{typicalViewportLineCount:e,extraLinesBeforeFirstLine:o,extraLinesBeyondLastLine:c,desiredRatio:l,minimapLineCount:d}=bi.computeContainedMinimapLineCount({viewLineCount:p,scrollBeyondLastLine:a,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:h,pixelRatio:n});if(p/d>1)k=!0,x=!0,u=1,C=1,E=u/n;else{let s=!1,a=u+1;if(f==="fit"){const t=Math.ceil((o+p+c)*C);m&&r&&w<=i.stableFitRemainingWidth?(s=!0,a=i.stableFitMaxMinimapScale):s=t>b}if(f==="fill"||s){k=!0;const s=u;C=Math.min(h*n,Math.max(1,Math.floor(1/l))),m&&r&&w<=i.stableFitRemainingWidth&&(a=i.stableFitMaxMinimapScale),u=Math.min(a,Math.max(1,Math.floor(C/v))),u>s&&(B=Math.min(2,u/s)),E=u/n/B,b=Math.ceil(Math.max(e,o+p+c)*C),m?(i.stableMinimapLayoutInput=t,i.stableFitRemainingWidth=w,i.stableFitMaxMinimapScale=u):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}const D=Math.floor(d*E),M=Math.min(D,Math.max(0,Math.floor((w-A-2)*E/(c+E)))+8);let S=Math.floor(n*M);const F=S/n;return S=Math.floor(S*B),{renderMinimap:l?1:2,minimapLeft:g==="left"?0:e-M-A,minimapWidth:M,minimapHeightIsEditorHeight:k,minimapIsSampling:x,minimapScale:u,minimapLineHeight:C,minimapCanvasInnerWidth:S,minimapCanvasInnerHeight:b,minimapCanvasOuterWidth:F,minimapCanvasOuterHeight:y}}static computeLayout(t,i){const e=0|i.outerWidth,s=0|i.outerHeight,n=0|i.lineHeight,o=0|i.lineNumbersDigitCount,r=i.typicalHalfwidthCharacterWidth,h=i.maxDigitWidth,c=i.pixelRatio,a=i.viewLineCount,l=t.get(137),u=l==="inherit"?t.get(136):l,d=u==="inherit"?t.get(132):u,f=t.get(135),g=i.isDominatedByLongLines,A=t.get(57),p=t.get(68).renderType!==0,w=t.get(69),m=t.get(105),v=t.get(84),b=t.get(73),y=t.get(103),k=y.verticalScrollbarSize,x=y.verticalHasArrows,C=y.arrowSize,E=y.horizontalScrollbarSize,B=t.get(43),D=t.get(110)!=="never";let M=t.get(66);B&&D&&(M+=16);let S=0;if(p){const t=Math.max(o,w);S=Math.round(t*h)}let F=0;A&&(F=n*i.glyphMarginDecorationLaneCount);let I=0,L=I+F,R=L+S,T=R+M;const N=e-F-S-M;let Q=!1,O=!1,z=-1;u==="inherit"&&g?(Q=!0,O=!0):d==="on"||d==="bounded"?O=!0:d==="wordWrapColumn"&&(z=f);const U=bi._computeMinimapLayout({outerWidth:e,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:r,pixelRatio:c,scrollBeyondLastLine:m,paddingTop:v.top,paddingBottom:v.bottom,minimap:b,verticalScrollbarWidth:k,viewLineCount:a,remainingWidth:N,isViewportWrapping:O},i.memory||new Zt);U.renderMinimap!==0&&U.minimapLeft===0&&(I+=U.minimapWidth,L+=U.minimapWidth,R+=U.minimapWidth,T+=U.minimapWidth);const H=N-U.minimapWidth,P=Math.max(1,Math.floor((H-k-2)/r)),j=x?C:0;return O&&(z=Math.max(1,P),d==="bounded"&&(z=Math.min(z,f))),{width:e,height:s,glyphMarginLeft:I,glyphMarginWidth:F,glyphMarginDecorationLaneCount:i.glyphMarginDecorationLaneCount,lineNumbersLeft:L,lineNumbersWidth:S,decorationsLeft:R,decorationsWidth:M,contentLeft:T,contentWidth:H,minimap:U,viewportColumn:P,isWordWrapMinified:Q,isViewportWrapping:O,wrappingColumn:z,verticalScrollbarWidth:k,horizontalScrollbarHeight:E,overviewRuler:{top:j,width:k,height:s-2*j,right:0}}}}(function(t){t.Off="off",t.OnCode="onCode",t.On="on"})(pi||(pi={}));function yi(t){const i=t.get(98);return i==="editable"?t.get(91):i!=="on"}function ki(t,i){if(typeof t!="string")return i;switch(t){case"hidden":return 2;case"visible":return 3;default:return 1}}const xi="inUntrustedWorkspace",Ci="editor.unicodeHighlight.allowedCharacters",Ei="editor.unicodeHighlight.invisibleCharacters",Bi="editor.unicodeHighlight.nonBasicASCII",Di="editor.unicodeHighlight.ambiguousCharacters",Mi="editor.unicodeHighlight.includeComments",Si="editor.unicodeHighlight.includeStrings",Fi="editor.unicodeHighlight.allowedLocales";function Ii(t,i,e){const s=e.indexOf(t);return s===-1?i:e[s]}const Li={fontFamily:kt?"Menlo, Monaco, 'Courier New', monospace":xt?"'Droid Sans Mono', 'monospace', monospace":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:kt?12:14,lineHeight:0,letterSpacing:0},Ri=[];function Ti(t){return Ri[t.id]=t,t}const Ni={acceptSuggestionOnCommitCharacter:Ti(new ri(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:st(0,"Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Ti(new fi(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",st(0,"Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:st(0,"Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Ti(new class extends ti{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[st(0,"Use platform APIs to detect when a Screen Reader is attached."),st(0,"Optimize for usage with a Screen Reader."),st(0,"Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:st(0,"Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(t){switch(t){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(t,i,e){return e===0?t.accessibilitySupport:e}}),accessibilityPageSize:Ti(new ci(3,"accessibilityPageSize",10,1,1073741824,{description:st(0,"Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:Ti(new ui(4,"ariaLabel",st(0,"Editor content"))),ariaRequired:Ti(new ri(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:Ti(new ri(8,"screenReaderAnnounceInlineSuggestion",!0,{description:st(0,"Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:Ti(new fi(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",st(0,"Use language configurations to determine when to autoclose brackets."),st(0,"Autoclose brackets only when the cursor is to the left of whitespace."),""],description:st(0,"Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:Ti(new fi(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",st(0,"Use language configurations to determine when to autoclose comments."),st(0,"Autoclose comments only when the cursor is to the left of whitespace."),""],description:st(0,"Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:Ti(new fi(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",st(0,"Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:st(0,"Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Ti(new fi(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",st(0,"Type over closing quotes or brackets only if they were automatically inserted."),""],description:st(0,"Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Ti(new fi(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",st(0,"Use language configurations to determine when to autoclose quotes."),st(0,"Autoclose quotes only when the cursor is to the left of whitespace."),""],description:st(0,"Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Ti(new gi(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],(function(t){switch(t){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}),{enumDescriptions:[st(0,"The editor will not insert indentation automatically."),st(0,"The editor will keep the current line's indentation."),st(0,"The editor will keep the current line's indentation and honor language defined brackets."),st(0,"The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),st(0,"The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:st(0,"Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Ti(new ri(13,"automaticLayout",!1)),autoSurround:Ti(new fi(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[st(0,"Use language configurations to determine when to automatically surround selections."),st(0,"Surround with quotes but not brackets."),st(0,"Surround with brackets but not quotes."),""],description:st(0,"Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Ti(new class extends ti{constructor(){const t={enabled:jt.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:jt.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",t,{"editor.bracketPairColorization.enabled":{type:"boolean",default:t.enabled,markdownDescription:st(0,"Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:t.independentColorPoolPerBracketType,description:st(0,"Controls whether each bracket type has its own independent color pool.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{enabled:oi(i.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:oi(i.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}),bracketPairGuides:Ti(new class extends ti{constructor(){const t={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",t,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[st(0,"Enables bracket pair guides."),st(0,"Enables bracket pair guides only for the active bracket pair."),st(0,"Disables bracket pair guides.")],default:t.bracketPairs,description:st(0,"Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[st(0,"Enables horizontal guides as addition to vertical bracket pair guides."),st(0,"Enables horizontal guides only for the active bracket pair."),st(0,"Disables horizontal bracket pair guides.")],default:t.bracketPairsHorizontal,description:st(0,"Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:t.highlightActiveBracketPair,description:st(0,"Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:t.indentation,description:st(0,"Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[st(0,"Highlights the active indent guide."),st(0,"Highlights the active indent guide even if bracket guides are highlighted."),st(0,"Do not highlight the active indent guide.")],default:t.highlightActiveIndentation,description:st(0,"Controls whether the editor should highlight the active indent guide.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{bracketPairs:Ii(i.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Ii(i.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:oi(i.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:oi(i.indentation,this.defaultValue.indentation),highlightActiveIndentation:Ii(i.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}),stickyTabStops:Ti(new ri(116,"stickyTabStops",!1,{description:st(0,"Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Ti(new ri(17,"codeLens",!0,{description:st(0,"Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Ti(new ui(18,"codeLensFontFamily","",{description:st(0,"Controls the font family for CodeLens.")})),codeLensFontSize:Ti(new ci(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:st(0,"Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Ti(new ri(20,"colorDecorators",!0,{description:st(0,"Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:Ti(new fi(148,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[st(0,"Make the color picker appear both on click and hover of the color decorator"),st(0,"Make the color picker appear on hover of the color decorator"),st(0,"Make the color picker appear on click of the color decorator")],description:st(0,"Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:Ti(new ci(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:st(0,"Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:Ti(new ri(22,"columnSelection",!1,{description:st(0,"Enable that the selection with the mouse and keys is doing column selection.")})),comments:Ti(new class extends ti{constructor(){const t={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",t,{"editor.comments.insertSpace":{type:"boolean",default:t.insertSpace,description:st(0,"Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:t.ignoreEmptyLines,description:st(0,"Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{insertSpace:oi(i.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:oi(i.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}),contextmenu:Ti(new ri(24,"contextmenu",!0)),copyWithSyntaxHighlighting:Ti(new ri(25,"copyWithSyntaxHighlighting",!0,{description:st(0,"Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Ti(new gi(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],(function(t){switch(t){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}),{description:st(0,"Control the cursor animation style.")})),cursorSmoothCaretAnimation:Ti(new fi(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[st(0,"Smooth caret animation is disabled."),st(0,"Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),st(0,"Smooth caret animation is always enabled.")],description:st(0,"Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Ti(new gi(28,"cursorStyle",Ai.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],(function(t){switch(t){case"line":return Ai.Line;case"block":return Ai.Block;case"underline":return Ai.Underline;case"line-thin":return Ai.LineThin;case"block-outline":return Ai.BlockOutline;case"underline-thin":return Ai.UnderlineThin}}),{description:st(0,"Controls the cursor style.")})),cursorSurroundingLines:Ti(new ci(29,"cursorSurroundingLines",0,0,1073741824,{description:st(0,"Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Ti(new fi(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[st(0,"`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),st(0,"`cursorSurroundingLines` is enforced always.")],markdownDescription:st(0,"Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:Ti(new ci(31,"cursorWidth",0,0,1073741824,{markdownDescription:st(0,"Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Ti(new ri(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:Ti(new ri(33,"disableMonospaceOptimizations",!1)),domReadOnly:Ti(new ri(34,"domReadOnly",!1)),dragAndDrop:Ti(new ri(35,"dragAndDrop",!0,{description:st(0,"Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Ti(new class extends ri{constructor(){super(37,"emptySelectionClipboard",!0,{description:st(0,"Controls whether copying without a selection copies the current line.")})}compute(t,i,e){return e&&t.emptySelectionClipboard}}),dropIntoEditor:Ti(new class extends ti{constructor(){const t={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",t,{"editor.dropIntoEditor.enabled":{type:"boolean",default:t.enabled,markdownDescription:st(0,"Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:st(0,"Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[st(0,"Show the drop selector widget after a file is dropped into the editor."),st(0,"Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{enabled:oi(i.enabled,this.defaultValue.enabled),showDropSelector:di(i.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}),stickyScroll:Ti(new class extends ti{constructor(){const t={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(115,"stickyScroll",t,{"editor.stickyScroll.enabled":{type:"boolean",default:t.enabled,description:st(0,"Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:t.maxLineCount,minimum:1,maximum:20,description:st(0,"Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:t.defaultModel,description:st(0,"Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:t.scrollWithEditor,description:st(0,"Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{enabled:oi(i.enabled,this.defaultValue.enabled),maxLineCount:ci.clampedInt(i.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:di(i.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:oi(i.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}),experimentalWhitespaceRendering:Ti(new fi(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[st(0,"Use a new rendering method with svgs."),st(0,"Use a new rendering method with font characters."),st(0,"Use the stable rendering method.")],description:st(0,"Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:Ti(new ui(39,"extraEditorClassName","")),fastScrollSensitivity:Ti(new li(40,"fastScrollSensitivity",5,(t=>t<=0?5:t),{markdownDescription:st(0,"Scrolling speed multiplier when pressing `Alt`.")})),find:Ti(new class extends ti{constructor(){const t={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",t,{"editor.find.cursorMoveOnType":{type:"boolean",default:t.cursorMoveOnType,description:st(0,"Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:t.seedSearchStringFromSelection,enumDescriptions:[st(0,"Never seed search string from the editor selection."),st(0,"Always seed search string from the editor selection, including word at cursor position."),st(0,"Only seed search string from the editor selection.")],description:st(0,"Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:t.autoFindInSelection,enumDescriptions:[st(0,"Never turn on Find in Selection automatically (default)."),st(0,"Always turn on Find in Selection automatically."),st(0,"Turn on Find in Selection automatically when multiple lines of content are selected.")],description:st(0,"Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:t.globalFindClipboard,description:st(0,"Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:kt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:t.addExtraSpaceOnTop,description:st(0,"Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:t.loop,description:st(0,"Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{cursorMoveOnType:oi(i.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof t.seedSearchStringFromSelection=="boolean"?t.seedSearchStringFromSelection?"always":"never":di(i.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof t.autoFindInSelection=="boolean"?t.autoFindInSelection?"always":"never":di(i.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:oi(i.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:oi(i.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:oi(i.loop,this.defaultValue.loop)}}}),fixedOverflowWidgets:Ti(new ri(42,"fixedOverflowWidgets",!1)),folding:Ti(new ri(43,"folding",!0,{description:st(0,"Controls whether the editor has code folding enabled.")})),foldingStrategy:Ti(new fi(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[st(0,"Use a language-specific folding strategy if available, else the indentation-based one."),st(0,"Use the indentation-based folding strategy.")],description:st(0,"Controls the strategy for computing folding ranges.")})),foldingHighlight:Ti(new ri(45,"foldingHighlight",!0,{description:st(0,"Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Ti(new ri(46,"foldingImportsByDefault",!1,{description:st(0,"Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:Ti(new ci(47,"foldingMaximumRegions",5e3,10,65e3,{description:st(0,"The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:Ti(new ri(48,"unfoldOnClickAfterEndOfLine",!1,{description:st(0,"Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Ti(new ui(49,"fontFamily",Li.fontFamily,{description:st(0,"Controls the font family.")})),fontInfo:Ti(new class extends si{constructor(){super(50)}compute(t,i,e){return t.fontInfo}}),fontLigatures2:Ti(new wi),fontSize:Ti(new class extends ni{constructor(){super(52,"fontSize",Li.fontSize,{type:"number",minimum:6,maximum:100,default:Li.fontSize,description:st(0,"Controls the font size in pixels.")})}validate(t){const i=li.float(t,this.defaultValue);return i===0?Li.fontSize:li.clamp(i,6,100)}compute(t,i,e){return t.fontInfo.fontSize}}),fontWeight:Ti(new vi),fontVariations:Ti(new mi),formatOnPaste:Ti(new ri(55,"formatOnPaste",!1,{description:st(0,"Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Ti(new ri(56,"formatOnType",!1,{description:st(0,"Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Ti(new ri(57,"glyphMargin",!0,{description:st(0,"Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Ti(new class extends ti{constructor(){const t={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},i={type:"string",enum:["peek","gotoAndPeek","goto"],default:t.multiple,enumDescriptions:[st(0,"Show Peek view of the results (default)"),st(0,"Go to the primary result and show a Peek view"),st(0,"Go to the primary result and enable Peek-less navigation to others")]},e=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",t,{"editor.gotoLocation.multiple":{deprecationMessage:st(0,"This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:st(0,"Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...i},"editor.gotoLocation.multipleTypeDefinitions":{description:st(0,"Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...i},"editor.gotoLocation.multipleDeclarations":{description:st(0,"Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...i},"editor.gotoLocation.multipleImplementations":{description:st(0,"Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...i},"editor.gotoLocation.multipleReferences":{description:st(0,"Controls the behavior the 'Go to References'-command when multiple target locations exist."),...i},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:t.alternativeDefinitionCommand,enum:e,description:st(0,"Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:t.alternativeTypeDefinitionCommand,enum:e,description:st(0,"Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:t.alternativeDeclarationCommand,enum:e,description:st(0,"Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:t.alternativeImplementationCommand,enum:e,description:st(0,"Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:t.alternativeReferenceCommand,enum:e,description:st(0,"Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(t){var i,e,s,n,o;if(!t||typeof t!="object")return this.defaultValue;const r=t;return{multiple:di(r.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(i=r.multipleDefinitions)!==null&&i!==void 0?i:di(r.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(e=r.multipleTypeDefinitions)!==null&&e!==void 0?e:di(r.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(s=r.multipleDeclarations)!==null&&s!==void 0?s:di(r.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(n=r.multipleImplementations)!==null&&n!==void 0?n:di(r.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=r.multipleReferences)!==null&&o!==void 0?o:di(r.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:ui.string(r.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:ui.string(r.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:ui.string(r.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:ui.string(r.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:ui.string(r.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}),hideCursorInOverviewRuler:Ti(new ri(59,"hideCursorInOverviewRuler",!1,{description:st(0,"Controls whether the cursor should be hidden in the overview ruler.")})),hover:Ti(new class extends ti{constructor(){const t={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",t,{"editor.hover.enabled":{type:"boolean",default:t.enabled,description:st(0,"Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:t.delay,minimum:0,maximum:1e4,description:st(0,"Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:t.sticky,description:st(0,"Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:t.hidingDelay,description:st(0,"Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:t.above,description:st(0,"Prefer showing hovers above the line, if there's space.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{enabled:oi(i.enabled,this.defaultValue.enabled),delay:ci.clampedInt(i.delay,this.defaultValue.delay,0,1e4),sticky:oi(i.sticky,this.defaultValue.sticky),hidingDelay:ci.clampedInt(i.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:oi(i.above,this.defaultValue.above)}}}),inDiffEditor:Ti(new ri(61,"inDiffEditor",!1)),letterSpacing:Ti(new li(64,"letterSpacing",Li.letterSpacing,(t=>li.clamp(t,-5,20)),{description:st(0,"Controls the letter spacing in pixels.")})),lightbulb:Ti(new class extends ti{constructor(){const t={enabled:pi.On};super(65,"lightbulb",t,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[pi.Off,pi.OnCode,pi.On],default:t.enabled,enumDescriptions:[st(0,"Disable the code action menu."),st(0,"Show the code action menu when the cursor is on lines with code."),st(0,"Show the code action menu when the cursor is on lines with code or on empty lines.")],description:st(0,"Enables the Code Action lightbulb in the editor.")}})}validate(t){return!t||typeof t!="object"?this.defaultValue:{enabled:di(t.enabled,this.defaultValue.enabled,[pi.Off,pi.OnCode,pi.On])}}}),lineDecorationsWidth:Ti(new class extends ti{constructor(){super(66,"lineDecorationsWidth",10)}validate(t){return typeof t=="string"&&/^\d+(\.\d+)?ch$/.test(t)?-parseFloat(t.substring(0,t.length-2)):ci.clampedInt(t,this.defaultValue,0,1e3)}compute(t,i,e){return e<0?ci.clampedInt(-e*t.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):e}}),lineHeight:Ti(new class extends li{constructor(){super(67,"lineHeight",Li.lineHeight,(t=>li.clamp(t,0,150)),{markdownDescription:st(0,`Controls the line height. \n - Use 0 to automatically compute the line height from the font size.\n - Values between 0 and 8 will be used as a multiplier with the font size.\n - Values greater than or equal to 8 will be used as effective values.`)})}compute(t,i,e){return t.fontInfo.lineHeight}}),lineNumbers:Ti(new class extends ti{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[st(0,"Line numbers are not rendered."),st(0,"Line numbers are rendered as absolute number."),st(0,"Line numbers are rendered as distance in lines to cursor position."),st(0,"Line numbers are rendered every 10 lines.")],default:"on",description:st(0,"Controls the display of line numbers.")})}validate(t){let i=this.defaultValue.renderType,e=this.defaultValue.renderFn;return t!==void 0&&(typeof t=="function"?(i=4,e=t):i=t==="interval"?3:t==="relative"?2:t==="on"?1:0),{renderType:i,renderFn:e}}}),lineNumbersMinChars:Ti(new ci(69,"lineNumbersMinChars",5,1,300)),linkedEditing:Ti(new ri(70,"linkedEditing",!1,{description:st(0,"Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:Ti(new ri(71,"links",!0,{description:st(0,"Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Ti(new fi(72,"matchBrackets","always",["always","near","never"],{description:st(0,"Highlight matching brackets.")})),minimap:Ti(new class extends ti{constructor(){const t={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9};super(73,"minimap",t,{"editor.minimap.enabled":{type:"boolean",default:t.enabled,description:st(0,"Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:t.autohide,description:st(0,"Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[st(0,"The minimap has the same size as the editor contents (and might scroll)."),st(0,"The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),st(0,"The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:t.size,description:st(0,"Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:t.side,description:st(0,"Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:t.showSlider,description:st(0,"Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:t.scale,minimum:1,maximum:3,enum:[1,2,3],description:st(0,"Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:t.renderCharacters,description:st(0,"Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:t.maxColumn,description:st(0,"Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:t.showRegionSectionHeaders,description:st(0,"Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:t.showMarkSectionHeaders,description:st(0,"Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:t.sectionHeaderFontSize,description:st(0,"Controls the font size of section headers in the minimap.")}})}validate(t){var i;if(!t||typeof t!="object")return this.defaultValue;const e=t;return{enabled:oi(e.enabled,this.defaultValue.enabled),autohide:oi(e.autohide,this.defaultValue.autohide),size:di(e.size,this.defaultValue.size,["proportional","fill","fit"]),side:di(e.side,this.defaultValue.side,["right","left"]),showSlider:di(e.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:oi(e.renderCharacters,this.defaultValue.renderCharacters),scale:ci.clampedInt(e.scale,1,1,3),maxColumn:ci.clampedInt(e.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:oi(e.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:oi(e.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:li.clamp((i=e.sectionHeaderFontSize)!==null&&i!==void 0?i:this.defaultValue.sectionHeaderFontSize,4,32)}}}),mouseStyle:Ti(new fi(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Ti(new li(75,"mouseWheelScrollSensitivity",1,(t=>t===0?1:t),{markdownDescription:st(0,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Ti(new ri(76,"mouseWheelZoom",!1,{markdownDescription:st(0,kt?"Zoom the font of the editor when using mouse wheel and holding `Cmd`.":"Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Ti(new ri(77,"multiCursorMergeOverlapping",!0,{description:st(0,"Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Ti(new gi(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],(function(t){return t==="ctrlCmd"?kt?"metaKey":"ctrlKey":"altKey"}),{markdownEnumDescriptions:[st(0,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),st(0,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:st(0,"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Ti(new fi(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[st(0,"Each cursor pastes a single line of the text."),st(0,"Each cursor pastes the full text.")],markdownDescription:st(0,"Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:Ti(new ci(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:st(0,"Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:Ti(new fi(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[st(0,"Does not highlight occurrences."),st(0,"Highlights occurrences only in the current file."),st(0,"Experimental: Highlights occurrences across all valid open files.")],markdownDescription:st(0,"Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:Ti(new ri(82,"overviewRulerBorder",!0,{description:st(0,"Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Ti(new ci(83,"overviewRulerLanes",3,0,3)),padding:Ti(new class extends ti{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:st(0,"Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:st(0,"Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{top:ci.clampedInt(i.top,0,0,1e3),bottom:ci.clampedInt(i.bottom,0,0,1e3)}}}),pasteAs:Ti(new class extends ti{constructor(){const t={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",t,{"editor.pasteAs.enabled":{type:"boolean",default:t.enabled,markdownDescription:st(0,"Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:st(0,"Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[st(0,"Show the paste selector widget after content is pasted into the editor."),st(0,"Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{enabled:oi(i.enabled,this.defaultValue.enabled),showPasteSelector:di(i.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}),parameterHints:Ti(new class extends ti{constructor(){const t={enabled:!0,cycle:!0};super(86,"parameterHints",t,{"editor.parameterHints.enabled":{type:"boolean",default:t.enabled,description:st(0,"Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:t.cycle,description:st(0,"Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{enabled:oi(i.enabled,this.defaultValue.enabled),cycle:oi(i.cycle,this.defaultValue.cycle)}}}),peekWidgetDefaultFocus:Ti(new fi(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[st(0,"Focus the tree when opening peek"),st(0,"Focus the editor when opening peek")],description:st(0,"Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:Ti(new ri(88,"definitionLinkOpensInPeek",!1,{description:st(0,"Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Ti(new class extends ti{constructor(){const t={other:"on",comments:"off",strings:"off"},i=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[st(0,"Quick suggestions show inside the suggest widget"),st(0,"Quick suggestions show as ghost text"),st(0,"Quick suggestions are disabled")]}];super(89,"quickSuggestions",t,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:i,default:t.strings,description:st(0,"Enable quick suggestions inside strings.")},comments:{anyOf:i,default:t.comments,description:st(0,"Enable quick suggestions inside comments.")},other:{anyOf:i,default:t.other,description:st(0,"Enable quick suggestions outside of strings and comments.")}},default:t,markdownDescription:st(0,"Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=t}validate(t){if(typeof t=="boolean"){const i=t?"on":"off";return{comments:i,strings:i,other:i}}if(!t||typeof t!="object")return this.defaultValue;const{other:i,comments:e,strings:s}=t,n=["on","inline","off"];let o,r,h;return o=typeof i=="boolean"?i?"on":"off":di(i,this.defaultValue.other,n),r=typeof e=="boolean"?e?"on":"off":di(e,this.defaultValue.comments,n),h=typeof s=="boolean"?s?"on":"off":di(s,this.defaultValue.strings,n),{other:o,comments:r,strings:h}}}),quickSuggestionsDelay:Ti(new ci(90,"quickSuggestionsDelay",10,0,1073741824,{description:st(0,"Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Ti(new ri(91,"readOnly",!1)),readOnlyMessage:Ti(new class extends ti{constructor(){super(92,"readOnlyMessage",void 0)}validate(t){return t&&typeof t=="object"?t:this.defaultValue}}),renameOnType:Ti(new ri(93,"renameOnType",!1,{description:st(0,"Controls whether the editor auto renames on type."),markdownDeprecationMessage:st(0,"Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Ti(new ri(94,"renderControlCharacters",!0,{description:st(0,"Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Ti(new fi(95,"renderFinalNewline",xt?"dimmed":"on",["off","on","dimmed"],{description:st(0,"Render last line number when the file ends with a newline.")})),renderLineHighlight:Ti(new fi(96,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",st(0,"Highlights both the gutter and the current line.")],description:st(0,"Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Ti(new ri(97,"renderLineHighlightOnlyWhenFocus",!1,{description:st(0,"Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Ti(new fi(98,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Ti(new fi(99,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",st(0,"Render whitespace characters except for single spaces between words."),st(0,"Render whitespace characters only on selected text."),st(0,"Render only trailing whitespace characters."),""],description:st(0,"Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Ti(new ci(100,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:Ti(new ri(101,"roundedSelection",!0,{description:st(0,"Controls whether selections should have rounded corners.")})),rulers:Ti(new class extends ti{constructor(){const t=[],i={type:"number",description:st(0,"Number of monospace characters at which this editor ruler will render.")};super(102,"rulers",t,{type:"array",items:{anyOf:[i,{type:["object"],properties:{column:i,color:{type:"string",description:st(0,"Color of this editor ruler."),format:"color-hex"}}}]},default:t,description:st(0,"Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(t){if(Array.isArray(t)){const i=[];for(const e of t)if(typeof e=="number")i.push({column:ci.clampedInt(e,0,0,1e4),color:null});else if(e&&typeof e=="object"){const t=e;i.push({column:ci.clampedInt(t.column,0,0,1e4),color:t.color})}return i.sort(((t,i)=>t.column-i.column)),i}return this.defaultValue}}),scrollbar:Ti(new class extends ti{constructor(){const t={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(103,"scrollbar",t,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[st(0,"The vertical scrollbar will be visible only when necessary."),st(0,"The vertical scrollbar will always be visible."),st(0,"The vertical scrollbar will always be hidden.")],default:"auto",description:st(0,"Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[st(0,"The horizontal scrollbar will be visible only when necessary."),st(0,"The horizontal scrollbar will always be visible."),st(0,"The horizontal scrollbar will always be hidden.")],default:"auto",description:st(0,"Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:t.verticalScrollbarSize,description:st(0,"The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:t.horizontalScrollbarSize,description:st(0,"The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:t.scrollByPage,description:st(0,"Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:t.ignoreHorizontalScrollbarInContentHeight,description:st(0,"When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t,e=ci.clampedInt(i.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=ci.clampedInt(i.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:ci.clampedInt(i.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:ki(i.vertical,this.defaultValue.vertical),horizontal:ki(i.horizontal,this.defaultValue.horizontal),useShadows:oi(i.useShadows,this.defaultValue.useShadows),verticalHasArrows:oi(i.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:oi(i.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:oi(i.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:oi(i.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:e,horizontalSliderSize:ci.clampedInt(i.horizontalSliderSize,e,0,1e3),verticalScrollbarSize:s,verticalSliderSize:ci.clampedInt(i.verticalSliderSize,s,0,1e3),scrollByPage:oi(i.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:oi(i.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}}),scrollBeyondLastColumn:Ti(new ci(104,"scrollBeyondLastColumn",4,0,1073741824,{description:st(0,"Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Ti(new ri(105,"scrollBeyondLastLine",!0,{description:st(0,"Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Ti(new ri(106,"scrollPredominantAxis",!0,{description:st(0,"Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Ti(new ri(107,"selectionClipboard",!0,{description:st(0,"Controls whether the Linux primary clipboard should be supported."),included:xt})),selectionHighlight:Ti(new ri(108,"selectionHighlight",!0,{description:st(0,"Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Ti(new ri(109,"selectOnLineNumbers",!0)),showFoldingControls:Ti(new fi(110,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[st(0,"Always show the folding controls."),st(0,"Never show the folding controls and reduce the gutter size."),st(0,"Only show the folding controls when the mouse is over the gutter.")],description:st(0,"Controls when the folding controls on the gutter are shown.")})),showUnused:Ti(new ri(111,"showUnused",!0,{description:st(0,"Controls fading out of unused code.")})),showDeprecated:Ti(new ri(140,"showDeprecated",!0,{description:st(0,"Controls strikethrough deprecated variables.")})),inlayHints:Ti(new class extends ti{constructor(){const t={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(141,"inlayHints",t,{"editor.inlayHints.enabled":{type:"string",default:t.enabled,description:st(0,"Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[st(0,"Inlay hints are enabled"),st(0,"Inlay hints are showing by default and hide when holding {0}",kt?"Ctrl+Option":"Ctrl+Alt"),st(0,"Inlay hints are hidden by default and show when holding {0}",kt?"Ctrl+Option":"Ctrl+Alt"),st(0,"Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:t.fontSize,markdownDescription:st(0,"Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:t.fontFamily,markdownDescription:st(0,"Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:t.padding,description:st(0,"Enables the padding around the inlay hints in the editor.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return typeof i.enabled=="boolean"&&(i.enabled=i.enabled?"on":"off"),{enabled:di(i.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:ci.clampedInt(i.fontSize,this.defaultValue.fontSize,0,100),fontFamily:ui.string(i.fontFamily,this.defaultValue.fontFamily),padding:oi(i.padding,this.defaultValue.padding)}}}),snippetSuggestions:Ti(new fi(112,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[st(0,"Show snippet suggestions on top of other suggestions."),st(0,"Show snippet suggestions below other suggestions."),st(0,"Show snippets suggestions with other suggestions."),st(0,"Do not show snippet suggestions.")],description:st(0,"Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Ti(new class extends ti{constructor(){super(113,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:st(0,"Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:st(0,"Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(t){return t&&typeof t=="object"?{selectLeadingAndTrailingWhitespace:oi(t.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:oi(t.selectSubwords,this.defaultValue.selectSubwords)}:this.defaultValue}}),smoothScrolling:Ti(new ri(114,"smoothScrolling",!1,{description:st(0,"Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Ti(new ci(117,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Ti(new class extends ti{constructor(){const t={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(118,"suggest",t,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[st(0,"Insert suggestion without overwriting text right of the cursor."),st(0,"Insert suggestion and overwrite text right of the cursor.")],default:t.insertMode,description:st(0,"Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:t.filterGraceful,description:st(0,"Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:t.localityBonus,description:st(0,"Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:t.shareSuggestSelections,markdownDescription:st(0,"Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[st(0,"Always select a suggestion when automatically triggering IntelliSense."),st(0,"Never select a suggestion when automatically triggering IntelliSense."),st(0,"Select a suggestion only when triggering IntelliSense from a trigger character."),st(0,"Select a suggestion only when triggering IntelliSense as you type.")],default:t.selectionMode,markdownDescription:st(0,"Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:t.snippetsPreventQuickSuggestions,description:st(0,"Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:t.showIcons,description:st(0,"Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:t.showStatusBar,description:st(0,"Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:t.preview,description:st(0,"Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:t.showInlineDetails,description:st(0,"Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:st(0,"This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:st(0,"This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:st(0,"When enabled IntelliSense shows `issues`-suggestions.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{insertMode:di(i.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:oi(i.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:oi(i.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:oi(i.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:oi(i.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:di(i.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:oi(i.showIcons,this.defaultValue.showIcons),showStatusBar:oi(i.showStatusBar,this.defaultValue.showStatusBar),preview:oi(i.preview,this.defaultValue.preview),previewMode:di(i.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:oi(i.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:oi(i.showMethods,this.defaultValue.showMethods),showFunctions:oi(i.showFunctions,this.defaultValue.showFunctions),showConstructors:oi(i.showConstructors,this.defaultValue.showConstructors),showDeprecated:oi(i.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:oi(i.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:oi(i.showFields,this.defaultValue.showFields),showVariables:oi(i.showVariables,this.defaultValue.showVariables),showClasses:oi(i.showClasses,this.defaultValue.showClasses),showStructs:oi(i.showStructs,this.defaultValue.showStructs),showInterfaces:oi(i.showInterfaces,this.defaultValue.showInterfaces),showModules:oi(i.showModules,this.defaultValue.showModules),showProperties:oi(i.showProperties,this.defaultValue.showProperties),showEvents:oi(i.showEvents,this.defaultValue.showEvents),showOperators:oi(i.showOperators,this.defaultValue.showOperators),showUnits:oi(i.showUnits,this.defaultValue.showUnits),showValues:oi(i.showValues,this.defaultValue.showValues),showConstants:oi(i.showConstants,this.defaultValue.showConstants),showEnums:oi(i.showEnums,this.defaultValue.showEnums),showEnumMembers:oi(i.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:oi(i.showKeywords,this.defaultValue.showKeywords),showWords:oi(i.showWords,this.defaultValue.showWords),showColors:oi(i.showColors,this.defaultValue.showColors),showFiles:oi(i.showFiles,this.defaultValue.showFiles),showReferences:oi(i.showReferences,this.defaultValue.showReferences),showFolders:oi(i.showFolders,this.defaultValue.showFolders),showTypeParameters:oi(i.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:oi(i.showSnippets,this.defaultValue.showSnippets),showUsers:oi(i.showUsers,this.defaultValue.showUsers),showIssues:oi(i.showIssues,this.defaultValue.showIssues)}}}),inlineSuggest:Ti(new class extends ti{constructor(){const t={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",t,{"editor.inlineSuggest.enabled":{type:"boolean",default:t.enabled,description:st(0,"Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:t.showToolbar,enum:["always","onHover","never"],enumDescriptions:[st(0,"Show the inline suggestion toolbar whenever an inline suggestion is shown."),st(0,"Show the inline suggestion toolbar when hovering over an inline suggestion."),st(0,"Never show the inline suggestion toolbar.")],description:st(0,"Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:t.suppressSuggestions,description:st(0,"Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:t.fontFamily,description:st(0,"Controls the font family of the inline suggestions.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{enabled:oi(i.enabled,this.defaultValue.enabled),mode:di(i.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:di(i.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:oi(i.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:oi(i.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:ui.string(i.fontFamily,this.defaultValue.fontFamily)}}}),inlineEdit:Ti(new class extends ti{constructor(){const t={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1,backgroundColoring:!1};super(63,"experimentalInlineEdit",t,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:t.enabled,description:st(0,"Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:t.showToolbar,enum:["always","onHover","never"],enumDescriptions:[st(0,"Show the inline edit toolbar whenever an inline suggestion is shown."),st(0,"Show the inline edit toolbar when hovering over an inline suggestion."),st(0,"Never show the inline edit toolbar.")],description:st(0,"Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:t.fontFamily,description:st(0,"Controls the font family of the inline edit.")},"editor.experimentalInlineEdit.backgroundColoring":{type:"boolean",default:t.backgroundColoring,description:st(0,"Controls whether to color the background of inline edits.")}})}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{enabled:oi(i.enabled,this.defaultValue.enabled),showToolbar:di(i.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:ui.string(i.fontFamily,this.defaultValue.fontFamily),keepOnBlur:oi(i.keepOnBlur,this.defaultValue.keepOnBlur),backgroundColoring:oi(i.backgroundColoring,this.defaultValue.backgroundColoring)}}}),inlineCompletionsAccessibilityVerbose:Ti(new ri(149,"inlineCompletionsAccessibilityVerbose",!1,{description:st(0,"Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:Ti(new ci(119,"suggestFontSize",0,0,1e3,{markdownDescription:st(0,"Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:Ti(new ci(120,"suggestLineHeight",0,0,1e3,{markdownDescription:st(0,"Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:Ti(new ri(121,"suggestOnTriggerCharacters",!0,{description:st(0,"Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Ti(new fi(122,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[st(0,"Always select the first suggestion."),st(0,"Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),st(0,"Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:st(0,"Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Ti(new fi(123,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[st(0,"Tab complete will insert the best matching suggestion when pressing tab."),st(0,"Disable tab completions."),st(0,"Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:st(0,"Enables tab completions.")})),tabIndex:Ti(new ci(124,"tabIndex",0,-1,1073741824)),unicodeHighlight:Ti(new class extends ti{constructor(){const t={nonBasicASCII:xi,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:xi,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(125,"unicodeHighlight",t,{[Bi]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,xi],default:t.nonBasicASCII,description:st(0,"Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Ei]:{restricted:!0,type:"boolean",default:t.invisibleCharacters,description:st(0,"Controls whether characters that just reserve space or have no width at all are highlighted.")},[Di]:{restricted:!0,type:"boolean",default:t.ambiguousCharacters,description:st(0,"Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Mi]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,xi],default:t.includeComments,description:st(0,"Controls whether characters in comments should also be subject to Unicode highlighting.")},[Si]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,xi],default:t.includeStrings,description:st(0,"Controls whether characters in strings should also be subject to Unicode highlighting.")},[Ci]:{restricted:!0,type:"object",default:t.allowedCharacters,description:st(0,"Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Fi]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:t.allowedLocales,description:st(0,"Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(t,i){let e=!1;i.allowedCharacters&&t&&(Z(t.allowedCharacters,i.allowedCharacters)||(t={...t,allowedCharacters:i.allowedCharacters},e=!0)),i.allowedLocales&&t&&(Z(t.allowedLocales,i.allowedLocales)||(t={...t,allowedLocales:i.allowedLocales},e=!0));const s=super.applyUpdate(t,i);return e?new ii(s.newValue,!0):s}validate(t){if(!t||typeof t!="object")return this.defaultValue;const i=t;return{nonBasicASCII:Ii(i.nonBasicASCII,xi,[!0,!1,xi]),invisibleCharacters:oi(i.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:oi(i.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Ii(i.includeComments,xi,[!0,!1,xi]),includeStrings:Ii(i.includeStrings,xi,[!0,!1,xi]),allowedCharacters:this.validateBooleanMap(t.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(t.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(t,i){if(typeof t!="object"||!t)return i;const e={};for(const[i,s]of Object.entries(t))s===!0&&(e[i]=!0);return e}}),unusualLineTerminators:Ti(new fi(126,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[st(0,"Unusual line terminators are automatically removed."),st(0,"Unusual line terminators are ignored."),st(0,"Unusual line terminators prompt to be removed.")],description:st(0,"Remove unusual line terminators that might cause problems.")})),useShadowDOM:Ti(new ri(127,"useShadowDOM",!0)),useTabStops:Ti(new ri(128,"useTabStops",!0,{description:st(0,"Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:Ti(new fi(129,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[st(0,"Use the default line break rule."),st(0,"Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:st(0,"Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:Ti(new class extends ti{constructor(){super(130,"wordSegmenterLocales",[],{anyOf:[{description:st(0,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:st(0,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(t){if(typeof t=="string"&&(t=[t]),Array.isArray(t)){const i=[];for(const e of t)if(typeof e=="string")try{Intl.Segmenter.supportedLocalesOf(e).length>0&&i.push(e)}catch{}return i}return this.defaultValue}}),wordSeparators:Ti(new ui(131,"wordSeparators",Vt,{description:st(0,"Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Ti(new fi(132,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[st(0,"Lines will never wrap."),st(0,"Lines will wrap at the viewport width."),st(0,"Lines will wrap at `#editor.wordWrapColumn#`."),st(0,"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:st(0,"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Ti(new ui(133,"wordWrapBreakAfterCharacters"," \t})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:Ti(new ui(134,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:Ti(new ci(135,"wordWrapColumn",80,1,1073741824,{markdownDescription:st(0,"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Ti(new fi(136,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Ti(new fi(137,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:Ti(new class extends si{constructor(){super(142)}compute(t,i,e){const s=["monaco-editor"];return i.get(39)&&s.push(i.get(39)),t.extraEditorClassName&&s.push(t.extraEditorClassName),i.get(74)==="default"?s.push("mouse-default"):i.get(74)==="copy"&&s.push("mouse-copy"),i.get(111)&&s.push("showUnused"),i.get(140)&&s.push("showDeprecated"),s.join(" ")}}),defaultColorDecorators:Ti(new ri(147,"defaultColorDecorators",!1,{markdownDescription:st(0,"Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:Ti(new class extends si{constructor(){super(143)}compute(t,i,e){return t.pixelRatio}}),tabFocusMode:Ti(new ri(144,"tabFocusMode",!1,{markdownDescription:st(0,"Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:Ti(new bi),wrappingInfo:Ti(new class extends si{constructor(){super(146)}compute(t,i,e){const s=i.get(145);return{isDominatedByLongLines:t.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}),wrappingIndent:Ti(new class extends ti{constructor(){super(138,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[st(0,"No indentation. Wrapped lines begin at column 1."),st(0,"Wrapped lines get the same indentation as the parent."),st(0,"Wrapped lines get +1 indentation toward the parent."),st(0,"Wrapped lines get +2 indentation toward the parent.")],description:st(0,"Controls the indentation of wrapped lines."),default:"same"}})}validate(t){switch(t){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(t,i,e){return i.get(2)===2?0:e}}),wrappingStrategy:Ti(new class extends ti{constructor(){super(139,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[st(0,"Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),st(0,"Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:st(0,"Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(t){return di(t,"simple",["simple","advanced"])}compute(t,i,e){return i.get(2)===2?"advanced":e}})},Qi=new class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout((()=>{throw t.stack?Vi.isErrorNoTelemetry(t)?new Vi(t.message+`\n\n`+t.stack):new Error(t.message+`\n\n`+t.stack):t}),0)}}emit(t){this.listeners.forEach((i=>{i(t)}))}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}};function Oi(t){Pi(t)||Qi.onUnexpectedError(t)}function zi(t){Pi(t)||Qi.onUnexpectedExternalError(t)}function Ui(t){if(t instanceof Error){const{name:i,message:e}=t;return{$isError:!0,name:i,message:e,stack:t.stacktrace||t.stack,noTelemetry:Vi.isErrorNoTelemetry(t)}}return t}const Hi="Canceled";function Pi(t){return t instanceof ji||t instanceof Error&&t.name===Hi&&t.message===Hi}class ji extends Error{constructor(){super(Hi),this.name=this.message}}function Wi(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}function Yi(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}class _i extends Error{constructor(t){super("NotSupported"),t&&(this.message=t)}}class Vi extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Vi)return t;const i=new Vi;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}}class Ji extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,Ji.prototype)}}function Gi(t,i){const e=this;let s,n=!1;return function(){if(n)return s;if(n=!0,i)try{s=t.apply(e,arguments)}finally{i()}else s=t.apply(e,arguments);return s}}function Ki(t){return typeof t.dispose=="function"&&t.dispose.length===0}function $i(t){if(Wt.is(t)){const i=[];for(const e of t)if(e)try{e.dispose()}catch(t){i.push(t)}if(i.length===1)throw i[0];if(i.length>1)throw new AggregateError(i,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}if(t)return t.dispose(),t}function Xi(...t){return qi((()=>$i(t)))}function qi(t){return{dispose:Gi((()=>{t()}))}}class Zi{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{$i(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Zi.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}deleteAndLeak(t){t&&this._toDispose.has(t)&&this._toDispose.delete(t)}}Zi.DISABLE_DISPOSED_WARNING=!1;class te{constructor(){this._store=new Zi}dispose(){this._store.dispose()}_register(t){if(t===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(t)}}te.None=Object.freeze({dispose(){}});class ie{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(t){var i;this._isDisposed||t===this._value||((i=this._value)===null||i===void 0||i.dispose(),this._value=t)}clear(){this.value=void 0}dispose(){var t;this._isDisposed=!0,(t=this._value)===null||t===void 0||t.dispose(),this._value=void 0}}class ee{constructor(t){this._disposable=t,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter==0&&this._disposable.dispose(),this}}class se{constructor(t){this.object=t}dispose(){}}class ne{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{$i(this._store.values())}finally{this._store.clear()}}get(t){return this._store.get(t)}set(t,i,e=!1){var s;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),e||(s=this._store.get(t))===null||s===void 0||s.dispose(),this._store.set(t,i)}deleteAndDispose(t){var i;(i=this._store.get(t))===null||i===void 0||i.dispose(),this._store.delete(t)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const oe=globalThis.performance&&typeof globalThis.performance.now=="function";class re{static create(t){return new re(t)}constructor(t){this._now=oe&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var he;(function(t){function i(t){return(i,e=null,s)=>{let n,o=!1;return n=t((t=>{if(!o)return n?n.dispose():o=!0,i.call(e,t)}),null,s),o&&n.dispose(),n}}function e(t,i,e){return n(((e,s=null,n)=>t((t=>e.call(s,i(t))),null,n)),e)}function s(t,i,e){return n(((e,s=null,n)=>t((t=>i(t)&&e.call(s,t)),null,n)),e)}function n(t,i){let e;const s=new de({onWillAddFirstListener(){e=t(s.fire,s)},onDidRemoveLastListener(){e==null||e.dispose()}});return i==null||i.add(s),s.event}function o(t,i,e=100,s=!1,n=!1,o,r){let h,c,a,l,u=0;const d=new de({leakWarningThreshold:o,onWillAddFirstListener(){h=t((t=>{u++,c=i(c,t),s&&!a&&(d.fire(c),c=void 0),l=()=>{const t=c;c=void 0,a=void 0,(!s||u>1)&&d.fire(t),u=0},typeof e=="number"?(clearTimeout(a),a=setTimeout(l,e)):a===void 0&&(a=0,queueMicrotask(l))}))},onWillRemoveListener(){n&&u>0&&(l==null||l())},onDidRemoveLastListener(){l=void 0,h.dispose()}});return r==null||r.add(d),d.event}t.None=()=>te.None,t.defer=function(t,i){return o(t,(()=>{}),0,void 0,!0,void 0,i)},t.once=i,t.map=e,t.forEach=function(t,i,e){return n(((e,s=null,n)=>t((t=>{i(t),e.call(s,t)}),null,n)),e)},t.filter=s,t.signal=function(t){return t},t.any=function(...t){return(i,e=null,s)=>function(t,i){return i instanceof Array?i.push(t):i&&i.add(t),t}(Xi(...t.map((t=>t((t=>i.call(e,t)))))),s)},t.reduce=function(t,i,s,n){let o=s;return e(t,(t=>(o=i(o,t),o)),n)},t.debounce=o,t.accumulate=function(i,e=0,s){return t.debounce(i,((t,i)=>t?(t.push(i),t):[i]),e,void 0,!0,void 0,s)},t.latch=function(t,i=((t,i)=>t===i),e){let n,o=!0;return s(t,(t=>{const e=o||!i(t,n);return o=!1,n=t,e}),e)},t.split=function(i,e,s){return[t.filter(i,e,s),t.filter(i,(t=>!e(t)),s)]},t.buffer=function(t,i=!1,e=[],s){let n=e.slice(),o=t((t=>{n?n.push(t):h.fire(t)}));s&&s.add(o);const r=()=>{n==null||n.forEach((t=>h.fire(t))),n=null},h=new de({onWillAddFirstListener(){o||(o=t((t=>h.fire(t))),s&&s.add(o))},onDidAddFirstListener(){n&&(i?setTimeout(r):r())},onDidRemoveLastListener(){o&&o.dispose(),o=null}});return s&&s.add(h),h.event},t.chain=function(t,i){return(e,s,n)=>{const o=i(new h);return t((function(t){const i=o.evaluate(t);i!==r&&e.call(s,i)}),void 0,n)}};const r=Symbol("HaltChainable");class h{constructor(){this.steps=[]}map(t){return this.steps.push(t),this}forEach(t){return this.steps.push((i=>(t(i),i))),this}filter(t){return this.steps.push((i=>t(i)?i:r)),this}reduce(t,i){let e=i;return this.steps.push((i=>(e=t(e,i),e))),this}latch(t=((t,i)=>t===i)){let i,e=!0;return this.steps.push((s=>{const n=e||!t(s,i);return e=!1,i=s,n?s:r})),this}evaluate(t){for(const i of this.steps)if((t=i(t))===r)break;return t}}t.fromNodeEventEmitter=function(t,i,e=(t=>t)){const s=(...t)=>n.fire(e(...t)),n=new de({onWillAddFirstListener:()=>t.on(i,s),onDidRemoveLastListener:()=>t.removeListener(i,s)});return n.event},t.fromDOMEventEmitter=function(t,i,e=(t=>t)){const s=(...t)=>n.fire(e(...t)),n=new de({onWillAddFirstListener:()=>t.addEventListener(i,s),onDidRemoveLastListener:()=>t.removeEventListener(i,s)});return n.event},t.toPromise=function(t){return new Promise((e=>i(t)(e)))},t.fromPromise=function(t){const i=new de;return t.then((t=>{i.fire(t)}),(()=>{i.fire(void 0)})).finally((()=>{i.dispose()})),i.event},t.runAndSubscribe=function(t,i,e){return i(e),t((t=>i(t)))};class c{constructor(t,i){this._observable=t,this._counter=0,this._hasChanged=!1;const e={onWillAddFirstListener:()=>{t.addObserver(this)},onDidRemoveLastListener:()=>{t.removeObserver(this)}};this.emitter=new de(e),i&&i.add(this.emitter)}beginUpdate(t){this._counter++}handlePossibleChange(t){}handleChange(t,i){this._hasChanged=!0}endUpdate(t){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}t.fromObservable=function(t,i){return new c(t,i).emitter.event},t.fromObservableLight=function(t){return(i,e,s)=>{let n=0,o=!1;const r={beginUpdate(){n++},endUpdate(){n--,n===0&&(t.reportChanges(),o&&(o=!1,i.call(e)))},handlePossibleChange(){},handleChange(){o=!0}};t.addObserver(r),t.reportChanges();const h={dispose(){t.removeObserver(r)}};return s instanceof Zi?s.add(h):Array.isArray(s)&&s.push(h),h}}})(he||(he={}));class ce{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${ce._idPool++}`,ce.all.add(this)}start(t){this._stopWatch=new re,this.listenerCount=t}stop(){if(this._stopWatch){const t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}}}ce.all=new Set,ce._idPool=0;class ae{constructor(t,i=Math.random().toString(18).slice(2,5)){this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){var t;(t=this._stacks)===null||t===void 0||t.clear()}check(t,i){const e=this.threshold;if(e<=0||i<e)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){let t;this._warnCountdown=.5*e;let s=0;for(const[i,e]of this._stacks)(!t||s<e)&&(t=i,s=e);console.warn(`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${s}):`),console.warn(t)}return()=>{const i=this._stacks.get(t.value)||0;this._stacks.set(t.value,i-1)}}}class le{static create(){var t;return new le((t=(new Error).stack)!==null&&t!==void 0?t:"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`\n`).slice(2).join(`\n`))}}class ue{constructor(t){this.value=t}}let de=class{constructor(t){var i,e,s,n,o;this._size=0,this._options=t,this._leakageMon=!((i=this._options)===null||i===void 0)&&i.leakWarningThreshold?new ae((s=(e=this._options)===null||e===void 0?void 0:e.leakWarningThreshold)!==null&&s!==void 0?s:-1):void 0,this._perfMon=!((n=this._options)===null||n===void 0)&&n._profName?new ce(this._options._profName):void 0,this._deliveryQueue=(o=this._options)===null||o===void 0?void 0:o.deliveryQueue}dispose(){var t,i,e,s;this._disposed||(this._disposed=!0,((t=this._deliveryQueue)===null||t===void 0?void 0:t.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(e=(i=this._options)===null||i===void 0?void 0:i.onDidRemoveLastListener)===null||e===void 0||e.call(i),(s=this._leakageMon)===null||s===void 0||s.dispose())}get event(){var t;return(t=this._event)!==null&&t!==void 0||(this._event=(t,i,e)=>{var s,n,o,r,h;if(this._leakageMon&&this._size>3*this._leakageMon.threshold)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),te.None;if(this._disposed)return te.None;i&&(t=t.bind(i));const c=new ue(t);let a;this._leakageMon&&this._size>=Math.ceil(.2*this._leakageMon.threshold)&&(c.stack=le.create(),a=this._leakageMon.check(c.stack,this._size+1)),this._listeners?this._listeners instanceof ue?((h=this._deliveryQueue)!==null&&h!==void 0||(this._deliveryQueue=new fe),this._listeners=[this._listeners,c]):this._listeners.push(c):((n=(s=this._options)===null||s===void 0?void 0:s.onWillAddFirstListener)===null||n===void 0||n.call(s,this),this._listeners=c,(r=(o=this._options)===null||o===void 0?void 0:o.onDidAddFirstListener)===null||r===void 0||r.call(o,this)),this._size++;const l=qi((()=>{a==null||a(),this._removeListener(c)}));return e instanceof Zi?e.add(l):Array.isArray(e)&&e.push(l),l}),this._event}_removeListener(t){var i,e,s,n;if((e=(i=this._options)===null||i===void 0?void 0:i.onWillRemoveListener)===null||e===void 0||e.call(i,this),!this._listeners)return;if(this._size===1)return this._listeners=void 0,(n=(s=this._options)===null||s===void 0?void 0:s.onDidRemoveLastListener)===null||n===void 0||n.call(s,this),void(this._size=0);const o=this._listeners,r=o.indexOf(t);if(r===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,o[r]=void 0;const h=this._deliveryQueue.current===this;if(2*this._size<=o.length){let t=0;for(let i=0;i<o.length;i++)o[i]?o[t++]=o[i]:h&&(this._deliveryQueue.end--,t<this._deliveryQueue.i&&this._deliveryQueue.i--);o.length=t}}_deliver(t,i){var e;if(!t)return;const s=((e=this._options)===null||e===void 0?void 0:e.onListenerError)||Oi;if(s)try{t.value(i)}catch(t){s(t)}else t.value(i)}_deliverQueue(t){const i=t.current._listeners;for(;t.i<t.end;)this._deliver(i[t.i++],t.value);t.reset()}fire(t){var i,e,s,n;if(!((i=this._deliveryQueue)===null||i===void 0)&&i.current&&(this._deliverQueue(this._deliveryQueue),(e=this._perfMon)===null||e===void 0||e.stop()),(s=this._perfMon)===null||s===void 0||s.start(this._size),this._listeners)if(this._listeners instanceof ue)this._deliver(this._listeners,t);else{const i=this._deliveryQueue;i.enqueue(this,t,this._listeners.length),this._deliverQueue(i)}(n=this._perfMon)===null||n===void 0||n.stop()}hasListeners(){return this._size>0}};class fe{constructor(){this.i=-1,this.end=0}enqueue(t,i,e){this.i=0,this.end=e,this.current=t,this.value=i}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class ge extends de{constructor(t){super(t),this._isPaused=0,this._eventQueue=new _t,this._mergeFn=t==null?void 0:t.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused==0)if(this._mergeFn){if(this._eventQueue.size>0){const t=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(t))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(t){this._size&&(this._isPaused!==0?this._eventQueue.push(t):super.fire(t))}}class Ae extends ge{constructor(t){var i;super(t),this._delay=(i=t.delay)!==null&&i!==void 0?i:100}fire(t){this._handle||(this.pause(),this._handle=setTimeout((()=>{this._handle=void 0,this.resume()}),this._delay)),super.fire(t)}}class pe extends de{constructor(t){super(t),this._queuedEvents=[],this._mergeFn=t==null?void 0:t.merge}fire(t){this.hasListeners()&&(this._queuedEvents.push(t),this._queuedEvents.length===1&&queueMicrotask((()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach((t=>super.fire(t))),this._queuedEvents=[]})))}}class we{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new de({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(t){const i={event:t,listener:null};return this.events.push(i),this.hasListeners&&this.hook(i),qi(Gi((()=>{this.hasListeners&&this.unhook(i);const t=this.events.indexOf(i);this.events.splice(t,1)})))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach((t=>this.hook(t)))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach((t=>this.unhook(t)))}hook(t){t.listener=t.event((t=>this.emitter.fire(t)))}unhook(t){var i;(i=t.listener)===null||i===void 0||i.dispose(),t.listener=null}dispose(){var t;this.emitter.dispose();for(const i of this.events)(t=i.listener)===null||t===void 0||t.dispose();this.events=[]}}class me{constructor(){this.buffers=[]}wrapEvent(t){return(i,e,s)=>t((t=>{const s=this.buffers[this.buffers.length-1];s?s.push((()=>i.call(e,t))):i.call(e,t)}),void 0,s)}bufferEvents(t){const i=[];this.buffers.push(i);const e=t();return this.buffers.pop(),i.forEach((t=>t())),e}}class ve{constructor(){this.listening=!1,this.inputEvent=he.None,this.inputEventListener=te.None,this.emitter=new de({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(t){this.inputEvent=t,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=t(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const be=Object.freeze((function(t,i){const e=setTimeout(t.bind(i),0);return{dispose(){clearTimeout(e)}}}));var ye;(function(t){t.isCancellationToken=function(i){return i===t.None||i===t.Cancelled||i instanceof ke||!(!i||typeof i!="object")&&typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"},t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:he.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:be})})(ye||(ye={}));class ke{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?be:(this._emitter||(this._emitter=new de),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let xe=class{constructor(t){this._token=void 0,this._parentListener=void 0,this._parentListener=t&&t.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new ke),this._token}cancel(){this._token?this._token instanceof ke&&this._token.cancel():this._token=ye.Cancelled}dispose(t=!1){var i;t&&this.cancel(),(i=this._parentListener)===null||i===void 0||i.dispose(),this._token?this._token instanceof ke&&this._token.dispose():this._token=ye.None}};class Ce{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(t,i){this._keyCodeToStr[t]=i,this._strToKeyCode[i.toLowerCase()]=t}keyCodeToStr(t){return this._keyCodeToStr[t]}strToKeyCode(t){return this._strToKeyCode[t.toLowerCase()]||0}}const Ee=new Ce,Be=new Ce,De=new Ce,Me=new Array(230),Se=Object.create(null),Fe=Object.create(null),Ie=[];for(let t=0;t<=193;t++)Ie[t]=-1;var Le;function Re(t,i){return(t|(65535&i)<<16>>>0)>>>0}let Te;(function(){const t="",i=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",t,t],[1,1,"Hyper",0,t,0,t,t,t],[1,2,"Super",0,t,0,t,t,t],[1,3,"Fn",0,t,0,t,t,t],[1,4,"FnLock",0,t,0,t,t,t],[1,5,"Suspend",0,t,0,t,t,t],[1,6,"Resume",0,t,0,t,t,t],[1,7,"Turbo",0,t,0,t,t,t],[1,8,"Sleep",0,t,0,"VK_SLEEP",t,t],[1,9,"WakeUp",0,t,0,t,t,t],[0,10,"KeyA",31,"A",65,"VK_A",t,t],[0,11,"KeyB",32,"B",66,"VK_B",t,t],[0,12,"KeyC",33,"C",67,"VK_C",t,t],[0,13,"KeyD",34,"D",68,"VK_D",t,t],[0,14,"KeyE",35,"E",69,"VK_E",t,t],[0,15,"KeyF",36,"F",70,"VK_F",t,t],[0,16,"KeyG",37,"G",71,"VK_G",t,t],[0,17,"KeyH",38,"H",72,"VK_H",t,t],[0,18,"KeyI",39,"I",73,"VK_I",t,t],[0,19,"KeyJ",40,"J",74,"VK_J",t,t],[0,20,"KeyK",41,"K",75,"VK_K",t,t],[0,21,"KeyL",42,"L",76,"VK_L",t,t],[0,22,"KeyM",43,"M",77,"VK_M",t,t],[0,23,"KeyN",44,"N",78,"VK_N",t,t],[0,24,"KeyO",45,"O",79,"VK_O",t,t],[0,25,"KeyP",46,"P",80,"VK_P",t,t],[0,26,"KeyQ",47,"Q",81,"VK_Q",t,t],[0,27,"KeyR",48,"R",82,"VK_R",t,t],[0,28,"KeyS",49,"S",83,"VK_S",t,t],[0,29,"KeyT",50,"T",84,"VK_T",t,t],[0,30,"KeyU",51,"U",85,"VK_U",t,t],[0,31,"KeyV",52,"V",86,"VK_V",t,t],[0,32,"KeyW",53,"W",87,"VK_W",t,t],[0,33,"KeyX",54,"X",88,"VK_X",t,t],[0,34,"KeyY",55,"Y",89,"VK_Y",t,t],[0,35,"KeyZ",56,"Z",90,"VK_Z",t,t],[0,36,"Digit1",22,"1",49,"VK_1",t,t],[0,37,"Digit2",23,"2",50,"VK_2",t,t],[0,38,"Digit3",24,"3",51,"VK_3",t,t],[0,39,"Digit4",25,"4",52,"VK_4",t,t],[0,40,"Digit5",26,"5",53,"VK_5",t,t],[0,41,"Digit6",27,"6",54,"VK_6",t,t],[0,42,"Digit7",28,"7",55,"VK_7",t,t],[0,43,"Digit8",29,"8",56,"VK_8",t,t],[0,44,"Digit9",30,"9",57,"VK_9",t,t],[0,45,"Digit0",21,"0",48,"VK_0",t,t],[1,46,"Enter",3,"Enter",13,"VK_RETURN",t,t],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",t,t],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",t,t],[1,49,"Tab",2,"Tab",9,"VK_TAB",t,t],[1,50,"Space",10,"Space",32,"VK_SPACE",t,t],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,t,0,t,t,t],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",t,t],[1,64,"F1",59,"F1",112,"VK_F1",t,t],[1,65,"F2",60,"F2",113,"VK_F2",t,t],[1,66,"F3",61,"F3",114,"VK_F3",t,t],[1,67,"F4",62,"F4",115,"VK_F4",t,t],[1,68,"F5",63,"F5",116,"VK_F5",t,t],[1,69,"F6",64,"F6",117,"VK_F6",t,t],[1,70,"F7",65,"F7",118,"VK_F7",t,t],[1,71,"F8",66,"F8",119,"VK_F8",t,t],[1,72,"F9",67,"F9",120,"VK_F9",t,t],[1,73,"F10",68,"F10",121,"VK_F10",t,t],[1,74,"F11",69,"F11",122,"VK_F11",t,t],[1,75,"F12",70,"F12",123,"VK_F12",t,t],[1,76,"PrintScreen",0,t,0,t,t,t],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",t,t],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",t,t],[1,79,"Insert",19,"Insert",45,"VK_INSERT",t,t],[1,80,"Home",14,"Home",36,"VK_HOME",t,t],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",t,t],[1,82,"Delete",20,"Delete",46,"VK_DELETE",t,t],[1,83,"End",13,"End",35,"VK_END",t,t],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",t,t],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",t],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",t],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",t],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",t],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",t,t],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",t,t],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",t,t],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",t,t],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",t,t],[1,94,"NumpadEnter",3,t,0,t,t,t],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",t,t],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",t,t],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",t,t],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",t,t],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",t,t],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",t,t],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",t,t],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",t,t],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",t,t],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",t,t],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",t,t],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",t,t],[1,107,"ContextMenu",58,"ContextMenu",93,t,t,t],[1,108,"Power",0,t,0,t,t,t],[1,109,"NumpadEqual",0,t,0,t,t,t],[1,110,"F13",71,"F13",124,"VK_F13",t,t],[1,111,"F14",72,"F14",125,"VK_F14",t,t],[1,112,"F15",73,"F15",126,"VK_F15",t,t],[1,113,"F16",74,"F16",127,"VK_F16",t,t],[1,114,"F17",75,"F17",128,"VK_F17",t,t],[1,115,"F18",76,"F18",129,"VK_F18",t,t],[1,116,"F19",77,"F19",130,"VK_F19",t,t],[1,117,"F20",78,"F20",131,"VK_F20",t,t],[1,118,"F21",79,"F21",132,"VK_F21",t,t],[1,119,"F22",80,"F22",133,"VK_F22",t,t],[1,120,"F23",81,"F23",134,"VK_F23",t,t],[1,121,"F24",82,"F24",135,"VK_F24",t,t],[1,122,"Open",0,t,0,t,t,t],[1,123,"Help",0,t,0,t,t,t],[1,124,"Select",0,t,0,t,t,t],[1,125,"Again",0,t,0,t,t,t],[1,126,"Undo",0,t,0,t,t,t],[1,127,"Cut",0,t,0,t,t,t],[1,128,"Copy",0,t,0,t,t,t],[1,129,"Paste",0,t,0,t,t,t],[1,130,"Find",0,t,0,t,t,t],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",t,t],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",t,t],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",t,t],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",t,t],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",t,t],[1,136,"KanaMode",0,t,0,t,t,t],[0,137,"IntlYen",0,t,0,t,t,t],[1,138,"Convert",0,t,0,t,t,t],[1,139,"NonConvert",0,t,0,t,t,t],[1,140,"Lang1",0,t,0,t,t,t],[1,141,"Lang2",0,t,0,t,t,t],[1,142,"Lang3",0,t,0,t,t,t],[1,143,"Lang4",0,t,0,t,t,t],[1,144,"Lang5",0,t,0,t,t,t],[1,145,"Abort",0,t,0,t,t,t],[1,146,"Props",0,t,0,t,t,t],[1,147,"NumpadParenLeft",0,t,0,t,t,t],[1,148,"NumpadParenRight",0,t,0,t,t,t],[1,149,"NumpadBackspace",0,t,0,t,t,t],[1,150,"NumpadMemoryStore",0,t,0,t,t,t],[1,151,"NumpadMemoryRecall",0,t,0,t,t,t],[1,152,"NumpadMemoryClear",0,t,0,t,t,t],[1,153,"NumpadMemoryAdd",0,t,0,t,t,t],[1,154,"NumpadMemorySubtract",0,t,0,t,t,t],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",t,t],[1,156,"NumpadClearEntry",0,t,0,t,t,t],[1,0,t,5,"Ctrl",17,"VK_CONTROL",t,t],[1,0,t,4,"Shift",16,"VK_SHIFT",t,t],[1,0,t,6,"Alt",18,"VK_MENU",t,t],[1,0,t,57,"Meta",91,"VK_COMMAND",t,t],[1,157,"ControlLeft",5,t,0,"VK_LCONTROL",t,t],[1,158,"ShiftLeft",4,t,0,"VK_LSHIFT",t,t],[1,159,"AltLeft",6,t,0,"VK_LMENU",t,t],[1,160,"MetaLeft",57,t,0,"VK_LWIN",t,t],[1,161,"ControlRight",5,t,0,"VK_RCONTROL",t,t],[1,162,"ShiftRight",4,t,0,"VK_RSHIFT",t,t],[1,163,"AltRight",6,t,0,"VK_RMENU",t,t],[1,164,"MetaRight",57,t,0,"VK_RWIN",t,t],[1,165,"BrightnessUp",0,t,0,t,t,t],[1,166,"BrightnessDown",0,t,0,t,t,t],[1,167,"MediaPlay",0,t,0,t,t,t],[1,168,"MediaRecord",0,t,0,t,t,t],[1,169,"MediaFastForward",0,t,0,t,t,t],[1,170,"MediaRewind",0,t,0,t,t,t],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",t,t],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",t,t],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",t,t],[1,174,"Eject",0,t,0,t,t,t],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",t,t],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",t,t],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",t,t],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",t,t],[1,179,"LaunchApp1",0,t,0,"VK_MEDIA_LAUNCH_APP1",t,t],[1,180,"SelectTask",0,t,0,t,t,t],[1,181,"LaunchScreenSaver",0,t,0,t,t,t],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",t,t],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",t,t],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",t,t],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",t,t],[1,186,"BrowserStop",0,t,0,"VK_BROWSER_STOP",t,t],[1,187,"BrowserRefresh",0,t,0,"VK_BROWSER_REFRESH",t,t],[1,188,"BrowserFavorites",0,t,0,"VK_BROWSER_FAVORITES",t,t],[1,189,"ZoomToggle",0,t,0,t,t,t],[1,190,"MailReply",0,t,0,t,t,t],[1,191,"MailForward",0,t,0,t,t,t],[1,192,"MailSend",0,t,0,t,t,t],[1,0,t,114,"KeyInComposition",229,t,t,t],[1,0,t,116,"ABNT_C2",194,"VK_ABNT_C2",t,t],[1,0,t,96,"OEM_8",223,"VK_OEM_8",t,t],[1,0,t,0,t,0,"VK_KANA",t,t],[1,0,t,0,t,0,"VK_HANGUL",t,t],[1,0,t,0,t,0,"VK_JUNJA",t,t],[1,0,t,0,t,0,"VK_FINAL",t,t],[1,0,t,0,t,0,"VK_HANJA",t,t],[1,0,t,0,t,0,"VK_KANJI",t,t],[1,0,t,0,t,0,"VK_CONVERT",t,t],[1,0,t,0,t,0,"VK_NONCONVERT",t,t],[1,0,t,0,t,0,"VK_ACCEPT",t,t],[1,0,t,0,t,0,"VK_MODECHANGE",t,t],[1,0,t,0,t,0,"VK_SELECT",t,t],[1,0,t,0,t,0,"VK_PRINT",t,t],[1,0,t,0,t,0,"VK_EXECUTE",t,t],[1,0,t,0,t,0,"VK_SNAPSHOT",t,t],[1,0,t,0,t,0,"VK_HELP",t,t],[1,0,t,0,t,0,"VK_APPS",t,t],[1,0,t,0,t,0,"VK_PROCESSKEY",t,t],[1,0,t,0,t,0,"VK_PACKET",t,t],[1,0,t,0,t,0,"VK_DBE_SBCSCHAR",t,t],[1,0,t,0,t,0,"VK_DBE_DBCSCHAR",t,t],[1,0,t,0,t,0,"VK_ATTN",t,t],[1,0,t,0,t,0,"VK_CRSEL",t,t],[1,0,t,0,t,0,"VK_EXSEL",t,t],[1,0,t,0,t,0,"VK_EREOF",t,t],[1,0,t,0,t,0,"VK_PLAY",t,t],[1,0,t,0,t,0,"VK_ZOOM",t,t],[1,0,t,0,t,0,"VK_NONAME",t,t],[1,0,t,0,t,0,"VK_PA1",t,t],[1,0,t,0,t,0,"VK_OEM_CLEAR",t,t]],e=[],s=[];for(const t of i){const[i,n,o,r,h,c,a,l,u]=t;if(s[n]||(s[n]=!0,Se[o]=n,Fe[o.toLowerCase()]=n,i&&(Ie[n]=r)),!e[r]){if(e[r]=!0,!h)throw new Error(`String representation missing for key code ${r} around scan code ${o}`);Ee.define(r,h),Be.define(r,l||h),De.define(r,u||l||h)}c&&(Me[c]=r)}})(),function(t){t.toString=function(t){return Ee.keyCodeToStr(t)},t.fromString=function(t){return Ee.strToKeyCode(t)},t.toUserSettingsUS=function(t){return Be.keyCodeToStr(t)},t.toUserSettingsGeneral=function(t){return De.keyCodeToStr(t)},t.fromUserSettings=function(t){return Be.strToKeyCode(t)||De.strToKeyCode(t)},t.toElectronAccelerator=function(t){if(t>=98&&t<=113)return null;switch(t){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Ee.keyCodeToStr(t)}}(Le||(Le={}));const Ne=globalThis.vscode;if(Ne!==void 0&&Ne.process!==void 0){const t=Ne.process;Te={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd:()=>t.cwd()}}else Te=typeof process<"u"?{get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd:()=>process.env.VSCODE_CWD||process.cwd()}:{get platform(){return yt?"win32":kt?"darwin":"linux"},get arch(){},get env(){return{}},cwd:()=>"/"};const Qe=Te.cwd,Oe=Te.env,ze=Te.platform,Ue=46,He=47,Pe=92,je=58;class We extends Error{constructor(t,i,e){let s;typeof i=="string"&&i.indexOf("not ")===0?(s="must not be",i=i.replace(/^not /,"")):s="must be";const n=t.indexOf(".")!==-1?"property":"argument";let o=`The "${t}" ${n} ${s} of type ${i}`;o+=". Received type "+typeof e,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function Ye(t,i){if(typeof t!="string")throw new We(i,"string",t)}const _e=ze==="win32";function Ve(t){return t===He||t===Pe}function Je(t){return t===He}function Ge(t){return t>=65&&t<=90||t>=97&&t<=122}function Ke(t,i,e,s){let n="",o=0,r=-1,h=0,c=0;for(let a=0;a<=t.length;++a){if(a<t.length)c=t.charCodeAt(a);else{if(s(c))break;c=He}if(s(c)){if(!(r===a-1||h===1))if(h===2){if(n.length<2||o!==2||n.charCodeAt(n.length-1)!==Ue||n.charCodeAt(n.length-2)!==Ue){if(n.length>2){const t=n.lastIndexOf(e);t===-1?(n="",o=0):(n=n.slice(0,t),o=n.length-1-n.lastIndexOf(e)),r=a,h=0;continue}if(n.length!==0){n="",o=0,r=a,h=0;continue}}i&&(n+=n.length>0?`${e}..`:"..",o=2)}else n.length>0?n+=`${e}${t.slice(r+1,a)}`:n=t.slice(r+1,a),o=a-r-1;r=a,h=0}else c===Ue&&h!==-1?++h:h=-1}return n}function $e(t,i){(function(t,i){if(t===null||typeof t!="object")throw new We(i,"Object",t)})(i,"pathObject");const e=i.dir||i.root,s=i.base||`${i.name||""}${i.ext||""}`;return e?e===i.root?`${e}${s}`:`${e}${t}${s}`:s}const Xe={resolve(...t){let i="",e="",s=!1;for(let n=t.length-1;n>=-1;n--){let o;if(n>=0){if(o=t[n],Ye(o,"path"),o.length===0)continue}else i.length===0?o=Qe():(o=Oe[`=${i}`]||Qe(),(o===void 0||o.slice(0,2).toLowerCase()!==i.toLowerCase()&&o.charCodeAt(2)===Pe)&&(o=`${i}\\`));const r=o.length;let h=0,c="",a=!1;const l=o.charCodeAt(0);if(r===1)Ve(l)&&(h=1,a=!0);else if(Ve(l))if(a=!0,Ve(o.charCodeAt(1))){let t=2,i=t;for(;t<r&&!Ve(o.charCodeAt(t));)t++;if(t<r&&t!==i){const e=o.slice(i,t);for(i=t;t<r&&Ve(o.charCodeAt(t));)t++;if(t<r&&t!==i){for(i=t;t<r&&!Ve(o.charCodeAt(t));)t++;t!==r&&t===i||(c=`\\\\${e}\\${o.slice(i,t)}`,h=t)}}}else h=1;else Ge(l)&&o.charCodeAt(1)===je&&(c=o.slice(0,2),h=2,r>2&&Ve(o.charCodeAt(2))&&(a=!0,h=3));if(c.length>0)if(i.length>0){if(c.toLowerCase()!==i.toLowerCase())continue}else i=c;if(s){if(i.length>0)break}else if(e=`${o.slice(h)}\\${e}`,s=a,a&&i.length>0)break}return e=Ke(e,!s,"\\",Ve),s?`${i}\\${e}`:`${i}${e}`||"."},normalize(t){Ye(t,"path");const i=t.length;if(i===0)return".";let e,s=0,n=!1;const o=t.charCodeAt(0);if(i===1)return Je(o)?"\\":t;if(Ve(o))if(n=!0,Ve(t.charCodeAt(1))){let n=2,o=n;for(;n<i&&!Ve(t.charCodeAt(n));)n++;if(n<i&&n!==o){const r=t.slice(o,n);for(o=n;n<i&&Ve(t.charCodeAt(n));)n++;if(n<i&&n!==o){for(o=n;n<i&&!Ve(t.charCodeAt(n));)n++;if(n===i)return`\\\\${r}\\${t.slice(o)}\\`;n!==o&&(e=`\\\\${r}\\${t.slice(o,n)}`,s=n)}}}else s=1;else Ge(o)&&t.charCodeAt(1)===je&&(e=t.slice(0,2),s=2,i>2&&Ve(t.charCodeAt(2))&&(n=!0,s=3));let r=s<i?Ke(t.slice(s),!n,"\\",Ve):"";return r.length!==0||n||(r="."),r.length>0&&Ve(t.charCodeAt(i-1))&&(r+="\\"),e===void 0?n?`\\${r}`:r:n?`${e}\\${r}`:`${e}${r}`},isAbsolute(t){Ye(t,"path");const i=t.length;if(i===0)return!1;const e=t.charCodeAt(0);return Ve(e)||i>2&&Ge(e)&&t.charCodeAt(1)===je&&Ve(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let i,e;for(let s=0;s<t.length;++s){const n=t[s];Ye(n,"path"),n.length>0&&(i===void 0?i=e=n:i+=`\\${n}`)}if(i===void 0)return".";let s=!0,n=0;if(typeof e=="string"&&Ve(e.charCodeAt(0))){++n;const t=e.length;t>1&&Ve(e.charCodeAt(1))&&(++n,t>2&&(Ve(e.charCodeAt(2))?++n:s=!1))}if(s){for(;n<i.length&&Ve(i.charCodeAt(n));)n++;n>=2&&(i=`\\${i.slice(n)}`)}return Xe.normalize(i)},relative(t,i){if(Ye(t,"from"),Ye(i,"to"),t===i)return"";const e=Xe.resolve(t),s=Xe.resolve(i);if(e===s||(t=e.toLowerCase())===(i=s.toLowerCase()))return"";let n=0;for(;n<t.length&&t.charCodeAt(n)===Pe;)n++;let o=t.length;for(;o-1>n&&t.charCodeAt(o-1)===Pe;)o--;const r=o-n;let h=0;for(;h<i.length&&i.charCodeAt(h)===Pe;)h++;let c=i.length;for(;c-1>h&&i.charCodeAt(c-1)===Pe;)c--;const a=c-h,l=r<a?r:a;let u=-1,d=0;for(;d<l;d++){const e=t.charCodeAt(n+d);if(e!==i.charCodeAt(h+d))break;e===Pe&&(u=d)}if(d!==l){if(u===-1)return s}else{if(a>l){if(i.charCodeAt(h+d)===Pe)return s.slice(h+d+1);if(d===2)return s.slice(h+d)}r>l&&(t.charCodeAt(n+d)===Pe?u=d:d===2&&(u=3)),u===-1&&(u=0)}let f="";for(d=n+u+1;d<=o;++d)d!==o&&t.charCodeAt(d)!==Pe||(f+=f.length===0?"..":"\\..");return h+=u,f.length>0?`${f}${s.slice(h,c)}`:(s.charCodeAt(h)===Pe&&++h,s.slice(h,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;const i=Xe.resolve(t);if(i.length<=2)return t;if(i.charCodeAt(0)===Pe){if(i.charCodeAt(1)===Pe){const t=i.charCodeAt(2);if(t!==63&&t!==Ue)return`\\\\?\\UNC\\${i.slice(2)}`}}else if(Ge(i.charCodeAt(0))&&i.charCodeAt(1)===je&&i.charCodeAt(2)===Pe)return`\\\\?\\${i}`;return t},dirname(t){Ye(t,"path");const i=t.length;if(i===0)return".";let e=-1,s=0;const n=t.charCodeAt(0);if(i===1)return Ve(n)?t:".";if(Ve(n)){if(e=s=1,Ve(t.charCodeAt(1))){let n=2,o=n;for(;n<i&&!Ve(t.charCodeAt(n));)n++;if(n<i&&n!==o){for(o=n;n<i&&Ve(t.charCodeAt(n));)n++;if(n<i&&n!==o){for(o=n;n<i&&!Ve(t.charCodeAt(n));)n++;if(n===i)return t;n!==o&&(e=s=n+1)}}}}else Ge(n)&&t.charCodeAt(1)===je&&(e=i>2&&Ve(t.charCodeAt(2))?3:2,s=e);let o=-1,r=!0;for(let e=i-1;e>=s;--e)if(Ve(t.charCodeAt(e))){if(!r){o=e;break}}else r=!1;if(o===-1){if(e===-1)return".";o=e}return t.slice(0,o)},basename(t,i){i!==void 0&&Ye(i,"ext"),Ye(t,"path");let e,s=0,n=-1,o=!0;if(t.length>=2&&Ge(t.charCodeAt(0))&&t.charCodeAt(1)===je&&(s=2),i!==void 0&&i.length>0&&i.length<=t.length){if(i===t)return"";let r=i.length-1,h=-1;for(e=t.length-1;e>=s;--e){const c=t.charCodeAt(e);if(Ve(c)){if(!o){s=e+1;break}}else h===-1&&(o=!1,h=e+1),r>=0&&(c===i.charCodeAt(r)?--r==-1&&(n=e):(r=-1,n=h))}return s===n?n=h:n===-1&&(n=t.length),t.slice(s,n)}for(e=t.length-1;e>=s;--e)if(Ve(t.charCodeAt(e))){if(!o){s=e+1;break}}else n===-1&&(o=!1,n=e+1);return n===-1?"":t.slice(s,n)},extname(t){Ye(t,"path");let i=0,e=-1,s=0,n=-1,o=!0,r=0;t.length>=2&&t.charCodeAt(1)===je&&Ge(t.charCodeAt(0))&&(i=s=2);for(let h=t.length-1;h>=i;--h){const i=t.charCodeAt(h);if(Ve(i)){if(!o){s=h+1;break}}else n===-1&&(o=!1,n=h+1),i===Ue?e===-1?e=h:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||n===-1||r===0||r===1&&e===n-1&&e===s+1?"":t.slice(e,n)},format:$e.bind(null,"\\"),parse(t){Ye(t,"path");const i={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return i;const e=t.length;let s=0,n=t.charCodeAt(0);if(e===1)return Ve(n)?(i.root=i.dir=t,i):(i.base=i.name=t,i);if(Ve(n)){if(s=1,Ve(t.charCodeAt(1))){let i=2,n=i;for(;i<e&&!Ve(t.charCodeAt(i));)i++;if(i<e&&i!==n){for(n=i;i<e&&Ve(t.charCodeAt(i));)i++;if(i<e&&i!==n){for(n=i;i<e&&!Ve(t.charCodeAt(i));)i++;i===e?s=i:i!==n&&(s=i+1)}}}}else if(Ge(n)&&t.charCodeAt(1)===je){if(e<=2)return i.root=i.dir=t,i;if(s=2,Ve(t.charCodeAt(2))){if(e===3)return i.root=i.dir=t,i;s=3}}s>0&&(i.root=t.slice(0,s));let o=-1,r=s,h=-1,c=!0,a=t.length-1,l=0;for(;a>=s;--a)if(n=t.charCodeAt(a),Ve(n)){if(!c){r=a+1;break}}else h===-1&&(c=!1,h=a+1),n===Ue?o===-1?o=a:l!==1&&(l=1):o!==-1&&(l=-1);return h!==-1&&(o===-1||l===0||l===1&&o===h-1&&o===r+1?i.base=i.name=t.slice(r,h):(i.name=t.slice(r,o),i.base=t.slice(r,h),i.ext=t.slice(o,h))),i.dir=r>0&&r!==s?t.slice(0,r-1):i.root,i},sep:"\\",delimiter:";",win32:null,posix:null},qe=(()=>{if(_e){const t=/\\/g;return()=>{const i=Qe().replace(t,"/");return i.slice(i.indexOf("/"))}}return()=>Qe()})(),Ze={resolve(...t){let i="",e=!1;for(let s=t.length-1;s>=-1&&!e;s--){const n=s>=0?t[s]:qe();Ye(n,"path"),n.length!==0&&(i=`${n}/${i}`,e=n.charCodeAt(0)===He)}return i=Ke(i,!e,"/",Je),e?`/${i}`:i.length>0?i:"."},normalize(t){if(Ye(t,"path"),t.length===0)return".";const i=t.charCodeAt(0)===He,e=t.charCodeAt(t.length-1)===He;return(t=Ke(t,!i,"/",Je)).length===0?i?"/":e?"./":".":(e&&(t+="/"),i?`/${t}`:t)},isAbsolute:t=>(Ye(t,"path"),t.length>0&&t.charCodeAt(0)===He),join(...t){if(t.length===0)return".";let i;for(let e=0;e<t.length;++e){const s=t[e];Ye(s,"path"),s.length>0&&(i===void 0?i=s:i+=`/${s}`)}return i===void 0?".":Ze.normalize(i)},relative(t,i){if(Ye(t,"from"),Ye(i,"to"),t===i||(t=Ze.resolve(t))===(i=Ze.resolve(i)))return"";const e=t.length,s=e-1,n=i.length-1,o=s<n?s:n;let r=-1,h=0;for(;h<o;h++){const e=t.charCodeAt(1+h);if(e!==i.charCodeAt(1+h))break;e===He&&(r=h)}if(h===o)if(n>o){if(i.charCodeAt(1+h)===He)return i.slice(1+h+1);if(h===0)return i.slice(1+h)}else s>o&&(t.charCodeAt(1+h)===He?r=h:h===0&&(r=0));let c="";for(h=1+r+1;h<=e;++h)h!==e&&t.charCodeAt(h)!==He||(c+=c.length===0?"..":"/..");return`${c}${i.slice(1+r)}`},toNamespacedPath:t=>t,dirname(t){if(Ye(t,"path"),t.length===0)return".";const i=t.charCodeAt(0)===He;let e=-1,s=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===He){if(!s){e=i;break}}else s=!1;return e===-1?i?"/":".":i&&e===1?"//":t.slice(0,e)},basename(t,i){i!==void 0&&Ye(i,"ext"),Ye(t,"path");let e,s=0,n=-1,o=!0;if(i!==void 0&&i.length>0&&i.length<=t.length){if(i===t)return"";let r=i.length-1,h=-1;for(e=t.length-1;e>=0;--e){const c=t.charCodeAt(e);if(c===He){if(!o){s=e+1;break}}else h===-1&&(o=!1,h=e+1),r>=0&&(c===i.charCodeAt(r)?--r==-1&&(n=e):(r=-1,n=h))}return s===n?n=h:n===-1&&(n=t.length),t.slice(s,n)}for(e=t.length-1;e>=0;--e)if(t.charCodeAt(e)===He){if(!o){s=e+1;break}}else n===-1&&(o=!1,n=e+1);return n===-1?"":t.slice(s,n)},extname(t){Ye(t,"path");let i=-1,e=0,s=-1,n=!0,o=0;for(let r=t.length-1;r>=0;--r){const h=t.charCodeAt(r);if(h!==He)s===-1&&(n=!1,s=r+1),h===Ue?i===-1?i=r:o!==1&&(o=1):i!==-1&&(o=-1);else if(!n){e=r+1;break}}return i===-1||s===-1||o===0||o===1&&i===s-1&&i===e+1?"":t.slice(i,s)},format:$e.bind(null,"/"),parse(t){Ye(t,"path");const i={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return i;const e=t.charCodeAt(0)===He;let s;e?(i.root="/",s=1):s=0;let n=-1,o=0,r=-1,h=!0,c=t.length-1,a=0;for(;c>=s;--c){const i=t.charCodeAt(c);if(i!==He)r===-1&&(h=!1,r=c+1),i===Ue?n===-1?n=c:a!==1&&(a=1):n!==-1&&(a=-1);else if(!h){o=c+1;break}}if(r!==-1){const s=o===0&&e?1:o;n===-1||a===0||a===1&&n===r-1&&n===o+1?i.base=i.name=t.slice(s,r):(i.name=t.slice(s,n),i.base=t.slice(s,r),i.ext=t.slice(n,r))}return o>0?i.dir=t.slice(0,o-1):e&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};Ze.win32=Xe.win32=Xe,Ze.posix=Xe.posix=Ze;const ts=_e?Xe.normalize:Ze.normalize,is=_e?Xe.resolve:Ze.resolve,es=_e?Xe.relative:Ze.relative,ss=_e?Xe.dirname:Ze.dirname,ns=_e?Xe.basename:Ze.basename,os=_e?Xe.extname:Ze.extname,rs=_e?Xe.sep:Ze.sep,hs=/^\w[\w\d+.-]*$/,cs=/^\//,as=/^\/\//,ls="",us="/",ds=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;let fs=class t{static isUri(i){return i instanceof t||!!i&&typeof i.authority=="string"&&typeof i.fragment=="string"&&typeof i.path=="string"&&typeof i.query=="string"&&typeof i.scheme=="string"&&typeof i.fsPath=="string"&&typeof i.with=="function"&&typeof i.toString=="function"}constructor(t,i,e,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||ls,this.authority=t.authority||ls,this.path=t.path||ls,this.query=t.query||ls,this.fragment=t.fragment||ls):(this.scheme=function(t,i){return t||i?t:"file"}(t,o),this.authority=i||ls,this.path=function(t,i){switch(t){case"https":case"http":case"file":i?i[0]!==us&&(i=us+i):i=us}return i}(this.scheme,e||ls),this.query=s||ls,this.fragment=n||ls,function(t,i){if(!t.scheme&&i)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!hs.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!cs.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(as.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}(this,o))}get fsPath(){return vs(this,!1)}with(t){if(!t)return this;let{scheme:i,authority:e,path:s,query:n,fragment:o}=t;return i===void 0?i=this.scheme:i===null&&(i=ls),e===void 0?e=this.authority:e===null&&(e=ls),s===void 0?s=this.path:s===null&&(s=ls),n===void 0?n=this.query:n===null&&(n=ls),o===void 0?o=this.fragment:o===null&&(o=ls),i===this.scheme&&e===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new As(i,e,s,n,o)}static parse(t,i=!1){const e=ds.exec(t);return e?new As(e[2]||ls,xs(e[4]||ls),xs(e[5]||ls),xs(e[7]||ls),xs(e[9]||ls),i):new As(ls,ls,ls,ls,ls)}static file(t){let i=ls;if(yt&&(t=t.replace(/\\/g,us)),t[0]===us&&t[1]===us){const e=t.indexOf(us,2);e===-1?(i=t.substring(2),t=us):(i=t.substring(2,e),t=t.substring(e)||us)}return new As("file",i,t,ls,ls)}static from(t,i){return new As(t.scheme,t.authority,t.path,t.query,t.fragment,i)}static joinPath(i,...e){if(!i.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let s;return s=yt&&i.scheme==="file"?t.file(Xe.join(vs(i,!0),...e)).path:Ze.join(i.path,...e),i.with({path:s})}toString(t=!1){return bs(this,t)}toJSON(){return this}static revive(i){var e,s;if(i){if(i instanceof t)return i;{const t=new As(i);return t._formatted=(e=i.external)!==null&&e!==void 0?e:null,t._fsPath=i._sep===gs&&(s=i.fsPath)!==null&&s!==void 0?s:null,t}}return i}};const gs=yt?1:void 0;let As=class extends fs{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=vs(this,!1)),this._fsPath}toString(t=!1){return t?bs(this,!0):(this._formatted||(this._formatted=bs(this,!1)),this._formatted)}toJSON(){const t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=gs),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t}};const ps={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function ws(t,i,e){let s,n=-1;for(let o=0;o<t.length;o++){const r=t.charCodeAt(o);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||i&&r===47||e&&r===91||e&&r===93||e&&r===58)n!==-1&&(s+=encodeURIComponent(t.substring(n,o)),n=-1),s!==void 0&&(s+=t.charAt(o));else{s===void 0&&(s=t.substr(0,o));const i=ps[r];i!==void 0?(n!==-1&&(s+=encodeURIComponent(t.substring(n,o)),n=-1),s+=i):n===-1&&(n=o)}}return n!==-1&&(s+=encodeURIComponent(t.substring(n))),s!==void 0?s:t}function ms(t){let i;for(let e=0;e<t.length;e++){const s=t.charCodeAt(e);s===35||s===63?(i===void 0&&(i=t.substr(0,e)),i+=ps[s]):i!==void 0&&(i+=t[e])}return i!==void 0?i:t}function vs(t,i){let e;return e=t.authority&&t.path.length>1&&t.scheme==="file"?`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?i?t.path.substr(1):t.path[1].toLowerCase()+t.path.substr(2):t.path,yt&&(e=e.replace(/\//g,"\\")),e}function bs(t,i){const e=i?ms:ws;let s="",{scheme:n,authority:o,path:r,query:h,fragment:c}=t;if(n&&(s+=n,s+=":"),(o||n==="file")&&(s+=us,s+=us),o){let t=o.indexOf("@");if(t!==-1){const i=o.substr(0,t);o=o.substr(t+1),t=i.lastIndexOf(":"),t===-1?s+=e(i,!1,!1):(s+=e(i.substr(0,t),!1,!1),s+=":",s+=e(i.substr(t+1),!1,!0)),s+="@"}o=o.toLowerCase(),t=o.lastIndexOf(":"),t===-1?s+=e(o,!1,!0):(s+=e(o.substr(0,t),!1,!0),s+=o.substr(t))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const t=r.charCodeAt(1);t>=65&&t<=90&&(r=`/${String.fromCharCode(t+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const t=r.charCodeAt(0);t>=65&&t<=90&&(r=`${String.fromCharCode(t+32)}:${r.substr(2)}`)}s+=e(r,!0,!1)}return h&&(s+="?",s+=e(h,!1,!1)),c&&(s+="#",s+=i?c:ws(c,!1,!1)),s}function ys(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+ys(t.substr(3)):t}}const ks=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function xs(t){return t.match(ks)?t.replace(ks,(t=>ys(t))):t}let Cs=class t{constructor(t,i){this.lineNumber=t,this.column=i}with(i=this.lineNumber,e=this.column){return i===this.lineNumber&&e===this.column?this:new t(i,e)}delta(t=0,i=0){return this.with(this.lineNumber+t,this.column+i)}equals(i){return t.equals(this,i)}static equals(t,i){return!t&&!i||!!t&&!!i&&t.lineNumber===i.lineNumber&&t.column===i.column}isBefore(i){return t.isBefore(this,i)}static isBefore(t,i){return t.lineNumber<i.lineNumber||!(i.lineNumber<t.lineNumber)&&t.column<i.column}isBeforeOrEqual(i){return t.isBeforeOrEqual(this,i)}static isBeforeOrEqual(t,i){return t.lineNumber<i.lineNumber||!(i.lineNumber<t.lineNumber)&&t.column<=i.column}static compare(t,i){const e=0|t.lineNumber,s=0|i.lineNumber;return e===s?(0|t.column)-(0|i.column):e-s}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(i){return new t(i.lineNumber,i.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},Es=class t{constructor(t,i,e,s){t>e||t===e&&i>s?(this.startLineNumber=e,this.startColumn=s,this.endLineNumber=t,this.endColumn=i):(this.startLineNumber=t,this.startColumn=i,this.endLineNumber=e,this.endColumn=s)}isEmpty(){return t.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(i){return t.containsPosition(this,i)}static containsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber)&&!(i.lineNumber===t.startLineNumber&&i.column<t.startColumn)&&!(i.lineNumber===t.endLineNumber&&i.column>t.endColumn)}static strictContainsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber)&&!(i.lineNumber===t.startLineNumber&&i.column<=t.startColumn)&&!(i.lineNumber===t.endLineNumber&&i.column>=t.endColumn)}containsRange(i){return t.containsRange(this,i)}static containsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber)&&!(i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber)&&!(i.startLineNumber===t.startLineNumber&&i.startColumn<t.startColumn)&&!(i.endLineNumber===t.endLineNumber&&i.endColumn>t.endColumn)}strictContainsRange(i){return t.strictContainsRange(this,i)}static strictContainsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber)&&!(i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber)&&!(i.startLineNumber===t.startLineNumber&&i.startColumn<=t.startColumn)&&!(i.endLineNumber===t.endLineNumber&&i.endColumn>=t.endColumn)}plusRange(i){return t.plusRange(this,i)}static plusRange(i,e){let s,n,o,r;return e.startLineNumber<i.startLineNumber?(s=e.startLineNumber,n=e.startColumn):e.startLineNumber===i.startLineNumber?(s=e.startLineNumber,n=Math.min(e.startColumn,i.startColumn)):(s=i.startLineNumber,n=i.startColumn),e.endLineNumber>i.endLineNumber?(o=e.endLineNumber,r=e.endColumn):e.endLineNumber===i.endLineNumber?(o=e.endLineNumber,r=Math.max(e.endColumn,i.endColumn)):(o=i.endLineNumber,r=i.endColumn),new t(s,n,o,r)}intersectRanges(i){return t.intersectRanges(this,i)}static intersectRanges(i,e){let s=i.startLineNumber,n=i.startColumn,o=i.endLineNumber,r=i.endColumn;const h=e.startLineNumber,c=e.startColumn,a=e.endLineNumber,l=e.endColumn;return s<h?(s=h,n=c):s===h&&(n=Math.max(n,c)),o>a?(o=a,r=l):o===a&&(r=Math.min(r,l)),s>o||s===o&&n>r?null:new t(s,n,o,r)}equalsRange(i){return t.equalsRange(this,i)}static equalsRange(t,i){return!t&&!i||!!t&&!!i&&t.startLineNumber===i.startLineNumber&&t.startColumn===i.startColumn&&t.endLineNumber===i.endLineNumber&&t.endColumn===i.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(t){return new Cs(t.endLineNumber,t.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(t){return new Cs(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(i,e){return new t(this.startLineNumber,this.startColumn,i,e)}setStartPosition(i,e){return new t(i,e,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(i){return new t(i.startLineNumber,i.startColumn,i.startLineNumber,i.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(i){return new t(i.endLineNumber,i.endColumn,i.endLineNumber,i.endColumn)}delta(i){return new t(this.startLineNumber+i,this.startColumn,this.endLineNumber+i,this.endColumn)}static fromPositions(i,e=i){return new t(i.lineNumber,i.column,e.lineNumber,e.column)}static lift(i){return i?new t(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn)&&!(i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn)}static areIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<=i.startColumn)&&!(i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<=t.startColumn)}static compareRangesUsingStarts(t,i){if(t&&i){const e=0|t.startLineNumber,s=0|i.startLineNumber;if(e===s){const e=0|t.startColumn,s=0|i.startColumn;if(e===s){const e=0|t.endLineNumber,s=0|i.endLineNumber;return e===s?(0|t.endColumn)-(0|i.endColumn):e-s}return e-s}return e-s}return(t?1:0)-(i?1:0)}static compareRangesUsingEnds(t,i){return t.endLineNumber===i.endLineNumber?t.endColumn===i.endColumn?t.startLineNumber===i.startLineNumber?t.startColumn-i.startColumn:t.startLineNumber-i.startLineNumber:t.endColumn-i.endColumn:t.endLineNumber-i.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},Bs=class t extends Es{constructor(t,i,e,s){super(t,i,e,s),this.selectionStartLineNumber=t,this.selectionStartColumn=i,this.positionLineNumber=e,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(i){return t.selectionsEqual(this,i)}static selectionsEqual(t,i){return t.selectionStartLineNumber===i.selectionStartLineNumber&&t.selectionStartColumn===i.selectionStartColumn&&t.positionLineNumber===i.positionLineNumber&&t.positionColumn===i.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(i,e){return this.getDirection()===0?new t(this.startLineNumber,this.startColumn,i,e):new t(i,e,this.startLineNumber,this.startColumn)}getPosition(){return new Cs(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Cs(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(i,e){return this.getDirection()===0?new t(i,e,this.endLineNumber,this.endColumn):new t(this.endLineNumber,this.endColumn,i,e)}static fromPositions(i,e=i){return new t(i.lineNumber,i.column,e.lineNumber,e.column)}static fromRange(i,e){return e===0?new t(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):new t(i.endLineNumber,i.endColumn,i.startLineNumber,i.startColumn)}static liftSelection(i){return new t(i.selectionStartLineNumber,i.selectionStartColumn,i.positionLineNumber,i.positionColumn)}static selectionsArrEqual(t,i){if(t&&!i||!t&&i)return!1;if(!t&&!i)return!0;if(t.length!==i.length)return!1;for(let e=0,s=t.length;e<s;e++)if(!this.selectionsEqual(t[e],i[e]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(i,e,s,n,o){return o===0?new t(i,e,s,n):new t(s,n,i,e)}};const Ds=Object.create(null);function Ms(t,i){if(N(i)){const e=Ds[i];if(e===void 0)throw new Error(`${t} references an unknown codicon: ${i}`);i=e}return Ds[t]=i,{id:t}}function Ss(){return Ds}const Fs={add:Ms("add",6e4),plus:Ms("plus",6e4),gistNew:Ms("gist-new",6e4),repoCreate:Ms("repo-create",6e4),lightbulb:Ms("lightbulb",60001),lightBulb:Ms("light-bulb",60001),repo:Ms("repo",60002),repoDelete:Ms("repo-delete",60002),gistFork:Ms("gist-fork",60003),repoForked:Ms("repo-forked",60003),gitPullRequest:Ms("git-pull-request",60004),gitPullRequestAbandoned:Ms("git-pull-request-abandoned",60004),recordKeys:Ms("record-keys",60005),keyboard:Ms("keyboard",60005),tag:Ms("tag",60006),gitPullRequestLabel:Ms("git-pull-request-label",60006),tagAdd:Ms("tag-add",60006),tagRemove:Ms("tag-remove",60006),person:Ms("person",60007),personFollow:Ms("person-follow",60007),personOutline:Ms("person-outline",60007),personFilled:Ms("person-filled",60007),gitBranch:Ms("git-branch",60008),gitBranchCreate:Ms("git-branch-create",60008),gitBranchDelete:Ms("git-branch-delete",60008),sourceControl:Ms("source-control",60008),mirror:Ms("mirror",60009),mirrorPublic:Ms("mirror-public",60009),star:Ms("star",60010),starAdd:Ms("star-add",60010),starDelete:Ms("star-delete",60010),starEmpty:Ms("star-empty",60010),comment:Ms("comment",60011),commentAdd:Ms("comment-add",60011),alert:Ms("alert",60012),warning:Ms("warning",60012),search:Ms("search",60013),searchSave:Ms("search-save",60013),logOut:Ms("log-out",60014),signOut:Ms("sign-out",60014),logIn:Ms("log-in",60015),signIn:Ms("sign-in",60015),eye:Ms("eye",60016),eyeUnwatch:Ms("eye-unwatch",60016),eyeWatch:Ms("eye-watch",60016),circleFilled:Ms("circle-filled",60017),primitiveDot:Ms("primitive-dot",60017),closeDirty:Ms("close-dirty",60017),debugBreakpoint:Ms("debug-breakpoint",60017),debugBreakpointDisabled:Ms("debug-breakpoint-disabled",60017),debugHint:Ms("debug-hint",60017),terminalDecorationSuccess:Ms("terminal-decoration-success",60017),primitiveSquare:Ms("primitive-square",60018),edit:Ms("edit",60019),pencil:Ms("pencil",60019),info:Ms("info",60020),issueOpened:Ms("issue-opened",60020),gistPrivate:Ms("gist-private",60021),gitForkPrivate:Ms("git-fork-private",60021),lock:Ms("lock",60021),mirrorPrivate:Ms("mirror-private",60021),close:Ms("close",60022),removeClose:Ms("remove-close",60022),x:Ms("x",60022),repoSync:Ms("repo-sync",60023),sync:Ms("sync",60023),clone:Ms("clone",60024),desktopDownload:Ms("desktop-download",60024),beaker:Ms("beaker",60025),microscope:Ms("microscope",60025),vm:Ms("vm",60026),deviceDesktop:Ms("device-desktop",60026),file:Ms("file",60027),fileText:Ms("file-text",60027),more:Ms("more",60028),ellipsis:Ms("ellipsis",60028),kebabHorizontal:Ms("kebab-horizontal",60028),mailReply:Ms("mail-reply",60029),reply:Ms("reply",60029),organization:Ms("organization",60030),organizationFilled:Ms("organization-filled",60030),organizationOutline:Ms("organization-outline",60030),newFile:Ms("new-file",60031),fileAdd:Ms("file-add",60031),newFolder:Ms("new-folder",60032),fileDirectoryCreate:Ms("file-directory-create",60032),trash:Ms("trash",60033),trashcan:Ms("trashcan",60033),history:Ms("history",60034),clock:Ms("clock",60034),folder:Ms("folder",60035),fileDirectory:Ms("file-directory",60035),symbolFolder:Ms("symbol-folder",60035),logoGithub:Ms("logo-github",60036),markGithub:Ms("mark-github",60036),github:Ms("github",60036),terminal:Ms("terminal",60037),console:Ms("console",60037),repl:Ms("repl",60037),zap:Ms("zap",60038),symbolEvent:Ms("symbol-event",60038),error:Ms("error",60039),stop:Ms("stop",60039),variable:Ms("variable",60040),symbolVariable:Ms("symbol-variable",60040),array:Ms("array",60042),symbolArray:Ms("symbol-array",60042),symbolModule:Ms("symbol-module",60043),symbolPackage:Ms("symbol-package",60043),symbolNamespace:Ms("symbol-namespace",60043),symbolObject:Ms("symbol-object",60043),symbolMethod:Ms("symbol-method",60044),symbolFunction:Ms("symbol-function",60044),symbolConstructor:Ms("symbol-constructor",60044),symbolBoolean:Ms("symbol-boolean",60047),symbolNull:Ms("symbol-null",60047),symbolNumeric:Ms("symbol-numeric",60048),symbolNumber:Ms("symbol-number",60048),symbolStructure:Ms("symbol-structure",60049),symbolStruct:Ms("symbol-struct",60049),symbolParameter:Ms("symbol-parameter",60050),symbolTypeParameter:Ms("symbol-type-parameter",60050),symbolKey:Ms("symbol-key",60051),symbolText:Ms("symbol-text",60051),symbolReference:Ms("symbol-reference",60052),goToFile:Ms("go-to-file",60052),symbolEnum:Ms("symbol-enum",60053),symbolValue:Ms("symbol-value",60053),symbolRuler:Ms("symbol-ruler",60054),symbolUnit:Ms("symbol-unit",60054),activateBreakpoints:Ms("activate-breakpoints",60055),archive:Ms("archive",60056),arrowBoth:Ms("arrow-both",60057),arrowDown:Ms("arrow-down",60058),arrowLeft:Ms("arrow-left",60059),arrowRight:Ms("arrow-right",60060),arrowSmallDown:Ms("arrow-small-down",60061),arrowSmallLeft:Ms("arrow-small-left",60062),arrowSmallRight:Ms("arrow-small-right",60063),arrowSmallUp:Ms("arrow-small-up",60064),arrowUp:Ms("arrow-up",60065),bell:Ms("bell",60066),bold:Ms("bold",60067),book:Ms("book",60068),bookmark:Ms("bookmark",60069),debugBreakpointConditionalUnverified:Ms("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:Ms("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:Ms("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:Ms("debug-breakpoint-data-unverified",60072),debugBreakpointData:Ms("debug-breakpoint-data",60073),debugBreakpointDataDisabled:Ms("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:Ms("debug-breakpoint-log-unverified",60074),debugBreakpointLog:Ms("debug-breakpoint-log",60075),debugBreakpointLogDisabled:Ms("debug-breakpoint-log-disabled",60075),briefcase:Ms("briefcase",60076),broadcast:Ms("broadcast",60077),browser:Ms("browser",60078),bug:Ms("bug",60079),calendar:Ms("calendar",60080),caseSensitive:Ms("case-sensitive",60081),check:Ms("check",60082),checklist:Ms("checklist",60083),chevronDown:Ms("chevron-down",60084),chevronLeft:Ms("chevron-left",60085),chevronRight:Ms("chevron-right",60086),chevronUp:Ms("chevron-up",60087),chromeClose:Ms("chrome-close",60088),chromeMaximize:Ms("chrome-maximize",60089),chromeMinimize:Ms("chrome-minimize",60090),chromeRestore:Ms("chrome-restore",60091),circleOutline:Ms("circle-outline",60092),circle:Ms("circle",60092),debugBreakpointUnverified:Ms("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:Ms("terminal-decoration-incomplete",60092),circleSlash:Ms("circle-slash",60093),circuitBoard:Ms("circuit-board",60094),clearAll:Ms("clear-all",60095),clippy:Ms("clippy",60096),closeAll:Ms("close-all",60097),cloudDownload:Ms("cloud-download",60098),cloudUpload:Ms("cloud-upload",60099),code:Ms("code",60100),collapseAll:Ms("collapse-all",60101),colorMode:Ms("color-mode",60102),commentDiscussion:Ms("comment-discussion",60103),creditCard:Ms("credit-card",60105),dash:Ms("dash",60108),dashboard:Ms("dashboard",60109),database:Ms("database",60110),debugContinue:Ms("debug-continue",60111),debugDisconnect:Ms("debug-disconnect",60112),debugPause:Ms("debug-pause",60113),debugRestart:Ms("debug-restart",60114),debugStart:Ms("debug-start",60115),debugStepInto:Ms("debug-step-into",60116),debugStepOut:Ms("debug-step-out",60117),debugStepOver:Ms("debug-step-over",60118),debugStop:Ms("debug-stop",60119),debug:Ms("debug",60120),deviceCameraVideo:Ms("device-camera-video",60121),deviceCamera:Ms("device-camera",60122),deviceMobile:Ms("device-mobile",60123),diffAdded:Ms("diff-added",60124),diffIgnored:Ms("diff-ignored",60125),diffModified:Ms("diff-modified",60126),diffRemoved:Ms("diff-removed",60127),diffRenamed:Ms("diff-renamed",60128),diff:Ms("diff",60129),diffSidebyside:Ms("diff-sidebyside",60129),discard:Ms("discard",60130),editorLayout:Ms("editor-layout",60131),emptyWindow:Ms("empty-window",60132),exclude:Ms("exclude",60133),extensions:Ms("extensions",60134),eyeClosed:Ms("eye-closed",60135),fileBinary:Ms("file-binary",60136),fileCode:Ms("file-code",60137),fileMedia:Ms("file-media",60138),filePdf:Ms("file-pdf",60139),fileSubmodule:Ms("file-submodule",60140),fileSymlinkDirectory:Ms("file-symlink-directory",60141),fileSymlinkFile:Ms("file-symlink-file",60142),fileZip:Ms("file-zip",60143),files:Ms("files",60144),filter:Ms("filter",60145),flame:Ms("flame",60146),foldDown:Ms("fold-down",60147),foldUp:Ms("fold-up",60148),fold:Ms("fold",60149),folderActive:Ms("folder-active",60150),folderOpened:Ms("folder-opened",60151),gear:Ms("gear",60152),gift:Ms("gift",60153),gistSecret:Ms("gist-secret",60154),gist:Ms("gist",60155),gitCommit:Ms("git-commit",60156),gitCompare:Ms("git-compare",60157),compareChanges:Ms("compare-changes",60157),gitMerge:Ms("git-merge",60158),githubAction:Ms("github-action",60159),githubAlt:Ms("github-alt",60160),globe:Ms("globe",60161),grabber:Ms("grabber",60162),graph:Ms("graph",60163),gripper:Ms("gripper",60164),heart:Ms("heart",60165),home:Ms("home",60166),horizontalRule:Ms("horizontal-rule",60167),hubot:Ms("hubot",60168),inbox:Ms("inbox",60169),issueReopened:Ms("issue-reopened",60171),issues:Ms("issues",60172),italic:Ms("italic",60173),jersey:Ms("jersey",60174),json:Ms("json",60175),kebabVertical:Ms("kebab-vertical",60176),key:Ms("key",60177),law:Ms("law",60178),lightbulbAutofix:Ms("lightbulb-autofix",60179),linkExternal:Ms("link-external",60180),link:Ms("link",60181),listOrdered:Ms("list-ordered",60182),listUnordered:Ms("list-unordered",60183),liveShare:Ms("live-share",60184),loading:Ms("loading",60185),location:Ms("location",60186),mailRead:Ms("mail-read",60187),mail:Ms("mail",60188),markdown:Ms("markdown",60189),megaphone:Ms("megaphone",60190),mention:Ms("mention",60191),milestone:Ms("milestone",60192),gitPullRequestMilestone:Ms("git-pull-request-milestone",60192),mortarBoard:Ms("mortar-board",60193),move:Ms("move",60194),multipleWindows:Ms("multiple-windows",60195),mute:Ms("mute",60196),noNewline:Ms("no-newline",60197),note:Ms("note",60198),octoface:Ms("octoface",60199),openPreview:Ms("open-preview",60200),package:Ms("package",60201),paintcan:Ms("paintcan",60202),pin:Ms("pin",60203),play:Ms("play",60204),run:Ms("run",60204),plug:Ms("plug",60205),preserveCase:Ms("preserve-case",60206),preview:Ms("preview",60207),project:Ms("project",60208),pulse:Ms("pulse",60209),question:Ms("question",60210),quote:Ms("quote",60211),radioTower:Ms("radio-tower",60212),reactions:Ms("reactions",60213),references:Ms("references",60214),refresh:Ms("refresh",60215),regex:Ms("regex",60216),remoteExplorer:Ms("remote-explorer",60217),remote:Ms("remote",60218),remove:Ms("remove",60219),replaceAll:Ms("replace-all",60220),replace:Ms("replace",60221),repoClone:Ms("repo-clone",60222),repoForcePush:Ms("repo-force-push",60223),repoPull:Ms("repo-pull",60224),repoPush:Ms("repo-push",60225),report:Ms("report",60226),requestChanges:Ms("request-changes",60227),rocket:Ms("rocket",60228),rootFolderOpened:Ms("root-folder-opened",60229),rootFolder:Ms("root-folder",60230),rss:Ms("rss",60231),ruby:Ms("ruby",60232),saveAll:Ms("save-all",60233),saveAs:Ms("save-as",60234),save:Ms("save",60235),screenFull:Ms("screen-full",60236),screenNormal:Ms("screen-normal",60237),searchStop:Ms("search-stop",60238),server:Ms("server",60240),settingsGear:Ms("settings-gear",60241),settings:Ms("settings",60242),shield:Ms("shield",60243),smiley:Ms("smiley",60244),sortPrecedence:Ms("sort-precedence",60245),splitHorizontal:Ms("split-horizontal",60246),splitVertical:Ms("split-vertical",60247),squirrel:Ms("squirrel",60248),starFull:Ms("star-full",60249),starHalf:Ms("star-half",60250),symbolClass:Ms("symbol-class",60251),symbolColor:Ms("symbol-color",60252),symbolConstant:Ms("symbol-constant",60253),symbolEnumMember:Ms("symbol-enum-member",60254),symbolField:Ms("symbol-field",60255),symbolFile:Ms("symbol-file",60256),symbolInterface:Ms("symbol-interface",60257),symbolKeyword:Ms("symbol-keyword",60258),symbolMisc:Ms("symbol-misc",60259),symbolOperator:Ms("symbol-operator",60260),symbolProperty:Ms("symbol-property",60261),wrench:Ms("wrench",60261),wrenchSubaction:Ms("wrench-subaction",60261),symbolSnippet:Ms("symbol-snippet",60262),tasklist:Ms("tasklist",60263),telescope:Ms("telescope",60264),textSize:Ms("text-size",60265),threeBars:Ms("three-bars",60266),thumbsdown:Ms("thumbsdown",60267),thumbsup:Ms("thumbsup",60268),tools:Ms("tools",60269),triangleDown:Ms("triangle-down",60270),triangleLeft:Ms("triangle-left",60271),triangleRight:Ms("triangle-right",60272),triangleUp:Ms("triangle-up",60273),twitter:Ms("twitter",60274),unfold:Ms("unfold",60275),unlock:Ms("unlock",60276),unmute:Ms("unmute",60277),unverified:Ms("unverified",60278),verified:Ms("verified",60279),versions:Ms("versions",60280),vmActive:Ms("vm-active",60281),vmOutline:Ms("vm-outline",60282),vmRunning:Ms("vm-running",60283),watch:Ms("watch",60284),whitespace:Ms("whitespace",60285),wholeWord:Ms("whole-word",60286),window:Ms("window",60287),wordWrap:Ms("word-wrap",60288),zoomIn:Ms("zoom-in",60289),zoomOut:Ms("zoom-out",60290),listFilter:Ms("list-filter",60291),listFlat:Ms("list-flat",60292),listSelection:Ms("list-selection",60293),selection:Ms("selection",60293),listTree:Ms("list-tree",60294),debugBreakpointFunctionUnverified:Ms("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:Ms("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:Ms("debug-breakpoint-function-disabled",60296),debugStackframeActive:Ms("debug-stackframe-active",60297),circleSmallFilled:Ms("circle-small-filled",60298),debugStackframeDot:Ms("debug-stackframe-dot",60298),terminalDecorationMark:Ms("terminal-decoration-mark",60298),debugStackframe:Ms("debug-stackframe",60299),debugStackframeFocused:Ms("debug-stackframe-focused",60299),debugBreakpointUnsupported:Ms("debug-breakpoint-unsupported",60300),symbolString:Ms("symbol-string",60301),debugReverseContinue:Ms("debug-reverse-continue",60302),debugStepBack:Ms("debug-step-back",60303),debugRestartFrame:Ms("debug-restart-frame",60304),debugAlt:Ms("debug-alt",60305),callIncoming:Ms("call-incoming",60306),callOutgoing:Ms("call-outgoing",60307),menu:Ms("menu",60308),expandAll:Ms("expand-all",60309),feedback:Ms("feedback",60310),gitPullRequestReviewer:Ms("git-pull-request-reviewer",60310),groupByRefType:Ms("group-by-ref-type",60311),ungroupByRefType:Ms("ungroup-by-ref-type",60312),account:Ms("account",60313),gitPullRequestAssignee:Ms("git-pull-request-assignee",60313),bellDot:Ms("bell-dot",60314),debugConsole:Ms("debug-console",60315),library:Ms("library",60316),output:Ms("output",60317),runAll:Ms("run-all",60318),syncIgnored:Ms("sync-ignored",60319),pinned:Ms("pinned",60320),githubInverted:Ms("github-inverted",60321),serverProcess:Ms("server-process",60322),serverEnvironment:Ms("server-environment",60323),pass:Ms("pass",60324),issueClosed:Ms("issue-closed",60324),stopCircle:Ms("stop-circle",60325),playCircle:Ms("play-circle",60326),record:Ms("record",60327),debugAltSmall:Ms("debug-alt-small",60328),vmConnect:Ms("vm-connect",60329),cloud:Ms("cloud",60330),merge:Ms("merge",60331),export:Ms("export",60332),graphLeft:Ms("graph-left",60333),magnet:Ms("magnet",60334),notebook:Ms("notebook",60335),redo:Ms("redo",60336),checkAll:Ms("check-all",60337),pinnedDirty:Ms("pinned-dirty",60338),passFilled:Ms("pass-filled",60339),circleLargeFilled:Ms("circle-large-filled",60340),circleLarge:Ms("circle-large",60341),circleLargeOutline:Ms("circle-large-outline",60341),combine:Ms("combine",60342),gather:Ms("gather",60342),table:Ms("table",60343),variableGroup:Ms("variable-group",60344),typeHierarchy:Ms("type-hierarchy",60345),typeHierarchySub:Ms("type-hierarchy-sub",60346),typeHierarchySuper:Ms("type-hierarchy-super",60347),gitPullRequestCreate:Ms("git-pull-request-create",60348),runAbove:Ms("run-above",60349),runBelow:Ms("run-below",60350),notebookTemplate:Ms("notebook-template",60351),debugRerun:Ms("debug-rerun",60352),workspaceTrusted:Ms("workspace-trusted",60353),workspaceUntrusted:Ms("workspace-untrusted",60354),workspaceUnknown:Ms("workspace-unknown",60355),terminalCmd:Ms("terminal-cmd",60356),terminalDebian:Ms("terminal-debian",60357),terminalLinux:Ms("terminal-linux",60358),terminalPowershell:Ms("terminal-powershell",60359),terminalTmux:Ms("terminal-tmux",60360),terminalUbuntu:Ms("terminal-ubuntu",60361),terminalBash:Ms("terminal-bash",60362),arrowSwap:Ms("arrow-swap",60363),copy:Ms("copy",60364),personAdd:Ms("person-add",60365),filterFilled:Ms("filter-filled",60366),wand:Ms("wand",60367),debugLineByLine:Ms("debug-line-by-line",60368),inspect:Ms("inspect",60369),layers:Ms("layers",60370),layersDot:Ms("layers-dot",60371),layersActive:Ms("layers-active",60372),compass:Ms("compass",60373),compassDot:Ms("compass-dot",60374),compassActive:Ms("compass-active",60375),azure:Ms("azure",60376),issueDraft:Ms("issue-draft",60377),gitPullRequestClosed:Ms("git-pull-request-closed",60378),gitPullRequestDraft:Ms("git-pull-request-draft",60379),debugAll:Ms("debug-all",60380),debugCoverage:Ms("debug-coverage",60381),runErrors:Ms("run-errors",60382),folderLibrary:Ms("folder-library",60383),debugContinueSmall:Ms("debug-continue-small",60384),beakerStop:Ms("beaker-stop",60385),graphLine:Ms("graph-line",60386),graphScatter:Ms("graph-scatter",60387),pieChart:Ms("pie-chart",60388),bracket:Ms("bracket",60175),bracketDot:Ms("bracket-dot",60389),bracketError:Ms("bracket-error",60390),lockSmall:Ms("lock-small",60391),azureDevops:Ms("azure-devops",60392),verifiedFilled:Ms("verified-filled",60393),newline:Ms("newline",60394),layout:Ms("layout",60395),layoutActivitybarLeft:Ms("layout-activitybar-left",60396),layoutActivitybarRight:Ms("layout-activitybar-right",60397),layoutPanelLeft:Ms("layout-panel-left",60398),layoutPanelCenter:Ms("layout-panel-center",60399),layoutPanelJustify:Ms("layout-panel-justify",60400),layoutPanelRight:Ms("layout-panel-right",60401),layoutPanel:Ms("layout-panel",60402),layoutSidebarLeft:Ms("layout-sidebar-left",60403),layoutSidebarRight:Ms("layout-sidebar-right",60404),layoutStatusbar:Ms("layout-statusbar",60405),layoutMenubar:Ms("layout-menubar",60406),layoutCentered:Ms("layout-centered",60407),target:Ms("target",60408),indent:Ms("indent",60409),recordSmall:Ms("record-small",60410),errorSmall:Ms("error-small",60411),terminalDecorationError:Ms("terminal-decoration-error",60411),arrowCircleDown:Ms("arrow-circle-down",60412),arrowCircleLeft:Ms("arrow-circle-left",60413),arrowCircleRight:Ms("arrow-circle-right",60414),arrowCircleUp:Ms("arrow-circle-up",60415),layoutSidebarRightOff:Ms("layout-sidebar-right-off",60416),layoutPanelOff:Ms("layout-panel-off",60417),layoutSidebarLeftOff:Ms("layout-sidebar-left-off",60418),blank:Ms("blank",60419),heartFilled:Ms("heart-filled",60420),map:Ms("map",60421),mapHorizontal:Ms("map-horizontal",60421),foldHorizontal:Ms("fold-horizontal",60421),mapFilled:Ms("map-filled",60422),mapHorizontalFilled:Ms("map-horizontal-filled",60422),foldHorizontalFilled:Ms("fold-horizontal-filled",60422),circleSmall:Ms("circle-small",60423),bellSlash:Ms("bell-slash",60424),bellSlashDot:Ms("bell-slash-dot",60425),commentUnresolved:Ms("comment-unresolved",60426),gitPullRequestGoToChanges:Ms("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:Ms("git-pull-request-new-changes",60428),searchFuzzy:Ms("search-fuzzy",60429),commentDraft:Ms("comment-draft",60430),send:Ms("send",60431),sparkle:Ms("sparkle",60432),insert:Ms("insert",60433),mic:Ms("mic",60434),thumbsdownFilled:Ms("thumbsdown-filled",60435),thumbsupFilled:Ms("thumbsup-filled",60436),coffee:Ms("coffee",60437),snake:Ms("snake",60438),game:Ms("game",60439),vr:Ms("vr",60440),chip:Ms("chip",60441),piano:Ms("piano",60442),music:Ms("music",60443),micFilled:Ms("mic-filled",60444),repoFetch:Ms("repo-fetch",60445),copilot:Ms("copilot",60446),lightbulbSparkle:Ms("lightbulb-sparkle",60447),robot:Ms("robot",60448),sparkleFilled:Ms("sparkle-filled",60449),diffSingle:Ms("diff-single",60450),diffMultiple:Ms("diff-multiple",60451),surroundWith:Ms("surround-with",60452),share:Ms("share",60453),gitStash:Ms("git-stash",60454),gitStashApply:Ms("git-stash-apply",60455),gitStashPop:Ms("git-stash-pop",60456),vscode:Ms("vscode",60457),vscodeInsiders:Ms("vscode-insiders",60458),codeOss:Ms("code-oss",60459),runCoverage:Ms("run-coverage",60460),runAllCoverage:Ms("run-all-coverage",60461),coverage:Ms("coverage",60462),githubProject:Ms("github-project",60463),mapVertical:Ms("map-vertical",60464),foldVertical:Ms("fold-vertical",60464),mapVerticalFilled:Ms("map-vertical-filled",60465),foldVerticalFilled:Ms("fold-vertical-filled",60465),dialogError:Ms("dialog-error","error"),dialogWarning:Ms("dialog-warning","warning"),dialogInfo:Ms("dialog-info","info"),dialogClose:Ms("dialog-close","close"),treeItemExpanded:Ms("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:Ms("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:Ms("tree-filter-on-type-off","list-selection"),treeFilterClear:Ms("tree-filter-clear","close"),treeItemLoading:Ms("tree-item-loading","loading"),menuSelection:Ms("menu-selection","check"),menuSubmenu:Ms("menu-submenu","chevron-right"),menuBarMore:Ms("menubar-more","more"),scrollbarButtonLeft:Ms("scrollbar-button-left","triangle-left"),scrollbarButtonRight:Ms("scrollbar-button-right","triangle-right"),scrollbarButtonUp:Ms("scrollbar-button-up","triangle-up"),scrollbarButtonDown:Ms("scrollbar-button-down","triangle-down"),toolBarMore:Ms("toolbar-more","more"),quickInputBack:Ms("quick-input-back","arrow-left"),dropDownButton:Ms("drop-down-button",60084),symbolCustomColor:Ms("symbol-customcolor",60252),exportIcon:Ms("export",60332),workspaceUnspecified:Ms("workspace-unspecified",60355),newLine:Ms("newline",60394),thumbsDownFilled:Ms("thumbsdown-filled",60435),thumbsUpFilled:Ms("thumbsup-filled",60436),gitFetch:Ms("git-fetch",60445),lightbulbSparkleAutofix:Ms("lightbulb-sparkle-autofix",60447),debugBreakpointPending:Ms("debug-breakpoint-pending",60377)};class Is extends te{get isResolved(){return this._isResolved}constructor(t,i,e){super(),this._registry=t,this._languageId=i,this._factory=e,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const t=await this._factory.tokenizationSupport;this._isResolved=!0,t&&!this._isDisposed&&this._register(this._registry.register(this._languageId,t))}}let Ls=class{constructor(t,i,e){this.offset=t,this.type=i,this.language=e,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class Rs{constructor(t,i){this.tokens=t,this.endState=i,this._tokenizationResultBrand=void 0}}class Ts{constructor(t,i){this.tokens=t,this.endState=i,this._encodedTokenizationResultBrand=void 0}}var Ns,Qs,Os,zs,Us;(function(t){const i=new Map;i.set(0,Fs.symbolMethod),i.set(1,Fs.symbolFunction),i.set(2,Fs.symbolConstructor),i.set(3,Fs.symbolField),i.set(4,Fs.symbolVariable),i.set(5,Fs.symbolClass),i.set(6,Fs.symbolStruct),i.set(7,Fs.symbolInterface),i.set(8,Fs.symbolModule),i.set(9,Fs.symbolProperty),i.set(10,Fs.symbolEvent),i.set(11,Fs.symbolOperator),i.set(12,Fs.symbolUnit),i.set(13,Fs.symbolValue),i.set(15,Fs.symbolEnum),i.set(14,Fs.symbolConstant),i.set(15,Fs.symbolEnum),i.set(16,Fs.symbolEnumMember),i.set(17,Fs.symbolKeyword),i.set(27,Fs.symbolSnippet),i.set(18,Fs.symbolText),i.set(19,Fs.symbolColor),i.set(20,Fs.symbolFile),i.set(21,Fs.symbolReference),i.set(22,Fs.symbolCustomColor),i.set(23,Fs.symbolFolder),i.set(24,Fs.symbolTypeParameter),i.set(25,Fs.account),i.set(26,Fs.issues),t.toIcon=function(t){let e=i.get(t);return e||(console.info("No codicon found for CompletionItemKind "+t),e=Fs.symbolProperty),e};const e=new Map;e.set("method",0),e.set("function",1),e.set("constructor",2),e.set("field",3),e.set("variable",4),e.set("class",5),e.set("struct",6),e.set("interface",7),e.set("module",8),e.set("property",9),e.set("event",10),e.set("operator",11),e.set("unit",12),e.set("value",13),e.set("constant",14),e.set("enum",15),e.set("enum-member",16),e.set("enumMember",16),e.set("keyword",17),e.set("snippet",27),e.set("text",18),e.set("color",19),e.set("file",20),e.set("reference",21),e.set("customcolor",22),e.set("folder",23),e.set("type-parameter",24),e.set("typeParameter",24),e.set("account",25),e.set("issue",26),t.fromString=function(t,i){let s=e.get(t);return s!==void 0||i||(s=9),s}})(Ns||(Ns={})),function(t){t[t.Automatic=0]="Automatic",t[t.Explicit=1]="Explicit"}(Qs||(Qs={}));class Hs{constructor(t,i,e,s){this.range=t,this.text=i,this.completionKind=e,this.isSnippetText=s}equals(t){return Es.lift(this.range).equalsRange(t.range)&&this.text===t.text&&this.completionKind===t.completionKind&&this.isSnippetText===t.isSnippetText}}(function(t){t[t.Automatic=0]="Automatic",t[t.PasteAs=1]="PasteAs"})(Os||(Os={})),function(t){t[t.Invoke=1]="Invoke",t[t.TriggerCharacter=2]="TriggerCharacter",t[t.ContentChange=3]="ContentChange"}(zs||(zs={})),function(t){t[t.Text=0]="Text",t[t.Read=1]="Read",t[t.Write=2]="Write"}(Us||(Us={}));const Ps={17:st(0,"array"),16:st(0,"boolean"),4:st(0,"class"),13:st(0,"constant"),8:st(0,"constructor"),9:st(0,"enumeration"),21:st(0,"enumeration member"),23:st(0,"event"),7:st(0,"field"),0:st(0,"file"),11:st(0,"function"),10:st(0,"interface"),19:st(0,"key"),5:st(0,"method"),1:st(0,"module"),2:st(0,"namespace"),20:st(0,"null"),15:st(0,"number"),18:st(0,"object"),24:st(0,"operator"),3:st(0,"package"),6:st(0,"property"),14:st(0,"string"),22:st(0,"struct"),25:st(0,"type parameter"),12:st(0,"variable")};var js,Ws,Ys,_s;(function(t){const i=new Map;i.set(0,Fs.symbolFile),i.set(1,Fs.symbolModule),i.set(2,Fs.symbolNamespace),i.set(3,Fs.symbolPackage),i.set(4,Fs.symbolClass),i.set(5,Fs.symbolMethod),i.set(6,Fs.symbolProperty),i.set(7,Fs.symbolField),i.set(8,Fs.symbolConstructor),i.set(9,Fs.symbolEnum),i.set(10,Fs.symbolInterface),i.set(11,Fs.symbolFunction),i.set(12,Fs.symbolVariable),i.set(13,Fs.symbolConstant),i.set(14,Fs.symbolString),i.set(15,Fs.symbolNumber),i.set(16,Fs.symbolBoolean),i.set(17,Fs.symbolArray),i.set(18,Fs.symbolObject),i.set(19,Fs.symbolKey),i.set(20,Fs.symbolNull),i.set(21,Fs.symbolEnumMember),i.set(22,Fs.symbolStruct),i.set(23,Fs.symbolEvent),i.set(24,Fs.symbolOperator),i.set(25,Fs.symbolTypeParameter),t.toIcon=function(t){let e=i.get(t);return e||(console.info("No codicon found for SymbolKind "+t),e=Fs.symbolProperty),e}})(js||(js={}));class Vs{static fromValue(t){switch(t){case"comment":return Vs.Comment;case"imports":return Vs.Imports;case"region":return Vs.Region}return new Vs(t)}constructor(t){this.value=t}}Vs.Comment=new Vs("comment"),Vs.Imports=new Vs("imports"),Vs.Region=new Vs("region"),function(t){t[t.AIGenerated=1]="AIGenerated"}(Ws||(Ws={})),(Ys||(Ys={})).is=function(t){return!(!t||typeof t!="object")&&typeof t.id=="string"&&typeof t.title=="string"},function(t){t[t.Type=1]="Type",t[t.Parameter=2]="Parameter"}(_s||(_s={}));class Js{constructor(t){this.createSupport=t,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then((t=>{t&&t.dispose()}))}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const Gs=new class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(t){this._onDidChange.fire({changedLanguages:t,changedColorMap:!1})}register(t,i){return this._tokenizationSupports.set(t,i),this.handleChange([t]),qi((()=>{this._tokenizationSupports.get(t)===i&&(this._tokenizationSupports.delete(t),this.handleChange([t]))}))}get(t){return this._tokenizationSupports.get(t)||null}registerFactory(t,i){var e;(e=this._factories.get(t))===null||e===void 0||e.dispose();const s=new Is(this,t,i);return this._factories.set(t,s),qi((()=>{const i=this._factories.get(t);i&&i===s&&(this._factories.delete(t),i.dispose())}))}async getOrCreate(t){const i=this.get(t);if(i)return i;const e=this._factories.get(t);return!e||e.isResolved?null:(await e.resolve(),this.get(t))}isResolved(t){if(this.get(t))return!0;const i=this._factories.get(t);return!(i&&!i.isResolved)}setColorMap(t){this._colorMap=t,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};var Ks,$s,Xs,qs,Zs,tn,en,sn,nn,on,rn,hn,cn,an,ln,un,dn,fn,gn,An,pn,wn,mn,vn,bn,yn,kn,xn,Cn,En,Bn,Dn,Mn,Sn,Fn,In,Ln,Rn,Tn,Nn,Qn,On,zn,Un,Hn;(function(t){t[t.Invoke=0]="Invoke",t[t.Automatic=1]="Automatic"})(Ks||(Ks={})),function(t){t[t.Unknown=0]="Unknown",t[t.Disabled=1]="Disabled",t[t.Enabled=2]="Enabled"}($s||($s={})),function(t){t[t.Invoke=1]="Invoke",t[t.Auto=2]="Auto"}(Xs||(Xs={})),function(t){t[t.None=0]="None",t[t.KeepWhitespace=1]="KeepWhitespace",t[t.InsertAsSnippet=4]="InsertAsSnippet"}(qs||(qs={})),function(t){t[t.Method=0]="Method",t[t.Function=1]="Function",t[t.Constructor=2]="Constructor",t[t.Field=3]="Field",t[t.Variable=4]="Variable",t[t.Class=5]="Class",t[t.Struct=6]="Struct",t[t.Interface=7]="Interface",t[t.Module=8]="Module",t[t.Property=9]="Property",t[t.Event=10]="Event",t[t.Operator=11]="Operator",t[t.Unit=12]="Unit",t[t.Value=13]="Value",t[t.Constant=14]="Constant",t[t.Enum=15]="Enum",t[t.EnumMember=16]="EnumMember",t[t.Keyword=17]="Keyword",t[t.Text=18]="Text",t[t.Color=19]="Color",t[t.File=20]="File",t[t.Reference=21]="Reference",t[t.Customcolor=22]="Customcolor",t[t.Folder=23]="Folder",t[t.TypeParameter=24]="TypeParameter",t[t.User=25]="User",t[t.Issue=26]="Issue",t[t.Snippet=27]="Snippet"}(Zs||(Zs={})),function(t){t[t.Deprecated=1]="Deprecated"}(tn||(tn={})),function(t){t[t.Invoke=0]="Invoke",t[t.TriggerCharacter=1]="TriggerCharacter",t[t.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(en||(en={})),function(t){t[t.EXACT=0]="EXACT",t[t.ABOVE=1]="ABOVE",t[t.BELOW=2]="BELOW"}(sn||(sn={})),function(t){t[t.NotSet=0]="NotSet",t[t.ContentFlush=1]="ContentFlush",t[t.RecoverFromMarkers=2]="RecoverFromMarkers",t[t.Explicit=3]="Explicit",t[t.Paste=4]="Paste",t[t.Undo=5]="Undo",t[t.Redo=6]="Redo"}(nn||(nn={})),function(t){t[t.LF=1]="LF",t[t.CRLF=2]="CRLF"}(on||(on={})),function(t){t[t.Text=0]="Text",t[t.Read=1]="Read",t[t.Write=2]="Write"}(rn||(rn={})),function(t){t[t.None=0]="None",t[t.Keep=1]="Keep",t[t.Brackets=2]="Brackets",t[t.Advanced=3]="Advanced",t[t.Full=4]="Full"}(hn||(hn={})),function(t){t[t.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",t[t.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",t[t.accessibilitySupport=2]="accessibilitySupport",t[t.accessibilityPageSize=3]="accessibilityPageSize",t[t.ariaLabel=4]="ariaLabel",t[t.ariaRequired=5]="ariaRequired",t[t.autoClosingBrackets=6]="autoClosingBrackets",t[t.autoClosingComments=7]="autoClosingComments",t[t.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",t[t.autoClosingDelete=9]="autoClosingDelete",t[t.autoClosingOvertype=10]="autoClosingOvertype",t[t.autoClosingQuotes=11]="autoClosingQuotes",t[t.autoIndent=12]="autoIndent",t[t.automaticLayout=13]="automaticLayout",t[t.autoSurround=14]="autoSurround",t[t.bracketPairColorization=15]="bracketPairColorization",t[t.guides=16]="guides",t[t.codeLens=17]="codeLens",t[t.codeLensFontFamily=18]="codeLensFontFamily",t[t.codeLensFontSize=19]="codeLensFontSize",t[t.colorDecorators=20]="colorDecorators",t[t.colorDecoratorsLimit=21]="colorDecoratorsLimit",t[t.columnSelection=22]="columnSelection",t[t.comments=23]="comments",t[t.contextmenu=24]="contextmenu",t[t.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",t[t.cursorBlinking=26]="cursorBlinking",t[t.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",t[t.cursorStyle=28]="cursorStyle",t[t.cursorSurroundingLines=29]="cursorSurroundingLines",t[t.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",t[t.cursorWidth=31]="cursorWidth",t[t.disableLayerHinting=32]="disableLayerHinting",t[t.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",t[t.domReadOnly=34]="domReadOnly",t[t.dragAndDrop=35]="dragAndDrop",t[t.dropIntoEditor=36]="dropIntoEditor",t[t.emptySelectionClipboard=37]="emptySelectionClipboard",t[t.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",t[t.extraEditorClassName=39]="extraEditorClassName",t[t.fastScrollSensitivity=40]="fastScrollSensitivity",t[t.find=41]="find",t[t.fixedOverflowWidgets=42]="fixedOverflowWidgets",t[t.folding=43]="folding",t[t.foldingStrategy=44]="foldingStrategy",t[t.foldingHighlight=45]="foldingHighlight",t[t.foldingImportsByDefault=46]="foldingImportsByDefault",t[t.foldingMaximumRegions=47]="foldingMaximumRegions",t[t.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",t[t.fontFamily=49]="fontFamily",t[t.fontInfo=50]="fontInfo",t[t.fontLigatures=51]="fontLigatures",t[t.fontSize=52]="fontSize",t[t.fontWeight=53]="fontWeight",t[t.fontVariations=54]="fontVariations",t[t.formatOnPaste=55]="formatOnPaste",t[t.formatOnType=56]="formatOnType",t[t.glyphMargin=57]="glyphMargin",t[t.gotoLocation=58]="gotoLocation",t[t.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",t[t.hover=60]="hover",t[t.inDiffEditor=61]="inDiffEditor",t[t.inlineSuggest=62]="inlineSuggest",t[t.inlineEdit=63]="inlineEdit",t[t.letterSpacing=64]="letterSpacing",t[t.lightbulb=65]="lightbulb",t[t.lineDecorationsWidth=66]="lineDecorationsWidth",t[t.lineHeight=67]="lineHeight",t[t.lineNumbers=68]="lineNumbers",t[t.lineNumbersMinChars=69]="lineNumbersMinChars",t[t.linkedEditing=70]="linkedEditing",t[t.links=71]="links",t[t.matchBrackets=72]="matchBrackets",t[t.minimap=73]="minimap",t[t.mouseStyle=74]="mouseStyle",t[t.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",t[t.mouseWheelZoom=76]="mouseWheelZoom",t[t.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",t[t.multiCursorModifier=78]="multiCursorModifier",t[t.multiCursorPaste=79]="multiCursorPaste",t[t.multiCursorLimit=80]="multiCursorLimit",t[t.occurrencesHighlight=81]="occurrencesHighlight",t[t.overviewRulerBorder=82]="overviewRulerBorder",t[t.overviewRulerLanes=83]="overviewRulerLanes",t[t.padding=84]="padding",t[t.pasteAs=85]="pasteAs",t[t.parameterHints=86]="parameterHints",t[t.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",t[t.definitionLinkOpensInPeek=88]="definitionLinkOpensInPeek",t[t.quickSuggestions=89]="quickSuggestions",t[t.quickSuggestionsDelay=90]="quickSuggestionsDelay",t[t.readOnly=91]="readOnly",t[t.readOnlyMessage=92]="readOnlyMessage",t[t.renameOnType=93]="renameOnType",t[t.renderControlCharacters=94]="renderControlCharacters",t[t.renderFinalNewline=95]="renderFinalNewline",t[t.renderLineHighlight=96]="renderLineHighlight",t[t.renderLineHighlightOnlyWhenFocus=97]="renderLineHighlightOnlyWhenFocus",t[t.renderValidationDecorations=98]="renderValidationDecorations",t[t.renderWhitespace=99]="renderWhitespace",t[t.revealHorizontalRightPadding=100]="revealHorizontalRightPadding",t[t.roundedSelection=101]="roundedSelection",t[t.rulers=102]="rulers",t[t.scrollbar=103]="scrollbar",t[t.scrollBeyondLastColumn=104]="scrollBeyondLastColumn",t[t.scrollBeyondLastLine=105]="scrollBeyondLastLine",t[t.scrollPredominantAxis=106]="scrollPredominantAxis",t[t.selectionClipboard=107]="selectionClipboard",t[t.selectionHighlight=108]="selectionHighlight",t[t.selectOnLineNumbers=109]="selectOnLineNumbers",t[t.showFoldingControls=110]="showFoldingControls",t[t.showUnused=111]="showUnused",t[t.snippetSuggestions=112]="snippetSuggestions",t[t.smartSelect=113]="smartSelect",t[t.smoothScrolling=114]="smoothScrolling",t[t.stickyScroll=115]="stickyScroll",t[t.stickyTabStops=116]="stickyTabStops",t[t.stopRenderingLineAfter=117]="stopRenderingLineAfter",t[t.suggest=118]="suggest",t[t.suggestFontSize=119]="suggestFontSize",t[t.suggestLineHeight=120]="suggestLineHeight",t[t.suggestOnTriggerCharacters=121]="suggestOnTriggerCharacters",t[t.suggestSelection=122]="suggestSelection",t[t.tabCompletion=123]="tabCompletion",t[t.tabIndex=124]="tabIndex",t[t.unicodeHighlighting=125]="unicodeHighlighting",t[t.unusualLineTerminators=126]="unusualLineTerminators",t[t.useShadowDOM=127]="useShadowDOM",t[t.useTabStops=128]="useTabStops",t[t.wordBreak=129]="wordBreak",t[t.wordSegmenterLocales=130]="wordSegmenterLocales",t[t.wordSeparators=131]="wordSeparators",t[t.wordWrap=132]="wordWrap",t[t.wordWrapBreakAfterCharacters=133]="wordWrapBreakAfterCharacters",t[t.wordWrapBreakBeforeCharacters=134]="wordWrapBreakBeforeCharacters",t[t.wordWrapColumn=135]="wordWrapColumn",t[t.wordWrapOverride1=136]="wordWrapOverride1",t[t.wordWrapOverride2=137]="wordWrapOverride2",t[t.wrappingIndent=138]="wrappingIndent",t[t.wrappingStrategy=139]="wrappingStrategy",t[t.showDeprecated=140]="showDeprecated",t[t.inlayHints=141]="inlayHints",t[t.editorClassName=142]="editorClassName",t[t.pixelRatio=143]="pixelRatio",t[t.tabFocusMode=144]="tabFocusMode",t[t.layoutInfo=145]="layoutInfo",t[t.wrappingInfo=146]="wrappingInfo",t[t.defaultColorDecorators=147]="defaultColorDecorators",t[t.colorDecoratorsActivatedOn=148]="colorDecoratorsActivatedOn",t[t.inlineCompletionsAccessibilityVerbose=149]="inlineCompletionsAccessibilityVerbose"}(cn||(cn={})),function(t){t[t.TextDefined=0]="TextDefined",t[t.LF=1]="LF",t[t.CRLF=2]="CRLF"}(an||(an={})),function(t){t[t.LF=0]="LF",t[t.CRLF=1]="CRLF"}(ln||(ln={})),function(t){t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=3]="Right"}(un||(un={})),function(t){t[t.None=0]="None",t[t.Indent=1]="Indent",t[t.IndentOutdent=2]="IndentOutdent",t[t.Outdent=3]="Outdent"}(dn||(dn={})),function(t){t[t.Both=0]="Both",t[t.Right=1]="Right",t[t.Left=2]="Left",t[t.None=3]="None"}(fn||(fn={})),function(t){t[t.Type=1]="Type",t[t.Parameter=2]="Parameter"}(gn||(gn={})),function(t){t[t.Automatic=0]="Automatic",t[t.Explicit=1]="Explicit"}(An||(An={})),function(t){t[t.Invoke=0]="Invoke",t[t.Automatic=1]="Automatic"}(pn||(pn={})),function(t){t[t.DependsOnKbLayout=-1]="DependsOnKbLayout",t[t.Unknown=0]="Unknown",t[t.Backspace=1]="Backspace",t[t.Tab=2]="Tab",t[t.Enter=3]="Enter",t[t.Shift=4]="Shift",t[t.Ctrl=5]="Ctrl",t[t.Alt=6]="Alt",t[t.PauseBreak=7]="PauseBreak",t[t.CapsLock=8]="CapsLock",t[t.Escape=9]="Escape",t[t.Space=10]="Space",t[t.PageUp=11]="PageUp",t[t.PageDown=12]="PageDown",t[t.End=13]="End",t[t.Home=14]="Home",t[t.LeftArrow=15]="LeftArrow",t[t.UpArrow=16]="UpArrow",t[t.RightArrow=17]="RightArrow",t[t.DownArrow=18]="DownArrow",t[t.Insert=19]="Insert",t[t.Delete=20]="Delete",t[t.Digit0=21]="Digit0",t[t.Digit1=22]="Digit1",t[t.Digit2=23]="Digit2",t[t.Digit3=24]="Digit3",t[t.Digit4=25]="Digit4",t[t.Digit5=26]="Digit5",t[t.Digit6=27]="Digit6",t[t.Digit7=28]="Digit7",t[t.Digit8=29]="Digit8",t[t.Digit9=30]="Digit9",t[t.KeyA=31]="KeyA",t[t.KeyB=32]="KeyB",t[t.KeyC=33]="KeyC",t[t.KeyD=34]="KeyD",t[t.KeyE=35]="KeyE",t[t.KeyF=36]="KeyF",t[t.KeyG=37]="KeyG",t[t.KeyH=38]="KeyH",t[t.KeyI=39]="KeyI",t[t.KeyJ=40]="KeyJ",t[t.KeyK=41]="KeyK",t[t.KeyL=42]="KeyL",t[t.KeyM=43]="KeyM",t[t.KeyN=44]="KeyN",t[t.KeyO=45]="KeyO",t[t.KeyP=46]="KeyP",t[t.KeyQ=47]="KeyQ",t[t.KeyR=48]="KeyR",t[t.KeyS=49]="KeyS",t[t.KeyT=50]="KeyT",t[t.KeyU=51]="KeyU",t[t.KeyV=52]="KeyV",t[t.KeyW=53]="KeyW",t[t.KeyX=54]="KeyX",t[t.KeyY=55]="KeyY",t[t.KeyZ=56]="KeyZ",t[t.Meta=57]="Meta",t[t.ContextMenu=58]="ContextMenu",t[t.F1=59]="F1",t[t.F2=60]="F2",t[t.F3=61]="F3",t[t.F4=62]="F4",t[t.F5=63]="F5",t[t.F6=64]="F6",t[t.F7=65]="F7",t[t.F8=66]="F8",t[t.F9=67]="F9",t[t.F10=68]="F10",t[t.F11=69]="F11",t[t.F12=70]="F12",t[t.F13=71]="F13",t[t.F14=72]="F14",t[t.F15=73]="F15",t[t.F16=74]="F16",t[t.F17=75]="F17",t[t.F18=76]="F18",t[t.F19=77]="F19",t[t.F20=78]="F20",t[t.F21=79]="F21",t[t.F22=80]="F22",t[t.F23=81]="F23",t[t.F24=82]="F24",t[t.NumLock=83]="NumLock",t[t.ScrollLock=84]="ScrollLock",t[t.Semicolon=85]="Semicolon",t[t.Equal=86]="Equal",t[t.Comma=87]="Comma",t[t.Minus=88]="Minus",t[t.Period=89]="Period",t[t.Slash=90]="Slash",t[t.Backquote=91]="Backquote",t[t.BracketLeft=92]="BracketLeft",t[t.Backslash=93]="Backslash",t[t.BracketRight=94]="BracketRight",t[t.Quote=95]="Quote",t[t.OEM_8=96]="OEM_8",t[t.IntlBackslash=97]="IntlBackslash",t[t.Numpad0=98]="Numpad0",t[t.Numpad1=99]="Numpad1",t[t.Numpad2=100]="Numpad2",t[t.Numpad3=101]="Numpad3",t[t.Numpad4=102]="Numpad4",t[t.Numpad5=103]="Numpad5",t[t.Numpad6=104]="Numpad6",t[t.Numpad7=105]="Numpad7",t[t.Numpad8=106]="Numpad8",t[t.Numpad9=107]="Numpad9",t[t.NumpadMultiply=108]="NumpadMultiply",t[t.NumpadAdd=109]="NumpadAdd",t[t.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",t[t.NumpadSubtract=111]="NumpadSubtract",t[t.NumpadDecimal=112]="NumpadDecimal",t[t.NumpadDivide=113]="NumpadDivide",t[t.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",t[t.ABNT_C1=115]="ABNT_C1",t[t.ABNT_C2=116]="ABNT_C2",t[t.AudioVolumeMute=117]="AudioVolumeMute",t[t.AudioVolumeUp=118]="AudioVolumeUp",t[t.AudioVolumeDown=119]="AudioVolumeDown",t[t.BrowserSearch=120]="BrowserSearch",t[t.BrowserHome=121]="BrowserHome",t[t.BrowserBack=122]="BrowserBack",t[t.BrowserForward=123]="BrowserForward",t[t.MediaTrackNext=124]="MediaTrackNext",t[t.MediaTrackPrevious=125]="MediaTrackPrevious",t[t.MediaStop=126]="MediaStop",t[t.MediaPlayPause=127]="MediaPlayPause",t[t.LaunchMediaPlayer=128]="LaunchMediaPlayer",t[t.LaunchMail=129]="LaunchMail",t[t.LaunchApp2=130]="LaunchApp2",t[t.Clear=131]="Clear",t[t.MAX_VALUE=132]="MAX_VALUE"}(wn||(wn={})),function(t){t[t.Hint=1]="Hint",t[t.Info=2]="Info",t[t.Warning=4]="Warning",t[t.Error=8]="Error"}(mn||(mn={})),function(t){t[t.Unnecessary=1]="Unnecessary",t[t.Deprecated=2]="Deprecated"}(vn||(vn={})),function(t){t[t.Inline=1]="Inline",t[t.Gutter=2]="Gutter"}(bn||(bn={})),function(t){t[t.Normal=1]="Normal",t[t.Underlined=2]="Underlined"}(yn||(yn={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.TEXTAREA=1]="TEXTAREA",t[t.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",t[t.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",t[t.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",t[t.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",t[t.CONTENT_TEXT=6]="CONTENT_TEXT",t[t.CONTENT_EMPTY=7]="CONTENT_EMPTY",t[t.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",t[t.CONTENT_WIDGET=9]="CONTENT_WIDGET",t[t.OVERVIEW_RULER=10]="OVERVIEW_RULER",t[t.SCROLLBAR=11]="SCROLLBAR",t[t.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",t[t.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"}(kn||(kn={})),function(t){t[t.AIGenerated=1]="AIGenerated"}(xn||(xn={})),function(t){t[t.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",t[t.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",t[t.TOP_CENTER=2]="TOP_CENTER"}(Cn||(Cn={})),function(t){t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=4]="Right",t[t.Full=7]="Full"}(En||(En={})),function(t){t[t.Word=0]="Word",t[t.Line=1]="Line",t[t.Suggest=2]="Suggest"}(Bn||(Bn={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.None=2]="None",t[t.LeftOfInjectedText=3]="LeftOfInjectedText",t[t.RightOfInjectedText=4]="RightOfInjectedText"}(Dn||(Dn={})),function(t){t[t.Off=0]="Off",t[t.On=1]="On",t[t.Relative=2]="Relative",t[t.Interval=3]="Interval",t[t.Custom=4]="Custom"}(Mn||(Mn={})),function(t){t[t.None=0]="None",t[t.Text=1]="Text",t[t.Blocks=2]="Blocks"}(Sn||(Sn={})),function(t){t[t.Smooth=0]="Smooth",t[t.Immediate=1]="Immediate"}(Fn||(Fn={})),function(t){t[t.Auto=1]="Auto",t[t.Hidden=2]="Hidden",t[t.Visible=3]="Visible"}(In||(In={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(Ln||(Ln={})),function(t){t.Off="off",t.OnCode="onCode",t.On="on"}(Rn||(Rn={})),function(t){t[t.Invoke=1]="Invoke",t[t.TriggerCharacter=2]="TriggerCharacter",t[t.ContentChange=3]="ContentChange"}(Tn||(Tn={})),function(t){t[t.File=0]="File",t[t.Module=1]="Module",t[t.Namespace=2]="Namespace",t[t.Package=3]="Package",t[t.Class=4]="Class",t[t.Method=5]="Method",t[t.Property=6]="Property",t[t.Field=7]="Field",t[t.Constructor=8]="Constructor",t[t.Enum=9]="Enum",t[t.Interface=10]="Interface",t[t.Function=11]="Function",t[t.Variable=12]="Variable",t[t.Constant=13]="Constant",t[t.String=14]="String",t[t.Number=15]="Number",t[t.Boolean=16]="Boolean",t[t.Array=17]="Array",t[t.Object=18]="Object",t[t.Key=19]="Key",t[t.Null=20]="Null",t[t.EnumMember=21]="EnumMember",t[t.Struct=22]="Struct",t[t.Event=23]="Event",t[t.Operator=24]="Operator",t[t.TypeParameter=25]="TypeParameter"}(Nn||(Nn={})),function(t){t[t.Deprecated=1]="Deprecated"}(Qn||(Qn={})),function(t){t[t.Hidden=0]="Hidden",t[t.Blink=1]="Blink",t[t.Smooth=2]="Smooth",t[t.Phase=3]="Phase",t[t.Expand=4]="Expand",t[t.Solid=5]="Solid"}(On||(On={})),function(t){t[t.Line=1]="Line",t[t.Block=2]="Block",t[t.Underline=3]="Underline",t[t.LineThin=4]="LineThin",t[t.BlockOutline=5]="BlockOutline",t[t.UnderlineThin=6]="UnderlineThin"}(zn||(zn={})),function(t){t[t.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",t[t.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",t[t.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",t[t.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}(Un||(Un={})),function(t){t[t.None=0]="None",t[t.Same=1]="Same",t[t.Indent=2]="Indent",t[t.DeepIndent=3]="DeepIndent"}(Hn||(Hn={}));let Pn=class{static chord(t,i){return Re(t,i)}};function jn(){return{editor:void 0,languages:void 0,CancellationTokenSource:xe,Emitter:de,KeyCode:wn,KeyMod:Pn,Position:Cs,Range:Es,Selection:Bs,SelectionDirection:Ln,MarkerSeverity:mn,MarkerTag:vn,Uri:fs,Token:Ls}}Pn.CtrlCmd=2048,Pn.Shift=1024,Pn.Alt=512,Pn.WinCtrl=256;const Wn=window;class Yn{get cachedValues(){return this._map}constructor(t){this.fn=t,this._map=new Map}get(t){if(this._map.has(t))return this._map.get(t);const i=this.fn(t);return this._map.set(t,i),i}}class _n{constructor(t){this.executor=t,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(t){this._error=t}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var Vn;function Jn(t){return!t||typeof t!="string"||t.trim().length===0}const Gn=/{(\d+)}/g;function Kn(t,...i){return i.length===0?t:t.replace(Gn,(function(t,e){const s=parseInt(e,10);return isNaN(s)||s<0||s>=i.length?t:i[s]}))}function $n(t){return t.replace(/[<>&]/g,(function(t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return t}}))}function Xn(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function qn(t,i=" "){return to(Zn(t,i),i)}function Zn(t,i){if(!t||!i)return t;const e=i.length;if(e===0||t.length===0)return t;let s=0;for(;t.indexOf(i,s)===s;)s+=e;return t.substring(s)}function to(t,i){if(!t||!i)return t;const e=i.length,s=t.length;if(e===0||s===0)return t;let n=s,o=-1;for(;o=t.lastIndexOf(i,n-1),o!==-1&&o+e===n;){if(o===0)return"";n=o}return t.substring(0,n)}function io(t,i,e={}){if(!t)throw new Error("Cannot create regex from empty string");i||(t=Xn(t)),e.wholeWord&&(/\B/.test(t.charAt(0))||(t="\\b"+t),/\B/.test(t.charAt(t.length-1))||(t+="\\b"));let s="";return e.global&&(s+="g"),e.matchCase||(s+="i"),e.multiline&&(s+="m"),e.unicode&&(s+="u"),new RegExp(t,s)}function eo(t){return t.split(/\r\n|\r|\n/)}function so(t){for(let i=0,e=t.length;i<e;i++){const e=t.charCodeAt(i);if(e!==32&&e!==9)return i}return-1}function no(t,i=0,e=t.length){for(let s=i;s<e;s++){const e=t.charCodeAt(s);if(e!==32&&e!==9)return t.substring(i,s)}return t.substring(i,e)}function oo(t,i=t.length-1){for(let e=i;e>=0;e--){const i=t.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function ro(t,i){return t<i?-1:t>i?1:0}function ho(t,i,e=0,s=t.length,n=0,o=i.length){for(;e<s&&n<o;e++,n++){const s=t.charCodeAt(e),o=i.charCodeAt(n);if(s<o)return-1;if(s>o)return 1}const r=s-e,h=o-n;return r<h?-1:r>h?1:0}function co(t,i){return ao(t,i,0,t.length,0,i.length)}function ao(t,i,e=0,s=t.length,n=0,o=i.length){for(;e<s&&n<o;e++,n++){let r=t.charCodeAt(e),h=i.charCodeAt(n);if(r===h)continue;if(r>=128||h>=128)return ho(t.toLowerCase(),i.toLowerCase(),e,s,n,o);uo(r)&&(r-=32),uo(h)&&(h-=32);const c=r-h;if(c!==0)return c}const r=s-e,h=o-n;return r<h?-1:r>h?1:0}function lo(t){return t>=48&&t<=57}function uo(t){return t>=97&&t<=122}function fo(t){return t>=65&&t<=90}function go(t,i){return t.length===i.length&&ao(t,i)===0}function Ao(t,i){const e=i.length;return!(i.length>t.length)&&ao(t,i,0,e)===0}function po(t,i){const e=Math.min(t.length,i.length);let s;for(s=0;s<e;s++)if(t.charCodeAt(s)!==i.charCodeAt(s))return s;return e}function wo(t,i){const e=Math.min(t.length,i.length);let s;const n=t.length-1,o=i.length-1;for(s=0;s<e;s++)if(t.charCodeAt(n-s)!==i.charCodeAt(o-s))return s;return e}function mo(t){return 55296<=t&&t<=56319}function vo(t){return 56320<=t&&t<=57343}function bo(t,i){return i-56320+(t-55296<<10)+65536}function yo(t,i,e){const s=t.charCodeAt(e);if(mo(s)&&e+1<i){const i=t.charCodeAt(e+1);if(vo(i))return bo(s,i)}return s}class ko{get offset(){return this._offset}constructor(t,i=0){this._str=t,this._len=t.length,this._offset=i}setOffset(t){this._offset=t}prevCodePoint(){const t=function(t,i){const e=t.charCodeAt(i-1);if(vo(e)&&i>1){const s=t.charCodeAt(i-2);if(mo(s))return bo(s,e)}return e}(this._str,this._offset);return this._offset-=t>=65536?2:1,t}nextCodePoint(){const t=yo(this._str,this._len,this._offset);return this._offset+=t>=65536?2:1,t}eol(){return this._offset>=this._len}}class xo{get offset(){return this._iterator.offset}constructor(t,i=0){this._iterator=new ko(t,i)}nextGraphemeLength(){const t=zo.getInstance(),i=this._iterator,e=i.offset;let s=t.getGraphemeBreakType(i.nextCodePoint());for(;!i.eol();){const e=i.offset,n=t.getGraphemeBreakType(i.nextCodePoint());if(Oo(s,n)){i.setOffset(e);break}s=n}return i.offset-e}prevGraphemeLength(){const t=zo.getInstance(),i=this._iterator,e=i.offset;let s=t.getGraphemeBreakType(i.prevCodePoint());for(;i.offset>0;){const e=i.offset,n=t.getGraphemeBreakType(i.prevCodePoint());if(Oo(n,s)){i.setOffset(e);break}s=n}return e-i.offset}eol(){return this._iterator.eol()}}function Co(t,i){return new xo(t,i).nextGraphemeLength()}function Eo(t,i){return new xo(t,i).prevGraphemeLength()}let Bo;function Do(t){return Bo||(Bo=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/),Bo.test(t)}const Mo=/^[\t\n\r\x20-\x7E]*$/;function So(t){return Mo.test(t)}const Fo=/[\u2028\u2029]/;function Io(t){return Fo.test(t)}function Lo(t){return t>=11904&&t<=55215||t>=63744&&t<=64255||t>=65281&&t<=65374}function Ro(t){return t>=127462&&t<=127487||t===8986||t===8987||t===9200||t===9203||t>=9728&&t<=10175||t===11088||t===11093||t>=127744&&t<=128591||t>=128640&&t<=128764||t>=128992&&t<=129008||t>=129280&&t<=129535||t>=129648&&t<=129782}const To="\ufeff";function No(t){return!!(t&&t.length>0&&t.charCodeAt(0)===65279)}function Qo(t){return(t%=52)<26?String.fromCharCode(97+t):String.fromCharCode(65+t-26)}function Oo(t,i){return t===0?i!==5&&i!==7:(t!==2||i!==3)&&(t===4||t===2||t===3||i===4||i===2||i===3||(t!==8||i!==8&&i!==9&&i!==11&&i!==12)&&(t!==11&&t!==9||i!==9&&i!==10)&&(t!==12&&t!==10||i!==10)&&i!==5&&i!==13&&i!==7&&t!==1&&(t!==13||i!==14)&&(t!==6||i!==6))}class zo{static getInstance(){return zo._INSTANCE||(zo._INSTANCE=new zo),zo._INSTANCE}constructor(){this._data=JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const i=this._data,e=i.length/3;let s=1;for(;s<=e;)if(t<i[3*s])s*=2;else{if(!(t>i[3*s+1]))return i[3*s+2];s=2*s+1}return 0}}function Uo(t,i){if(t===0)return 0;const e=function(t,i){const e=new ko(i,t);let s=e.prevCodePoint();for(;Ho(s)||s===65039||s===8419;){if(e.offset===0)return;s=e.prevCodePoint()}if(!Ro(s))return;let n=e.offset;return n>0&&e.prevCodePoint()===8205&&(n=e.offset),n}(t,i);if(e!==void 0)return e;const s=new ko(i,t);return s.prevCodePoint(),s.offset}function Ho(t){return 127995<=t&&t<=127999}zo._INSTANCE=null;class Po{static getInstance(t){return Vn.cache.get(Array.from(t))}static getLocales(){return Vn._locales.value}constructor(t){this.confusableDictionary=t}isAmbiguous(t){return this.confusableDictionary.has(t)}getPrimaryConfusable(t){return this.confusableDictionary.get(t)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}Vn=Po,Po.ambiguousCharacterData=new _n((()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))),Po.cache=new class{constructor(t,i=JSON.stringify){this.fn=t,this._computeKey=i,this.lastCache=void 0,this.lastArgKey=void 0}get(t){const i=this._computeKey(t);return this.lastArgKey!==i&&(this.lastArgKey=i,this.lastCache=this.fn(t)),this.lastCache}}((t=>{function i(t){const i=new Map;for(let e=0;e<t.length;e+=2)i.set(t[e],t[e+1]);return i}function e(t,i){if(!t)return i;const e=new Map;for(const[s,n]of t)i.has(s)&&e.set(s,n);return e}const s=Vn.ambiguousCharacterData.value;let n,o=t.filter((t=>!t.startsWith("_")&&t in s));o.length===0&&(o=["_default"]);for(const t of o)n=e(n,i(s[t]));const r=function(t,i){const e=new Map(t);for(const[t,s]of i)e.set(t,s);return e}(i(s._common),n);return new Vn(r)})),Po._locales=new _n((()=>Object.keys(Vn.ambiguousCharacterData.value).filter((t=>!t.startsWith("_")))));class jo{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(jo.getRawData())),this._data}static isInvisibleCharacter(t){return jo.getData().has(t)}static get codePoints(){return jo.getData()}}jo._data=void 0;class Wo{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(t){var i;return(i=this.mapWindowIdToZoomFactor.get(this.getWindowId(t)))!==null&&i!==void 0?i:1}getWindowId(t){return t.vscodeWindowId}}function Yo(t,i,e){typeof i=="string"&&(i=t.matchMedia(i)),i.addEventListener("change",e)}Wo.INSTANCE=new Wo;const _o=navigator.userAgent,Vo=_o.indexOf("Firefox")>=0,Jo=_o.indexOf("AppleWebKit")>=0,Go=_o.indexOf("Chrome")>=0,Ko=!Go&&_o.indexOf("Safari")>=0,$o=!Go&&!Ko&&Jo;_o.indexOf("Electron/");const Xo=_o.indexOf("Android")>=0;if(typeof Wn.matchMedia=="function"){const t=Wn.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)");Wn.matchMedia("(display-mode: fullscreen)");Yo(Wn,t,(({matches:t})=>{}))}Ct||document.queryCommandSupported&&document.queryCommandSupported("copy")||navigator&&navigator.clipboard&&navigator.clipboard.writeText;const qo=Wn.PointerEvent&&("ontouchstart"in Wn||navigator.maxTouchPoints>0);function Zo(t,i){if(typeof t=="number"){if(t===0)return null;const e=(65535&t)>>>0,s=(4294901760&t)>>>16;return new er(s!==0?[tr(e,i),tr(s,i)]:[tr(e,i)])}{const e=[];for(let s=0;s<t.length;s++)e.push(tr(t[s],i));return new er(e)}}function tr(t,i){const e=!!(2048&t),s=!!(256&t);return new ir(i===2?s:e,!!(1024&t),!!(512&t),i===2?e:s,255&t)}class ir{constructor(t,i,e,s,n){this.ctrlKey=t,this.shiftKey=i,this.altKey=e,this.metaKey=s,this.keyCode=n}equals(t){return t instanceof ir&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class er{constructor(t){if(t.length===0)throw Wi("chords");this.chords=t}}class sr{constructor(t,i,e,s,n,o){this.ctrlKey=t,this.shiftKey=i,this.altKey=e,this.metaKey=s,this.keyLabel=n,this.keyAriaLabel=o}}class nr{}const or=kt?256:2048,rr=kt?2048:256;class hr{constructor(t){var i;this._standardKeyboardEventBrand=!0;const e=t;this.browserEvent=e,this.target=e.target,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.altGraphKey=(i=e.getModifierState)===null||i===void 0?void 0:i.call(e,"AltGraph"),this.keyCode=function(t){if(t.charCode){const i=String.fromCharCode(t.charCode).toUpperCase();return Le.fromString(i)}const i=t.keyCode;if(i===3)return 7;if(Vo)switch(i){case 59:return 85;case 60:if(xt)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(kt)return 57}else if(Jo&&(kt&&i===93||!kt&&i===92))return 57;return Me[i]||0}(e),this.code=e.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(t){return this._asKeybinding===t}_computeKeybinding(){let t=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode);let i=0;return this.ctrlKey&&(i|=or),this.altKey&&(i|=512),this.shiftKey&&(i|=1024),this.metaKey&&(i|=rr),i|=t,i}_computeKeyCodeChord(){let t=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode),new ir(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)}}const cr=new WeakMap;function ar(t){if(!t.parent||t.parent===t)return null;try{const i=t.location,e=t.parent.location;if(i.origin!=="null"&&e.origin!=="null"&&i.origin!==e.origin)return null}catch{return null}return t.parent}class lr{static getSameOriginWindowChain(t){let i=cr.get(t);if(!i){i=[],cr.set(t,i);let e,s=t;do{e=ar(s),e?i.push({window:new WeakRef(s),iframeElement:s.frameElement||null}):i.push({window:new WeakRef(s),iframeElement:null}),s=e}while(s)}return i.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(t,i){var e,s;if(!i||t===i)return{top:0,left:0};let n=0,o=0;const r=this.getSameOriginWindowChain(t);for(const t of r){const r=t.window.deref();if(n+=(e=r==null?void 0:r.scrollY)!==null&&e!==void 0?e:0,o+=(s=r==null?void 0:r.scrollX)!==null&&s!==void 0?s:0,r===i||!t.iframeElement)break;const h=t.iframeElement.getBoundingClientRect();n+=h.top,o+=h.left}return{top:n,left:o}}}class ur{constructor(t,i){this.timestamp=Date.now(),this.browserEvent=i,this.leftButton=i.button===0,this.middleButton=i.button===1,this.rightButton=i.button===2,this.buttons=i.buttons,this.target=i.target,this.detail=i.detail||1,i.type==="dblclick"&&(this.detail=2),this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,typeof i.pageX=="number"?(this.posx=i.pageX,this.posy=i.pageY):(this.posx=i.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=i.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const e=lr.getPositionOfChildWindowRelativeToAncestorWindow(t,i.view);this.posx-=e.left,this.posy-=e.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class dr{constructor(t,i=0,e=0){var s;this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=e,this.deltaX=i;let n=!1;if(Go){const t=navigator.userAgent.match(/Chrome\/(\d+)/);n=(t?parseInt(t[1]):123)<=122}if(t){const i=t,e=t,o=((s=t.view)===null||s===void 0?void 0:s.devicePixelRatio)||1;if(i.wheelDeltaY!==void 0)this.deltaY=n?i.wheelDeltaY/(120*o):i.wheelDeltaY/120;else if(e.VERTICAL_AXIS!==void 0&&e.axis===e.VERTICAL_AXIS)this.deltaY=-e.detail/3;else if(t.type==="wheel"){const i=t;i.deltaMode===i.DOM_DELTA_LINE?this.deltaY=Vo&&!kt?-t.deltaY/3:-t.deltaY:this.deltaY=-t.deltaY/40}if(i.wheelDeltaX!==void 0)this.deltaX=Ko&&yt?-i.wheelDeltaX/120:n?i.wheelDeltaX/(120*o):i.wheelDeltaX/120;else if(e.HORIZONTAL_AXIS!==void 0&&e.axis===e.HORIZONTAL_AXIS)this.deltaX=-t.detail/3;else if(t.type==="wheel"){const i=t;i.deltaMode===i.DOM_DELTA_LINE?this.deltaX=Vo&&!kt?-t.deltaX/3:-t.deltaX:this.deltaX=-t.deltaX/40}this.deltaY===0&&this.deltaX===0&&t.wheelDelta&&(this.deltaY=n?t.wheelDelta/(120*o):t.wheelDelta/120)}}preventDefault(){var t;(t=this.browserEvent)===null||t===void 0||t.preventDefault()}stopPropagation(){var t;(t=this.browserEvent)===null||t===void 0||t.stopPropagation()}}const fr=Symbol("MicrotaskDelay");function gr(t){return!!t&&typeof t.then=="function"}function Ar(t){const i=new xe,e=t(i.token),s=new Promise(((t,s)=>{const n=i.token.onCancellationRequested((()=>{n.dispose(),s(new ji)}));Promise.resolve(e).then((e=>{n.dispose(),i.dispose(),t(e)}),(t=>{n.dispose(),i.dispose(),s(t)}))}));return new class{cancel(){i.cancel(),i.dispose()}then(t,i){return s.then(t,i)}catch(t){return this.then(void 0,t)}finally(t){return s.finally(t)}}}function pr(t,i,e){return new Promise(((s,n)=>{const o=i.onCancellationRequested((()=>{o.dispose(),s(e)}));t.then(s,n).finally((()=>o.dispose()))}))}class wr{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(t){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=t,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const t=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,t};this.queuedPromise=new Promise((i=>{this.activePromise.then(t,t).then(i)}))}return new Promise(((t,i)=>{this.queuedPromise.then(t,i)}))}return this.activePromise=t(),new Promise(((t,i)=>{this.activePromise.then((i=>{this.activePromise=null,t(i)}),(t=>{this.activePromise=null,i(t)}))}))}dispose(){this.isDisposed=!0}}class mr{constructor(t){this.defaultDelay=t,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(t,i=this.defaultDelay){this.task=t,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(((t,i)=>{this.doResolve=t,this.doReject=i})).then((()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const t=this.task;return this.task=null,t()}})));const e=()=>{var t;this.deferred=null,(t=this.doResolve)===null||t===void 0||t.call(this,null)};return this.deferred=i===fr?(t=>{let i=!0;return queueMicrotask((()=>{i&&(i=!1,t())})),{isTriggered:()=>i,dispose:()=>{i=!1}}})(e):((t,i)=>{let e=!0;const s=setTimeout((()=>{e=!1,i()}),t);return{isTriggered:()=>e,dispose:()=>{clearTimeout(s),e=!1}}})(i,e),this.completionPromise}isTriggered(){var t;return!!(!((t=this.deferred)===null||t===void 0)&&t.isTriggered())}cancel(){var t;this.cancelTimeout(),this.completionPromise&&((t=this.doReject)===null||t===void 0||t.call(this,new ji),this.completionPromise=null)}cancelTimeout(){var t;(t=this.deferred)===null||t===void 0||t.dispose(),this.deferred=null}dispose(){this.cancel()}}class vr{constructor(t){this.delayer=new mr(t),this.throttler=new wr}trigger(t,i){return this.delayer.trigger((()=>this.throttler.queue(t)),i)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function br(t,i){return i?new Promise(((e,s)=>{const n=setTimeout((()=>{o.dispose(),e()}),t),o=i.onCancellationRequested((()=>{clearTimeout(n),o.dispose(),s(new ji)}))})):Ar((i=>br(t,i)))}function yr(t,i=0,e){const s=setTimeout((()=>{t(),e&&n.dispose()}),i),n=qi((()=>{clearTimeout(s),e==null||e.deleteAndLeak(n)}));return e==null||e.add(n),n}function kr(t,i=(t=>!!t),e=null){let s=0;const n=t.length,o=()=>{if(s>=n)return Promise.resolve(e);const r=t[s++];return Promise.resolve(r()).then((t=>i(t)?Promise.resolve(t):o()))};return o()}class xr{constructor(t,i){this._token=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(t,i){this.cancel(),this._token=setTimeout((()=>{this._token=-1,t()}),i)}setIfNotSet(t,i){this._token===-1&&(this._token=setTimeout((()=>{this._token=-1,t()}),i))}}class Cr{constructor(){this.disposable=void 0}cancel(){var t;(t=this.disposable)===null||t===void 0||t.dispose(),this.disposable=void 0}cancelAndSet(t,i,e=globalThis){this.cancel();const s=e.setInterval((()=>{t()}),i);this.disposable=qi((()=>{e.clearInterval(s),this.disposable=void 0}))}dispose(){this.cancel()}}class Er{constructor(t,i){this.timeoutToken=-1,this.runner=t,this.timeout=i,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(t=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,t)}get delay(){return this.timeout}set delay(t){this.timeout=t}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var t;(t=this.runner)===null||t===void 0||t.call(this)}}let Br,Dr;Dr=typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?(t,i)=>{Lt((()=>{if(e)return;const t=Date.now()+15;i(Object.freeze({didTimeout:!0,timeRemaining:()=>Math.max(0,t-Date.now())}))}));let e=!1;return{dispose(){e||(e=!0)}}}:(t,i,e)=>{const s=t.requestIdleCallback(i,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,t.cancelIdleCallback(s))}}},Br=t=>Dr(globalThis,t);class Mr{constructor(t,i){this._didRun=!1,this._executor=()=>{try{this._value=i()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Dr(t,(()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class Sr extends Mr{constructor(t){super(globalThis,t)}}class Fr{get isRejected(){var t;return((t=this.outcome)===null||t===void 0?void 0:t.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise(((t,i)=>{this.completeCallback=t,this.errorCallback=i}))}complete(t){return new Promise((i=>{this.completeCallback(t),this.outcome={outcome:0,value:t},i()}))}error(t){return new Promise((i=>{this.errorCallback(t),this.outcome={outcome:1,value:t},i()}))}cancel(){return this.error(new ji)}}var Ir;(function(t){t.settled=async function(t){let i;const e=await Promise.all(t.map((t=>t.then((t=>t),(t=>{i||(i=t)})))));if(i!==void 0)throw i;return e},t.withAsyncBody=function(t){return new Promise((async(i,e)=>{try{await t(i,e)}catch(t){e(t)}}))}})(Ir||(Ir={}));class Lr{static fromArray(t){return new Lr((i=>{i.emitMany(t)}))}static fromPromise(t){return new Lr((async i=>{i.emitMany(await t)}))}static fromPromises(t){return new Lr((async i=>{await Promise.all(t.map((async t=>i.emitOne(await t))))}))}static merge(t){return new Lr((async i=>{await Promise.all(t.map((async t=>{for await(const e of t)i.emitOne(e)})))}))}constructor(t){this._state=0,this._results=[],this._error=null,this._onStateChanged=new de,queueMicrotask((async()=>{const i={emitOne:t=>this.emitOne(t),emitMany:t=>this.emitMany(t),reject:t=>this.reject(t)};try{await Promise.resolve(t(i)),this.resolve()}catch(t){this.reject(t)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}}))}[Symbol.asyncIterator](){let t=0;return{next:async()=>{for(;;){if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await he.toPromise(this._onStateChanged.event)}}}}static map(t,i){return new Lr((async e=>{for await(const s of t)e.emitOne(i(s))}))}map(t){return Lr.map(this,t)}static filter(t,i){return new Lr((async e=>{for await(const s of t)i(s)&&e.emitOne(s)}))}filter(t){return Lr.filter(this,t)}static coalesce(t){return Lr.filter(t,(t=>!!t))}coalesce(){return Lr.coalesce(this)}static async toPromise(t){const i=[];for await(const e of t)i.push(e);return i}toPromise(){return Lr.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}}Lr.EMPTY=Lr.fromArray([]);class Rr extends Lr{constructor(t,i){super(i),this._source=t}cancel(){this._source.cancel()}}const{entries:Tr,setPrototypeOf:Nr,isFrozen:Qr,getPrototypeOf:Or,getOwnPropertyDescriptor:zr}=Object;let{freeze:Ur,seal:Hr,create:Pr}=Object,{apply:jr,construct:Wr}=typeof Reflect<"u"&&Reflect;jr||(jr=function(t,i,e){return t.apply(i,e)}),Ur||(Ur=function(t){return t}),Hr||(Hr=function(t){return t}),Wr||(Wr=function(t,i){return new t(...i)});const Yr=eh(Array.prototype.forEach),_r=eh(Array.prototype.pop),Vr=eh(Array.prototype.push),Jr=eh(String.prototype.toLowerCase),Gr=eh(String.prototype.toString),Kr=eh(String.prototype.match),$r=eh(String.prototype.replace),Xr=eh(String.prototype.indexOf),qr=eh(String.prototype.trim),Zr=eh(RegExp.prototype.test),th=(ih=TypeError,function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return Wr(ih,i)});var ih;function eh(t){return function(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return jr(t,i,s)}}function sh(t,i,e){var s;e=(s=e)!==null&&s!==void 0?s:Jr,Nr&&Nr(t,null);let n=i.length;for(;n--;){let s=i[n];if(typeof s=="string"){const t=e(s);t!==s&&(Qr(i)||(i[n]=t),s=t)}t[s]=!0}return t}function nh(t){const i=Pr(null);for(const[e,s]of Tr(t))i[e]=s;return i}function oh(t,i){for(;t!==null;){const e=zr(t,i);if(e){if(e.get)return eh(e.get);if(typeof e.value=="function")return eh(e.value)}t=Or(t)}return function(t){return console.warn("fallback value for",t),null}}const rh=Ur(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),hh=Ur(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ch=Ur(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ah=Ur(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),lh=Ur(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),uh=Ur(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),dh=Ur(["#text"]),fh=Ur(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),gh=Ur(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ah=Ur(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ph=Ur(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),wh=Hr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mh=Hr(/<%[\w\W]*|[\w\W]*%>/gm),vh=Hr(/\${[\w\W]*}/gm),bh=Hr(/^data-[\-\w.\u00B7-\uFFFF]/),yh=Hr(/^aria-[\-\w]+$/),kh=Hr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xh=Hr(/^(?:\w+script|data):/i),Ch=Hr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Eh=Hr(/^html$/i);var Bh=Object.freeze({__proto__:null,MUSTACHE_EXPR:wh,ERB_EXPR:mh,TMPLIT_EXPR:vh,DATA_ATTR:bh,ARIA_ATTR:yh,IS_ALLOWED_URI:kh,IS_SCRIPT_OR_DATA:xh,ATTR_WHITESPACE:Ch,DOCTYPE_NAME:Eh});const Dh=()=>typeof window>"u"?null:window;var Mh=function t(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dh();const e=i=>t(i);if(e.version="3.0.5",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;const s=i.document,n=s.currentScript;let{document:o}=i;const{DocumentFragment:r,HTMLTemplateElement:h,Node:c,Element:a,NodeFilter:l,NamedNodeMap:u=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:g}=i,A=a.prototype,p=oh(A,"cloneNode"),w=oh(A,"nextSibling"),m=oh(A,"childNodes"),v=oh(A,"parentNode");if(typeof h=="function"){const t=o.createElement("template");t.content&&t.content.ownerDocument&&(o=t.content.ownerDocument)}let b,y="";const{implementation:k,createNodeIterator:x,createDocumentFragment:C,getElementsByTagName:E}=o,{importNode:B}=s;let D={};e.isSupported=typeof Tr=="function"&&typeof v=="function"&&k&&k.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:M,ERB_EXPR:S,TMPLIT_EXPR:F,DATA_ATTR:I,ARIA_ATTR:L,IS_SCRIPT_OR_DATA:R,ATTR_WHITESPACE:T}=Bh;let{IS_ALLOWED_URI:N}=Bh,Q=null;const O=sh({},[...rh,...hh,...ch,...lh,...dh]);let z=null;const U=sh({},[...fh,...gh,...Ah,...ph]);let H=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),P=null,j=null,W=!0,Y=!0,_=!1,V=!0,J=!1,G=!1,K=!1,$=!1,X=!1,q=!1,Z=!1,tt=!0,it=!1,et=!0,st=!1,nt={},ot=null;const rt=sh({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ht=null;const ct=sh({},["audio","video","img","source","image","track"]);let at=null;const lt=sh({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ut="http://www.w3.org/1998/Math/MathML",dt="http://www.w3.org/2000/svg",ft="http://www.w3.org/1999/xhtml";let gt=ft,At=!1,pt=null;const wt=sh({},[ut,dt,ft],Gr);let mt;const vt=["application/xhtml+xml","text/html"];let bt,yt=null;const kt=o.createElement("form"),xt=function(t){return t instanceof RegExp||t instanceof Function},Ct=function(t){if(!yt||yt!==t){if(t&&typeof t=="object"||(t={}),t=nh(t),mt=mt=vt.indexOf(t.PARSER_MEDIA_TYPE)===-1?"text/html":t.PARSER_MEDIA_TYPE,bt=mt==="application/xhtml+xml"?Gr:Jr,Q="ALLOWED_TAGS"in t?sh({},t.ALLOWED_TAGS,bt):O,z="ALLOWED_ATTR"in t?sh({},t.ALLOWED_ATTR,bt):U,pt="ALLOWED_NAMESPACES"in t?sh({},t.ALLOWED_NAMESPACES,Gr):wt,at="ADD_URI_SAFE_ATTR"in t?sh(nh(lt),t.ADD_URI_SAFE_ATTR,bt):lt,ht="ADD_DATA_URI_TAGS"in t?sh(nh(ct),t.ADD_DATA_URI_TAGS,bt):ct,ot="FORBID_CONTENTS"in t?sh({},t.FORBID_CONTENTS,bt):rt,P="FORBID_TAGS"in t?sh({},t.FORBID_TAGS,bt):{},j="FORBID_ATTR"in t?sh({},t.FORBID_ATTR,bt):{},nt="USE_PROFILES"in t&&t.USE_PROFILES,W=t.ALLOW_ARIA_ATTR!==!1,Y=t.ALLOW_DATA_ATTR!==!1,_=t.ALLOW_UNKNOWN_PROTOCOLS||!1,V=t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,J=t.SAFE_FOR_TEMPLATES||!1,G=t.WHOLE_DOCUMENT||!1,X=t.RETURN_DOM||!1,q=t.RETURN_DOM_FRAGMENT||!1,Z=t.RETURN_TRUSTED_TYPE||!1,$=t.FORCE_BODY||!1,tt=t.SANITIZE_DOM!==!1,it=t.SANITIZE_NAMED_PROPS||!1,et=t.KEEP_CONTENT!==!1,st=t.IN_PLACE||!1,N=t.ALLOWED_URI_REGEXP||kh,gt=t.NAMESPACE||ft,H=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&xt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&xt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(H.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(Y=!1),q&&(X=!0),nt&&(Q=sh({},[...dh]),z=[],nt.html===!0&&(sh(Q,rh),sh(z,fh)),nt.svg===!0&&(sh(Q,hh),sh(z,gh),sh(z,ph)),nt.svgFilters===!0&&(sh(Q,ch),sh(z,gh),sh(z,ph)),nt.mathMl===!0&&(sh(Q,lh),sh(z,Ah),sh(z,ph))),t.ADD_TAGS&&(Q===O&&(Q=nh(Q)),sh(Q,t.ADD_TAGS,bt)),t.ADD_ATTR&&(z===U&&(z=nh(z)),sh(z,t.ADD_ATTR,bt)),t.ADD_URI_SAFE_ATTR&&sh(at,t.ADD_URI_SAFE_ATTR,bt),t.FORBID_CONTENTS&&(ot===rt&&(ot=nh(ot)),sh(ot,t.FORBID_CONTENTS,bt)),et&&(Q["#text"]=!0),G&&sh(Q,["html","head","body"]),Q.table&&(sh(Q,["tbody"]),delete P.tbody),t.TRUSTED_TYPES_POLICY){if(typeof t.TRUSTED_TYPES_POLICY.createHTML!="function")throw th('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof t.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw th('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=t.TRUSTED_TYPES_POLICY,y=b.createHTML("")}else b===void 0&&(b=function(t,i){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let e=null;const s="data-tt-policy-suffix";i&&i.hasAttribute(s)&&(e=i.getAttribute(s));const n="dompurify"+(e?"#"+e:"");try{return t.createPolicy(n,{createHTML:t=>t,createScriptURL:t=>t})}catch{return console.warn("TrustedTypes policy "+n+" could not be created."),null}}(g,n)),b!==null&&typeof y=="string"&&(y=b.createHTML(""));Ur&&Ur(t),yt=t}},Et=sh({},["mi","mo","mn","ms","mtext"]),Bt=sh({},["foreignobject","desc","title","annotation-xml"]),Dt=sh({},["title","style","font","a","script"]),Mt=sh({},hh);sh(Mt,ch),sh(Mt,ah);const St=sh({},lh);sh(St,uh);const Ft=function(t){Vr(e.removed,{element:t});try{t.parentNode.removeChild(t)}catch{t.remove()}},It=function(t,i){try{Vr(e.removed,{attribute:i.getAttributeNode(t),from:i})}catch{Vr(e.removed,{attribute:null,from:i})}if(i.removeAttribute(t),t==="is"&&!z[t])if(X||q)try{Ft(i)}catch{}else try{i.setAttribute(t,"")}catch{}},Lt=function(t){let i,e;if($)t="<remove></remove>"+t;else{const i=Kr(t,/^[\r\n\t ]+/);e=i&&i[0]}mt==="application/xhtml+xml"&&gt===ft&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const s=b?b.createHTML(t):t;if(gt===ft)try{i=(new f).parseFromString(s,mt)}catch{}if(!i||!i.documentElement){i=k.createDocument(gt,"template",null);try{i.documentElement.innerHTML=At?y:s}catch{}}const n=i.body||i.documentElement;return t&&e&&n.insertBefore(o.createTextNode(e),n.childNodes[0]||null),gt===ft?E.call(i,G?"html":"body")[0]:G?i.documentElement:n},Rt=function(t){return x.call(t.ownerDocument||t,t,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},Tt=function(t){return typeof c=="object"?t instanceof c:t&&typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.nodeName=="string"},Nt=function(t,i,s){D[t]&&Yr(D[t],(t=>{t.call(e,i,s,yt)}))},Qt=function(t){let i;if(Nt("beforeSanitizeElements",t,null),(s=t)instanceof d&&(typeof s.nodeName!="string"||typeof s.textContent!="string"||typeof s.removeChild!="function"||!(s.attributes instanceof u)||typeof s.removeAttribute!="function"||typeof s.setAttribute!="function"||typeof s.namespaceURI!="string"||typeof s.insertBefore!="function"||typeof s.hasChildNodes!="function"))return Ft(t),!0;var s;const n=bt(t.nodeName);if(Nt("uponSanitizeElement",t,{tagName:n,allowedTags:Q}),t.hasChildNodes()&&!Tt(t.firstElementChild)&&(!Tt(t.content)||!Tt(t.content.firstElementChild))&&Zr(/<[/\w]/g,t.innerHTML)&&Zr(/<[/\w]/g,t.textContent))return Ft(t),!0;if(!Q[n]||P[n]){if(!P[n]&&zt(n)&&(H.tagNameCheck instanceof RegExp&&Zr(H.tagNameCheck,n)||H.tagNameCheck instanceof Function&&H.tagNameCheck(n)))return!1;if(et&&!ot[n]){const i=v(t)||t.parentNode,e=m(t)||t.childNodes;if(e&&i)for(let s=e.length-1;s>=0;--s)i.insertBefore(p(e[s],!0),w(t))}return Ft(t),!0}return t instanceof a&&!function(t){let i=v(t);i&&i.tagName||(i={namespaceURI:gt,tagName:"template"});const e=Jr(t.tagName),s=Jr(i.tagName);return!!pt[t.namespaceURI]&&(t.namespaceURI===dt?i.namespaceURI===ft?e==="svg":i.namespaceURI===ut?e==="svg"&&(s==="annotation-xml"||Et[s]):!!Mt[e]:t.namespaceURI===ut?i.namespaceURI===ft?e==="math":i.namespaceURI===dt?e==="math"&&Bt[s]:!!St[e]:t.namespaceURI===ft?!(i.namespaceURI===dt&&!Bt[s])&&!(i.namespaceURI===ut&&!Et[s])&&!St[e]&&(Dt[e]||!Mt[e]):!(mt!=="application/xhtml+xml"||!pt[t.namespaceURI]))}(t)?(Ft(t),!0):n!=="noscript"&&n!=="noembed"&&n!=="noframes"||!Zr(/<\/no(script|embed|frames)/i,t.innerHTML)?(J&&t.nodeType===3&&(i=t.textContent,i=$r(i,M," "),i=$r(i,S," "),i=$r(i,F," "),t.textContent!==i&&(Vr(e.removed,{element:t.cloneNode()}),t.textContent=i)),Nt("afterSanitizeElements",t,null),!1):(Ft(t),!0)},Ot=function(t,i,e){if(tt&&(i==="id"||i==="name")&&(e in o||e in kt))return!1;if(!(Y&&!j[i]&&Zr(I,i))){if(!(W&&Zr(L,i))){if(!z[i]||j[i]){if(!(zt(t)&&(H.tagNameCheck instanceof RegExp&&Zr(H.tagNameCheck,t)||H.tagNameCheck instanceof Function&&H.tagNameCheck(t))&&(H.attributeNameCheck instanceof RegExp&&Zr(H.attributeNameCheck,i)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(i))||i==="is"&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&Zr(H.tagNameCheck,e)||H.tagNameCheck instanceof Function&&H.tagNameCheck(e))))return!1}else if(!at[i]){if(!Zr(N,$r(e,T,""))){if((i!=="src"&&i!=="xlink:href"&&i!=="href"||t==="script"||Xr(e,"data:")!==0||!ht[t])&&!(_&&!Zr(R,$r(e,T,"")))){if(e)return!1}}}}}return!0},zt=function(t){return t.indexOf("-")>0},Ut=function(t){let i,s,n,o;Nt("beforeSanitizeAttributes",t,null);const{attributes:r}=t;if(!r)return;const h={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z};for(o=r.length;o--;){i=r[o];const{name:c,namespaceURI:a}=i;if(s=c==="value"?i.value:qr(i.value),n=bt(c),h.attrName=n,h.attrValue=s,h.keepAttr=!0,h.forceKeepAttr=void 0,Nt("uponSanitizeAttribute",t,h),s=h.attrValue,h.forceKeepAttr||(It(c,t),!h.keepAttr))continue;if(!V&&Zr(/\/>/i,s)){It(c,t);continue}J&&(s=$r(s,M," "),s=$r(s,S," "),s=$r(s,F," "));const l=bt(t.nodeName);if(Ot(l,n,s)){if(!it||n!=="id"&&n!=="name"||(It(c,t),s="user-content-"+s),b&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!a)switch(g.getAttributeType(l,n)){case"TrustedHTML":s=b.createHTML(s);break;case"TrustedScriptURL":s=b.createScriptURL(s)}try{a?t.setAttributeNS(a,c,s):t.setAttribute(c,s),_r(e.removed)}catch{}}}Nt("afterSanitizeAttributes",t,null)},Ht=function t(i){let e;const s=Rt(i);for(Nt("beforeSanitizeShadowDOM",i,null);e=s.nextNode();)Nt("uponSanitizeShadowNode",e,null),Qt(e)||(e.content instanceof r&&t(e.content),Ut(e));Nt("afterSanitizeShadowDOM",i,null)};return e.sanitize=function(t){let i,n,o,h,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(At=!t,At&&(t="\x3c!--\x3e"),typeof t!="string"&&!Tt(t)){if(typeof t.toString!="function")throw th("toString is not a function");if(typeof(t=t.toString())!="string")throw th("dirty is not a string, aborting")}if(!e.isSupported)return t;if(K||Ct(a),e.removed=[],typeof t=="string"&&(st=!1),st){if(t.nodeName){const i=bt(t.nodeName);if(!Q[i]||P[i])throw th("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof c)i=Lt("\x3c!----\x3e"),n=i.ownerDocument.importNode(t,!0),n.nodeType===1&&n.nodeName==="BODY"||n.nodeName==="HTML"?i=n:i.appendChild(n);else{if(!X&&!J&&!G&&t.indexOf("<")===-1)return b&&Z?b.createHTML(t):t;if(i=Lt(t),!i)return X?null:Z?y:""}i&&$&&Ft(i.firstChild);const l=Rt(st?t:i);for(;o=l.nextNode();)Qt(o)||(o.content instanceof r&&Ht(o.content),Ut(o));if(st)return t;if(X){if(q)for(h=C.call(i.ownerDocument);i.firstChild;)h.appendChild(i.firstChild);else h=i;return(z.shadowroot||z.shadowrootmode)&&(h=B.call(s,h,!0)),h}let u=G?i.outerHTML:i.innerHTML;return G&&Q["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&Zr(Eh,i.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+i.ownerDocument.doctype.name+`>\n`+u),J&&(u=$r(u,M," "),u=$r(u,S," "),u=$r(u,F," ")),b&&Z?b.createHTML(u):u},e.setConfig=function(t){Ct(t),K=!0},e.clearConfig=function(){yt=null,K=!1},e.isValidAttribute=function(t,i,e){yt||Ct({});const s=bt(t),n=bt(i);return Ot(s,n,e)},e.addHook=function(t,i){typeof i=="function"&&(D[t]=D[t]||[],Vr(D[t],i))},e.removeHook=function(t){if(D[t])return _r(D[t])},e.removeHooks=function(t){D[t]&&(D[t]=[])},e.removeAllHooks=function(){D={}},e}();const Sh=Mh.sanitize;const Fh=Mh.addHook,Ih=Mh.removeHook;var Lh;function Rh(t,i){return fs.isUri(t)?go(t.scheme,i):Ao(t,i+":")}function Th(t,...i){return i.some((i=>Rh(t,i)))}(function(t){t.inMemory="inmemory",t.vscode="vscode",t.internal="private",t.walkThrough="walkThrough",t.walkThroughSnippet="walkThroughSnippet",t.http="http",t.https="https",t.file="file",t.mailto="mailto",t.untitled="untitled",t.data="data",t.command="command",t.vscodeRemote="vscode-remote",t.vscodeRemoteResource="vscode-remote-resource",t.vscodeManagedRemoteResource="vscode-managed-remote-resource",t.vscodeUserData="vscode-userdata",t.vscodeCustomEditor="vscode-custom-editor",t.vscodeNotebookCell="vscode-notebook-cell",t.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",t.vscodeNotebookCellOutput="vscode-notebook-cell-output",t.vscodeInteractiveInput="vscode-interactive-input",t.vscodeSettings="vscode-settings",t.vscodeWorkspaceTrust="vscode-workspace-trust",t.vscodeTerminal="vscode-terminal",t.vscodeChatCodeBlock="vscode-chat-code-block",t.vscodeChatSesssion="vscode-chat-editor",t.webviewPanel="webview-panel",t.vscodeWebview="vscode-webview",t.extension="extension",t.vscodeFileResource="vscode-file",t.tmp="tmp",t.vsls="vsls",t.vscodeSourceControl="vscode-scm",t.codeSetting="code-setting"})(Lh||(Lh={}));const Nh=new class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(t){this._preferredWebSchema=t}get _remoteResourcesPath(){return Ze.join(this._serverRootPath,Lh.vscodeRemoteResource)}rewrite(t){if(this._delegate)try{return this._delegate(t)}catch(i){return Oi(i),t}const i=t.authority;let e=this._hosts[i];e&&e.indexOf(":")!==-1&&e.indexOf("[")===-1&&(e=`[${e}]`);const s=this._ports[i],n=this._connectionTokens[i];let o=`path=${encodeURIComponent(t.path)}`;return typeof n=="string"&&(o+=`&tkn=${encodeURIComponent(n)}`),fs.from({scheme:Et?this._preferredWebSchema:Lh.vscodeRemoteResource,authority:`${e}:${s}`,path:this._remoteResourcesPath,query:o})}};class Qh{uriToBrowserUri(t){return t.scheme===Lh.vscodeRemote?Nh.rewrite(t):t.scheme!==Lh.file||!Ct&&Bt!==`${Lh.vscodeFileResource}://${Qh.FALLBACK_AUTHORITY}`?t:t.with({scheme:Lh.vscodeFileResource,authority:t.authority||Qh.FALLBACK_AUTHORITY,query:null,fragment:null})}}Qh.FALLBACK_AUTHORITY="vscode-app";const Oh=new Qh;var zh;function Uh(t){return Hh(t,0)}function Hh(t,i){switch(typeof t){case"object":return t===null?Ph(349,i):Array.isArray(t)?(e=t,s=Ph(104579,s=i),e.reduce(((t,i)=>Hh(i,t)),s)):function(t,i){return i=Ph(181387,i),Object.keys(t).sort().reduce(((i,e)=>(i=jh(e,i),Hh(t[e],i))),i)}(t,i);case"string":return jh(t,i);case"boolean":return function(t,i){return Ph(t?433:863,i)}(t,i);case"number":return Ph(t,i);case"undefined":return Ph(937,i);default:return Ph(617,i)}var e,s}function Ph(t,i){return(i<<5)-i+t|0}function jh(t,i){i=Ph(149417,i);for(let e=0,s=t.length;e<s;e++)i=Ph(t.charCodeAt(e),i);return i}function Wh(t,i,e=32){const s=e-i;return(t<<i|(~((1<<s)-1)&t)>>>s)>>>0}function Yh(t,i=0,e=t.byteLength,s=0){for(let n=0;n<e;n++)t[i+n]=s}function _h(t,i=32){return t instanceof ArrayBuffer?Array.from(new Uint8Array(t)).map((t=>t.toString(16).padStart(2,"0"))).join(""):function(t,i,e="0"){for(;t.length<i;)t=e+t;return t}((t>>>0).toString(16),i/4)}(function(t){const i=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);t.CoopAndCoep=Object.freeze(i.get("3"));const e="vscode-coi";t.getHeadersFromQuery=function(t){let s;typeof t=="string"?s=new URL(t).searchParams:t instanceof URL?s=t.searchParams:fs.isUri(t)&&(s=new URL(t.toString(!0)).searchParams);const n=s==null?void 0:s.get(e);if(n)return i.get(n)},t.addSearchParam=function(t,i,s){if(!globalThis.crossOriginIsolated)return;const n=i&&s?"3":s?"2":"1";t instanceof URLSearchParams?t.set(e,n):t[e]=n}})(zh||(zh={}));class Vh{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(t){const i=t.length;if(i===0)return;const e=this._buff;let s,n,o=this._buffLen,r=this._leftoverHighSurrogate;for(r!==0?(s=r,n=-1,r=0):(s=t.charCodeAt(0),n=0);;){let h=s;if(mo(s)){if(!(n+1<i)){r=s;break}{const i=t.charCodeAt(n+1);vo(i)?(n++,h=bo(s,i)):h=65533}}else vo(s)&&(h=65533);if(o=this._push(e,o,h),n++,!(n<i))break;s=t.charCodeAt(n)}this._buffLen=o,this._leftoverHighSurrogate=r}_push(t,i,e){return e<128?t[i++]=e:e<2048?(t[i++]=192|(1984&e)>>>6,t[i++]=128|(63&e)>>>0):e<65536?(t[i++]=224|(61440&e)>>>12,t[i++]=128|(4032&e)>>>6,t[i++]=128|(63&e)>>>0):(t[i++]=240|(1835008&e)>>>18,t[i++]=128|(258048&e)>>>12,t[i++]=128|(4032&e)>>>6,t[i++]=128|(63&e)>>>0),i>=64&&(this._step(),i-=64,this._totalLen+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),i}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),_h(this._h0)+_h(this._h1)+_h(this._h2)+_h(this._h3)+_h(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,Yh(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Yh(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=Vh._bigBlock32,i=this._buffDV;for(let e=0;e<64;e+=4)t.setUint32(e,i.getUint32(e,!1),!1);for(let i=64;i<320;i+=4)t.setUint32(i,Wh(t.getUint32(i-12,!1)^t.getUint32(i-32,!1)^t.getUint32(i-56,!1)^t.getUint32(i-64,!1),1),!1);let e,s,n,o=this._h0,r=this._h1,h=this._h2,c=this._h3,a=this._h4;for(let i=0;i<80;i++)i<20?(e=r&h|~r&c,s=1518500249):i<40?(e=r^h^c,s=1859775393):i<60?(e=r&h|r&c|h&c,s=2400959708):(e=r^h^c,s=3395469782),n=Wh(o,5)+e+a+s+t.getUint32(4*i,!1)&4294967295,a=c,c=h,h=Wh(r,30),r=o,o=n;this._h0=this._h0+o&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+h&4294967295,this._h3=this._h3+c&4294967295,this._h4=this._h4+a&4294967295}}Vh._bigBlock32=new DataView(new ArrayBuffer(320));const{registerWindow:Jh,getWindow:Gh,getDocument:Kh,getWindows:$h,getWindowsCount:Xh,getWindowId:qh,getWindowById:Zh,hasWindow:tc,onDidRegisterWindow:ic,onWillUnregisterWindow:ec,onDidUnregisterWindow:sc}=function(){const t=new Map;(function(t,i){const e=t;typeof e.vscodeWindowId!="number"&&Object.defineProperty(e,"vscodeWindowId",{get:()=>i})})(Wn,1);const i={window:Wn,disposables:new Zi};t.set(Wn.vscodeWindowId,i);const e=new de,s=new de,n=new de;return{onDidRegisterWindow:e.event,onWillUnregisterWindow:n.event,onDidUnregisterWindow:s.event,registerWindow(i){if(t.has(i.vscodeWindowId))return te.None;const o=new Zi,r={window:i,disposables:o.add(new Zi)};return t.set(i.vscodeWindowId,r),o.add(qi((()=>{t.delete(i.vscodeWindowId),s.fire(i)}))),o.add(rc(i,$c.BEFORE_UNLOAD,(()=>{n.fire(i)}))),e.fire(r),o},getWindows:()=>t.values(),getWindowsCount:()=>t.size,getWindowId:t=>t.vscodeWindowId,hasWindow:i=>t.has(i),getWindowById:function(e,s){const n=typeof e=="number"?t.get(e):void 0;return n??(s?i:void 0)},getWindow(t){var i;const e=t;if(!((i=e==null?void 0:e.ownerDocument)===null||i===void 0)&&i.defaultView)return e.ownerDocument.defaultView.window;const s=t;return s!=null&&s.view?s.view.window:Wn},getDocument:t=>Gh(t).document}}();function nc(t){for(;t.firstChild;)t.firstChild.remove()}class oc{constructor(t,i,e,s){this._node=t,this._type=i,this._handler=e,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function rc(t,i,e,s){return new oc(t,i,e,s)}function hc(t,i){return function(e){return i(new ur(t,e))}}const cc=function(t,i,e,s){let n=e;return i==="click"||i==="mousedown"?n=hc(Gh(t),e):i!=="keydown"&&i!=="keypress"&&i!=="keyup"||(n=function(t){return function(i){return t(new hr(i))}}(e)),rc(t,i,n,s)},ac=function(t,i,e){return function(t,i,e){return rc(t,Dt&&qo?$c.POINTER_DOWN:$c.MOUSE_DOWN,i,e)}(t,hc(Gh(t),i),e)};function lc(t,i,e){return Dr(t,i,e)}class uc extends Mr{constructor(t,i){super(t,i)}}let dc,fc;class gc extends Cr{constructor(t){super(),this.defaultTarget=t&&Gh(t)}cancelAndSet(t,i,e){return super.cancelAndSet(t,i,e??this.defaultTarget)}}class Ac{constructor(t,i=0){this._runner=t,this.priority=i,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(t){Oi(t)}}static sort(t,i){return i.priority-t.priority}}function pc(t){return Gh(t).getComputedStyle(t,null)}function wc(t,i){const e=Gh(t),s=e.document;if(t!==s.body)return new vc(t.clientWidth,t.clientHeight);if(Dt&&(e!=null&&e.visualViewport))return new vc(e.visualViewport.width,e.visualViewport.height);if(e!=null&&e.innerWidth&&e.innerHeight)return new vc(e.innerWidth,e.innerHeight);if(s.body&&s.body.clientWidth&&s.body.clientHeight)return new vc(s.body.clientWidth,s.body.clientHeight);if(s.documentElement&&s.documentElement.clientWidth&&s.documentElement.clientHeight)return new vc(s.documentElement.clientWidth,s.documentElement.clientHeight);if(i)return wc(i);throw new Error("Unable to figure out browser width and height")}(function(){const t=new Map,i=new Map,e=new Map,s=new Map;fc=(n,o,r=0)=>{const h=qh(n),c=new Ac(o,r);let a=t.get(h);return a||(a=[],t.set(h,a)),a.push(c),e.get(h)||(e.set(h,!0),n.requestAnimationFrame((()=>(n=>{var o;e.set(n,!1);const r=(o=t.get(n))!==null&&o!==void 0?o:[];for(i.set(n,r),t.set(n,[]),s.set(n,!0);r.length>0;)r.sort(Ac.sort),r.shift().execute();s.set(n,!1)})(h)))),c},dc=(t,e,n)=>{const o=qh(t);if(s.get(o)){const t=new Ac(e,n);let s=i.get(o);return s||(s=[],i.set(o,s)),s.push(t),t}return fc(t,e,n)}})();class mc{static convertToPixels(t,i){return parseFloat(i)||0}static getDimension(t,i,e){const s=pc(t),n=s?s.getPropertyValue(i):"0";return mc.convertToPixels(t,n)}static getBorderLeftWidth(t){return mc.getDimension(t,"border-left-width","borderLeftWidth")}static getBorderRightWidth(t){return mc.getDimension(t,"border-right-width","borderRightWidth")}static getBorderTopWidth(t){return mc.getDimension(t,"border-top-width","borderTopWidth")}static getBorderBottomWidth(t){return mc.getDimension(t,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(t){return mc.getDimension(t,"padding-left","paddingLeft")}static getPaddingRight(t){return mc.getDimension(t,"padding-right","paddingRight")}static getPaddingTop(t){return mc.getDimension(t,"padding-top","paddingTop")}static getPaddingBottom(t){return mc.getDimension(t,"padding-bottom","paddingBottom")}static getMarginLeft(t){return mc.getDimension(t,"margin-left","marginLeft")}static getMarginTop(t){return mc.getDimension(t,"margin-top","marginTop")}static getMarginRight(t){return mc.getDimension(t,"margin-right","marginRight")}static getMarginBottom(t){return mc.getDimension(t,"margin-bottom","marginBottom")}}class vc{constructor(t,i){this.width=t,this.height=i}with(t=this.width,i=this.height){return t!==this.width||i!==this.height?new vc(t,i):this}static is(t){return typeof t=="object"&&typeof t.height=="number"&&typeof t.width=="number"}static lift(t){return t instanceof vc?t:new vc(t.width,t.height)}static equals(t,i){return t===i||!(!t||!i)&&t.width===i.width&&t.height===i.height}}function bc(t){let i=t.offsetParent,e=t.offsetTop,s=t.offsetLeft;for(;(t=t.parentNode)!==null&&t!==t.ownerDocument.body&&t!==t.ownerDocument.documentElement;){e-=t.scrollTop;const n=Sc(t)?null:pc(t);n&&(s-=n.direction!=="rtl"?t.scrollLeft:-t.scrollLeft),t===i&&(s+=mc.getBorderLeftWidth(t),e+=mc.getBorderTopWidth(t),e+=t.offsetTop,s+=t.offsetLeft,i=t.offsetParent)}return{left:s,top:e}}function yc(t){const i=t.getBoundingClientRect(),e=Gh(t);return{left:i.left+e.scrollX,top:i.top+e.scrollY,width:i.width,height:i.height}}function kc(t){let i=t,e=1;do{const t=pc(i).zoom;t!=null&&t!=="1"&&(e*=t),i=i.parentElement}while(i!==null&&i!==i.ownerDocument.documentElement);return e}function xc(t){const i=mc.getMarginLeft(t)+mc.getMarginRight(t);return t.offsetWidth+i}function Cc(t){const i=mc.getBorderLeftWidth(t)+mc.getBorderRightWidth(t),e=mc.getPaddingLeft(t)+mc.getPaddingRight(t);return t.offsetWidth-i-e}function Ec(t){const i=mc.getBorderTopWidth(t)+mc.getBorderBottomWidth(t),e=mc.getPaddingTop(t)+mc.getPaddingBottom(t);return t.offsetHeight-i-e}function Bc(t){const i=mc.getMarginTop(t)+mc.getMarginBottom(t);return t.offsetHeight+i}function Dc(t,i){return!!(i!=null&&i.contains(t))}function Mc(t,i,e){return!!function(t,i,e){for(;t&&t.nodeType===t.ELEMENT_NODE;){if(t.classList.contains(i))return t;if(e){if(typeof e=="string"){if(t.classList.contains(e))return null}else if(t===e)return null}t=t.parentNode}return null}(t,i,e)}function Sc(t){return t&&!!t.host&&!!t.mode}function Fc(t){return!!Ic(t)}function Ic(t){for(var i;t.parentNode;){if(t===((i=t.ownerDocument)===null||i===void 0?void 0:i.body))return null;t=t.parentNode}return Sc(t)?t:null}function Lc(){let t=Nc().activeElement;for(;t!=null&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Rc(t){return Lc()===t}function Tc(t){return Dc(Lc(),t)}function Nc(){var t;return Xh()<=1?Wn.document:(t=Array.from($h()).map((({window:t})=>t.document)).find((t=>t.hasFocus())))!==null&&t!==void 0?t:Wn.document}vc.None=new vc(0,0);const Qc=new Map;function Oc(){return new zc}class zc{constructor(){this._currentCssStyle="",this._styleSheet=void 0}setStyle(t){t!==this._currentCssStyle&&(this._currentCssStyle=t,this._styleSheet?this._styleSheet.innerText=t:this._styleSheet=Uc(Wn.document.head,(i=>i.innerText=t)))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}function Uc(t=Wn.document.head,i,e){const s=document.createElement("style");if(s.type="text/css",s.media="screen",i==null||i(s),t.appendChild(s),e&&e.add(qi((()=>t.removeChild(s)))),t===Wn.document.head){const t=new Set;Qc.set(s,t);for(const{window:i,disposables:n}of $h()){if(i===Wn)continue;const o=n.add(Hc(s,t,i));e==null||e.add(o)}}return s}function Hc(t,i,e){var s,n;const o=new Zi,r=t.cloneNode(!0);e.document.head.appendChild(r),o.add(qi((()=>e.document.head.removeChild(r))));for(const i of Yc(t))(s=r.sheet)===null||s===void 0||s.insertRule(i.cssText,(n=r.sheet)===null||n===void 0?void 0:n.cssRules.length);return o.add(Pc.observe(t,o,{childList:!0})((()=>{r.textContent=t.textContent}))),i.add(r),o.add(qi((()=>i.delete(r)))),o}const Pc=new class{constructor(){this.mutationObservers=new Map}observe(t,i,e){let s=this.mutationObservers.get(t);s||(s=new Map,this.mutationObservers.set(t,s));const n=Uh(e);let o=s.get(n);if(o)o.users+=1;else{const r=new de,h=new MutationObserver((t=>r.fire(t)));h.observe(t,e);const c=o={users:1,observer:h,onDidMutate:r.event};i.add(qi((()=>{c.users-=1,c.users===0&&(r.dispose(),h.disconnect(),s==null||s.delete(n),(s==null?void 0:s.size)===0&&this.mutationObservers.delete(t))}))),s.set(n,o)}return o.onDidMutate}};let jc=null;function Wc(){return jc||(jc=Uc()),jc}function Yc(t){var i,e;return!((i=t==null?void 0:t.sheet)===null||i===void 0)&&i.rules?t.sheet.rules:!((e=t==null?void 0:t.sheet)===null||e===void 0)&&e.cssRules?t.sheet.cssRules:[]}function _c(t,i,e=Wc()){var s,n;if(e&&i){(s=e.sheet)===null||s===void 0||s.insertRule(`${t} {${i}}`,0);for(const s of(n=Qc.get(e))!==null&&n!==void 0?n:[])_c(t,i,s)}}function Vc(t,i=Wc()){var e,s;if(!i)return;const n=Yc(i),o=[];for(let i=0;i<n.length;i++){const e=n[i];Jc(e)&&e.selectorText.indexOf(t)!==-1&&o.push(i)}for(let t=o.length-1;t>=0;t--)(e=i.sheet)===null||e===void 0||e.deleteRule(o[t]);for(const e of(s=Qc.get(i))!==null&&s!==void 0?s:[])Vc(t,e)}function Jc(t){return typeof t.selectorText=="string"}function Gc(t){return t instanceof MouseEvent||t instanceof Gh(t).MouseEvent}function Kc(t){return t instanceof KeyboardEvent||t instanceof Gh(t).KeyboardEvent}const $c={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Jo?"webkitAnimationStart":"animationstart",ANIMATION_END:Jo?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Jo?"webkitAnimationIteration":"animationiteration"};function Xc(t){const i=t;return!(!i||typeof i.preventDefault!="function"||typeof i.stopPropagation!="function")}const qc=(t,i)=>(t.preventDefault(),i&&t.stopPropagation(),t);class Zc extends te{static hasFocusWithin(t){if(t instanceof HTMLElement){const i=Ic(t);return Dc(i?i.activeElement:t.ownerDocument.activeElement,t)}{const i=t;return Dc(i.document.activeElement,i.document)}}constructor(t){super(),this._onDidFocus=this._register(new de),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new de),this.onDidBlur=this._onDidBlur.event;let i=Zc.hasFocusWithin(t),e=!1;const s=()=>{e=!1,i||(i=!0,this._onDidFocus.fire())},n=()=>{i&&(e=!0,(t instanceof HTMLElement?Gh(t):t).setTimeout((()=>{e&&(e=!1,i=!1,this._onDidBlur.fire())}),0))};this._refreshStateHandler=()=>{Zc.hasFocusWithin(t)!==i&&(i?n():s())},this._register(rc(t,$c.FOCUS,s,!0)),this._register(rc(t,$c.BLUR,n,!0)),t instanceof HTMLElement&&(this._register(rc(t,$c.FOCUS_IN,(()=>this._refreshStateHandler()))),this._register(rc(t,$c.FOCUS_OUT,(()=>this._refreshStateHandler()))))}}function ta(t){return new Zc(t)}function ia(t,...i){if(t.append(...i),i.length===1&&typeof i[0]!="string")return i[0]}function ea(t,i){return t.insertBefore(i,t.firstChild),i}function sa(t,...i){t.innerText="",ia(t,...i)}const na=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var oa;function ra(t,i,e,...s){const n=na.exec(i);if(!n)throw new Error("Bad use of emmet");const o=n[1]||"div";let r;return r=t!==oa.HTML?document.createElementNS(t,o):document.createElement(o),n[3]&&(r.id=n[3]),n[4]&&(r.className=n[4].replace(/\./g," ").trim()),e&&Object.entries(e).forEach((([t,i])=>{i!==void 0&&(/^on\w+$/.test(t)?r[t]=i:t==="selected"?i&&r.setAttribute(t,"true"):r.setAttribute(t,i))})),r.append(...s),r}function ha(t,i,...e){return ra(oa.HTML,t,i,...e)}function ca(...t){for(const i of t)i.style.display="",i.removeAttribute("aria-hidden")}function aa(...t){for(const i of t)i.style.display="none",i.setAttribute("aria-hidden","true")}function la(t,i){const e=t.devicePixelRatio*i;return Math.max(1,Math.floor(e))/t.devicePixelRatio}function ua(t){Wn.open(t,"_blank","noopener")}function da(t){return t?`url('${Oh.uriToBrowserUri(t).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function fa(t){return`'${t.replace(/'/g,"%27")}'`}function ga(t,i){if(t!==void 0){const e=t.match(/^\s*var\((.+)\)$/);if(e){const t=e[1].split(",",2);return t.length===2&&(i=ga(t[1].trim(),i)),`var(${t[0]}, ${i})`}return t}return i}(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.SVG="http://www.w3.org/2000/svg"})(oa||(oa={})),ha.SVG=function(t,i,...e){return ra(oa.SVG,t,i,...e)},Nh.setPreferredWebSchema(/^https:/.test(Wn.location.href)?"https":"http");const Aa=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class pa extends de{constructor(){super(),this._subscriptions=new Zi,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(he.runAndSubscribe(ic,(({window:t,disposables:i})=>this.registerListeners(t,i)),{window:Wn,disposables:this._subscriptions}))}registerListeners(t,i){i.add(rc(t,"keydown",(t=>{if(t.defaultPrevented)return;const i=new hr(t);if(i.keyCode!==6||!t.repeat){if(t.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(t.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(t.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(t.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else{if(i.keyCode===6)return;this._keyStatus.lastKeyPressed=void 0}this._keyStatus.altKey=t.altKey,this._keyStatus.ctrlKey=t.ctrlKey,this._keyStatus.metaKey=t.metaKey,this._keyStatus.shiftKey=t.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=t,this.fire(this._keyStatus))}}),!0)),i.add(rc(t,"keyup",(t=>{t.defaultPrevented||(!t.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!t.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!t.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!t.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=t.altKey,this._keyStatus.ctrlKey=t.ctrlKey,this._keyStatus.metaKey=t.metaKey,this._keyStatus.shiftKey=t.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=t,this.fire(this._keyStatus)))}),!0)),i.add(rc(t.document.body,"mousedown",(()=>{this._keyStatus.lastKeyPressed=void 0}),!0)),i.add(rc(t.document.body,"mouseup",(()=>{this._keyStatus.lastKeyPressed=void 0}),!0)),i.add(rc(t.document.body,"mousemove",(t=>{t.buttons&&(this._keyStatus.lastKeyPressed=void 0)}),!0)),i.add(rc(t,"blur",(()=>{this.resetKeyStatus()})))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return pa.instance||(pa.instance=new pa),pa.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class wa extends te{constructor(t,i){super(),this.element=t,this.callbacks=i,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(rc(this.element,$c.DRAG_START,(t=>{var i,e;(e=(i=this.callbacks).onDragStart)===null||e===void 0||e.call(i,t)}))),this.callbacks.onDrag&&this._register(rc(this.element,$c.DRAG,(t=>{var i,e;(e=(i=this.callbacks).onDrag)===null||e===void 0||e.call(i,t)}))),this._register(rc(this.element,$c.DRAG_ENTER,(t=>{var i,e;this.counter++,this.dragStartTime=t.timeStamp,(e=(i=this.callbacks).onDragEnter)===null||e===void 0||e.call(i,t)}))),this._register(rc(this.element,$c.DRAG_OVER,(t=>{var i,e;t.preventDefault(),(e=(i=this.callbacks).onDragOver)===null||e===void 0||e.call(i,t,t.timeStamp-this.dragStartTime)}))),this._register(rc(this.element,$c.DRAG_LEAVE,(t=>{var i,e;this.counter--,this.counter===0&&(this.dragStartTime=0,(e=(i=this.callbacks).onDragLeave)===null||e===void 0||e.call(i,t))}))),this._register(rc(this.element,$c.DRAG_END,(t=>{var i,e;this.counter=0,this.dragStartTime=0,(e=(i=this.callbacks).onDragEnd)===null||e===void 0||e.call(i,t)}))),this._register(rc(this.element,$c.DROP,(t=>{var i,e;this.counter=0,this.dragStartTime=0,(e=(i=this.callbacks).onDrop)===null||e===void 0||e.call(i,t)})))}}const ma=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function va(t,...i){let e,s;Array.isArray(i[0])?(e={},s=i[0]):(e=i[0]||{},s=i[1]);const n=ma.exec(t);if(!n||!n.groups)throw new Error("Bad use of h");const o=n.groups.tag||"div",r=document.createElement(o);n.groups.id&&(r.id=n.groups.id);const h=[];if(n.groups.class)for(const t of n.groups.class.split("."))t!==""&&h.push(t);if(e.className!==void 0)for(const t of e.className.split("."))t!==""&&h.push(t);h.length>0&&(r.className=h.join(" "));const c={};if(n.groups.name&&(c[n.groups.name]=r),s)for(const t of s)t instanceof HTMLElement?r.appendChild(t):typeof t=="string"?r.append(t):"root"in t&&(Object.assign(c,t),r.appendChild(t.root));for(const[t,i]of Object.entries(e))if(t!=="className")if(t==="style")for(const[t,e]of Object.entries(i))r.style.setProperty(ba(t),typeof e=="number"?e+"px":""+e);else t==="tabIndex"?r.tabIndex=i:r.setAttribute(ba(t),i.toString());return c.root=r,c}function ba(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class ya extends te{constructor(t){super(),this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(t,!0),this._mediaQueryList=null,this._handleChange(t,!1)}_handleChange(t,i){var e;(e=this._mediaQueryList)===null||e===void 0||e.removeEventListener("change",this._listener),this._mediaQueryList=t.matchMedia(`(resolution: ${t.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),i&&this._onDidChange.fire()}}class ka extends te{get value(){return this._value}constructor(t){super(),this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(t);const i=this._register(new ya(t));this._register(i.onDidChange((()=>{this._value=this._getPixelRatio(t),this._onDidChange.fire(this._value)})))}_getPixelRatio(t){const i=document.createElement("canvas").getContext("2d");return(t.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)}}const xa=new class{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(t){const i=qh(t);let e=this.mapWindowIdToPixelRatioMonitor.get(i);return e||(e=new ka(t),this.mapWindowIdToPixelRatioMonitor.set(i,e),he.once(sc)((({vscodeWindowId:t})=>{t===i&&(e==null||e.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(i))}))),e}getInstance(t){return this._getOrCreatePixelRatioMonitor(t)}};class Ca{constructor(t){this.domNode=t,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(t){const i=Ea(t);this._maxWidth!==i&&(this._maxWidth=i,this.domNode.style.maxWidth=this._maxWidth)}setWidth(t){const i=Ea(t);this._width!==i&&(this._width=i,this.domNode.style.width=this._width)}setHeight(t){const i=Ea(t);this._height!==i&&(this._height=i,this.domNode.style.height=this._height)}setTop(t){const i=Ea(t);this._top!==i&&(this._top=i,this.domNode.style.top=this._top)}setLeft(t){const i=Ea(t);this._left!==i&&(this._left=i,this.domNode.style.left=this._left)}setBottom(t){const i=Ea(t);this._bottom!==i&&(this._bottom=i,this.domNode.style.bottom=this._bottom)}setRight(t){const i=Ea(t);this._right!==i&&(this._right=i,this.domNode.style.right=this._right)}setPaddingLeft(t){const i=Ea(t);this._paddingLeft!==i&&(this._paddingLeft=i,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(t){const i=Ea(t);this._fontSize!==i&&(this._fontSize=i,this.domNode.style.fontSize=this._fontSize)}setFontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(t){this._fontFeatureSettings!==t&&(this._fontFeatureSettings=t,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(t){this._fontVariationSettings!==t&&(this._fontVariationSettings=t,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(t){this._textDecoration!==t&&(this._textDecoration=t,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(t){const i=Ea(t);this._lineHeight!==i&&(this._lineHeight=i,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(t){const i=Ea(t);this._letterSpacing!==i&&(this._letterSpacing=i,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(t){this._className!==t&&(this._className=t,this.domNode.className=this._className)}toggleClassName(t,i){this.domNode.classList.toggle(t,i),this._className=this.domNode.className}setDisplay(t){this._display!==t&&(this._display=t,this.domNode.style.display=this._display)}setPosition(t){this._position!==t&&(this._position=t,this.domNode.style.position=this._position)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this.domNode.style.visibility=this._visibility)}setColor(t){this._color!==t&&(this._color=t,this.domNode.style.color=this._color)}setBackgroundColor(t){this._backgroundColor!==t&&(this._backgroundColor=t,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(t){this._layerHint!==t&&(this._layerHint=t,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(t){this._boxShadow!==t&&(this._boxShadow=t,this.domNode.style.boxShadow=t)}setContain(t){this._contain!==t&&(this._contain=t,this.domNode.style.contain=this._contain)}setAttribute(t,i){this.domNode.setAttribute(t,i)}removeAttribute(t){this.domNode.removeAttribute(t)}appendChild(t){this.domNode.appendChild(t.domNode)}removeChild(t){this.domNode.removeChild(t.domNode)}}function Ea(t){return typeof t=="number"?`${t}px`:t}function Ba(t){return new Ca(t)}function Da(t,i){t instanceof Ca?(t.setFontFamily(i.getMassagedFontFamily()),t.setFontWeight(i.fontWeight),t.setFontSize(i.fontSize),t.setFontFeatureSettings(i.fontFeatureSettings),t.setFontVariationSettings(i.fontVariationSettings),t.setLineHeight(i.lineHeight),t.setLetterSpacing(i.letterSpacing)):(t.style.fontFamily=i.getMassagedFontFamily(),t.style.fontWeight=i.fontWeight,t.style.fontSize=i.fontSize+"px",t.style.fontFeatureSettings=i.fontFeatureSettings,t.style.fontVariationSettings=i.fontVariationSettings,t.style.lineHeight=i.lineHeight+"px",t.style.letterSpacing=i.letterSpacing+"px")}class Ma{constructor(t,i){this.chr=t,this.type=i,this.width=0}fulfill(t){this.width=t}}class Sa{constructor(t,i){this._bareFontInfo=t,this._requests=i,this._container=null,this._testElements=null}read(t){this._createDomElements(),t.document.body.appendChild(this._container),this._readFromDomElements(),t.document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const i=document.createElement("div");Da(i,this._bareFontInfo),t.appendChild(i);const e=document.createElement("div");Da(e,this._bareFontInfo),e.style.fontWeight="bold",t.appendChild(e);const s=document.createElement("div");Da(s,this._bareFontInfo),s.style.fontStyle="italic",t.appendChild(s);const n=[];for(const t of this._requests){let o;t.type===0&&(o=i),t.type===2&&(o=e),t.type===1&&(o=s),o.appendChild(document.createElement("br"));const r=document.createElement("span");Sa._render(r,t),o.appendChild(r),n.push(r)}this._container=t,this._testElements=n}static _render(t,i){if(i.chr===" "){let i=" ";for(let t=0;t<8;t++)i+=i;t.innerText=i}else{let e=i.chr;for(let t=0;t<8;t++)e+=e;t.textContent=e}}_readFromDomElements(){for(let t=0,i=this._requests.length;t<i;t++){const i=this._requests[t],e=this._testElements[t];i.fulfill(e.offsetWidth/256)}}}const Fa=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new de,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(t){t=Math.min(Math.max(-5,t),20),this._zoomLevel!==t&&(this._zoomLevel=t,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},Ia=kt?1.5:1.35;class La{static createFromValidatedSettings(t,i,e){const s=t.get(49),n=t.get(53),o=t.get(52),r=t.get(51),h=t.get(54),c=t.get(67),a=t.get(64);return La._create(s,n,o,r,h,c,a,i,e)}static _create(t,i,e,s,n,o,r,h,c){o===0?o=Ia*e:o<8&&(o*=e),(o=Math.round(o))<8&&(o=8);const a=1+(c?0:.1*Fa.getZoomLevel());return e*=a,o*=a,n===mi.TRANSLATE&&(i==="normal"||i==="bold"?n=mi.OFF:(n=`'wght' ${parseInt(i,10)}`,i="normal")),new La({pixelRatio:h,fontFamily:t,fontWeight:i,fontSize:e,fontFeatureSettings:s,fontVariationSettings:n,lineHeight:o,letterSpacing:r})}constructor(t){this._bareFontInfoBrand=void 0,this.pixelRatio=t.pixelRatio,this.fontFamily=String(t.fontFamily),this.fontWeight=String(t.fontWeight),this.fontSize=t.fontSize,this.fontFeatureSettings=t.fontFeatureSettings,this.fontVariationSettings=t.fontVariationSettings,this.lineHeight=0|t.lineHeight,this.letterSpacing=t.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const t=Li.fontFamily,i=La._wrapInQuotes(this.fontFamily);return t&&this.fontFamily!==t?`${i}, ${t}`:i}static _wrapInQuotes(t){return/[,"']/.test(t)?t:/[+ ]/.test(t)?`"${t}"`:t}}class Ra extends La{constructor(t,i){super(t),this._editorStylingBrand=void 0,this.version=2,this.isTrusted=i,this.isMonospace=t.isMonospace,this.typicalHalfwidthCharacterWidth=t.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=t.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=t.canUseHalfwidthRightwardsArrow,this.spaceWidth=t.spaceWidth,this.middotWidth=t.middotWidth,this.wsmiddotWidth=t.wsmiddotWidth,this.maxDigitWidth=t.maxDigitWidth}equals(t){return this.fontFamily===t.fontFamily&&this.fontWeight===t.fontWeight&&this.fontSize===t.fontSize&&this.fontFeatureSettings===t.fontFeatureSettings&&this.fontVariationSettings===t.fontVariationSettings&&this.lineHeight===t.lineHeight&&this.letterSpacing===t.letterSpacing&&this.typicalHalfwidthCharacterWidth===t.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===t.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===t.canUseHalfwidthRightwardsArrow&&this.spaceWidth===t.spaceWidth&&this.middotWidth===t.middotWidth&&this.wsmiddotWidth===t.wsmiddotWidth&&this.maxDigitWidth===t.maxDigitWidth}}class Ta{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(t){const i=t.getId();return!!this._values[i]}get(t){const i=t.getId();return this._values[i]}put(t,i){const e=t.getId();this._keys[e]=t,this._values[e]=i}remove(t){const i=t.getId();delete this._keys[i],delete this._values[i]}getValues(){return Object.keys(this._keys).map((t=>this._values[t]))}}const Na=new class extends te{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(t){const i=qh(t);let e=this._cache.get(i);return e||(e=new Ta,this._cache.set(i,e)),e}_writeToCache(t,i,e){this._ensureCache(t).put(i,e),e.isTrusted||this._evictUntrustedReadingsTimeout!==-1||(this._evictUntrustedReadingsTimeout=t.setTimeout((()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(t)}),5e3))}_evictUntrustedReadings(t){const i=this._ensureCache(t),e=i.getValues();let s=!1;for(const t of e)t.isTrusted||(s=!0,i.remove(t));s&&this._onDidChange.fire()}readFontInfo(t,i){const e=this._ensureCache(t);if(!e.has(i)){let e=this._actualReadFontInfo(t,i);(e.typicalHalfwidthCharacterWidth<=2||e.typicalFullwidthCharacterWidth<=2||e.spaceWidth<=2||e.maxDigitWidth<=2)&&(e=new Ra({pixelRatio:xa.getInstance(t).value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,fontVariationSettings:e.fontVariationSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:e.isMonospace,typicalHalfwidthCharacterWidth:Math.max(e.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(e.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:e.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(e.spaceWidth,5),middotWidth:Math.max(e.middotWidth,5),wsmiddotWidth:Math.max(e.wsmiddotWidth,5),maxDigitWidth:Math.max(e.maxDigitWidth,5)},!1)),this._writeToCache(t,i,e)}return e.get(i)}_createRequest(t,i,e,s){const n=new Ma(t,i);return e.push(n),s==null||s.push(n),n}_actualReadFontInfo(t,i){const e=[],s=[],n=this._createRequest("n",0,e,s),o=this._createRequest("ｍ",0,e,null),r=this._createRequest(" ",0,e,s),h=this._createRequest("0",0,e,s),c=this._createRequest("1",0,e,s),a=this._createRequest("2",0,e,s),l=this._createRequest("3",0,e,s),u=this._createRequest("4",0,e,s),d=this._createRequest("5",0,e,s),f=this._createRequest("6",0,e,s),g=this._createRequest("7",0,e,s),A=this._createRequest("8",0,e,s),p=this._createRequest("9",0,e,s),w=this._createRequest("→",0,e,s),m=this._createRequest("￫",0,e,null),v=this._createRequest("·",0,e,s),b=this._createRequest("⸱",0,e,null),y="|/-_ilm%";for(let t=0,i=8;t<i;t++)this._createRequest(y.charAt(t),0,e,s),this._createRequest(y.charAt(t),1,e,s),this._createRequest(y.charAt(t),2,e,s);(function(t,i,e){new Sa(i,e).read(t)})(t,i,e);const k=Math.max(h.width,c.width,a.width,l.width,u.width,d.width,f.width,g.width,A.width,p.width);let x=i.fontFeatureSettings===wi.OFF;const C=s[0].width;for(let t=1,i=s.length;x&&t<i;t++){const i=C-s[t].width;if(i<-.001||i>.001){x=!1;break}}let E=!0;return x&&m.width!==C&&(E=!1),m.width>w.width&&(E=!1),new Ra({pixelRatio:xa.getInstance(t).value,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontSize:i.fontSize,fontFeatureSettings:i.fontFeatureSettings,fontVariationSettings:i.fontVariationSettings,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,isMonospace:x,typicalHalfwidthCharacterWidth:n.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:E,spaceWidth:r.width,middotWidth:v.width,wsmiddotWidth:b.width,maxDigitWidth:k},!0)}};var Qa;(function(t){t.serviceIds=new Map,t.DI_TARGET="$di$target",t.DI_DEPENDENCIES="$di$dependencies",t.getServiceDependencies=function(i){return i[t.DI_DEPENDENCIES]||[]}})(Qa||(Qa={}));const Oa=za("instantiationService");function za(t){if(Qa.serviceIds.has(t))return Qa.serviceIds.get(t);const i=function(t,e,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(t,i,e){i[Qa.DI_TARGET]===i?i[Qa.DI_DEPENDENCIES].push({id:t,index:e}):(i[Qa.DI_DEPENDENCIES]=[{id:t,index:e}],i[Qa.DI_TARGET]=i)})(i,t,s)};return i.toString=()=>t,Qa.serviceIds.set(t,i),i}const Ua=za("codeEditorService"),Ha=za("modelService"),Pa=za("textModelService");class ja extends te{constructor(t,i="",e="",s=!0,n){super(),this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=t,this._label=i,this._cssClass=e,this._enabled=s,this._actionCallback=n}get id(){return this._id}get label(){return this._label}set label(t){this._setLabel(t)}_setLabel(t){this._label!==t&&(this._label=t,this._onDidChange.fire({label:t}))}get tooltip(){return this._tooltip||""}set tooltip(t){this._setTooltip(t)}_setTooltip(t){this._tooltip!==t&&(this._tooltip=t,this._onDidChange.fire({tooltip:t}))}get class(){return this._cssClass}set class(t){this._setClass(t)}_setClass(t){this._cssClass!==t&&(this._cssClass=t,this._onDidChange.fire({class:t}))}get enabled(){return this._enabled}set enabled(t){this._setEnabled(t)}_setEnabled(t){this._enabled!==t&&(this._enabled=t,this._onDidChange.fire({enabled:t}))}get checked(){return this._checked}set checked(t){this._setChecked(t)}_setChecked(t){this._checked!==t&&(this._checked=t,this._onDidChange.fire({checked:t}))}async run(t,i){this._actionCallback&&await this._actionCallback(t)}}class Wa extends te{constructor(){super(...arguments),this._onWillRun=this._register(new de),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new de),this.onDidRun=this._onDidRun.event}async run(t,i){if(!t.enabled)return;let e;this._onWillRun.fire({action:t});try{await this.runAction(t,i)}catch(t){e=t}this._onDidRun.fire({action:t,error:e})}async runAction(t,i){await t.run(i)}}class Ya{constructor(){this.id=Ya.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let i=[];for(const e of t)e.length&&(i=i.length?[...i,new Ya,...e]:e);return i}async run(){}}Ya.ID="vs.actions.separator";class _a{get actions(){return this._actions}constructor(t,i,e,s){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=t,this.label=i,this.class=s,this._actions=e}async run(){}}class Va extends ja{constructor(){super(Va.ID,st(0,"(empty)"),void 0,!1)}}function Ja(t){var i;return{id:t.id,label:t.label,class:t.class,enabled:(i=t.enabled)===null||i===void 0||i,checked:t.checked,run:async(...i)=>t.run(...i),tooltip:t.label}}var Ga,Ka;Va.ID="vs.actions.empty",function(t){t.isThemeColor=function(t){return t&&typeof t=="object"&&typeof t.id=="string"}}(Ga||(Ga={})),function(t){t.iconNameSegment="[A-Za-z0-9]+",t.iconNameExpression="[A-Za-z0-9-]+",t.iconModifierExpression="~[A-Za-z]+",t.iconNameCharacter="[A-Za-z0-9~-]";const i=new RegExp(`^(${t.iconNameExpression})(${t.iconModifierExpression})?$`);function e(t){const s=i.exec(t.id);if(!s)return e(Fs.error);const[,n,o]=s,r=["codicon","codicon-"+n];return o&&r.push("codicon-modifier-"+o.substring(1)),r}t.asClassNameArray=e,t.asClassName=function(t){return e(t).join(" ")},t.asCSSSelector=function(t){return"."+e(t).join(".")},t.isThemeIcon=function(t){return t&&typeof t=="object"&&typeof t.id=="string"&&(t.color===void 0||Ga.isThemeColor(t.color))};const s=new RegExp(`^\\$\\((${t.iconNameExpression}(?:${t.iconModifierExpression})?)\\)$`);t.fromString=function(t){const i=s.exec(t);if(!i)return;const[,e]=i;return{id:e}},t.fromId=function(t){return{id:t}},t.modify=function(t,i){let e=t.id;const s=e.lastIndexOf("~");return s!==-1&&(e=e.substring(0,s)),i&&(e=`${e}~${i}`),{id:e}},t.getModifier=function(t){const i=t.id.lastIndexOf("~");if(i!==-1)return t.id.substring(i+1)},t.isEqual=function(t,i){var e,s;return t.id===i.id&&((e=t.color)===null||e===void 0?void 0:e.id)===((s=i.color)===null||s===void 0?void 0:s.id)}}(Ka||(Ka={}));const $a=za("commandService"),Xa=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new de,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(t,i){if(!t)throw new Error("invalid command");if(typeof t=="string"){if(!i)throw new Error("invalid command");return this.registerCommand({id:t,handler:i})}if(t.metadata&&Array.isArray(t.metadata.args)){const i=[];for(const e of t.metadata.args)i.push(e.constraint);const e=t.handler;t.handler=function(t,...s){return function(t,i){const e=Math.min(t.length,i.length);for(let s=0;s<e;s++)J(t[s],i[s])}(s,i),e(t,...s)}}const{id:e}=t;let s=this._commands.get(e);s||(s=new _t,this._commands.set(e,s));const n=s.unshift(t),o=qi((()=>{n();const t=this._commands.get(e);t!=null&&t.isEmpty()&&this._commands.delete(e)}));return this._onDidRegisterCommand.fire(e),o}registerCommandAlias(t,i){return Xa.registerCommand(t,((t,...e)=>t.get($a).executeCommand(i,...e)))}getCommand(t){const i=this._commands.get(t);if(i&&!i.isEmpty())return Wt.first(i)}getCommands(){const t=new Map;for(const i of this._commands.keys()){const e=this.getCommand(i);e&&t.set(i,e)}return t}};function qa(...t){switch(t.length){case 1:return st(0,"Did you mean {0}?",t[0]);case 2:return st(0,"Did you mean {0} or {1}?",t[0],t[1]);case 3:return st(0,"Did you mean {0}, {1} or {2}?",t[0],t[1],t[2]);default:return}}Xa.registerCommand("noop",(()=>{}));const Za=st(0,"Did you forget to open or close the quote?"),tl=st(0,"Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");let il=class t{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:case 8:return">=";case 9:return"=~";case 10:case 17:case 18:case 19:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 20:return"EOF";default:throw Yi(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}reset(t){return this._input=t,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(qa("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(qa("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(qa("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(t){return!this._isAtEnd()&&this._input.charCodeAt(this._current)===t&&(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(t){this._tokens.push({type:t,offset:this._start})}_error(t){const i=this._start,e=this._input.substring(this._start,this._current),s={type:19,offset:this._start,lexeme:e};this._errors.push({offset:i,lexeme:e,additionalInfo:t}),this._tokens.push(s)}_string(){this.stringRe.lastIndex=this._start;const i=this.stringRe.exec(this._input);if(i){this._current=this._start+i[0].length;const e=this._input.substring(this._start,this._current),s=t._keywords.get(e);s?this._addToken(s):this._tokens.push({type:17,lexeme:e,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();this._isAtEnd()?this._error(Za):(this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1}))}_regex(){let i=this._current,e=!1,s=!1;for(;;){if(i>=this._input.length)return this._current=i,void this._error(tl);const t=this._input.charCodeAt(i);if(e)e=!1;else{if(t===47&&!s){i++;break}t===91?s=!0:t===92?e=!0:t===93&&(s=!1)}i++}for(;i<this._input.length&&t._regexFlags.has(this._input.charCodeAt(i));)i++;this._current=i;const n=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:n,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};il._regexFlags=new Set(["i","g","s","m","y","u"].map((t=>t.charCodeAt(0)))),il._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);const el=new Map;el.set("false",!1),el.set("true",!0),el.set("isMac",kt),el.set("isLinux",xt),el.set("isWindows",yt),el.set("isWeb",Et),el.set("isMacNative",kt&&!Et),el.set("isEdge",Ht),el.set("isFirefox",zt),el.set("isChrome",Ot),el.set("isSafari",Ut);const sl=Object.prototype.hasOwnProperty,nl={regexParsingWithErrorRecovery:!0},ol=st(0,"Empty context key expression"),rl=st(0,"Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),hl=st(0,"'in' after 'not'."),cl=st(0,"closing parenthesis ')'"),al=st(0,"Unexpected token"),ll=st(0,"Did you forget to put && or || before the token?"),ul=st(0,"Unexpected end of expression"),dl=st(0,"Did you forget to put a context key?");let fl=class t{constructor(t=nl){this._config=t,this._scanner=new il,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(i){if(i!==""){this._tokens=this._scanner.reset(i).scan(),this._current=0,this._parsingErrors=[];try{const i=this._expr();if(!this._isAtEnd()){const i=this._peek(),e=i.type===17?ll:void 0;throw this._parsingErrors.push({message:al,offset:i.offset,lexeme:il.getLexeme(i),additionalInfo:e}),t._parseError}return i}catch(i){if(i!==t._parseError)throw i;return}}else this._parsingErrors.push({message:ol,offset:0,lexeme:"",additionalInfo:rl})}_expr(){return this._or()}_or(){const t=[this._and()];for(;this._matchOne(16);){const i=this._and();t.push(i)}return t.length===1?t[0]:gl.or(...t)}_and(){const t=[this._term()];for(;this._matchOne(15);){const i=this._term();t.push(i)}return t.length===1?t[0]:gl.and(...t)}_term(){if(this._matchOne(2)){const t=this._peek();switch(t.type){case 11:return this._advance(),pl.INSTANCE;case 12:return this._advance(),wl.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,cl),t==null?void 0:t.negate()}case 17:return this._advance(),xl.create(t.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",t)}}return this._primary()}_primary(){const i=this._peek();switch(i.type){case 11:return this._advance(),gl.true();case 12:return this._advance(),gl.false();case 0:{this._advance();const t=this._expr();return this._consume(1,cl),t}case 17:{const t=i.lexeme;if(this._advance(),this._matchOne(9)){const i=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),i.type!==10)throw this._errExpectedButGot("REGEX",i);const e=i.lexeme,s=e.lastIndexOf("/"),n=s===e.length-1?void 0:this._removeFlagsGY(e.substring(s+1));let o;try{o=new RegExp(e.substring(1,s),n)}catch{throw this._errExpectedButGot("REGEX",i)}return Sl.create(t,o)}switch(i.type){case 10:case 19:{const e=[i.lexeme];this._advance();let s=this._peek(),n=0;for(let t=0;t<i.lexeme.length;t++)i.lexeme.charCodeAt(t)===40?n++:i.lexeme.charCodeAt(t)===41&&n--;for(;!this._isAtEnd()&&s.type!==15&&s.type!==16;){switch(s.type){case 0:n++;break;case 1:n--;break;case 10:case 18:for(let t=0;t<s.lexeme.length;t++)s.lexeme.charCodeAt(t)===40?n++:i.lexeme.charCodeAt(t)===41&&n--}if(n<0)break;e.push(il.getLexeme(s)),this._advance(),s=this._peek()}const o=e.join(""),r=o.lastIndexOf("/"),h=r===o.length-1?void 0:this._removeFlagsGY(o.substring(r+1));let c;try{c=new RegExp(o.substring(1,r),h)}catch{throw this._errExpectedButGot("REGEX",i)}return gl.regex(t,c)}case 18:{const e=i.lexeme;this._advance();let s=null;if(!Jn(e)){const t=e.indexOf("/"),n=e.lastIndexOf("/");if(t!==n&&t>=0){const o=e.slice(t+1,n),r=e[n+1]==="i"?"i":"";try{s=new RegExp(o,r)}catch{throw this._errExpectedButGot("REGEX",i)}}}if(s===null)throw this._errExpectedButGot("REGEX",i);return Sl.create(t,s)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,hl);const i=this._value();return gl.notIn(t,i)}switch(this._peek().type){case 3:{this._advance();const i=this._value();if(this._previous().type===18)return gl.equals(t,i);switch(i){case"true":return gl.has(t);case"false":return gl.not(t);default:return gl.equals(t,i)}}case 4:{this._advance();const i=this._value();if(this._previous().type===18)return gl.notEquals(t,i);switch(i){case"true":return gl.not(t);case"false":return gl.has(t);default:return gl.notEquals(t,i)}}case 5:return this._advance(),Dl.create(t,this._value());case 6:return this._advance(),Ml.create(t,this._value());case 7:return this._advance(),El.create(t,this._value());case 8:return this._advance(),Bl.create(t,this._value());case 13:return this._advance(),gl.in(t,this._value());default:return gl.has(t)}}case 20:throw this._parsingErrors.push({message:ul,offset:i.offset,lexeme:"",additionalInfo:dl}),t._parseError;default:throw this._errExpectedButGot(`true | false | KEY \n\t| KEY '=~' REGEX \n\t| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const t=this._peek();switch(t.type){case 17:case 18:return this._advance(),t.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(t){return t.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(t){return!!this._check(t)&&(this._advance(),!0)}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(t,i){if(this._check(t))return this._advance();throw this._errExpectedButGot(i,this._peek())}_errExpectedButGot(i,e,s){const n=st(0,`Expected: {0}\nReceived: '{1}'.`,i,il.getLexeme(e)),o=e.offset,r=il.getLexeme(e);return this._parsingErrors.push({message:n,offset:o,lexeme:r,additionalInfo:s}),t._parseError}_check(t){return this._peek().type===t}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}};fl._parseError=new Error;class gl{static false(){return pl.INSTANCE}static true(){return wl.INSTANCE}static has(t){return ml.create(t)}static equals(t,i){return vl.create(t,i)}static notEquals(t,i){return kl.create(t,i)}static regex(t,i){return Sl.create(t,i)}static in(t,i){return bl.create(t,i)}static notIn(t,i){return yl.create(t,i)}static not(t){return xl.create(t)}static and(...t){return Ll.create(t,null,!0)}static or(...t){return Rl.create(t,null,!0)}static deserialize(t){if(t!=null)return this._parser.parse(t)}}function Al(t,i){return t.cmp(i)}gl._parser=new fl({regexParsingWithErrorRecovery:!1});class pl{constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}negate(){return wl.INSTANCE}}pl.INSTANCE=new pl;class wl{constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}negate(){return pl.INSTANCE}}wl.INSTANCE=new wl;class ml{static create(t,i=null){const e=el.get(t);return typeof e=="boolean"?e?wl.INSTANCE:pl.INSTANCE:new ml(t,i)}constructor(t,i){this.key=t,this.negated=i,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:Ql(this.key,t.key)}equals(t){return t.type===this.type&&this.key===t.key}substituteConstants(){const t=el.get(this.key);return typeof t=="boolean"?t?wl.INSTANCE:pl.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=xl.create(this.key,this)),this.negated}}class vl{static create(t,i,e=null){if(typeof i=="boolean")return i?ml.create(t,e):xl.create(t,e);const s=el.get(t);return typeof s=="boolean"?i===(s?"true":"false")?wl.INSTANCE:pl.INSTANCE:new vl(t,i,e)}constructor(t,i,e){this.key=t,this.value=i,this.negated=e,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:Ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type&&this.key===t.key&&this.value===t.value}substituteConstants(){const t=el.get(this.key);if(typeof t=="boolean"){const i=t?"true":"false";return this.value===i?wl.INSTANCE:pl.INSTANCE}return this}evaluate(t){return t.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=kl.create(this.key,this.value,this)),this.negated}}class bl{static create(t,i){return new bl(t,i)}constructor(t,i){this.key=t,this.valueKey=i,this.type=10,this.negated=null}cmp(t){return t.type!==this.type?this.type-t.type:Ol(this.key,this.valueKey,t.key,t.valueKey)}equals(t){return t.type===this.type&&this.key===t.key&&this.valueKey===t.valueKey}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.valueKey),e=t.getValue(this.key);return Array.isArray(i)?i.includes(e):typeof e=="string"&&typeof i=="object"&&i!==null&&sl.call(i,e)}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=yl.create(this.key,this.valueKey)),this.negated}}class yl{static create(t,i){return new yl(t,i)}constructor(t,i){this.key=t,this.valueKey=i,this.type=11,this._negated=bl.create(t,i)}cmp(t){return t.type!==this.type?this.type-t.type:this._negated.cmp(t._negated)}equals(t){return t.type===this.type&&this._negated.equals(t._negated)}substituteConstants(){return this}evaluate(t){return!this._negated.evaluate(t)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class kl{static create(t,i,e=null){if(typeof i=="boolean")return i?xl.create(t,e):ml.create(t,e);const s=el.get(t);return typeof s=="boolean"?i===(s?"true":"false")?pl.INSTANCE:wl.INSTANCE:new kl(t,i,e)}constructor(t,i,e){this.key=t,this.value=i,this.negated=e,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:Ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type&&this.key===t.key&&this.value===t.value}substituteConstants(){const t=el.get(this.key);if(typeof t=="boolean"){const i=t?"true":"false";return this.value===i?pl.INSTANCE:wl.INSTANCE}return this}evaluate(t){return t.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=vl.create(this.key,this.value,this)),this.negated}}class xl{static create(t,i=null){const e=el.get(t);return typeof e=="boolean"?e?pl.INSTANCE:wl.INSTANCE:new xl(t,i)}constructor(t,i){this.key=t,this.negated=i,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:Ql(this.key,t.key)}equals(t){return t.type===this.type&&this.key===t.key}substituteConstants(){const t=el.get(this.key);return typeof t=="boolean"?t?pl.INSTANCE:wl.INSTANCE:this}evaluate(t){return!t.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ml.create(this.key,this)),this.negated}}function Cl(t,i){if(typeof t=="string"){const i=parseFloat(t);isNaN(i)||(t=i)}return typeof t=="string"||typeof t=="number"?i(t):pl.INSTANCE}class El{static create(t,i,e=null){return Cl(i,(i=>new El(t,i,e)))}constructor(t,i,e){this.key=t,this.value=i,this.negated=e,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:Ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type&&this.key===t.key&&this.value===t.value}substituteConstants(){return this}evaluate(t){return typeof this.value!="string"&&parseFloat(t.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Ml.create(this.key,this.value,this)),this.negated}}class Bl{static create(t,i,e=null){return Cl(i,(i=>new Bl(t,i,e)))}constructor(t,i,e){this.key=t,this.value=i,this.negated=e,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:Ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type&&this.key===t.key&&this.value===t.value}substituteConstants(){return this}evaluate(t){return typeof this.value!="string"&&parseFloat(t.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Dl.create(this.key,this.value,this)),this.negated}}class Dl{static create(t,i,e=null){return Cl(i,(i=>new Dl(t,i,e)))}constructor(t,i,e){this.key=t,this.value=i,this.negated=e,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:Ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type&&this.key===t.key&&this.value===t.value}substituteConstants(){return this}evaluate(t){return typeof this.value!="string"&&parseFloat(t.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Bl.create(this.key,this.value,this)),this.negated}}class Ml{static create(t,i,e=null){return Cl(i,(i=>new Ml(t,i,e)))}constructor(t,i,e){this.key=t,this.value=i,this.negated=e,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:Ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type&&this.key===t.key&&this.value===t.value}substituteConstants(){return this}evaluate(t){return typeof this.value!="string"&&parseFloat(t.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=El.create(this.key,this.value,this)),this.negated}}class Sl{static create(t,i){return new Sl(t,i)}constructor(t,i){this.key=t,this.regexp=i,this.type=7,this.negated=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.key<t.key)return-1;if(this.key>t.key)return 1;const i=this.regexp?this.regexp.source:"",e=t.regexp?t.regexp.source:"";return i<e?-1:i>e?1:0}equals(t){if(t.type===this.type){const i=this.regexp?this.regexp.source:"",e=t.regexp?t.regexp.source:"";return this.key===t.key&&i===e}return!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.key);return!!this.regexp&&this.regexp.test(i)}serialize(){const t=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${t}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Fl.create(this)),this.negated}}class Fl{static create(t){return new Fl(t)}constructor(t){this._actual=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this._actual.cmp(t._actual)}equals(t){return t.type===this.type&&this._actual.equals(t._actual)}substituteConstants(){return this}evaluate(t){return!this._actual.evaluate(t)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function Il(t){let i=null;for(let e=0,s=t.length;e<s;e++){const s=t[e].substituteConstants();if(t[e]!==s&&i===null){i=[];for(let s=0;s<e;s++)i[s]=t[s]}i!==null&&(i[e]=s)}return i===null?t:i}class Ll{static create(t,i,e){return Ll._normalizeArr(t,i,e)}constructor(t,i){this.expr=t,this.negated=i,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,e=this.expr.length;i<e;i++){const e=Al(this.expr[i],t.expr[i]);if(e!==0)return e}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,e=this.expr.length;i<e;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=Il(this.expr);return t===this.expr?this:Ll.create(t,this.negated,!1)}evaluate(t){for(let i=0,e=this.expr.length;i<e;i++)if(!this.expr[i].evaluate(t))return!1;return!0}static _normalizeArr(t,i,e){const s=[];let n=!1;for(const i of t)if(i)if(i.type!==1){if(i.type===0)return pl.INSTANCE;i.type!==6?s.push(i):s.push(...i.expr)}else n=!0;if(s.length===0&&n)return wl.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(Al);for(let t=1;t<s.length;t++)s[t-1].equals(s[t])&&(s.splice(t,1),t--);if(s.length===1)return s[0];for(;s.length>1;){const t=s[s.length-1];if(t.type!==9)break;s.pop();const i=s.pop(),n=s.length===0,o=Rl.create(t.expr.map((t=>Ll.create([t,i],null,e))),null,n);o&&(s.push(o),s.sort(Al))}if(s.length===1)return s[0];if(e){for(let t=0;t<s.length;t++)for(let i=t+1;i<s.length;i++)if(s[t].negate().equals(s[i]))return pl.INSTANCE;if(s.length===1)return s[0]}return new Ll(s,i)}}serialize(){return this.expr.map((t=>t.serialize())).join(" && ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}negate(){if(!this.negated){const t=[];for(const i of this.expr)t.push(i.negate());this.negated=Rl.create(t,this,!0)}return this.negated}}class Rl{static create(t,i,e){return Rl._normalizeArr(t,i,e)}constructor(t,i){this.expr=t,this.negated=i,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,e=this.expr.length;i<e;i++){const e=Al(this.expr[i],t.expr[i]);if(e!==0)return e}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,e=this.expr.length;i<e;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=Il(this.expr);return t===this.expr?this:Rl.create(t,this.negated,!1)}evaluate(t){for(let i=0,e=this.expr.length;i<e;i++)if(this.expr[i].evaluate(t))return!0;return!1}static _normalizeArr(t,i,e){let s=[],n=!1;if(t){for(let i=0,e=t.length;i<e;i++){const e=t[i];if(e)if(e.type!==0){if(e.type===1)return wl.INSTANCE;e.type!==9?s.push(e):s=s.concat(e.expr)}else n=!0}if(s.length===0&&n)return pl.INSTANCE;s.sort(Al)}if(s.length!==0){if(s.length===1)return s[0];for(let t=1;t<s.length;t++)s[t-1].equals(s[t])&&(s.splice(t,1),t--);if(s.length===1)return s[0];if(e){for(let t=0;t<s.length;t++)for(let i=t+1;i<s.length;i++)if(s[t].negate().equals(s[i]))return wl.INSTANCE;if(s.length===1)return s[0]}return new Rl(s,i)}}serialize(){return this.expr.map((t=>t.serialize())).join(" || ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}negate(){if(!this.negated){const t=[];for(const i of this.expr)t.push(i.negate());for(;t.length>1;){const i=t.shift(),e=t.shift(),s=[];for(const t of Hl(i))for(const i of Hl(e))s.push(Ll.create([t,i],null,!1));t.unshift(Rl.create(s,null,!1))}this.negated=Rl.create(t,this,!0)}return this.negated}}class Tl extends ml{static all(){return Tl._info.values()}constructor(t,i,e){super(t,null),this._defaultValue=i,typeof e=="object"?Tl._info.push({...e,key:t}):e!==!0&&Tl._info.push({key:t,description:e,type:i!=null?typeof i:void 0})}bindTo(t){return t.createKey(this.key,this._defaultValue)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return vl.create(this.key,t)}}Tl._info=[];const Nl=za("contextKeyService");function Ql(t,i){return t<i?-1:t>i?1:0}function Ol(t,i,e,s){return t<e?-1:t>e?1:i<s?-1:i>s?1:0}function zl(t,i){if(t.type===0||i.type===1)return!0;if(t.type===9)return i.type===9&&Ul(t.expr,i.expr);if(i.type===9){for(const e of i.expr)if(zl(t,e))return!0;return!1}if(t.type===6){if(i.type===6)return Ul(i.expr,t.expr);for(const e of t.expr)if(zl(e,i))return!0;return!1}return t.equals(i)}function Ul(t,i){let e=0,s=0;for(;e<t.length&&s<i.length;){const n=t[e].cmp(i[s]);if(n<0)return!1;n===0&&e++,s++}return e===t.length}function Hl(t){return t.type===9?t.expr:[t]}function Pl(t,i){if(!t)throw new Error(i?`Assertion failed (${i})`:"Assertion Failed")}function jl(t,i="Unreachable"){throw new Error(i)}function Wl(t){t||Oi(new Ji("Soft Assertion Failed"))}function Yl(t){t()||(t(),Oi(new Ji("Assertion Failed")))}function _l(t,i){let e=0;for(;e<t.length-1;){if(!i(t[e],t[e+1]))return!1;e++}return!0}const Vl=new class{constructor(){this.data=new Map}add(t,i){Pl(N(t)),Pl(Q(i)),Pl(!this.data.has(t),"There is already an extension with this id"),this.data.set(t,i)}as(t){return this.data.get(t)||null}};class Jl{constructor(){this._coreKeybindings=new _t,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(t){if(Rt===1){if(t&&t.win)return t.win}else if(Rt===2){if(t&&t.mac)return t.mac}else if(t&&t.linux)return t.linux;return t}registerKeybindingRule(t){const i=Jl.bindToCurrentPlatform(t),e=new Zi;if(i&&i.primary){const s=Zo(i.primary,Rt);s&&e.add(this._registerDefaultKeybinding(s,t.id,t.args,t.weight,0,t.when))}if(i&&Array.isArray(i.secondary))for(let s=0,n=i.secondary.length;s<n;s++){const n=Zo(i.secondary[s],Rt);n&&e.add(this._registerDefaultKeybinding(n,t.id,t.args,t.weight,-s-1,t.when))}return e}registerCommandAndKeybindingRule(t){return Xi(this.registerKeybindingRule(t),Xa.registerCommand(t))}_registerDefaultKeybinding(t,i,e,s,n,o){const r=this._coreKeybindings.push({keybinding:t,command:i,commandArgs:e,when:o,weight1:s,weight2:n,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,qi((()=>{r(),this._cachedMergedKeybindings=null}))}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(Kl)),this._cachedMergedKeybindings.slice(0)}}const Gl=new Jl;function Kl(t,i){if(t.weight1!==i.weight1)return t.weight1-i.weight1;if(t.command&&i.command){if(t.command<i.command)return-1;if(t.command>i.command)return 1}return t.weight2-i.weight2}Vl.add("platform.keybindingsRegistry",Gl);var $l,Xl=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},ql=function(t,i){return function(e,s){i(e,s,t)}};function Zl(t){return t.command!==void 0}class tu{constructor(t){if(tu._instances.has(t))throw new TypeError(`MenuId with identifier '${t}' already exists. Use MenuId.for(ident) or a unique identifier`);tu._instances.set(t,this),this.id=t}}tu._instances=new Map,tu.CommandPalette=new tu("CommandPalette"),tu.DebugBreakpointsContext=new tu("DebugBreakpointsContext"),tu.DebugCallStackContext=new tu("DebugCallStackContext"),tu.DebugConsoleContext=new tu("DebugConsoleContext"),tu.DebugVariablesContext=new tu("DebugVariablesContext"),tu.NotebookVariablesContext=new tu("NotebookVariablesContext"),tu.DebugHoverContext=new tu("DebugHoverContext"),tu.DebugWatchContext=new tu("DebugWatchContext"),tu.DebugToolBar=new tu("DebugToolBar"),tu.DebugToolBarStop=new tu("DebugToolBarStop"),tu.EditorContext=new tu("EditorContext"),tu.SimpleEditorContext=new tu("SimpleEditorContext"),tu.EditorContent=new tu("EditorContent"),tu.EditorLineNumberContext=new tu("EditorLineNumberContext"),tu.EditorContextCopy=new tu("EditorContextCopy"),tu.EditorContextPeek=new tu("EditorContextPeek"),tu.EditorContextShare=new tu("EditorContextShare"),tu.EditorTitle=new tu("EditorTitle"),tu.EditorTitleRun=new tu("EditorTitleRun"),tu.EditorTitleContext=new tu("EditorTitleContext"),tu.EditorTitleContextShare=new tu("EditorTitleContextShare"),tu.EmptyEditorGroup=new tu("EmptyEditorGroup"),tu.EmptyEditorGroupContext=new tu("EmptyEditorGroupContext"),tu.EditorTabsBarContext=new tu("EditorTabsBarContext"),tu.EditorTabsBarShowTabsSubmenu=new tu("EditorTabsBarShowTabsSubmenu"),tu.EditorTabsBarShowTabsZenModeSubmenu=new tu("EditorTabsBarShowTabsZenModeSubmenu"),tu.EditorActionsPositionSubmenu=new tu("EditorActionsPositionSubmenu"),tu.ExplorerContext=new tu("ExplorerContext"),tu.ExplorerContextShare=new tu("ExplorerContextShare"),tu.ExtensionContext=new tu("ExtensionContext"),tu.GlobalActivity=new tu("GlobalActivity"),tu.CommandCenter=new tu("CommandCenter"),tu.CommandCenterCenter=new tu("CommandCenterCenter"),tu.LayoutControlMenuSubmenu=new tu("LayoutControlMenuSubmenu"),tu.LayoutControlMenu=new tu("LayoutControlMenu"),tu.MenubarMainMenu=new tu("MenubarMainMenu"),tu.MenubarAppearanceMenu=new tu("MenubarAppearanceMenu"),tu.MenubarDebugMenu=new tu("MenubarDebugMenu"),tu.MenubarEditMenu=new tu("MenubarEditMenu"),tu.MenubarCopy=new tu("MenubarCopy"),tu.MenubarFileMenu=new tu("MenubarFileMenu"),tu.MenubarGoMenu=new tu("MenubarGoMenu"),tu.MenubarHelpMenu=new tu("MenubarHelpMenu"),tu.MenubarLayoutMenu=new tu("MenubarLayoutMenu"),tu.MenubarNewBreakpointMenu=new tu("MenubarNewBreakpointMenu"),tu.PanelAlignmentMenu=new tu("PanelAlignmentMenu"),tu.PanelPositionMenu=new tu("PanelPositionMenu"),tu.ActivityBarPositionMenu=new tu("ActivityBarPositionMenu"),tu.MenubarPreferencesMenu=new tu("MenubarPreferencesMenu"),tu.MenubarRecentMenu=new tu("MenubarRecentMenu"),tu.MenubarSelectionMenu=new tu("MenubarSelectionMenu"),tu.MenubarShare=new tu("MenubarShare"),tu.MenubarSwitchEditorMenu=new tu("MenubarSwitchEditorMenu"),tu.MenubarSwitchGroupMenu=new tu("MenubarSwitchGroupMenu"),tu.MenubarTerminalMenu=new tu("MenubarTerminalMenu"),tu.MenubarViewMenu=new tu("MenubarViewMenu"),tu.MenubarHomeMenu=new tu("MenubarHomeMenu"),tu.OpenEditorsContext=new tu("OpenEditorsContext"),tu.OpenEditorsContextShare=new tu("OpenEditorsContextShare"),tu.ProblemsPanelContext=new tu("ProblemsPanelContext"),tu.SCMInputBox=new tu("SCMInputBox"),tu.SCMChangesSeparator=new tu("SCMChangesSeparator"),tu.SCMIncomingChanges=new tu("SCMIncomingChanges"),tu.SCMIncomingChangesContext=new tu("SCMIncomingChangesContext"),tu.SCMIncomingChangesSetting=new tu("SCMIncomingChangesSetting"),tu.SCMOutgoingChanges=new tu("SCMOutgoingChanges"),tu.SCMOutgoingChangesContext=new tu("SCMOutgoingChangesContext"),tu.SCMOutgoingChangesSetting=new tu("SCMOutgoingChangesSetting"),tu.SCMIncomingChangesAllChangesContext=new tu("SCMIncomingChangesAllChangesContext"),tu.SCMIncomingChangesHistoryItemContext=new tu("SCMIncomingChangesHistoryItemContext"),tu.SCMOutgoingChangesAllChangesContext=new tu("SCMOutgoingChangesAllChangesContext"),tu.SCMOutgoingChangesHistoryItemContext=new tu("SCMOutgoingChangesHistoryItemContext"),tu.SCMChangeContext=new tu("SCMChangeContext"),tu.SCMResourceContext=new tu("SCMResourceContext"),tu.SCMResourceContextShare=new tu("SCMResourceContextShare"),tu.SCMResourceFolderContext=new tu("SCMResourceFolderContext"),tu.SCMResourceGroupContext=new tu("SCMResourceGroupContext"),tu.SCMSourceControl=new tu("SCMSourceControl"),tu.SCMSourceControlInline=new tu("SCMSourceControlInline"),tu.SCMSourceControlTitle=new tu("SCMSourceControlTitle"),tu.SCMTitle=new tu("SCMTitle"),tu.SearchContext=new tu("SearchContext"),tu.SearchActionMenu=new tu("SearchActionContext"),tu.StatusBarWindowIndicatorMenu=new tu("StatusBarWindowIndicatorMenu"),tu.StatusBarRemoteIndicatorMenu=new tu("StatusBarRemoteIndicatorMenu"),tu.StickyScrollContext=new tu("StickyScrollContext"),tu.TestItem=new tu("TestItem"),tu.TestItemGutter=new tu("TestItemGutter"),tu.TestMessageContext=new tu("TestMessageContext"),tu.TestMessageContent=new tu("TestMessageContent"),tu.TestPeekElement=new tu("TestPeekElement"),tu.TestPeekTitle=new tu("TestPeekTitle"),tu.TouchBarContext=new tu("TouchBarContext"),tu.TitleBarContext=new tu("TitleBarContext"),tu.TitleBarTitleContext=new tu("TitleBarTitleContext"),tu.TunnelContext=new tu("TunnelContext"),tu.TunnelPrivacy=new tu("TunnelPrivacy"),tu.TunnelProtocol=new tu("TunnelProtocol"),tu.TunnelPortInline=new tu("TunnelInline"),tu.TunnelTitle=new tu("TunnelTitle"),tu.TunnelLocalAddressInline=new tu("TunnelLocalAddressInline"),tu.TunnelOriginInline=new tu("TunnelOriginInline"),tu.ViewItemContext=new tu("ViewItemContext"),tu.ViewContainerTitle=new tu("ViewContainerTitle"),tu.ViewContainerTitleContext=new tu("ViewContainerTitleContext"),tu.ViewTitle=new tu("ViewTitle"),tu.ViewTitleContext=new tu("ViewTitleContext"),tu.CommentEditorActions=new tu("CommentEditorActions"),tu.CommentThreadTitle=new tu("CommentThreadTitle"),tu.CommentThreadActions=new tu("CommentThreadActions"),tu.CommentThreadAdditionalActions=new tu("CommentThreadAdditionalActions"),tu.CommentThreadTitleContext=new tu("CommentThreadTitleContext"),tu.CommentThreadCommentContext=new tu("CommentThreadCommentContext"),tu.CommentTitle=new tu("CommentTitle"),tu.CommentActions=new tu("CommentActions"),tu.CommentsViewThreadActions=new tu("CommentsViewThreadActions"),tu.InteractiveToolbar=new tu("InteractiveToolbar"),tu.InteractiveCellTitle=new tu("InteractiveCellTitle"),tu.InteractiveCellDelete=new tu("InteractiveCellDelete"),tu.InteractiveCellExecute=new tu("InteractiveCellExecute"),tu.InteractiveInputExecute=new tu("InteractiveInputExecute"),tu.IssueReporter=new tu("IssueReporter"),tu.NotebookToolbar=new tu("NotebookToolbar"),tu.NotebookStickyScrollContext=new tu("NotebookStickyScrollContext"),tu.NotebookCellTitle=new tu("NotebookCellTitle"),tu.NotebookCellDelete=new tu("NotebookCellDelete"),tu.NotebookCellInsert=new tu("NotebookCellInsert"),tu.NotebookCellBetween=new tu("NotebookCellBetween"),tu.NotebookCellListTop=new tu("NotebookCellTop"),tu.NotebookCellExecute=new tu("NotebookCellExecute"),tu.NotebookCellExecuteGoTo=new tu("NotebookCellExecuteGoTo"),tu.NotebookCellExecutePrimary=new tu("NotebookCellExecutePrimary"),tu.NotebookDiffCellInputTitle=new tu("NotebookDiffCellInputTitle"),tu.NotebookDiffCellMetadataTitle=new tu("NotebookDiffCellMetadataTitle"),tu.NotebookDiffCellOutputsTitle=new tu("NotebookDiffCellOutputsTitle"),tu.NotebookOutputToolbar=new tu("NotebookOutputToolbar"),tu.NotebookOutlineFilter=new tu("NotebookOutlineFilter"),tu.NotebookOutlineActionMenu=new tu("NotebookOutlineActionMenu"),tu.NotebookEditorLayoutConfigure=new tu("NotebookEditorLayoutConfigure"),tu.NotebookKernelSource=new tu("NotebookKernelSource"),tu.BulkEditTitle=new tu("BulkEditTitle"),tu.BulkEditContext=new tu("BulkEditContext"),tu.TimelineItemContext=new tu("TimelineItemContext"),tu.TimelineTitle=new tu("TimelineTitle"),tu.TimelineTitleContext=new tu("TimelineTitleContext"),tu.TimelineFilterSubMenu=new tu("TimelineFilterSubMenu"),tu.AccountsContext=new tu("AccountsContext"),tu.SidebarTitle=new tu("SidebarTitle"),tu.PanelTitle=new tu("PanelTitle"),tu.AuxiliaryBarTitle=new tu("AuxiliaryBarTitle"),tu.AuxiliaryBarHeader=new tu("AuxiliaryBarHeader"),tu.TerminalInstanceContext=new tu("TerminalInstanceContext"),tu.TerminalEditorInstanceContext=new tu("TerminalEditorInstanceContext"),tu.TerminalNewDropdownContext=new tu("TerminalNewDropdownContext"),tu.TerminalTabContext=new tu("TerminalTabContext"),tu.TerminalTabEmptyAreaContext=new tu("TerminalTabEmptyAreaContext"),tu.TerminalStickyScrollContext=new tu("TerminalStickyScrollContext"),tu.WebviewContext=new tu("WebviewContext"),tu.InlineCompletionsActions=new tu("InlineCompletionsActions"),tu.InlineEditActions=new tu("InlineEditActions"),tu.NewFile=new tu("NewFile"),tu.MergeInput1Toolbar=new tu("MergeToolbar1Toolbar"),tu.MergeInput2Toolbar=new tu("MergeToolbar2Toolbar"),tu.MergeBaseToolbar=new tu("MergeBaseToolbar"),tu.MergeInputResultToolbar=new tu("MergeToolbarResultToolbar"),tu.InlineSuggestionToolbar=new tu("InlineSuggestionToolbar"),tu.InlineEditToolbar=new tu("InlineEditToolbar"),tu.ChatContext=new tu("ChatContext"),tu.ChatCodeBlock=new tu("ChatCodeblock"),tu.ChatMessageTitle=new tu("ChatMessageTitle"),tu.ChatExecute=new tu("ChatExecute"),tu.ChatExecuteSecondary=new tu("ChatExecuteSecondary"),tu.ChatInputSide=new tu("ChatInputSide"),tu.AccessibleView=new tu("AccessibleView"),tu.MultiDiffEditorFileToolbar=new tu("MultiDiffEditorFileToolbar"),tu.DiffEditorHunkToolbar=new tu("DiffEditorHunkToolbar"),tu.DiffEditorSelectionToolbar=new tu("DiffEditorSelectionToolbar");const iu=za("menuService");class eu{static for(t){let i=this._all.get(t);return i||(i=new eu(t),this._all.set(t,i)),i}static merge(t){const i=new Set;for(const e of t)e instanceof eu&&i.add(e.id);return i}constructor(t){this.id=t,this.has=i=>i===t}}eu._all=new Map;const su=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new pe({merge:eu.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(t){return this._commands.set(t.id,t),this._onDidChangeMenu.fire(eu.for(tu.CommandPalette)),qi((()=>{this._commands.delete(t.id)&&this._onDidChangeMenu.fire(eu.for(tu.CommandPalette))}))}getCommand(t){return this._commands.get(t)}getCommands(){const t=new Map;return this._commands.forEach(((i,e)=>t.set(e,i))),t}appendMenuItem(t,i){let e=this._menuItems.get(t);e||(e=new _t,this._menuItems.set(t,e));const s=e.push(i);return this._onDidChangeMenu.fire(eu.for(t)),qi((()=>{s(),this._onDidChangeMenu.fire(eu.for(t))}))}appendMenuItems(t){const i=new Zi;for(const{id:e,item:s}of t)i.add(this.appendMenuItem(e,s));return i}getMenuItems(t){let i;return i=this._menuItems.has(t)?[...this._menuItems.get(t)]:[],t===tu.CommandPalette&&this._appendImplicitItems(i),i}_appendImplicitItems(t){const i=new Set;for(const e of t)Zl(e)&&(i.add(e.command.id),e.alt&&i.add(e.alt.id));this._commands.forEach(((e,s)=>{i.has(s)||t.push({command:e})}))}};class nu extends _a{constructor(t,i,e){super(`submenuitem.${t.submenu.id}`,typeof t.title=="string"?t.title:t.title.value,e,"submenu"),this.item=t,this.hideActions=i}}let ou=$l=class{static label(t,i){return i!=null&&i.renderShortTitle&&t.shortTitle?typeof t.shortTitle=="string"?t.shortTitle:t.shortTitle.value:typeof t.title=="string"?t.title:t.title.value}constructor(t,i,e,s,n,o){var r,h;let c;if(this.hideActions=s,this._commandService=o,this.id=t.id,this.label=$l.label(t,e),this.tooltip=(h=typeof t.tooltip=="string"?t.tooltip:(r=t.tooltip)===null||r===void 0?void 0:r.value)!==null&&h!==void 0?h:"",this.enabled=!t.precondition||n.contextMatchesRules(t.precondition),this.checked=void 0,t.toggled){const i=t.toggled.condition?t.toggled:{condition:t.toggled};this.checked=n.contextMatchesRules(i.condition),this.checked&&i.tooltip&&(this.tooltip=typeof i.tooltip=="string"?i.tooltip:i.tooltip.value),this.checked&&Ka.isThemeIcon(i.icon)&&(c=i.icon),this.checked&&i.title&&(this.label=typeof i.title=="string"?i.title:i.title.value)}c||(c=Ka.isThemeIcon(t.icon)?t.icon:void 0),this.item=t,this.alt=i?new $l(i,void 0,e,s,n,o):void 0,this._options=e,this.class=c&&Ka.asClassName(c)}run(...t){var i,e;let s=[];return!((i=this._options)===null||i===void 0)&&i.arg&&(s=[...s,this._options.arg]),!((e=this._options)===null||e===void 0)&&e.shouldForwardArgs&&(s=[...s,...t]),this._commandService.executeCommand(this.id,...s)}};ou=$l=Xl([ql(4,Nl),ql(5,$a)],ou);class ru{constructor(t){this.desc=t}}function hu(t){const i=new Zi,e=new t,{f1:s,menu:n,keybinding:o,...r}=e.desc;if(Xa.getCommand(r.id))throw new Error(`Cannot register two commands with the same id: ${r.id}`);if(i.add(Xa.registerCommand({id:r.id,handler:(t,...i)=>e.run(t,...i),metadata:r.metadata})),Array.isArray(n))for(const t of n)i.add(su.appendMenuItem(t.id,{command:{...r,precondition:t.precondition===null?void 0:r.precondition},...t}));else n&&i.add(su.appendMenuItem(n.id,{command:{...r,precondition:n.precondition===null?void 0:r.precondition},...n}));if(s&&(i.add(su.appendMenuItem(tu.CommandPalette,{command:r,when:r.precondition})),i.add(su.addCommand(r))),Array.isArray(o))for(const t of o)i.add(Gl.registerKeybindingRule({...t,id:r.id,when:r.precondition?gl.and(r.precondition,t.when):t.when}));else o&&i.add(Gl.registerKeybindingRule({...o,id:r.id,when:r.precondition?gl.and(r.precondition,o.when):o.when}));return i}const cu=za("telemetryService"),au=za("logService");var lu;(function(t){t[t.Off=0]="Off",t[t.Trace=1]="Trace",t[t.Debug=2]="Debug",t[t.Info=3]="Info",t[t.Warning=4]="Warning",t[t.Error=5]="Error"})(lu||(lu={}));const uu=lu.Info;class du extends te{constructor(){super(...arguments),this.level=uu,this._onDidChangeLogLevel=this._register(new de),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(t){this.level!==t&&(this.level=t,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(t){return this.level!==lu.Off&&this.level<=t}}class fu extends du{constructor(t=uu,i=!0){super(),this.useColors=i,this.setLevel(t)}trace(t,...i){this.checkLogLevel(lu.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",t,...i):console.log(t,...i))}debug(t,...i){this.checkLogLevel(lu.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",t,...i):console.log(t,...i))}info(t,...i){this.checkLogLevel(lu.Info)&&(this.useColors?console.log("%c INFO","color: #33f",t,...i):console.log(t,...i))}warn(t,...i){this.checkLogLevel(lu.Warning)&&(this.useColors?console.log("%c WARN","color: #993",t,...i):console.log(t,...i))}error(t,...i){this.checkLogLevel(lu.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",t,...i):console.error(t,...i))}}class gu extends du{constructor(t){super(),this.loggers=t,t.length&&this.setLevel(t[0].getLevel())}setLevel(t){for(const i of this.loggers)i.setLevel(t);super.setLevel(t)}trace(t,...i){for(const e of this.loggers)e.trace(t,...i)}debug(t,...i){for(const e of this.loggers)e.debug(t,...i)}info(t,...i){for(const e of this.loggers)e.info(t,...i)}warn(t,...i){for(const e of this.loggers)e.warn(t,...i)}error(t,...i){for(const e of this.loggers)e.error(t,...i)}dispose(){for(const t of this.loggers)t.dispose();super.dispose()}}new Tl("logLevel",function(t){switch(t){case lu.Trace:return"trace";case lu.Debug:return"debug";case lu.Info:return"info";case lu.Warning:return"warn";case lu.Error:return"error";case lu.Off:return"off"}}(lu.Info));class Au{constructor(t){this.id=t.id,this.precondition=t.precondition,this._kbOpts=t.kbOpts,this._menuOpts=t.menuOpts,this.metadata=t.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const t=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const i of t){let t=i.kbExpr;this.precondition&&(t=t?gl.and(t,this.precondition):this.precondition);const e={id:this.id,weight:i.weight,args:i.args,when:t,primary:i.primary,secondary:i.secondary,win:i.win,linux:i.linux,mac:i.mac};Gl.registerKeybindingRule(e)}}Xa.registerCommand({id:this.id,handler:(t,i)=>this.runCommand(t,i),metadata:this.metadata})}_registerMenuItem(t){su.appendMenuItem(t.menuId,{group:t.group,command:{id:this.id,title:t.title,icon:t.icon,precondition:this.precondition},when:t.when,order:t.order})}}class pu extends Au{constructor(){super(...arguments),this._implementations=[]}addImplementation(t,i,e,s){return this._implementations.push({priority:t,name:i,implementation:e,when:s}),this._implementations.sort(((t,i)=>i.priority-t.priority)),{dispose:()=>{for(let t=0;t<this._implementations.length;t++)if(this._implementations[t].implementation===e)return void this._implementations.splice(t,1)}}}runCommand(t,i){const e=t.get(au),s=t.get(Nl);e.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const n of this._implementations){if(n.when){const t=s.getContext(Lc());if(!n.when.evaluate(t))continue}const o=n.implementation(t,i);if(o)return e.trace(`Command '${this.id}' was handled by '${n.name}'.`),typeof o=="boolean"?void 0:o}e.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class wu extends Au{constructor(t,i){super(i),this.command=t}runCommand(t,i){return this.command.runCommand(t,i)}}class mu extends Au{static bindToContribution(t){return class extends mu{constructor(t){super(t),this._callback=t.handler}runEditorCommand(i,e,s){const n=t(e);n&&this._callback(n,s)}}}static runEditorCommand(t,i,e,s){const n=t.get(Ua),o=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(o)return o.invokeWithinContext((t=>{if(t.get(Nl).contextMatchesRules(e??void 0))return s(t,o,i)}))}runCommand(t,i){return mu.runEditorCommand(t,i,this.precondition,((t,i,e)=>this.runEditorCommand(t,i,e)))}}class vu extends mu{static convertOptions(t){let i;function e(i){return i.menuId||(i.menuId=tu.EditorContext),i.title||(i.title=t.label),i.when=gl.and(t.precondition,i.when),i}return i=Array.isArray(t.menuOpts)?t.menuOpts:t.menuOpts?[t.menuOpts]:[],Array.isArray(t.contextMenuOpts)?i.push(...t.contextMenuOpts.map(e)):t.contextMenuOpts&&i.push(e(t.contextMenuOpts)),t.menuOpts=i,t}constructor(t){super(vu.convertOptions(t)),this.label=t.label,this.alias=t.alias}runEditorCommand(t,i,e){return this.reportTelemetry(t,i),this.run(t,i,e||{})}reportTelemetry(t,i){t.get(cu).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class bu extends vu{constructor(){super(...arguments),this._implementations=[]}addImplementation(t,i){return this._implementations.push([t,i]),this._implementations.sort(((t,i)=>i[0]-t[0])),{dispose:()=>{for(let t=0;t<this._implementations.length;t++)if(this._implementations[t][1]===i)return void this._implementations.splice(t,1)}}}run(t,i,e){for(const s of this._implementations){const n=s[1](t,i,e);if(n)return typeof n=="boolean"?void 0:n}}}class yu extends ru{run(t,...i){const e=t.get(Ua),s=e.getFocusedCodeEditor()||e.getActiveCodeEditor();if(s)return s.invokeWithinContext((t=>{var e,n;const o=t.get(Nl),r=t.get(au);if(o.contextMatchesRules((e=this.desc.precondition)!==null&&e!==void 0?e:void 0))return this.runEditorCommand(t,s,...i);r.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,(n=this.desc.precondition)===null||n===void 0?void 0:n.serialize())}))}}function ku(t,i){Xa.registerCommand(t,(function(t,...e){const s=t.get(Oa),[n,o]=e;Y(fs.isUri(n)),Y(Cs.isIPosition(o));const r=t.get(Ha).getModel(n);if(r){const t=Cs.lift(o);return s.invokeFunction(i,r,t,...e.slice(2))}return t.get(Pa).createModelReference(n).then((t=>new Promise(((n,r)=>{try{n(s.invokeFunction(i,t.object.textEditorModel,Cs.lift(o),e.slice(2)))}catch(t){r(t)}})).finally((()=>{t.dispose()}))))}))}function xu(t){return Mu.INSTANCE.registerEditorCommand(t),t}function Cu(t){const i=new t;return Mu.INSTANCE.registerEditorAction(i),i}function Eu(t){return Mu.INSTANCE.registerEditorAction(t),t}function Bu(t,i,e){Mu.INSTANCE.registerEditorContribution(t,i,e)}var Du;(function(t){t.getEditorCommand=function(t){return Mu.INSTANCE.getEditorCommand(t)},t.getEditorActions=function(){return Mu.INSTANCE.getEditorActions()},t.getEditorContributions=function(){return Mu.INSTANCE.getEditorContributions()},t.getSomeEditorContributions=function(t){return Mu.INSTANCE.getEditorContributions().filter((i=>t.indexOf(i.id)>=0))},t.getDiffEditorContributions=function(){return Mu.INSTANCE.getDiffEditorContributions()}})(Du||(Du={}));class Mu{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(t,i,e){this.editorContributions.push({id:t,ctor:i,instantiation:e})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(t){t.register(),this.editorActions.push(t)}getEditorActions(){return this.editorActions}registerEditorCommand(t){t.register(),this.editorCommands[t.id]=t}getEditorCommand(t){return this.editorCommands[t]||null}}function Su(t){return t.register(),t}Mu.INSTANCE=new Mu,Vl.add("editor.contributions",Mu.INSTANCE);const Fu=Su(new pu({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:tu.MenubarEditMenu,group:"1_do",title:st(0,"&&Undo"),order:1},{menuId:tu.CommandPalette,group:"",title:st(0,"Undo"),order:1}]}));Su(new wu(Fu,{id:"default:undo",precondition:void 0}));const Iu=Su(new pu({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:tu.MenubarEditMenu,group:"1_do",title:st(0,"&&Redo"),order:2},{menuId:tu.CommandPalette,group:"",title:st(0,"Redo"),order:1}]}));Su(new wu(Iu,{id:"default:redo",precondition:void 0}));const Lu=Su(new pu({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:tu.MenubarSelectionMenu,group:"1_basic",title:st(0,"&&Select All"),order:1},{menuId:tu.CommandPalette,group:"",title:st(0,"Select All"),order:1}]}));let Ru=!1;function Tu(t){Et&&(Ru||(Ru=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(t.message))}class Nu{constructor(t,i,e,s){this.vsWorker=t,this.req=i,this.method=e,this.args=s,this.type=0}}class Qu{constructor(t,i,e,s){this.vsWorker=t,this.seq=i,this.res=e,this.err=s,this.type=1}}class Ou{constructor(t,i,e,s){this.vsWorker=t,this.req=i,this.eventName=e,this.arg=s,this.type=2}}class zu{constructor(t,i,e){this.vsWorker=t,this.req=i,this.event=e,this.type=3}}class Uu{constructor(t,i){this.vsWorker=t,this.req=i,this.type=4}}class Hu{constructor(t){this._workerId=-1,this._handler=t,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(t){this._workerId=t}sendMessage(t,i){const e=String(++this._lastSentReq);return new Promise(((s,n)=>{this._pendingReplies[e]={resolve:s,reject:n},this._send(new Nu(this._workerId,e,t,i))}))}listen(t,i){let e=null;const s=new de({onWillAddFirstListener:()=>{e=String(++this._lastSentReq),this._pendingEmitters.set(e,s),this._send(new Ou(this._workerId,e,t,i))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(e),this._send(new Uu(this._workerId,e)),e=null}});return s.event}handleMessage(t){t&&t.vsWorker&&(this._workerId!==-1&&t.vsWorker!==this._workerId||this._handleMessage(t))}_handleMessage(t){switch(t.type){case 1:return this._handleReplyMessage(t);case 0:return this._handleRequestMessage(t);case 2:return this._handleSubscribeEventMessage(t);case 3:return this._handleEventMessage(t);case 4:return this._handleUnsubscribeEventMessage(t)}}_handleReplyMessage(t){if(!this._pendingReplies[t.seq])return void console.warn("Got reply to unknown seq");const i=this._pendingReplies[t.seq];if(delete this._pendingReplies[t.seq],t.err){let e=t.err;return t.err.$isError&&(e=new Error,e.name=t.err.name,e.message=t.err.message,e.stack=t.err.stack),void i.reject(e)}i.resolve(t.res)}_handleRequestMessage(t){const i=t.req;this._handler.handleMessage(t.method,t.args).then((t=>{this._send(new Qu(this._workerId,i,t,void 0))}),(t=>{t.detail instanceof Error&&(t.detail=Ui(t.detail)),this._send(new Qu(this._workerId,i,void 0,Ui(t)))}))}_handleSubscribeEventMessage(t){const i=t.req,e=this._handler.handleEvent(t.eventName,t.arg)((t=>{this._send(new zu(this._workerId,i,t))}));this._pendingEvents.set(i,e)}_handleEventMessage(t){this._pendingEmitters.has(t.req)?this._pendingEmitters.get(t.req).fire(t.event):console.warn("Got event for unknown req")}_handleUnsubscribeEventMessage(t){this._pendingEvents.has(t.req)?(this._pendingEvents.get(t.req).dispose(),this._pendingEvents.delete(t.req)):console.warn("Got unsubscribe for unknown req")}_send(t){const i=[];if(t.type===0)for(let e=0;e<t.args.length;e++)t.args[e]instanceof ArrayBuffer&&i.push(t.args[e]);else t.type===1&&t.res instanceof ArrayBuffer&&i.push(t.res);this._handler.sendMessage(t,i)}}class Pu extends te{constructor(t,i,e){super();let s=null;this._worker=this._register(t.create("vs/base/common/worker/simpleWorker",(t=>{this._protocol.handleMessage(t)}),(t=>{s==null||s(t)}))),this._protocol=new Hu({sendMessage:(t,i)=>{this._worker.postMessage(t,i)},handleMessage:(t,i)=>{if(typeof e[t]!="function")return Promise.reject(new Error("Missing method "+t+" on main thread host."));try{return Promise.resolve(e[t].apply(e,i))}catch(t){return Promise.reject(t)}},handleEvent:(t,i)=>{if(Wu(t)){const s=e[t].call(e,i);if(typeof s!="function")throw new Error(`Missing dynamic event ${t} on main thread host.`);return s}if(ju(t)){const i=e[t];if(typeof i!="function")throw new Error(`Missing event ${t} on main thread host.`);return i}throw new Error(`Malformed event name ${t}`)}}),this._protocol.setWorkerId(this._worker.getId());let n=null;const o=globalThis.require;o!==void 0&&typeof o.getConfig=="function"?n=o.getConfig():globalThis.requirejs!==void 0&&(n=globalThis.requirejs.s.contexts._.config);const r=tt(e);this._onModuleLoaded=this._protocol.sendMessage("$initialize",[this._worker.getId(),JSON.parse(JSON.stringify(n)),i,r]);const h=(t,i)=>this._request(t,i),c=(t,i)=>this._protocol.listen(t,i);this._lazyProxy=new Promise(((t,e)=>{s=e,this._onModuleLoaded.then((i=>{t(function(t,i,e){const s=t=>function(){const e=Array.prototype.slice.call(arguments,0);return i(t,e)},n=t=>function(i){return e(t,i)},o={};for(const i of t)Wu(i)?o[i]=n(i):ju(i)?o[i]=e(i,void 0):o[i]=s(i);return o}(i,h,c))}),(t=>{e(t),this._onError("Worker failed to load "+i,t)}))}))}getProxyObject(){return this._lazyProxy}_request(t,i){return new Promise(((e,s)=>{this._onModuleLoaded.then((()=>{this._protocol.sendMessage(t,i).then(e,s)}),s)}))}_onError(t,i){console.error(t),console.info(i)}}function ju(t){return t[0]==="o"&&t[1]==="n"&&fo(t.charCodeAt(2))}function Wu(t){return/^onDynamic/.test(t)&&fo(t.charCodeAt(9))}function Yu(t,i){var e;const s=globalThis.MonacoEnvironment;if(s!=null&&s.createTrustedTypesPolicy)try{return s.createTrustedTypesPolicy(t,i)}catch(t){return void Oi(t)}try{return(e=Wn.trustedTypes)===null||e===void 0?void 0:e.createPolicy(t,i)}catch(t){return void Oi(t)}}const _u=Yu("defaultWorkerFactory",{createScriptURL:t=>t});class Vu extends te{constructor(t,i,e,s,n){super(),this.id=i,this.label=e;const o=function(t){const i=globalThis.MonacoEnvironment;if(i){if(typeof i.getWorker=="function")return i.getWorker("workerMain.js",t);if(typeof i.getWorkerUrl=="function"){const e=i.getWorkerUrl("workerMain.js",t);return new Worker(_u?_u.createScriptURL(e):e,{name:t})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}(e);typeof o.then=="function"?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(t,[]),this.worker.then((t=>{t.onmessage=function(t){s(t.data)},t.onmessageerror=n,typeof t.addEventListener=="function"&&t.addEventListener("error",n)})),this._register(qi((()=>{var t;(t=this.worker)===null||t===void 0||t.then((t=>{t.onmessage=null,t.onmessageerror=null,t.removeEventListener("error",n),t.terminate()})),this.worker=null})))}getId(){return this.id}postMessage(t,i){var e;(e=this.worker)===null||e===void 0||e.then((e=>{try{e.postMessage(t,i)}catch(t){Oi(t),Oi(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:t}))}}))}}class Ju{constructor(t){this._label=t,this._webWorkerFailedBeforeError=!1}create(t,i,e){const s=++Ju.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new Vu(t,s,this._label||"anonymous"+s,i,(t=>{Tu(t),this._webWorkerFailedBeforeError=t,e(t)}))}}var Gu;Ju.LAST_WORKER_ID=0,function(t){t[t.None=0]="None",t[t.Indent=1]="Indent",t[t.IndentOutdent=2]="IndentOutdent",t[t.Outdent=3]="Outdent"}(Gu||(Gu={}));class Ku{constructor(t){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=t.open,this.close=t.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(t.notIn))for(let i=0,e=t.notIn.length;i<e;i++)switch(t.notIn[i]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1}}isOK(t){switch(t){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(t,i){if(t.getTokenCount()===0)return!0;const e=t.findTokenIndexAtOffset(i-2),s=t.getStandardTokenType(e);return this.isOK(s)}_findNeutralCharacterInRange(t,i){for(let e=t;e<=i;e++){const t=String.fromCharCode(e);if(!this.open.includes(t)&&!this.close.includes(t))return t}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class $u{constructor(t){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const i of t)Xu(this.autoClosingPairsOpenByStart,i.open.charAt(0),i),Xu(this.autoClosingPairsOpenByEnd,i.open.charAt(i.open.length-1),i),Xu(this.autoClosingPairsCloseByStart,i.close.charAt(0),i),Xu(this.autoClosingPairsCloseByEnd,i.close.charAt(i.close.length-1),i),i.close.length===1&&i.open.length===1&&Xu(this.autoClosingPairsCloseSingleChar,i.close,i)}}function Xu(t,i,e){t.has(i)?t.get(i).push(e):t.set(i,[e])}function qu(t,i){const e=t.getCount(),s=t.findTokenIndexAtOffset(i),n=t.getLanguageId(s);let o=s;for(;o+1<e&&t.getLanguageId(o+1)===n;)o++;let r=s;for(;r>0&&t.getLanguageId(r-1)===n;)r--;return new Zu(t,n,r,o+1,t.getStartOffset(r),t.getEndOffset(o))}class Zu{constructor(t,i,e,s,n,o){this._scopedLineTokensBrand=void 0,this._actual=t,this.languageId=i,this._firstTokenIndex=e,this._lastTokenIndex=s,this.firstCharOffset=n,this._lastCharOffset=o}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(t){return this._actual.getLineContent().substring(0,this.firstCharOffset+t)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(t){return this._actual.findTokenIndexAtOffset(t+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(t){return this._actual.getStandardTokenType(t+this._firstTokenIndex)}}function td(t){return!!(3&t)}class id{constructor(t){if(t.autoClosingPairs?this._autoClosingPairs=t.autoClosingPairs.map((t=>new Ku(t))):t.brackets?this._autoClosingPairs=t.brackets.map((t=>new Ku({open:t[0],close:t[1]}))):this._autoClosingPairs=[],t.__electricCharacterSupport&&t.__electricCharacterSupport.docComment){const i=t.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Ku({open:i.open,close:i.close||""}))}this._autoCloseBeforeForQuotes=typeof t.autoCloseBefore=="string"?t.autoCloseBefore:id.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof t.autoCloseBefore=="string"?t.autoCloseBefore:id.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=t.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(t){return t?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}id.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> \n\t`,id.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> \n\t`;const ed=typeof Buffer<"u";let sd,nd,od,rd;class hd{static wrap(t){return ed&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new hd(t)}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}toString(){return ed?this.buffer.toString():(sd||(sd=new TextDecoder),sd.decode(this.buffer))}}function cd(t,i){return(t[i+0]|0)>>>0|t[i+1]<<8>>>0}function ad(t,i,e){t[e+0]=255&i,i>>>=8,t[e+1]=255&i}function ld(t,i){return t[i]*2**24+65536*t[i+1]+256*t[i+2]+t[i+3]}function ud(t,i,e){t[e+3]=i,i>>>=8,t[e+2]=i,i>>>=8,t[e+1]=i,i>>>=8,t[e]=i}function dd(t,i){return t[i]}function fd(t,i,e){t[e]=i}function gd(){return nd||(nd=new TextDecoder("UTF-16LE")),nd}function Ad(){return rd||(rd=Qt()?gd():(od||(od=new TextDecoder("UTF-16BE")),od)),rd}function pd(t,i,e){const s=new Uint16Array(t.buffer,i,e);return e>0&&(s[0]===65279||s[0]===65534)?function(t,i,e){const s=[];let n=0;for(let o=0;o<e;o++){const e=cd(t,i);i+=2,s[n++]=String.fromCharCode(e)}return s.join("")}(t,i,e):gd().decode(s)}class wd{constructor(t){this._capacity=0|t,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const t=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Ad().decode(t)}_flushBuffer(){const t=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[t]:this._completedStrings[this._completedStrings.length]=t}appendCharCode(t){const i=this._capacity-this._bufferLength;i<=1&&(i===0||mo(t))&&this._flushBuffer(),this._buffer[this._bufferLength++]=t}appendASCIICharCode(t){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=t}appendString(t){const i=t.length;if(this._bufferLength+i>=this._capacity)return this._flushBuffer(),void(this._completedStrings[this._completedStrings.length]=t);for(let e=0;e<i;e++)this._buffer[this._bufferLength++]=t.charCodeAt(e)}}class md{constructor(t,i,e,s,n,o){this._richEditBracketBrand=void 0,this.languageId=t,this.index=i,this.open=e,this.close=s,this.forwardRegex=n,this.reversedRegex=o,this._openSet=md._toSet(this.open),this._closeSet=md._toSet(this.close)}isOpen(t){return this._openSet.has(t)}isClose(t){return this._closeSet.has(t)}static _toSet(t){const i=new Set;for(const e of t)i.add(e);return i}}class vd{constructor(t,i){this._richEditBracketsBrand=void 0;const e=function(t){const i=t.length;t=t.map((t=>[t[0].toLowerCase(),t[1].toLowerCase()]));const e=[];for(let t=0;t<i;t++)e[t]=t;const s=(t,i)=>{const[e,s]=t,[n,o]=i;return e===n||e===o||s===n||s===o},n=(t,s)=>{const n=Math.min(t,s),o=Math.max(t,s);for(let t=0;t<i;t++)e[t]===o&&(e[t]=n)};for(let o=0;o<i;o++){const r=t[o];for(let h=o+1;h<i;h++)s(r,t[h])&&n(e[o],e[h])}const o=[];for(let s=0;s<i;s++){const n=[],r=[];for(let o=0;o<i;o++)if(e[o]===s){const[i,e]=t[o];n.push(i),r.push(e)}n.length>0&&o.push({open:n,close:r})}return o}(i);this.brackets=e.map(((i,s)=>new md(t,s,i.open,i.close,function(t,i,e,s){let n=[];n=n.concat(t),n=n.concat(i);for(let t=0,i=n.length;t<i;t++)bd(n[t],e,s,n);return n=kd(n),n.sort(yd),n.reverse(),Cd(n)}(i.open,i.close,e,s),function(t,i,e,s){let n=[];n=n.concat(t),n=n.concat(i);for(let t=0,i=n.length;t<i;t++)bd(n[t],e,s,n);return n=kd(n),n.sort(yd),n.reverse(),Cd(n.map(Ed))}(i.open,i.close,e,s)))),this.forwardRegex=function(t){let i=[];for(const e of t){for(const t of e.open)i.push(t);for(const t of e.close)i.push(t)}return i=kd(i),Cd(i)}(this.brackets),this.reversedRegex=function(t){let i=[];for(const e of t){for(const t of e.open)i.push(t);for(const t of e.close)i.push(t)}return i=kd(i),Cd(i.map(Ed))}(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const t of this.brackets){for(const i of t.open)this.textIsBracket[i]=t,this.textIsOpenBracket[i]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,i.length);for(const i of t.close)this.textIsBracket[i]=t,this.textIsOpenBracket[i]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,i.length)}}}function bd(t,i,e,s){for(let n=0,o=i.length;n<o;n++){if(n===e)continue;const o=i[n];for(const i of o.open)i.indexOf(t)>=0&&s.push(i);for(const i of o.close)i.indexOf(t)>=0&&s.push(i)}}function yd(t,i){return t.length-i.length}function kd(t){if(t.length<=1)return t;const i=[],e=new Set;for(const s of t)e.has(s)||(i.push(s),e.add(s));return i}function xd(t){const i=/^[\w ]+$/.test(t);return t=Xn(t),i?`\\b${t}\\b`:t}function Cd(t){return io(`(${t.map(xd).join(")|(")})`,!0)}const Ed=function(){let t=null,i=null;return function(e){return t!==e&&(t=e,i=function(t){const i=new Uint16Array(t.length);let e=0;for(let s=t.length-1;s>=0;s--)i[e++]=t.charCodeAt(s);return Ad().decode(i)}(t)),i}}();class Bd{static _findPrevBracketInText(t,i,e,s){const n=e.match(t);if(!n)return null;const o=e.length-(n.index||0),r=n[0].length,h=s+o;return new Es(i,h-r+1,i,h+1)}static findPrevBracketInRange(t,i,e,s,n){const o=Ed(e).substring(e.length-n,e.length-s);return this._findPrevBracketInText(t,i,o,s)}static findNextBracketInText(t,i,e,s){const n=e.match(t);if(!n)return null;const o=n.index||0,r=n[0].length;if(r===0)return null;const h=s+o;return new Es(i,h+1,i,h+1+r)}static findNextBracketInRange(t,i,e,s,n){const o=e.substring(s,n);return this.findNextBracketInText(t,i,o,s)}}class Dd{constructor(t){this._richEditBrackets=t}getElectricCharacters(){const t=[];if(this._richEditBrackets)for(const i of this._richEditBrackets.brackets)for(const e of i.close){const i=e.charAt(e.length-1);t.push(i)}return w(t)}onElectricCharacter(t,i,e){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=i.findTokenIndexAtOffset(e-1);if(td(i.getStandardTokenType(s)))return null;const n=this._richEditBrackets.reversedRegex,o=i.getLineContent().substring(0,e-1)+t,r=Bd.findPrevBracketInRange(n,1,o,0,o.length);if(!r)return null;const h=o.substring(r.startColumn-1,r.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[h])return null;const c=i.getActualLineContentBefore(r.startColumn-1);return/^\s*$/.test(c)?{matchOpenBracket:h}:null}}function Md(t){return t.global&&(t.lastIndex=0),!0}class Sd{constructor(t){this._indentationRules=t}shouldIncrease(t){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Md(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(t))}shouldDecrease(t){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Md(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(t))}shouldIndentNextLine(t){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Md(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(t))}shouldIgnore(t){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Md(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(t))}getIndentMetadata(t){let i=0;return this.shouldIncrease(t)&&(i+=1),this.shouldDecrease(t)&&(i+=2),this.shouldIndentNextLine(t)&&(i+=4),this.shouldIgnore(t)&&(i+=8),i}}class Fd{constructor(t){(t=t||{}).brackets=t.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],t.brackets.forEach((t=>{const i=Fd._createOpenBracketRegExp(t[0]),e=Fd._createCloseBracketRegExp(t[1]);i&&e&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:e})})),this._regExpRules=t.onEnterRules||[]}onEnter(t,i,e,s){if(t>=3)for(let t=0,n=this._regExpRules.length;t<n;t++){const n=this._regExpRules[t];if([{reg:n.beforeText,text:e},{reg:n.afterText,text:s},{reg:n.previousLineText,text:i}].every((t=>!t.reg||(t.reg.lastIndex=0,t.reg.test(t.text)))))return n.action}if(t>=2&&e.length>0&&s.length>0)for(let t=0,i=this._brackets.length;t<i;t++){const i=this._brackets[t];if(i.openRegExp.test(e)&&i.closeRegExp.test(s))return{indentAction:Gu.IndentOutdent}}if(t>=2&&e.length>0){for(let t=0,i=this._brackets.length;t<i;t++)if(this._brackets[t].openRegExp.test(e))return{indentAction:Gu.Indent}}return null}static _createOpenBracketRegExp(t){let i=Xn(t);return/\B/.test(i.charAt(0))||(i="\\b"+i),i+="\\s*$",Fd._safeRegExp(i)}static _createCloseBracketRegExp(t){let i=Xn(t);return/\B/.test(i.charAt(i.length-1))||(i+="\\b"),i="^\\s*"+i,Fd._safeRegExp(i)}static _safeRegExp(t){try{return new RegExp(t)}catch(t){return Oi(t),null}}}const Id=za("configurationService");function Ld(t,i){const e=Object.create(null);for(const s in t)Rd(e,s,t[s],i);return e}function Rd(t,i,e,s){const n=i.split("."),o=n.pop();let r=t;for(let t=0;t<n.length;t++){const e=n[t];let o=r[e];switch(typeof o){case"undefined":o=r[e]=Object.create(null);break;case"object":break;default:return void s(`Ignoring ${i} as ${n.slice(0,t+1).join(".")} is ${JSON.stringify(o)}`)}r=o}if(typeof r=="object"&&r!==null)try{r[o]=e}catch{s(`Ignoring ${i} as ${n.join(".")} is ${JSON.stringify(r)}`)}else s(`Ignoring ${i} as ${n.join(".")} is ${JSON.stringify(r)}`)}function Td(t,i){Nd(t,i.split("."))}function Nd(t,i){const e=i.shift();if(i.length!==0){if(Object.keys(t).indexOf(e)!==-1){const s=t[e];typeof s!="object"||Array.isArray(s)||(Nd(s,i),Object.keys(s).length===0&&delete t[e])}}else delete t[e]}function Qd(t,i,e){const s=function(t,i){let e=t;for(const t of i){if(typeof e!="object"||e===null)return;e=e[t]}return e}(t,i.split("."));return s===void 0?e:s}const Od=za("languageService");class zd{constructor(t,i=[],e=!1){this.ctor=t,this.staticArguments=i,this.supportsDelayedInstantiation=e}}const Ud=[];function Hd(t,i,e){i instanceof zd||(i=new zd(i,[],!!e)),Ud.push([t,i])}function Pd(){return Ud}const jd=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),Wd="base.contributions.json",Yd=new class{constructor(){this._onDidChangeSchema=new de,this.schemasById={}}registerSchema(t,i){var e;this.schemasById[(e=t,e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e)]=i,this._onDidChangeSchema.fire(t)}notifySchemaChanged(t){this._onDidChangeSchema.fire(t)}};Vl.add(Wd,Yd);const _d="base.contributions.configuration",Vd="vscode://schemas/settings/resourceLanguage",Jd=Vl.as(Wd),Gd="\\[([^\\]]+)\\]",Kd=new RegExp(Gd,"g"),$d=new RegExp(`^(${Gd})+$`);function Xd(t){const i=[];if($d.test(t)){let e=Kd.exec(t);for(;e!=null&&e.length;){const s=e[1].trim();s&&i.push(s),e=Kd.exec(t)}}return w(i)}const qd=new class{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new de,this._onDidUpdateConfiguration=new de,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:st(0,"Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},Jd.registerSchema(Vd,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(t,i=!0){this.registerConfigurations([t],i)}registerConfigurations(t,i=!0){const e=new Set;this.doRegisterConfigurations(t,i,e),Jd.registerSchema(Vd,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:e})}registerDefaultConfigurations(t){const i=new Set;this.doRegisterDefaultConfigurations(t,i),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i,defaultsOverrides:!0})}doRegisterDefaultConfigurations(t,i){var e;const s=[];for(const{overrides:n,source:o}of t)for(const t in n)if(i.add(t),$d.test(t)){const i=this.configurationDefaultsOverrides.get(t),r=(e=i==null?void 0:i.valuesSources)!==null&&e!==void 0?e:new Map;if(o)for(const i of Object.keys(n[t]))r.set(i,o);const h={...(i==null?void 0:i.value)||{},...n[t]};this.configurationDefaultsOverrides.set(t,{source:o,value:h,valuesSources:r});const c={type:"object",default:h,description:st(0,"Configure settings to be overridden for the {0} language.",t.replace(/[\[\]]/g,"")),$ref:Vd,defaultDefaultValue:h,source:N(o)?void 0:o,defaultValueSource:o};s.push(...Xd(t)),this.configurationProperties[t]=c,this.defaultLanguageConfigurationOverridesNode.properties[t]=c}else{this.configurationDefaultsOverrides.set(t,{value:n[t],source:o});const i=this.configurationProperties[t];i&&(this.updatePropertyDefaultValue(t,i),this.updateSchema(t,i))}this.doRegisterOverrideIdentifiers(s)}registerOverrideIdentifiers(t){this.doRegisterOverrideIdentifiers(t),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(t){for(const i of t)this.overrideIdentifiers.add(i);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(t,i,e){t.forEach((t=>{this.validateAndRegisterProperties(t,i,t.extensionInfo,t.restrictedProperties,void 0,e),this.configurationContributors.push(t),this.registerJSONConfiguration(t)}))}validateAndRegisterProperties(t,i=!0,e,s,n=3,o){var r;n=W(t.scope)?n:t.scope;const h=t.properties;if(h)for(const t in h){const c=h[t];i&&Zd(t,c)?delete h[t]:(c.source=e,c.defaultDefaultValue=h[t].default,this.updatePropertyDefaultValue(t,c),$d.test(t)?c.scope=void 0:(c.scope=W(c.scope)?n:c.scope,c.restricted=W(c.restricted)?!!(s!=null&&s.includes(t)):c.restricted),!h[t].hasOwnProperty("included")||h[t].included?(this.configurationProperties[t]=h[t],!((r=h[t].policy)===null||r===void 0)&&r.name&&this.policyConfigurations.set(h[t].policy.name,t),!h[t].deprecationMessage&&h[t].markdownDeprecationMessage&&(h[t].deprecationMessage=h[t].markdownDeprecationMessage),o.add(t)):(this.excludedConfigurationProperties[t]=h[t],delete h[t]))}const c=t.allOf;if(c)for(const t of c)this.validateAndRegisterProperties(t,i,e,s,n,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(t){const i=t=>{const e=t.properties;if(e)for(const t in e)this.updateSchema(t,e[t]);const s=t.allOf;s==null||s.forEach(i)};i(t)}updateSchema(t,i){switch(i.scope){case 1:case 2:case 6:case 3:case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[t]=i}}updateOverridePropertyPatternKey(){for(const t of this.overrideIdentifiers.values()){const i=`[${t}]`,e={type:"object",description:st(0,"Configure editor settings to be overridden for a language."),errorMessage:st(0,"This setting does not support per-language configuration."),$ref:Vd};this.updatePropertyDefaultValue(i,e)}}registerOverridePropertyPatternKey(){st(0,"Configure editor settings to be overridden for a language."),st(0,"This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(t,i){const e=this.configurationDefaultsOverrides.get(t);let s=e==null?void 0:e.value,n=e==null?void 0:e.source;P(s)&&(s=i.defaultDefaultValue,n=void 0),P(s)&&(s=function(t){switch(Array.isArray(t)?t[0]:t){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(i.type)),i.default=s,i.defaultValueSource=n}};function Zd(t,i){var e,s,n,o;return t.trim()?$d.test(t)?st(0,"Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",t):qd.getConfigurationProperties()[t]!==void 0?st(0,"Cannot register '{0}'. This property is already registered.",t):!((e=i.policy)===null||e===void 0)&&e.name&&qd.getPolicyConfigurations().get((s=i.policy)===null||s===void 0?void 0:s.name)!==void 0?st(0,"Cannot register '{0}'. The associated policy {1} is already registered with {2}.",t,(n=i.policy)===null||n===void 0?void 0:n.name,qd.getPolicyConfigurations().get((o=i.policy)===null||o===void 0?void 0:o.name)):null:st(0,"Cannot register an empty property")}Vl.add(_d,qd);const tf=new class{constructor(){this._onDidChangeLanguages=new de,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(t){return this._languages.push(t),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let i=0,e=this._languages.length;i<e;i++)if(this._languages[i]===t)return void this._languages.splice(i,1)}}}getLanguages(){return this._languages}};Vl.add("editor.modesRegistry",tf);const ef="plaintext";tf.registerLanguage({id:ef,extensions:[".txt"],aliases:[st(0,"Plain Text"),"text"],mimetypes:[jd.text]}),Vl.as(_d).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class sf{constructor(t,i){this.languageId=t;const e=i.brackets?nf(i.brackets):[],s=new Yn((t=>{const i=new Set;return{info:new rf(this,t,i),closing:i}})),n=new Yn((t=>{const i=new Set,e=new Set;return{info:new hf(this,t,i,e),opening:i,openingColorized:e}}));for(const[t,i]of e){const e=s.get(t),o=n.get(i);e.closing.add(o.info),o.opening.add(e.info)}const o=i.colorizedBracketPairs?nf(i.colorizedBracketPairs):e.filter((t=>!(t[0]==="<"&&t[1]===">")));for(const[t,i]of o){const e=s.get(t),o=n.get(i);e.closing.add(o.info),o.openingColorized.add(e.info),o.opening.add(e.info)}this._openingBrackets=new Map([...s.cachedValues].map((([t,i])=>[t,i.info]))),this._closingBrackets=new Map([...n.cachedValues].map((([t,i])=>[t,i.info])))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(t){return this._openingBrackets.get(t)}getClosingBracketInfo(t){return this._closingBrackets.get(t)}getBracketInfo(t){return this.getOpeningBracketInfo(t)||this.getClosingBracketInfo(t)}}function nf(t){return t.filter((([t,i])=>t!==""&&i!==""))}class of{constructor(t,i){this.config=t,this.bracketText=i}get languageId(){return this.config.languageId}}class rf extends of{constructor(t,i,e){super(t,i),this.openedBrackets=e,this.isOpeningBracket=!0}}class hf extends of{constructor(t,i,e,s){super(t,i),this.openingBrackets=e,this.openingColorizedBrackets=s,this.isOpeningBracket=!1}closes(t){return t.config===this.config&&this.openingBrackets.has(t)}closesColorized(t){return t.config===this.config&&this.openingColorizedBrackets.has(t)}getOpeningBrackets(){return[...this.openingBrackets]}}var cf=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},af=function(t,i){return function(e,s){i(e,s,t)}};class lf{constructor(t){this.languageId=t}affects(t){return!this.languageId||this.languageId===t}}const uf=za("languageConfigurationService");let df=class extends te{constructor(t,i){super(),this.configurationService=t,this.languageService=i,this._registry=this._register(new yf),this.onDidChangeEmitter=this._register(new de),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const e=new Set(Object.values(ff));this._register(this.configurationService.onDidChangeConfiguration((t=>{const i=t.change.keys.some((t=>e.has(t))),s=t.change.overrides.filter((([t,i])=>i.some((t=>e.has(t))))).map((([t])=>t));if(i)this.configurations.clear(),this.onDidChangeEmitter.fire(new lf(void 0));else for(const t of s)this.languageService.isRegisteredLanguageId(t)&&(this.configurations.delete(t),this.onDidChangeEmitter.fire(new lf(t)))}))),this._register(this._registry.onDidChange((t=>{this.configurations.delete(t.languageId),this.onDidChangeEmitter.fire(new lf(t.languageId))})))}register(t,i,e){return this._registry.register(t,i,e)}getLanguageConfiguration(t){let i=this.configurations.get(t);return i||(i=function(t,i,e,s){let n=i.getLanguageConfiguration(t);if(!n){if(!s.isRegisteredLanguageId(t))return new kf(t,{});n=new kf(t,{})}const o=function(t,i){const e=i.getValue(ff.brackets,{overrideIdentifier:t}),s=i.getValue(ff.colorizedBracketPairs,{overrideIdentifier:t});return{brackets:gf(e),colorizedBracketPairs:gf(s)}}(n.languageId,e),r=mf([n.underlyingConfig,o]);return new kf(n.languageId,r)}(t,this._registry,this.configurationService,this.languageService),this.configurations.set(t,i)),i}};df=cf([af(0,Id),af(1,Od)],df);const ff={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function gf(t){if(Array.isArray(t))return t.map((t=>{if(Array.isArray(t)&&t.length===2)return[t[0],t[1]]})).filter((t=>!!t))}function Af(t,i,e){let s=no(t.getLineContent(i));return s.length>e-1&&(s=s.substring(0,e-1)),s}function pf(t,i,e){return t.tokenization.forceTokenization(i),qu(t.tokenization.getLineTokens(i),e===void 0?t.getLineMaxColumn(i)-1:e-1)}class wf{constructor(t){this.languageId=t,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(t,i){const e=new vf(t,i,++this._order);return this._entries.push(e),this._resolved=null,qi((()=>{for(let t=0;t<this._entries.length;t++)if(this._entries[t]===e){this._entries.splice(t,1),this._resolved=null;break}}))}getResolvedConfiguration(){if(!this._resolved){const t=this._resolve();t&&(this._resolved=new kf(this.languageId,t))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(vf.cmp),mf(this._entries.map((t=>t.configuration))))}}function mf(t){let i={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const e of t)i={comments:e.comments||i.comments,brackets:e.brackets||i.brackets,wordPattern:e.wordPattern||i.wordPattern,indentationRules:e.indentationRules||i.indentationRules,onEnterRules:e.onEnterRules||i.onEnterRules,autoClosingPairs:e.autoClosingPairs||i.autoClosingPairs,surroundingPairs:e.surroundingPairs||i.surroundingPairs,autoCloseBefore:e.autoCloseBefore||i.autoCloseBefore,folding:e.folding||i.folding,colorizedBracketPairs:e.colorizedBracketPairs||i.colorizedBracketPairs,__electricCharacterSupport:e.__electricCharacterSupport||i.__electricCharacterSupport};return i}class vf{constructor(t,i,e){this.configuration=t,this.priority=i,this.order=e}static cmp(t,i){return t.priority===i.priority?t.order-i.order:t.priority-i.priority}}class bf{constructor(t){this.languageId=t}}class yf extends te{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._register(this.register(ef,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(t,i,e=0){let s=this._entries.get(t);s||(s=new wf(t),this._entries.set(t,s));const n=s.register(i,e);return this._onDidChange.fire(new bf(t)),qi((()=>{n.dispose(),this._onDidChange.fire(new bf(t))}))}getLanguageConfiguration(t){const i=this._entries.get(t);return(i==null?void 0:i.getResolvedConfiguration())||null}}class kf{constructor(t,i){this.languageId=t,this.underlyingConfig=i,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Fd(this.underlyingConfig):null,this.comments=kf._handleComments(this.underlyingConfig),this.characterPair=new id(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||Jt,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new Sd(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new sf(t,this.underlyingConfig)}getWordDefinition(){return Gt(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new vd(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new Dd(this.brackets)),this._electricCharacter}onEnter(t,i,e,s){return this._onEnterSupport?this._onEnterSupport.onEnter(t,i,e,s):null}getAutoClosingPairs(){return new $u(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(t){return this.characterPair.getAutoCloseBeforeSet(t)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(t){const i=t.comments;if(!i)return null;const e={};if(i.lineComment&&(e.lineCommentToken=i.lineComment),i.blockComment){const[t,s]=i.blockComment;e.blockCommentStartToken=t,e.blockCommentEndToken=s}return e}}Hd(uf,df,1);class xf{constructor(t,i,e,s){this.originalStart=t,this.originalLength=i,this.modifiedStart=e,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class Cf{constructor(t){this.source=t}getElements(){const t=this.source,i=new Int32Array(t.length);for(let e=0,s=t.length;e<s;e++)i[e]=t.charCodeAt(e);return i}}function Ef(t,i,e){return new Sf(new Cf(t),new Cf(i)).ComputeDiff(e).changes}class Bf{static Assert(t,i){if(!t)throw new Error(i)}}class Df{static Copy(t,i,e,s,n){for(let o=0;o<n;o++)e[s+o]=t[i+o]}static Copy2(t,i,e,s,n){for(let o=0;o<n;o++)e[s+o]=t[i+o]}}class Mf{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new xf(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(t,i){this.m_originalStart=Math.min(this.m_originalStart,t),this.m_modifiedStart=Math.min(this.m_modifiedStart,i),this.m_originalCount++}AddModifiedElement(t,i){this.m_originalStart=Math.min(this.m_originalStart,t),this.m_modifiedStart=Math.min(this.m_modifiedStart,i),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Sf{constructor(t,i,e=null){this.ContinueProcessingPredicate=e,this._originalSequence=t,this._modifiedSequence=i;const[s,n,o]=Sf._getElements(t),[r,h,c]=Sf._getElements(i);this._hasStrings=o&&c,this._originalStringElements=s,this._originalElementsOrHash=n,this._modifiedStringElements=r,this._modifiedElementsOrHash=h,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(t){return t.length>0&&typeof t[0]=="string"}static _getElements(t){const i=t.getElements();if(Sf._isStringArray(i)){const t=new Int32Array(i.length);for(let e=0,s=i.length;e<s;e++)t[e]=jh(i[e],0);return[i,t,!0]}return i instanceof Int32Array?[[],i,!1]:[[],new Int32Array(i),!1]}ElementsAreEqual(t,i){return this._originalElementsOrHash[t]===this._modifiedElementsOrHash[i]&&(!this._hasStrings||this._originalStringElements[t]===this._modifiedStringElements[i])}ElementsAreStrictEqual(t,i){return this.ElementsAreEqual(t,i)?Sf._getStrictElement(this._originalSequence,t)===Sf._getStrictElement(this._modifiedSequence,i):!1}static _getStrictElement(t,i){return typeof t.getStrictElement=="function"?t.getStrictElement(i):null}OriginalElementsAreEqual(t,i){return this._originalElementsOrHash[t]===this._originalElementsOrHash[i]&&(!this._hasStrings||this._originalStringElements[t]===this._originalStringElements[i])}ModifiedElementsAreEqual(t,i){return this._modifiedElementsOrHash[t]===this._modifiedElementsOrHash[i]&&(!this._hasStrings||this._modifiedStringElements[t]===this._modifiedStringElements[i])}ComputeDiff(t){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,t)}_ComputeDiff(t,i,e,s,n){const o=[!1];let r=this.ComputeDiffRecursive(t,i,e,s,o);return n&&(r=this.PrettifyChanges(r)),{quitEarly:o[0],changes:r}}ComputeDiffRecursive(t,i,e,s,n){for(n[0]=!1;t<=i&&e<=s&&this.ElementsAreEqual(t,e);)t++,e++;for(;i>=t&&s>=e&&this.ElementsAreEqual(i,s);)i--,s--;if(t>i||e>s){let n;return e<=s?(Bf.Assert(t===i+1,"originalStart should only be one more than originalEnd"),n=[new xf(t,0,e,s-e+1)]):t<=i?(Bf.Assert(e===s+1,"modifiedStart should only be one more than modifiedEnd"),n=[new xf(t,i-t+1,e,0)]):(Bf.Assert(t===i+1,"originalStart should only be one more than originalEnd"),Bf.Assert(e===s+1,"modifiedStart should only be one more than modifiedEnd"),n=[]),n}const o=[0],r=[0],h=this.ComputeRecursionPoint(t,i,e,s,o,r,n),c=o[0],a=r[0];if(h!==null)return h;if(!n[0]){const o=this.ComputeDiffRecursive(t,c,e,a,n);let r=[];return r=n[0]?[new xf(c+1,i-(c+1)+1,a+1,s-(a+1)+1)]:this.ComputeDiffRecursive(c+1,i,a+1,s,n),this.ConcatenateChanges(o,r)}return[new xf(t,i-t+1,e,s-e+1)]}WALKTRACE(t,i,e,s,n,o,r,h,c,a,l,u,d,f,g,A,p,w){let m=null,v=null,b=new Mf,y=i,k=e,x=d[0]-A[0]-s,C=-1073741824,E=this.m_forwardHistory.length-1;do{const i=x+t;i===y||i<k&&c[i-1]<c[i+1]?(f=(l=c[i+1])-x-s,l<C&&b.MarkNextChange(),C=l,b.AddModifiedElement(l+1,f),x=i+1-t):(f=(l=c[i-1]+1)-x-s,l<C&&b.MarkNextChange(),C=l-1,b.AddOriginalElement(l,f+1),x=i-1-t),E>=0&&(t=(c=this.m_forwardHistory[E])[0],y=1,k=c.length-1)}while(--E>=-1);if(m=b.getReverseChanges(),w[0]){let t=d[0]+1,i=A[0]+1;if(m!==null&&m.length>0){const e=m[m.length-1];t=Math.max(t,e.getOriginalEnd()),i=Math.max(i,e.getModifiedEnd())}v=[new xf(t,u-t+1,i,g-i+1)]}else{b=new Mf,y=o,k=r,x=d[0]-A[0]-h,C=1073741824,E=p?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const t=x+n;t===y||t<k&&a[t-1]>=a[t+1]?(f=(l=a[t+1]-1)-x-h,l>C&&b.MarkNextChange(),C=l+1,b.AddOriginalElement(l+1,f+1),x=t+1-n):(f=(l=a[t-1])-x-h,l>C&&b.MarkNextChange(),C=l,b.AddModifiedElement(l+1,f+1),x=t-1-n),E>=0&&(n=(a=this.m_reverseHistory[E])[0],y=1,k=a.length-1)}while(--E>=-1);v=b.getChanges()}return this.ConcatenateChanges(m,v)}ComputeRecursionPoint(t,i,e,s,n,o,r){let h=0,c=0,a=0,l=0,u=0,d=0;t--,e--,n[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const f=i-t+(s-e),g=f+1,A=new Int32Array(g),p=new Int32Array(g),w=s-e,m=i-t,v=t-e,b=i-s,y=(m-w)%2==0;A[w]=t,p[m]=i,r[0]=!1;for(let k=1;k<=f/2+1;k++){let f=0,x=0;a=this.ClipDiagonalBound(w-k,k,w,g),l=this.ClipDiagonalBound(w+k,k,w,g);for(let t=a;t<=l;t+=2){h=t===a||t<l&&A[t-1]<A[t+1]?A[t+1]:A[t-1]+1,c=h-(t-w)-v;const e=h;for(;h<i&&c<s&&this.ElementsAreEqual(h+1,c+1);)h++,c++;if(A[t]=h,h+c>f+x&&(f=h,x=c),!y&&Math.abs(t-m)<=k-1&&h>=p[t])return n[0]=h,o[0]=c,e<=p[t]&&k<=1448?this.WALKTRACE(w,a,l,v,m,u,d,b,A,p,h,i,n,c,s,o,y,r):null}const C=(f-t+(x-e)-k)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(f,C))return r[0]=!0,n[0]=f,o[0]=x,C>0&&k<=1448?this.WALKTRACE(w,a,l,v,m,u,d,b,A,p,h,i,n,c,s,o,y,r):(t++,e++,[new xf(t,i-t+1,e,s-e+1)]);u=this.ClipDiagonalBound(m-k,k,m,g),d=this.ClipDiagonalBound(m+k,k,m,g);for(let f=u;f<=d;f+=2){h=f===u||f<d&&p[f-1]>=p[f+1]?p[f+1]-1:p[f-1],c=h-(f-m)-b;const g=h;for(;h>t&&c>e&&this.ElementsAreEqual(h,c);)h--,c--;if(p[f]=h,y&&Math.abs(f-w)<=k&&h<=A[f])return n[0]=h,o[0]=c,g>=A[f]&&k<=1448?this.WALKTRACE(w,a,l,v,m,u,d,b,A,p,h,i,n,c,s,o,y,r):null}if(k<=1447){let t=new Int32Array(l-a+2);t[0]=w-a+1,Df.Copy2(A,a,t,1,l-a+1),this.m_forwardHistory.push(t),t=new Int32Array(d-u+2),t[0]=m-u+1,Df.Copy2(p,u,t,1,d-u+1),this.m_reverseHistory.push(t)}}return this.WALKTRACE(w,a,l,v,m,u,d,b,A,p,h,i,n,c,s,o,y,r)}PrettifyChanges(t){for(let i=0;i<t.length;i++){const e=t[i],s=i<t.length-1?t[i+1].originalStart:this._originalElementsOrHash.length,n=i<t.length-1?t[i+1].modifiedStart:this._modifiedElementsOrHash.length,o=e.originalLength>0,r=e.modifiedLength>0;for(;e.originalStart+e.originalLength<s&&e.modifiedStart+e.modifiedLength<n&&(!o||this.OriginalElementsAreEqual(e.originalStart,e.originalStart+e.originalLength))&&(!r||this.ModifiedElementsAreEqual(e.modifiedStart,e.modifiedStart+e.modifiedLength));){const t=this.ElementsAreStrictEqual(e.originalStart,e.modifiedStart);if(this.ElementsAreStrictEqual(e.originalStart+e.originalLength,e.modifiedStart+e.modifiedLength)&&!t)break;e.originalStart++,e.modifiedStart++}const h=[null];i<t.length-1&&this.ChangesOverlap(t[i],t[i+1],h)&&(t[i]=h[0],t.splice(i+1,1),i--)}for(let i=t.length-1;i>=0;i--){const e=t[i];let s=0,n=0;if(i>0){const e=t[i-1];s=e.originalStart+e.originalLength,n=e.modifiedStart+e.modifiedLength}const o=e.originalLength>0,r=e.modifiedLength>0;let h=0,c=this._boundaryScore(e.originalStart,e.originalLength,e.modifiedStart,e.modifiedLength);for(let t=1;;t++){const i=e.originalStart-t,a=e.modifiedStart-t;if(i<s||a<n||o&&!this.OriginalElementsAreEqual(i,i+e.originalLength)||r&&!this.ModifiedElementsAreEqual(a,a+e.modifiedLength))break;const l=(i===s&&a===n?5:0)+this._boundaryScore(i,e.originalLength,a,e.modifiedLength);l>c&&(c=l,h=t)}e.originalStart-=h,e.modifiedStart-=h;const a=[null];i>0&&this.ChangesOverlap(t[i-1],t[i],a)&&(t[i-1]=a[0],t.splice(i,1),i++)}if(this._hasStrings)for(let i=1,e=t.length;i<e;i++){const e=t[i-1],s=t[i],n=s.originalStart-e.originalStart-e.originalLength,o=e.originalStart,r=s.originalStart+s.originalLength,h=r-o,c=e.modifiedStart,a=s.modifiedStart+s.modifiedLength,l=a-c;if(n<5&&h<20&&l<20){const t=this._findBetterContiguousSequence(o,h,c,l,n);if(t){const[i,o]=t;i===e.originalStart+e.originalLength&&o===e.modifiedStart+e.modifiedLength||(e.originalLength=i-e.originalStart,e.modifiedLength=o-e.modifiedStart,s.originalStart=i+n,s.modifiedStart=o+n,s.originalLength=r-s.originalStart,s.modifiedLength=a-s.modifiedStart)}}}return t}_findBetterContiguousSequence(t,i,e,s,n){if(i<n||s<n)return null;const o=t+i-n+1,r=e+s-n+1;let h=0,c=0,a=0;for(let i=t;i<o;i++)for(let t=e;t<r;t++){const e=this._contiguousSequenceScore(i,t,n);e>0&&e>h&&(h=e,c=i,a=t)}return h>0?[c,a]:null}_contiguousSequenceScore(t,i,e){let s=0;for(let n=0;n<e;n++){if(!this.ElementsAreEqual(t+n,i+n))return 0;s+=this._originalStringElements[t+n].length}return s}_OriginalIsBoundary(t){return t<=0||t>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[t])}_OriginalRegionIsBoundary(t,i){if(this._OriginalIsBoundary(t)||this._OriginalIsBoundary(t-1))return!0;if(i>0){const e=t+i;if(this._OriginalIsBoundary(e-1)||this._OriginalIsBoundary(e))return!0}return!1}_ModifiedIsBoundary(t){return t<=0||t>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[t])}_ModifiedRegionIsBoundary(t,i){if(this._ModifiedIsBoundary(t)||this._ModifiedIsBoundary(t-1))return!0;if(i>0){const e=t+i;if(this._ModifiedIsBoundary(e-1)||this._ModifiedIsBoundary(e))return!0}return!1}_boundaryScore(t,i,e,s){return(this._OriginalRegionIsBoundary(t,i)?1:0)+(this._ModifiedRegionIsBoundary(e,s)?1:0)}ConcatenateChanges(t,i){const e=[];if(t.length===0||i.length===0)return i.length>0?i:t;if(this.ChangesOverlap(t[t.length-1],i[0],e)){const s=new Array(t.length+i.length-1);return Df.Copy(t,0,s,0,t.length-1),s[t.length-1]=e[0],Df.Copy(i,1,s,t.length,i.length-1),s}{const e=new Array(t.length+i.length);return Df.Copy(t,0,e,0,t.length),Df.Copy(i,0,e,t.length,i.length),e}}ChangesOverlap(t,i,e){if(Bf.Assert(t.originalStart<=i.originalStart,"Left change is not less than or equal to right change"),Bf.Assert(t.modifiedStart<=i.modifiedStart,"Left change is not less than or equal to right change"),t.originalStart+t.originalLength>=i.originalStart||t.modifiedStart+t.modifiedLength>=i.modifiedStart){const s=t.originalStart;let n=t.originalLength;const o=t.modifiedStart;let r=t.modifiedLength;return t.originalStart+t.originalLength>=i.originalStart&&(n=i.originalStart+i.originalLength-t.originalStart),t.modifiedStart+t.modifiedLength>=i.modifiedStart&&(r=i.modifiedStart+i.modifiedLength-t.modifiedStart),e[0]=new xf(s,n,o,r),!0}return e[0]=null,!1}ClipDiagonalBound(t,i,e,s){if(t>=0&&t<s)return t;const n=i%2==0;return t<0?n===(e%2==0)?0:1:n===((s-e-1)%2==0)?s-1:s-2}}function Ff(t){return t<0?0:t>255?255:0|t}function If(t){return t<0?0:t>4294967295?4294967295:0|t}class Lf{constructor(t){this.values=t,this.prefixSum=new Uint32Array(t.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(t,i){t=If(t);const e=this.values,s=this.prefixSum,n=i.length;return n!==0&&(this.values=new Uint32Array(e.length+n),this.values.set(e.subarray(0,t),0),this.values.set(e.subarray(t),t+n),this.values.set(i,t),t-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=t-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(t,i){return t=If(t),i=If(i),this.values[t]!==i&&(this.values[t]=i,t-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=t-1),!0)}removeValues(t,i){t=If(t),i=If(i);const e=this.values,s=this.prefixSum;if(t>=e.length)return!1;const n=e.length-t;return i>=n&&(i=n),i!==0&&(this.values=new Uint32Array(e.length-i),this.values.set(e.subarray(0,t),0),this.values.set(e.subarray(t+i),t),this.prefixSum=new Uint32Array(this.values.length),t-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=t-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(t){return t<0?0:(t=If(t),this._getPrefixSum(t))}_getPrefixSum(t){if(t<=this.prefixSumValidIndex[0])return this.prefixSum[t];let i=this.prefixSumValidIndex[0]+1;i===0&&(this.prefixSum[0]=this.values[0],i++),t>=this.values.length&&(t=this.values.length-1);for(let e=i;e<=t;e++)this.prefixSum[e]=this.prefixSum[e-1]+this.values[e];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],t),this.prefixSum[t]}getIndexOf(t){t=Math.floor(t),this.getTotalSum();let i=0,e=this.values.length-1,s=0,n=0,o=0;for(;i<=e;)if(s=i+(e-i)/2|0,n=this.prefixSum[s],o=n-this.values[s],t<o)e=s-1;else{if(!(t>=n))break;i=s+1}return new Tf(s,t-o)}}class Rf{constructor(t){this._values=t,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(t){return this._ensureValid(),t===0?0:this._prefixSum[t-1]}getIndexOf(t){this._ensureValid();const i=this._indexBySum[t],e=i>0?this._prefixSum[i-1]:0;return new Tf(i,t-e)}removeValues(t,i){this._values.splice(t,i),this._invalidate(t)}insertValues(t,i){this._values=b(this._values,t,i),this._invalidate(t)}_invalidate(t){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,t-1)}_ensureValid(){if(!this._isValid){for(let t=this._validEndIndex+1,i=this._values.length;t<i;t++){const i=this._values[t],e=t>0?this._prefixSum[t-1]:0;this._prefixSum[t]=e+i;for(let s=0;s<i;s++)this._indexBySum[e+s]=t}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(t,i){this._values[t]!==i&&(this._values[t]=i,this._invalidate(t))}}class Tf{constructor(t,i){this.index=t,this.remainder=i,this._prefixSumIndexOfResultBrand=void 0,this.index=t,this.remainder=i}}class Nf{constructor(t,i,e,s){this._uri=t,this._lines=i,this._eol=e,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(t){t.eol&&t.eol!==this._eol&&(this._eol=t.eol,this._lineStarts=null);const i=t.changes;for(const t of i)this._acceptDeleteRange(t.range),this._acceptInsertText(new Cs(t.range.startLineNumber,t.range.startColumn),t.text);this._versionId=t.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const t=this._eol.length,i=this._lines.length,e=new Uint32Array(i);for(let s=0;s<i;s++)e[s]=this._lines[s].length+t;this._lineStarts=new Lf(e)}}_setLineText(t,i){this._lines[t]=i,this._lineStarts&&this._lineStarts.setValue(t,this._lines[t].length+this._eol.length)}_acceptDeleteRange(t){if(t.startLineNumber!==t.endLineNumber)this._setLineText(t.startLineNumber-1,this._lines[t.startLineNumber-1].substring(0,t.startColumn-1)+this._lines[t.endLineNumber-1].substring(t.endColumn-1)),this._lines.splice(t.startLineNumber,t.endLineNumber-t.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(t.startLineNumber,t.endLineNumber-t.startLineNumber);else{if(t.startColumn===t.endColumn)return;this._setLineText(t.startLineNumber-1,this._lines[t.startLineNumber-1].substring(0,t.startColumn-1)+this._lines[t.startLineNumber-1].substring(t.endColumn-1))}}_acceptInsertText(t,i){if(i.length===0)return;const e=eo(i);if(e.length===1)return void this._setLineText(t.lineNumber-1,this._lines[t.lineNumber-1].substring(0,t.column-1)+e[0]+this._lines[t.lineNumber-1].substring(t.column-1));e[e.length-1]+=this._lines[t.lineNumber-1].substring(t.column-1),this._setLineText(t.lineNumber-1,this._lines[t.lineNumber-1].substring(0,t.column-1)+e[0]);const s=new Uint32Array(e.length-1);for(let i=1;i<e.length;i++)this._lines.splice(t.lineNumber+i-1,0,e[i]),s[i-1]=e[i].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(t.lineNumber,s)}}class Qf{constructor(t){const i=Ff(t);this._defaultValue=i,this._asciiMap=Qf._createAsciiMap(i),this._map=new Map}static _createAsciiMap(t){const i=new Uint8Array(256);return i.fill(t),i}set(t,i){const e=Ff(i);t>=0&&t<256?this._asciiMap[t]=e:this._map.set(t,e)}get(t){return t>=0&&t<256?this._asciiMap[t]:this._map.get(t)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class Of{constructor(){this._actual=new Qf(0)}add(t){this._actual.set(t,1)}has(t){return this._actual.get(t)===1}clear(){return this._actual.clear()}}class zf{constructor(t,i,e){const s=new Uint8Array(t*i);for(let n=0,o=t*i;n<o;n++)s[n]=e;this._data=s,this.rows=t,this.cols=i}get(t,i){return this._data[t*this.cols+i]}set(t,i,e){this._data[t*this.cols+i]=e}}class Uf{constructor(t){let i=0,e=0;for(let s=0,n=t.length;s<n;s++){const[n,o,r]=t[s];o>i&&(i=o),n>e&&(e=n),r>e&&(e=r)}i++,e++;const s=new zf(e,i,0);for(let i=0,e=t.length;i<e;i++){const[e,n,o]=t[i];s.set(e,n,o)}this._states=s,this._maxCharCode=i}nextState(t,i){return i<0||i>=this._maxCharCode?0:this._states.get(t,i)}}let Hf=null,Pf=null;class jf{static _createLink(t,i,e,s,n){let o=n-1;do{const e=i.charCodeAt(o);if(t.get(e)!==2)break;o--}while(o>s);if(s>0){const t=i.charCodeAt(s-1),e=i.charCodeAt(o);(t===40&&e===41||t===91&&e===93||t===123&&e===125)&&o--}return{range:{startLineNumber:e,startColumn:s+1,endLineNumber:e,endColumn:o+2},url:i.substring(s,o+1)}}static computeLinks(t,i=function(){return Hf===null&&(Hf=new Uf([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Hf}()){const e=function(){if(Pf===null){Pf=new Qf(0);const t=` \t<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let i=0;i<t.length;i++)Pf.set(t.charCodeAt(i),1);const i=".,;:";for(let t=0;t<i.length;t++)Pf.set(i.charCodeAt(t),2)}return Pf}(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const o=t.getLineContent(n),r=o.length;let h=0,c=0,a=0,l=1,u=!1,d=!1,f=!1,g=!1;for(;h<r;){let t=!1;const r=o.charCodeAt(h);if(l===13){let i;switch(r){case 40:u=!0,i=0;break;case 41:i=u?0:1;break;case 91:f=!0,d=!0,i=0;break;case 93:f=!1,i=d?0:1;break;case 123:g=!0,i=0;break;case 125:i=g?0:1;break;case 39:case 34:case 96:i=a===r?1:a===39||a===34||a===96?0:1;break;case 42:i=a===42?1:0;break;case 124:i=a===124?1:0;break;case 32:i=f?0:1;break;default:i=e.get(r)}i===1&&(s.push(jf._createLink(e,o,n,c,h)),t=!0)}else if(l===12){let i;r===91?(d=!0,i=0):i=e.get(r),i===1?t=!0:l=13}else l=i.nextState(l,r),l===0&&(t=!0);t&&(l=1,u=!1,d=!1,g=!1,c=h+1,a=r),h++}l===13&&s.push(jf._createLink(e,o,n,c,r))}return s}}class Wf{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(t,i,e,s,n){if(t&&i){const e=this.doNavigateValueSet(i,n);if(e)return{range:t,value:e}}if(e&&s){const t=this.doNavigateValueSet(s,n);if(t)return{range:e,value:t}}return null}doNavigateValueSet(t,i){const e=this.numberReplace(t,i);return e!==null?e:this.textReplace(t,i)}numberReplace(t,i){const e=Math.pow(10,t.length-(t.lastIndexOf(".")+1));let s=Number(t);const n=parseFloat(t);return isNaN(s)||isNaN(n)||s!==n?null:s!==0||i?(s=Math.floor(s*e),s+=i?e:-e,String(s/e)):null}textReplace(t,i){return this.valueSetsReplace(this._defaultValueSet,t,i)}valueSetsReplace(t,i,e){let s=null;for(let n=0,o=t.length;s===null&&n<o;n++)s=this.valueSetReplace(t[n],i,e);return s}valueSetReplace(t,i,e){let s=t.indexOf(i);return s>=0?(s+=e?1:-1,s<0?s=t.length-1:s%=t.length,t[s]):null}}var Yf,_f;Wf.INSTANCE=new Wf;class Vf{constructor(t,i){this.uri=t,this.value=i}}class Jf{constructor(t,i){if(this[Yf]="ResourceMap",t instanceof Jf)this.map=new Map(t.map),this.toKey=i??Jf.defaultToKey;else if(function(t){return Array.isArray(t)}(t)){this.map=new Map,this.toKey=i??Jf.defaultToKey;for(const[i,e]of t)this.set(i,e)}else this.map=new Map,this.toKey=t??Jf.defaultToKey}set(t,i){return this.map.set(this.toKey(t),new Vf(t,i)),this}get(t){var i;return(i=this.map.get(this.toKey(t)))===null||i===void 0?void 0:i.value}has(t){return this.map.has(this.toKey(t))}get size(){return this.map.size}clear(){this.map.clear()}delete(t){return this.map.delete(this.toKey(t))}forEach(t,i){i!==void 0&&(t=t.bind(i));for(const[i,e]of this.map)t(e.value,e.uri,this)}*values(){for(const t of this.map.values())yield t.value}*keys(){for(const t of this.map.values())yield t.uri}*entries(){for(const t of this.map.values())yield[t.uri,t.value]}*[(Yf=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.map)yield[t.uri,t.value]}}Jf.defaultToKey=t=>t.toString();class Gf{constructor(){this[_f]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var t;return(t=this._head)===null||t===void 0?void 0:t.value}get last(){var t;return(t=this._tail)===null||t===void 0?void 0:t.value}has(t){return this._map.has(t)}get(t,i=0){const e=this._map.get(t);if(e)return i!==0&&this.touch(e,i),e.value}set(t,i,e=0){let s=this._map.get(t);if(s)s.value=i,e!==0&&this.touch(s,e);else{switch(s={key:t,value:i,next:void 0,previous:void 0},e){case 0:case 2:default:this.addItemLast(s);break;case 1:this.addItemFirst(s)}this._map.set(t,s),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){const i=this._map.get(t);if(i)return this._map.delete(t),this.removeItem(i),this._size--,i.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,i){const e=this._state;let s=this._head;for(;s;){if(i?t.bind(i)(s.value,s.key,this):t(s.value,s.key,this),this._state!==e)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const t=this,i=this._state;let e=this._head;const s={[Symbol.iterator]:()=>s,next(){if(t._state!==i)throw new Error("LinkedMap got modified during iteration.");if(e){const t={value:e.key,done:!1};return e=e.next,t}return{value:void 0,done:!0}}};return s}values(){const t=this,i=this._state;let e=this._head;const s={[Symbol.iterator]:()=>s,next(){if(t._state!==i)throw new Error("LinkedMap got modified during iteration.");if(e){const t={value:e.value,done:!1};return e=e.next,t}return{value:void 0,done:!0}}};return s}entries(){const t=this,i=this._state;let e=this._head;const s={[Symbol.iterator]:()=>s,next(){if(t._state!==i)throw new Error("LinkedMap got modified during iteration.");if(e){const t={value:[e.key,e.value],done:!1};return e=e.next,t}return{value:void 0,done:!0}}};return s}[(_f=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0)return void this.clear();let i=this._head,e=this.size;for(;i&&e>t;)this._map.delete(i.key),i=i.next,e--;this._head=i,this._size=e,i&&(i.previous=void 0),this._state++}addItemFirst(t){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");t.next=this._head,this._head.previous=t}else this._tail=t;this._head=t,this._state++}addItemLast(t){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");t.previous=this._tail,this._tail.next=t}else this._head=t;this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{const i=t.next,e=t.previous;if(!i||!e)throw new Error("Invalid list");i.previous=e,e.next=i}t.next=void 0,t.previous=void 0,this._state++}touch(t,i){if(!this._head||!this._tail)throw new Error("Invalid list");if(i===1||i===2){if(i===1){if(t===this._head)return;const i=t.next,e=t.previous;t===this._tail?(e.next=void 0,this._tail=e):(i.previous=e,e.next=i),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(i===2){if(t===this._tail)return;const i=t.next,e=t.previous;t===this._head?(i.previous=void 0,this._head=i):(i.previous=e,e.next=i),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){const t=[];return this.forEach(((i,e)=>{t.push([e,i])})),t}fromJSON(t){this.clear();for(const[i,e]of t)this.set(i,e)}}class Kf extends Gf{constructor(t,i=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,i),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get(t,i=2){return super.get(t,i)}peek(t){return super.get(t,0)}set(t,i){return super.set(t,i,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}class $f{constructor(t){if(this._m1=new Map,this._m2=new Map,t)for(const[i,e]of t)this.set(i,e)}clear(){this._m1.clear(),this._m2.clear()}set(t,i){this._m1.set(t,i),this._m2.set(i,t)}get(t){return this._m1.get(t)}getKey(t){return this._m2.get(t)}delete(t){const i=this._m1.get(t);return i!==void 0&&(this._m1.delete(t),this._m2.delete(i),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class Xf{constructor(){this.map=new Map}add(t,i){let e=this.map.get(t);e||(e=new Set,this.map.set(t,e)),e.add(i)}delete(t,i){const e=this.map.get(t);e&&(e.delete(i),e.size===0&&this.map.delete(t))}forEach(t,i){const e=this.map.get(t);e&&e.forEach(i)}get(t){return this.map.get(t)||new Set}}class qf extends Qf{constructor(t,i){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=i,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,e=t.length;i<e;i++)this.set(t.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(t,i){let e=null;for(const s of this._getIntlSegmenterWordsOnLine(t)){if(s.index>i)break;e=s}return e}findNextIntlWordAtOrAfterOffset(t,i){for(const e of this._getIntlSegmenterWordsOnLine(t))if(!(e.index<i))return e;return null}_getIntlSegmenterWordsOnLine(t){return this._segmenter?(this._cachedLine===t||(this._cachedLine=t,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(t))),this._cachedSegments):[]}_filterWordSegments(t){const i=[];for(const e of t)this._isWordLike(e)&&i.push(e);return i}_isWordLike(t){return!!t.isWordLike}}const Zf=new Kf(10);function tg(t,i){const e=`${t}/${i.join(",")}`;let s=Zf.get(e);return s||(s=new qf(t,i),Zf.set(e,s)),s}var ig,eg,sg;(function(t){t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=4]="Right",t[t.Full=7]="Full"})(ig||(ig={})),function(t){t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=3]="Right"}(eg||(eg={})),function(t){t[t.Both=0]="Both",t[t.Right=1]="Right",t[t.Left=2]="Left",t[t.None=3]="None"}(sg||(sg={}));class ng{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(t){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,0|t.tabSize),t.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,0|t.indentSize),this._indentSizeIsTabSize=!1),this.insertSpaces=!!t.insertSpaces,this.defaultEOL=0|t.defaultEOL,this.trimAutoWhitespace=!!t.trimAutoWhitespace,this.bracketPairColorizationOptions=t.bracketPairColorizationOptions}equals(t){return this.tabSize===t.tabSize&&this._indentSizeIsTabSize===t._indentSizeIsTabSize&&this.indentSize===t.indentSize&&this.insertSpaces===t.insertSpaces&&this.defaultEOL===t.defaultEOL&&this.trimAutoWhitespace===t.trimAutoWhitespace&&Z(this.bracketPairColorizationOptions,t.bracketPairColorizationOptions)}createChangeEvent(t){return{tabSize:this.tabSize!==t.tabSize,indentSize:this.indentSize!==t.indentSize,insertSpaces:this.insertSpaces!==t.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==t.trimAutoWhitespace}}}class og{constructor(t,i){this._findMatchBrand=void 0,this.range=t,this.matches=i}}class rg{constructor(t,i,e,s,n,o){this.identifier=t,this.range=i,this.text=e,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=n,this._isTracked=o}}class hg{constructor(t,i,e){this.regex=t,this.wordSeparators=i,this.simpleSearch=e}}class cg{constructor(t,i,e){this.reverseEdits=t,this.changes=i,this.trimAutoWhitespaceLineNumbers=e}}function ag(t){return!t.isTooLargeForSyncing()&&!t.isForSimpleWidget}class lg{constructor(t,i,e,s){this.searchString=t,this.isRegex=i,this.matchCase=e,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let t;t=this.isRegex?function(t){if(!t||t.length===0)return!1;for(let i=0,e=t.length;i<e;i++){const s=t.charCodeAt(i);if(s===10)return!0;if(s===92){if(i++,i>=e)break;const s=t.charCodeAt(i);if(s===110||s===114||s===87)return!0}}return!1}(this.searchString):this.searchString.indexOf(`\n`)>=0;let i=null;try{i=io(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:t,global:!0,unicode:!0})}catch{return null}if(!i)return null;let e=!this.isRegex&&!t;return e&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(e=this.matchCase),new hg(i,this.wordSeparators?tg(this.wordSeparators,[]):null,e?this.searchString:null)}}function ug(t,i,e){if(!e)return new og(t,null);const s=[];for(let t=0,e=i.length;t<e;t++)s[t]=i[t];return new og(t,s)}class dg{constructor(t){const i=[];let e=0;for(let s=0,n=t.length;s<n;s++)t.charCodeAt(s)===10&&(i[e++]=s);this._lineFeedsOffsets=i}findLineFeedCountBeforeOffset(t){const i=this._lineFeedsOffsets;let e=0,s=i.length-1;if(s===-1||t<=i[0])return 0;for(;e<s;){const n=e+((s-e)/2|0);i[n]>=t?s=n-1:i[n+1]>=t?(e=n,s=n):e=n+1}return e+1}}class fg{static findMatches(t,i,e,s,n){const o=i.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(t,e,new Ag(o.wordSeparators,o.regex),s,n):this._doFindMatchesLineByLine(t,e,o,s,n):[]}static _getMultilineMatchRange(t,i,e,s,n,o){let r,h,c=0;if(s?(c=s.findLineFeedCountBeforeOffset(n),r=i+n+c):r=i+n,s){const t=s.findLineFeedCountBeforeOffset(n+o.length)-c;h=r+o.length+t}else h=r+o.length;const a=t.getPositionAt(r),l=t.getPositionAt(h);return new Es(a.lineNumber,a.column,l.lineNumber,l.column)}static _doFindMatchesMultiline(t,i,e,s,n){const o=t.getOffsetAt(i.getStartPosition()),r=t.getValueInRange(i,1),h=t.getEOL()===`\r\n`?new dg(r):null,c=[];let a,l=0;for(e.reset(0);a=e.next(r);)if(c[l++]=ug(this._getMultilineMatchRange(t,o,r,h,a.index,a[0]),a,s),l>=n)return c;return c}static _doFindMatchesLineByLine(t,i,e,s,n){const o=[];let r=0;if(i.startLineNumber===i.endLineNumber){const h=t.getLineContent(i.startLineNumber).substring(i.startColumn-1,i.endColumn-1);return r=this._findMatchesInLine(e,h,i.startLineNumber,i.startColumn-1,r,o,s,n),o}const h=t.getLineContent(i.startLineNumber).substring(i.startColumn-1);r=this._findMatchesInLine(e,h,i.startLineNumber,i.startColumn-1,r,o,s,n);for(let h=i.startLineNumber+1;h<i.endLineNumber&&r<n;h++)r=this._findMatchesInLine(e,t.getLineContent(h),h,0,r,o,s,n);if(r<n){const h=t.getLineContent(i.endLineNumber).substring(0,i.endColumn-1);r=this._findMatchesInLine(e,h,i.endLineNumber,0,r,o,s,n)}return o}static _findMatchesInLine(t,i,e,s,n,o,r,h){const c=t.wordSeparators;if(!r&&t.simpleSearch){const r=t.simpleSearch,a=r.length,l=i.length;let u=-a;for(;(u=i.indexOf(r,u+a))!==-1;)if((!c||gg(c,i,l,u,a))&&(o[n++]=new og(new Es(e,u+1+s,e,u+1+a+s),null),n>=h))return n;return n}const a=new Ag(t.wordSeparators,t.regex);let l;a.reset(0);do{if(l=a.next(i),l&&(o[n++]=ug(new Es(e,l.index+1+s,e,l.index+1+l[0].length+s),l,r),n>=h))return n}while(l);return n}static findNextMatch(t,i,e,s){const n=i.parseSearchRequest();if(!n)return null;const o=new Ag(n.wordSeparators,n.regex);return n.regex.multiline?this._doFindNextMatchMultiline(t,e,o,s):this._doFindNextMatchLineByLine(t,e,o,s)}static _doFindNextMatchMultiline(t,i,e,s){const n=new Cs(i.lineNumber,1),o=t.getOffsetAt(n),r=t.getLineCount(),h=t.getValueInRange(new Es(n.lineNumber,n.column,r,t.getLineMaxColumn(r)),1),c=t.getEOL()===`\r\n`?new dg(h):null;e.reset(i.column-1);const a=e.next(h);return a?ug(this._getMultilineMatchRange(t,o,h,c,a.index,a[0]),a,s):i.lineNumber!==1||i.column!==1?this._doFindNextMatchMultiline(t,new Cs(1,1),e,s):null}static _doFindNextMatchLineByLine(t,i,e,s){const n=t.getLineCount(),o=i.lineNumber,r=t.getLineContent(o),h=this._findFirstMatchInLine(e,r,o,i.column,s);if(h)return h;for(let i=1;i<=n;i++){const r=(o+i-1)%n,h=t.getLineContent(r+1),c=this._findFirstMatchInLine(e,h,r+1,1,s);if(c)return c}return null}static _findFirstMatchInLine(t,i,e,s,n){t.reset(s-1);const o=t.next(i);return o?ug(new Es(e,o.index+1,e,o.index+1+o[0].length),o,n):null}static findPreviousMatch(t,i,e,s){const n=i.parseSearchRequest();if(!n)return null;const o=new Ag(n.wordSeparators,n.regex);return n.regex.multiline?this._doFindPreviousMatchMultiline(t,e,o,s):this._doFindPreviousMatchLineByLine(t,e,o,s)}static _doFindPreviousMatchMultiline(t,i,e,s){const n=this._doFindMatchesMultiline(t,new Es(1,1,i.lineNumber,i.column),e,s,9990);if(n.length>0)return n[n.length-1];const o=t.getLineCount();return i.lineNumber!==o||i.column!==t.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(t,new Cs(o,t.getLineMaxColumn(o)),e,s):null}static _doFindPreviousMatchLineByLine(t,i,e,s){const n=t.getLineCount(),o=i.lineNumber,r=t.getLineContent(o).substring(0,i.column-1),h=this._findLastMatchInLine(e,r,o,s);if(h)return h;for(let i=1;i<=n;i++){const r=(n+o-i-1)%n,h=t.getLineContent(r+1),c=this._findLastMatchInLine(e,h,r+1,s);if(c)return c}return null}static _findLastMatchInLine(t,i,e,s){let n,o=null;for(t.reset(0);n=t.next(i);)o=ug(new Es(e,n.index+1,e,n.index+1+n[0].length),n,s);return o}}function gg(t,i,e,s,n){return function(t,i,e,s,n){if(s===0)return!0;const o=i.charCodeAt(s-1);if(t.get(o)!==0||o===13||o===10)return!0;if(n>0){const e=i.charCodeAt(s);if(t.get(e)!==0)return!0}return!1}(t,i,0,s,n)&&function(t,i,e,s,n){if(s+n===e)return!0;const o=i.charCodeAt(s+n);if(t.get(o)!==0||o===13||o===10)return!0;if(n>0){const e=i.charCodeAt(s+n-1);if(t.get(e)!==0)return!0}return!1}(t,i,e,s,n)}class Ag{constructor(t,i){this._wordSeparators=t,this._searchRegex=i,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(t){this._searchRegex.lastIndex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(t){const i=t.length;let e;do{if(this._prevMatchStartIndex+this._prevMatchLength===i||(e=this._searchRegex.exec(t),!e))return null;const s=e.index,n=e[0].length;if(s===this._prevMatchStartIndex&&n===this._prevMatchLength){if(n===0){yo(t,i,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=n,!this._wordSeparators||gg(this._wordSeparators,t,i,s,n))return e}while(e);return null}}class pg{static computeUnicodeHighlights(t,i,e){const s=e?e.startLineNumber:1,n=e?e.endLineNumber:t.getLineCount(),o=new wg(i),r=o.getCandidateCodePoints();let h;h=r==="allNonBasicAscii"?new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):new RegExp(`[${Xn(Array.from(r).map((t=>String.fromCodePoint(t))).join(""))}]`,"g");const c=new Ag(null,h),a=[];let l,u=!1,d=0,f=0,g=0;t:for(let i=s,e=n;i<=e;i++){const e=t.getLineContent(i),s=e.length;c.reset(0);do{if(l=c.next(e),l){let t=l.index,n=l.index+l[0].length;t>0&&mo(e.charCodeAt(t-1))&&t--,n+1<s&&mo(e.charCodeAt(n-1))&&n++;const r=e.substring(t,n);let h=$t(t+1,Jt,e,0);h&&h.endColumn<=t+1&&(h=null);const c=o.shouldHighlightNonBasicASCII(r,h?h.word:null);if(c!==0){if(c===3?d++:c===2?f++:c===1?g++:jl(),a.length>=1e3){u=!0;break t}a.push(new Es(i,t+1,i,n+1))}}}while(l)}return{ranges:a,hasMore:u,ambiguousCharacterCount:d,invisibleCharacterCount:f,nonBasicAsciiCharacterCount:g}}static computeUnicodeHighlightReason(t,i){const e=new wg(i);switch(e.shouldHighlightNonBasicASCII(t,null)){case 0:return null;case 2:return{kind:1};case 3:{const s=t.codePointAt(0),n=e.ambiguousCharacters.getPrimaryConfusable(s),o=Po.getLocales().filter((t=>!Po.getInstance(new Set([...i.allowedLocales,t])).isAmbiguous(s)));return{kind:0,confusableWith:String.fromCodePoint(n),notAmbiguousInLocales:o}}case 1:return{kind:2}}}}class wg{constructor(t){this.options=t,this.allowedCodePoints=new Set(t.allowedCodePoints),this.ambiguousCharacters=Po.getInstance(new Set(t.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const t=new Set;if(this.options.invisibleCharacters)for(const i of jo.codePoints)mg(String.fromCodePoint(i))||t.add(i);if(this.options.ambiguousCharacters)for(const i of this.ambiguousCharacters.getConfusableCodePoints())t.add(i);for(const i of this.allowedCodePoints)t.delete(i);return t}shouldHighlightNonBasicASCII(t,i){const e=t.codePointAt(0);if(this.allowedCodePoints.has(e))return 0;if(this.options.nonBasicASCII)return 1;let s=!1,n=!1;if(i)for(const t of i){const i=t.codePointAt(0),e=So(t);s=s||e,e||this.ambiguousCharacters.isAmbiguous(i)||jo.isInvisibleCharacter(i)||(n=!0)}return!s&&n?0:this.options.invisibleCharacters&&!mg(t)&&jo.isInvisibleCharacter(e)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(e)?3:0}}function mg(t){return t===" "||t===`\n`||t==="\t"}class vg{constructor(t,i,e){this.changes=t,this.moves=i,this.hitTimeout=e}}class bg{constructor(t,i){this.lineRangeMapping=t,this.changes=i}}class yg{static addRange(t,i){let e=0;for(;e<i.length&&i[e].endExclusive<t.start;)e++;let s=e;for(;s<i.length&&i[s].start<=t.endExclusive;)s++;if(e===s)i.splice(e,0,t);else{const n=Math.min(t.start,i[e].start),o=Math.max(t.endExclusive,i[s-1].endExclusive);i.splice(e,s-e,new yg(n,o))}}static tryCreate(t,i){if(!(t>i))return new yg(t,i)}static ofLength(t){return new yg(0,t)}static ofStartAndLength(t,i){return new yg(t,t+i)}constructor(t,i){if(this.start=t,this.endExclusive=i,t>i)throw new Ji(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(t){return new yg(this.start+t,this.endExclusive+t)}deltaStart(t){return new yg(this.start+t,this.endExclusive)}deltaEnd(t){return new yg(this.start,this.endExclusive+t)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(t){return this.start<=t&&t<this.endExclusive}join(t){return new yg(Math.min(this.start,t.start),Math.max(this.endExclusive,t.endExclusive))}intersect(t){const i=Math.max(this.start,t.start),e=Math.min(this.endExclusive,t.endExclusive);if(i<=e)return new yg(i,e)}intersects(t){return Math.max(this.start,t.start)<Math.min(this.endExclusive,t.endExclusive)}isBefore(t){return this.endExclusive<=t.start}isAfter(t){return this.start>=t.endExclusive}slice(t){return t.slice(this.start,this.endExclusive)}substring(t){return t.substring(this.start,this.endExclusive)}clip(t){if(this.isEmpty)throw new Ji(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,t))}clipCyclic(t){if(this.isEmpty)throw new Ji(`Invalid clipping range: ${this.toString()}`);return t<this.start?this.endExclusive-(this.start-t)%this.length:t>=this.endExclusive?this.start+(t-this.start)%this.length:t}forEach(t){for(let i=this.start;i<this.endExclusive;i++)t(i)}}class kg{constructor(){this._sortedRanges=[]}addRange(t){let i=0;for(;i<this._sortedRanges.length&&this._sortedRanges[i].endExclusive<t.start;)i++;let e=i;for(;e<this._sortedRanges.length&&this._sortedRanges[e].start<=t.endExclusive;)e++;if(i===e)this._sortedRanges.splice(i,0,t);else{const s=Math.min(t.start,this._sortedRanges[i].start),n=Math.max(t.endExclusive,this._sortedRanges[e-1].endExclusive);this._sortedRanges.splice(i,e-i,new yg(s,n))}}toString(){return this._sortedRanges.map((t=>t.toString())).join(", ")}intersectsStrict(t){let i=0;for(;i<this._sortedRanges.length&&this._sortedRanges[i].endExclusive<=t.start;)i++;return i<this._sortedRanges.length&&this._sortedRanges[i].start<t.endExclusive}intersectWithRange(t){const i=new kg;for(const e of this._sortedRanges){const s=e.intersect(t);s&&i.addRange(s)}return i}intersectWithRangeLength(t){return this.intersectWithRange(t).length}get length(){return this._sortedRanges.reduce(((t,i)=>t+i.length),0)}}function xg(t,i,e){const s=function(t,i,e=t.length-1){for(let s=e;s>=0;s--)if(i(t[s]))return s;return-1}(t,i);if(s!==-1)return t[s]}function Cg(t,i){const e=Eg(t,i);return e===-1?void 0:t[e]}function Eg(t,i,e=0,s=t.length){let n=e,o=s;for(;n<o;){const e=Math.floor((n+o)/2);i(t[e])?n=e+1:o=e}return n-1}function Bg(t,i,e=0,s=t.length){let n=e,o=s;for(;n<o;){const e=Math.floor((n+o)/2);i(t[e])?o=e:n=e+1}return n}class Dg{constructor(t){this._array=t,this._findLastMonotonousLastIdx=0}findLastMonotonous(t){if(Dg.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!t(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=t}const i=Eg(this._array,t,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=i+1,i===-1?void 0:this._array[i]}}function Mg(t,i){if(t.length===0)return;let e=t[0];for(let s=1;s<t.length;s++){const n=t[s];i(n,e)>0&&(e=n)}return e}function Sg(t,i){if(t.length===0)return-1;let e=0;for(let s=1;s<t.length;s++)i(t[s],t[e])>0&&(e=s);return e}Dg.assertInvariants=!1;let Fg=class t{static fromRangeInclusive(i){return new t(i.startLineNumber,i.endLineNumber+1)}static joinMany(t){if(t.length===0)return[];let i=new Ig(t[0].slice());for(let e=1;e<t.length;e++)i=i.getUnion(new Ig(t[e].slice()));return i.ranges}static join(i){if(i.length===0)throw new Ji("lineRanges cannot be empty");let e=i[0].startLineNumber,s=i[0].endLineNumberExclusive;for(let t=1;t<i.length;t++)e=Math.min(e,i[t].startLineNumber),s=Math.max(s,i[t].endLineNumberExclusive);return new t(e,s)}static ofLength(i,e){return new t(i,i+e)}static deserialize(i){return new t(i[0],i[1])}constructor(t,i){if(t>i)throw new Ji(`startLineNumber ${t} cannot be after endLineNumberExclusive ${i}`);this.startLineNumber=t,this.endLineNumberExclusive=i}contains(t){return this.startLineNumber<=t&&t<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(i){return new t(this.startLineNumber+i,this.endLineNumberExclusive+i)}deltaLength(i){return new t(this.startLineNumber,this.endLineNumberExclusive+i)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(i){return new t(Math.min(this.startLineNumber,i.startLineNumber),Math.max(this.endLineNumberExclusive,i.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(i){const e=Math.max(this.startLineNumber,i.startLineNumber),s=Math.min(this.endLineNumberExclusive,i.endLineNumberExclusive);if(e<=s)return new t(e,s)}intersectsStrict(t){return this.startLineNumber<t.endLineNumberExclusive&&t.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(t){return this.startLineNumber<=t.endLineNumberExclusive&&t.startLineNumber<=this.endLineNumberExclusive}equals(t){return this.startLineNumber===t.startLineNumber&&this.endLineNumberExclusive===t.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new Es(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new Es(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(t){const i=[];for(let e=this.startLineNumber;e<this.endLineNumberExclusive;e++)i.push(t(e));return i}forEach(t){for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t(i)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(t){return this.startLineNumber<=t&&t<this.endLineNumberExclusive}toOffsetRange(){return new yg(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class Ig{constructor(t=[]){this._normalizedRanges=t}get ranges(){return this._normalizedRanges}addRange(t){if(t.length===0)return;const i=Bg(this._normalizedRanges,(i=>i.endLineNumberExclusive>=t.startLineNumber)),e=Eg(this._normalizedRanges,(i=>i.startLineNumber<=t.endLineNumberExclusive))+1;if(i===e)this._normalizedRanges.splice(i,0,t);else if(i===e-1){const e=this._normalizedRanges[i];this._normalizedRanges[i]=e.join(t)}else{const s=this._normalizedRanges[i].join(this._normalizedRanges[e-1]).join(t);this._normalizedRanges.splice(i,e-i,s)}}contains(t){const i=Cg(this._normalizedRanges,(i=>i.startLineNumber<=t));return!!i&&i.endLineNumberExclusive>t}intersects(t){const i=Cg(this._normalizedRanges,(i=>i.startLineNumber<t.endLineNumberExclusive));return!!i&&i.endLineNumberExclusive>t.startLineNumber}getUnion(t){if(this._normalizedRanges.length===0)return t;if(t._normalizedRanges.length===0)return this;const i=[];let e=0,s=0,n=null;for(;e<this._normalizedRanges.length||s<t._normalizedRanges.length;){let o=null;if(e<this._normalizedRanges.length&&s<t._normalizedRanges.length){const i=this._normalizedRanges[e],n=t._normalizedRanges[s];i.startLineNumber<n.startLineNumber?(o=i,e++):(o=n,s++)}else e<this._normalizedRanges.length?(o=this._normalizedRanges[e],e++):(o=t._normalizedRanges[s],s++);n===null?n=o:n.endLineNumberExclusive>=o.startLineNumber?n=new Fg(n.startLineNumber,Math.max(n.endLineNumberExclusive,o.endLineNumberExclusive)):(i.push(n),n=o)}return n!==null&&i.push(n),new Ig(i)}subtractFrom(t){const i=Bg(this._normalizedRanges,(i=>i.endLineNumberExclusive>=t.startLineNumber)),e=Eg(this._normalizedRanges,(i=>i.startLineNumber<=t.endLineNumberExclusive))+1;if(i===e)return new Ig([t]);const s=[];let n=t.startLineNumber;for(let t=i;t<e;t++){const i=this._normalizedRanges[t];i.startLineNumber>n&&s.push(new Fg(n,i.startLineNumber)),n=i.endLineNumberExclusive}return n<t.endLineNumberExclusive&&s.push(new Fg(n,t.endLineNumberExclusive)),new Ig(s)}toString(){return this._normalizedRanges.map((t=>t.toString())).join(", ")}getIntersection(t){const i=[];let e=0,s=0;for(;e<this._normalizedRanges.length&&s<t._normalizedRanges.length;){const n=this._normalizedRanges[e],o=t._normalizedRanges[s],r=n.intersect(o);r&&!r.isEmpty&&i.push(r),n.endLineNumberExclusive<o.endLineNumberExclusive?e++:s++}return new Ig(i)}getWithDelta(t){return new Ig(this._normalizedRanges.map((i=>i.delta(t))))}}class Lg{static inverse(t,i,e){const s=[];let n=1,o=1;for(const i of t){const t=new Lg(new Fg(n,i.original.startLineNumber),new Fg(o,i.modified.startLineNumber));t.modified.isEmpty||s.push(t),n=i.original.endLineNumberExclusive,o=i.modified.endLineNumberExclusive}const r=new Lg(new Fg(n,i+1),new Fg(o,e+1));return r.modified.isEmpty||s.push(r),s}static clip(t,i,e){const s=[];for(const n of t){const t=n.original.intersect(i),o=n.modified.intersect(e);t&&!t.isEmpty&&o&&!o.isEmpty&&s.push(new Lg(t,o))}return s}constructor(t,i){this.original=t,this.modified=i}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new Lg(this.modified,this.original)}join(t){return new Lg(this.original.join(t.original),this.modified.join(t.modified))}}class Rg extends Lg{static fromRangeMappings(t){const i=Fg.join(t.map((t=>Fg.fromRangeInclusive(t.originalRange)))),e=Fg.join(t.map((t=>Fg.fromRangeInclusive(t.modifiedRange))));return new Rg(i,e,t)}constructor(t,i,e){super(t,i),this.innerChanges=e}flip(){var t;return new Rg(this.modified,this.original,(t=this.innerChanges)===null||t===void 0?void 0:t.map((t=>t.flip())))}withInnerChangesFromLineRanges(){return new Rg(this.original,this.modified,[new Tg(this.original.toExclusiveRange(),this.modified.toExclusiveRange())])}}class Tg{constructor(t,i){this.originalRange=t,this.modifiedRange=i}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new Tg(this.modifiedRange,this.originalRange)}}class Ng{computeDiff(t,i,e){var s;const n=new Pg(t,i,{maxComputationTime:e.maxComputationTimeMs,shouldIgnoreTrimWhitespace:e.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),o=[];let r=null;for(const t of n.changes){let i,e;i=t.originalEndLineNumber===0?new Fg(t.originalStartLineNumber+1,t.originalStartLineNumber+1):new Fg(t.originalStartLineNumber,t.originalEndLineNumber+1),e=t.modifiedEndLineNumber===0?new Fg(t.modifiedStartLineNumber+1,t.modifiedStartLineNumber+1):new Fg(t.modifiedStartLineNumber,t.modifiedEndLineNumber+1);let n=new Rg(i,e,(s=t.charChanges)===null||s===void 0?void 0:s.map((t=>new Tg(new Es(t.originalStartLineNumber,t.originalStartColumn,t.originalEndLineNumber,t.originalEndColumn),new Es(t.modifiedStartLineNumber,t.modifiedStartColumn,t.modifiedEndLineNumber,t.modifiedEndColumn)))));r&&(r.modified.endLineNumberExclusive!==n.modified.startLineNumber&&r.original.endLineNumberExclusive!==n.original.startLineNumber||(n=new Rg(r.original.join(n.original),r.modified.join(n.modified),r.innerChanges&&n.innerChanges?r.innerChanges.concat(n.innerChanges):void 0),o.pop())),o.push(n),r=n}return Yl((()=>_l(o,((t,i)=>i.original.startLineNumber-t.original.endLineNumberExclusive==i.modified.startLineNumber-t.modified.endLineNumberExclusive&&t.original.endLineNumberExclusive<i.original.startLineNumber&&t.modified.endLineNumberExclusive<i.modified.startLineNumber)))),new vg(o,[],n.quitEarly)}}function Qg(t,i,e,s){return new Sf(t,i,e).ComputeDiff(s)}let Og=class{constructor(t){const i=[],e=[];for(let s=0,n=t.length;s<n;s++)i[s]=jg(t[s],1),e[s]=Wg(t[s],1);this.lines=t,this._startColumns=i,this._endColumns=e}getElements(){const t=[];for(let i=0,e=this.lines.length;i<e;i++)t[i]=this.lines[i].substring(this._startColumns[i]-1,this._endColumns[i]-1);return t}getStrictElement(t){return this.lines[t]}getStartLineNumber(t){return t+1}getEndLineNumber(t){return t+1}createCharSequence(t,i,e){const s=[],n=[],o=[];let r=0;for(let h=i;h<=e;h++){const i=this.lines[h],c=t?this._startColumns[h]:1,a=t?this._endColumns[h]:i.length+1;for(let t=c;t<a;t++)s[r]=i.charCodeAt(t-1),n[r]=h+1,o[r]=t,r++;!t&&h<e&&(s[r]=10,n[r]=h+1,o[r]=i.length+1,r++)}return new zg(s,n,o)}};class zg{constructor(t,i,e){this._charCodes=t,this._lineNumbers=i,this._columns=e}toString(){return"["+this._charCodes.map(((t,i)=>(t===10?"\\n":String.fromCharCode(t))+`-(${this._lineNumbers[i]},${this._columns[i]})`)).join(", ")+"]"}_assertIndex(t,i){if(t<0||t>=i.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(t){return t>0&&t===this._lineNumbers.length?this.getEndLineNumber(t-1):(this._assertIndex(t,this._lineNumbers),this._lineNumbers[t])}getEndLineNumber(t){return t===-1?this.getStartLineNumber(t+1):(this._assertIndex(t,this._lineNumbers),this._charCodes[t]===10?this._lineNumbers[t]+1:this._lineNumbers[t])}getStartColumn(t){return t>0&&t===this._columns.length?this.getEndColumn(t-1):(this._assertIndex(t,this._columns),this._columns[t])}getEndColumn(t){return t===-1?this.getStartColumn(t+1):(this._assertIndex(t,this._columns),this._charCodes[t]===10?1:this._columns[t]+1)}}class Ug{constructor(t,i,e,s,n,o,r,h){this.originalStartLineNumber=t,this.originalStartColumn=i,this.originalEndLineNumber=e,this.originalEndColumn=s,this.modifiedStartLineNumber=n,this.modifiedStartColumn=o,this.modifiedEndLineNumber=r,this.modifiedEndColumn=h}static createFromDiffChange(t,i,e){const s=i.getStartLineNumber(t.originalStart),n=i.getStartColumn(t.originalStart),o=i.getEndLineNumber(t.originalStart+t.originalLength-1),r=i.getEndColumn(t.originalStart+t.originalLength-1),h=e.getStartLineNumber(t.modifiedStart),c=e.getStartColumn(t.modifiedStart),a=e.getEndLineNumber(t.modifiedStart+t.modifiedLength-1),l=e.getEndColumn(t.modifiedStart+t.modifiedLength-1);return new Ug(s,n,o,r,h,c,a,l)}}class Hg{constructor(t,i,e,s,n){this.originalStartLineNumber=t,this.originalEndLineNumber=i,this.modifiedStartLineNumber=e,this.modifiedEndLineNumber=s,this.charChanges=n}static createFromDiffResult(t,i,e,s,n,o,r){let h,c,a,l,u;if(i.originalLength===0?(h=e.getStartLineNumber(i.originalStart)-1,c=0):(h=e.getStartLineNumber(i.originalStart),c=e.getEndLineNumber(i.originalStart+i.originalLength-1)),i.modifiedLength===0?(a=s.getStartLineNumber(i.modifiedStart)-1,l=0):(a=s.getStartLineNumber(i.modifiedStart),l=s.getEndLineNumber(i.modifiedStart+i.modifiedLength-1)),o&&i.originalLength>0&&i.originalLength<20&&i.modifiedLength>0&&i.modifiedLength<20&&n()){const o=e.createCharSequence(t,i.originalStart,i.originalStart+i.originalLength-1),h=s.createCharSequence(t,i.modifiedStart,i.modifiedStart+i.modifiedLength-1);if(o.getElements().length>0&&h.getElements().length>0){let t=Qg(o,h,n,!0).changes;r&&(t=function(t){if(t.length<=1)return t;const i=[t[0]];let e=i[0];for(let s=1,n=t.length;s<n;s++){const n=t[s],o=n.originalStart-(e.originalStart+e.originalLength),r=n.modifiedStart-(e.modifiedStart+e.modifiedLength);Math.min(o,r)<3?(e.originalLength=n.originalStart+n.originalLength-e.originalStart,e.modifiedLength=n.modifiedStart+n.modifiedLength-e.modifiedStart):(i.push(n),e=n)}return i}(t)),u=[];for(let i=0,e=t.length;i<e;i++)u.push(Ug.createFromDiffChange(t[i],o,h))}}return new Hg(h,c,a,l,u)}}class Pg{constructor(t,i,e){this.shouldComputeCharChanges=e.shouldComputeCharChanges,this.shouldPostProcessCharChanges=e.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=e.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=e.shouldMakePrettyDiff,this.originalLines=t,this.modifiedLines=i,this.original=new Og(t),this.modified=new Og(i),this.continueLineDiff=Yg(e.maxComputationTime),this.continueCharDiff=Yg(e.maxComputationTime===0?0:Math.min(e.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const t=Qg(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),i=t.changes,e=t.quitEarly;if(this.shouldIgnoreTrimWhitespace){const t=[];for(let e=0,s=i.length;e<s;e++)t.push(Hg.createFromDiffResult(this.shouldIgnoreTrimWhitespace,i[e],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:e,changes:t}}const s=[];let n=0,o=0;for(let t=-1,e=i.length;t<e;t++){const r=t+1<e?i[t+1]:null,h=r?r.originalStart:this.originalLines.length,c=r?r.modifiedStart:this.modifiedLines.length;for(;n<h&&o<c;){const t=this.originalLines[n],i=this.modifiedLines[o];if(t!==i){{let e=jg(t,1),r=jg(i,1);for(;e>1&&r>1&&t.charCodeAt(e-2)===i.charCodeAt(r-2);)e--,r--;(e>1||r>1)&&this._pushTrimWhitespaceCharChange(s,n+1,1,e,o+1,1,r)}{let e=Wg(t,1),r=Wg(i,1);const h=t.length+1,c=i.length+1;for(;e<h&&r<c&&t.charCodeAt(e-1)===t.charCodeAt(r-1);)e++,r++;(e<h||r<c)&&this._pushTrimWhitespaceCharChange(s,n+1,e,h,o+1,r,c)}}n++,o++}r&&(s.push(Hg.createFromDiffResult(this.shouldIgnoreTrimWhitespace,r,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),n+=r.originalLength,o+=r.modifiedLength)}return{quitEarly:e,changes:s}}_pushTrimWhitespaceCharChange(t,i,e,s,n,o,r){if(this._mergeTrimWhitespaceCharChange(t,i,e,s,n,o,r))return;let h;this.shouldComputeCharChanges&&(h=[new Ug(i,e,i,s,n,o,n,r)]),t.push(new Hg(i,i,n,n,h))}_mergeTrimWhitespaceCharChange(t,i,e,s,n,o,r){const h=t.length;if(h===0)return!1;const c=t[h-1];return c.originalEndLineNumber!==0&&c.modifiedEndLineNumber!==0&&(c.originalEndLineNumber===i&&c.modifiedEndLineNumber===n?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Ug(i,e,i,s,n,o,n,r)),!0):c.originalEndLineNumber+1===i&&c.modifiedEndLineNumber+1===n&&(c.originalEndLineNumber=i,c.modifiedEndLineNumber=n,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Ug(i,e,i,s,n,o,n,r)),!0))}}function jg(t,i){const e=so(t);return e===-1?i:e+1}function Wg(t,i){const e=oo(t);return e===-1?i:e+2}function Yg(t){if(t===0)return()=>!0;const i=Date.now();return()=>Date.now()-i<t}class _g{static trivial(t,i){return new _g([new Vg(yg.ofLength(t.length),yg.ofLength(i.length))],!1)}static trivialTimedOut(t,i){return new _g([new Vg(yg.ofLength(t.length),yg.ofLength(i.length))],!0)}constructor(t,i){this.diffs=t,this.hitTimeout=i}}class Vg{static invert(t,i){const e=[];return d(t,((t,s)=>{e.push(Vg.fromOffsetPairs(t?t.getEndExclusives():Jg.zero,s?s.getStarts():new Jg(i,(t?t.seq2Range.endExclusive-t.seq1Range.endExclusive:0)+i)))})),e}static fromOffsetPairs(t,i){return new Vg(new yg(t.offset1,i.offset1),new yg(t.offset2,i.offset2))}constructor(t,i){this.seq1Range=t,this.seq2Range=i}swap(){return new Vg(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(t){return new Vg(this.seq1Range.join(t.seq1Range),this.seq2Range.join(t.seq2Range))}delta(t){return t===0?this:new Vg(this.seq1Range.delta(t),this.seq2Range.delta(t))}deltaStart(t){return t===0?this:new Vg(this.seq1Range.deltaStart(t),this.seq2Range.deltaStart(t))}deltaEnd(t){return t===0?this:new Vg(this.seq1Range.deltaEnd(t),this.seq2Range.deltaEnd(t))}intersect(t){const i=this.seq1Range.intersect(t.seq1Range),e=this.seq2Range.intersect(t.seq2Range);if(i&&e)return new Vg(i,e)}getStarts(){return new Jg(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new Jg(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}class Jg{constructor(t,i){this.offset1=t,this.offset2=i}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(t){return t===0?this:new Jg(this.offset1+t,this.offset2+t)}equals(t){return this.offset1===t.offset1&&this.offset2===t.offset2}}Jg.zero=new Jg(0,0),Jg.max=new Jg(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);class Gg{isValid(){return!0}}Gg.instance=new Gg;class Kg{constructor(t){if(this.timeout=t,this.startTime=Date.now(),this.valid=!0,t<=0)throw new Ji("timeout must be positive")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}}class $g{constructor(t,i){this.width=t,this.height=i,this.array=[],this.array=new Array(t*i)}get(t,i){return this.array[t+i*this.width]}set(t,i,e){this.array[t+i*this.width]=e}}function Xg(t){return t===32||t===9}class qg{static getKey(t){let i=this.chrKeys.get(t);return i===void 0&&(i=this.chrKeys.size,this.chrKeys.set(t,i)),i}constructor(t,i,e){this.range=t,this.lines=i,this.source=e,this.histogram=[];let s=0;for(let e=t.startLineNumber-1;e<t.endLineNumberExclusive-1;e++){const t=i[e];for(let i=0;i<t.length;i++){s++;const e=t[i],n=qg.getKey(e);this.histogram[n]=(this.histogram[n]||0)+1}s++;const n=qg.getKey(`\n`);this.histogram[n]=(this.histogram[n]||0)+1}this.totalCount=s}computeSimilarity(t){var i,e;let s=0;const n=Math.max(this.histogram.length,t.histogram.length);for(let o=0;o<n;o++)s+=Math.abs(((i=this.histogram[o])!==null&&i!==void 0?i:0)-((e=t.histogram[o])!==null&&e!==void 0?e:0));return 1-s/(this.totalCount+t.totalCount)}}qg.chrKeys=new Map;class Zg{compute(t,i,e=Gg.instance,s){if(t.length===0||i.length===0)return _g.trivial(t,i);const n=new $g(t.length,i.length),o=new $g(t.length,i.length),r=new $g(t.length,i.length);for(let h=0;h<t.length;h++)for(let c=0;c<i.length;c++){if(!e.isValid())return _g.trivialTimedOut(t,i);const a=h===0?0:n.get(h-1,c),l=c===0?0:n.get(h,c-1);let u;t.getElement(h)===i.getElement(c)?(u=h===0||c===0?0:n.get(h-1,c-1),h>0&&c>0&&o.get(h-1,c-1)===3&&(u+=r.get(h-1,c-1)),u+=s?s(h,c):1):u=-1;const d=Math.max(a,l,u);if(d===u){const t=h>0&&c>0?r.get(h-1,c-1):0;r.set(h,c,t+1),o.set(h,c,3)}else d===a?(r.set(h,c,0),o.set(h,c,1)):d===l&&(r.set(h,c,0),o.set(h,c,2));n.set(h,c,d)}const h=[];let c=t.length,a=i.length;function l(t,i){t+1===c&&i+1===a||h.push(new Vg(new yg(t+1,c),new yg(i+1,a))),c=t,a=i}let u=t.length-1,d=i.length-1;for(;u>=0&&d>=0;)o.get(u,d)===3?(l(u,d),u--,d--):o.get(u,d)===1?u--:d--;return l(-1,-1),h.reverse(),new _g(h,!1)}}class tA{compute(t,i,e=Gg.instance){if(t.length===0||i.length===0)return _g.trivial(t,i);const s=t,n=i;function o(t,i){for(;t<s.length&&i<n.length&&s.getElement(t)===n.getElement(i);)t++,i++;return t}let r=0;const h=new eA;h.set(0,o(0,0));const c=new sA;c.set(0,h.get(0)===0?null:new iA(null,0,0,h.get(0)));let a=0;t:for(;;){if(r++,!e.isValid())return _g.trivialTimedOut(s,n);const t=-Math.min(r,n.length+r%2),i=Math.min(r,s.length+r%2);for(a=t;a<=i;a+=2){const e=a===i?-1:h.get(a+1),r=a===t?-1:h.get(a-1)+1,l=Math.min(Math.max(e,r),s.length),u=l-a;if(l>s.length||u>n.length)continue;const d=o(l,u);h.set(a,d);const f=l===e?c.get(a+1):c.get(a-1);if(c.set(a,d!==l?new iA(f,l,u,d-l):f),h.get(a)===s.length&&h.get(a)-a===n.length)break t}}let l=c.get(a);const u=[];let d=s.length,f=n.length;for(;;){const t=l?l.x+l.length:0,i=l?l.y+l.length:0;if(t===d&&i===f||u.push(new Vg(new yg(t,d),new yg(i,f))),!l)break;d=l.x,f=l.y,l=l.prev}return u.reverse(),new _g(u,!1)}}class iA{constructor(t,i,e,s){this.prev=t,this.x=i,this.y=e,this.length=s}}class eA{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(t){return t<0?(t=-t-1,this.negativeArr[t]):this.positiveArr[t]}set(t,i){if(t<0){if((t=-t-1)>=this.negativeArr.length){const t=this.negativeArr;this.negativeArr=new Int32Array(2*t.length),this.negativeArr.set(t)}this.negativeArr[t]=i}else{if(t>=this.positiveArr.length){const t=this.positiveArr;this.positiveArr=new Int32Array(2*t.length),this.positiveArr.set(t)}this.positiveArr[t]=i}}}class sA{constructor(){this.positiveArr=[],this.negativeArr=[]}get(t){return t<0?(t=-t-1,this.negativeArr[t]):this.positiveArr[t]}set(t,i){t<0?(t=-t-1,this.negativeArr[t]=i):this.positiveArr[t]=i}}class nA{constructor(t,i,e){this.lines=t,this.considerWhitespaceChanges=e,this.elements=[],this.firstCharOffsetByLine=[],this.additionalOffsetByLine=[];let s=!1;i.start>0&&i.endExclusive>=t.length&&(i=new yg(i.start-1,i.endExclusive),s=!0),this.lineRange=i,this.firstCharOffsetByLine[0]=0;for(let i=this.lineRange.start;i<this.lineRange.endExclusive;i++){let n=t[i],o=0;if(s)o=n.length,n="",s=!1;else if(!e){const t=n.trimStart();o=n.length-t.length,n=t.trimEnd()}this.additionalOffsetByLine.push(o);for(let t=0;t<n.length;t++)this.elements.push(n.charCodeAt(t));i<t.length-1&&(this.elements.push(10),this.firstCharOffsetByLine[i-this.lineRange.start+1]=this.elements.length)}this.additionalOffsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new yg(0,this.length))}getText(t){return this.elements.slice(t.start,t.endExclusive).map((t=>String.fromCharCode(t))).join("")}getElement(t){return this.elements[t]}get length(){return this.elements.length}getBoundaryScore(t){const i=cA(t>0?this.elements[t-1]:-1),e=cA(t<this.elements.length?this.elements[t]:-1);if(i===7&&e===8)return 0;if(i===8)return 150;let s=0;return i!==e&&(s+=10,i===0&&e===1&&(s+=1)),s+=hA(i),s+=hA(e),s}translateOffset(t){if(this.lineRange.isEmpty)return new Cs(this.lineRange.start+1,1);const i=Eg(this.firstCharOffsetByLine,(i=>i<=t));return new Cs(this.lineRange.start+i+1,t-this.firstCharOffsetByLine[i]+this.additionalOffsetByLine[i]+1)}translateRange(t){return Es.fromPositions(this.translateOffset(t.start),this.translateOffset(t.endExclusive))}findWordContaining(t){if(t<0||t>=this.elements.length||!oA(this.elements[t]))return;let i=t;for(;i>0&&oA(this.elements[i-1]);)i--;let e=t;for(;e<this.elements.length&&oA(this.elements[e]);)e++;return new yg(i,e)}countLinesIn(t){return this.translateOffset(t.endExclusive).lineNumber-this.translateOffset(t.start).lineNumber}isStronglyEqual(t,i){return this.elements[t]===this.elements[i]}extendToFullLines(t){var i,e;const s=(i=Cg(this.firstCharOffsetByLine,(i=>i<=t.start)))!==null&&i!==void 0?i:0,n=(e=function(t,i){const e=Bg(t,i);return e===t.length?void 0:t[e]}(this.firstCharOffsetByLine,(i=>t.endExclusive<=i)))!==null&&e!==void 0?e:this.elements.length;return new yg(s,n)}}function oA(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57}const rA={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function hA(t){return rA[t]}function cA(t){return t===10?8:t===13?7:Xg(t)?6:t>=97&&t<=122?0:t>=65&&t<=90?1:t>=48&&t<=57?2:t===-1?3:t===44||t===59?5:4}function aA(t,i,e,s,n,o){let{moves:r,excludedChanges:h}=function(t,i,e,s){const n=[],o=t.filter((t=>t.modified.isEmpty&&t.original.length>=3)).map((t=>new qg(t.original,i,t))),r=new Set(t.filter((t=>t.original.isEmpty&&t.modified.length>=3)).map((t=>new qg(t.modified,e,t)))),h=new Set;for(const t of o){let i,e=-1;for(const s of r){const n=t.computeSimilarity(s);n>e&&(e=n,i=s)}if(e>.9&&i&&(r.delete(i),n.push(new Lg(t.range,i.range)),h.add(t.source),h.add(i.source)),!s.isValid())return{moves:n,excludedChanges:h}}return{moves:n,excludedChanges:h}}(t,i,e,o);if(!o.isValid())return[];const c=function(t,i,e,s,n,o){const r=[],h=new Xf;for(const e of t)for(let t=e.original.startLineNumber;t<e.original.endLineNumberExclusive-2;t++){const e=`${i[t-1]}:${i[t+1-1]}:${i[t+2-1]}`;h.add(e,{range:new Fg(t,t+3)})}const c=[];t.sort(M((t=>t.modified.startLineNumber),S));for(const i of t){let t=[];for(let s=i.modified.startLineNumber;s<i.modified.endLineNumberExclusive-2;s++){const i=`${e[s-1]}:${e[s+1-1]}:${e[s+2-1]}`,n=new Fg(s,s+3),o=[];h.forEach(i,(({range:i})=>{for(const e of t)if(e.originalLineRange.endLineNumberExclusive+1===i.endLineNumberExclusive&&e.modifiedLineRange.endLineNumberExclusive+1===n.endLineNumberExclusive)return e.originalLineRange=new Fg(e.originalLineRange.startLineNumber,i.endLineNumberExclusive),e.modifiedLineRange=new Fg(e.modifiedLineRange.startLineNumber,n.endLineNumberExclusive),void o.push(e);const e={modifiedLineRange:n,originalLineRange:i};c.push(e),o.push(e)})),t=o}if(!o.isValid())return[]}c.sort(I(M((t=>t.modifiedLineRange.length),S)));const a=new Ig,l=new Ig;for(const t of c){const i=t.modifiedLineRange.startLineNumber-t.originalLineRange.startLineNumber,e=a.subtractFrom(t.modifiedLineRange),s=l.subtractFrom(t.originalLineRange).getWithDelta(i),n=e.getIntersection(s);for(const t of n.ranges){if(t.length<3)continue;const e=t,s=t.delta(-i);r.push(new Lg(s,e)),a.addRange(e),l.addRange(s)}}r.sort(M((t=>t.original.startLineNumber),S));const u=new Dg(t);for(let i=0;i<r.length;i++){const e=r[i],h=u.findLastMonotonous((t=>t.original.startLineNumber<=e.original.startLineNumber)),c=Cg(t,(t=>t.modified.startLineNumber<=e.modified.startLineNumber)),d=Math.max(e.original.startLineNumber-h.original.startLineNumber,e.modified.startLineNumber-c.modified.startLineNumber),f=u.findLastMonotonous((t=>t.original.startLineNumber<e.original.endLineNumberExclusive)),g=Cg(t,(t=>t.modified.startLineNumber<e.modified.endLineNumberExclusive)),A=Math.max(f.original.endLineNumberExclusive-e.original.endLineNumberExclusive,g.modified.endLineNumberExclusive-e.modified.endLineNumberExclusive);let p,w;for(p=0;p<d;p++){const t=e.original.startLineNumber-p-1,i=e.modified.startLineNumber-p-1;if(t>s.length||i>n.length||a.contains(i)||l.contains(t)||!lA(s[t-1],n[i-1],o))break}for(p>0&&(l.addRange(new Fg(e.original.startLineNumber-p,e.original.startLineNumber)),a.addRange(new Fg(e.modified.startLineNumber-p,e.modified.startLineNumber))),w=0;w<A;w++){const t=e.original.endLineNumberExclusive+w,i=e.modified.endLineNumberExclusive+w;if(t>s.length||i>n.length||a.contains(i)||l.contains(t)||!lA(s[t-1],n[i-1],o))break}w>0&&(l.addRange(new Fg(e.original.endLineNumberExclusive,e.original.endLineNumberExclusive+w)),a.addRange(new Fg(e.modified.endLineNumberExclusive,e.modified.endLineNumberExclusive+w))),(p>0||w>0)&&(r[i]=new Lg(new Fg(e.original.startLineNumber-p,e.original.endLineNumberExclusive+w),new Fg(e.modified.startLineNumber-p,e.modified.endLineNumberExclusive+w)))}return r}(t.filter((t=>!h.has(t))),s,n,i,e,o);return x(r,c),r=function(t){if(t.length===0)return t;t.sort(M((t=>t.original.startLineNumber),S));const i=[t[0]];for(let e=1;e<t.length;e++){const s=i[i.length-1],n=t[e],o=n.original.startLineNumber-s.original.endLineNumberExclusive,r=n.modified.startLineNumber-s.modified.endLineNumberExclusive;o>=0&&r>=0&&o+r<=2?i[i.length-1]=s.join(n):i.push(n)}return i}(r),r=r.filter((t=>{const e=t.original.toOffsetRange().slice(i).map((t=>t.trim()));return e.join(`\n`).length>=15&&function(t,i){let e=0;for(const s of t)i(s)&&e++;return e}(e,(t=>t.length>=2))>=2})),r=function(t,i){const e=new Dg(t);return i=i.filter((i=>(e.findLastMonotonous((t=>t.original.startLineNumber<i.original.endLineNumberExclusive))||new Lg(new Fg(1,1),new Fg(1,1)))!==Cg(t,(t=>t.modified.startLineNumber<i.modified.endLineNumberExclusive)))),i}(t,r),r}function lA(t,i,e){if(t.trim()===i.trim())return!0;if(t.length>300&&i.length>300)return!1;const s=(new tA).compute(new nA([t],new yg(0,1),!1),new nA([i],new yg(0,1),!1),e);let n=0;const o=Vg.invert(s.diffs,t.length);for(const i of o)i.seq1Range.forEach((i=>{Xg(t.charCodeAt(i))||n++}));const r=function(i){let e=0;for(let s=0;s<t.length;s++)Xg(i.charCodeAt(s))||e++;return e}(t.length>i.length?t:i);return n/r>.6&&r>10}function uA(t,i,e){let s=e;return s=dA(t,i,s),s=dA(t,i,s),s=function(t,i,e){if(!t.getBoundaryScore||!i.getBoundaryScore)return e;for(let s=0;s<e.length;s++){const n=s>0?e[s-1]:void 0,o=e[s],r=s+1<e.length?e[s+1]:void 0,h=new yg(n?n.seq1Range.endExclusive+1:0,r?r.seq1Range.start-1:t.length),c=new yg(n?n.seq2Range.endExclusive+1:0,r?r.seq2Range.start-1:i.length);o.seq1Range.isEmpty?e[s]=fA(o,t,i,h,c):o.seq2Range.isEmpty&&(e[s]=fA(o.swap(),i,t,c,h).swap())}return e}(t,i,s),s}function dA(t,i,e){if(e.length===0)return e;const s=[];s.push(e[0]);for(let n=1;n<e.length;n++){const o=s[s.length-1];let r=e[n];if(r.seq1Range.isEmpty||r.seq2Range.isEmpty){const e=r.seq1Range.start-o.seq1Range.endExclusive;let n;for(n=1;n<=e&&t.getElement(r.seq1Range.start-n)===t.getElement(r.seq1Range.endExclusive-n)&&i.getElement(r.seq2Range.start-n)===i.getElement(r.seq2Range.endExclusive-n);n++);if(n--,n===e){s[s.length-1]=new Vg(new yg(o.seq1Range.start,r.seq1Range.endExclusive-e),new yg(o.seq2Range.start,r.seq2Range.endExclusive-e));continue}r=r.delta(-n)}s.push(r)}const n=[];for(let e=0;e<s.length-1;e++){const o=s[e+1];let r=s[e];if(r.seq1Range.isEmpty||r.seq2Range.isEmpty){const n=o.seq1Range.start-r.seq1Range.endExclusive;let h;for(h=0;h<n&&t.isStronglyEqual(r.seq1Range.start+h,r.seq1Range.endExclusive+h)&&i.isStronglyEqual(r.seq2Range.start+h,r.seq2Range.endExclusive+h);h++);if(h===n){s[e+1]=new Vg(new yg(r.seq1Range.start+n,o.seq1Range.endExclusive),new yg(r.seq2Range.start+n,o.seq2Range.endExclusive));continue}h>0&&(r=r.delta(h))}n.push(r)}return s.length>0&&n.push(s[s.length-1]),n}function fA(t,i,e,s,n){let o=1;for(;t.seq1Range.start-o>=s.start&&t.seq2Range.start-o>=n.start&&e.isStronglyEqual(t.seq2Range.start-o,t.seq2Range.endExclusive-o)&&o<100;)o++;o--;let r=0;for(;t.seq1Range.start+r<s.endExclusive&&t.seq2Range.endExclusive+r<n.endExclusive&&e.isStronglyEqual(t.seq2Range.start+r,t.seq2Range.endExclusive+r)&&r<100;)r++;if(o===0&&r===0)return t;let h=0,c=-1;for(let s=-o;s<=r;s++){const n=t.seq2Range.start+s,o=t.seq2Range.endExclusive+s,r=t.seq1Range.start+s,a=i.getBoundaryScore(r)+e.getBoundaryScore(n)+e.getBoundaryScore(o);a>c&&(c=a,h=s)}return t.delta(h)}class gA{constructor(t,i){this.trimmedHash=t,this.lines=i}getElement(t){return this.trimmedHash[t]}get length(){return this.trimmedHash.length}getBoundaryScore(t){return 1e3-((t===0?0:AA(this.lines[t-1]))+(t===this.lines.length?0:AA(this.lines[t])))}getText(t){return this.lines.slice(t.start,t.endExclusive).join(`\n`)}isStronglyEqual(t,i){return this.lines[t]===this.lines[i]}}function AA(t){let i=0;for(;i<t.length&&(t.charCodeAt(i)===32||t.charCodeAt(i)===9);)i++;return i}class pA{constructor(){this.dynamicProgrammingDiffing=new Zg,this.myersDiffingAlgorithm=new tA}computeDiff(t,i,e){if(t.length<=1&&h(t,i,((t,i)=>t===i)))return new vg([],[],!1);if(t.length===1&&t[0].length===0||i.length===1&&i[0].length===0)return new vg([new Rg(new Fg(1,t.length+1),new Fg(1,i.length+1),[new Tg(new Es(1,1,t.length,t[0].length+1),new Es(1,1,i.length,i[0].length+1))])],[],!1);const s=e.maxComputationTimeMs===0?Gg.instance:new Kg(e.maxComputationTimeMs),n=!e.ignoreTrimWhitespace,o=new Map;function r(t){let i=o.get(t);return i===void 0&&(i=o.size,o.set(t,i)),i}const c=t.map((t=>r(t.trim()))),a=i.map((t=>r(t.trim()))),l=new gA(c,t),u=new gA(a,i),d=l.length+u.length<1700?this.dynamicProgrammingDiffing.compute(l,u,s,((e,s)=>t[e]===i[s]?i[s].length===0?.1:1+Math.log(1+i[s].length):.99)):this.myersDiffingAlgorithm.compute(l,u);let f=d.diffs,g=d.hitTimeout;f=uA(l,u,f),f=function(t,i,e){let s=e;if(s.length===0)return s;let n,o=0;do{n=!1;const i=[s[0]];for(let e=1;e<s.length;e++){let o=function(i,e){const s=new yg(h.seq1Range.endExclusive,r.seq1Range.start);return t.getText(s).replace(/\s/g,"").length<=4&&(i.seq1Range.length+i.seq2Range.length>5||e.seq1Range.length+e.seq2Range.length>5)};const r=s[e],h=i[i.length-1];o(h,r)?(n=!0,i[i.length-1]=i[i.length-1].join(r)):i.push(r)}s=i}while(o++<10&&n);return s}(l,0,f);const A=[],p=e=>{if(n)for(let o=0;o<e;o++){const e=w+o,r=m+o;if(t[e]!==i[r]){const o=this.refineDiff(t,i,new Vg(new yg(e,e+1),new yg(r,r+1)),s,n);for(const t of o.mappings)A.push(t);o.hitTimeout&&(g=!0)}}};let w=0,m=0;for(const e of f){Yl((()=>e.seq1Range.start-w==e.seq2Range.start-m)),p(e.seq1Range.start-w),w=e.seq1Range.endExclusive,m=e.seq2Range.endExclusive;const o=this.refineDiff(t,i,e,s,n);o.hitTimeout&&(g=!0);for(const t of o.mappings)A.push(t)}p(t.length-w);const v=wA(A,t,i);let b=[];return e.computeMoves&&(b=this.computeMoves(v,t,i,c,a,s,n)),Yl((()=>{function e(t,i){if(t.lineNumber<1||t.lineNumber>i.length)return!1;const e=i[t.lineNumber-1];return!(t.column<1||t.column>e.length+1)}function s(t,i){return!(t.startLineNumber<1||t.startLineNumber>i.length+1)&&!(t.endLineNumberExclusive<1||t.endLineNumberExclusive>i.length+1)}for(const n of v){if(!n.innerChanges)return!1;for(const s of n.innerChanges)if(!(e(s.modifiedRange.getStartPosition(),i)&&e(s.modifiedRange.getEndPosition(),i)&&e(s.originalRange.getStartPosition(),t)&&e(s.originalRange.getEndPosition(),t)))return!1;if(!s(n.modified,i)||!s(n.original,t))return!1}return!0})),new vg(v,b,g)}computeMoves(t,i,e,s,n,o,r){return aA(t,i,e,s,n,o).map((t=>{const s=wA(this.refineDiff(i,e,new Vg(t.original.toOffsetRange(),t.modified.toOffsetRange()),o,r).mappings,i,e,!0);return new bg(t,s)}))}refineDiff(t,i,e,s,n){const o=new nA(t,e.seq1Range,n),r=new nA(i,e.seq2Range,n),h=o.length+r.length<500?this.dynamicProgrammingDiffing.compute(o,r,s):this.myersDiffingAlgorithm.compute(o,r,s);let c=h.diffs;return c=uA(o,r,c),c=function(t,i,e){const s=Vg.invert(e,t.length),n=[];let o=new Jg(0,0);function r(e,r){if(e.offset1<o.offset1||e.offset2<o.offset2)return;const h=t.findWordContaining(e.offset1),c=i.findWordContaining(e.offset2);if(!h||!c)return;let a=new Vg(h,c);const l=a.intersect(r);let u=l.seq1Range.length,d=l.seq2Range.length;for(;s.length>0;){const e=s[0];if(!e.seq1Range.intersects(a.seq1Range)&&!e.seq2Range.intersects(a.seq2Range))break;const n=t.findWordContaining(e.seq1Range.start),o=i.findWordContaining(e.seq2Range.start),r=new Vg(n,o),h=r.intersect(e);if(u+=h.seq1Range.length,d+=h.seq2Range.length,a=a.join(r),!(a.seq1Range.endExclusive>=e.seq1Range.endExclusive))break;s.shift()}u+d<2*(a.seq1Range.length+a.seq2Range.length)/3&&n.push(a),o=a.getEndExclusives()}for(;s.length>0;){const t=s.shift();t.seq1Range.isEmpty||(r(t.getStarts(),t),r(t.getEndExclusives().delta(-1),t))}return function(t,i){const e=[];for(;t.length>0||i.length>0;){const s=t[0],n=i[0];let o;o=s&&(!n||s.seq1Range.start<n.seq1Range.start)?t.shift():i.shift(),e.length>0&&e[e.length-1].seq1Range.endExclusive>=o.seq1Range.start?e[e.length-1]=e[e.length-1].join(o):e.push(o)}return e}(e,n)}(o,r,c),c=function(t,i,e){const s=[];for(const t of e){const i=s[s.length-1];i&&(t.seq1Range.start-i.seq1Range.endExclusive<=2||t.seq2Range.start-i.seq2Range.endExclusive<=2)?s[s.length-1]=new Vg(i.seq1Range.join(t.seq1Range),i.seq2Range.join(t.seq2Range)):s.push(t)}return s}(0,0,c),c=function(t,i,e){let s=e;if(s.length===0)return s;let n,o=0;do{n=!1;const e=[s[0]];for(let o=1;o<s.length;o++){let r=function(e,s){const n=new yg(c.seq1Range.endExclusive,h.seq1Range.start);if(t.countLinesIn(n)>5||n.length>500)return!1;const o=t.getText(n).trim();if(o.length>20||o.split(/\r\n|\r|\n/).length>1)return!1;const r=t.countLinesIn(e.seq1Range),a=e.seq1Range.length,l=i.countLinesIn(e.seq2Range),u=e.seq2Range.length,d=t.countLinesIn(s.seq1Range),f=s.seq1Range.length,g=i.countLinesIn(s.seq2Range),A=s.seq2Range.length;function p(t){return Math.min(t,130)}return Math.pow(Math.pow(p(40*r+a),1.5)+Math.pow(p(40*l+u),1.5),1.5)+Math.pow(Math.pow(p(40*d+f),1.5)+Math.pow(p(40*g+A),1.5),1.5)>74184.96480721243};const h=s[o],c=e[e.length-1];r(c,h)?(n=!0,e[e.length-1]=e[e.length-1].join(h)):e.push(h)}s=e}while(o++<10&&n);const r=[];return function(t,i){for(let e=0;e<t.length;e++)i(e===0?void 0:t[e-1],t[e],e+1===t.length?void 0:t[e+1])}(s,((i,e,s)=>{let n=e;function o(t){return t.length>0&&t.trim().length<=3&&e.seq1Range.length+e.seq2Range.length>100}const h=t.extendToFullLines(e.seq1Range),c=t.getText(new yg(h.start,e.seq1Range.start));o(c)&&(n=n.deltaStart(-c.length));const a=t.getText(new yg(e.seq1Range.endExclusive,h.endExclusive));o(a)&&(n=n.deltaEnd(a.length));const l=Vg.fromOffsetPairs(i?i.getEndExclusives():Jg.zero,s?s.getStarts():Jg.max),u=n.intersect(l);r.length>0&&u.getStarts().equals(r[r.length-1].getEndExclusives())?r[r.length-1]=r[r.length-1].join(u):r.push(u)})),r}(o,r,c),{mappings:c.map((t=>new Tg(o.translateRange(t.seq1Range),r.translateRange(t.seq2Range)))),hitTimeout:h.hitTimeout}}}function wA(t,i,e,s=!1){const n=[];for(const s of u(t.map((t=>function(t,i,e){let s=0,n=0;t.modifiedRange.endColumn===1&&t.originalRange.endColumn===1&&t.originalRange.startLineNumber+s<=t.originalRange.endLineNumber&&t.modifiedRange.startLineNumber+s<=t.modifiedRange.endLineNumber&&(n=-1),t.modifiedRange.startColumn-1>=e[t.modifiedRange.startLineNumber-1].length&&t.originalRange.startColumn-1>=i[t.originalRange.startLineNumber-1].length&&t.originalRange.startLineNumber<=t.originalRange.endLineNumber+n&&t.modifiedRange.startLineNumber<=t.modifiedRange.endLineNumber+n&&(s=1);const o=new Fg(t.originalRange.startLineNumber+s,t.originalRange.endLineNumber+1+n),r=new Fg(t.modifiedRange.startLineNumber+s,t.modifiedRange.endLineNumber+1+n);return new Rg(o,r,[t])}(t,i,e))),((t,i)=>t.original.overlapOrTouch(i.original)||t.modified.overlapOrTouch(i.modified)))){const t=s[0],i=s[s.length-1];n.push(new Rg(t.original.join(i.original),t.modified.join(i.modified),s.map((t=>t.innerChanges[0]))))}return Yl((()=>!s&&n.length>0&&(n[0].modified.startLineNumber!==n[0].original.startLineNumber||e.length-n[n.length-1].modified.endLineNumberExclusive!=i.length-n[n.length-1].original.endLineNumberExclusive)?!1:_l(n,((t,i)=>i.original.startLineNumber-t.original.endLineNumberExclusive==i.modified.startLineNumber-t.modified.endLineNumberExclusive&&t.original.endLineNumberExclusive<i.original.startLineNumber&&t.modified.endLineNumberExclusive<i.modified.startLineNumber)))),n}const mA=()=>new Ng,vA=()=>new pA;function bA(t,i){const e=Math.pow(10,i);return Math.round(t*e)/e}class yA{constructor(t,i,e,s=1){this._rgbaBrand=void 0,this.r=0|Math.min(255,Math.max(0,t)),this.g=0|Math.min(255,Math.max(0,i)),this.b=0|Math.min(255,Math.max(0,e)),this.a=bA(Math.max(Math.min(1,s),0),3)}static equals(t,i){return t.r===i.r&&t.g===i.g&&t.b===i.b&&t.a===i.a}}class kA{constructor(t,i,e,s){this._hslaBrand=void 0,this.h=0|Math.max(Math.min(360,t),0),this.s=bA(Math.max(Math.min(1,i),0),3),this.l=bA(Math.max(Math.min(1,e),0),3),this.a=bA(Math.max(Math.min(1,s),0),3)}static equals(t,i){return t.h===i.h&&t.s===i.s&&t.l===i.l&&t.a===i.a}static fromRGBA(t){const i=t.r/255,e=t.g/255,s=t.b/255,n=t.a,o=Math.max(i,e,s),r=Math.min(i,e,s);let h=0,c=0;const a=(r+o)/2,l=o-r;if(l>0){switch(c=Math.min(a<=.5?l/(2*a):l/(2-2*a),1),o){case i:h=(e-s)/l+(e<s?6:0);break;case e:h=(s-i)/l+2;break;case s:h=(i-e)/l+4}h*=60,h=Math.round(h)}return new kA(h,c,a,n)}static _hue2rgb(t,i,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(i-t)*e:e<.5?i:e<2/3?t+(i-t)*(2/3-e)*6:t}static toRGBA(t){const i=t.h/360,{s:e,l:s,a:n}=t;let o,r,h;if(e===0)o=r=h=s;else{const t=s<.5?s*(1+e):s+e-s*e,n=2*s-t;o=kA._hue2rgb(n,t,i+1/3),r=kA._hue2rgb(n,t,i),h=kA._hue2rgb(n,t,i-1/3)}return new yA(Math.round(255*o),Math.round(255*r),Math.round(255*h),n)}}class xA{constructor(t,i,e,s){this._hsvaBrand=void 0,this.h=0|Math.max(Math.min(360,t),0),this.s=bA(Math.max(Math.min(1,i),0),3),this.v=bA(Math.max(Math.min(1,e),0),3),this.a=bA(Math.max(Math.min(1,s),0),3)}static equals(t,i){return t.h===i.h&&t.s===i.s&&t.v===i.v&&t.a===i.a}static fromRGBA(t){const i=t.r/255,e=t.g/255,s=t.b/255,n=Math.max(i,e,s),o=n-Math.min(i,e,s),r=n===0?0:o/n;let h;return h=o===0?0:n===i?((e-s)/o%6+6)%6:n===e?(s-i)/o+2:(i-e)/o+4,new xA(Math.round(60*h),r,n,t.a)}static toRGBA(t){const{h:i,s:e,v:s,a:n}=t,o=s*e,r=o*(1-Math.abs(i/60%2-1)),h=s-o;let[c,a,l]=[0,0,0];return i<60?(c=o,a=r):i<120?(c=r,a=o):i<180?(a=o,l=r):i<240?(a=r,l=o):i<300?(c=r,l=o):i<=360&&(c=o,l=r),c=Math.round(255*(c+h)),a=Math.round(255*(a+h)),l=Math.round(255*(l+h)),new yA(c,a,l,n)}}class CA{static fromHex(t){return CA.Format.CSS.parseHex(t)||CA.red}static equals(t,i){return!t&&!i||!(!t||!i)&&t.equals(i)}get hsla(){return this._hsla?this._hsla:kA.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:xA.fromRGBA(this.rgba)}constructor(t){if(!t)throw new Error("Color needs a value");if(t instanceof yA)this.rgba=t;else if(t instanceof kA)this._hsla=t,this.rgba=kA.toRGBA(t);else{if(!(t instanceof xA))throw new Error("Invalid color ctor argument");this._hsva=t,this.rgba=xA.toRGBA(t)}}equals(t){return!!t&&yA.equals(this.rgba,t.rgba)&&kA.equals(this.hsla,t.hsla)&&xA.equals(this.hsva,t.hsva)}getRelativeLuminance(){return bA(.2126*CA._relativeLuminanceForComponent(this.rgba.r)+.7152*CA._relativeLuminanceForComponent(this.rgba.g)+.0722*CA._relativeLuminanceForComponent(this.rgba.b),4)}static _relativeLuminanceForComponent(t){const i=t/255;return i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}isLighter(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3>=128}isLighterThan(t){return this.getRelativeLuminance()>t.getRelativeLuminance()}isDarkerThan(t){return this.getRelativeLuminance()<t.getRelativeLuminance()}lighten(t){return new CA(new kA(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*t,this.hsla.a))}darken(t){return new CA(new kA(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*t,this.hsla.a))}transparent(t){const{r:i,g:e,b:s,a:n}=this.rgba;return new CA(new yA(i,e,s,n*t))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new CA(new yA(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(t){if(this.isOpaque()||t.rgba.a!==1)return this;const{r:i,g:e,b:s,a:n}=this.rgba;return new CA(new yA(t.rgba.r-n*(t.rgba.r-i),t.rgba.g-n*(t.rgba.g-e),t.rgba.b-n*(t.rgba.b-s),1))}toString(){return this._toString||(this._toString=CA.Format.CSS.format(this)),this._toString}static getLighterColor(t,i,e){if(t.isLighterThan(i))return t;e=e||.5;const s=t.getRelativeLuminance(),n=i.getRelativeLuminance();return e=e*(n-s)/n,t.lighten(e)}static getDarkerColor(t,i,e){if(t.isDarkerThan(i))return t;e=e||.5;const s=t.getRelativeLuminance();return e=e*(s-i.getRelativeLuminance())/s,t.darken(e)}}function EA(t){const i=[];for(const e of t){const t=Number(e);(t||t===0&&e.replace(/\s/g,"")!=="")&&i.push(t)}return i}function BA(t,i,e,s){return{red:t/255,blue:e/255,green:i/255,alpha:s}}function DA(t,i){const e=i.index,s=i[0].length;if(!e)return;const n=t.positionAt(e);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:n.lineNumber,endColumn:n.column+s}}function MA(t,i){if(!t)return;const e=CA.Format.CSS.parseHex(i);return e?{range:t,color:BA(e.rgba.r,e.rgba.g,e.rgba.b,e.rgba.a)}:void 0}function SA(t,i,e){if(!t||i.length!==1)return;const s=EA(i[0].values());return{range:t,color:BA(s[0],s[1],s[2],e?s[3]:1)}}function FA(t,i,e){if(!t||i.length!==1)return;const s=EA(i[0].values()),n=new CA(new kA(s[0],s[1]/100,s[2]/100,e?s[3]:1));return{range:t,color:BA(n.rgba.r,n.rgba.g,n.rgba.b,n.rgba.a)}}function IA(t,i){return typeof t=="string"?[...t.matchAll(i)]:t.findMatches(i)}function LA(t){return t&&typeof t.getValue=="function"&&typeof t.positionAt=="function"?function(t){const i=[],e=IA(t,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(e.length>0)for(const s of e){const e=s.filter((t=>t!==void 0)),n=e[1],o=e[2];if(!o)continue;let r;if(n==="rgb"){const i=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;r=SA(DA(t,s),IA(o,i),!1)}else if(n==="rgba"){const i=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;r=SA(DA(t,s),IA(o,i),!0)}else if(n==="hsl"){const i=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;r=FA(DA(t,s),IA(o,i),!1)}else if(n==="hsla"){const i=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;r=FA(DA(t,s),IA(o,i),!0)}else n==="#"&&(r=MA(DA(t,s),n+o));r&&i.push(r)}return i}(t):[]}CA.white=new CA(new yA(255,255,255,1)),CA.black=new CA(new yA(0,0,0,1)),CA.red=new CA(new yA(255,0,0,1)),CA.blue=new CA(new yA(0,0,255,1)),CA.green=new CA(new yA(0,255,0,1)),CA.cyan=new CA(new yA(0,255,255,1)),CA.lightgrey=new CA(new yA(211,211,211,1)),CA.transparent=new CA(new yA(0,0,0,0)),function(t){var i;(function(i){function e(t){const i=t.toString(16);return i.length!==2?"0"+i:i}function s(t){switch(t){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}return 0}i.formatRGB=function(i){return i.rgba.a===1?`rgb(${i.rgba.r}, ${i.rgba.g}, ${i.rgba.b})`:t.Format.CSS.formatRGBA(i)},i.formatRGBA=function(t){return`rgba(${t.rgba.r}, ${t.rgba.g}, ${t.rgba.b}, ${+t.rgba.a.toFixed(2)})`},i.formatHSL=function(i){return i.hsla.a===1?`hsl(${i.hsla.h}, ${(100*i.hsla.s).toFixed(2)}%, ${(100*i.hsla.l).toFixed(2)}%)`:t.Format.CSS.formatHSLA(i)},i.formatHSLA=function(t){return`hsla(${t.hsla.h}, ${(100*t.hsla.s).toFixed(2)}%, ${(100*t.hsla.l).toFixed(2)}%, ${t.hsla.a.toFixed(2)})`},i.formatHex=function(t){return`#${e(t.rgba.r)}${e(t.rgba.g)}${e(t.rgba.b)}`},i.formatHexA=function(i,s=!1){return s&&i.rgba.a===1?t.Format.CSS.formatHex(i):`#${e(i.rgba.r)}${e(i.rgba.g)}${e(i.rgba.b)}${e(Math.round(255*i.rgba.a))}`},i.format=function(i){return i.isOpaque()?t.Format.CSS.formatHex(i):t.Format.CSS.formatRGBA(i)},i.parseHex=function(i){const e=i.length;if(e===0||i.charCodeAt(0)!==35)return null;if(e===7){const e=16*s(i.charCodeAt(1))+s(i.charCodeAt(2)),n=16*s(i.charCodeAt(3))+s(i.charCodeAt(4)),o=16*s(i.charCodeAt(5))+s(i.charCodeAt(6));return new t(new yA(e,n,o,1))}if(e===9){const e=16*s(i.charCodeAt(1))+s(i.charCodeAt(2)),n=16*s(i.charCodeAt(3))+s(i.charCodeAt(4)),o=16*s(i.charCodeAt(5))+s(i.charCodeAt(6)),r=16*s(i.charCodeAt(7))+s(i.charCodeAt(8));return new t(new yA(e,n,o,r/255))}if(e===4){const e=s(i.charCodeAt(1)),n=s(i.charCodeAt(2)),o=s(i.charCodeAt(3));return new t(new yA(16*e+e,16*n+n,16*o+o))}if(e===5){const e=s(i.charCodeAt(1)),n=s(i.charCodeAt(2)),o=s(i.charCodeAt(3)),r=s(i.charCodeAt(4));return new t(new yA(16*e+e,16*n+n,16*o+o,(16*r+r)/255))}return null}})((i=t.Format||(t.Format={})).CSS||(i.CSS={}))}(CA||(CA={}));const RA=new RegExp("\\bMARK:\\s*(.*)$","d"),TA=/^-+|-+$/g;function NA(t,i){var e;let s=[];if(i.findRegionSectionHeaders&&(!((e=i.foldingRules)===null||e===void 0)&&e.markers)){const e=function(t,i){const e=[],s=t.getLineCount();for(let n=1;n<=s;n++){const s=t.getLineContent(n),o=s.match(i.foldingRules.markers.start);if(o){const t={startLineNumber:n,startColumn:o[0].length+1,endLineNumber:n,endColumn:s.length+1};if(t.endColumn>t.startColumn){const i={range:t,...OA(s.substring(o[0].length)),shouldBeInComments:!1};(i.text||i.hasSeparatorLine)&&e.push(i)}}}return e}(t,i);s=s.concat(e)}if(i.findMarkSectionHeaders){const i=function(t){const i=[],e=t.getLineCount();for(let s=1;s<=e;s++)QA(t.getLineContent(s),s,i);return i}(t);s=s.concat(i)}return s}function QA(t,i,e){RA.lastIndex=0;const s=RA.exec(t);if(s){const t={startLineNumber:i,startColumn:s.indices[1][0]+1,endLineNumber:i,endColumn:s.indices[1][1]+1};if(t.endColumn>t.startColumn){const i={range:t,...OA(s[1]),shouldBeInComments:!0};(i.text||i.hasSeparatorLine)&&e.push(i)}}}function OA(t){const i=(t=t.trim()).startsWith("-");return{text:t=t.replace(TA,""),hasSeparatorLine:i}}class zA extends Nf{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(t){const i=[];for(let e=0;e<this._lines.length;e++){const s=this._lines[e],n=this.offsetAt(new Cs(e+1,1)),o=s.matchAll(t);for(const t of o)(t.index||t.index===0)&&(t.index=t.index+n),i.push(t)}return i}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(t){return this._lines[t-1]}getWordAtPosition(t,i){const e=$t(t.column,Gt(i),this._lines[t.lineNumber-1],0);return e?new Es(t.lineNumber,e.startColumn,t.lineNumber,e.endColumn):null}words(t){const i=this._lines,e=this._wordenize.bind(this);let s=0,n="",o=0,r=[];return{*[Symbol.iterator](){for(;;)if(o<r.length){const t=n.substring(r[o].start,r[o].end);o+=1,yield t}else{if(!(s<i.length))break;n=i[s],r=e(n,t),o=0,s+=1}}}}getLineWords(t,i){const e=this._lines[t-1],s=this._wordenize(e,i),n=[];for(const t of s)n.push({word:e.substring(t.start,t.end),startColumn:t.start+1,endColumn:t.end+1});return n}_wordenize(t,i){const e=[];let s;for(i.lastIndex=0;(s=i.exec(t))&&s[0].length!==0;)e.push({start:s.index,end:s.index+s[0].length});return e}getValueInRange(t){if((t=this._validateRange(t)).startLineNumber===t.endLineNumber)return this._lines[t.startLineNumber-1].substring(t.startColumn-1,t.endColumn-1);const i=this._eol,e=t.startLineNumber-1,s=t.endLineNumber-1,n=[];n.push(this._lines[e].substring(t.startColumn-1));for(let t=e+1;t<s;t++)n.push(this._lines[t]);return n.push(this._lines[s].substring(0,t.endColumn-1)),n.join(i)}offsetAt(t){return t=this._validatePosition(t),this._ensureLineStarts(),this._lineStarts.getPrefixSum(t.lineNumber-2)+(t.column-1)}positionAt(t){t=Math.floor(t),t=Math.max(0,t),this._ensureLineStarts();const i=this._lineStarts.getIndexOf(t),e=this._lines[i.index].length;return{lineNumber:1+i.index,column:1+Math.min(i.remainder,e)}}_validateRange(t){const i=this._validatePosition({lineNumber:t.startLineNumber,column:t.startColumn}),e=this._validatePosition({lineNumber:t.endLineNumber,column:t.endColumn});return i.lineNumber!==t.startLineNumber||i.column!==t.startColumn||e.lineNumber!==t.endLineNumber||e.column!==t.endColumn?{startLineNumber:i.lineNumber,startColumn:i.column,endLineNumber:e.lineNumber,endColumn:e.column}:t}_validatePosition(t){if(!Cs.isIPosition(t))throw new Error("bad position");let{lineNumber:i,column:e}=t,s=!1;if(i<1)i=1,e=1,s=!0;else if(i>this._lines.length)i=this._lines.length,e=this._lines[i-1].length+1,s=!0;else{const t=this._lines[i-1].length+1;e<1?(e=1,s=!0):e>t&&(e=t,s=!0)}return s?{lineNumber:i,column:e}:t}}class UA{constructor(t,i){this._host=t,this._models=Object.create(null),this._foreignModuleFactory=i,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(t){return this._models[t]}_getModels(){const t=[];return Object.keys(this._models).forEach((i=>t.push(this._models[i]))),t}acceptNewModel(t){this._models[t.url]=new zA(fs.parse(t.url),t.lines,t.EOL,t.versionId)}acceptModelChanged(t,i){this._models[t]&&this._models[t].onEvents(i)}acceptRemovedModel(t){this._models[t]&&delete this._models[t]}async computeUnicodeHighlights(t,i,e){const s=this._getModel(t);return s?pg.computeUnicodeHighlights(s,i,e):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async findSectionHeaders(t,i){const e=this._getModel(t);return e?NA(e,i):[]}async computeDiff(t,i,e,s){const n=this._getModel(t),o=this._getModel(i);return!n||!o?null:UA.computeDiff(n,o,e,s)}static computeDiff(t,i,e,s){const n=s==="advanced"?vA():mA(),o=t.getLinesContent(),r=i.getLinesContent(),h=n.computeDiff(o,r,e);function c(t){return t.map((t=>{var i;return[t.original.startLineNumber,t.original.endLineNumberExclusive,t.modified.startLineNumber,t.modified.endLineNumberExclusive,(i=t.innerChanges)===null||i===void 0?void 0:i.map((t=>[t.originalRange.startLineNumber,t.originalRange.startColumn,t.originalRange.endLineNumber,t.originalRange.endColumn,t.modifiedRange.startLineNumber,t.modifiedRange.startColumn,t.modifiedRange.endLineNumber,t.modifiedRange.endColumn]))]}))}return{identical:!(h.changes.length>0)&&this._modelsAreIdentical(t,i),quitEarly:h.hitTimeout,changes:c(h.changes),moves:h.moves.map((t=>[t.lineRangeMapping.original.startLineNumber,t.lineRangeMapping.original.endLineNumberExclusive,t.lineRangeMapping.modified.startLineNumber,t.lineRangeMapping.modified.endLineNumberExclusive,c(t.changes)]))}}static _modelsAreIdentical(t,i){const e=t.getLineCount();if(e!==i.getLineCount())return!1;for(let s=1;s<=e;s++)if(t.getLineContent(s)!==i.getLineContent(s))return!1;return!0}async computeMoreMinimalEdits(t,i,e){const s=this._getModel(t);if(!s)return i;const n=[];let o;i=i.slice(0).sort(((t,i)=>t.range&&i.range?Es.compareRangesUsingStarts(t.range,i.range):(t.range?0:1)-(i.range?0:1)));let r=0;for(let t=1;t<i.length;t++)Es.getEndPosition(i[r].range).equals(Es.getStartPosition(i[t].range))?(i[r].range=Es.fromPositions(Es.getStartPosition(i[r].range),Es.getEndPosition(i[t].range)),i[r].text+=i[t].text):(r++,i[r]=i[t]);i.length=r+1;for(let{range:t,text:r,eol:h}of i){if(typeof h=="number"&&(o=h),Es.isEmpty(t)&&!r)continue;const i=s.getValueInRange(t);if(r=r.replace(/\r\n|\n|\r/g,s.eol),i===r)continue;if(Math.max(r.length,i.length)>UA._diffLimit){n.push({range:t,text:r});continue}const c=Ef(i,r,e),a=s.offsetAt(Es.lift(t).getStartPosition());for(const t of c){const i=s.positionAt(a+t.originalStart),e=s.positionAt(a+t.originalStart+t.originalLength),o={text:r.substr(t.modifiedStart,t.modifiedLength),range:{startLineNumber:i.lineNumber,startColumn:i.column,endLineNumber:e.lineNumber,endColumn:e.column}};s.getValueInRange(o.range)!==o.text&&n.push(o)}}return typeof o=="number"&&n.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),n}async computeLinks(t){const i=this._getModel(t);return i?function(t){return t&&typeof t.getLineCount=="function"&&typeof t.getLineContent=="function"?jf.computeLinks(t):[]}(i):null}async computeDefaultDocumentColors(t){const i=this._getModel(t);return i?LA(i):null}async textualSuggest(t,i,e,s){const n=new re,o=new RegExp(e,s),r=new Set;t:for(const e of t){const t=this._getModel(e);if(t){for(const e of t.words(o))if(e!==i&&isNaN(Number(e))&&(r.add(e),r.size>UA._suggestionsLimit))break t}}return{words:Array.from(r),duration:n.elapsed()}}async computeWordRanges(t,i,e,s){const n=this._getModel(t);if(!n)return Object.create(null);const o=new RegExp(e,s),r=Object.create(null);for(let t=i.startLineNumber;t<i.endLineNumber;t++){const i=n.getLineWords(t,o);for(const e of i){if(!isNaN(Number(e.word)))continue;let i=r[e.word];i||(i=[],r[e.word]=i),i.push({startLineNumber:t,startColumn:e.startColumn,endLineNumber:t,endColumn:e.endColumn})}}return r}async navigateValueSet(t,i,e,s,n){const o=this._getModel(t);if(!o)return null;const r=new RegExp(s,n);i.startColumn===i.endColumn&&(i={startLineNumber:i.startLineNumber,startColumn:i.startColumn,endLineNumber:i.endLineNumber,endColumn:i.endColumn+1});const h=o.getValueInRange(i),c=o.getWordAtPosition({lineNumber:i.startLineNumber,column:i.startColumn},r);if(!c)return null;const a=o.getValueInRange(c);return Wf.INSTANCE.navigateValueSet(i,h,c,a,e)}loadForeignModule(t,i,e){const s=function(t,i){const e=t=>function(){const e=Array.prototype.slice.call(arguments,0);return i(t,e)},s={};for(const i of t)s[i]=e(i);return s}(e,((t,i)=>this._host.fhr(t,i))),n={host:s,getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(n,i),Promise.resolve(tt(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(t,i){if(!this._foreignModule||typeof this._foreignModule[t]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+t));try{return Promise.resolve(this._foreignModule[t].apply(this._foreignModule,i))}catch(t){return Promise.reject(t)}}}UA._diffLimit=1e5,UA._suggestionsLimit=1e4,typeof importScripts=="function"&&(globalThis.monaco=jn());const HA=za("textResourceConfigurationService"),PA=za("textResourcePropertiesService"),jA=za("ILanguageFeaturesService");var WA=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},YA=function(t,i){return function(e,s){i(e,s,t)}};const _A=3e5;function VA(t,i){const e=t.getModel(i);return!!e&&!e.isTooLargeForSyncing()}let JA=class extends te{constructor(t,i,e,s,n){super(),this._modelService=t,this._workerManager=this._register(new KA(this._modelService,s)),this._logService=e,this._register(n.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(t,i)=>VA(this._modelService,t.uri)?this._workerManager.withWorker().then((i=>i.computeLinks(t.uri))).then((t=>t&&{links:t})):Promise.resolve({links:[]})})),this._register(n.completionProvider.register("*",new GA(this._workerManager,i,this._modelService,s)))}dispose(){super.dispose()}canComputeUnicodeHighlights(t){return VA(this._modelService,t)}computedUnicodeHighlights(t,i,e){return this._workerManager.withWorker().then((s=>s.computedUnicodeHighlights(t,i,e)))}async computeDiff(t,i,e,s){const n=await this._workerManager.withWorker().then((n=>n.computeDiff(t,i,e,s)));if(!n)return null;return{identical:n.identical,quitEarly:n.quitEarly,changes:o(n.changes),moves:n.moves.map((t=>new bg(new Lg(new Fg(t[0],t[1]),new Fg(t[2],t[3])),o(t[4]))))};function o(t){return t.map((t=>{var i;return new Rg(new Fg(t[0],t[1]),new Fg(t[2],t[3]),(i=t[4])===null||i===void 0?void 0:i.map((t=>new Tg(new Es(t[0],t[1],t[2],t[3]),new Es(t[4],t[5],t[6],t[7])))))}))}}computeMoreMinimalEdits(t,i,e=!1){if(p(i)){if(!VA(this._modelService,t))return Promise.resolve(i);const s=re.create(),n=this._workerManager.withWorker().then((s=>s.computeMoreMinimalEdits(t,i,e)));return n.finally((()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",t.toString(!0),s.elapsed()))),Promise.race([n,br(1e3).then((()=>i))])}return Promise.resolve(void 0)}canNavigateValueSet(t){return VA(this._modelService,t)}navigateValueSet(t,i,e){return this._workerManager.withWorker().then((s=>s.navigateValueSet(t,i,e)))}canComputeWordRanges(t){return VA(this._modelService,t)}computeWordRanges(t,i){return this._workerManager.withWorker().then((e=>e.computeWordRanges(t,i)))}findSectionHeaders(t,i){return this._workerManager.withWorker().then((e=>e.findSectionHeaders(t,i)))}};JA=WA([YA(0,Ha),YA(1,HA),YA(2,au),YA(3,uf),YA(4,jA)],JA);class GA{constructor(t,i,e,s){this.languageConfigurationService=s,this._debugDisplayName="wordbasedCompletions",this._workerManager=t,this._configurationService=i,this._modelService=e}async provideCompletionItems(t,i){const e=this._configurationService.getValue(t.uri,i,"editor");if(e.wordBasedSuggestions==="off")return;const s=[];if(e.wordBasedSuggestions==="currentDocument")VA(this._modelService,t.uri)&&s.push(t.uri);else for(const i of this._modelService.getModels())VA(this._modelService,i.uri)&&(i===t?s.unshift(i.uri):e.wordBasedSuggestions!=="allDocuments"&&i.getLanguageId()!==t.getLanguageId()||s.push(i.uri));if(s.length===0)return;const n=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition(),o=t.getWordAtPosition(i),r=o?new Es(i.lineNumber,o.startColumn,i.lineNumber,o.endColumn):Es.fromPositions(i),h=r.setEndPosition(i.lineNumber,i.column),c=await this._workerManager.withWorker(),a=await c.textualSuggest(s,o==null?void 0:o.word,n);return a?{duration:a.duration,suggestions:a.words.map((t=>({kind:18,label:t,insertText:t,range:{insert:h,replace:r}})))}:void 0}}class KA extends te{constructor(t,i){super(),this.languageConfigurationService=i,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=(new Date).getTime(),this._register(new gc).cancelAndSet((()=>this._checkStopIdleWorker()),Math.round(15e4),Wn),this._register(this._modelService.onModelRemoved((t=>this._checkStopEmptyWorker())))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){this._editorWorkerClient&&this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){this._editorWorkerClient&&(new Date).getTime()-this._lastWorkerUsedTime>_A&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=(new Date).getTime(),this._editorWorkerClient||(this._editorWorkerClient=new ZA(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class $A extends te{constructor(t,i,e){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=t,this._modelService=i,!e){const t=new Cr;t.cancelAndSet((()=>this._checkStopModelSync()),Math.round(3e4)),this._register(t)}}dispose(){for(const t in this._syncedModels)$i(this._syncedModels[t]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(t,i){for(const e of t){const t=e.toString();this._syncedModels[t]||this._beginModelSync(e,i),this._syncedModels[t]&&(this._syncedModelsLastUsedTime[t]=(new Date).getTime())}}_checkStopModelSync(){const t=(new Date).getTime(),i=[];for(const e in this._syncedModelsLastUsedTime)t-this._syncedModelsLastUsedTime[e]>6e4&&i.push(e);for(const t of i)this._stopModelSync(t)}_beginModelSync(t,i){const e=this._modelService.getModel(t);if(!e||!i&&e.isTooLargeForSyncing())return;const s=t.toString();this._proxy.acceptNewModel({url:e.uri.toString(),lines:e.getLinesContent(),EOL:e.getEOL(),versionId:e.getVersionId()});const n=new Zi;n.add(e.onDidChangeContent((t=>{this._proxy.acceptModelChanged(s.toString(),t)}))),n.add(e.onWillDispose((()=>{this._stopModelSync(s)}))),n.add(qi((()=>{this._proxy.acceptRemovedModel(s)}))),this._syncedModels[s]=n}_stopModelSync(t){const i=this._syncedModels[t];delete this._syncedModels[t],delete this._syncedModelsLastUsedTime[t],$i(i)}}class XA{constructor(t){this._instance=t,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class qA{constructor(t){this._workerClient=t}fhr(t,i){return this._workerClient.fhr(t,i)}}class ZA extends te{constructor(t,i,e,s){super(),this.languageConfigurationService=s,this._disposed=!1,this._modelService=t,this._keepIdleModels=i,this._workerFactory=new Ju(e),this._worker=null,this._modelManager=null}fhr(t,i){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new Pu(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new qA(this)))}catch(t){Tu(t),this._worker=new XA(new UA(new qA(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,(t=>(Tu(t),this._worker=new XA(new UA(new qA(this),null)),this._getOrCreateWorker().getProxyObject())))}_getOrCreateModelManager(t){return this._modelManager||(this._modelManager=this._register(new $A(t,this._modelService,this._keepIdleModels))),this._modelManager}async _withSyncedResources(t,i=!1){return this._disposed?Promise.reject(function(){const t=new Error(Hi);return t.name=t.message,t}()):this._getProxy().then((e=>(this._getOrCreateModelManager(e).ensureSyncedResources(t,i),e)))}computedUnicodeHighlights(t,i,e){return this._withSyncedResources([t]).then((s=>s.computeUnicodeHighlights(t.toString(),i,e)))}computeDiff(t,i,e,s){return this._withSyncedResources([t,i],!0).then((n=>n.computeDiff(t.toString(),i.toString(),e,s)))}computeMoreMinimalEdits(t,i,e){return this._withSyncedResources([t]).then((s=>s.computeMoreMinimalEdits(t.toString(),i,e)))}computeLinks(t){return this._withSyncedResources([t]).then((i=>i.computeLinks(t.toString())))}computeDefaultDocumentColors(t){return this._withSyncedResources([t]).then((i=>i.computeDefaultDocumentColors(t.toString())))}async textualSuggest(t,i,e){const s=await this._withSyncedResources(t),n=e.source,o=e.flags;return s.textualSuggest(t.map((t=>t.toString())),i,n,o)}computeWordRanges(t,i){return this._withSyncedResources([t]).then((e=>{const s=this._modelService.getModel(t);if(!s)return Promise.resolve(null);const n=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),o=n.source,r=n.flags;return e.computeWordRanges(t.toString(),i,o,r)}))}navigateValueSet(t,i,e){return this._withSyncedResources([t]).then((s=>{const n=this._modelService.getModel(t);if(!n)return null;const o=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),r=o.source,h=o.flags;return s.navigateValueSet(t.toString(),i,e,r,h)}))}findSectionHeaders(t,i){return this._withSyncedResources([t]).then((e=>e.findSectionHeaders(t.toString(),i)))}dispose(){super.dispose(),this._disposed=!0}}class tp extends ZA{constructor(t,i,e){super(t,e.keepIdleModels||!1,e.label,i),this._foreignModuleId=e.moduleId,this._foreignModuleCreateData=e.createData||null,this._foreignModuleHost=e.host||null,this._foreignProxy=null}fhr(t,i){if(!this._foreignModuleHost||typeof this._foreignModuleHost[t]!="function")return Promise.reject(new Error("Missing method "+t+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[t].apply(this._foreignModuleHost,i))}catch(t){return Promise.reject(t)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then((t=>{const i=this._foreignModuleHost?tt(this._foreignModuleHost):[];return t.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,i).then((i=>{this._foreignModuleCreateData=null;const e=(i,e)=>t.fmr(i,e),s=(t,i)=>function(){const e=Array.prototype.slice.call(arguments,0);return i(t,e)},n={};for(const t of i)n[t]=s(t,e);return n}))}))),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(t){return this._withSyncedResources(t).then((t=>this.getProxy()))}}const ip={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},ep=new class{clone(){return this}equals(t){return this===t}};function sp(t,i){return new Rs([new Ls(0,"",t)],i)}function np(t,i){const e=new Uint32Array(2);return e[0]=0,e[1]=(32768|t|2<<24)>>>0,new Ts(e,i===null?ep:i)}class op{static getLanguageId(t){return(255&t)>>>0}static getTokenType(t){return(768&t)>>>8}static containsBalancedBrackets(t){return!!(1024&t)}static getFontStyle(t){return(30720&t)>>>11}static getForeground(t){return(16744448&t)>>>15}static getBackground(t){return(4278190080&t)>>>24}static getClassNameFromMetadata(t){let i="mtk"+this.getForeground(t);const e=this.getFontStyle(t);return 1&e&&(i+=" mtki"),2&e&&(i+=" mtkb"),4&e&&(i+=" mtku"),8&e&&(i+=" mtks"),i}static getInlineStyleFromMetadata(t,i){const e=this.getForeground(t),s=this.getFontStyle(t);let n=`color: ${i[e]};`;1&s&&(n+="font-style: italic;"),2&s&&(n+="font-weight: bold;");let o="";return 4&s&&(o+=" underline"),8&s&&(o+=" line-through"),o&&(n+=`text-decoration:${o};`),n}static getPresentationFromMetadata(t){const i=this.getForeground(t),e=this.getFontStyle(t);return{foreground:i,italic:!!(1&e),bold:!!(2&e),underline:!!(4&e),strikethrough:!!(8&e)}}}class rp{static createEmpty(t,i){const e=rp.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=t.length,s[1]=e,new rp(s,t,i)}constructor(t,i,e){this._lineTokensBrand=void 0,this._tokens=t,this._tokensCount=this._tokens.length>>>1,this._text=i,this._languageIdCodec=e}equals(t){return t instanceof rp&&this.slicedEquals(t,0,this._tokensCount)}slicedEquals(t,i,e){if(this._text!==t._text||this._tokensCount!==t._tokensCount)return!1;const s=i<<1,n=s+(e<<1);for(let i=s;i<n;i++)if(this._tokens[i]!==t._tokens[i])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(t){return t>0?this._tokens[t-1<<1]:0}getMetadata(t){return this._tokens[1+(t<<1)]}getLanguageId(t){const i=this._tokens[1+(t<<1)],e=op.getLanguageId(i);return this._languageIdCodec.decodeLanguageId(e)}getStandardTokenType(t){const i=this._tokens[1+(t<<1)];return op.getTokenType(i)}getForeground(t){const i=this._tokens[1+(t<<1)];return op.getForeground(i)}getClassName(t){const i=this._tokens[1+(t<<1)];return op.getClassNameFromMetadata(i)}getInlineStyle(t,i){const e=this._tokens[1+(t<<1)];return op.getInlineStyleFromMetadata(e,i)}getPresentation(t){const i=this._tokens[1+(t<<1)];return op.getPresentationFromMetadata(i)}getEndOffset(t){return this._tokens[t<<1]}findTokenIndexAtOffset(t){return rp.findIndexInTokensArray(this._tokens,t)}inflate(){return this}sliceAndInflate(t,i,e){return new hp(this,t,i,e)}static convertToEndOffset(t,i){const e=(t.length>>>1)-1;for(let i=0;i<e;i++)t[i<<1]=t[i+1<<1];t[e<<1]=i}static findIndexInTokensArray(t,i){if(t.length<=2)return 0;let e=0,s=(t.length>>>1)-1;for(;e<s;){const n=e+Math.floor((s-e)/2),o=t[n<<1];if(o===i)return n+1;o<i?e=n+1:o>i&&(s=n)}return e}withInserted(t){if(t.length===0)return this;let i=0,e=0,s="";const n=new Array;let o=0;for(;;){const r=i<this._tokensCount?this._tokens[i<<1]:-1,h=e<t.length?t[e]:null;if(r!==-1&&(h===null||r<=h.offset)){s+=this._text.substring(o,r);const t=this._tokens[1+(i<<1)];n.push(s.length,t),i++,o=r}else{if(!h)break;if(h.offset>o){s+=this._text.substring(o,h.offset);const t=this._tokens[1+(i<<1)];n.push(s.length,t),o=h.offset}s+=h.text,n.push(s.length,h.tokenMetadata),e++}}return new rp(new Uint32Array(n),s,this._languageIdCodec)}}rp.defaultTokenMetadata=33587200;class hp{constructor(t,i,e,s){this._source=t,this._startOffset=i,this._endOffset=e,this._deltaOffset=s,this._firstTokenIndex=t.findTokenIndexAtOffset(i),this._tokensCount=0;for(let i=this._firstTokenIndex,s=t.getCount();i<s&&!(t.getStartOffset(i)>=e);i++)this._tokensCount++}getMetadata(t){return this._source.getMetadata(this._firstTokenIndex+t)}getLanguageId(t){return this._source.getLanguageId(this._firstTokenIndex+t)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(t){return t instanceof hp&&this._startOffset===t._startOffset&&this._endOffset===t._endOffset&&this._deltaOffset===t._deltaOffset&&this._source.slicedEquals(t._source,this._firstTokenIndex,this._tokensCount)}getCount(){return this._tokensCount}getForeground(t){return this._source.getForeground(this._firstTokenIndex+t)}getEndOffset(t){const i=this._source.getEndOffset(this._firstTokenIndex+t);return Math.min(this._endOffset,i)-this._startOffset+this._deltaOffset}getClassName(t){return this._source.getClassName(this._firstTokenIndex+t)}getInlineStyle(t,i){return this._source.getInlineStyle(this._firstTokenIndex+t,i)}getPresentation(t){return this._source.getPresentation(this._firstTokenIndex+t)}findTokenIndexAtOffset(t){return this._source.findTokenIndexAtOffset(t+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class cp{constructor(t,i,e,s){this.startColumn=t,this.endColumn=i,this.className=e,this.type=s,this._lineDecorationBrand=void 0}static _equals(t,i){return t.startColumn===i.startColumn&&t.endColumn===i.endColumn&&t.className===i.className&&t.type===i.type}static equalsArr(t,i){const e=t.length;if(e!==i.length)return!1;for(let s=0;s<e;s++)if(!cp._equals(t[s],i[s]))return!1;return!0}static extractWrapped(t,i,e){if(t.length===0)return t;const s=i+1,n=e+1,o=e-i,r=[];let h=0;for(const i of t)i.endColumn<=s||i.startColumn>=n||(r[h++]=new cp(Math.max(1,i.startColumn-s+1),Math.min(o+1,i.endColumn-s+1),i.className,i.type));return r}static filter(t,i,e,s){if(t.length===0)return[];const n=[];let o=0;for(let r=0,h=t.length;r<h;r++){const h=t[r],c=h.range;if(c.endLineNumber<i||c.startLineNumber>i||c.isEmpty()&&(h.type===0||h.type===3))continue;const a=c.startLineNumber===i?c.startColumn:e,l=c.endLineNumber===i?c.endColumn:s;n[o++]=new cp(a,l,h.inlineClassName,h.type)}return n}static _typeCompare(t,i){const e=[2,0,1,3];return e[t]-e[i]}static compare(t,i){if(t.startColumn!==i.startColumn)return t.startColumn-i.startColumn;if(t.endColumn!==i.endColumn)return t.endColumn-i.endColumn;const e=cp._typeCompare(t.type,i.type);return e!==0?e:t.className!==i.className?t.className<i.className?-1:1:0}}class ap{constructor(t,i,e,s){this.startOffset=t,this.endOffset=i,this.className=e,this.metadata=s}}class lp{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(t){let i=0;for(let e=0,s=t.length;e<s;e++)i|=t[e];return i}consumeLowerThan(t,i,e){for(;this.count>0&&this.stopOffsets[0]<t;){let t=0;for(;t+1<this.count&&this.stopOffsets[t]===this.stopOffsets[t+1];)t++;e.push(new ap(i,this.stopOffsets[t],this.classNames.join(" "),lp._metadata(this.metadata))),i=this.stopOffsets[t]+1,this.stopOffsets.splice(0,t+1),this.classNames.splice(0,t+1),this.metadata.splice(0,t+1),this.count-=t+1}return this.count>0&&i<t&&(e.push(new ap(i,t-1,this.classNames.join(" "),lp._metadata(this.metadata))),i=t),i}insert(t,i,e){if(this.count===0||this.stopOffsets[this.count-1]<=t)this.stopOffsets.push(t),this.classNames.push(i),this.metadata.push(e);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=t){this.stopOffsets.splice(s,0,t),this.classNames.splice(s,0,i),this.metadata.splice(s,0,e);break}this.count++}}class up{static normalize(t,i){if(i.length===0)return[];const e=[],s=new lp;let n=0;for(let o=0,r=i.length;o<r;o++){const r=i[o];let h=r.startColumn,c=r.endColumn;const a=r.className,l=r.type===1?2:r.type===2?4:0;h>1&&mo(t.charCodeAt(h-2))&&h--,c>1&&mo(t.charCodeAt(c-2))&&c--;const u=h-1,d=c-2;n=s.consumeLowerThan(u,n,e),s.count===0&&(n=u),s.insert(d,a,l)}return s.consumeLowerThan(1073741824,n,e),e}}class dp{constructor(t,i,e,s){this.endIndex=t,this.type=i,this.metadata=e,this.containsRTL=s,this._linePartBrand=void 0}isWhitespace(){return!!(1&this.metadata)}isPseudoAfter(){return!!(4&this.metadata)}}class fp{constructor(t,i){this.startOffset=t,this.endOffset=i}equals(t){return this.startOffset===t.startOffset&&this.endOffset===t.endOffset}}class gp{constructor(t,i,e,s,n,o,r,h,c,a,l,u,d,f,g,A,p,w,m){this.useMonospaceOptimizations=t,this.canUseHalfwidthRightwardsArrow=i,this.lineContent=e,this.continuesWithWrappedLine=s,this.isBasicASCII=n,this.containsRTL=o,this.fauxIndentLength=r,this.lineTokens=h,this.lineDecorations=c.sort(cp.compare),this.tabSize=a,this.startVisibleColumn=l,this.spaceWidth=u,this.stopRenderingLineAfter=g,this.renderWhitespace=A==="all"?4:A==="boundary"?1:A==="selection"?2:A==="trailing"?3:0,this.renderControlCharacters=p,this.fontLigatures=w,this.selectionsOnLine=m&&m.sort(((t,i)=>t.startOffset<i.startOffset?-1:1)),Math.abs(f-u)<Math.abs(d-u)?(this.renderSpaceWidth=f,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=d,this.renderSpaceCharCode=183)}sameSelection(t){if(this.selectionsOnLine===null)return t===null;if(t===null||t.length!==this.selectionsOnLine.length)return!1;for(let i=0;i<this.selectionsOnLine.length;i++)if(!this.selectionsOnLine[i].equals(t[i]))return!1;return!0}equals(t){return this.useMonospaceOptimizations===t.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===t.canUseHalfwidthRightwardsArrow&&this.lineContent===t.lineContent&&this.continuesWithWrappedLine===t.continuesWithWrappedLine&&this.isBasicASCII===t.isBasicASCII&&this.containsRTL===t.containsRTL&&this.fauxIndentLength===t.fauxIndentLength&&this.tabSize===t.tabSize&&this.startVisibleColumn===t.startVisibleColumn&&this.spaceWidth===t.spaceWidth&&this.renderSpaceWidth===t.renderSpaceWidth&&this.renderSpaceCharCode===t.renderSpaceCharCode&&this.stopRenderingLineAfter===t.stopRenderingLineAfter&&this.renderWhitespace===t.renderWhitespace&&this.renderControlCharacters===t.renderControlCharacters&&this.fontLigatures===t.fontLigatures&&cp.equalsArr(this.lineDecorations,t.lineDecorations)&&this.lineTokens.equals(t.lineTokens)&&this.sameSelection(t.selectionsOnLine)}}class Ap{constructor(t,i){this.partIndex=t,this.charIndex=i}}class pp{static getPartIndex(t){return(4294901760&t)>>>16}static getCharIndex(t){return(65535&t)>>>0}constructor(t,i){this.length=t,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(t,i,e,s){const n=(i<<16|e)>>>0;this._data[t-1]=n,this._horizontalOffset[t-1]=s}getHorizontalOffset(t){return this._horizontalOffset.length===0?0:this._horizontalOffset[t-1]}charOffsetToPartData(t){return this.length===0?0:t<0?this._data[0]:t>=this.length?this._data[this.length-1]:this._data[t]}getDomPosition(t){const i=this.charOffsetToPartData(t-1),e=pp.getPartIndex(i),s=pp.getCharIndex(i);return new Ap(e,s)}getColumn(t,i){return this.partDataToCharOffset(t.partIndex,i,t.charIndex)+1}partDataToCharOffset(t,i,e){if(this.length===0)return 0;const s=(t<<16|e)>>>0;let n=0,o=this.length-1;for(;n+1<o;){const t=n+o>>>1,i=this._data[t];if(i===s)return t;i>s?o=t:n=t}if(n===o)return n;const r=this._data[n],h=this._data[o];if(r===s)return n;if(h===s)return o;const c=pp.getPartIndex(r),a=pp.getCharIndex(r);let l;return l=c!==pp.getPartIndex(h)?i:pp.getCharIndex(h),e-a<=l-e?n:o}}class wp{constructor(t,i,e){this._renderLineOutputBrand=void 0,this.characterMapping=t,this.containsRTL=i,this.containsForeignElements=e}}function mp(t,i){if(t.lineContent.length===0){if(t.lineDecorations.length>0){i.appendString("<span>");let e=0,s=0,n=0;for(const o of t.lineDecorations)o.type!==1&&o.type!==2||(i.appendString('<span class="'),i.appendString(o.className),i.appendString('"></span>'),o.type===1&&(n|=1,e++),o.type===2&&(n|=2,s++));i.appendString("</span>");const o=new pp(1,e+s);return o.setColumnInfo(1,e,0,0),new wp(o,!1,n)}return i.appendString("<span><span></span></span>"),new wp(new pp(0,0),!1,0)}return function(t,i){const e=t.fontIsMonospace,s=t.canUseHalfwidthRightwardsArrow,n=t.containsForeignElements,o=t.lineContent,r=t.len,h=t.isOverflowing,c=t.overflowingCharCount,a=t.parts,l=t.fauxIndentLength,u=t.tabSize,d=t.startVisibleColumn,f=t.containsRTL,g=t.spaceWidth,A=t.renderSpaceCharCode,p=t.renderWhitespace,w=t.renderControlCharacters,m=new pp(r+1,a.length);let v=!1,b=0,y=d,k=0,x=0,C=0;f?i.appendString('<span dir="ltr">'):i.appendString("<span>");for(let t=0,h=a.length;t<h;t++){const h=a[t],c=h.endIndex,d=h.type,f=h.containsRTL,E=p!==0&&h.isWhitespace(),B=E&&!e&&(d==="mtkw"||!n),D=b===c&&h.isPseudoAfter();if(k=0,i.appendString("<span "),f&&i.appendString('style="unicode-bidi:isolate" '),i.appendString('class="'),i.appendString(B?"mtkz":d),i.appendASCIICharCode(34),E){let e=0;{let t=b,i=y;for(;t<c;t++){const s=0|(o.charCodeAt(t)===9?u-i%u:1);e+=s,t>=l&&(i+=s)}}for(B&&(i.appendString(' style="width:'),i.appendString(String(g*e)),i.appendString('px"')),i.appendASCIICharCode(62);b<c;b++){m.setColumnInfo(b+1,t-C,k,x),C=0;let e,n;if(o.charCodeAt(b)===9){e=u-y%u|0,n=e,!s||n>1?i.appendCharCode(8594):i.appendCharCode(65515);for(let t=2;t<=n;t++)i.appendCharCode(160)}else e=2,n=1,i.appendCharCode(A),i.appendCharCode(8204);k+=e,x+=n,b>=l&&(y+=n)}}else for(i.appendASCIICharCode(62);b<c;b++){m.setColumnInfo(b+1,t-C,k,x),C=0;const e=o.charCodeAt(b);let s=1,n=1;switch(e){case 9:s=u-y%u,n=s;for(let t=1;t<=s;t++)i.appendCharCode(160);break;case 32:i.appendCharCode(160);break;case 60:i.appendString("&lt;");break;case 62:i.appendString("&gt;");break;case 38:i.appendString("&amp;");break;case 0:w?i.appendCharCode(9216):i.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:i.appendCharCode(65533);break;default:Lo(e)&&n++,w&&e<32?i.appendCharCode(9216+e):w&&e===127?i.appendCharCode(9249):w&&kp(e)?(i.appendString("[U+"),i.appendString(xp(e)),i.appendString("]"),s=8,n=s):i.appendCharCode(e)}k+=s,x+=n,b>=l&&(y+=n)}D?C++:C=0,b>=r&&!v&&h.isPseudoAfter()&&(v=!0,m.setColumnInfo(b+1,t,k,x)),i.appendString("</span>")}return v||m.setColumnInfo(r+1,a.length-1,k,x),h&&(i.appendString('<span class="mtkoverflow">'),i.appendString(st(0,"Show more ({0})",function(t){return t<1024?st(0,"{0} chars",t):t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1024/1024).toFixed(1)} MB`}(c))),i.appendString("</span>")),i.appendString("</span>"),new wp(m,f,n)}(function(t){const i=t.lineContent;let e,s,n;t.stopRenderingLineAfter!==-1&&t.stopRenderingLineAfter<i.length?(e=!0,s=i.length-t.stopRenderingLineAfter,n=t.stopRenderingLineAfter):(e=!1,s=0,n=i.length);let o=function(t,i,e,s,n){const o=[];let r=0;s>0&&(o[r++]=new dp(s,"",0,!1));let h=s;for(let c=0,a=e.getCount();c<a;c++){const a=e.getEndOffset(c);if(a<=s)continue;const l=e.getClassName(c);if(a>=n){const e=!!i&&Do(t.substring(h,n));o[r++]=new dp(n,l,0,e);break}const u=!!i&&Do(t.substring(h,a));o[r++]=new dp(a,l,0,u),h=a}return o}(i,t.containsRTL,t.lineTokens,t.fauxIndentLength,n);t.renderControlCharacters&&!t.isBasicASCII&&(o=function(t,i){const e=[];let s=new dp(0,"",0,!1),n=0;for(const o of i){const i=o.endIndex;for(;n<i;n++)kp(t.charCodeAt(n))&&(n>s.endIndex&&(s=new dp(n,o.type,o.metadata,o.containsRTL),e.push(s)),s=new dp(n+1,"mtkcontrol",o.metadata,!1),e.push(s));n>s.endIndex&&(s=new dp(i,o.type,o.metadata,o.containsRTL),e.push(s))}return e}(i,o)),(t.renderWhitespace===4||t.renderWhitespace===1||t.renderWhitespace===2&&t.selectionsOnLine||t.renderWhitespace===3&&!t.continuesWithWrappedLine)&&(o=function(t,i,e,s){const n=t.continuesWithWrappedLine,o=t.fauxIndentLength,r=t.tabSize,h=t.startVisibleColumn,c=t.useMonospaceOptimizations,a=t.selectionsOnLine,l=t.renderWhitespace===1,u=t.renderWhitespace===3,d=t.renderSpaceWidth!==t.spaceWidth,f=[];let g=0,A=0,p=s[A].type,w=s[A].containsRTL,m=s[A].endIndex;const v=s.length;let b,y=!1,k=so(i);k===-1?(y=!0,k=e,b=e):b=oo(i);let x=!1,C=0,E=a&&a[C],B=h%r;for(let t=o;t<e;t++){const n=i.charCodeAt(t);let h;if(E&&t>=E.endOffset&&(C++,E=a&&a[C]),t<k||t>b)h=!0;else if(n===9)h=!0;else if(n===32)if(l)if(x)h=!0;else{const s=t+1<e?i.charCodeAt(t+1):0;h=s===32||s===9}else h=!0;else h=!1;if(h&&a&&(h=!!E&&E.startOffset<=t&&E.endOffset>t),h&&u&&(h=y||t>b),h&&w&&t>=k&&t<=b&&(h=!1),x){if(!h||!c&&B>=r){if(d)for(let i=(g>0?f[g-1].endIndex:o)+1;i<=t;i++)f[g++]=new dp(i,"mtkw",1,!1);else f[g++]=new dp(t,"mtkw",1,!1);B%=r}}else(t===m||h&&t>o)&&(f[g++]=new dp(t,p,0,w),B%=r);for(n===9?B=r:Lo(n)?B+=2:B++,x=h;t===m&&(A++,A<v);)p=s[A].type,w=s[A].containsRTL,m=s[A].endIndex}let D=!1;if(x)if(n&&l){const t=e>0?i.charCodeAt(e-1):0,s=e>1?i.charCodeAt(e-2):0;t===32&&s!==32&&s!==9||(D=!0)}else D=!0;if(D)if(d)for(let t=(g>0?f[g-1].endIndex:o)+1;t<=e;t++)f[g++]=new dp(t,"mtkw",1,!1);else f[g++]=new dp(e,"mtkw",1,!1);else f[g++]=new dp(e,p,0,w);return f}(t,i,n,o));let r=0;if(t.lineDecorations.length>0){for(let i=0,e=t.lineDecorations.length;i<e;i++){const e=t.lineDecorations[i];e.type===3||e.type===1?r|=1:e.type===2&&(r|=2)}o=function(t,i,e,s){s.sort(cp.compare);const n=up.normalize(t,s),o=n.length;let r=0;const h=[];let c=0,a=0;for(let t=0,i=e.length;t<i;t++){const i=e[t],s=i.endIndex,l=i.type,u=i.metadata,d=i.containsRTL;for(;r<o&&n[r].startOffset<s;){const t=n[r];if(t.startOffset>a&&(a=t.startOffset,h[c++]=new dp(a,l,u,d)),!(t.endOffset+1<=s)){a=s,h[c++]=new dp(a,l+" "+t.className,u|t.metadata,d);break}a=t.endOffset+1,h[c++]=new dp(a,l+" "+t.className,u|t.metadata,d),r++}s>a&&(a=s,h[c++]=new dp(a,l,u,d))}const l=e[e.length-1].endIndex;if(r<o&&n[r].startOffset===l)for(;r<o&&n[r].startOffset===l;){const t=n[r];h[c++]=new dp(a,t.className,t.metadata,!1),r++}return h}(i,0,o,t.lineDecorations)}return t.containsRTL||(o=function(t,i,e){let s=0;const n=[];let o=0;if(e)for(let e=0,r=i.length;e<r;e++){const r=i[e],h=r.endIndex;if(s+50<h){const i=r.type,e=r.metadata,c=r.containsRTL;let a=-1,l=s;for(let r=s;r<h;r++)t.charCodeAt(r)===32&&(a=r),a!==-1&&r-l>=50&&(n[o++]=new dp(a+1,i,e,c),l=a+1,a=-1);l!==h&&(n[o++]=new dp(h,i,e,c))}else n[o++]=r;s=h}else for(let t=0,e=i.length;t<e;t++){const e=i[t],r=e.endIndex,h=r-s;if(h>50){const t=e.type,i=e.metadata,c=e.containsRTL,a=Math.ceil(h/50);for(let e=1;e<a;e++){const r=s+50*e;n[o++]=new dp(r,t,i,c)}n[o++]=new dp(r,t,i,c)}else n[o++]=e;s=r}return n}(i,o,!t.isBasicASCII||t.fontLigatures)),new yp(t.useMonospaceOptimizations,t.canUseHalfwidthRightwardsArrow,i,n,e,s,o,r,t.fauxIndentLength,t.tabSize,t.startVisibleColumn,t.containsRTL,t.spaceWidth,t.renderSpaceCharCode,t.renderWhitespace,t.renderControlCharacters)}(t),i)}class vp{constructor(t,i,e,s){this.characterMapping=t,this.html=i,this.containsRTL=e,this.containsForeignElements=s}}function bp(t){const i=new wd(1e4),e=mp(t,i);return new vp(e.characterMapping,i.build(),e.containsRTL,e.containsForeignElements)}class yp{constructor(t,i,e,s,n,o,r,h,c,a,l,u,d,f,g,A){this.fontIsMonospace=t,this.canUseHalfwidthRightwardsArrow=i,this.lineContent=e,this.len=s,this.isOverflowing=n,this.overflowingCharCount=o,this.parts=r,this.containsForeignElements=h,this.fauxIndentLength=c,this.tabSize=a,this.startVisibleColumn=l,this.containsRTL=u,this.spaceWidth=d,this.renderSpaceCharCode=f,this.renderWhitespace=g,this.renderControlCharacters=A}}function kp(t){return t<32?t!==9:t===127||t>=8234&&t<=8238||t>=8294&&t<=8297||t>=8206&&t<=8207||t===1564}function xp(t){return t.toString(16).toUpperCase().padStart(4,"0")}class Cp{constructor(t,i,e,s){this._viewportBrand=void 0,this.top=0|t,this.left=0|i,this.width=0|e,this.height=0|s}}class Ep{constructor(t,i){this.tabSize=t,this.data=i}}class Bp{constructor(t,i,e,s,n,o,r){this._viewLineDataBrand=void 0,this.content=t,this.continuesWithWrappedLine=i,this.minColumn=e,this.maxColumn=s,this.startVisibleColumn=n,this.tokens=o,this.inlineDecorations=r}}class Dp{constructor(t,i,e,s,n,o,r,h,c,a){this.minColumn=t,this.maxColumn=i,this.content=e,this.continuesWithWrappedLine=s,this.isBasicASCII=Dp.isBasicASCII(e,o),this.containsRTL=Dp.containsRTL(e,this.isBasicASCII,n),this.tokens=r,this.inlineDecorations=h,this.tabSize=c,this.startVisibleColumn=a}static isBasicASCII(t,i){return!i||So(t)}static containsRTL(t,i,e){return!(i||!e)&&Do(t)}}class Mp{constructor(t,i,e){this.range=t,this.inlineClassName=i,this.type=e}}class Sp{constructor(t,i,e,s){this.startOffset=t,this.endOffset=i,this.inlineClassName=e,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(t){return new Mp(new Es(t,this.startOffset+1,t,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class Fp{constructor(t,i){this._viewModelDecorationBrand=void 0,this.range=t,this.options=i}}class Ip{constructor(t,i,e){this.color=t,this.zIndex=i,this.data=e}static compareByRenderingProps(t,i){return t.zIndex===i.zIndex?t.color<i.color?-1:t.color>i.color?1:0:t.zIndex-i.zIndex}static equals(t,i){return t.color===i.color&&t.zIndex===i.zIndex&&h(t.data,i.data)}static equalsArr(t,i){return h(t,i,Ip.equals)}}function Lp(t){return!function(t){return Array.isArray(t)}(t)}function Rp(t){return typeof t=="string"}function Tp(t){return!Rp(t)}function Np(t){return!t}function Qp(t,i){return t.ignoreCase&&i?i.toLowerCase():i}function Op(t){return t.replace(/[&<>'"_]/g,"-")}function zp(t,i){return new Error(`${t.languageId}: ${i}`)}function Up(t,i,e,s,n){let o=null;return i.replace(/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,(function(i,r,h,c,a,l,u,d,f){return Np(h)?Np(c)?!Np(a)&&a<s.length?Qp(t,s[a]):!Np(u)&&t&&typeof t[u]=="string"?t[u]:(o===null&&(o=n.split("."),o.unshift(n)),!Np(l)&&l<o.length?Qp(t,o[l]):""):Qp(t,e):"$"}))}function Hp(t,i){let e=i;for(;e&&e.length>0;){const i=t.tokenizer[e];if(i)return i;const s=e.lastIndexOf(".");e=s<0?null:e.substr(0,s)}return null}var Pp,jp=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Wp=function(t,i){return function(e,s){i(e,s,t)}};class Yp{static create(t,i){return this._INSTANCE.create(t,i)}constructor(t){this._maxCacheDepth=t,this._entries=Object.create(null)}create(t,i){if(t!==null&&t.depth>=this._maxCacheDepth)return new _p(t,i);let e=_p.getStackElementId(t);e.length>0&&(e+="|"),e+=i;let s=this._entries[e];return s||(s=new _p(t,i),this._entries[e]=s,s)}}Yp._INSTANCE=new Yp(5);class _p{constructor(t,i){this.parent=t,this.state=i,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(t){let i="";for(;t!==null;)i.length>0&&(i+="|"),i+=t.state,t=t.parent;return i}static _equals(t,i){for(;t!==null&&i!==null;){if(t===i)return!0;if(t.state!==i.state)return!1;t=t.parent,i=i.parent}return t===null&&i===null}equals(t){return _p._equals(this,t)}push(t){return Yp.create(this,t)}pop(){return this.parent}popall(){let t=this;for(;t.parent;)t=t.parent;return t}switchTo(t){return Yp.create(this.parent,t)}}class Vp{constructor(t,i){this.languageId=t,this.state=i}equals(t){return this.languageId===t.languageId&&this.state.equals(t.state)}clone(){return this.state.clone()===this.state?this:new Vp(this.languageId,this.state)}}class Jp{static create(t,i){return this._INSTANCE.create(t,i)}constructor(t){this._maxCacheDepth=t,this._entries=Object.create(null)}create(t,i){if(i!==null)return new Gp(t,i);if(t!==null&&t.depth>=this._maxCacheDepth)return new Gp(t,i);const e=_p.getStackElementId(t);let s=this._entries[e];return s||(s=new Gp(t,null),this._entries[e]=s,s)}}Jp._INSTANCE=new Jp(5);class Gp{constructor(t,i){this.stack=t,this.embeddedLanguageData=i}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Jp.create(this.stack,this.embeddedLanguageData)}equals(t){return t instanceof Gp&&!!this.stack.equals(t.stack)&&(this.embeddedLanguageData===null&&t.embeddedLanguageData===null||this.embeddedLanguageData!==null&&t.embeddedLanguageData!==null&&this.embeddedLanguageData.equals(t.embeddedLanguageData))}}class Kp{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(t){this._languageId=t}emit(t,i){this._lastTokenType===i&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=i,this._lastTokenLanguage=this._languageId,this._tokens.push(new Ls(t,i,this._languageId)))}nestedLanguageTokenize(t,i,e,s){const n=e.languageId,o=e.state,r=Gs.get(n);if(!r)return this.enterLanguage(n),this.emit(s,""),o;const h=r.tokenize(t,i,o);if(s!==0)for(const t of h.tokens)this._tokens.push(new Ls(t.offset+s,t.type,t.language));else this._tokens=this._tokens.concat(h.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,h.endState}finalize(t){return new Rs(this._tokens,t)}}class $p{constructor(t,i){this._languageService=t,this._theme=i,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(t){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(t)}emit(t,i){const e=1024|this._theme.match(this._currentLanguageId,i);this._lastTokenMetadata!==e&&(this._lastTokenMetadata=e,this._tokens.push(t),this._tokens.push(e))}static _merge(t,i,e){const s=t!==null?t.length:0,n=i.length,o=e!==null?e.length:0;if(s===0&&n===0&&o===0)return new Uint32Array(0);if(s===0&&n===0)return e;if(n===0&&o===0)return t;const r=new Uint32Array(s+n+o);t!==null&&r.set(t);for(let t=0;t<n;t++)r[s+t]=i[t];return e!==null&&r.set(e,s+n),r}nestedLanguageTokenize(t,i,e,s){const n=e.languageId,o=e.state,r=Gs.get(n);if(!r)return this.enterLanguage(n),this.emit(s,""),o;const h=r.tokenizeEncoded(t,i,o);if(s!==0)for(let t=0,i=h.tokens.length;t<i;t+=2)h.tokens[t]+=s;return this._prependTokens=$p._merge(this._prependTokens,this._tokens,h.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,h.endState}finalize(t){return new Ts($p._merge(this._prependTokens,this._tokens,null),t)}}let Xp=Pp=class extends te{constructor(t,i,e,s,n){super(),this._configurationService=n,this._languageService=t,this._standaloneThemeService=i,this._languageId=e,this._lexer=s,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._register(Gs.onDidChange((t=>{if(o)return;let i=!1;for(let e=0,s=t.changedLanguages.length;e<s;e++){const s=t.changedLanguages[e];if(this._embeddedLanguages[s]){i=!0;break}}i&&(o=!0,Gs.handleChange([this._languageId]),o=!1)}))),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration((t=>{t.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})))}getLoadStatus(){const t=[];for(const i in this._embeddedLanguages){const e=Gs.get(i);if(e){if(e instanceof Pp){const i=e.getLoadStatus();i.loaded===!1&&t.push(i.promise)}}else Gs.isResolved(i)||t.push(Gs.getOrCreate(i))}return t.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(t).then((t=>{}))}}getInitialState(){const t=Yp.create(null,this._lexer.start);return Jp.create(t,null)}tokenize(t,i,e){if(t.length>=this._maxTokenizationLineLength)return sp(this._languageId,e);const s=new Kp,n=this._tokenize(t,i,e,s);return s.finalize(n)}tokenizeEncoded(t,i,e){if(t.length>=this._maxTokenizationLineLength)return np(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),e);const s=new $p(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),n=this._tokenize(t,i,e,s);return s.finalize(n)}_tokenize(t,i,e,s){return e.embeddedLanguageData?this._nestedTokenize(t,i,e,0,s):this._myTokenize(t,i,e,0,s)}_findLeavingNestedLanguageOffset(t,i){let e=this._lexer.tokenizer[i.stack.state];if(!e&&(e=Hp(this._lexer,i.stack.state),!e))throw zp(this._lexer,"tokenizer state is not defined: "+i.stack.state);let s=-1,n=!1;for(const o of e){if(!Tp(o.action)||o.action.nextEmbedded!=="@pop")continue;n=!0;let e=o.resolveRegex(i.stack.state);const r=e.source;if(r.substr(0,4)==="^(?:"&&r.substr(r.length-1,1)===")"){const t=(e.ignoreCase?"i":"")+(e.unicode?"u":"");e=new RegExp(r.substr(4,r.length-5),t)}const h=t.search(e);h===-1||h!==0&&o.matchOnlyAtLineStart||(s===-1||h<s)&&(s=h)}if(!n)throw zp(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+i.stack.state);return s}_nestedTokenize(t,i,e,s,n){const o=this._findLeavingNestedLanguageOffset(t,e);if(o===-1){const o=n.nestedLanguageTokenize(t,i,e.embeddedLanguageData,s);return Jp.create(e.stack,new Vp(e.embeddedLanguageData.languageId,o))}const r=t.substring(0,o);r.length>0&&n.nestedLanguageTokenize(r,!1,e.embeddedLanguageData,s);const h=t.substring(o);return this._myTokenize(h,i,e,s+o,n)}_safeRuleName(t){return t?t.name:"(unknown)"}_myTokenize(t,i,e,s,n){n.enterLanguage(this._languageId);const o=t.length,r=i&&this._lexer.includeLF?t+`\n`:t,h=r.length;let c=e.embeddedLanguageData,a=e.stack,l=0,u=null,d=!0;for(;d||l<h;){const e=l,A=a.depth,p=u?u.groups.length:0,w=a.state;let m=null,v=null,b=null,y=null,k=null;if(u){m=u.matches;const t=u.groups.shift();v=t.matched,b=t.action,y=u.rule,u.groups.length===0&&(u=null)}else{if(!d&&l>=h)break;d=!1;let t=this._lexer.tokenizer[w];if(!t&&(t=Hp(this._lexer,w),!t))throw zp(this._lexer,"tokenizer state is not defined: "+w);const i=r.substr(l);for(const e of t)if((l===0||!e.matchOnlyAtLineStart)&&(m=i.match(e.resolveRegex(w)),m)){v=m[0],b=e.action;break}}if(m||(m=[""],v=""),b||(l<h&&(m=[r.charAt(l)],v=m[0]),b=this._lexer.defaultToken),v===null)break;for(l+=v.length;Lp(b)&&Tp(b)&&b.test;)b=b.test(v,m,w,l===h);let x=null;if(typeof b=="string"||Array.isArray(b))x=b;else if(b.group)x=b.group;else if(b.token!==null&&b.token!==void 0){if(x=b.tokenSubst?Up(this._lexer,b.token,v,m,w):b.token,b.nextEmbedded)if(b.nextEmbedded==="@pop"){if(!c)throw zp(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw zp(this._lexer,"cannot enter embedded language from within an embedded language");k=Up(this._lexer,b.nextEmbedded,v,m,w)}if(b.goBack&&(l=Math.max(0,l-b.goBack)),b.switchTo&&typeof b.switchTo=="string"){let t=Up(this._lexer,b.switchTo,v,m,w);if(t[0]==="@"&&(t=t.substr(1)),!Hp(this._lexer,t))throw zp(this._lexer,"trying to switch to a state '"+t+"' that is undefined in rule: "+this._safeRuleName(y));a=a.switchTo(t)}else{if(b.transform&&typeof b.transform=="function")throw zp(this._lexer,"action.transform not supported");if(b.next)if(b.next==="@push"){if(a.depth>=this._lexer.maxStack)throw zp(this._lexer,"maximum tokenizer stack size reached: ["+a.state+","+a.parent.state+",...]");a=a.push(w)}else if(b.next==="@pop"){if(a.depth<=1)throw zp(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(y));a=a.pop()}else if(b.next==="@popall")a=a.popall();else{let t=Up(this._lexer,b.next,v,m,w);if(t[0]==="@"&&(t=t.substr(1)),!Hp(this._lexer,t))throw zp(this._lexer,"trying to set a next state '"+t+"' that is undefined in rule: "+this._safeRuleName(y));a=a.push(t)}}b.log&&typeof b.log=="string"&&(f=this._lexer,g=this._lexer.languageId+": "+Up(this._lexer,b.log,v,m,w),console.log(`${f.languageId}: ${g}`))}if(x===null)throw zp(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(y));const C=e=>{const o=this._languageService.getLanguageIdByLanguageName(e)||this._languageService.getLanguageIdByMimeType(e)||e,r=this._getNestedEmbeddedLanguageData(o);if(l<h){const e=t.substr(l);return this._nestedTokenize(e,i,Jp.create(a,r),s+l,n)}return Jp.create(a,r)};if(Array.isArray(x)){if(u&&u.groups.length>0)throw zp(this._lexer,"groups cannot be nested: "+this._safeRuleName(y));if(m.length!==x.length+1)throw zp(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(y));let t=0;for(let i=1;i<m.length;i++)t+=m[i].length;if(t!==v.length)throw zp(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(y));u={rule:y,matches:m,groups:[]};for(let t=0;t<x.length;t++)u.groups[t]={action:x[t],matched:m[t+1]};l-=v.length}else{{if(x==="@rematch"&&(l-=v.length,v="",m=null,x="",k!==null))return C(k);if(v.length===0){if(h===0||A!==a.depth||w!==a.state||(u?u.groups.length:0)!==p)continue;throw zp(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(y))}let t=null;if(Rp(x)&&x.indexOf("@brackets")===0){const i=x.substr(9),e=qp(this._lexer,v);if(!e)throw zp(this._lexer,"@brackets token returned but no bracket defined as: "+v);t=Op(e.token+i)}else t=Op(x===""?"":x+this._lexer.tokenPostfix);e<o&&n.emit(e+s,t)}if(k!==null)return C(k)}}var f,g;return Jp.create(a,c)}_getNestedEmbeddedLanguageData(t){if(!this._languageService.isRegisteredLanguageId(t))return new Vp(t,ep);t!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(t),Gs.getOrCreate(t),this._embeddedLanguages[t]=!0);const i=Gs.get(t);return new Vp(t,i?i.getInitialState():ep)}};function qp(t,i){if(!i)return null;i=Qp(t,i);const e=t.brackets;for(const t of e){if(t.open===i)return{token:t.token,bracketType:1};if(t.close===i)return{token:t.token,bracketType:-1}}return null}Xp=Pp=jp([Wp(4,Id)],Xp);const Zp=Yu("standaloneColorizer",{createHTML:t=>t});class tw{static colorizeElement(t,i,e,s){const n=(s=s||{}).theme||"vs",o=s.mimeType||e.getAttribute("lang")||e.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const r=i.getLanguageIdByMimeType(o)||o;t.setTheme(n);const h=e.firstChild?e.firstChild.nodeValue:"";return e.className+=" "+n,this.colorize(i,h||"",r,s).then((t=>{var i;const s=(i=Zp==null?void 0:Zp.createHTML(t))!==null&&i!==void 0?i:t;e.innerHTML=s}),(t=>console.error(t)))}static async colorize(t,i,e,s){const n=t.languageIdCodec;let o=4;s&&typeof s.tabSize=="number"&&(o=s.tabSize),No(i)&&(i=i.substr(1));const r=eo(i);if(!t.isRegisteredLanguageId(e))return iw(r,o,n);const h=await Gs.getOrCreate(e);return h?function(t,i,e,s){return new Promise(((n,o)=>{const r=()=>{const h=function(t,i,e,s){let n=[],o=e.getInitialState();for(let r=0,h=t.length;r<h;r++){const h=t[r],c=e.tokenizeEncoded(h,!0,o);rp.convertToEndOffset(c.tokens,h.length);const a=new rp(c.tokens,h,s),l=Dp.isBasicASCII(h,!0),u=Dp.containsRTL(h,l,!0),d=bp(new gp(!1,!0,h,!1,l,u,0,a.inflate(),[],i,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(d.html),n.push("<br/>"),o=c.endState}return n.join("")}(t,i,e,s);if(e instanceof Xp){const t=e.getLoadStatus();if(t.loaded===!1)return void t.promise.then(r,o)}n(h)};r()}))}(r,o,h,n):iw(r,o,n)}static colorizeLine(t,i,e,s,n=4){const o=Dp.isBasicASCII(t,i),r=Dp.containsRTL(t,o,e);return bp(new gp(!1,!0,t,!1,o,r,0,s,[],n,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(t,i,e=4){const s=t.getLineContent(i);t.tokenization.forceTokenization(i);const n=t.tokenization.getLineTokens(i).inflate();return this.colorizeLine(s,t.mightContainNonBasicASCII(),t.mightContainRTL(),n,e)}}function iw(t,i,e){let s=[];const n=new Uint32Array(2);n[0]=0,n[1]=33587200;for(let o=0,r=t.length;o<r;o++){const r=t[o];n[0]=r.length;const h=new rp(n,r,e),c=Dp.isBasicASCII(r,!0),a=Dp.containsRTL(r,c,!0),l=bp(new gp(!1,!0,r,!1,c,a,0,h,[],i,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(l.html),s.push("<br/>")}return s.join("")}const ew=2e4;let sw,nw,ow,rw,hw;function cw(t){sw&&(nw.textContent!==t?(nc(ow),lw(nw,t)):(nc(nw),lw(ow,t)))}function aw(t){sw&&(rw.textContent!==t?(nc(hw),lw(rw,t)):(nc(rw),lw(hw,t)))}function lw(t,i){nc(t),i.length>ew&&(i=i.substr(0,ew)),t.textContent=i,t.style.visibility="hidden",t.style.visibility="visible"}const uw=za("markerDecorationsService");var dw=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},fw=function(t,i){return function(e,s){i(e,s,t)}};let gw=class{constructor(t,i){}dispose(){}};gw.ID="editor.contrib.markerDecorations",gw=dw([fw(1,uw)],gw),Bu(gw.ID,gw,0);class Aw extends te{constructor(t,i){super(),this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._referenceDomElement=t,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,i)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let t=null;const i=()=>{t?this.observe({width:t.width,height:t.height}):this.observe()};let e=!1,s=!1;const n=()=>{if(e&&!s)try{e=!1,s=!0,i()}finally{fc(Gh(this._referenceDomElement),(()=>{s=!1,n()}))}};this._resizeObserver=new ResizeObserver((i=>{t=i&&i[0]&&i[0].contentRect?{width:i[0].contentRect.width,height:i[0].contentRect.height}:null,e=!0,n()})),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(t){this.measureReferenceDomElement(!0,t)}measureReferenceDomElement(t,i){let e=0,s=0;i?(e=i.width,s=i.height):this._referenceDomElement&&(e=this._referenceDomElement.clientWidth,s=this._referenceDomElement.clientHeight),e=Math.max(5,e),s=Math.max(5,s),this._width===e&&this._height===s||(this._width=e,this._height=s,t&&this._onDidChange.fire())}}class pw{constructor(t,i){this.key=t,this.migrate=i}apply(t){const i=pw._read(t,this.key);this.migrate(i,(i=>pw._read(t,i)),((i,e)=>pw._write(t,i,e)))}static _read(t,i){if(t===void 0)return;const e=i.indexOf(".");if(e>=0){const s=i.substring(0,e);return this._read(t[s],i.substring(e+1))}return t[i]}static _write(t,i,e){const s=i.indexOf(".");if(s>=0){const n=i.substring(0,s);return t[n]=t[n]||{},void this._write(t[n],i.substring(s+1),e)}t[i]=e}}function ww(t,i){pw.items.push(new pw(t,i))}function mw(t,i){ww(t,((e,s,n)=>{if(e!==void 0){for(const[s,o]of i)if(e===s)return void n(t,o)}}))}pw.items=[],mw("wordWrap",[[!0,"on"],[!1,"off"]]),mw("lineNumbers",[[!0,"on"],[!1,"off"]]),mw("cursorBlinking",[["visible","solid"]]),mw("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),mw("renderLineHighlight",[[!0,"line"],[!1,"none"]]),mw("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),mw("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),mw("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),mw("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),mw("autoIndent",[[!1,"advanced"],[!0,"full"]]),mw("matchBrackets",[[!0,"always"],[!1,"never"]]),mw("renderFinalNewline",[[!0,"on"],[!1,"off"]]),mw("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),mw("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]),mw("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]),ww("autoClosingBrackets",((t,i,e)=>{t===!1&&(e("autoClosingBrackets","never"),i("autoClosingQuotes")===void 0&&e("autoClosingQuotes","never"),i("autoSurround")===void 0&&e("autoSurround","never"))})),ww("renderIndentGuides",((t,i,e)=>{t!==void 0&&(e("renderIndentGuides",void 0),i("guides.indentation")===void 0&&e("guides.indentation",!!t))})),ww("highlightActiveIndentGuide",((t,i,e)=>{t!==void 0&&(e("highlightActiveIndentGuide",void 0),i("guides.highlightActiveIndentation")===void 0&&e("guides.highlightActiveIndentation",!!t))}));const vw={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};ww("suggest.filteredTypes",((t,i,e)=>{if(t&&typeof t=="object"){for(const s of Object.entries(vw))t[s[0]]===!1&&i(`suggest.${s[1]}`)===void 0&&e(`suggest.${s[1]}`,!1);e("suggest.filteredTypes",void 0)}})),ww("quickSuggestions",((t,i,e)=>{if(typeof t=="boolean"){const i=t?"on":"off";e("quickSuggestions",{comments:i,strings:i,other:i})}})),ww("experimental.stickyScroll.enabled",((t,i,e)=>{typeof t=="boolean"&&(e("experimental.stickyScroll.enabled",void 0),i("stickyScroll.enabled")===void 0&&e("stickyScroll.enabled",t))})),ww("experimental.stickyScroll.maxLineCount",((t,i,e)=>{typeof t=="number"&&(e("experimental.stickyScroll.maxLineCount",void 0),i("stickyScroll.maxLineCount")===void 0&&e("stickyScroll.maxLineCount",t))})),ww("codeActionsOnSave",((t,i,e)=>{if(t&&typeof t=="object"){let i=!1;const s={};for(const e of Object.entries(t))typeof e[1]=="boolean"?(i=!0,s[e[0]]=e[1]?"explicit":"never"):s[e[0]]=e[1];i&&e("codeActionsOnSave",s)}})),ww("codeActionWidget.includeNearbyQuickfixes",((t,i,e)=>{typeof t=="boolean"&&(e("codeActionWidget.includeNearbyQuickfixes",void 0),i("codeActionWidget.includeNearbyQuickFixes")===void 0&&e("codeActionWidget.includeNearbyQuickFixes",t))})),ww("lightbulb.enabled",((t,i,e)=>{typeof t=="boolean"&&e("lightbulb.enabled",t?void 0:"off")}));const bw=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new de,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(t){this._tabFocus=t,this._onDidChangeTabFocus.fire(this._tabFocus)}},yw=za("accessibilityService"),kw=new Tl("accessibilityModeEnabled",!1);var xw=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Cw=function(t,i){return function(e,s){i(e,s,t)}};let Ew=class extends te{constructor(t,i,e,s){super(),this._accessibilityService=s,this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new de),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Zt,this.isSimpleWidget=t,this._containerObserver=this._register(new Aw(e,i.dimension)),this._targetWindowId=Gh(e).vscodeWindowId,this._rawOptions=Fw(i),this._validatedOptions=Sw.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Fa.onDidChangeZoomLevel((()=>this._recomputeOptions()))),this._register(bw.onDidChangeTabFocus((()=>this._recomputeOptions()))),this._register(this._containerObserver.onDidChange((()=>this._recomputeOptions()))),this._register(Na.onDidChange((()=>this._recomputeOptions()))),this._register(xa.getInstance(Gh(e)).onDidChange((()=>this._recomputeOptions()))),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized((()=>this._recomputeOptions())))}_recomputeOptions(){const t=this._computeOptions(),i=Sw.checkEquals(this.options,t);i!==null&&(this.options=t,this._onDidChangeFast.fire(i),this._onDidChange.fire(i))}_computeOptions(){const t=this._readEnvConfiguration(),i=La.createFromValidatedSettings(this._validatedOptions,t.pixelRatio,this.isSimpleWidget),e=this._readFontInfo(i),s={memory:this._computeOptionsMemory,outerWidth:t.outerWidth,outerHeight:t.outerHeight-this._reservedHeight,fontInfo:e,extraEditorClassName:t.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:t.emptySelectionClipboard,pixelRatio:t.pixelRatio,tabFocusMode:bw.getTabFocusMode(),accessibilitySupport:t.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Sw.computeOptions(this._validatedOptions,s)}_readEnvConfiguration(){return{extraEditorClassName:Bw(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Jo||Vo,pixelRatio:xa.getInstance(Zh(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(t){return Na.readFontInfo(Zh(this._targetWindowId,!0).window,t)}getRawOptions(){return this._rawOptions}updateOptions(t){const i=Fw(t);Sw.applyUpdate(this._rawOptions,i)&&(this._validatedOptions=Sw.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(t){this._containerObserver.observe(t)}setIsDominatedByLongLines(t){this._isDominatedByLongLines!==t&&(this._isDominatedByLongLines=t,this._recomputeOptions())}setModelLineCount(t){const i=function(t){let i=0;for(;t;)t=Math.floor(t/10),i++;return i||1}(t);this._lineNumbersDigitCount!==i&&(this._lineNumbersDigitCount=i,this._recomputeOptions())}setViewLineCount(t){this._viewLineCount!==t&&(this._viewLineCount=t,this._recomputeOptions())}setReservedHeight(t){this._reservedHeight!==t&&(this._reservedHeight=t,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(t){this._glyphMarginDecorationLaneCount!==t&&(this._glyphMarginDecorationLaneCount=t,this._recomputeOptions())}};function Bw(){let t="";return Ko||$o||(t+="no-user-select "),Ko&&(t+="no-minimap-shadow ",t+="enable-user-select "),kt&&(t+="mac "),t}Ew=xw([Cw(3,yw)],Ew);class Dw{constructor(){this._values=[]}_read(t){return this._values[t]}get(t){return this._values[t]}_write(t,i){this._values[t]=i}}class Mw{constructor(){this._values=[]}_read(t){if(t>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[t]}get(t){return this._read(t)}_write(t,i){this._values[t]=i}}class Sw{static validateOptions(t){const i=new Dw;for(const e of Ri){const s=e.name==="_never_"?void 0:t[e.name];i._write(e.id,e.validate(s))}return i}static computeOptions(t,i){const e=new Mw;for(const s of Ri)e._write(s.id,s.compute(i,e,t._read(s.id)));return e}static _deepEquals(t,i){if(typeof t!="object"||typeof i!="object"||!t||!i)return t===i;if(Array.isArray(t)||Array.isArray(i))return!(!Array.isArray(t)||!Array.isArray(i))&&h(t,i);if(Object.keys(t).length!==Object.keys(i).length)return!1;for(const e in t)if(!Sw._deepEquals(t[e],i[e]))return!1;return!0}static checkEquals(t,i){const e=[];let s=!1;for(const n of Ri){const o=!Sw._deepEquals(t._read(n.id),i._read(n.id));e[n.id]=o,o&&(s=!0)}return s?new qt(e):null}static applyUpdate(t,i){let e=!1;for(const s of Ri)if(i.hasOwnProperty(s.name)){const n=s.applyUpdate(t[s.name],i[s.name]);t[s.name]=n.newValue,e=e||n.didChange}return e}}function Fw(t){const i=G(t);return function(t){pw.items.forEach((i=>i.apply(t)))}(i),i}var Iw;(function(t){const i={total:0,min:Number.MAX_VALUE,max:0},e={...i},s={...i},n={...i};let o=0;const r={keydown:0,input:0,render:0};function h(){r.keydown===1&&(performance.mark("keydown/end"),r.keydown=2)}function c(){performance.mark("input/start"),r.input=1,u()}function a(){r.input===1&&(performance.mark("input/end"),r.input=2)}function l(){r.render===1&&(performance.mark("render/end"),r.render=2)}function u(){setTimeout(d)}function d(){r.keydown===2&&r.input===2&&r.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),f("keydown",i),f("input",e),f("render",s),f("inputlatency",n),o++,performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),r.keydown=0,r.input=0,r.render=0)}function f(t,i){const e=performance.getEntriesByName(t)[0].duration;i.total+=e,i.min=Math.min(i.min,e),i.max=Math.max(i.max,e)}function g(t){return{average:t.total/o,max:t.max,min:t.min}}function A(t){t.total=0,t.min=Number.MAX_VALUE,t.max=0}t.onKeyDown=function(){d(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),r.keydown=1,queueMicrotask(h)},t.onBeforeInput=c,t.onInput=function(){r.input===0&&c(),queueMicrotask(a)},t.onKeyUp=function(){d()},t.onSelectionChange=function(){d()},t.onRenderStart=function(){r.keydown===2&&r.input===2&&r.render===0&&(performance.mark("render/start"),r.render=1,queueMicrotask(l),u())},t.getAndClearMeasurements=function(){if(o===0)return;const t={keydown:g(i),input:g(e),render:g(s),total:g(n),sampleCount:o};return A(i),A(e),A(s),A(n),o=0,t}})(Iw||(Iw={}));class Lw{constructor(){this._hooks=new Zi,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(t,i){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const e=this._onStopCallback;this._onStopCallback=null,t&&e&&e(i)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(t,i,e,s,n){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=n;let o=t;try{t.setPointerCapture(i),this._hooks.add(qi((()=>{try{t.releasePointerCapture(i)}catch{}})))}catch{o=Gh(t)}this._hooks.add(rc(o,$c.POINTER_MOVE,(t=>{t.buttons===e?(t.preventDefault(),this._pointerMoveCallback(t)):this.stopMonitoring(!0)}))),this._hooks.add(rc(o,$c.POINTER_UP,(t=>this.stopMonitoring(!0))))}}function Rw(t){return`--vscode-${t.replace(/\./g,"-")}`}function Tw(t){return`var(${Rw(t)})`}const Nw="base.contributions.colors",Qw=new class{constructor(){this._onDidChangeSchema=new de,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(t,i,e,s=!1,n){const o={id:t,description:e,defaults:i,needsTransparency:s,deprecationMessage:n};this.colorsById[t]=o;const r={type:"string",description:e,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return n&&(r.deprecationMessage=n),s&&(r.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",r.patternErrorMessage="This color must be transparent or it will obscure content"),this.colorSchema.properties[t]=r,this.colorReferenceSchema.enum.push(t),this.colorReferenceSchema.enumDescriptions.push(e),this._onDidChangeSchema.fire(),t}getColors(){return Object.keys(this.colorsById).map((t=>this.colorsById[t]))}resolveDefaultColor(t,i){const e=this.colorsById[t];if(e&&e.defaults)return Ww(e.defaults[i.type],i)}getColorSchema(){return this.colorSchema}toString(){return Object.keys(this.colorsById).sort(((t,i)=>{const e=t.indexOf(".")===-1?0:1,s=i.indexOf(".")===-1?0:1;return e!==s?e-s:t.localeCompare(i)})).map((t=>`- \`${t}\`: ${this.colorsById[t].description}`)).join(`\n`)}};function Ow(t,i,e,s,n){return Qw.registerColor(t,i,e,s,n)}function zw(t,i){return{op:0,value:t,factor:i}}function Uw(t,i){return{op:1,value:t,factor:i}}function Hw(t,i){return{op:2,value:t,factor:i}}function Pw(...t){return{op:4,values:t}}function jw(t,i,e,s){return{op:5,value:t,background:i,factor:e,transparency:s}}function Ww(t,i){if(t!==null)return typeof t=="string"?t[0]==="#"?CA.fromHex(t):i.getColor(t):t instanceof CA?t:typeof t=="object"?function(t,i){var e,s,n,o;switch(t.op){case 0:return(e=Ww(t.value,i))===null||e===void 0?void 0:e.darken(t.factor);case 1:return(s=Ww(t.value,i))===null||s===void 0?void 0:s.lighten(t.factor);case 2:return(n=Ww(t.value,i))===null||n===void 0?void 0:n.transparent(t.factor);case 3:{const e=Ww(t.background,i);return e?(o=Ww(t.value,i))===null||o===void 0?void 0:o.makeOpaque(e):Ww(t.value,i)}case 4:for(const e of t.values){const t=Ww(e,i);if(t)return t}return;case 6:return Ww(i.defines(t.if)?t.then:t.else,i);case 5:{const e=Ww(t.value,i);if(!e)return;const s=Ww(t.background,i);return s?e.isDarkerThan(s)?CA.getLighterColor(e,s,t.factor).transparent(t.transparency):CA.getDarkerColor(e,s,t.factor).transparent(t.transparency):e.transparent(t.factor*t.transparency)}default:throw jl()}}(t,i):void 0}Vl.add(Nw,Qw);const Yw="vscode://schemas/workbench-colors",_w=Vl.as(Wd);_w.registerSchema(Yw,Qw.getColorSchema());const Vw=new Er((()=>_w.notifySchemaChanged(Yw)),200);Qw.onDidChangeSchema((()=>{Vw.isScheduled()||Vw.schedule()}));const Jw=Ow("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},st(0,"Overall foreground color. This color is only used if not overridden by a component."));Ow("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},st(0,"Overall foreground for disabled elements. This color is only used if not overridden by a component.")),Ow("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},st(0,"Overall foreground color for error messages. This color is only used if not overridden by a component.")),Ow("descriptionForeground",{light:"#717171",dark:Hw(Jw,.7),hcDark:Hw(Jw,.7),hcLight:Hw(Jw,.7)},st(0,"Foreground color for description text providing additional information, for example for a label."));const Gw=Ow("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},st(0,"The default color for icons in the workbench.")),Kw=Ow("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},st(0,"Overall border color for focused elements. This color is only used if not overridden by a component.")),$w=Ow("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},st(0,"An extra border around elements to separate them from others for greater contrast.")),Xw=Ow("contrastActiveBorder",{light:null,dark:null,hcDark:Kw,hcLight:Kw},st(0,"An extra border around active elements to separate them from others for greater contrast."));Ow("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},st(0,"The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const qw=Ow("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},st(0,"Foreground color for links in text."));Ow("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},st(0,"Foreground color for links in text when clicked on and on mouse hover.")),Ow("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:CA.black,hcLight:"#292929"},st(0,"Color for text separators.")),Ow("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},st(0,"Foreground color for preformatted text segments.")),Ow("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},st(0,"Background color for preformatted text segments.")),Ow("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},st(0,"Background color for block quotes in text.")),Ow("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:CA.white,hcLight:"#292929"},st(0,"Border color for block quotes in text.")),Ow("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:CA.black,hcLight:"#F2F2F2"},st(0,"Background color for code blocks in text.")),Ow("sash.hoverBorder",{dark:Kw,light:Kw,hcDark:Kw,hcLight:Kw},st(0,"Border color of active sashes."));const Zw=Ow("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:CA.black,hcLight:"#0F4A85"},st(0,"Badge background color. Badges are small information labels, e.g. for search results count.")),tm=Ow("badge.foreground",{dark:CA.white,light:"#333",hcDark:CA.white,hcLight:CA.white},st(0,"Badge foreground color. Badges are small information labels, e.g. for search results count.")),im=Ow("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},st(0,"Scrollbar shadow to indicate that the view is scrolled.")),em=Ow("scrollbarSlider.background",{dark:CA.fromHex("#797979").transparent(.4),light:CA.fromHex("#646464").transparent(.4),hcDark:Hw($w,.6),hcLight:Hw($w,.4)},st(0,"Scrollbar slider background color.")),sm=Ow("scrollbarSlider.hoverBackground",{dark:CA.fromHex("#646464").transparent(.7),light:CA.fromHex("#646464").transparent(.7),hcDark:Hw($w,.8),hcLight:Hw($w,.8)},st(0,"Scrollbar slider background color when hovering.")),nm=Ow("scrollbarSlider.activeBackground",{dark:CA.fromHex("#BFBFBF").transparent(.4),light:CA.fromHex("#000000").transparent(.6),hcDark:$w,hcLight:$w},st(0,"Scrollbar slider background color when clicked on.")),om=Ow("progressBar.background",{dark:CA.fromHex("#0E70C0"),light:CA.fromHex("#0E70C0"),hcDark:$w,hcLight:$w},st(0,"Background color of the progress bar that can show for long running operations.")),rm=Ow("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:CA.black,hcLight:CA.white},st(0,"Editor background color.")),hm=Ow("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:CA.white,hcLight:Jw},st(0,"Editor default foreground color."));Ow("editorStickyScroll.background",{light:rm,dark:rm,hcDark:rm,hcLight:rm},st(0,"Background color of sticky scroll in the editor")),Ow("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:CA.fromHex("#0F4A85").transparent(.1)},st(0,"Background color of sticky scroll on hover in the editor")),Ow("editorStickyScroll.border",{dark:null,light:null,hcDark:$w,hcLight:$w},st(0,"Border color of sticky scroll in the editor")),Ow("editorStickyScroll.shadow",{dark:im,light:im,hcDark:im,hcLight:im},st(0," Shadow color of sticky scroll in the editor"));const cm=Ow("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:CA.white},st(0,"Background color of editor widgets, such as find/replace.")),am=Ow("editorWidget.foreground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"Foreground color of editor widgets, such as find/replace.")),lm=Ow("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:$w,hcLight:$w},st(0,"Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));Ow("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},st(0,"Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),Ow("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const um=Ow("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},st(0,"Foreground color of error squigglies in the editor.")),dm=Ow("editorError.border",{dark:null,light:null,hcDark:CA.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},st(0,"If set, color of double underlines for errors in the editor.")),fm=Ow("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),gm=Ow("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},st(0,"Foreground color of warning squigglies in the editor.")),Am=Ow("editorWarning.border",{dark:null,light:null,hcDark:CA.fromHex("#FFCC00").transparent(.8),hcLight:CA.fromHex("#FFCC00").transparent(.8)},st(0,"If set, color of double underlines for warnings in the editor."));Ow("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const pm=Ow("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},st(0,"Foreground color of info squigglies in the editor.")),wm=Ow("editorInfo.border",{dark:null,light:null,hcDark:CA.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},st(0,"If set, color of double underlines for infos in the editor.")),mm=Ow("editorHint.foreground",{dark:CA.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},st(0,"Foreground color of hint squigglies in the editor."));Ow("editorHint.border",{dark:null,light:null,hcDark:CA.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},st(0,"If set, color of double underlines for hints in the editor."));const vm=Ow("editorLink.activeForeground",{dark:"#4E94CE",light:CA.blue,hcDark:CA.cyan,hcLight:"#292929"},st(0,"Color of active links.")),bm=Ow("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},st(0,"Color of the editor selection.")),ym=Ow("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:CA.white},st(0,"Color of the selected text for high contrast.")),km=Ow("editor.inactiveSelectionBackground",{light:Hw(bm,.5),dark:Hw(bm,.5),hcDark:Hw(bm,.7),hcLight:Hw(bm,.5)},st(0,"Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),xm=Ow("editor.selectionHighlightBackground",{light:jw(bm,rm,.3,.6),dark:jw(bm,rm,.3,.6),hcDark:null,hcLight:null},st(0,"Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);Ow("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Xw,hcLight:Xw},st(0,"Border color for regions with the same content as the selection.")),Ow("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},st(0,"Color of the current search match."));const Cm=Ow("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},st(0,"Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);Ow("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},st(0,"Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Ow("editor.findMatchBorder",{light:null,dark:null,hcDark:Xw,hcLight:Xw},st(0,"Border color of the current search match."));const Em=Ow("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Xw,hcLight:Xw},st(0,"Border color of the other search matches.")),Bm=Ow("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Hw(Xw,.4),hcLight:Hw(Xw,.4)},st(0,"Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);Ow("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},st(0,"Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const Dm=Ow("editorHoverWidget.background",{light:cm,dark:cm,hcDark:cm,hcLight:cm},st(0,"Background color of the editor hover."));Ow("editorHoverWidget.foreground",{light:am,dark:am,hcDark:am,hcLight:am},st(0,"Foreground color of the editor hover."));const Mm=Ow("editorHoverWidget.border",{light:lm,dark:lm,hcDark:lm,hcLight:lm},st(0,"Border color of the editor hover."));Ow("editorHoverWidget.statusBarBackground",{dark:Uw(Dm,.2),light:zw(Dm,.05),hcDark:cm,hcLight:cm},st(0,"Background color of the editor hover status bar."));const Sm=Ow("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:CA.white,hcLight:CA.black},st(0,"Foreground color of inline hints")),Fm=Ow("editorInlayHint.background",{dark:Hw(Zw,.1),light:Hw(Zw,.1),hcDark:Hw(CA.white,.1),hcLight:Hw(Zw,.1)},st(0,"Background color of inline hints")),Im=Ow("editorInlayHint.typeForeground",{dark:Sm,light:Sm,hcDark:Sm,hcLight:Sm},st(0,"Foreground color of inline hints for types")),Lm=Ow("editorInlayHint.typeBackground",{dark:Fm,light:Fm,hcDark:Fm,hcLight:Fm},st(0,"Background color of inline hints for types")),Rm=Ow("editorInlayHint.parameterForeground",{dark:Sm,light:Sm,hcDark:Sm,hcLight:Sm},st(0,"Foreground color of inline hints for parameters")),Tm=Ow("editorInlayHint.parameterBackground",{dark:Fm,light:Fm,hcDark:Fm,hcLight:Fm},st(0,"Background color of inline hints for parameters")),Nm=Ow("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},st(0,"The color used for the lightbulb actions icon."));Ow("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},st(0,"The color used for the lightbulb auto fix actions icon.")),Ow("editorLightBulbAi.foreground",{dark:Nm,light:Nm,hcDark:Nm,hcLight:Nm},st(0,"The color used for the lightbulb AI icon.")),Ow("editor.snippetTabstopHighlightBackground",{dark:new CA(new yA(124,124,124,.3)),light:new CA(new yA(10,50,100,.2)),hcDark:new CA(new yA(124,124,124,.3)),hcLight:new CA(new yA(10,50,100,.2))},st(0,"Highlight background color of a snippet tabstop.")),Ow("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Highlight border color of a snippet tabstop.")),Ow("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Highlight background color of the final tabstop of a snippet.")),Ow("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new CA(new yA(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},st(0,"Highlight border color of the final tabstop of a snippet."));const Qm=new CA(new yA(155,185,85,.2)),Om=new CA(new yA(255,0,0,.2)),zm=Ow("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},st(0,"Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Um=Ow("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},st(0,"Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);Ow("diffEditor.insertedLineBackground",{dark:Qm,light:Qm,hcDark:null,hcLight:null},st(0,"Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Ow("diffEditor.removedLineBackground",{dark:Om,light:Om,hcDark:null,hcLight:null},st(0,"Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Ow("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Background color for the margin where lines got inserted.")),Ow("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Background color for the margin where lines got removed."));const Hm=Ow("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Diff overview ruler foreground for inserted content.")),Pm=Ow("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Diff overview ruler foreground for removed content."));Ow("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},st(0,"Outline color for the text that got inserted.")),Ow("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},st(0,"Outline color for text that got removed.")),Ow("diffEditor.border",{dark:null,light:null,hcDark:$w,hcLight:$w},st(0,"Border color between the two text editors.")),Ow("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},st(0,"Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),Ow("diffEditor.unchangedRegionBackground",{dark:"sideBar.background",light:"sideBar.background",hcDark:"sideBar.background",hcLight:"sideBar.background"},st(0,"The background color of unchanged blocks in the diff editor.")),Ow("diffEditor.unchangedRegionForeground",{dark:"foreground",light:"foreground",hcDark:"foreground",hcLight:"foreground"},st(0,"The foreground color of unchanged blocks in the diff editor.")),Ow("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},st(0,"The background color of unchanged code in the diff editor."));const jm=Ow("widget.shadow",{dark:Hw(CA.black,.36),light:Hw(CA.black,.16),hcDark:null,hcLight:null},st(0,"Shadow color of widgets such as find/replace inside the editor.")),Wm=Ow("widget.border",{dark:null,light:null,hcDark:$w,hcLight:$w},st(0,"Border color of widgets such as find/replace inside the editor.")),Ym=Ow("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},st(0,"Toolbar background when hovering over actions using the mouse"));Ow("toolbar.hoverOutline",{dark:null,light:null,hcDark:Xw,hcLight:Xw},st(0,"Toolbar outline when hovering over actions using the mouse")),Ow("toolbar.activeBackground",{dark:Uw(Ym,.1),light:zw(Ym,.1),hcDark:null,hcLight:null},st(0,"Toolbar background when holding the mouse over actions"));const _m=Ow("breadcrumb.foreground",{light:Hw(Jw,.8),dark:Hw(Jw,.8),hcDark:Hw(Jw,.8),hcLight:Hw(Jw,.8)},st(0,"Color of focused breadcrumb items.")),Vm=Ow("breadcrumb.background",{light:rm,dark:rm,hcDark:rm,hcLight:rm},st(0,"Background color of breadcrumb items.")),Jm=Ow("breadcrumb.focusForeground",{light:zw(Jw,.2),dark:Uw(Jw,.1),hcDark:Uw(Jw,.1),hcLight:Uw(Jw,.1)},st(0,"Color of focused breadcrumb items.")),Gm=Ow("breadcrumb.activeSelectionForeground",{light:zw(Jw,.2),dark:Uw(Jw,.1),hcDark:Uw(Jw,.1),hcLight:Uw(Jw,.1)},st(0,"Color of selected breadcrumb items."));Ow("breadcrumbPicker.background",{light:cm,dark:cm,hcDark:cm,hcLight:cm},st(0,"Background color of breadcrumb item picker."));const Km=CA.fromHex("#40C8AE").transparent(.5),$m=CA.fromHex("#40A6FF").transparent(.5),Xm=CA.fromHex("#606060").transparent(.4),qm=.4,Zm=Ow("merge.currentHeaderBackground",{dark:Km,light:Km,hcDark:null,hcLight:null},st(0,"Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Ow("merge.currentContentBackground",{dark:Hw(Zm,qm),light:Hw(Zm,qm),hcDark:Hw(Zm,qm),hcLight:Hw(Zm,qm)},st(0,"Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const tv=Ow("merge.incomingHeaderBackground",{dark:$m,light:$m,hcDark:null,hcLight:null},st(0,"Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Ow("merge.incomingContentBackground",{dark:Hw(tv,qm),light:Hw(tv,qm),hcDark:Hw(tv,qm),hcLight:Hw(tv,qm)},st(0,"Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const iv=Ow("merge.commonHeaderBackground",{dark:Xm,light:Xm,hcDark:null,hcLight:null},st(0,"Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Ow("merge.commonContentBackground",{dark:Hw(iv,qm),light:Hw(iv,qm),hcDark:Hw(iv,qm),hcLight:Hw(iv,qm)},st(0,"Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const ev=Ow("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},st(0,"Border color on headers and the splitter in inline merge-conflicts."));Ow("editorOverviewRuler.currentContentForeground",{dark:Hw(Zm,1),light:Hw(Zm,1),hcDark:ev,hcLight:ev},st(0,"Current overview ruler foreground for inline merge-conflicts.")),Ow("editorOverviewRuler.incomingContentForeground",{dark:Hw(tv,1),light:Hw(tv,1),hcDark:ev,hcLight:ev},st(0,"Incoming overview ruler foreground for inline merge-conflicts.")),Ow("editorOverviewRuler.commonContentForeground",{dark:Hw(iv,1),light:Hw(iv,1),hcDark:ev,hcLight:ev},st(0,"Common ancestor overview ruler foreground for inline merge-conflicts."));const sv=Ow("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},st(0,"Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),nv=Ow("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},st(0,"Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ov=Ow("problemsErrorIcon.foreground",{dark:um,light:um,hcDark:um,hcLight:um},st(0,"The color used for the problems error icon.")),rv=Ow("problemsWarningIcon.foreground",{dark:gm,light:gm,hcDark:gm,hcLight:gm},st(0,"The color used for the problems warning icon.")),hv=Ow("problemsInfoIcon.foreground",{dark:pm,light:pm,hcDark:pm,hcLight:pm},st(0,"The color used for the problems info icon.")),cv=Ow("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},st(0,"Minimap marker color for find matches."),!0),av=Ow("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},st(0,"Minimap marker color for repeating editor selections."),!0),lv=Ow("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},st(0,"Minimap marker color for the editor selection."),!0),uv=Ow("minimap.infoHighlight",{dark:pm,light:pm,hcDark:wm,hcLight:wm},st(0,"Minimap marker color for infos.")),dv=Ow("minimap.warningHighlight",{dark:gm,light:gm,hcDark:Am,hcLight:Am},st(0,"Minimap marker color for warnings.")),fv=Ow("minimap.errorHighlight",{dark:new CA(new yA(255,18,18,.7)),light:new CA(new yA(255,18,18,.7)),hcDark:new CA(new yA(255,50,50,1)),hcLight:"#B5200D"},st(0,"Minimap marker color for errors.")),gv=Ow("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Minimap background color.")),Av=Ow("minimap.foregroundOpacity",{dark:CA.fromHex("#000f"),light:CA.fromHex("#000f"),hcDark:CA.fromHex("#000f"),hcLight:CA.fromHex("#000f")},st(0,'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));Ow("minimapSlider.background",{light:Hw(em,.5),dark:Hw(em,.5),hcDark:Hw(em,.5),hcLight:Hw(em,.5)},st(0,"Minimap slider background color.")),Ow("minimapSlider.hoverBackground",{light:Hw(sm,.5),dark:Hw(sm,.5),hcDark:Hw(sm,.5),hcLight:Hw(sm,.5)},st(0,"Minimap slider background color when hovering.")),Ow("minimapSlider.activeBackground",{light:Hw(nm,.5),dark:Hw(nm,.5),hcDark:Hw(nm,.5),hcLight:Hw(nm,.5)},st(0,"Minimap slider background color when clicked on.")),Ow("charts.foreground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color used in charts.")),Ow("charts.lines",{dark:Hw(Jw,.5),light:Hw(Jw,.5),hcDark:Hw(Jw,.5),hcLight:Hw(Jw,.5)},st(0,"The color used for horizontal lines in charts.")),Ow("charts.red",{dark:um,light:um,hcDark:um,hcLight:um},st(0,"The red color used in chart visualizations.")),Ow("charts.blue",{dark:pm,light:pm,hcDark:pm,hcLight:pm},st(0,"The blue color used in chart visualizations.")),Ow("charts.yellow",{dark:gm,light:gm,hcDark:gm,hcLight:gm},st(0,"The yellow color used in chart visualizations.")),Ow("charts.orange",{dark:cv,light:cv,hcDark:cv,hcLight:cv},st(0,"The orange color used in chart visualizations.")),Ow("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},st(0,"The green color used in chart visualizations.")),Ow("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},st(0,"The purple color used in chart visualizations."));const pv=Ow("input.background",{dark:"#3C3C3C",light:CA.white,hcDark:CA.black,hcLight:CA.white},st(0,"Input box background.")),wv=Ow("input.foreground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"Input box foreground.")),mv=Ow("input.border",{dark:null,light:null,hcDark:$w,hcLight:$w},st(0,"Input box border.")),vv=Ow("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:$w,hcLight:$w},st(0,"Border color of activated options in input fields."));Ow("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},st(0,"Background color of activated options in input fields."));const bv=Ow("inputOption.activeBackground",{dark:Hw(Kw,.4),light:Hw(Kw,.2),hcDark:CA.transparent,hcLight:CA.transparent},st(0,"Background hover color of options in input fields.")),yv=Ow("inputOption.activeForeground",{dark:CA.white,light:CA.black,hcDark:Jw,hcLight:Jw},st(0,"Foreground color of activated options in input fields."));Ow("input.placeholderForeground",{light:Hw(Jw,.5),dark:Hw(Jw,.5),hcDark:Hw(Jw,.7),hcLight:Hw(Jw,.7)},st(0,"Input box foreground color for placeholder text."));const kv=Ow("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:CA.black,hcLight:CA.white},st(0,"Input validation background color for information severity.")),xv=Ow("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Jw},st(0,"Input validation foreground color for information severity.")),Cv=Ow("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:$w,hcLight:$w},st(0,"Input validation border color for information severity.")),Ev=Ow("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:CA.black,hcLight:CA.white},st(0,"Input validation background color for warning severity.")),Bv=Ow("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Jw},st(0,"Input validation foreground color for warning severity.")),Dv=Ow("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:$w,hcLight:$w},st(0,"Input validation border color for warning severity.")),Mv=Ow("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:CA.black,hcLight:CA.white},st(0,"Input validation background color for error severity.")),Sv=Ow("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Jw},st(0,"Input validation foreground color for error severity.")),Fv=Ow("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:$w,hcLight:$w},st(0,"Input validation border color for error severity.")),Iv=Ow("dropdown.background",{dark:"#3C3C3C",light:CA.white,hcDark:CA.black,hcLight:CA.white},st(0,"Dropdown background.")),Lv=Ow("dropdown.listBackground",{dark:null,light:null,hcDark:CA.black,hcLight:CA.white},st(0,"Dropdown list background.")),Rv=Ow("dropdown.foreground",{dark:"#F0F0F0",light:Jw,hcDark:CA.white,hcLight:Jw},st(0,"Dropdown foreground.")),Tv=Ow("dropdown.border",{dark:Iv,light:"#CECECE",hcDark:$w,hcLight:$w},st(0,"Dropdown border.")),Nv=Ow("button.foreground",{dark:CA.white,light:CA.white,hcDark:CA.white,hcLight:CA.white},st(0,"Button foreground color.")),Qv=Ow("button.separator",{dark:Hw(Nv,.4),light:Hw(Nv,.4),hcDark:Hw(Nv,.4),hcLight:Hw(Nv,.4)},st(0,"Button separator color.")),Ov=Ow("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},st(0,"Button background color.")),zv=Ow("button.hoverBackground",{dark:Uw(Ov,.2),light:zw(Ov,.2),hcDark:Ov,hcLight:Ov},st(0,"Button background color when hovering.")),Uv=Ow("button.border",{dark:$w,light:$w,hcDark:$w,hcLight:$w},st(0,"Button border color.")),Hv=Ow("button.secondaryForeground",{dark:CA.white,light:CA.white,hcDark:CA.white,hcLight:Jw},st(0,"Secondary button foreground color.")),Pv=Ow("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:CA.white},st(0,"Secondary button background color.")),jv=Ow("button.secondaryHoverBackground",{dark:Uw(Pv,.2),light:zw(Pv,.2),hcDark:null,hcLight:null},st(0,"Secondary button background color when hovering.")),Wv=Ow("checkbox.background",{dark:Iv,light:Iv,hcDark:Iv,hcLight:Iv},st(0,"Background color of checkbox widget."));Ow("checkbox.selectBackground",{dark:cm,light:cm,hcDark:cm,hcLight:cm},st(0,"Background color of checkbox widget when the element it's in is selected."));const Yv=Ow("checkbox.foreground",{dark:Rv,light:Rv,hcDark:Rv,hcLight:Rv},st(0,"Foreground color of checkbox widget.")),_v=Ow("checkbox.border",{dark:Tv,light:Tv,hcDark:Tv,hcLight:Tv},st(0,"Border color of checkbox widget."));Ow("checkbox.selectBorder",{dark:Gw,light:Gw,hcDark:Gw,hcLight:Gw},st(0,"Border color of checkbox widget when the element it's in is selected."));const Vv=Ow("keybindingLabel.background",{dark:new CA(new yA(128,128,128,.17)),light:new CA(new yA(221,221,221,.4)),hcDark:CA.transparent,hcLight:CA.transparent},st(0,"Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Jv=Ow("keybindingLabel.foreground",{dark:CA.fromHex("#CCCCCC"),light:CA.fromHex("#555555"),hcDark:CA.white,hcLight:Jw},st(0,"Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Gv=Ow("keybindingLabel.border",{dark:new CA(new yA(51,51,51,.6)),light:new CA(new yA(204,204,204,.4)),hcDark:new CA(new yA(111,195,223)),hcLight:$w},st(0,"Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Kv=Ow("keybindingLabel.bottomBorder",{dark:new CA(new yA(68,68,68,.6)),light:new CA(new yA(187,187,187,.4)),hcDark:new CA(new yA(111,195,223)),hcLight:Jw},st(0,"Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),$v=Ow("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Xv=Ow("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),qv=Ow("list.focusOutline",{dark:Kw,light:Kw,hcDark:Xw,hcLight:Xw},st(0,"List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Zv=Ow("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),tb=Ow("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:CA.fromHex("#0F4A85").transparent(.1)},st(0,"List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ib=Ow("list.activeSelectionForeground",{dark:CA.white,light:CA.white,hcDark:null,hcLight:null},st(0,"List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),eb=Ow("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),sb=Ow("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:CA.fromHex("#0F4A85").transparent(.1)},st(0,"List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),nb=Ow("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),ob=Ow("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),rb=Ow("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),hb=Ow("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),cb=Ow("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:CA.white.transparent(.1),hcLight:CA.fromHex("#0F4A85").transparent(.1)},st(0,"List/Tree background when hovering over items using the mouse.")),ab=Ow("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"List/Tree foreground when hovering over items using the mouse.")),lb=Ow("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},st(0,"List/Tree drag and drop background when moving items over other items when using the mouse.")),ub=Ow("list.dropBetweenBackground",{dark:Gw,light:Gw,hcDark:null,hcLight:null},st(0,"List/Tree drag and drop border color when moving items between items when using the mouse.")),db=Ow("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Kw,hcLight:Kw},st(0,"List/Tree foreground color of the match highlights when searching inside the list/tree.")),fb=Ow("list.focusHighlightForeground",{dark:db,light:(gb=tb,Ab=db,pb="#BBE7FF",{op:6,if:gb,then:Ab,else:pb}),hcDark:db,hcLight:db},st(0,"List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));var gb,Ab,pb;Ow("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},st(0,"List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),Ow("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},st(0,"Foreground color of list items containing errors.")),Ow("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},st(0,"Foreground color of list items containing warnings."));const wb=Ow("listFilterWidget.background",{light:zw(cm,0),dark:Uw(cm,0),hcDark:cm,hcLight:cm},st(0,"Background color of the type filter widget in lists and trees.")),mb=Ow("listFilterWidget.outline",{dark:CA.transparent,light:CA.transparent,hcDark:"#f38518",hcLight:"#007ACC"},st(0,"Outline color of the type filter widget in lists and trees.")),vb=Ow("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:$w,hcLight:$w},st(0,"Outline color of the type filter widget in lists and trees, when there are no matches.")),bb=Ow("listFilterWidget.shadow",{dark:jm,light:jm,hcDark:jm,hcLight:jm},st(0,"Shadow color of the type filter widget in lists and trees."));Ow("list.filterMatchBackground",{dark:Cm,light:Cm,hcDark:null,hcLight:null},st(0,"Background color of the filtered match.")),Ow("list.filterMatchBorder",{dark:Em,light:Em,hcDark:$w,hcLight:Xw},st(0,"Border color of the filtered match.")),Ow("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},st(0,"List/Tree foreground color for items that are deemphasized."));const yb=Ow("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},st(0,"Tree stroke color for the indentation guides.")),kb=Ow("tree.inactiveIndentGuidesStroke",{dark:Hw(yb,.4),light:Hw(yb,.4),hcDark:Hw(yb,.4),hcLight:Hw(yb,.4)},st(0,"Tree stroke color for the indentation guides that are not active.")),xb=Ow("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},st(0,"Table border color between columns.")),Cb=Ow("tree.tableOddRowsBackground",{dark:Hw(Jw,.04),light:Hw(Jw,.04),hcDark:null,hcLight:null},st(0,"Background color for odd table rows.")),Eb=Ow("menu.border",{dark:null,light:null,hcDark:$w,hcLight:$w},st(0,"Border color of menus.")),Bb=Ow("menu.foreground",{dark:Rv,light:Rv,hcDark:Rv,hcLight:Rv},st(0,"Foreground color of menu items.")),Db=Ow("menu.background",{dark:Iv,light:Iv,hcDark:Iv,hcLight:Iv},st(0,"Background color of menu items.")),Mb=Ow("menu.selectionForeground",{dark:ib,light:ib,hcDark:ib,hcLight:ib},st(0,"Foreground color of the selected menu item in menus.")),Sb=Ow("menu.selectionBackground",{dark:tb,light:tb,hcDark:tb,hcLight:tb},st(0,"Background color of the selected menu item in menus.")),Fb=Ow("menu.selectionBorder",{dark:null,light:null,hcDark:Xw,hcLight:Xw},st(0,"Border color of the selected menu item in menus.")),Ib=Ow("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:$w,hcLight:$w},st(0,"Color of a separator menu item in menus.")),Lb=Ow("quickInput.background",{dark:cm,light:cm,hcDark:cm,hcLight:cm},st(0,"Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Rb=Ow("quickInput.foreground",{dark:am,light:am,hcDark:am,hcLight:am},st(0,"Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Tb=Ow("quickInputTitle.background",{dark:new CA(new yA(255,255,255,.105)),light:new CA(new yA(0,0,0,.06)),hcDark:"#000000",hcLight:CA.white},st(0,"Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Nb=Ow("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:CA.white,hcLight:"#0F4A85"},st(0,"Quick picker color for grouping labels.")),Qb=Ow("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:CA.white,hcLight:"#0F4A85"},st(0,"Quick picker color for grouping borders.")),Ob=Ow("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,st(0,"Please use quickInputList.focusBackground instead")),zb=Ow("quickInputList.focusForeground",{dark:ib,light:ib,hcDark:ib,hcLight:ib},st(0,"Quick picker foreground color for the focused item.")),Ub=Ow("quickInputList.focusIconForeground",{dark:eb,light:eb,hcDark:eb,hcLight:eb},st(0,"Quick picker icon foreground color for the focused item.")),Hb=Ow("quickInputList.focusBackground",{dark:Pw(Ob,tb),light:Pw(Ob,tb),hcDark:null,hcLight:null},st(0,"Quick picker background color for the focused item."));Ow("search.resultsInfoForeground",{light:Jw,dark:Hw(Jw,.65),hcDark:Jw,hcLight:Jw},st(0,"Color of the text in the search viewlet's completion message.")),Ow("searchEditor.findMatchBackground",{light:Hw(Cm,.66),dark:Hw(Cm,.66),hcDark:Cm,hcLight:Cm},st(0,"Color of the Search Editor query matches.")),Ow("searchEditor.findMatchBorder",{light:Hw(Em,.66),dark:Hw(Em,.66),hcDark:Em,hcLight:Em},st(0,"Border color of the Search Editor query matches."));class Pb{constructor(t,i){this.x=t,this.y=i,this._pageCoordinatesBrand=void 0}toClientCoordinates(t){return new jb(this.x-t.scrollX,this.y-t.scrollY)}}class jb{constructor(t,i){this.clientX=t,this.clientY=i,this._clientCoordinatesBrand=void 0}toPageCoordinates(t){return new Pb(this.clientX+t.scrollX,this.clientY+t.scrollY)}}class Wb{constructor(t,i,e,s){this.x=t,this.y=i,this.width=e,this.height=s,this._editorPagePositionBrand=void 0}}class Yb{constructor(t,i){this.x=t,this.y=i,this._positionRelativeToEditorBrand=void 0}}function _b(t){const i=yc(t);return new Wb(i.left,i.top,i.width,i.height)}function Vb(t,i,e){const s=i.width/t.offsetWidth,n=i.height/t.offsetHeight,o=(e.x-i.x)/s,r=(e.y-i.y)/n;return new Yb(o,r)}class Jb extends ur{constructor(t,i,e){super(Gh(e),t),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=i,this.pos=new Pb(this.posx,this.posy),this.editorPos=_b(e),this.relativePos=Vb(e,this.editorPos,this.pos)}}class Gb{constructor(t){this._editorViewDomNode=t}_create(t){return new Jb(t,!1,this._editorViewDomNode)}onContextMenu(t,i){return rc(t,"contextmenu",(t=>{i(this._create(t))}))}onMouseUp(t,i){return rc(t,"mouseup",(t=>{i(this._create(t))}))}onMouseDown(t,i){return rc(t,$c.MOUSE_DOWN,(t=>{i(this._create(t))}))}onPointerDown(t,i){return rc(t,$c.POINTER_DOWN,(t=>{i(this._create(t),t.pointerId)}))}onMouseLeave(t,i){return rc(t,$c.MOUSE_LEAVE,(t=>{i(this._create(t))}))}onMouseMove(t,i){return rc(t,"mousemove",(t=>i(this._create(t))))}}class Kb{constructor(t){this._editorViewDomNode=t}_create(t){return new Jb(t,!1,this._editorViewDomNode)}onPointerUp(t,i){return rc(t,"pointerup",(t=>{i(this._create(t))}))}onPointerDown(t,i){return rc(t,$c.POINTER_DOWN,(t=>{i(this._create(t),t.pointerId)}))}onPointerLeave(t,i){return rc(t,$c.POINTER_LEAVE,(t=>{i(this._create(t))}))}onPointerMove(t,i){return rc(t,"pointermove",(t=>i(this._create(t))))}}class $b extends te{constructor(t){super(),this._editorViewDomNode=t,this._globalPointerMoveMonitor=this._register(new Lw),this._keydownListener=null}startMonitoring(t,i,e,s,n){this._keydownListener=cc(t.ownerDocument,"keydown",(t=>{t.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,t.browserEvent)}),!0),this._globalPointerMoveMonitor.startMonitoring(t,i,e,(t=>{s(new Jb(t,!0,this._editorViewDomNode))}),(t=>{this._keydownListener.dispose(),n(t)}))}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class Xb{constructor(t){this._editor=t,this._instanceId=++Xb._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new Er((()=>this.garbageCollect()),1e3)}createClassNameRef(t){const i=this.getOrCreateRule(t);return i.increaseRefCount(),{className:i.className,dispose:()=>{i.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(t){const i=this.computeUniqueKey(t);let e=this._rules.get(i);if(!e){const s=this._counter++;e=new qb(i,`dyn-rule-${this._instanceId}-${s}`,Fc(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,t),this._rules.set(i,e)}return e}computeUniqueKey(t){return JSON.stringify(t)}garbageCollect(){for(const t of this._rules.values())t.hasReferences()||(this._rules.delete(t.key),t.dispose())}}Xb._idPool=0;class qb{constructor(t,i,e,s){this.key=t,this.className=i,this.properties=s,this._referenceCount=0,this._styleElementDisposables=new Zi,this._styleElement=Uc(e,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(t,i){let e=`.${t} {`;for(const t in i){const s=i[t];let n;n=typeof s=="object"?Tw(s.id):s,e+=`\n\t${Zb(t)}: ${n};`}return e+=`\n}`,e}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function Zb(t){return t.replace(/(^[A-Z])/,(([t])=>t.toLowerCase())).replace(/([A-Z])/g,(([t])=>`-${t.toLowerCase()}`))}class ty extends te{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(t){return!1}onCompositionEnd(t){return!1}onConfigurationChanged(t){return!1}onCursorStateChanged(t){return!1}onDecorationsChanged(t){return!1}onFlushed(t){return!1}onFocusChanged(t){return!1}onLanguageConfigurationChanged(t){return!1}onLineMappingChanged(t){return!1}onLinesChanged(t){return!1}onLinesDeleted(t){return!1}onLinesInserted(t){return!1}onRevealRangeRequest(t){return!1}onScrollChanged(t){return!1}onThemeChanged(t){return!1}onTokensChanged(t){return!1}onTokensColorsChanged(t){return!1}onZonesChanged(t){return!1}handleEvents(t){let i=!1;for(let e=0,s=t.length;e<s;e++){const s=t[e];switch(s.type){case 0:this.onCompositionStart(s)&&(i=!0);break;case 1:this.onCompositionEnd(s)&&(i=!0);break;case 2:this.onConfigurationChanged(s)&&(i=!0);break;case 3:this.onCursorStateChanged(s)&&(i=!0);break;case 4:this.onDecorationsChanged(s)&&(i=!0);break;case 5:this.onFlushed(s)&&(i=!0);break;case 6:this.onFocusChanged(s)&&(i=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(i=!0);break;case 8:this.onLineMappingChanged(s)&&(i=!0);break;case 9:this.onLinesChanged(s)&&(i=!0);break;case 10:this.onLinesDeleted(s)&&(i=!0);break;case 11:this.onLinesInserted(s)&&(i=!0);break;case 12:this.onRevealRangeRequest(s)&&(i=!0);break;case 13:this.onScrollChanged(s)&&(i=!0);break;case 15:this.onTokensChanged(s)&&(i=!0);break;case 14:this.onThemeChanged(s)&&(i=!0);break;case 16:this.onTokensColorsChanged(s)&&(i=!0);break;case 17:this.onZonesChanged(s)&&(i=!0);break;default:console.info("View received unknown event: "),console.info(s)}}i&&(this._shouldRender=!0)}}class iy extends ty{constructor(t){super(),this._context=t,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class ey{static write(t,i){t.setAttribute("data-mprt",String(i))}static read(t){const i=t.getAttribute("data-mprt");return i===null?0:parseInt(i,10)}static collect(t,i){const e=[];let s=0;for(;t&&t!==t.ownerDocument.body&&t!==i;)t.nodeType===t.ELEMENT_NODE&&(e[s++]=this.read(t)),t=t.parentElement;const n=new Uint8Array(s);for(let t=0;t<s;t++)n[t]=e[s-t-1];return n}}class sy{constructor(t,i){this._restrictedRenderingContextBrand=void 0,this._viewLayout=t,this.viewportData=i,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const e=this._viewLayout.getCurrentViewport();this.scrollTop=e.top,this.scrollLeft=e.left,this.viewportWidth=e.width,this.viewportHeight=e.height}getScrolledTopFromAbsoluteTop(t){return t-this.scrollTop}getVerticalOffsetForLineNumber(t,i){return this._viewLayout.getVerticalOffsetForLineNumber(t,i)}getVerticalOffsetAfterLineNumber(t,i){return this._viewLayout.getVerticalOffsetAfterLineNumber(t,i)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class ny extends sy{constructor(t,i,e){super(t,i),this._renderingContextBrand=void 0,this._viewLines=e}linesVisibleRangesForRange(t,i){return this._viewLines.linesVisibleRangesForRange(t,i)}visibleRangeForPosition(t){return this._viewLines.visibleRangeForPosition(t)}}class oy{constructor(t,i,e,s){this.outsideRenderedLine=t,this.lineNumber=i,this.ranges=e,this.continuesOnNextLine=s}}class ry{static from(t){const i=new Array(t.length);for(let e=0,s=t.length;e<s;e++){const s=t[e];i[e]=new ry(s.left,s.width)}return i}constructor(t,i){this._horizontalRangeBrand=void 0,this.left=Math.round(t),this.width=Math.round(i)}toString(){return`[${this.left},${this.width}]`}}class hy{constructor(t,i){this._floatHorizontalRangeBrand=void 0,this.left=t,this.width=i}toString(){return`[${this.left},${this.width}]`}static compare(t,i){return t.left-i.left}}class cy{constructor(t,i){this.outsideRenderedLine=t,this.originalLeft=i,this.left=Math.round(this.originalLeft)}}class ay{constructor(t,i){this.outsideRenderedLine=t,this.ranges=i}}class ly{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(t,i){t.selectNodeContents(i)}static _readClientRects(t,i,e,s,n){const o=this._createRange();try{return o.setStart(t,i),o.setEnd(e,s),o.getClientRects()}catch{return null}finally{this._detachRange(o,n)}}static _mergeAdjacentRanges(t){if(t.length===1)return t;t.sort(hy.compare);const i=[];let e=0,s=t[0];for(let n=1,o=t.length;n<o;n++){const o=t[n];s.left+s.width+.9>=o.left?s.width=Math.max(s.width,o.left+o.width-s.left):(i[e++]=s,s=o)}return i[e++]=s,i}static _createHorizontalRangesFromClientRects(t,i,e){if(!t||t.length===0)return null;const s=[];for(let n=0,o=t.length;n<o;n++){const o=t[n];s[n]=new hy(Math.max(0,(o.left-i)/e),o.width/e)}return this._mergeAdjacentRanges(s)}static readHorizontalRanges(t,i,e,s,n,o){const r=t.children.length-1;if(0>r)return null;if((i=Math.min(r,Math.max(0,i)))===(s=Math.min(r,Math.max(0,s)))&&e===n&&e===0&&!t.children[i].firstChild){const e=t.children[i].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(e,o.clientRectDeltaLeft,o.clientRectScale)}i!==s&&s>0&&n===0&&(s--,n=1073741824);let h=t.children[i].firstChild,c=t.children[s].firstChild;if(h&&c||(!h&&e===0&&i>0&&(h=t.children[i-1].firstChild,e=1073741824),!c&&n===0&&s>0&&(c=t.children[s-1].firstChild,n=1073741824)),!h||!c)return null;e=Math.min(h.textContent.length,Math.max(0,e)),n=Math.min(c.textContent.length,Math.max(0,n));const a=this._readClientRects(h,e,c,n,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(a,o.clientRectDeltaLeft,o.clientRectScale)}}var uy;function dy(t){return t===uy.HIGH_CONTRAST_DARK||t===uy.HIGH_CONTRAST_LIGHT}function fy(t){return t===uy.DARK||t===uy.HIGH_CONTRAST_DARK}(function(t){t.DARK="dark",t.LIGHT="light",t.HIGH_CONTRAST_DARK="hcDark",t.HIGH_CONTRAST_LIGHT="hcLight"})(uy||(uy={}));const gy=!!Ct||!(xt||Vo||Ko);let Ay=!0;class py{constructor(t,i){this.themeType=i;const e=t.options,s=e.get(50),n=e.get(38);this.renderWhitespace=n==="off"?e.get(99):"none",this.renderControlCharacters=e.get(94),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!e.get(33),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=e.get(67),this.stopRenderingLineAfter=e.get(117),this.fontLigatures=e.get(51)}equals(t){return this.themeType===t.themeType&&this.renderWhitespace===t.renderWhitespace&&this.renderControlCharacters===t.renderControlCharacters&&this.spaceWidth===t.spaceWidth&&this.middotWidth===t.middotWidth&&this.wsmiddotWidth===t.wsmiddotWidth&&this.useMonospaceOptimizations===t.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===t.canUseHalfwidthRightwardsArrow&&this.lineHeight===t.lineHeight&&this.stopRenderingLineAfter===t.stopRenderingLineAfter&&this.fontLigatures===t.fontLigatures}}class wy{constructor(t){this._options=t,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(t){if(!this._renderedViewLine)throw new Error("I have no rendered view line to set the dom node to...");this._renderedViewLine.domNode=Ba(t)}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(t){this._isMaybeInvalid=!0,this._options=t}onSelectionChanged(){return!(!dy(this._options.themeType)&&this._options.renderWhitespace!=="selection")&&(this._isMaybeInvalid=!0,!0)}renderLine(t,i,e,s,n){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=s.getViewLineRenderingData(t),r=this._options,h=cp.filter(o.inlineDecorations,t,o.minColumn,o.maxColumn);let c=null;if(dy(r.themeType)||this._options.renderWhitespace==="selection"){const i=s.selections;for(const e of i){if(e.endLineNumber<t||e.startLineNumber>t)continue;const i=e.startLineNumber===t?e.startColumn:o.minColumn,s=e.endLineNumber===t?e.endColumn:o.maxColumn;i<s&&(dy(r.themeType)&&h.push(new cp(i,s,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new fp(i-1,s-1))))}}const a=new gp(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,h,o.tabSize,o.startVisibleColumn,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==wi.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(a))return!1;n.appendString('<div style="top:'),n.appendString(String(i)),n.appendString("px;height:"),n.appendString(String(e)),n.appendString('px;" class="'),n.appendString(wy.CLASS_NAME),n.appendString('">');const l=mp(a,n);n.appendString("</div>");let u=null;return Ay&&gy&&o.isBasicASCII&&r.useMonospaceOptimizations&&l.containsForeignElements===0&&(u=new my(this._renderedViewLine?this._renderedViewLine.domNode:null,a,l.characterMapping)),u||(u=yy(this._renderedViewLine?this._renderedViewLine.domNode:null,a,l.characterMapping,l.containsRTL,l.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(t,i,e){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(i),this._renderedViewLine.domNode.setHeight(e))}getWidth(t){return this._renderedViewLine?this._renderedViewLine.getWidth(t):0}getWidthIsFast(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}needsMonospaceFontCheck(){return!!this._renderedViewLine&&this._renderedViewLine instanceof my}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof my?this._renderedViewLine.monospaceAssumptionsAreValid():Ay}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof my&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(t,i,e,s){if(!this._renderedViewLine)return null;i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i)),e=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,e));const n=this._renderedViewLine.input.stopRenderingLineAfter;if(n!==-1&&i>n+1&&e>n+1)return new ay(!0,[new hy(this.getWidth(s),0)]);n!==-1&&i>n+1&&(i=n+1),n!==-1&&e>n+1&&(e=n+1);const o=this._renderedViewLine.getVisibleRangesForRange(t,i,e,s);return o&&o.length>0?new ay(!1,o):null}getColumnOfNodeOffset(t,i){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(t,i):1}}wy.CLASS_NAME="view-line";class my{constructor(t,i,e){this._cachedWidth=-1,this.domNode=t,this.input=i;const s=Math.floor(i.lineContent.length/300);if(s>0){this._keyColumnPixelOffsetCache=new Float32Array(s);for(let t=0;t<s;t++)this._keyColumnPixelOffsetCache[t]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=e,this._charWidth=i.spaceWidth}getWidth(t){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,t==null||t.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return Ay;if(this.input.lineContent.length<300){const t=this.getWidth(null),i=this.domNode.domNode.firstChild.offsetWidth;Math.abs(t-i)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),Ay=!1)}return Ay}toSlowRenderedLine(){return yy(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(t,i,e,s){const n=this._getColumnPixelOffset(t,i,s),o=this._getColumnPixelOffset(t,e,s);return[new hy(n,o-n)]}_getColumnPixelOffset(t,i,e){if(i<=300){const t=this._characterMapping.getHorizontalOffset(i);return this._charWidth*t}const s=Math.floor((i-1)/300)-1,n=300*(s+1)+1;let o=-1;if(this._keyColumnPixelOffsetCache&&(o=this._keyColumnPixelOffsetCache[s],o===-1&&(o=this._actualReadPixelOffset(t,n,e),this._keyColumnPixelOffsetCache[s]=o)),o===-1){const t=this._characterMapping.getHorizontalOffset(i);return this._charWidth*t}const r=this._characterMapping.getHorizontalOffset(n),h=this._characterMapping.getHorizontalOffset(i);return o+this._charWidth*(h-r)}_getReadingTarget(t){return t.domNode.firstChild}_actualReadPixelOffset(t,i,e){if(!this.domNode)return-1;const s=this._characterMapping.getDomPosition(i),n=ly.readHorizontalRanges(this._getReadingTarget(this.domNode),s.partIndex,s.charIndex,s.partIndex,s.charIndex,e);return n&&n.length!==0?n[0].left:-1}getColumnOfNodeOffset(t,i){return Cy(this._characterMapping,t,i)}}class vy{constructor(t,i,e,s,n){if(this.domNode=t,this.input=i,this._characterMapping=e,this._isWhitespaceOnly=/^\s*$/.test(i.lineContent),this._containsForeignElements=n,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let t=0,i=this._characterMapping.length;t<=i;t++)this._pixelOffsetCache[t]=-1}}_getReadingTarget(t){return t.domNode.firstChild}getWidth(t){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,t==null||t.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(t,i,e,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const n=this._readPixelOffset(this.domNode,t,i,s);if(n===-1)return null;const o=this._readPixelOffset(this.domNode,t,e,s);return o===-1?null:[new hy(n,o-n)]}return this._readVisibleRangesForRange(this.domNode,t,i,e,s)}_readVisibleRangesForRange(t,i,e,s,n){if(e===s){const s=this._readPixelOffset(t,i,e,n);return s===-1?null:[new hy(s,0)]}return this._readRawVisibleRangesForRange(t,e,s,n)}_readPixelOffset(t,i,e,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(s);const i=this._getReadingTarget(t);return i.firstChild?(s.markDidDomLayout(),i.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const n=this._pixelOffsetCache[e];if(n!==-1)return n;const o=this._actualReadPixelOffset(t,i,e,s);return this._pixelOffsetCache[e]=o,o}return this._actualReadPixelOffset(t,i,e,s)}_actualReadPixelOffset(t,i,e,s){if(this._characterMapping.length===0){const i=ly.readHorizontalRanges(this._getReadingTarget(t),0,0,0,0,s);return i&&i.length!==0?i[0].left:-1}if(e===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(s);const n=this._characterMapping.getDomPosition(e),o=ly.readHorizontalRanges(this._getReadingTarget(t),n.partIndex,n.charIndex,n.partIndex,n.charIndex,s);if(!o||o.length===0)return-1;const r=o[0].left;if(this.input.isBasicASCII){const t=this._characterMapping.getHorizontalOffset(e),i=Math.round(this.input.spaceWidth*t);if(Math.abs(i-r)<=1)return i}return r}_readRawVisibleRangesForRange(t,i,e,s){if(i===1&&e===this._characterMapping.length)return[new hy(0,this.getWidth(s))];const n=this._characterMapping.getDomPosition(i),o=this._characterMapping.getDomPosition(e);return ly.readHorizontalRanges(this._getReadingTarget(t),n.partIndex,n.charIndex,o.partIndex,o.charIndex,s)}getColumnOfNodeOffset(t,i){return Cy(this._characterMapping,t,i)}}class by extends vy{_readVisibleRangesForRange(t,i,e,s,n){const o=super._readVisibleRangesForRange(t,i,e,s,n);if(!o||o.length===0||e===s||e===1&&s===this._characterMapping.length)return o;if(!this.input.containsRTL){const e=this._readPixelOffset(t,i,s,n);if(e!==-1){const t=o[o.length-1];t.left<e&&(t.width=e-t.left)}}return o}}const yy=Jo?ky:xy;function ky(t,i,e,s,n){return new by(t,i,e,s,n)}function xy(t,i,e,s,n){return new vy(t,i,e,s,n)}function Cy(t,i,e){const s=i.textContent.length;let n=-1;for(;i;)i=i.previousSibling,n++;return t.getColumn(new Ap(n,e),s)}class Ey{static _nextVisibleColumn(t,i,e){return t===9?Ey.nextRenderTabStop(i,e):Lo(t)||Ro(t)?i+2:i+1}static visibleColumnFromColumn(t,i,e){const s=Math.min(i-1,t.length),n=t.substring(0,s),o=new xo(n);let r=0;for(;!o.eol();){const t=yo(n,s,o.offset);o.nextGraphemeLength(),r=this._nextVisibleColumn(t,r,e)}return r}static columnFromVisibleColumn(t,i,e){if(i<=0)return 1;const s=t.length,n=new xo(t);let o=0,r=1;for(;!n.eol();){const h=yo(t,s,n.offset);n.nextGraphemeLength();const c=this._nextVisibleColumn(h,o,e),a=n.offset+1;if(c>=i)return c-i<i-o?a:r;o=c,r=a}return s+1}static nextRenderTabStop(t,i){return t+i-t%i}static nextIndentTabStop(t,i){return t+i-t%i}static prevRenderTabStop(t,i){return Math.max(0,t-1-(t-1)%i)}static prevIndentTabStop(t,i){return Math.max(0,t-1-(t-1)%i)}}class By{static whitespaceVisibleColumn(t,i,e){const s=t.length;let n=0,o=-1,r=-1;for(let h=0;h<s;h++){if(h===i)return[o,r,n];switch(n%e==0&&(o=h,r=n),t.charCodeAt(h)){case 32:n+=1;break;case 9:n=Ey.nextRenderTabStop(n,e);break;default:return[-1,-1,-1]}}return i===s?[o,r,n]:[-1,-1,-1]}static atomicPosition(t,i,e,s){const n=t.length,[o,r,h]=By.whitespaceVisibleColumn(t,i,e);if(h===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(h%e==0)return i;c=h%e<=e/2}if(c){if(o===-1)return-1;let i=r;for(let s=o;s<n;++s){if(i===r+e)return o;switch(t.charCodeAt(s)){case 32:i+=1;break;case 9:i=Ey.nextRenderTabStop(i,e);break;default:return-1}}return i===r+e?o:-1}const a=Ey.nextRenderTabStop(h,e);let l=h;for(let s=i;s<n;s++){if(l===a)return s;switch(t.charCodeAt(s)){case 32:l+=1;break;case 9:l=Ey.nextRenderTabStop(l,e);break;default:return-1}}return l===a?n:-1}}class Dy{constructor(t=null){this.hitTarget=t,this.type=0}}class My{get hitTarget(){return this.spanNode}constructor(t,i,e){this.position=t,this.spanNode=i,this.injectedText=e,this.type=1}}var Sy;(function(t){t.createFromDOMInfo=function(t,i,e){const s=t.getPositionFromDOMInfo(i,e);return s?new My(s,i,null):new Dy(i)}})(Sy||(Sy={}));class Fy{constructor(t,i){this.lastViewCursorsRenderData=t,this.lastTextareaPosition=i}}class Iy{static _deduceRage(t,i=null){return!i&&t?new Es(t.lineNumber,t.column,t.lineNumber,t.column):i??null}static createUnknown(t,i,e){return{type:0,element:t,mouseColumn:i,position:e,range:this._deduceRage(e)}}static createTextarea(t,i){return{type:1,element:t,mouseColumn:i,position:null,range:null}}static createMargin(t,i,e,s,n,o){return{type:t,element:i,mouseColumn:e,position:s,range:n,detail:o}}static createViewZone(t,i,e,s,n){return{type:t,element:i,mouseColumn:e,position:s,range:this._deduceRage(s),detail:n}}static createContentText(t,i,e,s,n){return{type:6,element:t,mouseColumn:i,position:e,range:this._deduceRage(e,s),detail:n}}static createContentEmpty(t,i,e,s){return{type:7,element:t,mouseColumn:i,position:e,range:this._deduceRage(e),detail:s}}static createContentWidget(t,i,e){return{type:9,element:t,mouseColumn:i,position:null,range:null,detail:e}}static createScrollbar(t,i,e){return{type:11,element:t,mouseColumn:i,position:e,range:this._deduceRage(e)}}static createOverlayWidget(t,i,e){return{type:12,element:t,mouseColumn:i,position:null,range:null,detail:e}}static createOutsideEditor(t,i,e,s){return{type:13,element:null,mouseColumn:t,position:i,range:this._deduceRage(i),outsidePosition:e,outsideDistance:s}}static _typeToString(t){return t===1?"TEXTAREA":t===2?"GUTTER_GLYPH_MARGIN":t===3?"GUTTER_LINE_NUMBERS":t===4?"GUTTER_LINE_DECORATIONS":t===5?"GUTTER_VIEW_ZONE":t===6?"CONTENT_TEXT":t===7?"CONTENT_EMPTY":t===8?"CONTENT_VIEW_ZONE":t===9?"CONTENT_WIDGET":t===10?"OVERVIEW_RULER":t===11?"SCROLLBAR":t===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(t){return this._typeToString(t.type)+": "+t.position+" - "+t.range+" - "+JSON.stringify(t.detail)}}class Ly{static isTextArea(t){return t.length===2&&t[0]===3&&t[1]===7}static isChildOfViewLines(t){return t.length>=4&&t[0]===3&&t[3]===8}static isStrictChildOfViewLines(t){return t.length>4&&t[0]===3&&t[3]===8}static isChildOfScrollableElement(t){return t.length>=2&&t[0]===3&&t[1]===6}static isChildOfMinimap(t){return t.length>=2&&t[0]===3&&t[1]===9}static isChildOfContentWidgets(t){return t.length>=4&&t[0]===3&&t[3]===1}static isChildOfOverflowGuard(t){return t.length>=1&&t[0]===3}static isChildOfOverflowingContentWidgets(t){return t.length>=1&&t[0]===2}static isChildOfOverlayWidgets(t){return t.length>=2&&t[0]===3&&t[1]===4}static isChildOfOverflowingOverlayWidgets(t){return t.length>=1&&t[0]===5}}class Ry{constructor(t,i,e){this.viewModel=t.viewModel;const s=t.configuration.options;this.layoutInfo=s.get(145),this.viewDomNode=i.viewDomNode,this.lineHeight=s.get(67),this.stickyTabStops=s.get(116),this.typicalHalfwidthCharacterWidth=s.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=e,this._context=t,this._viewHelper=i}getZoneAtCoord(t){return Ry.getZoneAtCoord(this._context,t)}static getZoneAtCoord(t,i){const e=t.viewLayout.getWhitespaceAtVerticalOffset(i);if(e){const s=e.verticalOffset+e.height/2,n=t.viewModel.getLineCount();let o,r=null,h=null;return e.afterLineNumber!==n&&(h=new Cs(e.afterLineNumber+1,1)),e.afterLineNumber>0&&(r=new Cs(e.afterLineNumber,t.viewModel.getLineMaxColumn(e.afterLineNumber))),o=h===null?r:r===null?h:i<s?r:h,{viewZoneId:e.id,afterLineNumber:e.afterLineNumber,positionBefore:r,positionAfter:h,position:o}}return null}getFullLineRangeAtCoord(t){if(this._context.viewLayout.isAfterLines(t)){const t=this._context.viewModel.getLineCount(),i=this._context.viewModel.getLineMaxColumn(t);return{range:new Es(t,i,t,i),isAfterLines:!0}}const i=this._context.viewLayout.getLineNumberAtVerticalOffset(t),e=this._context.viewModel.getLineMaxColumn(i);return{range:new Es(i,1,i,e),isAfterLines:!1}}getLineNumberAtVerticalOffset(t){return this._context.viewLayout.getLineNumberAtVerticalOffset(t)}isAfterLines(t){return this._context.viewLayout.isAfterLines(t)}isInTopPadding(t){return this._context.viewLayout.isInTopPadding(t)}isInBottomPadding(t){return this._context.viewLayout.isInBottomPadding(t)}getVerticalOffsetForLineNumber(t){return this._context.viewLayout.getVerticalOffsetForLineNumber(t)}findAttribute(t,i){return Ry._findAttribute(t,i,this._viewHelper.viewDomNode)}static _findAttribute(t,i,e){for(;t&&t!==t.ownerDocument.body;){if(t.hasAttribute&&t.hasAttribute(i))return t.getAttribute(i);if(t===e)return null;t=t.parentNode}return null}getLineWidth(t){return this._viewHelper.getLineWidth(t)}visibleRangeForPosition(t,i){return this._viewHelper.visibleRangeForPosition(t,i)}getPositionFromDOMInfo(t,i){return this._viewHelper.getPositionFromDOMInfo(t,i)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class Ty{constructor(t,i,e,s){this.editorPos=i,this.pos=e,this.relativePos=s,this.mouseVerticalOffset=Math.max(0,t.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=t.getCurrentScrollLeft()+this.relativePos.x-t.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<t.layoutInfo.contentLeft&&this.relativePos.x>=t.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,zy._getMouseColumn(this.mouseContentHorizontalOffset,t.typicalHalfwidthCharacterWidth))}}class Ny extends Ty{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=ey.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(t,i,e,s,n){super(t,i,e,s),this.hitTestResult=new _n((()=>zy.doHitTest(this._ctx,this))),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=t,this._eventTarget=n;const o=!!this._eventTarget;this._useHitTestTarget=!o}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}\n\ttarget: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(t=null){return t&&t.column<this._ctx.viewModel.getLineMaxColumn(t.lineNumber)?Ey.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(t.lineNumber),t.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(t=null){return Iy.createUnknown(this.target,this._getMouseColumn(t),t)}fulfillTextarea(){return Iy.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(t,i,e,s){return Iy.createMargin(t,this.target,this._getMouseColumn(i),i,e,s)}fulfillViewZone(t,i,e){return Iy.createViewZone(t,this.target,this._getMouseColumn(i),i,e)}fulfillContentText(t,i,e){return Iy.createContentText(this.target,this._getMouseColumn(t),t,i,e)}fulfillContentEmpty(t,i){return Iy.createContentEmpty(this.target,this._getMouseColumn(t),t,i)}fulfillContentWidget(t){return Iy.createContentWidget(this.target,this._getMouseColumn(),t)}fulfillScrollbar(t){return Iy.createScrollbar(this.target,this._getMouseColumn(t),t)}fulfillOverlayWidget(t){return Iy.createOverlayWidget(this.target,this._getMouseColumn(),t)}}const Qy={isAfterLines:!0};function Oy(t){return{isAfterLines:!1,horizontalDistanceToText:t}}class zy{constructor(t,i){this._context=t,this._viewHelper=i}mouseTargetIsWidget(t){const i=t.target,e=ey.collect(i,this._viewHelper.viewDomNode);return!(!Ly.isChildOfContentWidgets(e)&&!Ly.isChildOfOverflowingContentWidgets(e))||!(!Ly.isChildOfOverlayWidgets(e)&&!Ly.isChildOfOverflowingOverlayWidgets(e))}createMouseTarget(t,i,e,s,n){const o=new Ry(this._context,this._viewHelper,t),r=new Ny(o,i,e,s,n);try{const t=zy._createMouseTarget(o,r);if(t.type===6&&o.stickyTabStops&&t.position!==null){const i=zy._snapToSoftTabBoundary(t.position,o.viewModel),e=Es.fromPositions(i,i).plusRange(t.range);return r.fulfillContentText(i,e,t.detail)}return t}catch{return r.fulfillUnknown()}}static _createMouseTarget(t,i){if(i.target===null)return i.fulfillUnknown();const e=i;let s=null;return Ly.isChildOfOverflowGuard(i.targetPath)||Ly.isChildOfOverflowingContentWidgets(i.targetPath)||Ly.isChildOfOverflowingOverlayWidgets(i.targetPath)||(s=s||i.fulfillUnknown()),s=s||zy._hitTestContentWidget(t,e),s=s||zy._hitTestOverlayWidget(t,e),s=s||zy._hitTestMinimap(t,e),s=s||zy._hitTestScrollbarSlider(t,e),s=s||zy._hitTestViewZone(t,e),s=s||zy._hitTestMargin(t,e),s=s||zy._hitTestViewCursor(t,e),s=s||zy._hitTestTextArea(t,e),s=s||zy._hitTestViewLines(t,e),s=s||zy._hitTestScrollbar(t,e),s||i.fulfillUnknown()}static _hitTestContentWidget(t,i){if(Ly.isChildOfContentWidgets(i.targetPath)||Ly.isChildOfOverflowingContentWidgets(i.targetPath)){const e=t.findAttribute(i.target,"widgetId");return e?i.fulfillContentWidget(e):i.fulfillUnknown()}return null}static _hitTestOverlayWidget(t,i){if(Ly.isChildOfOverlayWidgets(i.targetPath)||Ly.isChildOfOverflowingOverlayWidgets(i.targetPath)){const e=t.findAttribute(i.target,"widgetId");return e?i.fulfillOverlayWidget(e):i.fulfillUnknown()}return null}static _hitTestViewCursor(t,i){if(i.target){const e=t.lastRenderData.lastViewCursorsRenderData;for(const t of e)if(i.target===t.domNode)return i.fulfillContentText(t.position,null,{mightBeForeignElement:!1,injectedText:null})}if(i.isInContentArea){const e=t.lastRenderData.lastViewCursorsRenderData,s=i.mouseContentHorizontalOffset,n=i.mouseVerticalOffset;for(const o of e){if(s<o.contentLeft||s>o.contentLeft+o.width)continue;const e=t.getVerticalOffsetForLineNumber(o.position.lineNumber);if(e<=n&&n<=e+o.height)return i.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(t,i){const e=t.getZoneAtCoord(i.mouseVerticalOffset);if(e){const t=i.isInContentArea?8:5;return i.fulfillViewZone(t,e.position,e)}return null}static _hitTestTextArea(t,i){return Ly.isTextArea(i.targetPath)?t.lastRenderData.lastTextareaPosition?i.fulfillContentText(t.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):i.fulfillTextarea():null}static _hitTestMargin(t,i){if(i.isInMarginArea){const e=t.getFullLineRangeAtCoord(i.mouseVerticalOffset),s=e.range.getStartPosition();let n=Math.abs(i.relativePos.x);const o={isAfterLines:e.isAfterLines,glyphMarginLeft:t.layoutInfo.glyphMarginLeft,glyphMarginWidth:t.layoutInfo.glyphMarginWidth,lineNumbersWidth:t.layoutInfo.lineNumbersWidth,offsetX:n};if(n-=t.layoutInfo.glyphMarginLeft,n<=t.layoutInfo.glyphMarginWidth){const r=t.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e.range.getStartPosition()),h=t.viewModel.glyphLanes.getLanesAtLine(r.lineNumber);return o.glyphMarginLane=h[Math.floor(n/t.lineHeight)],i.fulfillMargin(2,s,e.range,o)}return n-=t.layoutInfo.glyphMarginWidth,n<=t.layoutInfo.lineNumbersWidth?i.fulfillMargin(3,s,e.range,o):(n-=t.layoutInfo.lineNumbersWidth,i.fulfillMargin(4,s,e.range,o))}return null}static _hitTestViewLines(t,i){if(!Ly.isChildOfViewLines(i.targetPath))return null;if(t.isInTopPadding(i.mouseVerticalOffset))return i.fulfillContentEmpty(new Cs(1,1),Qy);if(t.isAfterLines(i.mouseVerticalOffset)||t.isInBottomPadding(i.mouseVerticalOffset)){const e=t.viewModel.getLineCount(),s=t.viewModel.getLineMaxColumn(e);return i.fulfillContentEmpty(new Cs(e,s),Qy)}if(Ly.isStrictChildOfViewLines(i.targetPath)){const e=t.getLineNumberAtVerticalOffset(i.mouseVerticalOffset);if(t.viewModel.getLineLength(e)===0){const s=t.getLineWidth(e),n=Oy(i.mouseContentHorizontalOffset-s);return i.fulfillContentEmpty(new Cs(e,1),n)}const s=t.getLineWidth(e);if(i.mouseContentHorizontalOffset>=s){const n=Oy(i.mouseContentHorizontalOffset-s),o=new Cs(e,t.viewModel.getLineMaxColumn(e));return i.fulfillContentEmpty(o,n)}}const e=i.hitTestResult.value;return e.type===1?zy.createMouseTargetFromHitTestPosition(t,i,e.spanNode,e.position,e.injectedText):i.wouldBenefitFromHitTestTargetSwitch?(i.switchToHitTestTarget(),this._createMouseTarget(t,i)):i.fulfillUnknown()}static _hitTestMinimap(t,i){if(Ly.isChildOfMinimap(i.targetPath)){const e=t.getLineNumberAtVerticalOffset(i.mouseVerticalOffset),s=t.viewModel.getLineMaxColumn(e);return i.fulfillScrollbar(new Cs(e,s))}return null}static _hitTestScrollbarSlider(t,i){if(Ly.isChildOfScrollableElement(i.targetPath)&&i.target&&i.target.nodeType===1){const e=i.target.className;if(e&&/\b(slider|scrollbar)\b/.test(e)){const e=t.getLineNumberAtVerticalOffset(i.mouseVerticalOffset),s=t.viewModel.getLineMaxColumn(e);return i.fulfillScrollbar(new Cs(e,s))}}return null}static _hitTestScrollbar(t,i){if(Ly.isChildOfScrollableElement(i.targetPath)){const e=t.getLineNumberAtVerticalOffset(i.mouseVerticalOffset),s=t.viewModel.getLineMaxColumn(e);return i.fulfillScrollbar(new Cs(e,s))}return null}getMouseColumn(t){const i=this._context.configuration.options,e=i.get(145),s=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.contentLeft;return zy._getMouseColumn(s,i.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(t,i){return t<0?1:Math.round(t/i)+1}static createMouseTargetFromHitTestPosition(t,i,e,s,n){const o=s.lineNumber,r=s.column,h=t.getLineWidth(o);if(i.mouseContentHorizontalOffset>h){const t=Oy(i.mouseContentHorizontalOffset-h);return i.fulfillContentEmpty(s,t)}const c=t.visibleRangeForPosition(o,r);if(!c)return i.fulfillUnknown(s);const a=c.left;if(Math.abs(i.mouseContentHorizontalOffset-a)<1)return i.fulfillContentText(s,null,{mightBeForeignElement:!!n,injectedText:n});const l=[];if(l.push({offset:c.left,column:r}),r>1){const i=t.visibleRangeForPosition(o,r-1);i&&l.push({offset:i.left,column:r-1})}if(r<t.viewModel.getLineMaxColumn(o)){const i=t.visibleRangeForPosition(o,r+1);i&&l.push({offset:i.left,column:r+1})}l.sort(((t,i)=>t.offset-i.offset));const u=i.pos.toClientCoordinates(Gh(t.viewDomNode)),d=e.getBoundingClientRect(),f=d.left<=u.clientX&&u.clientX<=d.right;let g=null;for(let t=1;t<l.length;t++){const e=l[t-1],n=l[t];if(e.offset<=i.mouseContentHorizontalOffset&&i.mouseContentHorizontalOffset<=n.offset){g=new Es(o,e.column,o,n.column);const t=Math.abs(e.offset-i.mouseContentHorizontalOffset),r=Math.abs(n.offset-i.mouseContentHorizontalOffset);s=new Cs(o,t<r?e.column:n.column);break}}return i.fulfillContentText(s,g,{mightBeForeignElement:!f||!!n,injectedText:n})}static _doHitTestWithCaretRangeFromPoint(t,i){const e=t.getLineNumberAtVerticalOffset(i.mouseVerticalOffset),s=t.getVerticalOffsetForLineNumber(e),n=s+t.lineHeight;if(!(e===t.viewModel.getLineCount()&&i.mouseVerticalOffset>n)){const e=Math.floor((s+n)/2);let o=i.pos.y+(e-i.mouseVerticalOffset);o<=i.editorPos.y&&(o=i.editorPos.y+1),o>=i.editorPos.y+i.editorPos.height&&(o=i.editorPos.y+i.editorPos.height-1);const r=new Pb(i.pos.x,o),h=this._actualDoHitTestWithCaretRangeFromPoint(t,r.toClientCoordinates(Gh(t.viewDomNode)));if(h.type===1)return h}return this._actualDoHitTestWithCaretRangeFromPoint(t,i.pos.toClientCoordinates(Gh(t.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(t,i){const e=Ic(t.viewDomNode);let s;if(s=e?e.caretRangeFromPoint===void 0?function(t,i,e){const s=document.createRange();let n=t.elementFromPoint(i,e);if(n!==null){for(;n&&n.firstChild&&n.firstChild.nodeType!==n.firstChild.TEXT_NODE&&n.lastChild&&n.lastChild.firstChild;)n=n.lastChild;const t=n.getBoundingClientRect(),e=Gh(n),o=`${e.getComputedStyle(n,null).getPropertyValue("font-style")} ${e.getComputedStyle(n,null).getPropertyValue("font-variant")} ${e.getComputedStyle(n,null).getPropertyValue("font-weight")} ${e.getComputedStyle(n,null).getPropertyValue("font-size")}/${e.getComputedStyle(n,null).getPropertyValue("line-height")} ${e.getComputedStyle(n,null).getPropertyValue("font-family")}`,r=n.innerText;let h,c=t.left,a=0;if(i>t.left+t.width)a=r.length;else{const t=Uy.getInstance();for(let e=0;e<r.length+1;e++){if(h=t.getCharWidth(r.charAt(e),o)/2,c+=h,i<c){a=e;break}c+=h}}s.setStart(n.firstChild,a),s.setEnd(n.firstChild,a)}return s}(e,i.clientX,i.clientY):e.caretRangeFromPoint(i.clientX,i.clientY):t.viewDomNode.ownerDocument.caretRangeFromPoint(i.clientX,i.clientY),!s||!s.startContainer)return new Dy;const n=s.startContainer;if(n.nodeType===n.TEXT_NODE){const i=n.parentNode,e=i?i.parentNode:null,o=e?e.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===wy.CLASS_NAME?Sy.createFromDOMInfo(t,i,s.startOffset):new Dy(n.parentNode)}if(n.nodeType===n.ELEMENT_NODE){const i=n.parentNode,e=i?i.parentNode:null;return(e&&e.nodeType===e.ELEMENT_NODE?e.className:null)===wy.CLASS_NAME?Sy.createFromDOMInfo(t,n,n.textContent.length):new Dy(n)}return new Dy}static _doHitTestWithCaretPositionFromPoint(t,i){const e=t.viewDomNode.ownerDocument.caretPositionFromPoint(i.clientX,i.clientY);if(e.offsetNode.nodeType===e.offsetNode.TEXT_NODE){const i=e.offsetNode.parentNode,s=i?i.parentNode:null,n=s?s.parentNode:null;return(n&&n.nodeType===n.ELEMENT_NODE?n.className:null)===wy.CLASS_NAME?Sy.createFromDOMInfo(t,e.offsetNode.parentNode,e.offset):new Dy(e.offsetNode.parentNode)}if(e.offsetNode.nodeType===e.offsetNode.ELEMENT_NODE){const i=e.offsetNode.parentNode,s=i&&i.nodeType===i.ELEMENT_NODE?i.className:null,n=i?i.parentNode:null,o=n&&n.nodeType===n.ELEMENT_NODE?n.className:null;if(s===wy.CLASS_NAME){const i=e.offsetNode.childNodes[Math.min(e.offset,e.offsetNode.childNodes.length-1)];if(i)return Sy.createFromDOMInfo(t,i,0)}else if(o===wy.CLASS_NAME)return Sy.createFromDOMInfo(t,e.offsetNode,0)}return new Dy(e.offsetNode)}static _snapToSoftTabBoundary(t,i){const e=i.getLineContent(t.lineNumber),{tabSize:s}=i.model.getOptions(),n=By.atomicPosition(e,t.column-1,s,2);return n!==-1?new Cs(t.lineNumber,n+1):t}static doHitTest(t,i){let e=new Dy;if(typeof t.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?e=this._doHitTestWithCaretRangeFromPoint(t,i):t.viewDomNode.ownerDocument.caretPositionFromPoint&&(e=this._doHitTestWithCaretPositionFromPoint(t,i.pos.toClientCoordinates(Gh(t.viewDomNode)))),e.type===1){const i=t.viewModel.getInjectedTextAt(e.position),s=t.viewModel.normalizePosition(e.position,2);!i&&s.equals(e.position)||(e=new My(s,e.spanNode,i))}return e}}class Uy{static getInstance(){return Uy._INSTANCE||(Uy._INSTANCE=new Uy),Uy._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(t,i){const e=t+i;if(this._cache[e])return this._cache[e];const s=this._canvas.getContext("2d");s.font=i;const n=s.measureText(t).width;return this._cache[e]=n,n}}function Hy(t,i,e){let s=null,n=null;if(typeof e.value=="function"?(s="value",n=e.value,n.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof e.get=="function"&&(s="get",n=e.get),!n)throw new Error("not supported");const o=`$memoize$${i}`;e[s]=function(...t){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,t)}),this[o]}}Uy._INSTANCE=null;var Py,jy=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};(function(t){t.Tap="-monaco-gesturetap",t.Change="-monaco-gesturechange",t.Start="-monaco-gesturestart",t.End="-monaco-gesturesend",t.Contextmenu="-monaco-gesturecontextmenu"})(Py||(Py={}));class Wy extends te{constructor(){super(),this.dispatched=!1,this.targets=new _t,this.ignoreTargets=new _t,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(he.runAndSubscribe(ic,(({window:t,disposables:i})=>{i.add(rc(t.document,"touchstart",(t=>this.onTouchStart(t)),{passive:!1})),i.add(rc(t.document,"touchend",(i=>this.onTouchEnd(t,i)))),i.add(rc(t.document,"touchmove",(t=>this.onTouchMove(t)),{passive:!1}))}),{window:Wn,disposables:this._store}))}static addTarget(t){return Wy.isTouchDevice()?(Wy.INSTANCE||(Wy.INSTANCE=new Wy),qi(Wy.INSTANCE.targets.push(t))):te.None}static ignoreTarget(t){return Wy.isTouchDevice()?(Wy.INSTANCE||(Wy.INSTANCE=new Wy),qi(Wy.INSTANCE.ignoreTargets.push(t))):te.None}static isTouchDevice(){return"ontouchstart"in Wn||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(t){const i=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let e=0,s=t.targetTouches.length;e<s;e++){const s=t.targetTouches.item(e);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:i,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[i],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};const n=this.newGestureEvent(Py.Start,s.target);n.pageX=s.pageX,n.pageY=s.pageY,this.dispatchEvent(n)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}onTouchEnd(t,i){const e=Date.now(),s=Object.keys(this.activeTouches).length;for(let n=0,o=i.changedTouches.length;n<o;n++){const o=i.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}const h=this.activeTouches[o.identifier],c=Date.now()-h.initialTimeStamp;if(c<Wy.HOLD_DELAY&&Math.abs(h.initialPageX-r(h.rollingPageX))<30&&Math.abs(h.initialPageY-r(h.rollingPageY))<30){const t=this.newGestureEvent(Py.Tap,h.initialTarget);t.pageX=r(h.rollingPageX),t.pageY=r(h.rollingPageY),this.dispatchEvent(t)}else if(c>=Wy.HOLD_DELAY&&Math.abs(h.initialPageX-r(h.rollingPageX))<30&&Math.abs(h.initialPageY-r(h.rollingPageY))<30){const t=this.newGestureEvent(Py.Contextmenu,h.initialTarget);t.pageX=r(h.rollingPageX),t.pageY=r(h.rollingPageY),this.dispatchEvent(t)}else if(s===1){const i=r(h.rollingPageX),s=r(h.rollingPageY),n=r(h.rollingTimestamps)-h.rollingTimestamps[0],o=i-h.rollingPageX[0],c=s-h.rollingPageY[0],a=[...this.targets].filter((t=>h.initialTarget instanceof Node&&t.contains(h.initialTarget)));this.inertia(t,a,e,Math.abs(o)/n,o>0?1:-1,i,Math.abs(c)/n,c>0?1:-1,s)}this.dispatchEvent(this.newGestureEvent(Py.End,h.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)}newGestureEvent(t,i){const e=document.createEvent("CustomEvent");return e.initEvent(t,!1,!0),e.initialTarget=i,e.tapCount=0,e}dispatchEvent(t){if(t.type===Py.Tap){const i=(new Date).getTime();let e=0;e=i-this._lastSetTapCountTime>Wy.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=i,t.tapCount=e}else t.type!==Py.Change&&t.type!==Py.Contextmenu||(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(t.initialTarget))return;const i=[];for(const e of this.targets)if(e.contains(t.initialTarget)){let s=0,n=t.initialTarget;for(;n&&n!==e;)s++,n=n.parentElement;i.push([s,e])}i.sort(((t,i)=>t[0]-i[0]));for(const[e,s]of i)s.dispatchEvent(t),this.dispatched=!0}}inertia(t,i,e,s,n,o,r,h,c){this.handle=fc(t,(()=>{const a=Date.now(),l=a-e;let u=0,d=0,f=!0;s+=Wy.SCROLL_FRICTION*l,r+=Wy.SCROLL_FRICTION*l,s>0&&(f=!1,u=n*s*l),r>0&&(f=!1,d=h*r*l);const g=this.newGestureEvent(Py.Change);g.translationX=u,g.translationY=d,i.forEach((t=>t.dispatchEvent(g))),f||this.inertia(t,i,a,s,n,o+u,r,h,c+d)}))}onTouchMove(t){const i=Date.now();for(let e=0,s=t.changedTouches.length;e<s;e++){const s=t.changedTouches.item(e);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}const n=this.activeTouches[s.identifier],o=this.newGestureEvent(Py.Change,n.initialTarget);o.translationX=s.pageX-r(n.rollingPageX),o.translationY=s.pageY-r(n.rollingPageY),o.pageX=s.pageX,o.pageY=s.pageY,this.dispatchEvent(o),n.rollingPageX.length>3&&(n.rollingPageX.shift(),n.rollingPageY.shift(),n.rollingTimestamps.shift()),n.rollingPageX.push(s.pageX),n.rollingPageY.push(s.pageY),n.rollingTimestamps.push(i)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}}Wy.SCROLL_FRICTION=-.005,Wy.HOLD_DELAY=700,Wy.CLEAR_TAP_COUNT_TIME=400,jy([Hy],Wy,"isTouchDevice",null);let Yy=class extends te{onclick(t,i){this._register(rc(t,$c.CLICK,(e=>i(new ur(Gh(t),e)))))}onmousedown(t,i){this._register(rc(t,$c.MOUSE_DOWN,(e=>i(new ur(Gh(t),e)))))}onmouseover(t,i){this._register(rc(t,$c.MOUSE_OVER,(e=>i(new ur(Gh(t),e)))))}onmouseleave(t,i){this._register(rc(t,$c.MOUSE_LEAVE,(e=>i(new ur(Gh(t),e)))))}onkeydown(t,i){this._register(rc(t,$c.KEY_DOWN,(t=>i(new hr(t)))))}onkeyup(t,i){this._register(rc(t,$c.KEY_UP,(t=>i(new hr(t)))))}oninput(t,i){this._register(rc(t,$c.INPUT,i))}onblur(t,i){this._register(rc(t,$c.BLUR,i))}onfocus(t,i){this._register(rc(t,$c.FOCUS,i))}ignoreGesture(t){return Wy.ignoreTarget(t)}};const _y=11;class Vy extends Yy{constructor(t){super(),this._onActivate=t.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=t.bgWidth+"px",this.bgDomNode.style.height=t.bgHeight+"px",t.top!==void 0&&(this.bgDomNode.style.top="0px"),t.left!==void 0&&(this.bgDomNode.style.left="0px"),t.bottom!==void 0&&(this.bgDomNode.style.bottom="0px"),t.right!==void 0&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=t.className,this.domNode.classList.add(...Ka.asClassNameArray(t.icon)),this.domNode.style.position="absolute",this.domNode.style.width="11px",this.domNode.style.height="11px",t.top!==void 0&&(this.domNode.style.top=t.top+"px"),t.left!==void 0&&(this.domNode.style.left=t.left+"px"),t.bottom!==void 0&&(this.domNode.style.bottom=t.bottom+"px"),t.right!==void 0&&(this.domNode.style.right=t.right+"px"),this._pointerMoveMonitor=this._register(new Lw),this._register(cc(this.bgDomNode,$c.POINTER_DOWN,(t=>this._arrowPointerDown(t)))),this._register(cc(this.domNode,$c.POINTER_DOWN,(t=>this._arrowPointerDown(t)))),this._pointerdownRepeatTimer=this._register(new gc),this._pointerdownScheduleRepeatTimer=this._register(new xr)}_arrowPointerDown(t){t.target&&t.target instanceof Element&&(this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet((()=>{this._pointerdownRepeatTimer.cancelAndSet((()=>this._onActivate()),1e3/24,Gh(t))}),200),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,(t=>{}),(()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()})),t.preventDefault())}}class Jy extends te{constructor(t,i,e){super(),this._visibility=t,this._visibleClassName=i,this._invisibleClassName=e,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new xr)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this._updateShouldBeVisible())}setShouldBeVisible(t){this._rawShouldBeVisible=t,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility!==2&&(this._visibility===3||this._rawShouldBeVisible)}_updateShouldBeVisible(){const t=this._applyVisibilitySetting();this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())}setIsNeeded(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())}setDomNode(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){this._isNeeded?this._shouldBeVisible?this._reveal():this._hide(!0):this._hide(!1)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet((()=>{var t;(t=this._domNode)===null||t===void 0||t.setClassName(this._visibleClassName)}),0))}_hide(t){var i;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(i=this._domNode)===null||i===void 0||i.setClassName(this._invisibleClassName+(t?" fade":"")))}}class Gy extends Yy{constructor(t){super(),this._lazyRender=t.lazyRender,this._host=t.host,this._scrollable=t.scrollable,this._scrollByPage=t.scrollByPage,this._scrollbarState=t.scrollbarState,this._visibilityController=this._register(new Jy(t.visibility,"visible scrollbar "+t.extraScrollbarClassName,"invisible scrollbar "+t.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Lw),this._shouldRender=!0,this.domNode=Ba(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(rc(this.domNode.domNode,$c.POINTER_DOWN,(t=>this._domNodePointerDown(t))))}_createArrow(t){const i=this._register(new Vy(t));this.domNode.domNode.appendChild(i.bgDomNode),this.domNode.domNode.appendChild(i.domNode)}_createSlider(t,i,e,s){this.slider=Ba(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(i),typeof e=="number"&&this.slider.setWidth(e),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(rc(this.slider.domNode,$c.POINTER_DOWN,(t=>{t.button===0&&(t.preventDefault(),this._sliderPointerDown(t))}))),this.onclick(this.slider.domNode,(t=>{t.leftButton&&t.stopPropagation()}))}_onElementSize(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(t){t.target===this.domNode.domNode&&this._onPointerDown(t)}delegatePointerDown(t){const i=this.domNode.domNode.getClientRects()[0].top,e=i+this._scrollbarState.getSliderPosition(),s=i+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),n=this._sliderPointerPosition(t);e<=n&&n<=s?t.button===0&&(t.preventDefault(),this._sliderPointerDown(t)):this._onPointerDown(t)}_onPointerDown(t){let i,e;if(t.target===this.domNode.domNode&&typeof t.offsetX=="number"&&typeof t.offsetY=="number")i=t.offsetX,e=t.offsetY;else{const s=yc(this.domNode.domNode);i=t.pageX-s.left,e=t.pageY-s.top}const s=this._pointerDownRelativePosition(i,e);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),t.button===0&&(t.preventDefault(),this._sliderPointerDown(t))}_sliderPointerDown(t){if(!(t.target&&t.target instanceof Element))return;const i=this._sliderPointerPosition(t),e=this._sliderOrthogonalPointerPosition(t),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,(t=>{const n=this._sliderOrthogonalPointerPosition(t),o=Math.abs(n-e);if(yt&&o>140)return void this._setDesiredScrollPositionNow(s.getScrollPosition());const r=this._sliderPointerPosition(t)-i;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(r))}),(()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()})),this._host.onDragStart()}_setDesiredScrollPositionNow(t){const i={};this.writeScrollPosition(i,t),this._scrollable.setScrollPositionNow(i)}updateScrollbarSize(t){this._updateScrollbarSize(t),this._scrollbarState.setScrollbarSize(t),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}class Ky{constructor(t,i,e,s,n,o){this._scrollbarSize=Math.round(i),this._oppositeScrollbarSize=Math.round(e),this._arrowSize=Math.round(t),this._visibleSize=s,this._scrollSize=n,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Ky(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(t){const i=Math.round(t);return this._visibleSize!==i&&(this._visibleSize=i,this._refreshComputedValues(),!0)}setScrollSize(t){const i=Math.round(t);return this._scrollSize!==i&&(this._scrollSize=i,this._refreshComputedValues(),!0)}setScrollPosition(t){const i=Math.round(t);return this._scrollPosition!==i&&(this._scrollPosition=i,this._refreshComputedValues(),!0)}setScrollbarSize(t){this._scrollbarSize=Math.round(t)}setOppositeScrollbarSize(t){this._oppositeScrollbarSize=Math.round(t)}static _computeValues(t,i,e,s,n){const o=Math.max(0,e-t),r=Math.max(0,o-2*i),h=s>0&&s>e;if(!h)return{computedAvailableSize:Math.round(o),computedIsNeeded:h,computedSliderSize:Math.round(r),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(20,Math.floor(e*r/s))),a=(r-c)/(s-e),l=n*a;return{computedAvailableSize:Math.round(o),computedIsNeeded:h,computedSliderSize:Math.round(c),computedSliderRatio:a,computedSliderPosition:Math.round(l)}}_refreshComputedValues(){const t=Ky._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(t){if(!this._computedIsNeeded)return 0;const i=t-this._arrowSize-this._computedSliderSize/2;return Math.round(i/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(t){if(!this._computedIsNeeded)return 0;const i=t-this._arrowSize;let e=this._scrollPosition;return i<this._computedSliderPosition?e-=this._visibleSize:e+=this._visibleSize,e}getDesiredScrollPositionFromDelta(t){if(!this._computedIsNeeded)return 0;const i=this._computedSliderPosition+t;return Math.round(i/this._computedSliderRatio)}}class $y extends Gy{constructor(t,i,e){const s=t.getScrollDimensions(),n=t.getCurrentScrollPosition();if(super({lazyRender:i.lazyRender,host:e,scrollbarState:new Ky(i.horizontalHasArrows?i.arrowSize:0,i.horizontal===2?0:i.horizontalScrollbarSize,i.vertical===2?0:i.verticalScrollbarSize,s.width,s.scrollWidth,n.scrollLeft),visibility:i.horizontal,extraScrollbarClassName:"horizontal",scrollable:t,scrollByPage:i.scrollByPage}),i.horizontalHasArrows){const t=(i.arrowSize-_y)/2,e=(i.horizontalScrollbarSize-_y)/2;this._createArrow({className:"scra",icon:Fs.scrollbarButtonLeft,top:e,left:t,bottom:void 0,right:void 0,bgWidth:i.arrowSize,bgHeight:i.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new dr(null,1,0))}),this._createArrow({className:"scra",icon:Fs.scrollbarButtonRight,top:e,left:void 0,bottom:void 0,right:t,bgWidth:i.arrowSize,bgHeight:i.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new dr(null,-1,0))})}this._createSlider(Math.floor((i.horizontalScrollbarSize-i.horizontalSliderSize)/2),0,void 0,i.horizontalSliderSize)}_updateSlider(t,i){this.slider.setWidth(t),this.slider.setLeft(i)}_renderDomNode(t,i){this.domNode.setWidth(t),this.domNode.setHeight(i),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,i){return t}_sliderPointerPosition(t){return t.pageX}_sliderOrthogonalPointerPosition(t){return t.pageY}_updateScrollbarSize(t){this.slider.setHeight(t)}writeScrollPosition(t,i){t.scrollLeft=i}updateOptions(t){this.updateScrollbarSize(t.horizontal===2?0:t.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._visibilityController.setVisibility(t.horizontal),this._scrollByPage=t.scrollByPage}}class Xy extends Gy{constructor(t,i,e){const s=t.getScrollDimensions(),n=t.getCurrentScrollPosition();if(super({lazyRender:i.lazyRender,host:e,scrollbarState:new Ky(i.verticalHasArrows?i.arrowSize:0,i.vertical===2?0:i.verticalScrollbarSize,0,s.height,s.scrollHeight,n.scrollTop),visibility:i.vertical,extraScrollbarClassName:"vertical",scrollable:t,scrollByPage:i.scrollByPage}),i.verticalHasArrows){const t=(i.arrowSize-_y)/2,e=(i.verticalScrollbarSize-_y)/2;this._createArrow({className:"scra",icon:Fs.scrollbarButtonUp,top:t,left:e,bottom:void 0,right:void 0,bgWidth:i.verticalScrollbarSize,bgHeight:i.arrowSize,onActivate:()=>this._host.onMouseWheel(new dr(null,0,1))}),this._createArrow({className:"scra",icon:Fs.scrollbarButtonDown,top:void 0,left:e,bottom:t,right:void 0,bgWidth:i.verticalScrollbarSize,bgHeight:i.arrowSize,onActivate:()=>this._host.onMouseWheel(new dr(null,0,-1))})}this._createSlider(0,Math.floor((i.verticalScrollbarSize-i.verticalSliderSize)/2),i.verticalSliderSize,void 0)}_updateSlider(t,i){this.slider.setHeight(t),this.slider.setTop(i)}_renderDomNode(t,i){this.domNode.setWidth(i),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,i){return i}_sliderPointerPosition(t){return t.pageY}_sliderOrthogonalPointerPosition(t){return t.pageX}_updateScrollbarSize(t){this.slider.setWidth(t)}writeScrollPosition(t,i){t.scrollTop=i}updateOptions(t){this.updateScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(t.vertical),this._scrollByPage=t.scrollByPage}}class qy{constructor(t,i,e,s,n,o,r){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(i|=0,e|=0,s|=0,n|=0,o|=0,r|=0),this.rawScrollLeft=s,this.rawScrollTop=r,i<0&&(i=0),s+i>e&&(s=e-i),s<0&&(s=0),n<0&&(n=0),r+n>o&&(r=o-n),r<0&&(r=0),this.width=i,this.scrollWidth=e,this.scrollLeft=s,this.height=n,this.scrollHeight=o,this.scrollTop=r}equals(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop}withScrollDimensions(t,i){return new qy(this._forceIntegerValues,t.width!==void 0?t.width:this.width,t.scrollWidth!==void 0?t.scrollWidth:this.scrollWidth,i?this.rawScrollLeft:this.scrollLeft,t.height!==void 0?t.height:this.height,t.scrollHeight!==void 0?t.scrollHeight:this.scrollHeight,i?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new qy(this._forceIntegerValues,this.width,this.scrollWidth,t.scrollLeft!==void 0?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,t.scrollTop!==void 0?t.scrollTop:this.rawScrollTop)}createScrollEvent(t,i){const e=this.width!==t.width,s=this.scrollWidth!==t.scrollWidth,n=this.scrollLeft!==t.scrollLeft,o=this.height!==t.height,r=this.scrollHeight!==t.scrollHeight,h=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:i,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:e,scrollWidthChanged:s,scrollLeftChanged:n,heightChanged:o,scrollHeightChanged:r,scrollTopChanged:h}}}class Zy extends te{constructor(t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new de),this.onScroll=this._onScroll.event,this._smoothScrollDuration=t.smoothScrollDuration,this._scheduleAtNextAnimationFrame=t.scheduleAtNextAnimationFrame,this._state=new qy(t.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(t){this._smoothScrollDuration=t}validateScrollPosition(t){return this._state.withScrollPosition(t)}getScrollDimensions(){return this._state}setScrollDimensions(t,i){var e;const s=this._state.withScrollDimensions(t,i);this._setState(s,!!this._smoothScrolling),(e=this._smoothScrolling)===null||e===void 0||e.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(t){const i=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(i,!1)}setScrollPositionSmooth(t,i){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:t.scrollLeft===void 0?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:t.scrollTop===void 0?this._smoothScrolling.to.scrollTop:t.scrollTop};const e=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===e.scrollLeft&&this._smoothScrolling.to.scrollTop===e.scrollTop)return;let s;s=i?new ek(this._smoothScrolling.from,e,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,e,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const i=this._state.withScrollPosition(t);this._smoothScrolling=ek.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const t=this._smoothScrolling.tick(),i=this._state.withScrollPosition(t);return this._setState(i,!0),this._smoothScrolling?t.isDone?(this._smoothScrolling.dispose(),void(this._smoothScrolling=null)):void(this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))):void 0}_setState(t,i){const e=this._state;e.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(e,i)))}}class tk{constructor(t,i,e){this.scrollLeft=t,this.scrollTop=i,this.isDone=e}}function ik(t,i){const e=i-t;return function(i){return t+e*(1-function(t){return Math.pow(t,3)}(1-i))}}class ek{constructor(t,i,e,s){this.from=t,this.to=i,this.duration=s,this.startTime=e,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(t,i,e){if(Math.abs(t-i)>2.5*e){let r,h;return t<i?(r=t+.75*e,h=i-.75*e):(r=t-.75*e,h=i+.75*e),s=ik(t,r),n=ik(h,i),o=.33,function(t){return t<o?s(t/o):n((t-o)/(1-o))}}var s,n,o;return ik(t,i)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(t){this.to=t.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(t){const i=(t-this.startTime)/this.duration;if(i<1){const t=this.scrollLeft(i),e=this.scrollTop(i);return new tk(t,e,!1)}return new tk(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,i,e){return ek.start(t,i,e)}static start(t,i,e){e+=10;const s=Date.now()-10;return new ek(t,i,s,e)}}class sk{constructor(t,i,e){this.timestamp=t,this.deltaX=i,this.deltaY=e,this.score=0}}class nk{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let t=1,i=0,e=1,s=this._rear;for(;;){const n=s===this._front?t:Math.pow(2,-e);if(t-=n,i+=this._memory[s].score*n,s===this._front)break;s=(this._capacity+s-1)%this._capacity,e++}return i<=.5}acceptStandardWheelEvent(t){if(Go){const i=function(t){return Wo.INSTANCE.getZoomFactor(t)}(Gh(t.browserEvent));this.accept(Date.now(),t.deltaX*i,t.deltaY*i)}else this.accept(Date.now(),t.deltaX,t.deltaY)}accept(t,i,e){let s=null;const n=new sk(t,i,e);this._front===-1&&this._rear===-1?(this._memory[0]=n,this._front=0,this._rear=0):(s=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=n),n.score=this._computeScore(n,s)}_computeScore(t,i){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;let e=.5;if(this._isAlmostInt(t.deltaX)&&this._isAlmostInt(t.deltaY)||(e+=.25),i){const s=Math.abs(t.deltaX),n=Math.abs(t.deltaY),o=Math.abs(i.deltaX),r=Math.abs(i.deltaY),h=Math.max(Math.min(s,o),1),c=Math.max(Math.min(n,r),1),a=Math.max(s,o),l=Math.max(n,r);a%h==0&&l%c==0&&(e-=.5)}return Math.min(Math.max(e,0),1)}_isAlmostInt(t){return Math.abs(Math.round(t)-t)<.01}}nk.INSTANCE=new nk;class ok extends Yy{get options(){return this._options}constructor(t,i,e){super(),this._onScroll=this._register(new de),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new de),t.style.overflow="hidden",this._options=function(t){const i={lazyRender:t.lazyRender!==void 0&&t.lazyRender,className:t.className!==void 0?t.className:"",useShadows:t.useShadows===void 0||t.useShadows,handleMouseWheel:t.handleMouseWheel===void 0||t.handleMouseWheel,flipAxes:t.flipAxes!==void 0&&t.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:t.consumeMouseWheelIfScrollbarIsNeeded!==void 0&&t.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:t.alwaysConsumeMouseWheel!==void 0&&t.alwaysConsumeMouseWheel,scrollYToX:t.scrollYToX!==void 0&&t.scrollYToX,mouseWheelScrollSensitivity:t.mouseWheelScrollSensitivity!==void 0?t.mouseWheelScrollSensitivity:1,fastScrollSensitivity:t.fastScrollSensitivity!==void 0?t.fastScrollSensitivity:5,scrollPredominantAxis:t.scrollPredominantAxis===void 0||t.scrollPredominantAxis,mouseWheelSmoothScroll:t.mouseWheelSmoothScroll===void 0||t.mouseWheelSmoothScroll,arrowSize:t.arrowSize!==void 0?t.arrowSize:11,listenOnDomNode:t.listenOnDomNode!==void 0?t.listenOnDomNode:null,horizontal:t.horizontal!==void 0?t.horizontal:1,horizontalScrollbarSize:t.horizontalScrollbarSize!==void 0?t.horizontalScrollbarSize:10,horizontalSliderSize:t.horizontalSliderSize!==void 0?t.horizontalSliderSize:0,horizontalHasArrows:t.horizontalHasArrows!==void 0&&t.horizontalHasArrows,vertical:t.vertical!==void 0?t.vertical:1,verticalScrollbarSize:t.verticalScrollbarSize!==void 0?t.verticalScrollbarSize:10,verticalHasArrows:t.verticalHasArrows!==void 0&&t.verticalHasArrows,verticalSliderSize:t.verticalSliderSize!==void 0?t.verticalSliderSize:0,scrollByPage:t.scrollByPage!==void 0&&t.scrollByPage};return i.horizontalSliderSize=t.horizontalSliderSize!==void 0?t.horizontalSliderSize:i.horizontalScrollbarSize,i.verticalSliderSize=t.verticalSliderSize!==void 0?t.verticalSliderSize:i.verticalScrollbarSize,kt&&(i.className+=" mac"),i}(i),this._scrollable=e,this._register(this._scrollable.onScroll((t=>{this._onWillScroll.fire(t),this._onDidScroll(t),this._onScroll.fire(t)})));const s={onMouseWheel:t=>this._onMouseWheel(t),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new Xy(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new $y(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(t),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Ba(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Ba(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Ba(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,(t=>this._onMouseOver(t))),this.onmouseleave(this._listenOnDomNode,(t=>this._onMouseLeave(t))),this._hideTimeout=this._register(new xr),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=$i(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(t){this._verticalScrollbar.delegatePointerDown(t)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(t){this._scrollable.setScrollDimensions(t,!1)}updateClassName(t){this._options.className=t,kt&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(t){t.handleMouseWheel!==void 0&&(this._options.handleMouseWheel=t.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),t.mouseWheelScrollSensitivity!==void 0&&(this._options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity),t.fastScrollSensitivity!==void 0&&(this._options.fastScrollSensitivity=t.fastScrollSensitivity),t.scrollPredominantAxis!==void 0&&(this._options.scrollPredominantAxis=t.scrollPredominantAxis),t.horizontal!==void 0&&(this._options.horizontal=t.horizontal),t.vertical!==void 0&&(this._options.vertical=t.vertical),t.horizontalScrollbarSize!==void 0&&(this._options.horizontalScrollbarSize=t.horizontalScrollbarSize),t.verticalScrollbarSize!==void 0&&(this._options.verticalScrollbarSize=t.verticalScrollbarSize),t.scrollByPage!==void 0&&(this._options.scrollByPage=t.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(t){this._onMouseWheel(new dr(t))}_setListeningToMouseWheel(t){if(this._mouseWheelToDispose.length>0!==t&&(this._mouseWheelToDispose=$i(this._mouseWheelToDispose),t)){const t=t=>{this._onMouseWheel(new dr(t))};this._mouseWheelToDispose.push(rc(this._listenOnDomNode,$c.MOUSE_WHEEL,t,{passive:!1}))}}_onMouseWheel(t){var i;if(!((i=t.browserEvent)===null||i===void 0)&&i.defaultPrevented)return;const e=nk.INSTANCE;e.acceptStandardWheelEvent(t);let s=!1;if(t.deltaY||t.deltaX){let i=t.deltaY*this._options.mouseWheelScrollSensitivity,n=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&n+i===0?n=i=0:Math.abs(i)>=Math.abs(n)?n=0:i=0),this._options.flipAxes&&([i,n]=[n,i]);const o=!kt&&t.browserEvent&&t.browserEvent.shiftKey;!this._options.scrollYToX&&!o||n||(n=i,i=0),t.browserEvent&&t.browserEvent.altKey&&(n*=this._options.fastScrollSensitivity,i*=this._options.fastScrollSensitivity);const r=this._scrollable.getFutureScrollPosition();let h={};if(i){const t=50*i,e=r.scrollTop-(t<0?Math.floor(t):Math.ceil(t));this._verticalScrollbar.writeScrollPosition(h,e)}if(n){const t=50*n,i=r.scrollLeft-(t<0?Math.floor(t):Math.ceil(t));this._horizontalScrollbar.writeScrollPosition(h,i)}h=this._scrollable.validateScrollPosition(h),(r.scrollLeft!==h.scrollLeft||r.scrollTop!==h.scrollTop)&&(this._options.mouseWheelSmoothScroll&&e.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(h):this._scrollable.setScrollPositionNow(h),s=!0)}let n=s;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(t.preventDefault(),t.stopPropagation())}_onDidScroll(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const t=this._scrollable.getCurrentScrollPosition(),i=t.scrollTop>0,e=t.scrollLeft>0,s=e?" left":"",n=i?" top":"",o=e||i?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${n}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${n}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(t){this._mouseIsOver=!1,this._hide()}_onMouseOver(t){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet((()=>this._hide()),500)}}class rk extends ok{constructor(t,i){(i=i||{}).mouseWheelSmoothScroll=!1;const e=new Zy({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>fc(Gh(t),i)});super(t,i,e),this._register(e)}setScrollPosition(t){this._scrollable.setScrollPositionNow(t)}}class hk extends ok{constructor(t,i,e){super(t,i,e)}setScrollPosition(t){t.reuseAnimation?this._scrollable.setScrollPositionSmooth(t,t.reuseAnimation):this._scrollable.setScrollPositionNow(t)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class ck extends ok{constructor(t,i){(i=i||{}).mouseWheelSmoothScroll=!1;const e=new Zy({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>fc(Gh(t),i)});super(t,i,e),this._register(e),this._element=t,this._register(this.onScroll((t=>{t.scrollTopChanged&&(this._element.scrollTop=t.scrollTop),t.scrollLeftChanged&&(this._element.scrollLeft=t.scrollLeft)}))),this.scanDomNode()}setScrollPosition(t){this._scrollable.setScrollPositionNow(t)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}class ak extends ty{constructor(t,i,e){super(),this._mouseLeaveMonitor=null,this._context=t,this.viewController=i,this.viewHelper=e,this.mouseTargetFactory=new zy(this._context,e),this._mouseDownOperation=this._register(new lk(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,((t,i)=>this._createMouseTarget(t,i)),(t=>this._getMouseColumn(t)))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(145).height;const s=new Gb(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,(t=>this._onContextMenu(t,!0)))),this._register(s.onMouseMove(this.viewHelper.viewDomNode,(t=>{this._onMouseMove(t),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=rc(this.viewHelper.viewDomNode.ownerDocument,"mousemove",(t=>{this.viewHelper.viewDomNode.contains(t.target)||this._onMouseLeave(new Jb(t,!1,this.viewHelper.viewDomNode))})))}))),this._register(s.onMouseUp(this.viewHelper.viewDomNode,(t=>this._onMouseUp(t)))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,(t=>this._onMouseLeave(t))));let n=0;this._register(s.onPointerDown(this.viewHelper.viewDomNode,((t,i)=>{n=i}))),this._register(rc(this.viewHelper.viewDomNode,$c.POINTER_UP,(t=>{this._mouseDownOperation.onPointerUp()}))),this._register(s.onMouseDown(this.viewHelper.viewDomNode,(t=>this._onMouseDown(t,n)))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const t=nk.INSTANCE;let i=0,e=Fa.getZoomLevel(),s=!1,n=0;function o(t){return kt?(t.metaKey||t.ctrlKey)&&!t.shiftKey&&!t.altKey:t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey}this._register(rc(this.viewHelper.viewDomNode,$c.MOUSE_WHEEL,(r=>{if(this.viewController.emitMouseWheel(r),!this._context.configuration.options.get(76))return;const h=new dr(r);if(t.acceptStandardWheelEvent(h),t.isPhysicalMouseWheel()){if(o(r)){const t=Fa.getZoomLevel(),i=h.deltaY>0?1:-1;Fa.setZoomLevel(t+i),h.preventDefault(),h.stopPropagation()}}else Date.now()-i>50&&(e=Fa.getZoomLevel(),s=o(r),n=0),i=Date.now(),n+=h.deltaY,s&&(Fa.setZoomLevel(e+n/5),h.preventDefault(),h.stopPropagation())}),{capture:!0,passive:!1}))}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(t){if(t.hasChanged(145)){const t=this._context.configuration.options.get(145).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(t){return this._mouseDownOperation.onCursorStateChanged(t),!1}onFocusChanged(t){return!1}getTargetAtClientPoint(t,i){const e=new jb(t,i).toPageCoordinates(Gh(this.viewHelper.viewDomNode)),s=_b(this.viewHelper.viewDomNode);if(e.y<s.y||e.y>s.y+s.height||e.x<s.x||e.x>s.x+s.width)return null;const n=Vb(this.viewHelper.viewDomNode,s,e);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,e,n,null)}_createMouseTarget(t,i){let e=t.target;if(!this.viewHelper.viewDomNode.contains(e)){const i=Ic(this.viewHelper.viewDomNode);i&&(e=i.elementsFromPoint(t.posx,t.posy).find((t=>this.viewHelper.viewDomNode.contains(t))))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),t.editorPos,t.pos,t.relativePos,i?e:null)}_getMouseColumn(t){return this.mouseTargetFactory.getMouseColumn(t.relativePos)}_onContextMenu(t,i){this.viewController.emitContextMenu({event:t,target:this._createMouseTarget(t,i)})}_onMouseMove(t){this.mouseTargetFactory.mouseTargetIsWidget(t)||t.preventDefault(),!this._mouseDownOperation.isActive()&&(t.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:t,target:this._createMouseTarget(t,!0)}))}_onMouseLeave(t){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=(new Date).getTime(),this.viewController.emitMouseLeave({event:t,target:null})}_onMouseUp(t){this.viewController.emitMouseUp({event:t,target:this._createMouseTarget(t,!0)})}_onMouseDown(t,i){const e=this._createMouseTarget(t,!0),s=e.type===6||e.type===7,n=e.type===2||e.type===3||e.type===4,o=e.type===3,r=this._context.configuration.options.get(109),h=e.type===8||e.type===5,c=e.type===9;let a=t.leftButton||t.middleButton;kt&&t.leftButton&&t.ctrlKey&&(a=!1);const l=()=>{t.preventDefault(),this.viewHelper.focusTextArea()};if(a&&(s||o&&r))l(),this._mouseDownOperation.start(e.type,t,i);else if(n)t.preventDefault();else if(h){const s=e.detail;a&&this.viewHelper.shouldSuppressMouseDownOnViewZone(s.viewZoneId)&&(l(),this._mouseDownOperation.start(e.type,t,i),t.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(e.detail)&&(l(),t.preventDefault());this.viewController.emitMouseDown({event:t,target:e})}}class lk extends te{constructor(t,i,e,s,n,o){super(),this._context=t,this._viewController=i,this._viewHelper=e,this._mouseTargetFactory=s,this._createMouseTarget=n,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new $b(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new uk(this._context,this._viewHelper,this._mouseTargetFactory,((t,i,e)=>this._dispatchMouse(t,i,e)))),this._mouseState=new fk,this._currentSelection=new Bs(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(t){this._lastMouseEvent=t,this._mouseState.setModifiers(t);const i=this._findMousePosition(t,!1);i&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:t,target:i}):i.type!==13||i.outsidePosition!=="above"&&i.outsidePosition!=="below"?(this._topBottomDragScrolling.stop(),this._dispatchMouse(i,!0,1)):this._topBottomDragScrolling.start(i,t))}start(t,i,e){this._lastMouseEvent=i,this._mouseState.setStartedOnLineNumbers(t===3),this._mouseState.setStartButtons(i),this._mouseState.setModifiers(i);const s=this._findMousePosition(i,!0);if(!s||!s.position)return;this._mouseState.trySetCount(i.detail,s.position),i.detail=this._mouseState.count;const n=this._context.configuration.options;if(!n.get(91)&&n.get(35)&&!n.get(22)&&!this._mouseState.altKey&&i.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&s.type===6&&s.position&&this._currentSelection.containsPosition(s.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,e,i.buttons,(t=>this._onMouseDownThenMove(t)),(t=>{const i=this._findMousePosition(this._lastMouseEvent,!1);Kc(t)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:i?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()}));this._mouseState.isDragAndDrop=!1,this._dispatchMouse(s,i.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,e,i.buttons,(t=>this._onMouseDownThenMove(t)),(()=>this._stop())))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(t){this._currentSelection=t.selections[0]}_getPositionOutsideEditor(t){const i=t.editorPos,e=this._context.viewModel,s=this._context.viewLayout,n=this._getMouseColumn(t);if(t.posy<i.y){const e=i.y-t.posy,o=Math.max(s.getCurrentScrollTop()-e,0),r=Ry.getZoneAtCoord(this._context,o);if(r){const t=this._helpPositionJumpOverViewZone(r);if(t)return Iy.createOutsideEditor(n,t,"above",e)}const h=s.getLineNumberAtVerticalOffset(o);return Iy.createOutsideEditor(n,new Cs(h,1),"above",e)}if(t.posy>i.y+i.height){const o=t.posy-i.y-i.height,r=s.getCurrentScrollTop()+t.relativePos.y,h=Ry.getZoneAtCoord(this._context,r);if(h){const t=this._helpPositionJumpOverViewZone(h);if(t)return Iy.createOutsideEditor(n,t,"below",o)}const c=s.getLineNumberAtVerticalOffset(r);return Iy.createOutsideEditor(n,new Cs(c,e.getLineMaxColumn(c)),"below",o)}const o=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+t.relativePos.y);if(t.posx<i.x){const e=i.x-t.posx;return Iy.createOutsideEditor(n,new Cs(o,1),"left",e)}if(t.posx>i.x+i.width){const s=t.posx-i.x-i.width;return Iy.createOutsideEditor(n,new Cs(o,e.getLineMaxColumn(o)),"right",s)}return null}_findMousePosition(t,i){const e=this._getPositionOutsideEditor(t);if(e)return e;const s=this._createMouseTarget(t,i);if(!s.position)return null;if(s.type===8||s.type===5){const t=this._helpPositionJumpOverViewZone(s.detail);if(t)return Iy.createViewZone(s.type,s.element,s.mouseColumn,t,s.detail)}return s}_helpPositionJumpOverViewZone(t){const i=new Cs(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),e=t.positionBefore,s=t.positionAfter;return e&&s?e.isBefore(i)?e:s:null}_dispatchMouse(t,i,e){t.position&&this._viewController.dispatchMouse({position:t.position,mouseColumn:t.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:e,inSelectionMode:i,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:t.type===6&&t.detail.injectedText!==null})}}class uk extends te{constructor(t,i,e,s){super(),this._context=t,this._viewHelper=i,this._mouseTargetFactory=e,this._dispatchMouse=s,this._operation=null}dispose(){super.dispose(),this.stop()}start(t,i){this._operation?this._operation.setPosition(t,i):this._operation=new dk(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,t,i)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class dk extends te{constructor(t,i,e,s,n,o){super(),this._context=t,this._viewHelper=i,this._mouseTargetFactory=e,this._dispatchMouse=s,this._position=n,this._mouseEvent=o,this._lastTime=Date.now(),this._animationFrameDisposable=fc(Gh(o.browserEvent),(()=>this._execute()))}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(t,i){this._position=t,this._mouseEvent=i}_tick(){const t=Date.now(),i=t-this._lastTime;return this._lastTime=t,i}_getScrollSpeed(){const t=this._context.configuration.options.get(67),i=this._context.configuration.options.get(145).height/t,e=this._position.outsideDistance/t;return e<=1.5?Math.max(30,i*(1+e)):e<=3?Math.max(60,i*(2+e)):Math.max(200,i*(7+e))}_execute(){const t=this._context.configuration.options.get(67),i=this._getScrollSpeed()*(this._tick()/1e3)*t,e=this._position.outsidePosition==="above"?-i:i;this._context.viewModel.viewLayout.deltaScrollNow(0,e),this._viewHelper.renderNow();const s=this._context.viewLayout.getLinesViewportData(),n=this._position.outsidePosition==="above"?s.startLineNumber:s.endLineNumber;let o;{const t=_b(this._viewHelper.viewDomNode),i=this._context.configuration.options.get(145).horizontalScrollbarHeight,e=new Pb(this._mouseEvent.pos.x,t.y+t.height-i-.1),s=Vb(this._viewHelper.viewDomNode,t,e);o=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),t,e,s,null)}o.position&&o.position.lineNumber===n||(o=this._position.outsidePosition==="above"?Iy.createOutsideEditor(this._position.mouseColumn,new Cs(n,1),"above",this._position.outsideDistance):Iy.createOutsideEditor(this._position.mouseColumn,new Cs(n,this._context.viewModel.getLineMaxColumn(n)),"below",this._position.outsideDistance)),this._dispatchMouse(o,!0,2),this._animationFrameDisposable=fc(Gh(o.element),(()=>this._execute()))}}class fk{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(t){this._altKey=t.altKey,this._ctrlKey=t.ctrlKey,this._metaKey=t.metaKey,this._shiftKey=t.shiftKey}setStartButtons(t){this._leftButton=t.leftButton,this._middleButton=t.middleButton}setStartedOnLineNumbers(t){this._startedOnLineNumbers=t}trySetCount(t,i){const e=(new Date).getTime();e-this._lastSetMouseDownCountTime>fk.CLEAR_MOUSE_DOWN_COUNT_TIME&&(t=1),this._lastSetMouseDownCountTime=e,t>this._lastMouseDownCount+1&&(t=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(i)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=i,this._lastMouseDownCount=Math.min(t,this._lastMouseDownPositionEqualCount)}}fk.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class gk{get event(){return this.emitter.event}constructor(t,i,e){const s=t=>this.emitter.fire(t);this.emitter=new de({onWillAddFirstListener:()=>t.addEventListener(i,s,e),onDidRemoveLastListener:()=>t.removeEventListener(i,s,e)})}dispose(){this.emitter.dispose()}}class Ak{constructor(t,i,e,s,n){this.value=t,this.selectionStart=i,this.selectionEnd=e,this.selection=s,this.newlineCountBeforeSelection=n}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(t,i){const e=t.getValue(),s=t.getSelectionStart(),n=t.getSelectionEnd();let o;return i&&e.substring(0,s)===i.value.substring(0,i.selectionStart)&&(o=i.newlineCountBeforeSelection),new Ak(e,s,n,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new Ak(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(t,i,e){i.setValue(t,this.value),e&&i.setSelectionRange(t,this.selectionStart,this.selectionEnd)}deduceEditorPosition(t){var i,e,s,n,o,r,h,c;if(t<=this.selectionStart){const s=this.value.substring(t,this.selectionStart);return this._finishDeduceEditorPosition((e=(i=this.selection)===null||i===void 0?void 0:i.getStartPosition())!==null&&e!==void 0?e:null,s,-1)}if(t>=this.selectionEnd){const i=this.value.substring(this.selectionEnd,t);return this._finishDeduceEditorPosition((n=(s=this.selection)===null||s===void 0?void 0:s.getEndPosition())!==null&&n!==void 0?n:null,i,1)}const a=this.value.substring(this.selectionStart,t);if(a.indexOf("…")===-1)return this._finishDeduceEditorPosition((r=(o=this.selection)===null||o===void 0?void 0:o.getStartPosition())!==null&&r!==void 0?r:null,a,1);const l=this.value.substring(t,this.selectionEnd);return this._finishDeduceEditorPosition((c=(h=this.selection)===null||h===void 0?void 0:h.getEndPosition())!==null&&c!==void 0?c:null,l,-1)}_finishDeduceEditorPosition(t,i,e){let s=0,n=-1;for(;(n=i.indexOf(`\n`,n+1))!==-1;)s++;return[t,e*i.length,s]}static deduceInput(t,i,e){if(!t)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min(po(t.value,i.value),t.selectionStart,i.selectionStart),n=Math.min(wo(t.value,i.value),t.value.length-t.selectionEnd,i.value.length-i.selectionEnd);t.value.substring(s,t.value.length-n);const o=i.value.substring(s,i.value.length-n),r=t.selectionStart-s,h=t.selectionEnd-s;return i.selectionStart-s===i.selectionEnd-s?{text:o,replacePrevCharCnt:t.selectionStart-s,replaceNextCharCnt:0,positionDelta:0}:{text:o,replacePrevCharCnt:h-r,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(t,i){if(!t)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(t.value===i.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:i.selectionEnd-t.selectionEnd};const e=Math.min(po(t.value,i.value),t.selectionEnd),s=Math.min(wo(t.value,i.value),t.value.length-t.selectionEnd),n=t.value.substring(e,t.value.length-s),o=i.value.substring(e,i.value.length-s);const r=t.selectionEnd-e;const h=i.selectionEnd-e;return{text:o,replacePrevCharCnt:r,replaceNextCharCnt:n.length-r,positionDelta:h-o.length}}}Ak.EMPTY=new Ak("",0,0,null,void 0);class pk{static _getPageOfLine(t,i){return Math.floor((t-1)/i)}static _getRangeForPage(t,i){const e=t*i;return new Es(e+1,1,e+i+1,1)}static fromEditorSelection(t,i,e,s){const n=pk._getPageOfLine(i.startLineNumber,e),o=pk._getRangeForPage(n,e),r=pk._getPageOfLine(i.endLineNumber,e),h=pk._getRangeForPage(r,e);let c=o.intersectRanges(new Es(1,1,i.startLineNumber,i.startColumn));if(s&&t.getValueLengthInRange(c,1)>500){const i=t.modifyPosition(c.getEndPosition(),-500);c=Es.fromPositions(i,c.getEndPosition())}const a=t.getValueInRange(c,1),l=t.getLineCount(),u=t.getLineMaxColumn(l);let d=h.intersectRanges(new Es(i.endLineNumber,i.endColumn,l,u));if(s&&t.getValueLengthInRange(d,1)>500){const i=t.modifyPosition(d.getStartPosition(),500);d=Es.fromPositions(d.getStartPosition(),i)}const f=t.getValueInRange(d,1);let g;if(n===r||n+1===r)g=t.getValueInRange(i,1);else{const e=o.intersectRanges(i),s=h.intersectRanges(i);g=t.getValueInRange(e,1)+"…"+t.getValueInRange(s,1)}return s&&g.length>1e3&&(g=g.substring(0,500)+"…"+g.substring(g.length-500,g.length)),new Ak(a+g+f,a.length,a.length+g.length,i,c.endLineNumber-c.startLineNumber)}}var wk,mk=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},vk=function(t,i){return function(e,s){i(e,s,t)}};(function(t){t.Tap="-monaco-textarea-synthetic-tap"})(wk||(wk={}));const bk={forceCopyWithSyntaxHighlighting:!1};class yk{constructor(){this._lastState=null}set(t,i){this._lastState={lastCopiedValue:t,data:i}}get(t){return this._lastState&&this._lastState.lastCopiedValue===t?this._lastState.data:(this._lastState=null,null)}}yk.INSTANCE=new yk;class kk{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(t){const i={text:t=t||"",replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=t.length,i}}let xk=class extends te{get textAreaState(){return this._textAreaState}constructor(t,i,e,s,n,o){super(),this._host=t,this._textArea=i,this._OS=e,this._browser=s,this._accessibilityService=n,this._logService=o,this._onFocus=this._register(new de),this.onFocus=this._onFocus.event,this._onBlur=this._register(new de),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new de),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new de),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new de),this.onCut=this._onCut.event,this._onPaste=this._register(new de),this.onPaste=this._onPaste.event,this._onType=this._register(new de),this.onType=this._onType.event,this._onCompositionStart=this._register(new de),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new de),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new de),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new de),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new ie),this._asyncTriggerCut=this._register(new Er((()=>this._onCut.fire()),0)),this._textAreaState=Ak.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(he.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,(()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new Er((()=>this.writeNativeTextAreaContent("asyncFocusGain")),0)):this._asyncFocusGainWriteScreenReaderContent.clear()}))),this._hasFocus=!1,this._currentComposition=null;let r=null;this._register(this._textArea.onKeyDown((t=>{const i=new hr(t);(i.keyCode===114||this._currentComposition&&i.keyCode===1)&&i.stopPropagation(),i.equals(9)&&i.preventDefault(),r=i,this._onKeyDown.fire(i)}))),this._register(this._textArea.onKeyUp((t=>{const i=new hr(t);this._onKeyUp.fire(i)}))),this._register(this._textArea.onCompositionStart((t=>{const i=new kk;if(this._currentComposition)this._currentComposition=i;else{if(this._currentComposition=i,this._OS===2&&r&&r.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===t.data&&(r.code==="ArrowRight"||r.code==="ArrowLeft"))return i.handleCompositionUpdate("x"),void this._onCompositionStart.fire({data:t.data});this._onCompositionStart.fire({data:t.data})}}))),this._register(this._textArea.onCompositionUpdate((t=>{const i=this._currentComposition;if(!i)return;if(this._browser.isAndroid){const i=Ak.readFromTextArea(this._textArea,this._textAreaState),e=Ak.deduceAndroidCompositionInput(this._textAreaState,i);return this._textAreaState=i,this._onType.fire(e),void this._onCompositionUpdate.fire(t)}const e=i.handleCompositionUpdate(t.data);this._textAreaState=Ak.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(e),this._onCompositionUpdate.fire(t)}))),this._register(this._textArea.onCompositionEnd((t=>{const i=this._currentComposition;if(!i)return;if(this._currentComposition=null,this._browser.isAndroid){const t=Ak.readFromTextArea(this._textArea,this._textAreaState),i=Ak.deduceAndroidCompositionInput(this._textAreaState,t);return this._textAreaState=t,this._onType.fire(i),void this._onCompositionEnd.fire()}const e=i.handleCompositionUpdate(t.data);this._textAreaState=Ak.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(e),this._onCompositionEnd.fire()}))),this._register(this._textArea.onInput((t=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const i=Ak.readFromTextArea(this._textArea,this._textAreaState),e=Ak.deduceInput(this._textAreaState,i,this._OS===2);(e.replacePrevCharCnt!==0||e.text.length!==1||!mo(e.text.charCodeAt(0))&&e.text.charCodeAt(0)!==127)&&(this._textAreaState=i,e.text===""&&e.replacePrevCharCnt===0&&e.replaceNextCharCnt===0&&e.positionDelta===0||this._onType.fire(e))}))),this._register(this._textArea.onCut((t=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(t),this._asyncTriggerCut.schedule()}))),this._register(this._textArea.onCopy((t=>{this._ensureClipboardGetsEditorSelection(t)}))),this._register(this._textArea.onPaste((t=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),t.preventDefault(),!t.clipboardData)return;let[i,e]=Ck.getTextData(t.clipboardData);i&&(e=e||yk.INSTANCE.get(i),this._onPaste.fire({text:i,metadata:e}))}))),this._register(this._textArea.onFocus((()=>{const t=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!t&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new Er((()=>this.writeNativeTextAreaContent("asyncFocusGain")),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())}))),this._register(this._textArea.onBlur((()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)}))),this._register(this._textArea.onSyntheticTap((()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())})))}_installSelectionChangeListener(){let t=0;return rc(this._textArea.ownerDocument,"selectionchange",(i=>{if(Iw.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const e=Date.now(),s=e-t;if(t=e,s<5)return;const n=e-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),n<100||!this._textAreaState.selection)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const r=this._textArea.getSelectionStart(),h=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===r&&this._textAreaState.selectionEnd===h)return;const c=this._textAreaState.deduceEditorPosition(r),a=this._host.deduceModelPosition(c[0],c[1],c[2]),l=this._textAreaState.deduceEditorPosition(h),u=this._host.deduceModelPosition(l[0],l[1],l[2]),d=new Bs(a.lineNumber,a.column,u.lineNumber,u.column);this._onSelectionChangeRequest.fire(d)}))}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(t){this._hasFocus!==t&&(this._hasFocus=t,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(t,i){this._hasFocus||(i=i.collapseSelection()),i.writeToTextArea(t,this._textArea,this._hasFocus),this._textAreaState=i}writeNativeTextAreaContent(t){!this._accessibilityService.isScreenReaderOptimized()&&t==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${t})`),this._setAndWriteTextAreaState(t,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(t){const i=this._host.getDataToCopy(),e={version:1,isFromEmptySelection:i.isFromEmptySelection,multicursorText:i.multicursorText,mode:i.mode};yk.INSTANCE.set(this._browser.isFirefox?i.text.replace(/\r\n/g,`\n`):i.text,e),t.preventDefault(),t.clipboardData&&Ck.setTextData(t.clipboardData,i.text,i.html,e)}};xk=mk([vk(4,yw),vk(5,au)],xk);const Ck={getTextData(t){const i=t.getData(jd.text);let e=null;const s=t.getData("vscode-editor-data");if(typeof s=="string")try{e=JSON.parse(s),e.version!==1&&(e=null)}catch{}return i.length===0&&e===null&&t.files.length>0?[Array.prototype.slice.call(t.files,0).map((t=>t.name)).join(`\n`),null]:[i,e]},setTextData(t,i,e,s){t.setData(jd.text,i),typeof e=="string"&&t.setData("text/html",e),t.setData("vscode-editor-data",JSON.stringify(s))}};class Ek extends te{get ownerDocument(){return this._actual.ownerDocument}constructor(t){super(),this._actual=t,this.onKeyDown=this._register(new gk(this._actual,"keydown")).event,this.onKeyUp=this._register(new gk(this._actual,"keyup")).event,this.onCompositionStart=this._register(new gk(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new gk(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new gk(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new gk(this._actual,"beforeinput")).event,this.onInput=this._register(new gk(this._actual,"input")).event,this.onCut=this._register(new gk(this._actual,"cut")).event,this.onCopy=this._register(new gk(this._actual,"copy")).event,this.onPaste=this._register(new gk(this._actual,"paste")).event,this.onFocus=this._register(new gk(this._actual,"focus")).event,this.onBlur=this._register(new gk(this._actual,"blur")).event,this._onSyntheticTap=this._register(new de),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown((()=>Iw.onKeyDown()))),this._register(this.onBeforeInput((()=>Iw.onBeforeInput()))),this._register(this.onInput((()=>Iw.onInput()))),this._register(this.onKeyUp((()=>Iw.onKeyUp()))),this._register(rc(this._actual,wk.Tap,(()=>this._onSyntheticTap.fire())))}hasFocus(){const t=Ic(this._actual);return t?t.activeElement===this._actual:!!this._actual.isConnected&&Lc()===this._actual}setIgnoreSelectionChangeTime(t){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(t,i){const e=this._actual;e.value!==i&&(this.setIgnoreSelectionChangeTime("setValue"),e.value=i)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(t,i,e){const s=this._actual;let n=null;const o=Ic(s);n=o?o.activeElement:Lc();const r=Gh(n),h=n===s,c=s.selectionStart,a=s.selectionEnd;if(h&&c===i&&a===e)Vo&&r.parent!==r&&s.focus();else{if(h)return this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(i,e),void(Vo&&r.parent!==r&&s.focus());try{const t=function(t){const i=[];for(let e=0;t&&t.nodeType===t.ELEMENT_NODE;e++)i[e]=t.scrollTop,t=t.parentNode;return i}(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(i,e),function(t,i){for(let e=0;t&&t.nodeType===t.ELEMENT_NODE;e++)t.scrollTop!==i[e]&&(t.scrollTop=i[e]),t=t.parentNode}(s,t)}catch{}}}}class Bk extends ak{constructor(t,i,e){super(t,i,e),this._register(Wy.addTarget(this.viewHelper.linesContentDomNode)),this._register(rc(this.viewHelper.linesContentDomNode,Py.Tap,(t=>this.onTap(t)))),this._register(rc(this.viewHelper.linesContentDomNode,Py.Change,(t=>this.onChange(t)))),this._register(rc(this.viewHelper.linesContentDomNode,Py.Contextmenu,(t=>this._onContextMenu(new Jb(t,!1,this.viewHelper.viewDomNode),!1)))),this._lastPointerType="mouse",this._register(rc(this.viewHelper.linesContentDomNode,"pointerdown",(t=>{const i=t.pointerType;this._lastPointerType=i!=="mouse"?i==="touch"?"touch":"pen":"mouse"})));const s=new Kb(this.viewHelper.viewDomNode);this._register(s.onPointerMove(this.viewHelper.viewDomNode,(t=>this._onMouseMove(t)))),this._register(s.onPointerUp(this.viewHelper.viewDomNode,(t=>this._onMouseUp(t)))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,(t=>this._onMouseLeave(t)))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,((t,i)=>this._onMouseDown(t,i))))}onTap(t){t.initialTarget&&this.viewHelper.linesContentDomNode.contains(t.initialTarget)&&(t.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(t,!1))}onChange(t){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-t.translationX,-t.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(t,!0)}_dispatchGesture(t,i){const e=this._createMouseTarget(new Jb(t,!1,this.viewHelper.viewDomNode),!1);e.position&&this.viewController.dispatchMouse({position:e.position,mouseColumn:e.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:t.tapCount,inSelectionMode:i,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:e.type===6&&e.detail.injectedText!==null})}_onMouseDown(t,i){t.browserEvent.pointerType!=="touch"&&super._onMouseDown(t,i)}}class Dk extends ak{constructor(t,i,e){super(t,i,e),this._register(Wy.addTarget(this.viewHelper.linesContentDomNode)),this._register(rc(this.viewHelper.linesContentDomNode,Py.Tap,(t=>this.onTap(t)))),this._register(rc(this.viewHelper.linesContentDomNode,Py.Change,(t=>this.onChange(t)))),this._register(rc(this.viewHelper.linesContentDomNode,Py.Contextmenu,(t=>this._onContextMenu(new Jb(t,!1,this.viewHelper.viewDomNode),!1))))}onTap(t){t.preventDefault(),this.viewHelper.focusTextArea();const i=this._createMouseTarget(new Jb(t,!1,this.viewHelper.viewDomNode),!1);if(i.position){const t=document.createEvent("CustomEvent");t.initEvent(wk.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(t),this.viewController.moveTo(i.position,1)}}onChange(t){this._context.viewModel.viewLayout.deltaScrollNow(-t.translationX,-t.translationY)}}class Mk extends te{constructor(t,i,e){super(),(Dt||Pt&&Mt)&&qo?this.handler=this._register(new Bk(t,i,e)):Wn.TouchEvent?this.handler=this._register(new Dk(t,i,e)):this.handler=this._register(new ak(t,i,e))}getTargetAtClientPoint(t,i){return this.handler.getTargetAtClientPoint(t,i)}}class Sk extends ty{}const Fk=za("themeService");function Ik(t){return{id:t}}function Lk(t){switch(t){case uy.DARK:return"vs-dark";case uy.HIGH_CONTRAST_DARK:return"hc-black";case uy.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const Rk="base.contributions.theming",Tk=new class{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new de}onColorThemeChange(t){return this.themingParticipants.push(t),this.onThemingParticipantAddedEmitter.fire(t),qi((()=>{const i=this.themingParticipants.indexOf(t);this.themingParticipants.splice(i,1)}))}getThemingParticipants(){return this.themingParticipants}};function Nk(t){return Tk.onColorThemeChange(t)}Vl.add(Rk,Tk);class Qk extends te{constructor(t){super(),this.themeService=t,this.theme=t.getColorTheme(),this._register(this.themeService.onDidColorThemeChange((t=>this.onThemeChange(t))))}onThemeChange(t){this.theme=t,this.updateStyles()}updateStyles(){}}const Ok=Ow("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Background color for the highlight of line at the cursor position.")),zk=Ow("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:$w},st(0,"Background color for the border around the line at the cursor position."));Ow("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},st(0,"Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),Ow("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Xw,hcLight:Xw},st(0,"Background color of the border around highlighted ranges."),!0),Ow("editor.symbolHighlightBackground",{dark:Cm,light:Cm,hcDark:null,hcLight:null},st(0,"Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),Ow("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Xw,hcLight:Xw},st(0,"Background color of the border around highlighted symbols."),!0);const Uk=Ow("editorCursor.foreground",{dark:"#AEAFAD",light:CA.black,hcDark:CA.white,hcLight:"#0F4A85"},st(0,"Color of the editor cursor.")),Hk=Ow("editorCursor.background",null,st(0,"The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Pk=Ow("editorMultiCursor.primary.foreground",{dark:Uk,light:Uk,hcDark:Uk,hcLight:Uk},st(0,"Color of the primary editor cursor when multiple cursors are present.")),jk=Ow("editorMultiCursor.primary.background",{dark:Hk,light:Hk,hcDark:Hk,hcLight:Hk},st(0,"The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Wk=Ow("editorMultiCursor.secondary.foreground",{dark:Uk,light:Uk,hcDark:Uk,hcLight:Uk},st(0,"Color of secondary editor cursors when multiple cursors are present.")),Yk=Ow("editorMultiCursor.secondary.background",{dark:Hk,light:Hk,hcDark:Hk,hcLight:Hk},st(0,"The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),_k=Ow("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},st(0,"Color of whitespace characters in the editor.")),Vk=Ow("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:CA.white,hcLight:"#292929"},st(0,"Color of editor line numbers.")),Jk=Ow("editorIndentGuide.background",{dark:_k,light:_k,hcDark:_k,hcLight:_k},st(0,"Color of the editor indentation guides."),!1,st(0,"'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),Gk=Ow("editorIndentGuide.activeBackground",{dark:_k,light:_k,hcDark:_k,hcLight:_k},st(0,"Color of the active editor indentation guides."),!1,st(0,"'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),Kk=Ow("editorIndentGuide.background1",{dark:Jk,light:Jk,hcDark:Jk,hcLight:Jk},st(0,"Color of the editor indentation guides (1).")),$k=Ow("editorIndentGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Color of the editor indentation guides (2).")),Xk=Ow("editorIndentGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Color of the editor indentation guides (3).")),qk=Ow("editorIndentGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Color of the editor indentation guides (4).")),Zk=Ow("editorIndentGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Color of the editor indentation guides (5).")),tx=Ow("editorIndentGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Color of the editor indentation guides (6).")),ix=Ow("editorIndentGuide.activeBackground1",{dark:Gk,light:Gk,hcDark:Gk,hcLight:Gk},st(0,"Color of the active editor indentation guides (1).")),ex=Ow("editorIndentGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Color of the active editor indentation guides (2).")),sx=Ow("editorIndentGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Color of the active editor indentation guides (3).")),nx=Ow("editorIndentGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Color of the active editor indentation guides (4).")),ox=Ow("editorIndentGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Color of the active editor indentation guides (5).")),rx=Ow("editorIndentGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Color of the active editor indentation guides (6).")),hx=Ow("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Xw,hcLight:Xw},st(0,"Color of editor active line number"),!1,st(0,"Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));Ow("editorLineNumber.activeForeground",{dark:hx,light:hx,hcDark:hx,hcLight:hx},st(0,"Color of editor active line number"));const cx=Ow("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Color of the final editor line when editor.renderFinalNewline is set to dimmed."));Ow("editorRuler.foreground",{dark:"#5A5A5A",light:CA.lightgrey,hcDark:CA.white,hcLight:"#292929"},st(0,"Color of the editor rulers.")),Ow("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},st(0,"Foreground color of editor CodeLens")),Ow("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},st(0,"Background color behind matching brackets")),Ow("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:$w,hcLight:$w},st(0,"Color for matching brackets boxes"));const ax=Ow("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},st(0,"Color of the overview ruler border.")),lx=Ow("editorOverviewRuler.background",null,st(0,"Background color of the editor overview ruler."));Ow("editorGutter.background",{dark:rm,light:rm,hcDark:rm,hcLight:rm},st(0,"Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),Ow("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:CA.fromHex("#fff").transparent(.8),hcLight:$w},st(0,"Border color of unnecessary (unused) source code in the editor."));const ux=Ow("editorUnnecessaryCode.opacity",{dark:CA.fromHex("#000a"),light:CA.fromHex("#0007"),hcDark:null,hcLight:null},st(0,`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));Ow("editorGhostText.border",{dark:null,light:null,hcDark:CA.fromHex("#fff").transparent(.8),hcLight:CA.fromHex("#292929").transparent(.8)},st(0,"Border color of ghost text in the editor.")),Ow("editorGhostText.foreground",{dark:CA.fromHex("#ffffff56"),light:CA.fromHex("#0007"),hcDark:null,hcLight:null},st(0,"Foreground color of the ghost text in the editor.")),Ow("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},st(0,"Background color of the ghost text in the editor."));const dx=new CA(new yA(0,122,204,.6)),fx=Ow("editorOverviewRuler.rangeHighlightForeground",{dark:dx,light:dx,hcDark:dx,hcLight:dx},st(0,"Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),gx=Ow("editorOverviewRuler.errorForeground",{dark:new CA(new yA(255,18,18,.7)),light:new CA(new yA(255,18,18,.7)),hcDark:new CA(new yA(255,50,50,1)),hcLight:"#B5200D"},st(0,"Overview ruler marker color for errors.")),Ax=Ow("editorOverviewRuler.warningForeground",{dark:gm,light:gm,hcDark:Am,hcLight:Am},st(0,"Overview ruler marker color for warnings.")),px=Ow("editorOverviewRuler.infoForeground",{dark:pm,light:pm,hcDark:wm,hcLight:wm},st(0,"Overview ruler marker color for infos.")),wx=Ow("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},st(0,"Foreground color of brackets (1). Requires enabling bracket pair colorization.")),mx=Ow("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},st(0,"Foreground color of brackets (2). Requires enabling bracket pair colorization.")),vx=Ow("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},st(0,"Foreground color of brackets (3). Requires enabling bracket pair colorization.")),bx=Ow("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Foreground color of brackets (4). Requires enabling bracket pair colorization.")),yx=Ow("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Foreground color of brackets (5). Requires enabling bracket pair colorization.")),kx=Ow("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Foreground color of brackets (6). Requires enabling bracket pair colorization.")),xx=Ow("editorBracketHighlight.unexpectedBracket.foreground",{dark:new CA(new yA(255,18,18,.8)),light:new CA(new yA(255,18,18,.8)),hcDark:new CA(new yA(255,50,50,1)),hcLight:""},st(0,"Foreground color of unexpected brackets.")),Cx=Ow("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),Ex=Ow("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Bx=Ow("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),Dx=Ow("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),Mx=Ow("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),Sx=Ow("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),Fx=Ow("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Ix=Ow("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Lx=Ow("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Rx=Ow("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),Tx=Ow("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),Nx=Ow("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},st(0,"Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));Ow("editorUnicodeHighlight.border",{dark:gm,light:gm,hcDark:gm,hcLight:gm},st(0,"Border color used to highlight unicode characters.")),Ow("editorUnicodeHighlight.background",{dark:fm,light:fm,hcDark:fm,hcLight:fm},st(0,"Background color used to highlight unicode characters.")),Nk(((t,i)=>{const e=t.getColor(rm),s=t.getColor(Ok),n=s&&!s.isTransparent()?s:e;n&&i.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${n}; }`)}));class Qx extends Sk{constructor(t){super(),this._context=t,this._readConfig(),this._lastCursorModelPosition=new Cs(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const t=this._context.configuration.options;this._lineHeight=t.get(67);const i=t.get(68);this._renderLineNumbers=i.renderType,this._renderCustomLineNumbers=i.renderFn,this._renderFinalNewline=t.get(95);const e=t.get(145);this._lineNumbersLeft=e.lineNumbersLeft,this._lineNumbersWidth=e.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(t){return this._readConfig(),!0}onCursorStateChanged(t){const i=t.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i);let e=!1;return this._activeLineNumber!==i.lineNumber&&(this._activeLineNumber=i.lineNumber,e=!0),this._renderLineNumbers!==2&&this._renderLineNumbers!==3||(e=!0),e}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return t.scrollTopChanged}onZonesChanged(t){return!0}onDecorationsChanged(t){return t.affectsLineNumber}_getLineRenderLineNumber(t){const i=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Cs(t,1));if(i.column!==1)return"";const e=i.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(e);if(this._renderLineNumbers===2){const t=Math.abs(this._lastCursorModelPosition.lineNumber-e);return t===0?'<span class="relative-current-line-number">'+e+"</span>":String(t)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===e||e%10==0||e===this._context.viewModel.getLineCount()?String(e):"":String(e)}prepareRender(t){if(this._renderLineNumbers===0)return void(this._renderResult=null);const i=xt?this._lineHeight%2==0?" lh-even":" lh-odd":"",e=t.visibleRange.startLineNumber,s=t.visibleRange.endLineNumber,n=this._context.viewModel.getDecorationsInViewport(t.visibleRange).filter((t=>!!t.options.lineNumberClassName));n.sort(((t,i)=>Es.compareRangesUsingEnds(t.range,i.range)));let o=0;const r=this._context.viewModel.getLineCount(),h=[];for(let t=e;t<=s;t++){const s=t-e;let c=this._getLineRenderLineNumber(t),a="";for(;o<n.length&&n[o].range.endLineNumber<t;)o++;for(let i=o;i<n.length;i++){const{range:e,options:s}=n[i];e.startLineNumber<=t&&(a+=" "+s.lineNumberClassName)}c||a?(t===r&&this._context.viewModel.getLineLength(t)===0&&(this._renderFinalNewline==="off"&&(c=""),this._renderFinalNewline==="dimmed"&&(a+=" dimmed-line-number")),t===this._activeLineNumber&&(a+=" active-line-number"),h[s]=`<div class="${Qx.CLASS_NAME}${i}${a}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${c}</div>`):h[s]=""}this._renderResult=h}render(t,i){if(!this._renderResult)return"";const e=i-t;return e<0||e>=this._renderResult.length?"":this._renderResult[e]}}Qx.CLASS_NAME="line-numbers",Nk(((t,i)=>{const e=t.getColor(Vk),s=t.getColor(cx);s?i.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${s}; }`):e&&i.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${e.transparent(.4)}; }`)}));class Ox extends iy{constructor(t){super(t);const i=this._context.configuration.options,e=i.get(145);this._canUseLayerHinting=!i.get(32),this._contentLeft=e.contentLeft,this._glyphMarginLeft=e.glyphMarginLeft,this._glyphMarginWidth=e.glyphMarginWidth,this._domNode=Ba(document.createElement("div")),this._domNode.setClassName(Ox.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Ba(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Ox.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(t){const i=this._context.configuration.options,e=i.get(145);return this._canUseLayerHinting=!i.get(32),this._contentLeft=e.contentLeft,this._glyphMarginLeft=e.glyphMarginLeft,this._glyphMarginWidth=e.glyphMarginWidth,!0}onScrollChanged(t){return super.onScrollChanged(t)||t.scrollTopChanged}prepareRender(t){}render(t){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const i=t.scrollTop-t.bigNumbersDelta;this._domNode.setTop(-i);const e=Math.min(t.scrollHeight,1e6);this._domNode.setHeight(e),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(e)}}Ox.CLASS_NAME="glyph-margin",Ox.OUTER_CLASS_NAME="margin";const zx="monaco-mouse-cursor-text",Ux=new class{constructor(){this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}},Hx=za("keybindingService");var Px=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},jx=function(t,i){return function(e,s){i(e,s,t)}};class Wx{constructor(t,i,e,s,n){this._context=t,this.modelLineNumber=i,this.distanceToModelLineStart=e,this.widthOfHiddenLineTextBefore=s,this.distanceToModelLineEnd=n,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(t){const i=new Cs(this.modelLineNumber,this.distanceToModelLineStart+1),e=new Cs(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(e),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=t.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=t.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(t){return this._previousPresentation||(this._previousPresentation=t||{foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const Yx=Vo;let _x=class extends iy{constructor(t,i,e,s,n){super(t),this._keybindingService=s,this._instantiationService=n,this._primaryCursorPosition=new Cs(1,1),this._primaryCursorVisibleRange=null,this._viewController=i,this._visibleRangeProvider=e,this._scrollLeft=0,this._scrollTop=0;const o=this._context.configuration.options,r=o.get(145);this._setAccessibilityOptions(o),this._contentLeft=r.contentLeft,this._contentWidth=r.contentWidth,this._contentHeight=r.height,this._fontInfo=o.get(50),this._lineHeight=o.get(67),this._emptySelectionClipboard=o.get(37),this._copyWithSyntaxHighlighting=o.get(25),this._visibleTextArea=null,this._selections=[new Bs(1,1,1,1)],this._modelSelections=[new Bs(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Ba(document.createElement("textarea")),ey.write(this.textArea,7),this.textArea.setClassName(`inputarea ${zx}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:h}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=h*this._fontInfo.spaceWidth+"px",this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(o)),this.textArea.setAttribute("aria-required",o.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(o.get(124))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",st(0,"editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",o.get(91)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=Ba(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:t=>this._context.viewModel.getLineMaxColumn(t),getValueInRange:(t,i)=>this._context.viewModel.getValueInRange(t,i),getValueLengthInRange:(t,i)=>this._context.viewModel.getValueLengthInRange(t,i),modifyPosition:(t,i)=>this._context.viewModel.modifyPosition(t,i)},a={getDataToCopy:()=>{const t=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,yt),i=this._context.viewModel.model.getEOL(),e=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),s=Array.isArray(t)?t:null,n=Array.isArray(t)?t.join(i):t;let o,r=null;if(bk.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&n.length<65536){const t=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);t&&(o=t.html,r=t.mode)}return{isFromEmptySelection:e,multicursorText:s,text:n,html:o,mode:r}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const t=this._selections[0];if(kt&&t.isEmpty()){const i=t.getStartPosition();let e=this._getWordBeforePosition(i);if(e.length===0&&(e=this._getCharacterBeforePosition(i)),e.length>0)return new Ak(e,e.length,e.length,Es.fromPositions(i),0)}if(kt&&!t.isEmpty()&&c.getValueLengthInRange(t,0)<500){const i=c.getValueInRange(t,0);return new Ak(i,0,i.length,t,0)}if(Ko&&!t.isEmpty()){const t="vscode-placeholder";return new Ak(t,0,t.length,null,void 0)}return Ak.EMPTY}if(Xo){const t=this._selections[0];if(t.isEmpty()){const i=t.getStartPosition(),[e,s]=this._getAndroidWordAtPosition(i);if(e.length>0)return new Ak(e,s,s,Es.fromPositions(i),0)}return Ak.EMPTY}return pk.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(t,i,e)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(t,i,e)},l=this._register(new Ek(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(xk,a,l,Rt,{isAndroid:Xo,isChrome:Go,isFirefox:Vo,isSafari:Ko})),this._register(this._textAreaInput.onKeyDown((t=>{this._viewController.emitKeyDown(t)}))),this._register(this._textAreaInput.onKeyUp((t=>{this._viewController.emitKeyUp(t)}))),this._register(this._textAreaInput.onPaste((t=>{let i=!1,e=null,s=null;t.metadata&&(i=this._emptySelectionClipboard&&!!t.metadata.isFromEmptySelection,e=t.metadata.multicursorText!==void 0?t.metadata.multicursorText:null,s=t.metadata.mode),this._viewController.paste(t.text,i,e,s)}))),this._register(this._textAreaInput.onCut((()=>{this._viewController.cut()}))),this._register(this._textAreaInput.onType((t=>{t.replacePrevCharCnt||t.replaceNextCharCnt||t.positionDelta?this._viewController.compositionType(t.text,t.replacePrevCharCnt,t.replaceNextCharCnt,t.positionDelta):this._viewController.type(t.text)}))),this._register(this._textAreaInput.onSelectionChangeRequest((t=>{this._viewController.setSelection(t)}))),this._register(this._textAreaInput.onCompositionStart((t=>{const i=this.textArea.domNode,e=this._modelSelections[0],{distanceToModelLineStart:s,widthOfHiddenTextBefore:n}=(()=>{const t=i.value.substring(0,Math.min(i.selectionStart,i.selectionEnd)),s=t.lastIndexOf(`\n`),n=t.substring(s+1),o=n.lastIndexOf("\t"),r=n.length-o-1,h=e.getStartPosition(),c=Math.min(h.column-1,r),a=h.column-1-c,l=n.substring(0,n.length-c),{tabSize:u}=this._context.viewModel.model.getOptions(),d=function(t,i,e,s){if(i.length===0)return 0;const n=t.createElement("div");n.style.position="absolute",n.style.top="-50000px",n.style.width="50000px";const o=t.createElement("span");Da(o,e),o.style.whiteSpace="pre",o.style.tabSize=s*e.spaceWidth+"px",o.append(i),n.appendChild(o),t.body.appendChild(n);const r=o.offsetWidth;return t.body.removeChild(n),r}(this.textArea.domNode.ownerDocument,l,this._fontInfo,u);return{distanceToModelLineStart:a,widthOfHiddenTextBefore:d}})(),{distanceToModelLineEnd:o}=(()=>{const t=i.value.substring(Math.max(i.selectionStart,i.selectionEnd)),s=t.indexOf(`\n`),n=s===-1?t:t.substring(0,s),o=n.indexOf("\t"),r=o===-1?n.length:n.length-o-1,h=e.getEndPosition(),c=Math.min(this._context.viewModel.model.getLineMaxColumn(h.lineNumber)-h.column,r);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(h.lineNumber)-h.column-c}})();this._context.viewModel.revealRange("keyboard",!0,Es.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new Wx(this._context,e.startLineNumber,s,n,o),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${zx} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()}))),this._register(this._textAreaInput.onCompositionUpdate((t=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())}))),this._register(this._textAreaInput.onCompositionEnd((()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${zx}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()}))),this._register(this._textAreaInput.onFocus((()=>{this._context.viewModel.setHasFocus(!0)}))),this._register(this._textAreaInput.onBlur((()=>{this._context.viewModel.setHasFocus(!1)}))),this._register(Ux.onDidChange((()=>{this._ensureReadOnlyAttribute()})))}writeScreenReaderContent(t){this._textAreaInput.writeNativeTextAreaContent(t)}dispose(){super.dispose()}_getAndroidWordAtPosition(t){const i=this._context.viewModel.getLineContent(t.lineNumber),e=tg('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',[]);let s=!0,n=t.column,o=!0,r=t.column,h=0;for(;h<50&&(s||o);){if(s&&n<=1&&(s=!1),s){const t=i.charCodeAt(n-2);e.get(t)!==0?s=!1:n--}if(o&&r>i.length&&(o=!1),o){const t=i.charCodeAt(r-1);e.get(t)!==0?o=!1:r++}h++}return[i.substring(n-1,r-1),t.column-n]}_getWordBeforePosition(t){const i=this._context.viewModel.getLineContent(t.lineNumber),e=tg(this._context.configuration.options.get(131),[]);let s=t.column,n=0;for(;s>1;){const o=i.charCodeAt(s-2);if(e.get(o)!==0||n>50)return i.substring(s-1,t.column-1);n++,s--}return i.substring(0,t.column-1)}_getCharacterBeforePosition(t){if(t.column>1){const i=this._context.viewModel.getLineContent(t.lineNumber).charAt(t.column-2);if(!mo(i.charCodeAt(0)))return i}return""}_getAriaLabel(t){var i,e,s;if(t.get(2)===1){const t=(i=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))===null||i===void 0?void 0:i.getAriaLabel(),n=(e=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))===null||e===void 0?void 0:e.getAriaLabel(),o=(s=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))===null||s===void 0?void 0:s.getAriaLabel(),r=st(0,"The editor is not accessible at this time.");return t?st(0,"{0} To enable screen reader optimized mode, use {1}",r,t):n?st(0,"{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",r,n):o?st(0,"{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",r,o):r}return t.get(4)}_setAccessibilityOptions(t){this._accessibilitySupport=t.get(2);const i=t.get(3);this._accessibilitySupport===2&&i===Ni.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=i;const e=t.get(145).wrappingColumn;if(e!==-1&&this._accessibilitySupport!==1){const i=t.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(e*i.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=Yx?0:1}onConfigurationChanged(t){const i=this._context.configuration.options,e=i.get(145);this._setAccessibilityOptions(i),this._contentLeft=e.contentLeft,this._contentWidth=e.contentWidth,this._contentHeight=e.height,this._fontInfo=i.get(50),this._lineHeight=i.get(67),this._emptySelectionClipboard=i.get(37),this._copyWithSyntaxHighlighting=i.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:s}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=s*this._fontInfo.spaceWidth+"px",this.textArea.setAttribute("aria-label",this._getAriaLabel(i)),this.textArea.setAttribute("aria-required",i.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(i.get(124))),(t.hasChanged(34)||t.hasChanged(91))&&this._ensureReadOnlyAttribute(),t.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(t){return this._selections=t.selections.slice(0),this._modelSelections=t.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return this._scrollLeft=t.scrollLeft,this._scrollTop=t.scrollTop,!0}onZonesChanged(t){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(t){t.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",t.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),t.role&&this.textArea.setAttribute("role",t.role)}_ensureReadOnlyAttribute(){const t=this._context.configuration.options;!Ux.enabled||t.get(34)&&t.get(91)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(t){var i;this._primaryCursorPosition=new Cs(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=t.visibleRangeForPosition(this._primaryCursorPosition),(i=this._visibleTextArea)===null||i===void 0||i.prepareRender(t)}render(t){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){var t;if(this._visibleTextArea){const t=this._visibleTextArea.visibleTextareaStart,i=this._visibleTextArea.visibleTextareaEnd,e=this._visibleTextArea.startPosition,s=this._visibleTextArea.endPosition;if(e&&s&&t&&i&&i.left>=this._scrollLeft&&t.left<=this._scrollLeft+this._contentWidth){const n=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,o=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let r=this._visibleTextArea.widthOfHiddenLineTextBefore,h=this._contentLeft+t.left-this._scrollLeft,c=i.left-t.left+1;if(h<this._contentLeft){const t=this._contentLeft-h;h+=t,r+=t,c-=t}c>this._contentWidth&&(c=this._contentWidth);const a=this._context.viewModel.getViewLineData(e.lineNumber),l=a.tokens.findTokenIndexAtOffset(e.column-1),u=l===a.tokens.findTokenIndexAtOffset(s.column-1),d=this._visibleTextArea.definePresentation(u?a.tokens.getPresentation(l):null);this.textArea.domNode.scrollTop=o*this._lineHeight,this.textArea.domNode.scrollLeft=r,this._doRender({lastRenderPosition:null,top:n,left:h,width:c,height:this._lineHeight,useCover:!1,color:(Gs.getColorMap()||[])[d.foreground],italic:d.italic,bold:d.bold,underline:d.underline,strikethrough:d.strikethrough})}return}if(!this._primaryCursorVisibleRange)return void this._renderAtTopLeft();const i=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(i<this._contentLeft||i>this._contentLeft+this._contentWidth)return void this._renderAtTopLeft();const e=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(e<0||e>this._contentHeight)this._renderAtTopLeft();else if(kt||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:e,left:this._textAreaWrapping?this._contentLeft:i,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const s=(t=this._textAreaInput.textAreaState.newlineCountBeforeSelection)!==null&&t!==void 0?t:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=s*this._lineHeight}else this._doRender({lastRenderPosition:this._primaryCursorPosition,top:e,left:this._textAreaWrapping?this._contentLeft:i,width:this._textAreaWidth,height:Yx?0:1,useCover:!1})}_newlinecount(t){let i=0,e=-1;for(;e=t.indexOf(`\n`,e+1),e!==-1;)i++;return i}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:Yx?0:1,useCover:!0})}_doRender(t){this._lastRenderPosition=t.lastRenderPosition;const i=this.textArea,e=this.textAreaCover;Da(i,this._fontInfo),i.setTop(t.top),i.setLeft(t.left),i.setWidth(t.width),i.setHeight(t.height),i.setColor(t.color?CA.Format.CSS.formatHex(t.color):""),i.setFontStyle(t.italic?"italic":""),t.bold&&i.setFontWeight("bold"),i.setTextDecoration(`${t.underline?" underline":""}${t.strikethrough?" line-through":""}`),e.setTop(t.useCover?t.top:0),e.setLeft(t.useCover?t.left:0),e.setWidth(t.useCover?t.width:0),e.setHeight(t.useCover?t.height:0);const s=this._context.configuration.options;s.get(57)?e.setClassName("monaco-editor-background textAreaCover "+Ox.OUTER_CLASS_NAME):s.get(68).renderType!==0?e.setClassName("monaco-editor-background textAreaCover "+Qx.CLASS_NAME):e.setClassName("monaco-editor-background textAreaCover")}};function Vx(t,i,e){let s=so(t);return s===-1&&(s=t.length),function(t,i,e){let s=0;for(let e=0;e<t.length;e++)t.charAt(e)==="\t"?s=Ey.nextIndentTabStop(s,i):s++;let n="";if(!e){const t=Math.floor(s/i);s%=i;for(let i=0;i<t;i++)n+="\t"}for(let t=0;t<s;t++)n+=" ";return n}(t.substring(0,s),i,e)+t.substring(s)}_x=Px([jx(3,Hx),jx(4,Oa)],_x);const Jx=()=>!0,Gx=()=>!1,Kx=t=>t===" "||t==="\t";class $x{static shouldRecreate(t){return t.hasChanged(145)||t.hasChanged(131)||t.hasChanged(37)||t.hasChanged(77)||t.hasChanged(79)||t.hasChanged(80)||t.hasChanged(6)||t.hasChanged(7)||t.hasChanged(11)||t.hasChanged(9)||t.hasChanged(10)||t.hasChanged(14)||t.hasChanged(128)||t.hasChanged(50)||t.hasChanged(91)||t.hasChanged(130)}constructor(t,i,e,s){var n;this.languageConfigurationService=s,this._cursorMoveConfigurationBrand=void 0,this._languageId=t;const o=e.options,r=o.get(145),h=o.get(50);this.readOnly=o.get(91),this.tabSize=i.tabSize,this.indentSize=i.indentSize,this.insertSpaces=i.insertSpaces,this.stickyTabStops=o.get(116),this.lineHeight=h.lineHeight,this.typicalHalfwidthCharacterWidth=h.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=o.get(128),this.wordSeparators=o.get(131),this.emptySelectionClipboard=o.get(37),this.copyWithSyntaxHighlighting=o.get(25),this.multiCursorMergeOverlapping=o.get(77),this.multiCursorPaste=o.get(79),this.multiCursorLimit=o.get(80),this.autoClosingBrackets=o.get(6),this.autoClosingComments=o.get(7),this.autoClosingQuotes=o.get(11),this.autoClosingDelete=o.get(9),this.autoClosingOvertype=o.get(10),this.autoSurround=o.get(14),this.autoIndent=o.get(12),this.wordSegmenterLocales=o.get(130),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(t,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(t,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(t,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(t).getAutoClosingPairs();const c=this.languageConfigurationService.getLanguageConfiguration(t).getSurroundingPairs();if(c)for(const t of c)this.surroundingPairs[t.open]=t.close;const a=this.languageConfigurationService.getLanguageConfiguration(t).comments;this.blockCommentStartToken=(n=a==null?void 0:a.blockCommentStartToken)!==null&&n!==void 0?n:null}get electricChars(){var t;if(!this._electricChars){this._electricChars={};const i=(t=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||t===void 0?void 0:t.getElectricCharacters();if(i)for(const t of i)this._electricChars[t]=!0}return this._electricChars}onElectricCharacter(t,i,e){const s=qu(i,e-1),n=this.languageConfigurationService.getLanguageConfiguration(s.languageId).electricCharacter;return n?n.onElectricCharacter(t,s,e-s.firstCharOffset):null}normalizeIndentation(t){return Vx(t,this.indentSize,this.insertSpaces)}_getShouldAutoClose(t,i,e){switch(i){case"beforeWhitespace":return Kx;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(t,e);case"always":return Jx;case"never":return Gx}}_getLanguageDefinedShouldAutoClose(t,i){const e=this.languageConfigurationService.getLanguageConfiguration(t).getAutoCloseBeforeSet(i);return t=>e.indexOf(t)!==-1}visibleColumnFromColumn(t,i){return Ey.visibleColumnFromColumn(t.getLineContent(i.lineNumber),i.column,this.tabSize)}columnFromVisibleColumn(t,i,e){const s=Ey.columnFromVisibleColumn(t.getLineContent(i),e,this.tabSize),n=t.getLineMinColumn(i);if(s<n)return n;const o=t.getLineMaxColumn(i);return s>o?o:s}}let Xx=class t{static fromModelState(t){return new qx(t)}static fromViewState(t){return new Zx(t)}static fromModelSelection(i){const e=Bs.liftSelection(i),s=new tC(Es.fromPositions(e.getSelectionStart()),0,0,e.getPosition(),0);return t.fromModelState(s)}static fromModelSelections(t){const i=[];for(let e=0,s=t.length;e<s;e++)i[e]=this.fromModelSelection(t[e]);return i}constructor(t,i){this._cursorStateBrand=void 0,this.modelState=t,this.viewState=i}equals(t){return this.viewState.equals(t.viewState)&&this.modelState.equals(t.modelState)}};class qx{constructor(t){this.modelState=t,this.viewState=null}}class Zx{constructor(t){this.modelState=null,this.viewState=t}}class tC{constructor(t,i,e,s,n){this.selectionStart=t,this.selectionStartKind=i,this.selectionStartLeftoverVisibleColumns=e,this.position=s,this.leftoverVisibleColumns=n,this._singleCursorStateBrand=void 0,this.selection=tC._computeSelection(this.selectionStart,this.position)}equals(t){return this.selectionStartLeftoverVisibleColumns===t.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===t.leftoverVisibleColumns&&this.selectionStartKind===t.selectionStartKind&&this.position.equals(t.position)&&this.selectionStart.equalsRange(t.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(t,i,e,s){return t?new tC(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new Cs(i,e),s):new tC(new Es(i,e,i,e),0,s,new Cs(i,e),s)}static _computeSelection(t,i){return t.isEmpty()||!i.isBeforeOrEqual(t.getStartPosition())?Bs.fromPositions(t.getStartPosition(),i):Bs.fromPositions(t.getEndPosition(),i)}}class iC{constructor(t,i,e){this._editOperationResultBrand=void 0,this.type=t,this.commands=i,this.shouldPushStackElementBefore=e.shouldPushStackElementBefore,this.shouldPushStackElementAfter=e.shouldPushStackElementAfter}}function eC(t){return t==="'"||t==='"'||t==="`"}class sC{static columnSelect(t,i,e,s,n,o){const r=Math.abs(n-e)+1,h=e>n,c=s>o,a=s<o,l=[];for(let n=0;n<r;n++){const r=e+(h?-n:n),u=t.columnFromVisibleColumn(i,r,s),d=t.columnFromVisibleColumn(i,r,o),f=t.visibleColumnFromColumn(i,new Cs(r,u)),g=t.visibleColumnFromColumn(i,new Cs(r,d));a&&(f>o||g<s)||c&&(g>s||f<o)||l.push(new tC(new Es(r,u,r,u),0,0,new Cs(r,d),0))}if(l.length===0)for(let t=0;t<r;t++){const s=e+(h?-t:t),n=i.getLineMaxColumn(s);l.push(new tC(new Es(s,n,s,n),0,0,new Cs(s,n),0))}return{viewStates:l,reversed:h,fromLineNumber:e,fromVisualColumn:s,toLineNumber:n,toVisualColumn:o}}static columnSelectLeft(t,i,e){let s=e.toViewVisualColumn;return s>0&&s--,sC.columnSelect(t,i,e.fromViewLineNumber,e.fromViewVisualColumn,e.toViewLineNumber,s)}static columnSelectRight(t,i,e){let s=0;const n=Math.min(e.fromViewLineNumber,e.toViewLineNumber),o=Math.max(e.fromViewLineNumber,e.toViewLineNumber);for(let e=n;e<=o;e++){const n=i.getLineMaxColumn(e),o=t.visibleColumnFromColumn(i,new Cs(e,n));s=Math.max(s,o)}let r=e.toViewVisualColumn;return r<s&&r++,this.columnSelect(t,i,e.fromViewLineNumber,e.fromViewVisualColumn,e.toViewLineNumber,r)}static columnSelectUp(t,i,e,s){const n=s?t.pageSize:1,o=Math.max(1,e.toViewLineNumber-n);return this.columnSelect(t,i,e.fromViewLineNumber,e.fromViewVisualColumn,o,e.toViewVisualColumn)}static columnSelectDown(t,i,e,s){const n=s?t.pageSize:1,o=Math.min(i.getLineCount(),e.toViewLineNumber+n);return this.columnSelect(t,i,e.fromViewLineNumber,e.fromViewVisualColumn,o,e.toViewVisualColumn)}}class nC{constructor(t,i,e=!1){this._range=t,this._text=i,this.insertsAutoWhitespace=e}getEditOperations(t,i){i.addTrackedEditOperation(this._range,this._text)}computeCursorState(t,i){const e=i.getInverseEditOperations()[0].range;return Bs.fromPositions(e.getEndPosition())}}class oC{constructor(t,i){this._range=t,this._text=i}getEditOperations(t,i){i.addTrackedEditOperation(this._range,this._text)}computeCursorState(t,i){const e=i.getInverseEditOperations()[0].range;return Bs.fromRange(e,0)}}class rC{constructor(t,i,e=!1){this._range=t,this._text=i,this.insertsAutoWhitespace=e}getEditOperations(t,i){i.addTrackedEditOperation(this._range,this._text)}computeCursorState(t,i){const e=i.getInverseEditOperations()[0].range;return Bs.fromPositions(e.getStartPosition())}}class hC{constructor(t,i,e,s,n=!1){this._range=t,this._text=i,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=e,this.insertsAutoWhitespace=n}getEditOperations(t,i){i.addTrackedEditOperation(this._range,this._text)}computeCursorState(t,i){const e=i.getInverseEditOperations()[0].range;return Bs.fromPositions(e.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class cC{constructor(t,i,e,s=!1){this._range=t,this._text=i,this._initialSelection=e,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(t,i){i.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=i.trackSelection(this._initialSelection)}computeCursorState(t,i){return i.getTrackedSelection(this._selectionId)}}class aC{constructor(t,i,e){this._cursorPositionBrand=void 0,this.lineNumber=t,this.column=i,this.leftoverVisibleColumns=e}}class lC{static leftPosition(t,i){if(i.column>t.getLineMinColumn(i.lineNumber))return i.delta(void 0,-Eo(t.getLineContent(i.lineNumber),i.column-1));if(i.lineNumber>1){const e=i.lineNumber-1;return new Cs(e,t.getLineMaxColumn(e))}return i}static leftPositionAtomicSoftTabs(t,i,e){if(i.column<=t.getLineIndentColumn(i.lineNumber)){const s=t.getLineMinColumn(i.lineNumber),n=t.getLineContent(i.lineNumber),o=By.atomicPosition(n,i.column-1,e,0);if(o!==-1&&o+1>=s)return new Cs(i.lineNumber,o+1)}return this.leftPosition(t,i)}static left(t,i,e){const s=t.stickyTabStops?lC.leftPositionAtomicSoftTabs(i,e,t.tabSize):lC.leftPosition(i,e);return new aC(s.lineNumber,s.column,0)}static moveLeft(t,i,e,s,n){let o,r;if(e.hasSelection()&&!s)o=e.selection.startLineNumber,r=e.selection.startColumn;else{const s=e.position.delta(void 0,-(n-1)),h=i.normalizePosition(lC.clipPositionColumn(s,i),0),c=lC.left(t,i,h);o=c.lineNumber,r=c.column}return e.move(s,o,r,0)}static clipPositionColumn(t,i){return new Cs(t.lineNumber,lC.clipRange(t.column,i.getLineMinColumn(t.lineNumber),i.getLineMaxColumn(t.lineNumber)))}static clipRange(t,i,e){return t<i?i:t>e?e:t}static rightPosition(t,i,e){return e<t.getLineMaxColumn(i)?e+=Co(t.getLineContent(i),e-1):i<t.getLineCount()&&(i+=1,e=t.getLineMinColumn(i)),new Cs(i,e)}static rightPositionAtomicSoftTabs(t,i,e,s,n){if(e<t.getLineIndentColumn(i)){const n=t.getLineContent(i),o=By.atomicPosition(n,e-1,s,1);if(o!==-1)return new Cs(i,o+1)}return this.rightPosition(t,i,e)}static right(t,i,e){const s=t.stickyTabStops?lC.rightPositionAtomicSoftTabs(i,e.lineNumber,e.column,t.tabSize,t.indentSize):lC.rightPosition(i,e.lineNumber,e.column);return new aC(s.lineNumber,s.column,0)}static moveRight(t,i,e,s,n){let o,r;if(e.hasSelection()&&!s)o=e.selection.endLineNumber,r=e.selection.endColumn;else{const s=e.position.delta(void 0,n-1),h=i.normalizePosition(lC.clipPositionColumn(s,i),1),c=lC.right(t,i,h);o=c.lineNumber,r=c.column}return e.move(s,o,r,0)}static vertical(t,i,e,s,n,o,r,h){const c=Ey.visibleColumnFromColumn(i.getLineContent(e),s,t.tabSize)+n,a=i.getLineCount(),l=e===1&&s===1,u=e===a&&s===i.getLineMaxColumn(e),d=o<e?l:u;if((e=o)<1?(e=1,s=r?i.getLineMinColumn(e):Math.min(i.getLineMaxColumn(e),s)):e>a?(e=a,s=r?i.getLineMaxColumn(e):Math.min(i.getLineMaxColumn(e),s)):s=t.columnFromVisibleColumn(i,e,c),n=d?0:c-Ey.visibleColumnFromColumn(i.getLineContent(e),s,t.tabSize),h!==void 0){const t=new Cs(e,s),o=i.normalizePosition(t,h);n+=s-o.column,e=o.lineNumber,s=o.column}return new aC(e,s,n)}static down(t,i,e,s,n,o,r){return this.vertical(t,i,e,s,n,e+o,r,4)}static moveDown(t,i,e,s,n){let o,r;e.hasSelection()&&!s?(o=e.selection.endLineNumber,r=e.selection.endColumn):(o=e.position.lineNumber,r=e.position.column);let h,c=0;do{if(h=lC.down(t,i,o+c,r,e.leftoverVisibleColumns,n,!0),i.normalizePosition(new Cs(h.lineNumber,h.column),2).lineNumber>o)break}while(c++<10&&o+c<i.getLineCount());return e.move(s,h.lineNumber,h.column,h.leftoverVisibleColumns)}static translateDown(t,i,e){const s=e.selection,n=lC.down(t,i,s.selectionStartLineNumber,s.selectionStartColumn,e.selectionStartLeftoverVisibleColumns,1,!1),o=lC.down(t,i,s.positionLineNumber,s.positionColumn,e.leftoverVisibleColumns,1,!1);return new tC(new Es(n.lineNumber,n.column,n.lineNumber,n.column),0,n.leftoverVisibleColumns,new Cs(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(t,i,e,s,n,o,r){return this.vertical(t,i,e,s,n,e-o,r,3)}static moveUp(t,i,e,s,n){let o,r;e.hasSelection()&&!s?(o=e.selection.startLineNumber,r=e.selection.startColumn):(o=e.position.lineNumber,r=e.position.column);const h=lC.up(t,i,o,r,e.leftoverVisibleColumns,n,!0);return e.move(s,h.lineNumber,h.column,h.leftoverVisibleColumns)}static translateUp(t,i,e){const s=e.selection,n=lC.up(t,i,s.selectionStartLineNumber,s.selectionStartColumn,e.selectionStartLeftoverVisibleColumns,1,!1),o=lC.up(t,i,s.positionLineNumber,s.positionColumn,e.leftoverVisibleColumns,1,!1);return new tC(new Es(n.lineNumber,n.column,n.lineNumber,n.column),0,n.leftoverVisibleColumns,new Cs(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(t,i){return t.getLineFirstNonWhitespaceColumn(i)===0}static moveToPrevBlankLine(t,i,e,s){let n=e.position.lineNumber;for(;n>1&&this._isBlankLine(i,n);)n--;for(;n>1&&!this._isBlankLine(i,n);)n--;return e.move(s,n,i.getLineMinColumn(n),0)}static moveToNextBlankLine(t,i,e,s){const n=i.getLineCount();let o=e.position.lineNumber;for(;o<n&&this._isBlankLine(i,o);)o++;for(;o<n&&!this._isBlankLine(i,o);)o++;return e.move(s,o,i.getLineMinColumn(o),0)}static moveToBeginningOfLine(t,i,e,s){const n=e.position.lineNumber,o=i.getLineMinColumn(n),r=i.getLineFirstNonWhitespaceColumn(n)||o;let h;return h=e.position.column===r?o:r,e.move(s,n,h,0)}static moveToEndOfLine(t,i,e,s,n){const o=e.position.lineNumber,r=i.getLineMaxColumn(o);return e.move(s,o,r,n?1073741824-r:0)}static moveToBeginningOfBuffer(t,i,e,s){return e.move(s,1,1,0)}static moveToEndOfBuffer(t,i,e,s){const n=i.getLineCount(),o=i.getLineMaxColumn(n);return e.move(s,n,o,0)}}class uC{static deleteRight(t,i,e,s){const n=[];let o=t!==3;for(let t=0,r=s.length;t<r;t++){const r=s[t];let h=r;if(h.isEmpty()){const t=r.getPosition(),s=lC.right(i,e,t);h=new Es(s.lineNumber,s.column,t.lineNumber,t.column)}h.isEmpty()?n[t]=null:(h.startLineNumber!==h.endLineNumber&&(o=!0),n[t]=new nC(h,""))}return[o,n]}static isAutoClosingPairDelete(t,i,e,s,n,o,r){if(i==="never"&&e==="never"||t==="never")return!1;for(let h=0,c=o.length;h<c;h++){const c=o[h],a=c.getPosition();if(!c.isEmpty())return!1;const l=n.getLineContent(a.lineNumber);if(a.column<2||a.column>=l.length+1)return!1;const u=l.charAt(a.column-2),d=s.get(u);if(!d)return!1;if(eC(u)){if(e==="never")return!1}else if(i==="never")return!1;const f=l.charAt(a.column-1);let g=!1;for(const t of d)t.open===u&&t.close===f&&(g=!0);if(!g)return!1;if(t==="auto"){let t=!1;for(let i=0,e=r.length;i<e;i++){const e=r[i];if(a.lineNumber===e.startLineNumber&&a.column===e.startColumn){t=!0;break}}if(!t)return!1}}return!0}static _runAutoClosingPairDelete(t,i,e){const s=[];for(let t=0,i=e.length;t<i;t++){const i=e[t].getPosition(),n=new Es(i.lineNumber,i.column-1,i.lineNumber,i.column+1);s[t]=new nC(n,"")}return[!0,s]}static deleteLeft(t,i,e,s,n){if(this.isAutoClosingPairDelete(i.autoClosingDelete,i.autoClosingBrackets,i.autoClosingQuotes,i.autoClosingPairs.autoClosingPairsOpenByEnd,e,s,n))return this._runAutoClosingPairDelete(i,e,s);const o=[];let r=t!==2;for(let t=0,n=s.length;t<n;t++){const n=uC.getDeleteRange(s[t],e,i);n.isEmpty()?o[t]=null:(n.startLineNumber!==n.endLineNumber&&(r=!0),o[t]=new nC(n,""))}return[r,o]}static getDeleteRange(t,i,e){if(!t.isEmpty())return t;const s=t.getPosition();if(e.useTabStops&&s.column>1){const t=i.getLineContent(s.lineNumber),n=so(t),o=n===-1?t.length+1:n+1;if(s.column<=o){const t=e.visibleColumnFromColumn(i,s),n=Ey.prevIndentTabStop(t,e.indentSize),o=e.columnFromVisibleColumn(i,s.lineNumber,n);return new Es(s.lineNumber,o,s.lineNumber,s.column)}}return Es.fromPositions(uC.getPositionAfterDeleteLeft(s,i),s)}static getPositionAfterDeleteLeft(t,i){if(t.column>1){const e=Uo(t.column-1,i.getLineContent(t.lineNumber));return t.with(void 0,e+1)}if(t.lineNumber>1){const e=t.lineNumber-1;return new Cs(e,i.getLineMaxColumn(e))}return t}static cut(t,i,e){const s=[];let n=null;e.sort(((t,i)=>Cs.compare(t.getStartPosition(),i.getEndPosition())));for(let o=0,r=e.length;o<r;o++){const r=e[o];if(r.isEmpty())if(t.emptySelectionClipboard){const t=r.getPosition();let e,h,c,a;t.lineNumber<i.getLineCount()?(e=t.lineNumber,h=1,c=t.lineNumber+1,a=1):t.lineNumber>1&&(n==null?void 0:n.endLineNumber)!==t.lineNumber?(e=t.lineNumber-1,h=i.getLineMaxColumn(t.lineNumber-1),c=t.lineNumber,a=i.getLineMaxColumn(t.lineNumber)):(e=t.lineNumber,h=1,c=t.lineNumber,a=i.getLineMaxColumn(t.lineNumber));const l=new Es(e,h,c,a);n=l,l.isEmpty()?s[o]=null:s[o]=new nC(l,"")}else s[o]=null;else s[o]=new nC(r,"")}return new iC(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class dC{static _createWord(t,i,e,s,n){return{start:s,end:n,wordType:i,nextCharClass:e}}static _createIntlWord(t,i){return{start:t.index,end:t.index+t.segment.length,wordType:1,nextCharClass:i}}static _findPreviousWordOnLine(t,i,e){const s=i.getLineContent(e.lineNumber);return this._doFindPreviousWordOnLine(s,t,e)}static _doFindPreviousWordOnLine(t,i,e){let s=0;const n=i.findPrevIntlWordBeforeOrAtOffset(t,e.column-2);for(let o=e.column-2;o>=0;o--){const e=t.charCodeAt(o),r=i.get(e);if(n&&o===n.index)return this._createIntlWord(n,r);if(r===0){if(s===2)return this._createWord(t,s,r,o+1,this._findEndOfWord(t,i,s,o+1));s=1}else if(r===2){if(s===1)return this._createWord(t,s,r,o+1,this._findEndOfWord(t,i,s,o+1));s=2}else if(r===1&&s!==0)return this._createWord(t,s,r,o+1,this._findEndOfWord(t,i,s,o+1))}return s!==0?this._createWord(t,s,1,0,this._findEndOfWord(t,i,s,0)):null}static _findEndOfWord(t,i,e,s){const n=i.findNextIntlWordAtOrAfterOffset(t,s),o=t.length;for(let r=s;r<o;r++){const s=t.charCodeAt(r),o=i.get(s);if(n&&r===n.index+n.segment.length||o===1||e===1&&o===2||e===2&&o===0)return r}return o}static _findNextWordOnLine(t,i,e){const s=i.getLineContent(e.lineNumber);return this._doFindNextWordOnLine(s,t,e)}static _doFindNextWordOnLine(t,i,e){let s=0;const n=t.length,o=i.findNextIntlWordAtOrAfterOffset(t,e.column-1);for(let r=e.column-1;r<n;r++){const e=t.charCodeAt(r),n=i.get(e);if(o&&r===o.index)return this._createIntlWord(o,n);if(n===0){if(s===2)return this._createWord(t,s,n,this._findStartOfWord(t,i,s,r-1),r);s=1}else if(n===2){if(s===1)return this._createWord(t,s,n,this._findStartOfWord(t,i,s,r-1),r);s=2}else if(n===1&&s!==0)return this._createWord(t,s,n,this._findStartOfWord(t,i,s,r-1),r)}return s!==0?this._createWord(t,s,1,this._findStartOfWord(t,i,s,n-1),n):null}static _findStartOfWord(t,i,e,s){const n=i.findPrevIntlWordBeforeOrAtOffset(t,s);for(let o=s;o>=0;o--){const s=t.charCodeAt(o),r=i.get(s);if(n&&o===n.index)return o;if(r===1||e===1&&r===2||e===2&&r===0)return o+1}return 0}static moveWordLeft(t,i,e,s){let n=e.lineNumber,o=e.column;o===1&&n>1&&(n-=1,o=i.getLineMaxColumn(n));let r=dC._findPreviousWordOnLine(t,i,new Cs(n,o));if(s===0)return new Cs(n,r?r.start+1:1);if(s===1)return r&&r.wordType===2&&r.end-r.start==1&&r.nextCharClass===0&&(r=dC._findPreviousWordOnLine(t,i,new Cs(n,r.start+1))),new Cs(n,r?r.start+1:1);if(s===3){for(;r&&r.wordType===2;)r=dC._findPreviousWordOnLine(t,i,new Cs(n,r.start+1));return new Cs(n,r?r.start+1:1)}return r&&o<=r.end+1&&(r=dC._findPreviousWordOnLine(t,i,new Cs(n,r.start+1))),new Cs(n,r?r.end+1:1)}static _moveWordPartLeft(t,i){const e=i.lineNumber,s=t.getLineMaxColumn(e);if(i.column===1)return e>1?new Cs(e-1,t.getLineMaxColumn(e-1)):i;const n=t.getLineContent(e);for(let t=i.column-1;t>1;t--){const i=n.charCodeAt(t-2),o=n.charCodeAt(t-1);if(i===95&&o!==95)return new Cs(e,t);if(i===45&&o!==45)return new Cs(e,t);if((uo(i)||lo(i))&&fo(o))return new Cs(e,t);if(fo(i)&&fo(o)&&t+1<s){const i=n.charCodeAt(t);if(uo(i)||lo(i))return new Cs(e,t)}}return new Cs(e,1)}static moveWordRight(t,i,e,s){let n=e.lineNumber,o=e.column,r=!1;o===i.getLineMaxColumn(n)&&n<i.getLineCount()&&(r=!0,n+=1,o=1);let h=dC._findNextWordOnLine(t,i,new Cs(n,o));if(s===2)h&&h.wordType===2&&h.end-h.start==1&&h.nextCharClass===0&&(h=dC._findNextWordOnLine(t,i,new Cs(n,h.end+1))),o=h?h.end+1:i.getLineMaxColumn(n);else if(s===3){for(r&&(o=0);h&&(h.wordType===2||h.start+1<=o);)h=dC._findNextWordOnLine(t,i,new Cs(n,h.end+1));o=h?h.start+1:i.getLineMaxColumn(n)}else h&&!r&&o>=h.start+1&&(h=dC._findNextWordOnLine(t,i,new Cs(n,h.end+1))),o=h?h.start+1:i.getLineMaxColumn(n);return new Cs(n,o)}static _moveWordPartRight(t,i){const e=i.lineNumber,s=t.getLineMaxColumn(e);if(i.column===s)return e<t.getLineCount()?new Cs(e+1,1):i;const n=t.getLineContent(e);for(let t=i.column+1;t<s;t++){const i=n.charCodeAt(t-2),o=n.charCodeAt(t-1);if(i!==95&&o===95)return new Cs(e,t);if(i!==45&&o===45)return new Cs(e,t);if((uo(i)||lo(i))&&fo(o))return new Cs(e,t);if(fo(i)&&fo(o)&&t+1<s){const i=n.charCodeAt(t);if(uo(i)||lo(i))return new Cs(e,t)}}return new Cs(e,s)}static _deleteWordLeftWhitespace(t,i){const e=t.getLineContent(i.lineNumber),s=i.column-2,n=oo(e,s);return n+1<s?new Es(i.lineNumber,n+2,i.lineNumber,i.column):null}static deleteWordLeft(t,i){const e=t.wordSeparators,s=t.model,n=t.selection,o=t.whitespaceHeuristics;if(!n.isEmpty())return n;if(uC.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,t.model,[t.selection],t.autoClosedCharacters)){const i=t.selection.getPosition();return new Es(i.lineNumber,i.column-1,i.lineNumber,i.column+1)}const r=new Cs(n.positionLineNumber,n.positionColumn);let h=r.lineNumber,c=r.column;if(h===1&&c===1)return null;if(o){const t=this._deleteWordLeftWhitespace(s,r);if(t)return t}let a=dC._findPreviousWordOnLine(e,s,r);return i===0?a?c=a.start+1:c>1?c=1:(h--,c=s.getLineMaxColumn(h)):(a&&c<=a.end+1&&(a=dC._findPreviousWordOnLine(e,s,new Cs(h,a.start+1))),a?c=a.end+1:c>1?c=1:(h--,c=s.getLineMaxColumn(h))),new Es(h,c,r.lineNumber,r.column)}static deleteInsideWord(t,i,e){if(!e.isEmpty())return e;const s=new Cs(e.positionLineNumber,e.positionColumn);return this._deleteInsideWordWhitespace(i,s)||this._deleteInsideWordDetermineDeleteRange(t,i,s)}static _charAtIsWhitespace(t,i){const e=t.charCodeAt(i);return e===32||e===9}static _deleteInsideWordWhitespace(t,i){const e=t.getLineContent(i.lineNumber),s=e.length;if(s===0)return null;let n=Math.max(i.column-2,0);if(!this._charAtIsWhitespace(e,n))return null;let o=Math.min(i.column-1,s-1);if(!this._charAtIsWhitespace(e,o))return null;for(;n>0&&this._charAtIsWhitespace(e,n-1);)n--;for(;o+1<s&&this._charAtIsWhitespace(e,o+1);)o++;return new Es(i.lineNumber,n+1,i.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(t,i,e){const s=i.getLineContent(e.lineNumber),n=s.length;if(n===0)return e.lineNumber>1?new Es(e.lineNumber-1,i.getLineMaxColumn(e.lineNumber-1),e.lineNumber,1):e.lineNumber<i.getLineCount()?new Es(e.lineNumber,1,e.lineNumber+1,1):new Es(e.lineNumber,1,e.lineNumber,1);const o=t=>t.start+1<=e.column&&e.column<=t.end+1,r=(t,i)=>(t=Math.min(t,e.column),i=Math.max(i,e.column),new Es(e.lineNumber,t,e.lineNumber,i)),h=t=>{let i=t.start+1,e=t.end+1,o=!1;for(;e-1<n&&this._charAtIsWhitespace(s,e-1);)o=!0,e++;if(!o)for(;i>1&&this._charAtIsWhitespace(s,i-2);)i--;return r(i,e)},c=dC._findPreviousWordOnLine(t,i,e);if(c&&o(c))return h(c);const a=dC._findNextWordOnLine(t,i,e);return a&&o(a)?h(a):c&&a?r(c.end+1,a.start+1):c?r(c.start+1,c.end+1):a?r(a.start+1,a.end+1):r(1,n+1)}static _deleteWordPartLeft(t,i){if(!i.isEmpty())return i;const e=i.getPosition(),s=dC._moveWordPartLeft(t,e);return new Es(e.lineNumber,e.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(t,i){const e=t.length;for(let s=i;s<e;s++){const i=t.charAt(s);if(i!==" "&&i!=="\t")return s}return e}static _deleteWordRightWhitespace(t,i){const e=t.getLineContent(i.lineNumber),s=i.column-1,n=this._findFirstNonWhitespaceChar(e,s);return s+1<n?new Es(i.lineNumber,i.column,i.lineNumber,n+1):null}static deleteWordRight(t,i){const e=t.wordSeparators,s=t.model,n=t.selection,o=t.whitespaceHeuristics;if(!n.isEmpty())return n;const r=new Cs(n.positionLineNumber,n.positionColumn);let h=r.lineNumber,c=r.column;const a=s.getLineCount(),l=s.getLineMaxColumn(h);if(h===a&&c===l)return null;if(o){const t=this._deleteWordRightWhitespace(s,r);if(t)return t}let u=dC._findNextWordOnLine(e,s,r);return i===2?u?c=u.end+1:c<l||h===a?c=l:(h++,u=dC._findNextWordOnLine(e,s,new Cs(h,1)),c=u?u.start+1:s.getLineMaxColumn(h)):(u&&c>=u.start+1&&(u=dC._findNextWordOnLine(e,s,new Cs(h,u.end+1))),u?c=u.start+1:c<l||h===a?c=l:(h++,u=dC._findNextWordOnLine(e,s,new Cs(h,1)),c=u?u.start+1:s.getLineMaxColumn(h))),new Es(h,c,r.lineNumber,r.column)}static _deleteWordPartRight(t,i){if(!i.isEmpty())return i;const e=i.getPosition(),s=dC._moveWordPartRight(t,e);return new Es(e.lineNumber,e.column,s.lineNumber,s.column)}static _createWordAtPosition(t,i,e){const s=new Es(i,e.start+1,i,e.end+1);return{word:t.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(t,i,e,s){const n=tg(i,e),o=dC._findPreviousWordOnLine(n,t,s);if(o&&o.wordType===1&&o.start<=s.column-1&&s.column-1<=o.end)return dC._createWordAtPosition(t,s.lineNumber,o);const r=dC._findNextWordOnLine(n,t,s);return r&&r.wordType===1&&r.start<=s.column-1&&s.column-1<=r.end?dC._createWordAtPosition(t,s.lineNumber,r):null}static word(t,i,e,s,n){const o=tg(t.wordSeparators,t.wordSegmenterLocales),r=dC._findPreviousWordOnLine(o,i,n),h=dC._findNextWordOnLine(o,i,n);if(!s){let t,e;return r&&r.wordType===1&&r.start<=n.column-1&&n.column-1<=r.end?(t=r.start+1,e=r.end+1):h&&h.wordType===1&&h.start<=n.column-1&&n.column-1<=h.end?(t=h.start+1,e=h.end+1):(t=r?r.end+1:1,e=h?h.start+1:i.getLineMaxColumn(n.lineNumber)),new tC(new Es(n.lineNumber,t,n.lineNumber,e),1,0,new Cs(n.lineNumber,e),0)}let c,a;r&&r.wordType===1&&r.start<n.column-1&&n.column-1<r.end?(c=r.start+1,a=r.end+1):h&&h.wordType===1&&h.start<n.column-1&&n.column-1<h.end?(c=h.start+1,a=h.end+1):(c=n.column,a=n.column);const l=n.lineNumber;let u;if(e.selectionStart.containsPosition(n))u=e.selectionStart.endColumn;else if(n.isBeforeOrEqual(e.selectionStart.getStartPosition())){u=c;const t=new Cs(l,u);e.selectionStart.containsPosition(t)&&(u=e.selectionStart.endColumn)}else{u=a;const t=new Cs(l,u);e.selectionStart.containsPosition(t)&&(u=e.selectionStart.startColumn)}return e.move(!0,l,u,0)}}class fC extends dC{static deleteWordPartLeft(t){const i=gC([dC.deleteWordLeft(t,0),dC.deleteWordLeft(t,2),dC._deleteWordPartLeft(t.model,t.selection)]);return i.sort(Es.compareRangesUsingEnds),i[2]}static deleteWordPartRight(t){const i=gC([dC.deleteWordRight(t,0),dC.deleteWordRight(t,2),dC._deleteWordPartRight(t.model,t.selection)]);return i.sort(Es.compareRangesUsingStarts),i[0]}static moveWordPartLeft(t,i,e){const s=gC([dC.moveWordLeft(t,i,e,0),dC.moveWordLeft(t,i,e,2),dC._moveWordPartLeft(i,e)]);return s.sort(Cs.compare),s[2]}static moveWordPartRight(t,i,e){const s=gC([dC.moveWordRight(t,i,e,0),dC.moveWordRight(t,i,e,2),dC._moveWordPartRight(i,e)]);return s.sort(Cs.compare),s[0]}}function gC(t){return t.filter((t=>!!t))}class AC{static addCursorDown(t,i,e){const s=[];let n=0;for(let o=0,r=i.length;o<r;o++){const r=i[o];s[n++]=new Xx(r.modelState,r.viewState),s[n++]=e?Xx.fromModelState(lC.translateDown(t.cursorConfig,t.model,r.modelState)):Xx.fromViewState(lC.translateDown(t.cursorConfig,t,r.viewState))}return s}static addCursorUp(t,i,e){const s=[];let n=0;for(let o=0,r=i.length;o<r;o++){const r=i[o];s[n++]=new Xx(r.modelState,r.viewState),s[n++]=e?Xx.fromModelState(lC.translateUp(t.cursorConfig,t.model,r.modelState)):Xx.fromViewState(lC.translateUp(t.cursorConfig,t,r.viewState))}return s}static moveToBeginningOfLine(t,i,e){const s=[];for(let n=0,o=i.length;n<o;n++){const o=i[n];s[n]=this._moveToLineStart(t,o,e)}return s}static _moveToLineStart(t,i,e){const s=i.viewState.position.column,n=s===i.modelState.position.column,o=i.viewState.position.lineNumber,r=t.getLineFirstNonWhitespaceColumn(o);return n||s===r?this._moveToLineStartByModel(t,i,e):this._moveToLineStartByView(t,i,e)}static _moveToLineStartByView(t,i,e){return Xx.fromViewState(lC.moveToBeginningOfLine(t.cursorConfig,t,i.viewState,e))}static _moveToLineStartByModel(t,i,e){return Xx.fromModelState(lC.moveToBeginningOfLine(t.cursorConfig,t.model,i.modelState,e))}static moveToEndOfLine(t,i,e,s){const n=[];for(let o=0,r=i.length;o<r;o++){const r=i[o];n[o]=this._moveToLineEnd(t,r,e,s)}return n}static _moveToLineEnd(t,i,e,s){const n=i.viewState.position,o=t.getLineMaxColumn(n.lineNumber),r=n.column===o,h=i.modelState.position,c=t.model.getLineMaxColumn(h.lineNumber),a=o-n.column==c-h.column;return r||a?this._moveToLineEndByModel(t,i,e,s):this._moveToLineEndByView(t,i,e,s)}static _moveToLineEndByView(t,i,e,s){return Xx.fromViewState(lC.moveToEndOfLine(t.cursorConfig,t,i.viewState,e,s))}static _moveToLineEndByModel(t,i,e,s){return Xx.fromModelState(lC.moveToEndOfLine(t.cursorConfig,t.model,i.modelState,e,s))}static expandLineSelection(t,i){const e=[];for(let s=0,n=i.length;s<n;s++){const n=i[s],o=n.modelState.selection.startLineNumber,r=t.model.getLineCount();let h,c=n.modelState.selection.endLineNumber;c===r?h=t.model.getLineMaxColumn(r):(c++,h=1),e[s]=Xx.fromModelState(new tC(new Es(o,1,o,1),0,0,new Cs(c,h),0))}return e}static moveToBeginningOfBuffer(t,i,e){const s=[];for(let n=0,o=i.length;n<o;n++){const o=i[n];s[n]=Xx.fromModelState(lC.moveToBeginningOfBuffer(t.cursorConfig,t.model,o.modelState,e))}return s}static moveToEndOfBuffer(t,i,e){const s=[];for(let n=0,o=i.length;n<o;n++){const o=i[n];s[n]=Xx.fromModelState(lC.moveToEndOfBuffer(t.cursorConfig,t.model,o.modelState,e))}return s}static selectAll(t,i){const e=t.model.getLineCount(),s=t.model.getLineMaxColumn(e);return Xx.fromModelState(new tC(new Es(1,1,1,1),0,0,new Cs(e,s),0))}static line(t,i,e,s,n){const o=t.model.validatePosition(s),r=n?t.coordinatesConverter.validateViewPosition(new Cs(n.lineNumber,n.column),o):t.coordinatesConverter.convertModelPositionToViewPosition(o);if(!e){const i=t.model.getLineCount();let e=o.lineNumber+1,s=1;return e>i&&(e=i,s=t.model.getLineMaxColumn(e)),Xx.fromModelState(new tC(new Es(o.lineNumber,1,e,s),2,0,new Cs(e,s),0))}const h=i.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<h)return Xx.fromViewState(i.viewState.move(!0,r.lineNumber,1,0));if(o.lineNumber>h){const e=t.getLineCount();let s=r.lineNumber+1,n=1;return s>e&&(s=e,n=t.getLineMaxColumn(s)),Xx.fromViewState(i.viewState.move(!0,s,n,0))}{const t=i.modelState.selectionStart.getEndPosition();return Xx.fromModelState(i.modelState.move(!0,t.lineNumber,t.column,0))}}static word(t,i,e,s){const n=t.model.validatePosition(s);return Xx.fromModelState(dC.word(t.cursorConfig,t.model,i.modelState,e,n))}static cancelSelection(t,i){if(!i.modelState.hasSelection())return new Xx(i.modelState,i.viewState);const e=i.viewState.position.lineNumber,s=i.viewState.position.column;return Xx.fromViewState(new tC(new Es(e,s,e,s),0,0,new Cs(e,s),0))}static moveTo(t,i,e,s,n){if(e){if(i.modelState.selectionStartKind===1)return this.word(t,i,e,s);if(i.modelState.selectionStartKind===2)return this.line(t,i,e,s,n)}const o=t.model.validatePosition(s),r=n?t.coordinatesConverter.validateViewPosition(new Cs(n.lineNumber,n.column),o):t.coordinatesConverter.convertModelPositionToViewPosition(o);return Xx.fromViewState(i.viewState.move(e,r.lineNumber,r.column,0))}static simpleMove(t,i,e,s,n,o){switch(e){case 0:return o===4?this._moveHalfLineLeft(t,i,s):this._moveLeft(t,i,s,n);case 1:return o===4?this._moveHalfLineRight(t,i,s):this._moveRight(t,i,s,n);case 2:return o===2?this._moveUpByViewLines(t,i,s,n):this._moveUpByModelLines(t,i,s,n);case 3:return o===2?this._moveDownByViewLines(t,i,s,n):this._moveDownByModelLines(t,i,s,n);case 4:return o===2?i.map((i=>Xx.fromViewState(lC.moveToPrevBlankLine(t.cursorConfig,t,i.viewState,s)))):i.map((i=>Xx.fromModelState(lC.moveToPrevBlankLine(t.cursorConfig,t.model,i.modelState,s))));case 5:return o===2?i.map((i=>Xx.fromViewState(lC.moveToNextBlankLine(t.cursorConfig,t,i.viewState,s)))):i.map((i=>Xx.fromModelState(lC.moveToNextBlankLine(t.cursorConfig,t.model,i.modelState,s))));case 6:return this._moveToViewMinColumn(t,i,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(t,i,s);case 8:return this._moveToViewCenterColumn(t,i,s);case 9:return this._moveToViewMaxColumn(t,i,s);case 10:return this._moveToViewLastNonWhitespaceColumn(t,i,s);default:return null}}static viewportMove(t,i,e,s,n){const o=t.getCompletelyVisibleViewRange(),r=t.coordinatesConverter.convertViewRangeToModelRange(o);switch(e){case 11:{const e=this._firstLineNumberInRange(t.model,r,n),o=t.model.getLineFirstNonWhitespaceColumn(e);return[this._moveToModelPosition(t,i[0],s,e,o)]}case 13:{const e=this._lastLineNumberInRange(t.model,r,n),o=t.model.getLineFirstNonWhitespaceColumn(e);return[this._moveToModelPosition(t,i[0],s,e,o)]}case 12:{const e=Math.round((r.startLineNumber+r.endLineNumber)/2),n=t.model.getLineFirstNonWhitespaceColumn(e);return[this._moveToModelPosition(t,i[0],s,e,n)]}case 14:{const e=[];for(let n=0,r=i.length;n<r;n++){const r=i[n];e[n]=this.findPositionInViewportIfOutside(t,r,o,s)}return e}default:return null}}static findPositionInViewportIfOutside(t,i,e,s){const n=i.viewState.position.lineNumber;if(e.startLineNumber<=n&&n<=e.endLineNumber-1)return new Xx(i.modelState,i.viewState);{let o;o=n>e.endLineNumber-1?e.endLineNumber-1:n<e.startLineNumber?e.startLineNumber:n;const r=lC.vertical(t.cursorConfig,t,n,i.viewState.position.column,i.viewState.leftoverVisibleColumns,o,!1);return Xx.fromViewState(i.viewState.move(s,r.lineNumber,r.column,r.leftoverVisibleColumns))}}static _firstLineNumberInRange(t,i,e){let s=i.startLineNumber;return i.startColumn!==t.getLineMinColumn(s)&&s++,Math.min(i.endLineNumber,s+e-1)}static _lastLineNumberInRange(t,i,e){let s=i.startLineNumber;return i.startColumn!==t.getLineMinColumn(s)&&s++,Math.max(s,i.endLineNumber-e+1)}static _moveLeft(t,i,e,s){return i.map((i=>Xx.fromViewState(lC.moveLeft(t.cursorConfig,t,i.viewState,e,s))))}static _moveHalfLineLeft(t,i,e){const s=[];for(let n=0,o=i.length;n<o;n++){const o=i[n],r=o.viewState.position.lineNumber,h=Math.round(t.getLineLength(r)/2);s[n]=Xx.fromViewState(lC.moveLeft(t.cursorConfig,t,o.viewState,e,h))}return s}static _moveRight(t,i,e,s){return i.map((i=>Xx.fromViewState(lC.moveRight(t.cursorConfig,t,i.viewState,e,s))))}static _moveHalfLineRight(t,i,e){const s=[];for(let n=0,o=i.length;n<o;n++){const o=i[n],r=o.viewState.position.lineNumber,h=Math.round(t.getLineLength(r)/2);s[n]=Xx.fromViewState(lC.moveRight(t.cursorConfig,t,o.viewState,e,h))}return s}static _moveDownByViewLines(t,i,e,s){const n=[];for(let o=0,r=i.length;o<r;o++){const r=i[o];n[o]=Xx.fromViewState(lC.moveDown(t.cursorConfig,t,r.viewState,e,s))}return n}static _moveDownByModelLines(t,i,e,s){const n=[];for(let o=0,r=i.length;o<r;o++){const r=i[o];n[o]=Xx.fromModelState(lC.moveDown(t.cursorConfig,t.model,r.modelState,e,s))}return n}static _moveUpByViewLines(t,i,e,s){const n=[];for(let o=0,r=i.length;o<r;o++){const r=i[o];n[o]=Xx.fromViewState(lC.moveUp(t.cursorConfig,t,r.viewState,e,s))}return n}static _moveUpByModelLines(t,i,e,s){const n=[];for(let o=0,r=i.length;o<r;o++){const r=i[o];n[o]=Xx.fromModelState(lC.moveUp(t.cursorConfig,t.model,r.modelState,e,s))}return n}static _moveToViewPosition(t,i,e,s,n){return Xx.fromViewState(i.viewState.move(e,s,n,0))}static _moveToModelPosition(t,i,e,s,n){return Xx.fromModelState(i.modelState.move(e,s,n,0))}static _moveToViewMinColumn(t,i,e){const s=[];for(let n=0,o=i.length;n<o;n++){const o=i[n],r=o.viewState.position.lineNumber,h=t.getLineMinColumn(r);s[n]=this._moveToViewPosition(t,o,e,r,h)}return s}static _moveToViewFirstNonWhitespaceColumn(t,i,e){const s=[];for(let n=0,o=i.length;n<o;n++){const o=i[n],r=o.viewState.position.lineNumber,h=t.getLineFirstNonWhitespaceColumn(r);s[n]=this._moveToViewPosition(t,o,e,r,h)}return s}static _moveToViewCenterColumn(t,i,e){const s=[];for(let n=0,o=i.length;n<o;n++){const o=i[n],r=o.viewState.position.lineNumber,h=Math.round((t.getLineMaxColumn(r)+t.getLineMinColumn(r))/2);s[n]=this._moveToViewPosition(t,o,e,r,h)}return s}static _moveToViewMaxColumn(t,i,e){const s=[];for(let n=0,o=i.length;n<o;n++){const o=i[n],r=o.viewState.position.lineNumber,h=t.getLineMaxColumn(r);s[n]=this._moveToViewPosition(t,o,e,r,h)}return s}static _moveToViewLastNonWhitespaceColumn(t,i,e){const s=[];for(let n=0,o=i.length;n<o;n++){const o=i[n],r=o.viewState.position.lineNumber,h=t.getLineLastNonWhitespaceColumn(r);s[n]=this._moveToViewPosition(t,o,e,r,h)}return s}}var pC;function wC(t,i,e,s){const n=pf(i,e.startLineNumber,e.startColumn),o=s.getLanguageConfiguration(n.languageId);if(!o)return null;const r=n.getLineContent(),h=r.substr(0,e.startColumn-1-n.firstCharOffset);let c;e.isEmpty()?c=r.substr(e.startColumn-1-n.firstCharOffset):c=pf(i,e.endLineNumber,e.endColumn).getLineContent().substr(e.endColumn-1-n.firstCharOffset);let a="";if(e.startLineNumber>1&&n.firstCharOffset===0){const t=pf(i,e.startLineNumber-1);t.languageId===n.languageId&&(a=t.getLineContent())}const l=o.onEnter(t,a,h,c);if(!l)return null;const u=l.indentAction;let d=l.appendText;const f=l.removeText||0;d?u===Gu.Indent&&(d="\t"+d):d=u===Gu.Indent||u===Gu.IndentOutdent?"\t":"";let g=Af(i,e.startLineNumber,e.startColumn);return f&&(g=g.substring(0,g.length-f)),{indentAction:u,appendText:d,removeText:f,indentation:g}}(function(t){t.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory logical position value providing where to move the cursor.\n\t\t\t\t\t\t\`\`\`\n\t\t\t\t\t\t'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',\n\t\t\t\t\t\t'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'\n\t\t\t\t\t\t'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'\n\t\t\t\t\t\t'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'\n\t\t\t\t\t\t\`\`\`\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t\`\`\`\n\t\t\t\t\t\t'line', 'wrappedLine', 'character', 'halfLine'\n\t\t\t\t\t\t\`\`\`\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'select': If 'true' makes the selection. Default is 'false'.\n\t\t\t\t`,constraint:function(t){if(!Q(t))return!1;const i=t;return!!N(i.to)&&!(!P(i.select)&&!H(i.select))&&!(!P(i.by)&&!N(i.by))&&!(!P(i.value)&&!z(i.value))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},t.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},t.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},t.parse=function(i){if(!i.to)return null;let e;switch(i.to){case t.RawDirection.Left:e=0;break;case t.RawDirection.Right:e=1;break;case t.RawDirection.Up:e=2;break;case t.RawDirection.Down:e=3;break;case t.RawDirection.PrevBlankLine:e=4;break;case t.RawDirection.NextBlankLine:e=5;break;case t.RawDirection.WrappedLineStart:e=6;break;case t.RawDirection.WrappedLineFirstNonWhitespaceCharacter:e=7;break;case t.RawDirection.WrappedLineColumnCenter:e=8;break;case t.RawDirection.WrappedLineEnd:e=9;break;case t.RawDirection.WrappedLineLastNonWhitespaceCharacter:e=10;break;case t.RawDirection.ViewPortTop:e=11;break;case t.RawDirection.ViewPortBottom:e=13;break;case t.RawDirection.ViewPortCenter:e=12;break;case t.RawDirection.ViewPortIfOutside:e=14;break;default:return null}let s=0;switch(i.by){case t.RawUnit.Line:s=1;break;case t.RawUnit.WrappedLine:s=2;break;case t.RawUnit.Character:s=3;break;case t.RawUnit.HalfLine:s=4}return{direction:e,unit:s,select:!!i.select,value:i.value||1}}})(pC||(pC={}));var mC,vC=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},bC=function(t,i){return function(e,s){i(e,s,t)}};const yC=Object.create(null);function kC(t,i){if(i<=0)return"";yC[t]||(yC[t]=["",t]);const e=yC[t];for(let s=e.length;s<=i;s++)e[s]=e[s-1]+t;return e[i]}let xC=mC=class{static unshiftIndent(t,i,e,s,n){const o=Ey.visibleColumnFromColumn(t,i,e);if(n){const t=kC(" ",s);return kC(t,Ey.prevIndentTabStop(o,s)/s)}return kC("\t",Ey.prevRenderTabStop(o,e)/e)}static shiftIndent(t,i,e,s,n){const o=Ey.visibleColumnFromColumn(t,i,e);if(n){const t=kC(" ",s);return kC(t,Ey.nextIndentTabStop(o,s)/s)}return kC("\t",Ey.nextRenderTabStop(o,e)/e)}constructor(t,i,e){this._languageConfigurationService=e,this._opts=i,this._selection=t,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(t,i,e){this._useLastEditRangeForCursorEndPosition?t.addTrackedEditOperation(i,e):t.addEditOperation(i,e)}getEditOperations(t,i){const e=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&e!==s&&(s-=1);const{tabSize:n,indentSize:o,insertSpaces:r}=this._opts,h=e===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(t.getLineContent(e))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,a=0;for(let l=e;l<=s;l++,c=a){a=0;const s=t.getLineContent(l);let u,d=so(s);if((!this._opts.isUnshift||s.length!==0&&d!==0)&&(h||this._opts.isUnshift||s.length!==0)){if(d===-1&&(d=s.length),l>1&&Ey.visibleColumnFromColumn(s,d+1,n)%o!=0&&t.tokenization.isCheapToTokenize(l-1)){const i=wC(this._opts.autoIndent,t,new Es(l-1,t.getLineMaxColumn(l-1),l-1,t.getLineMaxColumn(l-1)),this._languageConfigurationService);if(i){if(a=c,i.appendText)for(let t=0,e=i.appendText.length;t<e&&a<o&&i.appendText.charCodeAt(t)===32;t++)a++;i.removeText&&(a=Math.max(0,a-i.removeText));for(let t=0;t<a&&d!==0&&s.charCodeAt(d-1)===32;t++)d--}}this._opts.isUnshift&&d===0||(u=this._opts.isUnshift?mC.unshiftIndent(s,d+1,n,o,r):mC.shiftIndent(s,d+1,n,o,r),this._addEditOperation(i,new Es(l,1,l,d+1),u),l!==e||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=d+1))}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&t.getLineLength(e)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const n=r?kC(" ",o):"\t";for(let r=e;r<=s;r++){const s=t.getLineContent(r);let c=so(s);if((!this._opts.isUnshift||s.length!==0&&c!==0)&&(h||this._opts.isUnshift||s.length!==0)&&(c===-1&&(c=s.length),!this._opts.isUnshift||c!==0))if(this._opts.isUnshift){c=Math.min(c,o);for(let t=0;t<c;t++)if(s.charCodeAt(t)===9){c=t+1;break}this._addEditOperation(i,new Es(r,1,r,c+1),"")}else this._addEditOperation(i,new Es(r,1,r,1),n),r!==e||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=i.trackSelection(this._selection)}computeCursorState(t,i){if(this._useLastEditRangeForCursorEndPosition){const t=i.getInverseEditOperations()[0];return new Bs(t.range.endLineNumber,t.range.endColumn,t.range.endLineNumber,t.range.endColumn)}const e=i.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const t=this._selection.startColumn;return e.startColumn<=t?e:e.getDirection()===0?new Bs(e.startLineNumber,t,e.endLineNumber,e.endColumn):new Bs(e.endLineNumber,e.endColumn,e.startLineNumber,t)}return e}};xC=mC=vC([bC(2,uf)],xC);class CC{constructor(t,i,e){this._range=t,this._charBeforeSelection=i,this._charAfterSelection=e}getEditOperations(t,i){i.addTrackedEditOperation(new Es(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),i.addTrackedEditOperation(new Es(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(t,i){const e=i.getInverseEditOperations(),s=e[0].range,n=e[1].range;return new Bs(s.endLineNumber,s.endColumn,n.endLineNumber,n.endColumn-this._charAfterSelection.length)}}class EC{constructor(t,i,e){this._position=t,this._text=i,this._charAfter=e}getEditOperations(t,i){i.addTrackedEditOperation(new Es(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(t,i){const e=i.getInverseEditOperations()[0].range;return new Bs(e.endLineNumber,e.startColumn,e.endLineNumber,e.endColumn-this._charAfter.length)}}function BC(t,i,e,s=!0,n){if(t<4)return null;const o=n.getLanguageConfiguration(i.tokenization.getLanguageId()).indentRulesSupport;if(!o)return null;if(e<=1)return{indentation:"",action:null};for(let t=e-1;t>0&&i.getLineContent(t)==="";t--)if(t===1)return{indentation:"",action:null};const r=function(t,i,e){const s=t.tokenization.getLanguageIdAtPosition(i,0);if(i>1){let n,o=-1;for(n=i-1;n>=1;n--){if(t.tokenization.getLanguageIdAtPosition(n,0)!==s)return o;const i=t.getLineContent(n);if(!e.shouldIgnore(i)&&!/^\s+$/.test(i)&&i!=="")return n;o=n}}return-1}(i,e,o);if(r<0)return null;if(r<1)return{indentation:"",action:null};const h=i.getLineContent(r);if(o.shouldIncrease(h)||o.shouldIndentNextLine(h))return{indentation:no(h),action:Gu.Indent,line:r};if(o.shouldDecrease(h))return{indentation:no(h),action:null,line:r};{if(r===1)return{indentation:no(i.getLineContent(r)),action:null,line:r};const t=r-1,e=o.getIndentMetadata(i.getLineContent(t));if(!(3&e)&&4&e){let e=0;for(let s=t-1;s>0;s--)if(!o.shouldIndentNextLine(i.getLineContent(s))){e=s;break}return{indentation:no(i.getLineContent(e+1)),action:null,line:e+1}}if(s)return{indentation:no(i.getLineContent(r)),action:null,line:r};for(let t=r;t>0;t--){const e=i.getLineContent(t);if(o.shouldIncrease(e))return{indentation:no(e),action:Gu.Indent,line:t};if(o.shouldIndentNextLine(e)){let e=0;for(let s=t-1;s>0;s--)if(!o.shouldIndentNextLine(i.getLineContent(t))){e=s;break}return{indentation:no(i.getLineContent(e+1)),action:null,line:e+1}}if(o.shouldDecrease(e))return{indentation:no(e),action:null,line:t}}return{indentation:no(i.getLineContent(1)),action:null,line:1}}}function DC(t,i,e,s,n,o){if(t<4)return null;const r=o.getLanguageConfiguration(e);if(!r)return null;const h=o.getLanguageConfiguration(e).indentRulesSupport;if(!h)return null;const c=BC(t,i,s,void 0,o),a=i.getLineContent(s);if(c){const e=c.line;if(e!==void 0){let o=!0;for(let t=e;t<s-1;t++)if(!/^\s*$/.test(i.getLineContent(t))){o=!1;break}if(o){const s=r.onEnter(t,"",i.getLineContent(e),"");if(s){let t=no(i.getLineContent(e));return s.removeText&&(t=t.substring(0,t.length-s.removeText)),s.indentAction===Gu.Indent||s.indentAction===Gu.IndentOutdent?t=n.shiftIndent(t):s.indentAction===Gu.Outdent&&(t=n.unshiftIndent(t)),h.shouldDecrease(a)&&(t=n.unshiftIndent(t)),s.appendText&&(t+=s.appendText),no(t)}}}return h.shouldDecrease(a)?c.action===Gu.Indent?c.indentation:n.unshiftIndent(c.indentation):c.action===Gu.Indent?n.shiftIndent(c.indentation):c.indentation}return null}function MC(t,i,e){const s=e.getLanguageConfiguration(t.getLanguageId()).indentRulesSupport;return s?i<1||i>t.getLineCount()?null:s.getIndentMetadata(t.getLineContent(i)):null}class SC{static indent(t,i,e){if(i===null||e===null)return[];const s=[];for(let i=0,n=e.length;i<n;i++)s[i]=new xC(e[i],{isUnshift:!1,tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,useTabStops:t.useTabStops,autoIndent:t.autoIndent},t.languageConfigurationService);return s}static outdent(t,i,e){const s=[];for(let i=0,n=e.length;i<n;i++)s[i]=new xC(e[i],{isUnshift:!0,tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,useTabStops:t.useTabStops,autoIndent:t.autoIndent},t.languageConfigurationService);return s}static shiftIndent(t,i,e){return e=e||1,xC.shiftIndent(i,i.length+e,t.tabSize,t.indentSize,t.insertSpaces)}static unshiftIndent(t,i,e){return e=e||1,xC.unshiftIndent(i,i.length+e,t.tabSize,t.indentSize,t.insertSpaces)}static _distributedPaste(t,i,e,s){const n=[];for(let t=0,i=e.length;t<i;t++)n[t]=new nC(e[t],s[t]);return new iC(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(t,i,e,s,n){const o=[];for(let t=0,i=e.length;t<i;t++){const i=e[t],r=i.getPosition();if(n&&!i.isEmpty()&&(n=!1),n&&s.indexOf(`\n`)!==s.length-1&&(n=!1),n){const e=new Es(r.lineNumber,1,r.lineNumber,1);o[t]=new cC(e,s,i,!0)}else o[t]=new nC(i,s)}return new iC(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(t,i,e,s,n){if(s||i.length===1)return null;if(n&&n.length===i.length)return n;if(t.multiCursorPaste==="spread"){e.charCodeAt(e.length-1)===10&&(e=e.substr(0,e.length-1)),e.charCodeAt(e.length-1)===13&&(e=e.substr(0,e.length-1));const t=eo(e);if(t.length===i.length)return t}return null}static paste(t,i,e,s,n,o){const r=this._distributePasteToCursors(t,e,s,n,o);return r?(e=e.sort(Es.compareRangesUsingStarts),this._distributedPaste(t,i,e,r)):this._simplePaste(t,i,e,s,n)}static _goodIndentForLine(t,i,e){let s=null,n="";const o=BC(t.autoIndent,i,e,!1,t.languageConfigurationService);if(o)s=o.action,n=o.indentation;else if(e>1){let s;for(s=e-1;s>=1&&!(oo(i.getLineContent(s))>=0);s--);if(s<1)return null;const o=i.getLineMaxColumn(s),r=wC(t.autoIndent,i,new Es(s,o,s,o),t.languageConfigurationService);r&&(n=r.indentation+r.appendText)}return s&&(s===Gu.Indent&&(n=SC.shiftIndent(t,n)),s===Gu.Outdent&&(n=SC.unshiftIndent(t,n)),n=t.normalizeIndentation(n)),n||null}static _replaceJumpToNextIndent(t,i,e,s){let n="";const o=e.getStartPosition();if(t.insertSpaces){const e=t.visibleColumnFromColumn(i,o),s=t.indentSize,r=s-e%s;for(let t=0;t<r;t++)n+=" "}else n="\t";return new nC(e,n,s)}static tab(t,i,e){const s=[];for(let n=0,o=e.length;n<o;n++){const o=e[n];if(o.isEmpty()){const e=i.getLineContent(o.startLineNumber);if(/^\s*$/.test(e)&&i.tokenization.isCheapToTokenize(o.startLineNumber)){let r=this._goodIndentForLine(t,i,o.startLineNumber);r=r||"\t";const h=t.normalizeIndentation(r);if(!e.startsWith(h)){s[n]=new nC(new Es(o.startLineNumber,1,o.startLineNumber,e.length+1),h,!0);continue}}s[n]=this._replaceJumpToNextIndent(t,i,o,!0)}else{if(o.startLineNumber===o.endLineNumber){const e=i.getLineMaxColumn(o.startLineNumber);if(o.startColumn!==1||o.endColumn!==e){s[n]=this._replaceJumpToNextIndent(t,i,o,!1);continue}}s[n]=new xC(o,{isUnshift:!1,tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,useTabStops:t.useTabStops,autoIndent:t.autoIndent},t.languageConfigurationService)}}return s}static compositionType(t,i,e,s,n,o,r,h){const c=s.map((t=>this._compositionType(e,t,n,o,r,h)));return new iC(4,c,{shouldPushStackElementBefore:RC(t,4),shouldPushStackElementAfter:!1})}static _compositionType(t,i,e,s,n,o){if(!i.isEmpty())return null;const r=i.getPosition(),h=Math.max(1,r.column-s),c=Math.min(t.getLineMaxColumn(r.lineNumber),r.column+n),a=new Es(r.lineNumber,h,r.lineNumber,c);return t.getValueInRange(a)===e&&o===0?null:new hC(a,e,0,o)}static _typeCommand(t,i,e){return e?new rC(t,i,!0):new nC(t,i,!0)}static _enter(t,i,e,s){if(t.autoIndent===0)return SC._typeCommand(s,`\n`,e);if(!i.tokenization.isCheapToTokenize(s.getStartPosition().lineNumber)||t.autoIndent===1){const n=no(i.getLineContent(s.startLineNumber)).substring(0,s.startColumn-1);return SC._typeCommand(s,`\n`+t.normalizeIndentation(n),e)}const n=wC(t.autoIndent,i,s,t.languageConfigurationService);if(n){if(n.indentAction===Gu.None||n.indentAction===Gu.Indent)return SC._typeCommand(s,`\n`+t.normalizeIndentation(n.indentation+n.appendText),e);if(n.indentAction===Gu.IndentOutdent){const i=t.normalizeIndentation(n.indentation),o=t.normalizeIndentation(n.indentation+n.appendText),r=`\n`+o+`\n`+i;return e?new rC(s,r,!0):new hC(s,r,-1,o.length-i.length,!0)}if(n.indentAction===Gu.Outdent){const i=SC.unshiftIndent(t,n.indentation);return SC._typeCommand(s,`\n`+t.normalizeIndentation(i+n.appendText),e)}}const o=no(i.getLineContent(s.startLineNumber)).substring(0,s.startColumn-1);if(t.autoIndent>=4){const n=function(t,i,e,s,n){if(t<4)return null;i.tokenization.forceTokenization(e.startLineNumber);const o=i.tokenization.getLineTokens(e.startLineNumber),r=qu(o,e.startColumn-1),h=r.getLineContent();let c,a,l=!1;r.firstCharOffset>0&&o.getLanguageId(0)!==r.languageId?(l=!0,c=h.substr(0,e.startColumn-1-r.firstCharOffset)):c=o.getLineContent().substring(0,e.startColumn-1),a=e.isEmpty()?h.substr(e.startColumn-1-r.firstCharOffset):pf(i,e.endLineNumber,e.endColumn).getLineContent().substr(e.endColumn-1-r.firstCharOffset);const u=n.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!u)return null;const d=c,f=no(c),g={tokenization:{getLineTokens:t=>i.tokenization.getLineTokens(t),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(t,e)=>i.getLanguageIdAtPosition(t,e)},getLineContent:t=>t===e.startLineNumber?d:i.getLineContent(t)},A=no(o.getLineContent()),p=BC(t,g,e.startLineNumber+1,void 0,n);if(!p){const t=l?A:f;return{beforeEnter:t,afterEnter:t}}let w=l?A:p.indentation;return p.action===Gu.Indent&&(w=s.shiftIndent(w)),u.shouldDecrease(a)&&(w=s.unshiftIndent(w)),{beforeEnter:l?A:f,afterEnter:w}}(t.autoIndent,i,s,{unshiftIndent:i=>SC.unshiftIndent(t,i),shiftIndent:i=>SC.shiftIndent(t,i),normalizeIndentation:i=>t.normalizeIndentation(i)},t.languageConfigurationService);if(n){let o=t.visibleColumnFromColumn(i,s.getEndPosition());const r=s.endColumn,h=so(i.getLineContent(s.endLineNumber));if(s=h>=0?s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,h+1)):s.setEndPosition(s.endLineNumber,i.getLineMaxColumn(s.endLineNumber)),e)return new rC(s,`\n`+t.normalizeIndentation(n.afterEnter),!0);{let i=0;return r<=h+1&&(t.insertSpaces||(o=Math.ceil(o/t.indentSize)),i=Math.min(o+1-t.normalizeIndentation(n.afterEnter).length-1,0)),new hC(s,`\n`+t.normalizeIndentation(n.afterEnter),0,i,!0)}}}return SC._typeCommand(s,`\n`+t.normalizeIndentation(o),e)}static _isAutoIndentType(t,i,e){if(t.autoIndent<4)return!1;for(let t=0,s=e.length;t<s;t++)if(!i.tokenization.isCheapToTokenize(e[t].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(t,i,e,s){const n=Af(i,e.startLineNumber,e.startColumn),o=function(t,i,e,s,n,o){if(t<4)return null;const r=pf(i,e.startLineNumber,e.startColumn);if(r.firstCharOffset)return null;const h=o.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!h)return null;const c=r.getLineContent(),a=c.substr(0,e.startColumn-1-r.firstCharOffset);let l;if(l=e.isEmpty()?c.substr(e.startColumn-1-r.firstCharOffset):pf(i,e.endLineNumber,e.endColumn).getLineContent().substr(e.endColumn-1-r.firstCharOffset),!h.shouldDecrease(a+l)&&h.shouldDecrease(a+s+l)){const s=BC(t,i,e.startLineNumber,!1,o);if(!s)return null;let r=s.indentation;return s.action!==Gu.Indent&&(r=n.unshiftIndent(r)),r}return null}(t.autoIndent,i,e,s,{shiftIndent:i=>SC.shiftIndent(t,i),unshiftIndent:i=>SC.unshiftIndent(t,i)},t.languageConfigurationService);if(o===null)return null;if(o!==t.normalizeIndentation(n)){const n=i.getLineFirstNonWhitespaceColumn(e.startLineNumber);return n===0?SC._typeCommand(new Es(e.startLineNumber,1,e.endLineNumber,e.endColumn),t.normalizeIndentation(o)+s,!1):SC._typeCommand(new Es(e.startLineNumber,1,e.endLineNumber,e.endColumn),t.normalizeIndentation(o)+i.getLineContent(e.startLineNumber).substring(n-1,e.startColumn-1)+s,!1)}return null}static _isAutoClosingOvertype(t,i,e,s,n){if(t.autoClosingOvertype==="never"||!t.autoClosingPairs.autoClosingPairsCloseSingleChar.has(n))return!1;for(let o=0,r=e.length;o<r;o++){const r=e[o];if(!r.isEmpty())return!1;const h=r.getPosition(),c=i.getLineContent(h.lineNumber);if(c.charAt(h.column-1)!==n)return!1;const a=eC(n);if((h.column>2?c.charCodeAt(h.column-2):0)===92&&a)return!1;if(t.autoClosingOvertype==="auto"){let t=!1;for(let i=0,e=s.length;i<e;i++){const e=s[i];if(h.lineNumber===e.startLineNumber&&h.column===e.startColumn){t=!0;break}}if(!t)return!1}}return!0}static _runAutoClosingOvertype(t,i,e,s,n){const o=[];for(let t=0,i=s.length;t<i;t++){const i=s[t].getPosition(),e=new Es(i.lineNumber,i.column,i.lineNumber,i.column+1);o[t]=new nC(e,n)}return new iC(4,o,{shouldPushStackElementBefore:RC(t,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(t,i){const e=i.charAt(0),s=t.autoClosingPairs.autoClosingPairsOpenByStart.get(e)||[],n=t.autoClosingPairs.autoClosingPairsCloseByStart.get(e)||[],o=s.some((t=>i.startsWith(t.open))),r=n.some((t=>i.startsWith(t.close)));return!o&&r}static _findAutoClosingPairOpen(t,i,e,s){const n=t.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!n)return null;let o=null;for(const t of n)if(o===null||t.open.length>o.open.length){let n=!0;for(const o of e)if(i.getValueInRange(new Es(o.lineNumber,o.column-t.open.length+1,o.lineNumber,o.column))+s!==t.open){n=!1;break}n&&(o=t)}return o}static _findContainedAutoClosingPair(t,i){if(i.open.length<=1)return null;const e=i.close.charAt(i.close.length-1),s=t.autoClosingPairs.autoClosingPairsCloseByEnd.get(e)||[];let n=null;for(const t of s)t.open!==i.open&&i.open.includes(t.open)&&i.close.endsWith(t.close)&&(!n||t.open.length>n.open.length)&&(n=t);return n}static _getAutoClosingPairClose(t,i,e,s,n){for(const t of e)if(!t.isEmpty())return null;const o=e.map((t=>{const i=t.getPosition();return n?{lineNumber:i.lineNumber,beforeColumn:i.column-s.length,afterColumn:i.column}:{lineNumber:i.lineNumber,beforeColumn:i.column,afterColumn:i.column}})),r=this._findAutoClosingPairOpen(t,i,o.map((t=>new Cs(t.lineNumber,t.beforeColumn))),s);if(!r)return null;let h,c;if(eC(s)?(h=t.autoClosingQuotes,c=t.shouldAutoCloseBefore.quote):t.blockCommentStartToken&&r.open.includes(t.blockCommentStartToken)?(h=t.autoClosingComments,c=t.shouldAutoCloseBefore.comment):(h=t.autoClosingBrackets,c=t.shouldAutoCloseBefore.bracket),h==="never")return null;const a=this._findContainedAutoClosingPair(t,r),l=a?a.close:"";let u=!0;for(const e of o){const{lineNumber:n,beforeColumn:o,afterColumn:a}=e,d=i.getLineContent(n),f=d.substring(0,o-1),g=d.substring(a-1);if(g.startsWith(l)||(u=!1),g.length>0){const i=g.charAt(0);if(!SC._isBeforeClosingBrace(t,g)&&!c(i))return null}if(r.open.length===1&&(s==="'"||s==='"')&&h!=="always"){const i=tg(t.wordSeparators,[]);if(f.length>0){const t=f.charCodeAt(f.length-1);if(i.get(t)===0)return null}}if(!i.tokenization.isCheapToTokenize(n))return null;i.tokenization.forceTokenization(n);const A=qu(i.tokenization.getLineTokens(n),o-1);if(!r.shouldAutoClose(A,o-A.firstCharOffset))return null;const p=r.findNeutralCharacter();if(p){const t=i.tokenization.getTokenTypeIfInsertingCharacter(n,o,p);if(!r.isOK(t))return null}}return u?r.close.substring(0,r.close.length-l.length):r.close}static _runAutoClosingOpenCharType(t,i,e,s,n,o,r){const h=[];for(let t=0,i=s.length;t<i;t++){const i=s[t];h[t]=new FC(i,n,!o,r)}return new iC(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(t,i){return eC(i)?t.autoSurround==="quotes"||t.autoSurround==="languageDefined":t.autoSurround==="brackets"||t.autoSurround==="languageDefined"}static _isSurroundSelectionType(t,i,e,s){if(!SC._shouldSurroundChar(t,s)||!t.surroundingPairs.hasOwnProperty(s))return!1;const n=eC(s);for(const t of e){if(t.isEmpty())return!1;let e=!0;for(let s=t.startLineNumber;s<=t.endLineNumber;s++){const n=i.getLineContent(s),o=s===t.startLineNumber?t.startColumn-1:0,r=s===t.endLineNumber?t.endColumn-1:n.length,h=n.substring(o,r);if(/[^ \t]/.test(h)){e=!1;break}}if(e||n&&t.startLineNumber===t.endLineNumber&&t.startColumn+1===t.endColumn&&eC(i.getValueInRange(t)))return!1}return!0}static _runSurroundSelectionType(t,i,e,s,n){const o=[];for(let t=0,e=s.length;t<e;t++){const e=s[t],r=i.surroundingPairs[n];o[t]=new CC(e,n,r)}return new iC(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(t,i,e){return!(e.length!==1||!i.tokenization.isCheapToTokenize(e[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(t,i,e,s,n){if(!i.electricChars.hasOwnProperty(n)||!s.isEmpty())return null;const o=s.getPosition();e.tokenization.forceTokenization(o.lineNumber);const r=e.tokenization.getLineTokens(o.lineNumber);let h;try{h=i.onElectricCharacter(n,r,o.column)}catch(t){return Oi(t),null}if(!h)return null;if(h.matchOpenBracket){const s=(r.getLineContent()+n).lastIndexOf(h.matchOpenBracket)+1,c=e.bracketPairs.findMatchingBracketUp(h.matchOpenBracket,{lineNumber:o.lineNumber,column:s},500);if(c){if(c.startLineNumber===o.lineNumber)return null;const s=no(e.getLineContent(c.startLineNumber)),r=i.normalizeIndentation(s),h=e.getLineContent(o.lineNumber),a=e.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,l=r+h.substring(a-1,o.column-1)+n,u=new Es(o.lineNumber,1,o.lineNumber,o.column),d=new nC(u,l);return new iC(LC(l,t),[d],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(t,i,e,s,n,o){if(!s)return null;let r=null;for(const t of s)if(r===null)r=t.insertedText;else if(r!==t.insertedText)return null;if(!r||r.length!==1)return null;const h=r;let c=!1;for(const t of s)if(t.deletedText.length!==0){c=!0;break}if(c){if(!SC._shouldSurroundChar(i,h)||!i.surroundingPairs.hasOwnProperty(h))return null;const t=eC(h);for(const i of s)if(i.deletedSelectionStart!==0||i.deletedSelectionEnd!==i.deletedText.length||/^[ \t]+$/.test(i.deletedText)||t&&eC(i.deletedText))return null;const e=[];for(const t of n){if(!t.isEmpty())return null;e.push(t.getPosition())}if(e.length!==s.length)return null;const o=[];for(let t=0,n=e.length;t<n;t++)o.push(new EC(e[t],s[t].deletedText,i.surroundingPairs[h]));return new iC(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(i,e,n,o,h)){const t=n.map((t=>new nC(new Es(t.positionLineNumber,t.positionColumn,t.positionLineNumber,t.positionColumn+1),"",!1)));return new iC(4,t,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const a=this._getAutoClosingPairClose(i,e,n,h,!0);return a!==null?this._runAutoClosingOpenCharType(t,i,e,n,h,!0,a):null}static typeWithInterceptors(t,i,e,s,n,o,r){if(!t&&r===`\n`){const t=[];for(let i=0,o=n.length;i<o;i++)t[i]=SC._enter(e,s,!1,n[i]);return new iC(4,t,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!t&&this._isAutoIndentType(e,s,n)){const t=[];let i=!1;for(let o=0,h=n.length;o<h;o++)if(t[o]=this._runAutoIndentType(e,s,n[o],r),!t[o]){i=!0;break}if(!i)return new iC(4,t,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(e,s,n,o,r))return this._runAutoClosingOvertype(i,e,s,n,r);if(!t){const t=this._getAutoClosingPairClose(e,s,n,r,!1);if(t)return this._runAutoClosingOpenCharType(i,e,s,n,r,!1,t)}if(!t&&this._isSurroundSelectionType(e,s,n,r))return this._runSurroundSelectionType(i,e,s,n,r);if(!t&&this._isTypeInterceptorElectricChar(e,s,n)){const t=this._typeInterceptorElectricChar(i,e,s,n[0],r);if(t)return t}const h=[];for(let t=0,i=n.length;t<i;t++)h[t]=new nC(n[t],r);const c=LC(r,i);return new iC(c,h,{shouldPushStackElementBefore:RC(i,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(t,i,e,s,n){const o=[];for(let t=0,i=s.length;t<i;t++)o[t]=new nC(s[t],n);const r=LC(n,t);return new iC(r,o,{shouldPushStackElementBefore:RC(t,r),shouldPushStackElementAfter:!1})}static lineInsertBefore(t,i,e){if(i===null||e===null)return[];const s=[];for(let n=0,o=e.length;n<o;n++){let o=e[n].positionLineNumber;if(o===1)s[n]=new rC(new Es(1,1,1,1),`\n`);else{o--;const e=i.getLineMaxColumn(o);s[n]=this._enter(t,i,!1,new Es(o,e,o,e))}}return s}static lineInsertAfter(t,i,e){if(i===null||e===null)return[];const s=[];for(let n=0,o=e.length;n<o;n++){const o=e[n].positionLineNumber,r=i.getLineMaxColumn(o);s[n]=this._enter(t,i,!1,new Es(o,r,o,r))}return s}static lineBreakInsert(t,i,e){const s=[];for(let n=0,o=e.length;n<o;n++)s[n]=this._enter(t,i,!0,e[n]);return s}}class FC extends hC{constructor(t,i,e,s){super(t,(e?i:"")+s,0,-s.length),this._openCharacter=i,this._closeCharacter=s,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(t,i){const e=i.getInverseEditOperations()[0].range;return this.closeCharacterRange=new Es(e.startLineNumber,e.endColumn-this._closeCharacter.length,e.endLineNumber,e.endColumn),this.enclosingRange=new Es(e.startLineNumber,e.endColumn-this._openCharacter.length-this._closeCharacter.length,e.endLineNumber,e.endColumn),super.computeCursorState(t,i)}}class IC{constructor(t,i,e,s,n,o){this.deletedText=t,this.deletedSelectionStart=i,this.deletedSelectionEnd=e,this.insertedText=s,this.insertedSelectionStart=n,this.insertedSelectionEnd=o}}function LC(t,i){return t===" "?i===5||i===6?6:5:4}function RC(t,i){return!(!NC(t)||NC(i))||t!==5&&TC(t)!==TC(i)}function TC(t){return t===6||t===5?"space":t}function NC(t){return t===4||t===5||t===6}var QC;(function(t){t.editorSimpleInput=new Tl("editorSimpleInput",!1,!0),t.editorTextFocus=new Tl("editorTextFocus",!1,st(0,"Whether the editor text has focus (cursor is blinking)")),t.focus=new Tl("editorFocus",!1,st(0,"Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),t.textInputFocus=new Tl("textInputFocus",!1,st(0,"Whether an editor or a rich text input has focus (cursor is blinking)")),t.readOnly=new Tl("editorReadonly",!1,st(0,"Whether the editor is read-only")),t.inDiffEditor=new Tl("inDiffEditor",!1,st(0,"Whether the context is a diff editor")),t.isEmbeddedDiffEditor=new Tl("isEmbeddedDiffEditor",!1,st(0,"Whether the context is an embedded diff editor")),t.inMultiDiffEditor=new Tl("inMultiDiffEditor",!1,st(0,"Whether the context is a multi diff editor")),t.multiDiffEditorAllCollapsed=new Tl("multiDiffEditorAllCollapsed",void 0,st(0,"Whether all files in multi diff editor are collapsed")),t.hasChanges=new Tl("diffEditorHasChanges",!1,st(0,"Whether the diff editor has changes")),t.comparingMovedCode=new Tl("comparingMovedCode",!1,st(0,"Whether a moved code block is selected for comparison")),t.accessibleDiffViewerVisible=new Tl("accessibleDiffViewerVisible",!1,st(0,"Whether the accessible diff viewer is visible")),t.diffEditorRenderSideBySideInlineBreakpointReached=new Tl("diffEditorRenderSideBySideInlineBreakpointReached",!1,st(0,"Whether the diff editor render side by side inline breakpoint is reached")),t.diffEditorInlineMode=new Tl("diffEditorInlineMode",!1,st(0,"Whether inline mode is active")),t.diffEditorOriginalWritable=new Tl("diffEditorOriginalWritable",!1,st(0,"Whether modified is writable in the diff editor")),t.diffEditorModifiedWritable=new Tl("diffEditorModifiedWritable",!1,st(0,"Whether modified is writable in the diff editor")),t.diffEditorOriginalUri=new Tl("diffEditorOriginalUri","",st(0,"The uri of the original document")),t.diffEditorModifiedUri=new Tl("diffEditorModifiedUri","",st(0,"The uri of the modified document")),t.columnSelection=new Tl("editorColumnSelection",!1,st(0,"Whether `editor.columnSelection` is enabled")),t.writable=t.readOnly.toNegated(),t.hasNonEmptySelection=new Tl("editorHasSelection",!1,st(0,"Whether the editor has text selected")),t.hasOnlyEmptySelection=t.hasNonEmptySelection.toNegated(),t.hasMultipleSelections=new Tl("editorHasMultipleSelections",!1,st(0,"Whether the editor has multiple selections")),t.hasSingleSelection=t.hasMultipleSelections.toNegated(),t.tabMovesFocus=new Tl("editorTabMovesFocus",!1,st(0,"Whether `Tab` will move focus out of the editor")),t.tabDoesNotMoveFocus=t.tabMovesFocus.toNegated(),t.isInEmbeddedEditor=new Tl("isInEmbeddedEditor",!1,!0),t.canUndo=new Tl("canUndo",!1,!0),t.canRedo=new Tl("canRedo",!1,!0),t.hoverVisible=new Tl("editorHoverVisible",!1,st(0,"Whether the editor hover is visible")),t.hoverFocused=new Tl("editorHoverFocused",!1,st(0,"Whether the editor hover is focused")),t.stickyScrollFocused=new Tl("stickyScrollFocused",!1,st(0,"Whether the sticky scroll is focused")),t.stickyScrollVisible=new Tl("stickyScrollVisible",!1,st(0,"Whether the sticky scroll is visible")),t.standaloneColorPickerVisible=new Tl("standaloneColorPickerVisible",!1,st(0,"Whether the standalone color picker is visible")),t.standaloneColorPickerFocused=new Tl("standaloneColorPickerFocused",!1,st(0,"Whether the standalone color picker is focused")),t.inCompositeEditor=new Tl("inCompositeEditor",void 0,st(0,"Whether the editor is part of a larger editor (e.g. notebooks)")),t.notInCompositeEditor=t.inCompositeEditor.toNegated(),t.languageId=new Tl("editorLangId","",st(0,"The language identifier of the editor")),t.hasCompletionItemProvider=new Tl("editorHasCompletionItemProvider",!1,st(0,"Whether the editor has a completion item provider")),t.hasCodeActionsProvider=new Tl("editorHasCodeActionsProvider",!1,st(0,"Whether the editor has a code actions provider")),t.hasCodeLensProvider=new Tl("editorHasCodeLensProvider",!1,st(0,"Whether the editor has a code lens provider")),t.hasDefinitionProvider=new Tl("editorHasDefinitionProvider",!1,st(0,"Whether the editor has a definition provider")),t.hasDeclarationProvider=new Tl("editorHasDeclarationProvider",!1,st(0,"Whether the editor has a declaration provider")),t.hasImplementationProvider=new Tl("editorHasImplementationProvider",!1,st(0,"Whether the editor has an implementation provider")),t.hasTypeDefinitionProvider=new Tl("editorHasTypeDefinitionProvider",!1,st(0,"Whether the editor has a type definition provider")),t.hasHoverProvider=new Tl("editorHasHoverProvider",!1,st(0,"Whether the editor has a hover provider")),t.hasDocumentHighlightProvider=new Tl("editorHasDocumentHighlightProvider",!1,st(0,"Whether the editor has a document highlight provider")),t.hasDocumentSymbolProvider=new Tl("editorHasDocumentSymbolProvider",!1,st(0,"Whether the editor has a document symbol provider")),t.hasReferenceProvider=new Tl("editorHasReferenceProvider",!1,st(0,"Whether the editor has a reference provider")),t.hasRenameProvider=new Tl("editorHasRenameProvider",!1,st(0,"Whether the editor has a rename provider")),t.hasSignatureHelpProvider=new Tl("editorHasSignatureHelpProvider",!1,st(0,"Whether the editor has a signature help provider")),t.hasInlayHintsProvider=new Tl("editorHasInlayHintsProvider",!1,st(0,"Whether the editor has an inline hints provider")),t.hasDocumentFormattingProvider=new Tl("editorHasDocumentFormattingProvider",!1,st(0,"Whether the editor has a document formatting provider")),t.hasDocumentSelectionFormattingProvider=new Tl("editorHasDocumentSelectionFormattingProvider",!1,st(0,"Whether the editor has a document selection formatting provider")),t.hasMultipleDocumentFormattingProvider=new Tl("editorHasMultipleDocumentFormattingProvider",!1,st(0,"Whether the editor has multiple document formatting providers")),t.hasMultipleDocumentSelectionFormattingProvider=new Tl("editorHasMultipleDocumentSelectionFormattingProvider",!1,st(0,"Whether the editor has multiple document selection formatting providers"))})(QC||(QC={}));class OC extends mu{runEditorCommand(t,i,e){const s=i._getViewModel();s&&this.runCoreEditorCommand(s,e||{})}}var zC,UC,HC;(function(t){t.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:function(t){if(!Q(t))return!1;const i=t;return!!N(i.to)&&!(!P(i.by)&&!N(i.by))&&!(!P(i.value)&&!z(i.value))&&!(!P(i.revealCursor)&&!H(i.revealCursor))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},t.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},t.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"},t.parse=function(i){let e,s;switch(i.to){case t.RawDirection.Up:e=1;break;case t.RawDirection.Right:e=2;break;case t.RawDirection.Down:e=3;break;case t.RawDirection.Left:e=4;break;default:return null}switch(i.by){case t.RawUnit.Line:s=1;break;case t.RawUnit.WrappedLine:s=2;break;case t.RawUnit.Page:s=3;break;case t.RawUnit.HalfPage:s=4;break;case t.RawUnit.Editor:s=5;break;case t.RawUnit.Column:s=6;break;default:s=2}return{direction:e,unit:s,value:Math.floor(i.value||1),revealCursor:!!i.revealCursor,select:!!i.select}}})(zC||(zC={})),function(t){t.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:function(t){if(!Q(t))return!1;const i=t;return!(!z(i.lineNumber)&&!N(i.lineNumber))&&!(!P(i.at)&&!N(i.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},t.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(UC||(UC={}));class PC{constructor(t){t.addImplementation(1e4,"code-editor",((t,i)=>{const e=t.get(Ua).getFocusedCodeEditor();return!(!e||!e.hasTextFocus())&&this._runEditorCommand(t,e,i)})),t.addImplementation(1e3,"generic-dom-input-textarea",((t,i)=>{const e=Lc();return!!(e&&["input","textarea"].indexOf(e.tagName.toLowerCase())>=0)&&(this.runDOMCommand(e),!0)})),t.addImplementation(0,"generic-dom",((t,i)=>{const e=t.get(Ua).getActiveCodeEditor();return!!e&&(e.focus(),this._runEditorCommand(t,e,i))}))}_runEditorCommand(t,i,e){return this.runEditorCommand(t,i,e)||!0}}(function(t){class i extends OC{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,i){i.position&&(t.model.pushStackElement(),t.setCursorStates(i.source,3,[AC.moveTo(t,t.getPrimaryCursorState(),this._inSelectionMode,i.position,i.viewPosition)])&&i.revealType!==2&&t.revealAllCursors(i.source,!0,!0))}}t.MoveTo=xu(new i({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),t.MoveToSelect=xu(new i({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class e extends OC{runCoreEditorCommand(t,i){t.model.pushStackElement();const e=this._getColumnSelectResult(t,t.getPrimaryCursorState(),t.getCursorColumnSelectData(),i);e!==null&&(t.setCursorStates(i.source,3,e.viewStates.map((t=>Xx.fromViewState(t)))),t.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:e.fromLineNumber,fromViewVisualColumn:e.fromVisualColumn,toViewLineNumber:e.toLineNumber,toViewVisualColumn:e.toVisualColumn}),e.reversed?t.revealTopMostCursor(i.source):t.revealBottomMostCursor(i.source))}}t.ColumnSelect=xu(new class extends e{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(t,i,e,s){if(s.position===void 0||s.viewPosition===void 0||s.mouseColumn===void 0)return null;const n=t.model.validatePosition(s.position),o=t.coordinatesConverter.validateViewPosition(new Cs(s.viewPosition.lineNumber,s.viewPosition.column),n),r=s.doColumnSelect?e.fromViewLineNumber:o.lineNumber,h=s.doColumnSelect?e.fromViewVisualColumn:s.mouseColumn-1;return sC.columnSelect(t.cursorConfig,t,r,h,o.lineNumber,s.mouseColumn-1)}}),t.CursorColumnSelectLeft=xu(new class extends e{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(t,i,e,s){return sC.columnSelectLeft(t.cursorConfig,t,e)}}),t.CursorColumnSelectRight=xu(new class extends e{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(t,i,e,s){return sC.columnSelectRight(t.cursorConfig,t,e)}});class s extends e{constructor(t){super(t),this._isPaged=t.isPaged}_getColumnSelectResult(t,i,e,s){return sC.columnSelectUp(t.cursorConfig,t,e,this._isPaged)}}t.CursorColumnSelectUp=xu(new s({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:3600,linux:{primary:0}}})),t.CursorColumnSelectPageUp=xu(new s({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:3595,linux:{primary:0}}}));class n extends e{constructor(t){super(t),this._isPaged=t.isPaged}_getColumnSelectResult(t,i,e,s){return sC.columnSelectDown(t.cursorConfig,t,e,this._isPaged)}}t.CursorColumnSelectDown=xu(new n({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:3602,linux:{primary:0}}})),t.CursorColumnSelectPageDown=xu(new n({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:3596,linux:{primary:0}}}));class o extends OC{constructor(){super({id:"cursorMove",precondition:void 0,metadata:pC.metadata})}runCoreEditorCommand(t,i){const e=pC.parse(i);e&&this._runCursorMove(t,i.source,e)}_runCursorMove(t,i,e){t.model.pushStackElement(),t.setCursorStates(i,3,o._move(t,t.getCursorStates(),e)),t.revealAllCursors(i,!0)}static _move(t,i,e){const s=e.select,n=e.value;switch(e.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return AC.simpleMove(t,i,e.direction,s,n,e.unit);case 11:case 13:case 12:case 14:return AC.viewportMove(t,i,e.direction,s,n);default:return null}}}t.CursorMoveImpl=o,t.CursorMove=xu(new o);class r extends OC{constructor(t){super(t),this._staticArgs=t.args}runCoreEditorCommand(t,i){let e=this._staticArgs;this._staticArgs.value===-1&&(e={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:i.pageSize||t.cursorConfig.pageSize}),t.model.pushStackElement(),t.setCursorStates(i.source,3,AC.simpleMove(t,t.getCursorStates(),e.direction,e.select,e.value,e.unit)),t.revealAllCursors(i.source,!0)}}t.CursorLeft=xu(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),t.CursorLeftSelect=xu(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:1039}})),t.CursorRight=xu(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),t.CursorRightSelect=xu(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:1041}})),t.CursorUp=xu(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),t.CursorUpSelect=xu(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),t.CursorPageUp=xu(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:11}})),t.CursorPageUpSelect=xu(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:1035}})),t.CursorDown=xu(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),t.CursorDownSelect=xu(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),t.CursorPageDown=xu(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:12}})),t.CursorPageDownSelect=xu(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:1036}})),t.CreateCursor=xu(new class extends OC{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(t,i){if(!i.position)return;let e;e=i.wholeLine?AC.line(t,t.getPrimaryCursorState(),!1,i.position,i.viewPosition):AC.moveTo(t,t.getPrimaryCursorState(),!1,i.position,i.viewPosition);const s=t.getCursorStates();if(s.length>1){const n=e.modelState?e.modelState.position:null,o=e.viewState?e.viewState.position:null;for(let e=0,r=s.length;e<r;e++){const r=s[e];if((!n||r.modelState.selection.containsPosition(n))&&(!o||r.viewState.selection.containsPosition(o)))return s.splice(e,1),t.model.pushStackElement(),void t.setCursorStates(i.source,3,s)}}s.push(e),t.model.pushStackElement(),t.setCursorStates(i.source,3,s)}}),t.LastCursorMoveToSelect=xu(new class extends OC{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(t,i){if(!i.position)return;const e=t.getLastAddedCursorIndex(),s=t.getCursorStates(),n=s.slice(0);n[e]=AC.moveTo(t,s[e],!0,i.position,i.viewPosition),t.model.pushStackElement(),t.setCursorStates(i.source,3,n)}});class h extends OC{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,i){t.model.pushStackElement(),t.setCursorStates(i.source,3,AC.moveToBeginningOfLine(t,t.getCursorStates(),this._inSelectionMode)),t.revealAllCursors(i.source,!0)}}t.CursorHome=xu(new h({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),t.CursorHomeSelect=xu(new h({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class c extends OC{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,i){t.model.pushStackElement(),t.setCursorStates(i.source,3,this._exec(t.getCursorStates())),t.revealAllCursors(i.source,!0)}_exec(t){const i=[];for(let e=0,s=t.length;e<s;e++){const s=t[e],n=s.modelState.position.lineNumber;i[e]=Xx.fromModelState(s.modelState.move(this._inSelectionMode,n,1,0))}return i}}t.CursorLineStart=xu(new c({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:0,mac:{primary:287}}})),t.CursorLineStartSelect=xu(new c({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:0,mac:{primary:1311}}}));class a extends OC{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,i){t.model.pushStackElement(),t.setCursorStates(i.source,3,AC.moveToEndOfLine(t,t.getCursorStates(),this._inSelectionMode,i.sticky||!1)),t.revealAllCursors(i.source,!0)}}t.CursorEnd=xu(new a({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:QC.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:st(0,"Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),t.CursorEndSelect=xu(new a({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:QC.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:st(0,"Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class l extends OC{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,i){t.model.pushStackElement(),t.setCursorStates(i.source,3,this._exec(t,t.getCursorStates())),t.revealAllCursors(i.source,!0)}_exec(t,i){const e=[];for(let s=0,n=i.length;s<n;s++){const n=i[s],o=n.modelState.position.lineNumber,r=t.model.getLineMaxColumn(o);e[s]=Xx.fromModelState(n.modelState.move(this._inSelectionMode,o,r,0))}return e}}t.CursorLineEnd=xu(new l({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:0,mac:{primary:291}}})),t.CursorLineEndSelect=xu(new l({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends OC{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,i){t.model.pushStackElement(),t.setCursorStates(i.source,3,AC.moveToBeginningOfBuffer(t,t.getCursorStates(),this._inSelectionMode)),t.revealAllCursors(i.source,!0)}}t.CursorTop=xu(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:2062,mac:{primary:2064}}})),t.CursorTopSelect=xu(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:3086,mac:{primary:3088}}}));class d extends OC{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,i){t.model.pushStackElement(),t.setCursorStates(i.source,3,AC.moveToEndOfBuffer(t,t.getCursorStates(),this._inSelectionMode)),t.revealAllCursors(i.source,!0)}}t.CursorBottom=xu(new d({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:2061,mac:{primary:2066}}})),t.CursorBottomSelect=xu(new d({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends OC{constructor(){super({id:"editorScroll",precondition:void 0,metadata:zC.metadata})}determineScrollMethod(t){return[6].includes(t.unit)&&[4,2].includes(t.direction)?this._runHorizontalEditorScroll.bind(this):[1,2,3,4,5,6].includes(t.unit)&&[1,3].includes(t.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(t,i){const e=zC.parse(i);if(!e)return;const s=this.determineScrollMethod(e);s&&s(t,i.source,e)}_runVerticalEditorScroll(t,i,e){const s=this._computeDesiredScrollTop(t,e);if(e.revealCursor){const n=t.getCompletelyVisibleViewRangeAtScrollTop(s);t.setCursorStates(i,3,[AC.findPositionInViewportIfOutside(t,t.getPrimaryCursorState(),n,e.select)])}t.viewLayout.setScrollPosition({scrollTop:s},0)}_computeDesiredScrollTop(t,i){if(i.unit===1){const e=t.viewLayout.getFutureViewport(),s=t.getCompletelyVisibleViewRangeAtScrollTop(e.top),n=t.coordinatesConverter.convertViewRangeToModelRange(s);let o;o=i.direction===1?Math.max(1,n.startLineNumber-i.value):Math.min(t.model.getLineCount(),n.startLineNumber+i.value);const r=t.coordinatesConverter.convertModelPositionToViewPosition(new Cs(o,1));return t.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber)}if(i.unit===5){let e=0;return i.direction===3&&(e=t.model.getLineCount()-t.cursorConfig.pageSize),t.viewLayout.getVerticalOffsetForLineNumber(e)}let e;e=i.unit===3?t.cursorConfig.pageSize*i.value:i.unit===4?Math.round(t.cursorConfig.pageSize/2)*i.value:i.value;const s=(i.direction===1?-1:1)*e;return t.viewLayout.getCurrentScrollTop()+s*t.cursorConfig.lineHeight}_runHorizontalEditorScroll(t,i,e){const s=this._computeDesiredScrollLeft(t,e);t.viewLayout.setScrollPosition({scrollLeft:s},0)}_computeDesiredScrollLeft(t,i){const e=(i.direction===4?-1:1)*i.value;return t.viewLayout.getCurrentScrollLeft()+e*t.cursorConfig.typicalHalfwidthCharacterWidth}}t.EditorScrollImpl=f,t.EditorScroll=xu(new f),t.ScrollLineUp=xu(new class extends OC{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(i,e){t.EditorScroll.runCoreEditorCommand(i,{to:zC.RawDirection.Up,by:zC.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:e.source})}}),t.ScrollPageUp=xu(new class extends OC{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(i,e){t.EditorScroll.runCoreEditorCommand(i,{to:zC.RawDirection.Up,by:zC.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:e.source})}}),t.ScrollEditorTop=xu(new class extends OC{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus}})}runCoreEditorCommand(i,e){t.EditorScroll.runCoreEditorCommand(i,{to:zC.RawDirection.Up,by:zC.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:e.source})}}),t.ScrollLineDown=xu(new class extends OC{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(i,e){t.EditorScroll.runCoreEditorCommand(i,{to:zC.RawDirection.Down,by:zC.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:e.source})}}),t.ScrollPageDown=xu(new class extends OC{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(i,e){t.EditorScroll.runCoreEditorCommand(i,{to:zC.RawDirection.Down,by:zC.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:e.source})}}),t.ScrollEditorBottom=xu(new class extends OC{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus}})}runCoreEditorCommand(i,e){t.EditorScroll.runCoreEditorCommand(i,{to:zC.RawDirection.Down,by:zC.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:e.source})}}),t.ScrollLeft=xu(new class extends OC{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus}})}runCoreEditorCommand(i,e){t.EditorScroll.runCoreEditorCommand(i,{to:zC.RawDirection.Left,by:zC.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:e.source})}}),t.ScrollRight=xu(new class extends OC{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus}})}runCoreEditorCommand(i,e){t.EditorScroll.runCoreEditorCommand(i,{to:zC.RawDirection.Right,by:zC.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:e.source})}});class g extends OC{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,i){i.position&&(t.model.pushStackElement(),t.setCursorStates(i.source,3,[AC.word(t,t.getPrimaryCursorState(),this._inSelectionMode,i.position)]),i.revealType!==2&&t.revealAllCursors(i.source,!0,!0))}}t.WordSelect=xu(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),t.WordSelectDrag=xu(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),t.LastCursorWordSelect=xu(new class extends OC{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(t,i){if(!i.position)return;const e=t.getLastAddedCursorIndex(),s=t.getCursorStates(),n=s.slice(0),o=s[e];n[e]=AC.word(t,o,o.modelState.hasSelection(),i.position),t.model.pushStackElement(),t.setCursorStates(i.source,3,n)}});class A extends OC{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,i){i.position&&(t.model.pushStackElement(),t.setCursorStates(i.source,3,[AC.line(t,t.getPrimaryCursorState(),this._inSelectionMode,i.position,i.viewPosition)]),i.revealType!==2&&t.revealAllCursors(i.source,!1,!0))}}t.LineSelect=xu(new A({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),t.LineSelectDrag=xu(new A({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class p extends OC{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode}runCoreEditorCommand(t,i){if(!i.position)return;const e=t.getLastAddedCursorIndex(),s=t.getCursorStates(),n=s.slice(0);n[e]=AC.line(t,s[e],this._inSelectionMode,i.position,i.viewPosition),t.model.pushStackElement(),t.setCursorStates(i.source,3,n)}}t.LastCursorLineSelect=xu(new p({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),t.LastCursorLineSelectDrag=xu(new p({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),t.CancelSelection=xu(new class extends OC{constructor(){super({id:"cancelSelection",precondition:QC.hasNonEmptySelection,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(t,i){t.model.pushStackElement(),t.setCursorStates(i.source,3,[AC.cancelSelection(t,t.getPrimaryCursorState())]),t.revealAllCursors(i.source,!0)}}),t.RemoveSecondaryCursors=xu(new class extends OC{constructor(){super({id:"removeSecondaryCursors",precondition:QC.hasMultipleSelections,kbOpts:{weight:1,kbExpr:QC.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(t,i){t.model.pushStackElement(),t.setCursorStates(i.source,3,[t.getPrimaryCursorState()]),t.revealAllCursors(i.source,!0),aw(st(0,"Removed secondary cursors"))}}),t.RevealLine=xu(new class extends OC{constructor(){super({id:"revealLine",precondition:void 0,metadata:UC.metadata})}runCoreEditorCommand(t,i){const e=i,s=e.lineNumber||0;let n=typeof s=="number"?s+1:parseInt(s)+1;n<1&&(n=1);const o=t.model.getLineCount();n>o&&(n=o);const r=new Es(n,1,n,t.model.getLineMaxColumn(n));let h=0;if(e.at)switch(e.at){case UC.RawAtArgument.Top:h=3;break;case UC.RawAtArgument.Center:h=1;break;case UC.RawAtArgument.Bottom:h=4}const c=t.coordinatesConverter.convertModelRangeToViewRange(r);t.revealRange(i.source,!1,c,h,0)}}),t.SelectAll=new class extends PC{constructor(){super(Lu)}runDOMCommand(t){Vo&&(t.focus(),t.select()),t.ownerDocument.execCommand("selectAll")}runEditorCommand(t,i,e){const s=i._getViewModel();s&&this.runCoreEditorCommand(s,e)}runCoreEditorCommand(t,i){t.model.pushStackElement(),t.setCursorStates("keyboard",3,[AC.selectAll(t,t.getPrimaryCursorState())])}},t.SetSelection=xu(new class extends OC{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(t,i){i.selection&&(t.model.pushStackElement(),t.setCursorStates(i.source,3,[Xx.fromModelSelection(i.selection)]))}})})(HC||(HC={}));const jC=gl.and(QC.textInputFocus,QC.columnSelection);function WC(t,i){Gl.registerKeybindingRule({id:t,primary:i,when:jC,weight:1})}function YC(t){return t.register(),t}var _C,VC;WC(HC.CursorColumnSelectLeft.id,1039),WC(HC.CursorColumnSelectRight.id,1041),WC(HC.CursorColumnSelectUp.id,1040),WC(HC.CursorColumnSelectPageUp.id,1035),WC(HC.CursorColumnSelectDown.id,1042),WC(HC.CursorColumnSelectPageDown.id,1036),function(t){class i extends mu{runEditorCommand(t,i,e){const s=i._getViewModel();s&&this.runCoreEditingCommand(i,s,e||{})}}t.CoreEditingCommand=i,t.LineBreakInsert=xu(new class extends i{constructor(){super({id:"lineBreakInsert",precondition:QC.writable,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,e){t.pushUndoStop(),t.executeCommands(this.id,SC.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map((t=>t.modelState.selection))))}}),t.Outdent=xu(new class extends i{constructor(){super({id:"outdent",precondition:QC.writable,kbOpts:{weight:0,kbExpr:gl.and(QC.editorTextFocus,QC.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,e){t.pushUndoStop(),t.executeCommands(this.id,SC.outdent(i.cursorConfig,i.model,i.getCursorStates().map((t=>t.modelState.selection)))),t.pushUndoStop()}}),t.Tab=xu(new class extends i{constructor(){super({id:"tab",precondition:QC.writable,kbOpts:{weight:0,kbExpr:gl.and(QC.editorTextFocus,QC.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,e){t.pushUndoStop(),t.executeCommands(this.id,SC.tab(i.cursorConfig,i.model,i.getCursorStates().map((t=>t.modelState.selection)))),t.pushUndoStop()}}),t.DeleteLeft=xu(new class extends i{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,e){const[s,n]=uC.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map((t=>t.modelState.selection)),i.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,n),i.setPrevEditOperationType(2)}}),t.DeleteRight=xu(new class extends i{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,e){const[s,n]=uC.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map((t=>t.modelState.selection)));s&&t.pushUndoStop(),t.executeCommands(this.id,n),i.setPrevEditOperationType(3)}}),t.Undo=new class extends PC{constructor(){super(Fu)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,i,e){if(i.hasModel()&&i.getOption(91)!==!0)return i.getModel().undo()}},t.Redo=new class extends PC{constructor(){super(Iu)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,i,e){if(i.hasModel()&&i.getOption(91)!==!0)return i.getModel().redo()}}}(_C||(_C={}));class JC extends Au{constructor(t,i,e){super({id:t,precondition:void 0,metadata:e}),this._handlerId=i}runCommand(t,i){const e=t.get(Ua).getFocusedCodeEditor();e&&e.trigger("keyboard",this._handlerId,i)}}function GC(t,i){YC(new JC("default:"+t,t)),YC(new JC(t,t,i))}GC("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),GC("replacePreviousChar"),GC("compositionType"),GC("compositionStart"),GC("compositionEnd"),GC("paste"),GC("cut");class KC{constructor(t,i,e,s){this.configuration=t,this.viewModel=i,this.userInputEvents=e,this.commandDelegate=s}paste(t,i,e,s){this.commandDelegate.paste(t,i,e,s)}type(t){this.commandDelegate.type(t)}compositionType(t,i,e,s){this.commandDelegate.compositionType(t,i,e,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(t){HC.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:t})}_validateViewColumn(t){const i=this.viewModel.getLineMinColumn(t.lineNumber);return t.column<i?new Cs(t.lineNumber,i):t}_hasMulticursorModifier(t){switch(this.configuration.options.get(78)){case"altKey":return t.altKey;case"ctrlKey":return t.ctrlKey;case"metaKey":return t.metaKey;default:return!1}}_hasNonMulticursorModifier(t){switch(this.configuration.options.get(78)){case"altKey":return t.ctrlKey||t.metaKey;case"ctrlKey":return t.altKey||t.metaKey;case"metaKey":return t.ctrlKey||t.altKey;default:return!1}}dispatchMouse(t){const i=this.configuration.options,e=xt&&i.get(107),s=i.get(22);t.middleButton&&!e?this._columnSelect(t.position,t.mouseColumn,t.inSelectionMode):t.startedOnLineNumbers?this._hasMulticursorModifier(t)?t.inSelectionMode?this._lastCursorLineSelect(t.position,t.revealType):this._createCursor(t.position,!0):t.inSelectionMode?this._lineSelectDrag(t.position,t.revealType):this._lineSelect(t.position,t.revealType):t.mouseDownCount>=4?this._selectAll():t.mouseDownCount===3?this._hasMulticursorModifier(t)?t.inSelectionMode?this._lastCursorLineSelectDrag(t.position,t.revealType):this._lastCursorLineSelect(t.position,t.revealType):t.inSelectionMode?this._lineSelectDrag(t.position,t.revealType):this._lineSelect(t.position,t.revealType):t.mouseDownCount===2?t.onInjectedText||(this._hasMulticursorModifier(t)?this._lastCursorWordSelect(t.position,t.revealType):t.inSelectionMode?this._wordSelectDrag(t.position,t.revealType):this._wordSelect(t.position,t.revealType)):this._hasMulticursorModifier(t)?this._hasNonMulticursorModifier(t)||(t.shiftKey?this._columnSelect(t.position,t.mouseColumn,!0):t.inSelectionMode?this._lastCursorMoveToSelect(t.position,t.revealType):this._createCursor(t.position,!1)):t.inSelectionMode?t.altKey||s?this._columnSelect(t.position,t.mouseColumn,!0):this._moveToSelect(t.position,t.revealType):this.moveTo(t.position,t.revealType)}_usualArgs(t,i){return t=this._validateViewColumn(t),{source:"mouse",position:this._convertViewToModelPosition(t),viewPosition:t,revealType:i}}moveTo(t,i){HC.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(t,i))}_moveToSelect(t,i){HC.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,i))}_columnSelect(t,i,e){t=this._validateViewColumn(t),HC.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(t),viewPosition:t,mouseColumn:i,doColumnSelect:e})}_createCursor(t,i){t=this._validateViewColumn(t),HC.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(t),viewPosition:t,wholeLine:i})}_lastCursorMoveToSelect(t,i){HC.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,i))}_wordSelect(t,i){HC.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,i))}_wordSelectDrag(t,i){HC.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(t,i))}_lastCursorWordSelect(t,i){HC.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,i))}_lineSelect(t,i){HC.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,i))}_lineSelectDrag(t,i){HC.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(t,i))}_lastCursorLineSelect(t,i){HC.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,i))}_lastCursorLineSelectDrag(t,i){HC.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(t,i))}_selectAll(){HC.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(t){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t)}emitKeyDown(t){this.userInputEvents.emitKeyDown(t)}emitKeyUp(t){this.userInputEvents.emitKeyUp(t)}emitContextMenu(t){this.userInputEvents.emitContextMenu(t)}emitMouseMove(t){this.userInputEvents.emitMouseMove(t)}emitMouseLeave(t){this.userInputEvents.emitMouseLeave(t)}emitMouseUp(t){this.userInputEvents.emitMouseUp(t)}emitMouseDown(t){this.userInputEvents.emitMouseDown(t)}emitMouseDrag(t){this.userInputEvents.emitMouseDrag(t)}emitMouseDrop(t){this.userInputEvents.emitMouseDrop(t)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(t){this.userInputEvents.emitMouseWheel(t)}}class $C{constructor(t){this._createLine=t,this._set(1,[])}flush(){this._set(1,[])}_set(t,i){this._lines=i,this._rendLineNumberStart=t}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(t){const i=t-this._rendLineNumberStart;if(i<0||i>=this._lines.length)throw new Ji("Illegal value for lineNumber");return this._lines[i]}onLinesDeleted(t,i){if(this.getCount()===0)return null;const e=this.getStartLineNumber(),s=this.getEndLineNumber();if(i<e){const e=i-t+1;return this._rendLineNumberStart-=e,null}if(t>s)return null;let n=0,o=0;for(let r=e;r<=s;r++){const e=r-this._rendLineNumberStart;t<=r&&r<=i&&(o===0?(n=e,o=1):o++)}if(t<e){let s=0;s=i<e?i-t+1:e-t,this._rendLineNumberStart-=s}return this._lines.splice(n,o)}onLinesChanged(t,i){const e=t+i-1;if(this.getCount()===0)return!1;const s=this.getStartLineNumber(),n=this.getEndLineNumber();let o=!1;for(let i=t;i<=e;i++)i>=s&&i<=n&&(this._lines[i-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(t,i){if(this.getCount()===0)return null;const e=i-t+1,s=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<=s)return this._rendLineNumberStart+=e,null;if(t>n)return null;if(e+t>n)return this._lines.splice(t-this._rendLineNumberStart,n-t+1);const o=[];for(let t=0;t<e;t++)o[t]=this._createLine();const r=t-this._rendLineNumberStart,h=this._lines.slice(0,r),c=this._lines.slice(r,this._lines.length-e),a=this._lines.slice(this._lines.length-e,this._lines.length);return this._lines=h.concat(o).concat(c),a}onTokensChanged(t){if(this.getCount()===0)return!1;const i=this.getStartLineNumber(),e=this.getEndLineNumber();let s=!1;for(let n=0,o=t.length;n<o;n++){const o=t[n];if(o.toLineNumber<i||o.fromLineNumber>e)continue;const r=Math.max(i,o.fromLineNumber),h=Math.min(e,o.toLineNumber);for(let t=r;t<=h;t++){const i=t-this._rendLineNumberStart;this._lines[i].onTokensChanged(),s=!0}}return s}}class XC{constructor(t){this._host=t,this.domNode=this._createDomNode(),this._linesCollection=new $C((()=>this._host.createVisibleLine()))}_createDomNode(){const t=Ba(document.createElement("div"));return t.setClassName("view-layer"),t.setPosition("absolute"),t.domNode.setAttribute("role","presentation"),t.domNode.setAttribute("aria-hidden","true"),t}onConfigurationChanged(t){return!!t.hasChanged(145)}onFlushed(t){return this._linesCollection.flush(),!0}onLinesChanged(t){return this._linesCollection.onLinesChanged(t.fromLineNumber,t.count)}onLinesDeleted(t){const i=this._linesCollection.onLinesDeleted(t.fromLineNumber,t.toLineNumber);if(i)for(let t=0,e=i.length;t<e;t++){const e=i[t].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onLinesInserted(t){const i=this._linesCollection.onLinesInserted(t.fromLineNumber,t.toLineNumber);if(i)for(let t=0,e=i.length;t<e;t++){const e=i[t].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onScrollChanged(t){return t.scrollTopChanged}onTokensChanged(t){return this._linesCollection.onTokensChanged(t.ranges)}onZonesChanged(t){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(t){return this._linesCollection.getLine(t)}renderLines(t){const i=this._linesCollection._get(),e=new qC(this.domNode.domNode,this._host,t),s={rendLineNumberStart:i.rendLineNumberStart,lines:i.lines,linesLength:i.lines.length},n=e.render(s,t.startLineNumber,t.endLineNumber,t.relativeVerticalOffset);this._linesCollection._set(n.rendLineNumberStart,n.lines)}}class qC{constructor(t,i,e){this.domNode=t,this.host=i,this.viewportData=e}render(t,i,e,s){const n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines.slice(0),linesLength:t.linesLength};if(n.rendLineNumberStart+n.linesLength-1<i||e<n.rendLineNumberStart){n.rendLineNumberStart=i,n.linesLength=e-i+1,n.lines=[];for(let t=i;t<=e;t++)n.lines[t-i]=this.host.createVisibleLine();return this._finishRendering(n,!0,s),n}if(this._renderUntouchedLines(n,Math.max(i-n.rendLineNumberStart,0),Math.min(e-n.rendLineNumberStart,n.linesLength-1),s,i),n.rendLineNumberStart>i){const t=i,o=Math.min(e,n.rendLineNumberStart-1);t<=o&&(this._insertLinesBefore(n,t,o,s,i),n.linesLength+=o-t+1)}else if(n.rendLineNumberStart<i){const t=Math.min(n.linesLength,i-n.rendLineNumberStart);t>0&&(this._removeLinesBefore(n,t),n.linesLength-=t)}if(n.rendLineNumberStart=i,n.rendLineNumberStart+n.linesLength-1<e){const t=n.rendLineNumberStart+n.linesLength,o=e;t<=o&&(this._insertLinesAfter(n,t,o,s,i),n.linesLength+=o-t+1)}else if(n.rendLineNumberStart+n.linesLength-1>e){const t=Math.max(0,e-n.rendLineNumberStart+1),i=n.linesLength-1-t+1;i>0&&(this._removeLinesAfter(n,i),n.linesLength-=i)}return this._finishRendering(n,!1,s),n}_renderUntouchedLines(t,i,e,s,n){const o=t.rendLineNumberStart,r=t.lines;for(let t=i;t<=e;t++){const i=o+t;r[t].layoutLine(i,s[i-n],this.viewportData.lineHeight)}}_insertLinesBefore(t,i,e,s,n){const o=[];let r=0;for(let t=i;t<=e;t++)o[r++]=this.host.createVisibleLine();t.lines=o.concat(t.lines)}_removeLinesBefore(t,i){for(let e=0;e<i;e++){const i=t.lines[e].getDomNode();i&&this.domNode.removeChild(i)}t.lines.splice(0,i)}_insertLinesAfter(t,i,e,s,n){const o=[];let r=0;for(let t=i;t<=e;t++)o[r++]=this.host.createVisibleLine();t.lines=t.lines.concat(o)}_removeLinesAfter(t,i){const e=t.linesLength-i;for(let s=0;s<i;s++){const i=t.lines[e+s].getDomNode();i&&this.domNode.removeChild(i)}t.lines.splice(e,i)}_finishRenderingNewLines(t,i,e,s){qC._ttPolicy&&(e=qC._ttPolicy.createHTML(e));const n=this.domNode.lastChild;i||!n?this.domNode.innerHTML=e:n.insertAdjacentHTML("afterend",e);let o=this.domNode.lastChild;for(let i=t.linesLength-1;i>=0;i--){const e=t.lines[i];s[i]&&(e.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(t,i,e){const s=document.createElement("div");qC._ttPolicy&&(i=qC._ttPolicy.createHTML(i)),s.innerHTML=i;for(let i=0;i<t.linesLength;i++){const n=t.lines[i];if(e[i]){const t=s.firstChild,i=n.getDomNode();i.parentNode.replaceChild(t,i),n.setDomNode(t)}}}_finishRendering(t,i,e){const s=qC._sb,n=t.linesLength,o=t.lines,r=t.rendLineNumberStart,h=[];{s.reset();let c=!1;for(let t=0;t<n;t++){const i=o[t];h[t]=!1,!i.getDomNode()&&i.renderLine(t+r,e[t],this.viewportData.lineHeight,this.viewportData,s)&&(h[t]=!0,c=!0)}c&&this._finishRenderingNewLines(t,i,s.build(),h)}{s.reset();let i=!1;const c=[];for(let t=0;t<n;t++){const n=o[t];c[t]=!1,!h[t]&&n.renderLine(t+r,e[t],this.viewportData.lineHeight,this.viewportData,s)&&(c[t]=!0,i=!0)}i&&this._finishRenderingInvalidLines(t,s.build(),c)}}}qC._ttPolicy=Yu("editorViewLayer",{createHTML:t=>t}),qC._sb=new wd(1e5);class ZC extends iy{constructor(t){super(t),this._visibleLines=new XC(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);Da(this.domNode,i),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let t=0,i=this._dynamicOverlays.length;t<i;t++)if(this._dynamicOverlays[t].shouldRender())return!0;return!1}dispose(){super.dispose();for(let t=0,i=this._dynamicOverlays.length;t<i;t++)this._dynamicOverlays[t].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new tE(this._dynamicOverlays)}addDynamicOverlay(t){this._dynamicOverlays.push(t)}onConfigurationChanged(t){this._visibleLines.onConfigurationChanged(t);const i=this._context.configuration.options.get(50);return Da(this.domNode,i),!0}onFlushed(t){return this._visibleLines.onFlushed(t)}onFocusChanged(t){return this._isFocused=t.isFocused,!0}onLinesChanged(t){return this._visibleLines.onLinesChanged(t)}onLinesDeleted(t){return this._visibleLines.onLinesDeleted(t)}onLinesInserted(t){return this._visibleLines.onLinesInserted(t)}onScrollChanged(t){return this._visibleLines.onScrollChanged(t)||!0}onTokensChanged(t){return this._visibleLines.onTokensChanged(t)}onZonesChanged(t){return this._visibleLines.onZonesChanged(t)}prepareRender(t){const i=this._dynamicOverlays.filter((t=>t.shouldRender()));for(let e=0,s=i.length;e<s;e++){const s=i[e];s.prepareRender(t),s.onDidRender()}}render(t){this._viewOverlaysRender(t),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(t){this._visibleLines.renderLines(t.viewportData)}}class tE{constructor(t){this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(t){this._domNode=Ba(t)}onContentChanged(){}onTokensChanged(){}renderLine(t,i,e,s,n){let o="";for(let i=0,e=this._dynamicOverlays.length;i<e;i++)o+=this._dynamicOverlays[i].render(s.startLineNumber,t);return this._renderedContent!==o&&(this._renderedContent=o,n.appendString('<div style="top:'),n.appendString(String(i)),n.appendString("px;height:"),n.appendString(String(e)),n.appendString('px;">'),n.appendString(o),n.appendString("</div>"),!0)}layoutLine(t,i,e){this._domNode&&(this._domNode.setTop(i),this._domNode.setHeight(e))}}class iE extends ZC{constructor(t){super(t);const i=this._context.configuration.options.get(145);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(t){const i=this._context.configuration.options.get(145);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(t)||!0}onScrollChanged(t){return super.onScrollChanged(t)||t.scrollWidthChanged}_viewOverlaysRender(t){super._viewOverlaysRender(t),this.domNode.setWidth(Math.max(t.scrollWidth,this._contentWidth))}}class eE extends ZC{constructor(t){super(t);const i=this._context.configuration.options,e=i.get(145);this._contentLeft=e.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Da(this.domNode,i.get(50))}onConfigurationChanged(t){const i=this._context.configuration.options;Da(this.domNode,i.get(50));const e=i.get(145);return this._contentLeft=e.contentLeft,super.onConfigurationChanged(t)||!0}onScrollChanged(t){return super.onScrollChanged(t)||t.scrollHeightChanged}_viewOverlaysRender(t){super._viewOverlaysRender(t);const i=Math.min(t.scrollHeight,1e6);this.domNode.setHeight(i),this.domNode.setWidth(this._contentLeft)}}class sE{constructor(t){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=t}emitKeyDown(t){var i;(i=this.onKeyDown)===null||i===void 0||i.call(this,t)}emitKeyUp(t){var i;(i=this.onKeyUp)===null||i===void 0||i.call(this,t)}emitContextMenu(t){var i;(i=this.onContextMenu)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(t))}emitMouseMove(t){var i;(i=this.onMouseMove)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(t))}emitMouseLeave(t){var i;(i=this.onMouseLeave)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(t))}emitMouseDown(t){var i;(i=this.onMouseDown)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(t))}emitMouseUp(t){var i;(i=this.onMouseUp)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(t))}emitMouseDrag(t){var i;(i=this.onMouseDrag)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(t))}emitMouseDrop(t){var i;(i=this.onMouseDrop)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(t))}emitMouseDropCanceled(){var t;(t=this.onMouseDropCanceled)===null||t===void 0||t.call(this)}emitMouseWheel(t){var i;(i=this.onMouseWheel)===null||i===void 0||i.call(this,t)}_convertViewToModelMouseEvent(t){return t.target?{event:t.event,target:this._convertViewToModelMouseTarget(t.target)}:t}_convertViewToModelMouseTarget(t){return sE.convertViewToModelMouseTarget(t,this._coordinatesConverter)}static convertViewToModelMouseTarget(t,i){const e={...t};return e.position&&(e.position=i.convertViewPositionToModelPosition(e.position)),e.range&&(e.range=i.convertViewRangeToModelRange(e.range)),e.type!==5&&e.type!==8||(e.detail=this.convertViewToModelViewZoneData(e.detail,i)),e}static convertViewToModelViewZoneData(t,i){return{viewZoneId:t.viewZoneId,positionBefore:t.positionBefore?i.convertViewPositionToModelPosition(t.positionBefore):t.positionBefore,positionAfter:t.positionAfter?i.convertViewPositionToModelPosition(t.positionAfter):t.positionAfter,position:i.convertViewPositionToModelPosition(t.position),afterLineNumber:i.convertViewPositionToModelPosition(new Cs(t.afterLineNumber,1)).lineNumber}}}class nE extends iy{constructor(t){super(t),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=Ba(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let t=!1;const i=this._context.configuration.options.get(145),e=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==e&&(this.contentWidth=e,t=!0);const s=i.contentLeft;return this.contentLeft!==s&&(this.contentLeft=s,t=!0),t}dispose(){super.dispose()}onConfigurationChanged(t){return this.update()}onScrollChanged(t){return t.scrollTopChanged||t.scrollLeftChanged}onDecorationsChanged(t){return!0}onZonesChanged(t){return!0}prepareRender(t){}render(t){var i;let e=0;const s=t.getDecorationsInViewport();for(const n of s){if(!n.options.blockClassName)continue;let s,o,r=this.blocks[e];r||(r=this.blocks[e]=Ba(document.createElement("div")),this.domNode.appendChild(r)),n.options.blockIsAfterEnd?(s=t.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!1),o=t.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!0)):(s=t.getVerticalOffsetForLineNumber(n.range.startLineNumber,!0),o=n.range.isEmpty()&&!n.options.blockDoesNotCollapse?t.getVerticalOffsetForLineNumber(n.range.startLineNumber,!1):t.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!0));const[h,c,a,l]=(i=n.options.blockPadding)!==null&&i!==void 0?i:[0,0,0,0];r.setClassName("blockDecorations-block "+n.options.blockClassName),r.setLeft(this.contentLeft-l),r.setWidth(this.contentWidth+l+c),r.setTop(s-t.scrollTop-h),r.setHeight(o-s+h+a),e++}for(let t=e;t<this.blocks.length;t++)this.blocks[t].domNode.remove();this.blocks.length=e}}class oE extends iy{constructor(t,i){super(t),this._viewDomNode=i,this._widgets={},this.domNode=Ba(document.createElement("div")),ey.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Ba(document.createElement("div")),ey.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(t){const i=Object.keys(this._widgets);for(const e of i)this._widgets[e].onConfigurationChanged(t);return!0}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLineMappingChanged(t){return this._updateAnchorsViewPositions(),!0}onLinesChanged(t){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(t){return this._updateAnchorsViewPositions(),!0}onLinesInserted(t){return this._updateAnchorsViewPositions(),!0}onScrollChanged(t){return!0}onZonesChanged(t){return!0}_updateAnchorsViewPositions(){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].updateAnchorViewPosition()}addWidget(t){const i=new rE(this._context,this._viewDomNode,t);this._widgets[i.id]=i,i.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(i.domNode):this.domNode.appendChild(i.domNode),this.setShouldRender()}setWidgetPosition(t,i,e,s,n){this._widgets[t.getId()].setPosition(i,e,s,n),this.setShouldRender()}removeWidget(t){const i=t.getId();if(this._widgets.hasOwnProperty(i)){const t=this._widgets[i];delete this._widgets[i];const e=t.domNode.domNode;e.parentNode.removeChild(e),e.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(t){return!!this._widgets.hasOwnProperty(t)&&this._widgets[t].suppressMouseDown}onBeforeRender(t){const i=Object.keys(this._widgets);for(const e of i)this._widgets[e].onBeforeRender(t)}prepareRender(t){const i=Object.keys(this._widgets);for(const e of i)this._widgets[e].prepareRender(t)}render(t){const i=Object.keys(this._widgets);for(const e of i)this._widgets[e].render(t)}}class rE{constructor(t,i,e){this._primaryAnchor=new hE(null,null),this._secondaryAnchor=new hE(null,null),this._context=t,this._viewDomNode=i,this._actual=e,this.domNode=Ba(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,n=s.get(145);this._fixedOverflowWidgets=s.get(42),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this._lineHeight=s.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(t){const i=this._context.configuration.options;if(this._lineHeight=i.get(67),t.hasChanged(145)){const t=i.get(145);this._contentLeft=t.contentLeft,this._contentWidth=t.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(t,i,e){function s(t,i,e){if(!t)return new hE(null,null);const s=i.model.validatePosition(t);if(i.coordinatesConverter.modelPositionIsVisible(s)){const n=i.coordinatesConverter.convertModelPositionToViewPosition(s,e??void 0);return new hE(t,n)}return new hE(t,null)}this._affinity=t,this._primaryAnchor=s(i,this._context.viewModel,this._affinity),this._secondaryAnchor=s(e,this._context.viewModel,this._affinity)}_getMaxWidth(){const t=this.domNode.domNode.ownerDocument,i=t.defaultView;return this.allowEditorOverflow?(i==null?void 0:i.innerWidth)||t.documentElement.offsetWidth||t.body.offsetWidth:this._contentWidth}setPosition(t,i,e,s){this._setPosition(s,t,i),this._preference=e,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(t,i,e,s){const n=t.top,o=n,r=t.top+t.height,h=n-e,c=o>=e,a=r,l=s.viewportHeight-r>=e;let u=t.left;return u+i>s.scrollLeft+s.viewportWidth&&(u=s.scrollLeft+s.viewportWidth-i),u<s.scrollLeft&&(u=s.scrollLeft),{fitsAbove:c,aboveTop:h,fitsBelow:l,belowTop:a,left:u}}_layoutHorizontalSegmentInPage(t,i,e,s){var n;const o=Math.max(15,i.left-s),r=Math.min(i.left+i.width+s,t.width-15),h=this._viewDomNode.domNode.ownerDocument.defaultView;let c=i.left+e-((n=h==null?void 0:h.scrollX)!==null&&n!==void 0?n:0);if(c+s>r){const t=c-(r-s);c-=t,e-=t}if(c<o){const t=c-o;c-=t,e-=t}return[e,c]}_layoutBoxInPage(t,i,e,s){var n,o;const r=t.top-e,h=t.top+t.height,c=yc(this._viewDomNode.domNode),a=this._viewDomNode.domNode.ownerDocument,l=a.defaultView,u=c.top+r-((n=l==null?void 0:l.scrollY)!==null&&n!==void 0?n:0),d=c.top+h-((o=l==null?void 0:l.scrollY)!==null&&o!==void 0?o:0),f=wc(a.body),[g,A]=this._layoutHorizontalSegmentInPage(f,c,t.left-s.scrollLeft+this._contentLeft,i),p=u>=22,w=d+e<=f.height-22;return this._fixedOverflowWidgets?{fitsAbove:p,aboveTop:Math.max(u,22),fitsBelow:w,belowTop:d,left:A}:{fitsAbove:p,aboveTop:r,fitsBelow:w,belowTop:h,left:g}}_prepareRenderWidgetAtExactPositionOverflowing(t){return new cE(t.top,t.left+this._contentLeft)}_getAnchorsCoordinates(t){var i,e;return{primary:s(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),secondary:s(((i=this._secondaryAnchor.viewPosition)===null||i===void 0?void 0:i.lineNumber)===((e=this._primaryAnchor.viewPosition)===null||e===void 0?void 0:e.lineNumber)?this._secondaryAnchor.viewPosition:null,this._affinity,this._lineHeight)};function s(i,e,s){if(!i)return null;const n=t.visibleRangeForPosition(i);if(!n)return null;const o=i.column===1&&e===3?0:n.left,r=t.getVerticalOffsetForLineNumber(i.lineNumber)-t.scrollTop;return new aE(r,o,s)}}_reduceAnchorCoordinates(t,i,e){if(!i)return t;const s=this._context.configuration.options.get(50);let n=i.left;return n=n<t.left?Math.max(n,t.left-e+s.typicalFullwidthCharacterWidth):Math.min(n,t.left+e-s.typicalFullwidthCharacterWidth),new aE(t.top,n,t.height)}_prepareRenderWidget(t){if(!this._preference||this._preference.length===0)return null;const{primary:i,secondary:e}=this._getAnchorsCoordinates(t);if(!i)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let t=null;if(typeof this._actual.beforeRender=="function"&&(t=lE(this._actual.beforeRender,this._actual)),t)this._cachedDomNodeOffsetWidth=t.width,this._cachedDomNodeOffsetHeight=t.height;else{const t=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(t.width),this._cachedDomNodeOffsetHeight=Math.round(t.height)}}const s=this._reduceAnchorCoordinates(i,e,this._cachedDomNodeOffsetWidth);let n;n=this.allowEditorOverflow?this._layoutBoxInPage(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,t):this._layoutBoxInViewport(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,t);for(let t=1;t<=2;t++)for(const i of this._preference)if(i===1){if(!n)return null;if(t===2||n.fitsAbove)return{coordinate:new cE(n.aboveTop,n.left),position:1}}else{if(i!==2)return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new cE(s.top,s.left)),position:0}:{coordinate:new cE(s.top,s.left),position:0};if(!n)return null;if(t===2||n.fitsBelow)return{coordinate:new cE(n.belowTop,n.left),position:2}}return null}onBeforeRender(t){this._primaryAnchor.viewPosition&&this._preference&&(this._primaryAnchor.viewPosition.lineNumber<t.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>t.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))}prepareRender(t){this._renderData=this._prepareRenderWidget(t)}render(t){if(!this._renderData)return this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),void(typeof this._actual.afterRender=="function"&&lE(this._actual.afterRender,this._actual,null));this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+t.scrollTop-t.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&lE(this._actual.afterRender,this._actual,this._renderData.position)}}class hE{constructor(t,i){this.modelPosition=t,this.viewPosition=i}}class cE{constructor(t,i){this.top=t,this.left=i,this._coordinateBrand=void 0}}class aE{constructor(t,i,e){this.top=t,this.left=i,this.height=e,this._anchorCoordinateBrand=void 0}}function lE(t,i,...e){try{return t.call(i,...e)}catch{return null}}class uE extends Sk{constructor(t){super(),this._context=t;const i=this._context.configuration.options,e=i.get(145);this._renderLineHighlight=i.get(96),this._renderLineHighlightOnlyWhenFocus=i.get(97),this._wordWrap=e.isViewportWrapping,this._contentLeft=e.contentLeft,this._contentWidth=e.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Bs(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let t=!1;const i=new Set;for(const t of this._selections)i.add(t.positionLineNumber);const e=Array.from(i);e.sort(((t,i)=>t-i)),h(this._cursorLineNumbers,e)||(this._cursorLineNumbers=e,t=!0);const s=this._selections.every((t=>t.isEmpty()));return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,t=!0),t}onThemeChanged(t){return this._readFromSelections()}onConfigurationChanged(t){const i=this._context.configuration.options,e=i.get(145);return this._renderLineHighlight=i.get(96),this._renderLineHighlightOnlyWhenFocus=i.get(97),this._wordWrap=e.isViewportWrapping,this._contentLeft=e.contentLeft,this._contentWidth=e.contentWidth,!0}onCursorStateChanged(t){return this._selections=t.selections,this._readFromSelections()}onFlushed(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return t.scrollWidthChanged||t.scrollTopChanged}onZonesChanged(t){return!0}onFocusChanged(t){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=t.isFocused,!0)}prepareRender(t){if(!this._shouldRenderThis())return void(this._renderData=null);const i=t.visibleRange.startLineNumber,e=t.visibleRange.endLineNumber,s=[];for(let t=i;t<=e;t++)s[t-i]="";if(this._wordWrap){const n=this._renderOne(t,!1);for(const t of this._cursorLineNumbers){const o=this._context.viewModel.coordinatesConverter,r=o.convertViewPositionToModelPosition(new Cs(t,1)).lineNumber,h=o.convertModelPositionToViewPosition(new Cs(r,1)).lineNumber,c=o.convertModelPositionToViewPosition(new Cs(r,this._context.viewModel.model.getLineMaxColumn(r))).lineNumber,a=Math.max(h,i),l=Math.min(c,e);for(let t=a;t<=l;t++)s[t-i]=n}}const n=this._renderOne(t,!0);for(const t of this._cursorLineNumbers)t<i||t>e||(s[t-i]=n);this._renderData=s}render(t,i){if(!this._renderData)return"";const e=i-t;return e>=this._renderData.length?"":this._renderData[e]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class dE extends uE{_renderOne(t,i){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(i?" current-line-exact":"")}" style="width:${Math.max(t.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class fE extends uE{_renderOne(t,i){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&i?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}Nk(((t,i)=>{const e=t.getColor(Ok);if(e&&(i.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${e}; }`),i.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${e}; border: none; }`)),!e||e.isTransparent()||t.defines(zk)){const e=t.getColor(zk);e&&(i.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${e}; }`),i.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${e}; }`),dy(t.type)&&(i.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),i.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}}));class gE extends Sk{constructor(t){super(),this._context=t;const i=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=i.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(t){const i=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=i.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return t.scrollTopChanged||t.scrollWidthChanged}onZonesChanged(t){return!0}prepareRender(t){const i=t.getDecorationsInViewport();let e=[],s=0;for(let t=0,n=i.length;t<n;t++){const n=i[t];n.options.className&&(e[s++]=n)}e=e.sort(((t,i)=>{if(t.options.zIndex<i.options.zIndex)return-1;if(t.options.zIndex>i.options.zIndex)return 1;const e=t.options.className,s=i.options.className;return e<s?-1:e>s?1:Es.compareRangesUsingStarts(t.range,i.range)}));const n=t.visibleRange.startLineNumber,o=t.visibleRange.endLineNumber,r=[];for(let t=n;t<=o;t++)r[t-n]="";this._renderWholeLineDecorations(t,e,r),this._renderNormalDecorations(t,e,r),this._renderResult=r}_renderWholeLineDecorations(t,i,e){const s=t.visibleRange.startLineNumber,n=t.visibleRange.endLineNumber;for(let t=0,o=i.length;t<o;t++){const o=i[t];if(!o.options.isWholeLine)continue;const r='<div class="cdr '+o.options.className+'" style="left:0;width:100%;"></div>',h=Math.max(o.range.startLineNumber,s),c=Math.min(o.range.endLineNumber,n);for(let t=h;t<=c;t++)e[t-s]+=r}}_renderNormalDecorations(t,i,e){var s;const n=t.visibleRange.startLineNumber;let o=null,r=!1,h=null,c=!1;for(let a=0,l=i.length;a<l;a++){const l=i[a];if(l.options.isWholeLine)continue;const u=l.options.className,d=!!l.options.showIfCollapsed;let f=l.range;d&&f.endColumn===1&&f.endLineNumber!==f.startLineNumber&&(f=new Es(f.startLineNumber,f.startColumn,f.endLineNumber-1,this._context.viewModel.getLineMaxColumn(f.endLineNumber-1))),o===u&&r===d&&Es.areIntersectingOrTouching(h,f)?h=Es.plusRange(h,f):(o!==null&&this._renderNormalDecoration(t,h,o,c,r,n,e),o=u,r=d,h=f,c=(s=l.options.shouldFillLineOnLineBreak)!==null&&s!==void 0&&s)}o!==null&&this._renderNormalDecoration(t,h,o,c,r,n,e)}_renderNormalDecoration(t,i,e,s,n,o,r){const h=t.linesVisibleRangesForRange(i,e==="findMatch");if(h)for(let t=0,i=h.length;t<i;t++){const i=h[t];if(i.outsideRenderedLine)continue;const c=i.lineNumber-o;if(n&&i.ranges.length===1){const t=i.ranges[0];if(t.width<this._typicalHalfwidthCharacterWidth){const e=Math.round(t.left+t.width/2),s=Math.max(0,Math.round(e-this._typicalHalfwidthCharacterWidth/2));i.ranges[0]=new ry(s,this._typicalHalfwidthCharacterWidth)}}for(let t=0,n=i.ranges.length;t<n;t++){const o=s&&i.continuesOnNextLine&&n===1,h=i.ranges[t],a='<div class="cdr '+e+'" style="left:'+String(h.left)+"px;width:"+(o?"100%;":String(h.width)+"px;")+'"></div>';r[c]+=a}}}render(t,i){if(!this._renderResult)return"";const e=i-t;return e<0||e>=this._renderResult.length?"":this._renderResult[e]}}class AE extends iy{constructor(t,i,e,s){super(t);const n=this._context.configuration.options,o=n.get(103),r=n.get(75),h=n.get(40),c=n.get(106),a={listenOnDomNode:e.domNode,className:"editor-scrollable "+Lk(t.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:r,fastScrollSensitivity:h,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new hk(i.domNode,a,this._context.viewLayout.getScrollable())),ey.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=Ba(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const l=(t,i,e)=>{const s={};if(i){const i=t.scrollTop;i&&(s.scrollTop=this._context.viewLayout.getCurrentScrollTop()+i,t.scrollTop=0)}if(e){const i=t.scrollLeft;i&&(s.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+i,t.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(s,1)};this._register(rc(e.domNode,"scroll",(t=>l(e.domNode,!0,!0)))),this._register(rc(i.domNode,"scroll",(t=>l(i.domNode,!0,!1)))),this._register(rc(s.domNode,"scroll",(t=>l(s.domNode,!0,!1)))),this._register(rc(this.scrollbarDomNode.domNode,"scroll",(t=>l(this.scrollbarDomNode.domNode,!0,!1))))}dispose(){super.dispose()}_setLayout(){const t=this._context.configuration.options,i=t.get(145);this.scrollbarDomNode.setLeft(i.contentLeft),t.get(73).side==="right"?this.scrollbarDomNode.setWidth(i.contentWidth+i.minimap.minimapWidth):this.scrollbarDomNode.setWidth(i.contentWidth),this.scrollbarDomNode.setHeight(i.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(t){this.scrollbar.delegateVerticalScrollbarPointerDown(t)}delegateScrollFromMouseWheelEvent(t){this.scrollbar.delegateScrollFromMouseWheelEvent(t)}onConfigurationChanged(t){if(t.hasChanged(103)||t.hasChanged(75)||t.hasChanged(40)){const t=this._context.configuration.options,i=t.get(103),e=t.get(75),s=t.get(40),n=t.get(106),o={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:e,fastScrollSensitivity:s,scrollPredominantAxis:n};this.scrollbar.updateOptions(o)}return t.hasChanged(145)&&this._setLayout(),!0}onScrollChanged(t){return!0}onThemeChanged(t){return this.scrollbar.updateClassName("editor-scrollable "+Lk(this._context.theme.type)),!0}prepareRender(t){}render(t){this.scrollbar.renderNow()}}class pE{constructor(t,i,e,s,n){this.startLineNumber=t,this.endLineNumber=i,this.className=e,this.tooltip=s,this._decorationToRenderBrand=void 0,this.zIndex=n??0}}class wE{constructor(t,i,e){this.className=t,this.zIndex=i,this.tooltip=e}}class mE{constructor(){this.decorations=[]}add(t){this.decorations.push(t)}getDecorations(){return this.decorations}}class vE extends Sk{_render(t,i,e){const s=[];for(let e=t;e<=i;e++)s[e-t]=new mE;if(e.length===0)return s;e.sort(((t,i)=>t.className===i.className?t.startLineNumber===i.startLineNumber?t.endLineNumber-i.endLineNumber:t.startLineNumber-i.startLineNumber:t.className<i.className?-1:1));let n=null,o=0;for(let r=0,h=e.length;r<h;r++){const h=e[r],c=h.className,a=h.zIndex;let l=Math.max(h.startLineNumber,t)-t;const u=Math.min(h.endLineNumber,i)-t;n===c?(l=Math.max(o+1,l),o=Math.max(o,u)):(n=c,o=u);for(let t=l;t<=o;t++)s[t].add(new wE(c,a,h.tooltip))}return s}}class bE extends iy{constructor(t){super(t),this._widgets={},this._context=t;const i=this._context.configuration.options,e=i.get(145);this.domNode=Ba(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=i.get(67),this._glyphMargin=i.get(57),this._glyphMarginLeft=e.glyphMarginLeft,this._glyphMarginWidth=e.glyphMarginWidth,this._glyphMarginDecorationLaneCount=e.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(t){const i=this._context.configuration.options,e=i.get(145);return this._lineHeight=i.get(67),this._glyphMargin=i.get(57),this._glyphMarginLeft=e.glyphMarginLeft,this._glyphMarginWidth=e.glyphMarginWidth,this._glyphMarginDecorationLaneCount=e.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return t.scrollTopChanged}onZonesChanged(t){return!0}addWidget(t){const i=Ba(t.getDomNode());this._widgets[t.getId()]={widget:t,preference:t.getPosition(),domNode:i,renderInfo:null},i.setPosition("absolute"),i.setDisplay("none"),i.setAttribute("widgetId",t.getId()),this.domNode.appendChild(i),this.setShouldRender()}setWidgetPosition(t,i){const e=this._widgets[t.getId()];return(e.preference.lane!==i.lane||e.preference.zIndex!==i.zIndex||!Es.equalsRange(e.preference.range,i.range))&&(e.preference=i,this.setShouldRender(),!0)}removeWidget(t){var i;const e=t.getId();if(this._widgets[e]){const t=this._widgets[e].domNode.domNode;delete this._widgets[e],(i=t.parentNode)===null||i===void 0||i.removeChild(t),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(t,i){var e,s,n;const o=t.visibleRange.startLineNumber,r=t.visibleRange.endLineNumber,h=t.getDecorationsInViewport();for(const t of h){const h=t.options.glyphMarginClassName;if(!h)continue;const c=Math.max(t.range.startLineNumber,o),a=Math.min(t.range.endLineNumber,r),l=(s=(e=t.options.glyphMargin)===null||e===void 0?void 0:e.position)!==null&&s!==void 0?s:eg.Center,u=(n=t.options.zIndex)!==null&&n!==void 0?n:0;for(let t=c;t<=a;t++){const e=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Cs(t,0)),s=this._context.viewModel.glyphLanes.getLanesAtLine(e.lineNumber).indexOf(l);i.push(new yE(t,s,u,h))}}}_collectWidgetBasedGlyphRenderRequest(t,i){const e=t.visibleRange.startLineNumber,s=t.visibleRange.endLineNumber;for(const t of Object.values(this._widgets)){const n=t.preference.range,{startLineNumber:o,endLineNumber:r}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(Es.lift(n));if(!o||!r||r<e||o>s)continue;const h=Math.max(o,e),c=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Cs(h,0)),a=this._context.viewModel.glyphLanes.getLanesAtLine(c.lineNumber).indexOf(t.preference.lane);i.push(new kE(h,a,t.preference.zIndex,t))}}_collectSortedGlyphRenderRequests(t){const i=[];return this._collectDecorationBasedGlyphRenderRequest(t,i),this._collectWidgetBasedGlyphRenderRequest(t,i),i.sort(((t,i)=>t.lineNumber===i.lineNumber?t.laneIndex===i.laneIndex?t.zIndex===i.zIndex?i.type===t.type?t.type===0&&i.type===0?t.className<i.className?-1:1:0:i.type-t.type:i.zIndex-t.zIndex:t.laneIndex-i.laneIndex:t.lineNumber-i.lineNumber)),i}prepareRender(t){if(!this._glyphMargin)return void(this._decorationGlyphsToRender=[]);for(const t of Object.values(this._widgets))t.renderInfo=null;const i=new L(this._collectSortedGlyphRenderRequests(t)),e=[];for(;i.length>0;){const t=i.peek();if(!t)break;const s=i.takeWhile((i=>i.lineNumber===t.lineNumber&&i.laneIndex===t.laneIndex));if(!s||s.length===0)break;const n=s[0];if(n.type===0){const t=[];for(const i of s){if(i.zIndex!==n.zIndex||i.type!==n.type)break;t.length!==0&&t[t.length-1]===i.className||t.push(i.className)}e.push(n.accept(t.join(" ")))}else n.widget.renderInfo={lineNumber:n.lineNumber,laneIndex:n.laneIndex}}this._decorationGlyphsToRender=e}render(t){if(!this._glyphMargin){for(const t of Object.values(this._widgets))t.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const t=this._managedDomNodes.pop();t==null||t.domNode.remove()}return}const i=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const e of Object.values(this._widgets))if(e.renderInfo){const s=t.viewportData.relativeVerticalOffset[e.renderInfo.lineNumber-t.viewportData.startLineNumber],n=this._glyphMarginLeft+e.renderInfo.laneIndex*this._lineHeight;e.domNode.setDisplay("block"),e.domNode.setTop(s),e.domNode.setLeft(n),e.domNode.setWidth(i),e.domNode.setHeight(this._lineHeight)}else e.domNode.setDisplay("none");for(let e=0;e<this._decorationGlyphsToRender.length;e++){const s=this._decorationGlyphsToRender[e],n=t.viewportData.relativeVerticalOffset[s.lineNumber-t.viewportData.startLineNumber],o=this._glyphMarginLeft+s.laneIndex*this._lineHeight;let r;e<this._managedDomNodes.length?r=this._managedDomNodes[e]:(r=Ba(document.createElement("div")),this._managedDomNodes.push(r),this.domNode.appendChild(r)),r.setClassName("cgmr codicon "+s.combinedClassName),r.setPosition("absolute"),r.setTop(n),r.setLeft(o),r.setWidth(i),r.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const t=this._managedDomNodes.pop();t==null||t.domNode.remove()}}}class yE{constructor(t,i,e,s){this.lineNumber=t,this.laneIndex=i,this.zIndex=e,this.className=s,this.type=0}accept(t){return new xE(this.lineNumber,this.laneIndex,t)}}class kE{constructor(t,i,e,s){this.lineNumber=t,this.laneIndex=i,this.zIndex=e,this.widget=s,this.type=1}}class xE{constructor(t,i,e){this.lineNumber=t,this.laneIndex=i,this.combinedClassName=e}}class CE extends te{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function EE(t,i){let e=0,s=0;const n=t.length;for(;s<n;){const n=t.charCodeAt(s);if(n===32)e++;else{if(n!==9)break;e=e-e%i+i}s++}return s===n?-1:e}(function(t){t[t.Disabled=0]="Disabled",t[t.EnabledForActive=1]="EnabledForActive",t[t.Enabled=2]="Enabled"})(VC||(VC={}));class BE{constructor(t,i,e,s,n,o){if(this.visibleColumn=t,this.column=i,this.className=e,this.horizontalLine=s,this.forWrappedLinesAfterColumn=n,this.forWrappedLinesBeforeOrAtColumn=o,t!==-1==(i!==-1))throw new Error}}class DE{constructor(t,i){this.top=t,this.endColumn=i}}class ME extends CE{constructor(t,i){super(),this.textModel=t,this.languageConfigurationService=i}getLanguageConfiguration(t){return this.languageConfigurationService.getLanguageConfiguration(t)}_computeIndentLevel(t){return EE(this.textModel.getLineContent(t+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(t,i,e){this.assertNotDisposed();const s=this.textModel.getLineCount();if(t<1||t>s)throw new Ji("Illegal value for lineNumber");const n=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(n&&n.offSide);let r=-2,h=-1,c=-2,a=-1;const l=t=>{if(r!==-1&&(r===-2||r>t-1)){r=-1,h=-1;for(let i=t-2;i>=0;i--){const t=this._computeIndentLevel(i);if(t>=0){r=i,h=t;break}}}if(c===-2){c=-1,a=-1;for(let i=t;i<s;i++){const t=this._computeIndentLevel(i);if(t>=0){c=i,a=t;break}}}};let u=-2,d=-1,f=-2,g=-1;const A=t=>{if(u===-2){u=-1,d=-1;for(let i=t-2;i>=0;i--){const t=this._computeIndentLevel(i);if(t>=0){u=i,d=t;break}}}if(f!==-1&&(f===-2||f<t-1)){f=-1,g=-1;for(let i=t;i<s;i++){const t=this._computeIndentLevel(i);if(t>=0){f=i,g=t;break}}}};let p=0,w=!0,m=0,v=!0,b=0,y=0;for(let n=0;w||v;n++){const r=t-n,f=t+n;n>1&&(r<1||r<i)&&(w=!1),n>1&&(f>s||f>e)&&(v=!1),n>5e4&&(w=!1,v=!1);let k=-1;if(w&&r>=1){const t=this._computeIndentLevel(r-1);t>=0?(c=r-1,a=t,k=Math.ceil(t/this.textModel.getOptions().indentSize)):(l(r),k=this._getIndentLevelForWhitespaceLine(o,h,a))}let x=-1;if(v&&f<=s){const t=this._computeIndentLevel(f-1);t>=0?(u=f-1,d=t,x=Math.ceil(t/this.textModel.getOptions().indentSize)):(A(f),x=this._getIndentLevelForWhitespaceLine(o,d,g))}if(n!==0){if(n===1){if(f<=s&&x>=0&&y+1===x){w=!1,p=f,m=f,b=x;continue}if(r>=1&&k>=0&&k-1===y){v=!1,p=r,m=r,b=k;continue}if(p=t,m=t,b=y,b===0)return{startLineNumber:p,endLineNumber:m,indent:b}}w&&(k>=b?p=r:w=!1),v&&(x>=b?m=f:v=!1)}else y=k}return{startLineNumber:p,endLineNumber:m,indent:b}}getLinesBracketGuides(t,i,e,s){var n;const o=[];for(let e=t;e<=i;e++)o.push([]);const r=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new Es(t,1,i,this.textModel.getLineMaxColumn(i))).toArray();let h;e&&r.length>0&&(h=(n=xg((t<=e.lineNumber&&e.lineNumber<=i?r:this.textModel.bracketPairs.getBracketPairsInRange(Es.fromPositions(e)).toArray()).filter((t=>Es.strictContainsPosition(t.range,e))),(t=>!0)))===null||n===void 0?void 0:n.range);const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,a=new SE;for(const e of r){if(!e.closingBracketRange)continue;const n=h&&e.range.equalsRange(h);if(!n&&!s.includeInactive)continue;const r=a.getInlineClassName(e.nestingLevel,e.nestingLevelOfEqualBracketType,c)+(s.highlightActive&&n?" "+a.activeClassName:""),l=e.openingBracketRange.getStartPosition(),u=e.closingBracketRange.getStartPosition(),d=s.horizontalGuides===VC.Enabled||s.horizontalGuides===VC.EnabledForActive&&n;if(e.range.startLineNumber===e.range.endLineNumber){d&&o[e.range.startLineNumber-t].push(new BE(-1,e.openingBracketRange.getEndPosition().column,r,new DE(!1,u.column),-1,-1));continue}const f=this.getVisibleColumnFromPosition(u),g=this.getVisibleColumnFromPosition(e.openingBracketRange.getStartPosition()),A=Math.min(g,f,e.minVisibleColumnIndentation+1);let p=!1;so(this.textModel.getLineContent(e.closingBracketRange.startLineNumber))<e.closingBracketRange.startColumn-1&&(p=!0);const w=Math.max(l.lineNumber,t),m=Math.min(u.lineNumber,i),v=p?1:0;for(let i=w;i<m+v;i++)o[i-t].push(new BE(A,-1,r,null,i===l.lineNumber?l.column:-1,i===u.lineNumber?u.column:-1));d&&(l.lineNumber>=t&&g>A&&o[l.lineNumber-t].push(new BE(A,-1,r,new DE(!1,l.column),-1,-1)),u.lineNumber<=i&&f>A&&o[u.lineNumber-t].push(new BE(A,-1,r,new DE(!p,u.column),-1,-1)))}for(const t of o)t.sort(((t,i)=>t.visibleColumn-i.visibleColumn));return o}getVisibleColumnFromPosition(t){return Ey.visibleColumnFromColumn(this.textModel.getLineContent(t.lineNumber),t.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(t,i){this.assertNotDisposed();const e=this.textModel.getLineCount();if(t<1||t>e)throw new Error("Illegal value for startLineNumber");if(i<1||i>e)throw new Error("Illegal value for endLineNumber");const s=this.textModel.getOptions(),n=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(n&&n.offSide),r=new Array(i-t+1);let h=-2,c=-1,a=-2,l=-1;for(let n=t;n<=i;n++){const i=n-t,u=this._computeIndentLevel(n-1);if(u>=0)h=n-1,c=u,r[i]=Math.ceil(u/s.indentSize);else{if(h===-2){h=-1,c=-1;for(let t=n-2;t>=0;t--){const i=this._computeIndentLevel(t);if(i>=0){h=t,c=i;break}}}if(a!==-1&&(a===-2||a<n-1)){a=-1,l=-1;for(let t=n;t<e;t++){const i=this._computeIndentLevel(t);if(i>=0){a=t,l=i;break}}}r[i]=this._getIndentLevelForWhitespaceLine(o,c,l)}}return r}_getIndentLevelForWhitespaceLine(t,i,e){const s=this.textModel.getOptions();return i===-1||e===-1?0:i<e?1+Math.floor(i/s.indentSize):i===e||t?Math.ceil(e/s.indentSize):1+Math.floor(e/s.indentSize)}}class SE{constructor(){this.activeClassName="indent-active"}getInlineClassName(t,i,e){return this.getInlineClassNameOfLevel(e?i:t)}getInlineClassNameOfLevel(t){return"bracket-indent-guide lvl-"+t%30}}class FE extends Sk{constructor(t){super(),this._context=t,this._primaryPosition=null;const i=this._context.configuration.options,e=i.get(146),s=i.get(50);this._spaceWidth=s.spaceWidth,this._maxIndentLeft=e.wrappingColumn===-1?-1:e.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=i.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(t){const i=this._context.configuration.options,e=i.get(146),s=i.get(50);return this._spaceWidth=s.spaceWidth,this._maxIndentLeft=e.wrappingColumn===-1?-1:e.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=i.get(16),!0}onCursorStateChanged(t){var i;const e=t.selections[0].getPosition();return!(!((i=this._primaryPosition)===null||i===void 0)&&i.equals(e))&&(this._primaryPosition=e,!0)}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return t.scrollTopChanged}onZonesChanged(t){return!0}onLanguageConfigurationChanged(t){return!0}prepareRender(t){var i,e,s,n;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1)return void(this._renderResult=null);const o=t.visibleRange.startLineNumber,r=t.visibleRange.endLineNumber,h=t.scrollWidth,c=this._primaryPosition,a=this.getGuidesByLine(o,Math.min(r+1,this._context.viewModel.getLineCount()),c),l=[];for(let c=o;c<=r;c++){const r=c-o,u=a[r];let d="";const f=(e=(i=t.visibleRangeForPosition(new Cs(c,1)))===null||i===void 0?void 0:i.left)!==null&&e!==void 0?e:0;for(const i of u){const e=i.column===-1?f+(i.visibleColumn-1)*this._spaceWidth:t.visibleRangeForPosition(new Cs(c,i.column)).left;if(e>h||this._maxIndentLeft>0&&e>this._maxIndentLeft)break;const o=i.horizontalLine?i.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",r=i.horizontalLine?((n=(s=t.visibleRangeForPosition(new Cs(c,i.horizontalLine.endColumn)))===null||s===void 0?void 0:s.left)!==null&&n!==void 0?n:e+this._spaceWidth)-e:this._spaceWidth;d+=`<div class="core-guide ${i.className} ${o}" style="left:${e}px;width:${r}px"></div>`}l[r]=d}this._renderResult=l}getGuidesByLine(t,i,e){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(t,i,e,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?VC.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?VC.EnabledForActive:VC.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,n=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(t,i):null;let o=0,r=0,h=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&e){const s=this._context.viewModel.getActiveIndentGuide(e.lineNumber,t,i);o=s.startLineNumber,r=s.endLineNumber,h=s.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),a=[];for(let e=t;e<=i;e++){const i=new Array;a.push(i);const l=s?s[e-t]:[],u=new L(l),d=n?n[e-t]:0;for(let t=1;t<=d;t++){const s=(t-1)*c+1,n=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||l.length===0)&&o<=e&&e<=r&&t===h;i.push(...u.takeWhile((t=>t.visibleColumn<s))||[]);const a=u.peek();a&&a.visibleColumn===s&&!a.horizontalLine||i.push(new BE(s,-1,"core-guide-indent lvl-"+(t-1)%30+(n?" indent-active":""),null,-1,-1))}i.push(...u.takeWhile((t=>!0))||[])}return a}render(t,i){if(!this._renderResult)return"";const e=i-t;return e<0||e>=this._renderResult.length?"":this._renderResult[e]}}function IE(t){if(!t||!t.isTransparent())return t}Nk(((t,i)=>{const e=[{bracketColor:wx,guideColor:Cx,guideColorActive:Fx},{bracketColor:mx,guideColor:Ex,guideColorActive:Ix},{bracketColor:vx,guideColor:Bx,guideColorActive:Lx},{bracketColor:bx,guideColor:Dx,guideColorActive:Rx},{bracketColor:yx,guideColor:Mx,guideColorActive:Tx},{bracketColor:kx,guideColor:Sx,guideColorActive:Nx}],s=new SE,n=[{indentColor:Kk,indentColorActive:ix},{indentColor:$k,indentColorActive:ex},{indentColor:Xk,indentColorActive:sx},{indentColor:qk,indentColorActive:nx},{indentColor:Zk,indentColorActive:ox},{indentColor:tx,indentColorActive:rx}],o=e.map((i=>{var e,s;const n=t.getColor(i.bracketColor),o=t.getColor(i.guideColor),r=t.getColor(i.guideColorActive),h=IE((e=IE(o))!==null&&e!==void 0?e:n==null?void 0:n.transparent(.3)),c=IE((s=IE(r))!==null&&s!==void 0?s:n);if(h&&c)return{guideColor:h,guideColorActive:c}})).filter(j),r=n.map((i=>{const e=t.getColor(i.indentColor),s=t.getColor(i.indentColorActive),n=IE(e),o=IE(s);if(n&&o)return{indentColor:n,indentColorActive:o}})).filter(j);if(o.length>0){for(let t=0;t<30;t++){const e=o[t%o.length];i.addRule(`.monaco-editor .${s.getInlineClassNameOfLevel(t).replace(/ /g,".")} { --guide-color: ${e.guideColor}; --guide-color-active: ${e.guideColorActive}; }`)}i.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),i.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),i.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),i.addRule(`.monaco-editor .vertical.${s.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),i.addRule(`.monaco-editor .horizontal-top.${s.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),i.addRule(`.monaco-editor .horizontal-bottom.${s.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(r.length>0){for(let t=0;t<30;t++){const e=r[t%r.length];i.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${t} { --indent-color: ${e.indentColor}; --indent-color-active: ${e.indentColorActive}; }`)}i.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),i.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}}));class LE{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const t=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=t.left,this._clientRectScale=t.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(t,i){this._domNode=t,this.endNode=i,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class RE{constructor(){this._currentVisibleRange=new Es(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(t){this._currentVisibleRange=t}}class TE{constructor(t,i,e,s,n,o,r){this.minimalReveal=t,this.lineNumber=i,this.startColumn=e,this.endColumn=s,this.startScrollTop=n,this.stopScrollTop=o,this.scrollType=r,this.type="range",this.minLineNumber=i,this.maxLineNumber=i}}class NE{constructor(t,i,e,s,n){this.minimalReveal=t,this.selections=i,this.startScrollTop=e,this.stopScrollTop=s,this.scrollType=n,this.type="selections";let o=i[0].startLineNumber,r=i[0].endLineNumber;for(let t=1,e=i.length;t<e;t++){const e=i[t];o=Math.min(o,e.startLineNumber),r=Math.max(r,e.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=r}}class QE extends iy{constructor(t,i){super(t),this._linesContent=i,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new XC(this),this.domNode=this._visibleLines.domNode;const e=this._context.configuration,s=this._context.configuration.options,n=s.get(50),o=s.get(146);this._lineHeight=s.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=s.get(100),this._cursorSurroundingLines=s.get(29),this._cursorSurroundingLinesStyle=s.get(30),this._canUseLayerHinting=!s.get(32),this._viewLineOptions=new py(e,this._context.theme.type),ey.write(this.domNode,8),this.domNode.setClassName(`view-lines ${zx}`),Da(this.domNode,n),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Er((()=>{this._updateLineWidthsSlow()}),200),this._asyncCheckMonospaceFontAssumptions=new Er((()=>{this._checkMonospaceFontAssumptions()}),2e3),this._lastRenderedData=new RE,this._horizontalRevealRequest=null,this._stickyScrollEnabled=s.get(115).enabled,this._maxNumberStickyLines=s.get(115).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new wy(this._viewLineOptions)}onConfigurationChanged(t){this._visibleLines.onConfigurationChanged(t),t.hasChanged(146)&&(this._maxLineWidth=0);const i=this._context.configuration.options,e=i.get(50),s=i.get(146);return this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=i.get(100),this._cursorSurroundingLines=i.get(29),this._cursorSurroundingLinesStyle=i.get(30),this._canUseLayerHinting=!i.get(32),this._stickyScrollEnabled=i.get(115).enabled,this._maxNumberStickyLines=i.get(115).maxLineCount,Da(this.domNode,e),this._onOptionsMaybeChanged(),t.hasChanged(145)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const t=this._context.configuration,i=new py(t,this._context.theme.type);if(!this._viewLineOptions.equals(i)){this._viewLineOptions=i;const t=this._visibleLines.getStartLineNumber(),e=this._visibleLines.getEndLineNumber();for(let i=t;i<=e;i++)this._visibleLines.getVisibleLine(i).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(t){const i=this._visibleLines.getStartLineNumber(),e=this._visibleLines.getEndLineNumber();let s=!1;for(let t=i;t<=e;t++)s=this._visibleLines.getVisibleLine(t).onSelectionChanged()||s;return s}onDecorationsChanged(t){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let e=t;e<=i;e++)this._visibleLines.getVisibleLine(e).onDecorationsChanged()}return!0}onFlushed(t){const i=this._visibleLines.onFlushed(t);return this._maxLineWidth=0,i}onLinesChanged(t){return this._visibleLines.onLinesChanged(t)}onLinesDeleted(t){return this._visibleLines.onLinesDeleted(t)}onLinesInserted(t){return this._visibleLines.onLinesInserted(t)}onRevealRangeRequest(t){const i=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),t.source,t.minimalReveal,t.range,t.selections,t.verticalType);if(i===-1)return!1;let e=this._context.viewLayout.validateScrollPosition({scrollTop:i});t.revealHorizontal?t.range&&t.range.startLineNumber!==t.range.endLineNumber?e={scrollTop:e.scrollTop,scrollLeft:0}:t.range?this._horizontalRevealRequest=new TE(t.minimalReveal,t.range.startLineNumber,t.range.startColumn,t.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),e.scrollTop,t.scrollType):t.selections&&t.selections.length>0&&(this._horizontalRevealRequest=new NE(t.minimalReveal,t.selections,this._context.viewLayout.getCurrentScrollTop(),e.scrollTop,t.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-e.scrollTop)<=this._lineHeight?1:t.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(e,s),!0}onScrollChanged(t){if(this._horizontalRevealRequest&&t.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&t.scrollTopChanged){const i=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),e=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(t.scrollTop<i||t.scrollTop>e)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(t.scrollWidth),this._visibleLines.onScrollChanged(t)||!0}onTokensChanged(t){return this._visibleLines.onTokensChanged(t)}onZonesChanged(t){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(t)}onThemeChanged(t){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(t,i){const e=this._getViewLineDomNode(t);if(e===null)return null;const s=this._getLineNumberFor(e);if(s===-1||s<1||s>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(s)===1)return new Cs(s,1);const n=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(s<n||s>o)return null;let r=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(t,i);const h=this._context.viewModel.getLineMinColumn(s);return r<h&&(r=h),new Cs(s,r)}_getViewLineDomNode(t){for(;t&&t.nodeType===1;){if(t.className===wy.CLASS_NAME)return t;t=t.parentElement}return null}_getLineNumberFor(t){const i=this._visibleLines.getStartLineNumber(),e=this._visibleLines.getEndLineNumber();for(let s=i;s<=e;s++)if(t===this._visibleLines.getVisibleLine(s).getDomNode())return s;return-1}getLineWidth(t){const i=this._visibleLines.getStartLineNumber(),e=this._visibleLines.getEndLineNumber();if(t<i||t>e)return-1;const s=new LE(this.domNode.domNode,this._textRangeRestingSpot),n=this._visibleLines.getVisibleLine(t).getWidth(s);return this._updateLineWidthsSlowIfDomDidLayout(s),n}linesVisibleRangesForRange(t,i){if(this.shouldRender())return null;const e=t.endLineNumber,s=Es.intersectRanges(t,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;const n=[];let o=0;const r=new LE(this.domNode.domNode,this._textRangeRestingSpot);let h=0;i&&(h=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Cs(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),a=this._visibleLines.getEndLineNumber();for(let t=s.startLineNumber;t<=s.endLineNumber;t++){if(t<c||t>a)continue;const l=t===s.startLineNumber?s.startColumn:1,u=t!==s.endLineNumber,d=u?this._context.viewModel.getLineMaxColumn(t):s.endColumn,f=this._visibleLines.getVisibleLine(t).getVisibleRangesForRange(t,l,d,r);if(f){if(i&&t<e){const i=h;h=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Cs(t+1,1)).lineNumber,i!==h&&(f.ranges[f.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}n[o++]=new oy(f.outsideRenderedLine,t,ry.from(f.ranges),u)}}return this._updateLineWidthsSlowIfDomDidLayout(r),o===0?null:n}_visibleRangesForLineRange(t,i,e){if(this.shouldRender()||t<this._visibleLines.getStartLineNumber()||t>this._visibleLines.getEndLineNumber())return null;const s=new LE(this.domNode.domNode,this._textRangeRestingSpot),n=this._visibleLines.getVisibleLine(t).getVisibleRangesForRange(t,i,e,s);return this._updateLineWidthsSlowIfDomDidLayout(s),n}visibleRangeForPosition(t){const i=this._visibleRangesForLineRange(t.lineNumber,t.column,t.column);return i?new cy(i.outsideRenderedLine,i.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(t){t.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(t){const i=this._visibleLines.getStartLineNumber(),e=this._visibleLines.getEndLineNumber();let s=1,n=!0;for(let o=i;o<=e;o++){const i=this._visibleLines.getVisibleLine(o);!t||i.getWidthIsFast()?s=Math.max(s,i.getWidth(null)):n=!1}return n&&i===1&&e===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),n}_checkMonospaceFontAssumptions(){let t=-1,i=-1;const e=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let n=e;n<=s;n++){const e=this._visibleLines.getVisibleLine(n);if(e.needsMonospaceFontCheck()){const s=e.getWidth(null);s>i&&(i=s,t=n)}}if(t!==-1&&!this._visibleLines.getVisibleLine(t).monospaceAssumptionsAreValid())for(let t=e;t<=s;t++)this._visibleLines.getVisibleLine(t).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(t){if(this._visibleLines.renderLines(t),this._lastRenderedData.setCurrentVisibleRange(t.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(t.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=t.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const t=this._computeScrollLeftToReveal(i);t&&(this._isViewportWrapping||this._ensureMaxLineWidth(t.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:t.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),xt&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let e=t;e<=i;e++)if(this._visibleLines.getVisibleLine(e).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const i=this._context.viewLayout.getCurrentScrollTop()-t.bigNumbersDelta;this._linesContent.setTop(-i),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(t){const i=Math.ceil(t);this._maxLineWidth<i&&(this._maxLineWidth=i,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(t,i,e,s,n,o){const r=t.top,h=t.height,c=r+h;let a,l,u;if(n&&n.length>0){let t=n[0].startLineNumber,i=n[0].endLineNumber;for(let e=1,s=n.length;e<s;e++){const s=n[e];t=Math.min(t,s.startLineNumber),i=Math.max(i,s.endLineNumber)}a=!1,l=this._context.viewLayout.getVerticalOffsetForLineNumber(t),u=this._context.viewLayout.getVerticalOffsetForLineNumber(i)+this._lineHeight}else{if(!s)return-1;a=!0,l=this._context.viewLayout.getVerticalOffsetForLineNumber(s.startLineNumber),u=this._context.viewLayout.getVerticalOffsetForLineNumber(s.endLineNumber)+this._lineHeight}let d,f=0,g=0;if((i==="mouse"||e)&&this._cursorSurroundingLinesStyle==="default")e||(f=this._lineHeight);else{const t=Math.min(h/this._lineHeight/2,this._cursorSurroundingLines);f=this._stickyScrollEnabled?Math.max(t,this._maxNumberStickyLines)*this._lineHeight:t*this._lineHeight,g=Math.max(0,t-1)*this._lineHeight}if(e||o!==0&&o!==4||(g+=this._lineHeight),l-=f,u+=g,u-l>h){if(!a)return-1;d=l}else if(o===5||o===6)if(o===6&&r<=l&&u<=c)d=r;else{const t=l-Math.max(5*this._lineHeight,.2*h),i=u-h;d=Math.max(i,t)}else if(o===1||o===2)if(o===2&&r<=l&&u<=c)d=r;else{const t=(l+u)/2;d=Math.max(0,t-h/2)}else d=this._computeMinimumScrolling(r,c,l,u,o===3,o===4);return d}_computeScrollLeftToReveal(t){const i=this._context.viewLayout.getCurrentViewport(),e=this._context.configuration.options.get(145),s=i.left,n=s+i.width-e.verticalScrollbarWidth;let o=1073741824,r=0;if(t.type==="range"){const i=this._visibleRangesForLineRange(t.lineNumber,t.startColumn,t.endColumn);if(!i)return null;for(const t of i.ranges)o=Math.min(o,Math.round(t.left)),r=Math.max(r,Math.round(t.left+t.width))}else for(const i of t.selections){if(i.startLineNumber!==i.endLineNumber)return null;const t=this._visibleRangesForLineRange(i.startLineNumber,i.startColumn,i.endColumn);if(!t)return null;for(const i of t.ranges)o=Math.min(o,Math.round(i.left)),r=Math.max(r,Math.round(i.left+i.width))}return t.minimalReveal||(o=Math.max(0,o-QE.HORIZONTAL_EXTRA_PX),r+=this._revealHorizontalRightPadding),t.type==="selections"&&r-o>i.width?null:{scrollLeft:this._computeMinimumScrolling(s,n,o,r),maxHorizontalOffset:r}}_computeMinimumScrolling(t,i,e,s,n,o){n=!!n,o=!!o;const r=(i|=0)-(t|=0);return(s|=0)-(e|=0)<r?n?e:o?Math.max(0,s-r):e<t?e:s>i?Math.max(0,s-r):t:e}}QE.HORIZONTAL_EXTRA_PX=30;class OE extends vE{constructor(t){super(),this._context=t;const i=this._context.configuration.options.get(145);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(t){const i=this._context.configuration.options.get(145);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return t.scrollTopChanged}onZonesChanged(t){return!0}_getDecorations(t){var i,e;const s=t.getDecorationsInViewport(),n=[];let o=0;for(let t=0,r=s.length;t<r;t++){const r=s[t],h=r.options.linesDecorationsClassName,c=r.options.zIndex;h&&(n[o++]=new pE(r.range.startLineNumber,r.range.endLineNumber,h,(i=r.options.linesDecorationsTooltip)!==null&&i!==void 0?i:null,c));const a=r.options.firstLineDecorationClassName;a&&(n[o++]=new pE(r.range.startLineNumber,r.range.startLineNumber,a,(e=r.options.linesDecorationsTooltip)!==null&&e!==void 0?e:null,c))}return n}prepareRender(t){const i=t.visibleRange.startLineNumber,e=t.visibleRange.endLineNumber,s=this._render(i,e,this._getDecorations(t)),n='" style="left:'+this._decorationsLeft.toString()+"px;width:"+this._decorationsWidth.toString()+'px;"></div>',o=[];for(let t=i;t<=e;t++){const e=t-i,r=s[e].getDecorations();let h="";for(const t of r){let i='<div class="cldr '+t.className;t.tooltip!==null&&(i+='" title="'+t.tooltip),i+=n,h+=i}o[e]=h}this._renderResult=o}render(t,i){return this._renderResult?this._renderResult[i-t]:""}}class zE extends vE{constructor(t){super(),this._context=t,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(t){return!0}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return t.scrollTopChanged}onZonesChanged(t){return!0}_getDecorations(t){const i=t.getDecorationsInViewport(),e=[];let s=0;for(let t=0,n=i.length;t<n;t++){const n=i[t],o=n.options.marginClassName,r=n.options.zIndex;o&&(e[s++]=new pE(n.range.startLineNumber,n.range.endLineNumber,o,null,r))}return e}prepareRender(t){const i=t.visibleRange.startLineNumber,e=t.visibleRange.endLineNumber,s=this._render(i,e,this._getDecorations(t)),n=[];for(let t=i;t<=e;t++){const e=t-i,o=s[e].getDecorations();let r="";for(const t of o)r+='<div class="cmdr '+t.className+'" style=""></div>';n[e]=r}this._renderResult=n}render(t,i){return this._renderResult?this._renderResult[i-t]:""}}class UE{constructor(t,i,e,s){this._rgba8Brand=void 0,this.r=UE._clamp(t),this.g=UE._clamp(i),this.b=UE._clamp(e),this.a=UE._clamp(s)}equals(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}static _clamp(t){return t<0?0:t>255?255:0|t}}UE.Empty=new UE(0,0,0,0);class HE extends te{static getInstance(){return this._INSTANCE||(this._INSTANCE=new HE),this._INSTANCE}constructor(){super(),this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Gs.onDidChange((t=>{t.changedColorMap&&this._updateColorMap()})))}_updateColorMap(){const t=Gs.getColorMap();if(!t)return this._colors=[UE.Empty],void(this._backgroundIsLight=!0);this._colors=[UE.Empty];for(let i=1;i<t.length;i++){const e=t[i].rgba;this._colors[i]=new UE(e.r,e.g,e.b,Math.round(255*e.a))}const i=t[2].getRelativeLuminance();this._backgroundIsLight=i>=.5,this._onDidChange.fire(void 0)}getColor(t){return(t<1||t>=this._colors.length)&&(t=2),this._colors[t]}backgroundIsLight(){return this._backgroundIsLight}}HE._INSTANCE=null;const PE=(()=>{const t=[];for(let i=32;i<=126;i++)t.push(i);return t.push(65533),t})();class jE{constructor(t,i){this.scale=i,this._minimapCharRendererBrand=void 0,this.charDataNormal=jE.soften(t,.8),this.charDataLight=jE.soften(t,50/60)}static soften(t,i){const e=new Uint8ClampedArray(t.length);for(let s=0,n=t.length;s<n;s++)e[s]=Ff(t[s]*i);return e}renderChar(t,i,e,s,n,o,r,h,c,a,l){const u=1*this.scale,d=2*this.scale,f=l?1:d;if(i+u>t.width||e+f>t.height)return void console.warn("bad render request outside image data");const g=a?this.charDataLight:this.charDataNormal,A=((t,i)=>(t-=32)<0||t>96?i<=2?(t+96)%96:95:t)(s,c),p=4*t.width,w=r.r,m=r.g,v=r.b,b=n.r-w,y=n.g-m,k=n.b-v,x=Math.max(o,h),C=t.data;let E=A*u*d,B=e*p+4*i;for(let t=0;t<f;t++){let t=B;for(let i=0;i<u;i++){const i=g[E++]/255*(o/255);C[t++]=w+b*i,C[t++]=m+y*i,C[t++]=v+k*i,C[t++]=x}B+=p}}blockRenderChar(t,i,e,s,n,o,r,h){const c=1*this.scale,a=2*this.scale,l=h?1:a;if(i+c>t.width||e+l>t.height)return void console.warn("bad render request outside image data");const u=4*t.width,d=n/255*.5,f=o.r,g=o.g,A=o.b,p=f+(s.r-f)*d,w=g+(s.g-g)*d,m=A+(s.b-A)*d,v=Math.max(n,r),b=t.data;let y=e*u+4*i;for(let t=0;t<l;t++){let t=y;for(let i=0;i<c;i++)b[t++]=p,b[t++]=w,b[t++]=m,b[t++]=v;y+=u}}}const WE={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},YE=t=>{const i=new Uint8ClampedArray(t.length/2);for(let e=0;e<t.length;e+=2)i[e>>1]=WE[t[e]]<<4|15&WE[t[e+1]];return i},_E={1:Gi((()=>YE("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792"))),2:Gi((()=>YE("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126")))};class VE{static create(t,i){if(this.lastCreated&&t===this.lastCreated.scale&&i===this.lastFontFamily)return this.lastCreated;let e;return e=_E[t]?new jE(_E[t](),t):VE.createFromSampleData(VE.createSampleData(i).data,t),this.lastFontFamily=i,this.lastCreated=e,e}static createSampleData(t){const i=document.createElement("canvas"),e=i.getContext("2d");i.style.height="16px",i.height=16,i.width=960,i.style.width="960px",e.fillStyle="#ffffff",e.font=`bold 16px ${t}`,e.textBaseline="middle";let s=0;for(const t of PE)e.fillText(String.fromCharCode(t),s,8),s+=10;return e.getImageData(0,0,960,16)}static createFromSampleData(t,i){if(t.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const e=VE._downsample(t,i);return new jE(e,i)}static _downsampleChar(t,i,e,s,n){const o=1*n,r=2*n;let h=s,c=0;for(let s=0;s<r;s++){const n=s/r*16,a=(s+1)/r*16;for(let s=0;s<o;s++){const r=s/o*10,l=(s+1)/o*10;let u=0,d=0;for(let e=n;e<a;e++){const s=i+3840*Math.floor(e),n=1-(e-Math.floor(e));for(let i=r;i<l;i++){const e=1-(i-Math.floor(i)),o=s+4*Math.floor(i),r=e*n;d+=r,u+=t[o]*t[o+3]/255*r}}const f=u/d;c=Math.max(c,f),e[h++]=Ff(f)}}return c}static _downsample(t,i){const e=2*i*1*i,s=96*e,n=new Uint8ClampedArray(s);let o=0,r=0,h=0;for(let s=0;s<96;s++)h=Math.max(h,this._downsampleChar(t,r,n,o,i)),o+=e,r+=40;if(h>0){const t=255/h;for(let i=0;i<s;i++)n[i]*=t}return n}}const JE=yt?'"Segoe WPC", "Segoe UI", sans-serif':kt?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif';class GE{constructor(t,i,e){const s=t.options,n=s.get(143),o=s.get(145),r=o.minimap,h=s.get(50),c=s.get(73);this.renderMinimap=r.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=r.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(105),this.paddingTop=s.get(84).top,this.paddingBottom=s.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=n,this.typicalHalfwidthCharacterWidth=h.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(67),this.minimapLeft=r.minimapLeft,this.minimapWidth=r.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=r.minimapCanvasInnerWidth,this.canvasInnerHeight=r.minimapCanvasInnerHeight,this.canvasOuterWidth=r.minimapCanvasOuterWidth,this.canvasOuterHeight=r.minimapCanvasOuterHeight,this.isSampling=r.minimapIsSampling,this.editorHeight=o.height,this.fontScale=r.minimapScale,this.minimapLineHeight=r.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=JE,this.sectionHeaderFontSize=c.sectionHeaderFontSize*n,this.sectionHeaderFontColor=GE._getSectionHeaderColor(i,e.getColor(1)),this.charRenderer=Gi((()=>VE.create(this.fontScale,h.fontFamily))),this.defaultBackgroundColor=e.getColor(2),this.backgroundColor=GE._getMinimapBackground(i,this.defaultBackgroundColor),this.foregroundAlpha=GE._getMinimapForegroundOpacity(i)}static _getMinimapBackground(t,i){const e=t.getColor(gv);return e?new UE(e.rgba.r,e.rgba.g,e.rgba.b,Math.round(255*e.rgba.a)):i}static _getMinimapForegroundOpacity(t){const i=t.getColor(Av);return i?UE._clamp(Math.round(255*i.rgba.a)):255}static _getSectionHeaderColor(t,i){const e=t.getColor(hm);return e?new UE(e.rgba.r,e.rgba.g,e.rgba.b,Math.round(255*e.rgba.a)):i}equals(t){return this.renderMinimap===t.renderMinimap&&this.size===t.size&&this.minimapHeightIsEditorHeight===t.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===t.scrollBeyondLastLine&&this.paddingTop===t.paddingTop&&this.paddingBottom===t.paddingBottom&&this.showSlider===t.showSlider&&this.autohide===t.autohide&&this.pixelRatio===t.pixelRatio&&this.typicalHalfwidthCharacterWidth===t.typicalHalfwidthCharacterWidth&&this.lineHeight===t.lineHeight&&this.minimapLeft===t.minimapLeft&&this.minimapWidth===t.minimapWidth&&this.minimapHeight===t.minimapHeight&&this.canvasInnerWidth===t.canvasInnerWidth&&this.canvasInnerHeight===t.canvasInnerHeight&&this.canvasOuterWidth===t.canvasOuterWidth&&this.canvasOuterHeight===t.canvasOuterHeight&&this.isSampling===t.isSampling&&this.editorHeight===t.editorHeight&&this.fontScale===t.fontScale&&this.minimapLineHeight===t.minimapLineHeight&&this.minimapCharWidth===t.minimapCharWidth&&this.sectionHeaderFontSize===t.sectionHeaderFontSize&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(t.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(t.backgroundColor)&&this.foregroundAlpha===t.foregroundAlpha}}class KE{constructor(t,i,e,s,n,o,r,h,c){this.scrollTop=t,this.scrollHeight=i,this.sliderNeeded=e,this._computedSliderRatio=s,this.sliderTop=n,this.sliderHeight=o,this.topPaddingLineCount=r,this.startLineNumber=h,this.endLineNumber=c}getDesiredScrollTopFromDelta(t){return Math.round(this.scrollTop+t/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(t){return Math.round((t-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(t){const i=Math.max(this.startLineNumber,t.startLineNumber),e=Math.min(this.endLineNumber,t.endLineNumber);return i>e?null:[i,e]}getYForLineNumber(t,i){return+(t-this.startLineNumber+this.topPaddingLineCount)*i}static create(t,i,e,s,n,o,r,h,c,a,l){const u=t.pixelRatio,d=t.minimapLineHeight,f=Math.floor(t.canvasInnerHeight/d),g=t.lineHeight;if(t.minimapHeightIsEditorHeight){let i=h*t.lineHeight+t.paddingTop+t.paddingBottom;t.scrollBeyondLastLine&&(i+=Math.max(0,n-t.lineHeight-t.paddingBottom));const e=Math.max(1,Math.floor(n*n/i)),s=Math.max(0,t.minimapHeight-e),o=s/(a-n),l=c*o,u=s>0,d=Math.floor(t.canvasInnerHeight/t.minimapLineHeight),f=Math.floor(t.paddingTop/t.lineHeight);return new KE(c,a,u,o,l,e,f,1,Math.min(r,d))}let A;if(o&&e!==r){const t=e-i+1;A=Math.floor(t*d/u)}else{const t=n/g;A=Math.floor(t*d/u)}const p=Math.floor(t.paddingTop/g);let w,m=Math.floor(t.paddingBottom/g);if(t.scrollBeyondLastLine){const t=n/g;m=Math.max(m,t-1)}m>0?w=(p+r+m-n/g-1)*d/u:w=Math.max(0,(p+r)*d/u-A),w=Math.min(t.minimapHeight-A,w);const v=w/(a-n),b=c*v;if(f>=p+r+m)return new KE(c,a,w>0,v,b,A,p,1,r);{let e,n;e=i>1?i+p:Math.max(1,c/g);let o=Math.max(1,Math.floor(e-b*u/d));o<p?(n=p-o+1,o=1):(n=0,o=Math.max(1,o-p)),l&&l.scrollHeight===a&&(l.scrollTop>c&&(o=Math.min(o,l.startLineNumber),n=Math.max(n,l.topPaddingLineCount)),l.scrollTop<c&&(o=Math.max(o,l.startLineNumber),n=Math.min(n,l.topPaddingLineCount)));const h=Math.min(r,o-n+f-1),w=(c-s)/g;let m;return m=c>=t.paddingTop?(i-o+n+w)*d/u:c/t.paddingTop*(n+w)*d/u,new KE(c,a,!0,v,m,A,n,o,h)}}}class $E{constructor(t){this.dy=t}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}$E.INVALID=new $E(-1);class XE{constructor(t,i,e){this.renderedLayout=t,this._imageData=i,this._renderedLines=new $C((()=>$E.INVALID)),this._renderedLines._set(t.startLineNumber,e)}linesEquals(t){if(!this.scrollEquals(t))return!1;const i=this._renderedLines._get().lines;for(let t=0,e=i.length;t<e;t++)if(i[t].dy===-1)return!1;return!0}scrollEquals(t){return this.renderedLayout.startLineNumber===t.startLineNumber&&this.renderedLayout.endLineNumber===t.endLineNumber}_get(){const t=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:t.rendLineNumberStart,lines:t.lines}}onLinesChanged(t,i){return this._renderedLines.onLinesChanged(t,i)}onLinesDeleted(t,i){this._renderedLines.onLinesDeleted(t,i)}onLinesInserted(t,i){this._renderedLines.onLinesInserted(t,i)}onTokensChanged(t){return this._renderedLines.onTokensChanged(t)}}class qE{constructor(t,i,e,s){this._backgroundFillData=qE._createBackgroundFillData(i,e,s),this._buffers=[t.createImageData(i,e),t.createImageData(i,e)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const t=this._buffers[this._lastUsedBuffer];return t.data.set(this._backgroundFillData),t}static _createBackgroundFillData(t,i,e){const s=e.r,n=e.g,o=e.b,r=e.a,h=new Uint8ClampedArray(t*i*4);let c=0;for(let e=0;e<i;e++)for(let i=0;i<t;i++)h[c]=s,h[c+1]=n,h[c+2]=o,h[c+3]=r,c+=4;return h}}class ZE{static compute(t,i,e){if(t.renderMinimap===0||!t.isSampling)return[null,[]];const{minimapLineCount:s}=bi.computeContainedMinimapLineCount({viewLineCount:i,scrollBeyondLastLine:t.scrollBeyondLastLine,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:t.editorHeight,lineHeight:t.lineHeight,pixelRatio:t.pixelRatio}),n=i/s,o=n/2;if(!e||e.minimapLines.length===0){const t=[];if(t[0]=1,s>1){for(let i=0,e=s-1;i<e;i++)t[i]=Math.round(i*n+o);t[s-1]=i}return[new ZE(n,t),[]]}const r=e.minimapLines,h=r.length,c=[];let a=0,l=0,u=1,d=[],f=null;for(let t=0;t<s;t++){const e=Math.max(u,Math.round(t*n)),g=Math.max(e,Math.round((t+1)*n));for(;a<h&&r[a]<e;){if(d.length<10){const t=a+1+l;f&&f.type==="deleted"&&f._oldIndex===a-1?f.deleteToLineNumber++:(f={type:"deleted",_oldIndex:a,deleteFromLineNumber:t,deleteToLineNumber:t},d.push(f)),l--}a++}let A;if(a<h&&r[a]<=g)A=r[a],a++;else if(A=t===0?1:t+1===s?i:Math.round(t*n+o),d.length<10){const i=a+1+l;f&&f.type==="inserted"&&f._i===t-1?f.insertToLineNumber++:(f={type:"inserted",_i:t,insertFromLineNumber:i,insertToLineNumber:i},d.push(f)),l++}c[t]=A,u=A}if(d.length<10)for(;a<h;){const t=a+1+l;f&&f.type==="deleted"&&f._oldIndex===a-1?f.deleteToLineNumber++:(f={type:"deleted",_oldIndex:a,deleteFromLineNumber:t,deleteToLineNumber:t},d.push(f)),l--,a++}else d=[{type:"flush"}];return[new ZE(n,c),d]}constructor(t,i){this.samplingRatio=t,this.minimapLines=i}modelLineToMinimapLine(t){return Math.min(this.minimapLines.length,Math.max(1,Math.round(t/this.samplingRatio)))}modelLineRangeToMinimapLineRange(t,i){let e=this.modelLineToMinimapLine(t)-1;for(;e>0&&this.minimapLines[e-1]>=t;)e--;let s=this.modelLineToMinimapLine(i)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=i;)s++;if(e===s){const s=this.minimapLines[e];if(s<t||s>i)return null}return[e+1,s+1]}decorationLineRangeToMinimapLineRange(t,i){let e=this.modelLineToMinimapLine(t),s=this.modelLineToMinimapLine(i);return t!==i&&s===e&&(s===this.minimapLines.length?e>1&&e--:s++),[e,s]}onLinesDeleted(t){const i=t.toLineNumber-t.fromLineNumber+1;let e=this.minimapLines.length,s=0;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<t.fromLineNumber);n--)this.minimapLines[n]<=t.toLineNumber?(this.minimapLines[n]=Math.max(1,t.fromLineNumber-1),e=Math.min(e,n),s=Math.max(s,n)):this.minimapLines[n]-=i;return[e,s]}onLinesInserted(t){const i=t.toLineNumber-t.fromLineNumber+1;for(let e=this.minimapLines.length-1;e>=0&&!(this.minimapLines[e]<t.fromLineNumber);e--)this.minimapLines[e]+=i}}class tB extends iy{constructor(t){super(t),this._sectionHeaderCache=new Kf(10,1.5),this.tokensColorTracker=HE.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new GE(this._context.configuration,this._context.theme,this.tokensColorTracker);const[i]=ZE.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=i,this._shouldCheckSampling=!1,this._actual=new iB(t.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const t=new GE(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(t)&&(this.options=t,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(t){return this._onOptionsMaybeChanged()}onCursorStateChanged(t){return this._selections=t.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(t){return!!t.affectsMinimap&&this._actual.onDecorationsChanged()}onFlushed(t){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(t){if(this._samplingState){const i=this._samplingState.modelLineRangeToMinimapLineRange(t.fromLineNumber,t.fromLineNumber+t.count-1);return!!i&&this._actual.onLinesChanged(i[0],i[1]-i[0]+1)}return this._actual.onLinesChanged(t.fromLineNumber,t.count)}onLinesDeleted(t){if(this._samplingState){const[i,e]=this._samplingState.onLinesDeleted(t);return i<=e&&this._actual.onLinesChanged(i+1,e-i+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(t.fromLineNumber,t.toLineNumber)}onLinesInserted(t){return this._samplingState?(this._samplingState.onLinesInserted(t),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(t.fromLineNumber,t.toLineNumber)}onScrollChanged(t){return this._actual.onScrollChanged()}onThemeChanged(t){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(t){if(this._samplingState){const i=[];for(const e of t.ranges){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);t&&i.push({fromLineNumber:t[0],toLineNumber:t[1]})}return!!i.length&&this._actual.onTokensChanged(i)}return this._actual.onTokensChanged(t.ranges)}onTokensColorsChanged(t){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(t){return this._actual.onZonesChanged()}prepareRender(t){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(t){let i=t.visibleRange.startLineNumber,e=t.visibleRange.endLineNumber;this._samplingState&&(i=this._samplingState.modelLineToMinimapLine(i),e=this._samplingState.modelLineToMinimapLine(e));const s={viewportContainsWhitespaceGaps:t.viewportData.whitespaceViewportData.length>0,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,viewportStartLineNumber:i,viewportEndLineNumber:e,viewportStartLineNumberVerticalOffset:t.getVerticalOffsetForLineNumber(i),scrollTop:t.scrollTop,scrollLeft:t.scrollLeft,viewportWidth:t.viewportWidth,viewportHeight:t.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const t=!!this._samplingState,[i,e]=ZE.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=i,t&&this._samplingState)for(const t of e)switch(t.type){case"deleted":this._actual.onLinesDeleted(t.deleteFromLineNumber,t.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(t.insertFromLineNumber,t.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(t){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[t-1]):this._context.viewModel.getLineContent(t)}getLineMaxColumn(t){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[t-1]):this._context.viewModel.getLineMaxColumn(t)}getMinimapLinesRenderingData(t,i,e){if(this._samplingState){const s=[];for(let n=0,o=i-t+1;n<o;n++)e[n]?s[n]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[t+n-1]):s[n]=null;return s}return this._context.viewModel.getMinimapLinesRenderingData(t,i,e).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const t of this._selections){const[i,e]=this._samplingState.decorationLineRangeToMinimapLineRange(t.startLineNumber,t.endLineNumber);this._minimapSelections.push(new Bs(i,t.startColumn,e,t.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(t,i){const e=this._getMinimapDecorationsInViewport(t,i).filter((t=>{var i;return!(!((i=t.options.minimap)===null||i===void 0)&&i.sectionHeaderStyle)}));if(this._samplingState){const t=[];for(const i of e){if(!i.options.minimap)continue;const e=i.range,s=this._samplingState.modelLineToMinimapLine(e.startLineNumber),n=this._samplingState.modelLineToMinimapLine(e.endLineNumber);t.push(new Fp(new Es(s,e.startColumn,n,e.endColumn),i.options))}return t}return e}getSectionHeaderDecorationsInViewport(t,i){const e=this.options.minimapLineHeight,s=this.options.sectionHeaderFontSize/e;return t=Math.floor(Math.max(1,t-s)),this._getMinimapDecorationsInViewport(t,i).filter((t=>{var i;return!!(!((i=t.options.minimap)===null||i===void 0)&&i.sectionHeaderStyle)}))}_getMinimapDecorationsInViewport(t,i){let e;if(this._samplingState){const s=this._samplingState.minimapLines[t-1],n=this._samplingState.minimapLines[i-1];e=new Es(s,1,n,this._context.viewModel.getLineMaxColumn(n))}else e=new Es(t,1,i,this._context.viewModel.getLineMaxColumn(i));return this._context.viewModel.getMinimapDecorationsInRange(e)}getSectionHeaderText(t,i){var e;const s=(e=t.options.minimap)===null||e===void 0?void 0:e.sectionHeaderText;if(!s)return null;const n=this._sectionHeaderCache.get(s);if(n)return n;const o=i(s);return this._sectionHeaderCache.set(s,o),o}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(t){this._samplingState&&(t=this._samplingState.minimapLines[t-1]),this._context.viewModel.revealRange("mouse",!1,new Es(t,1,t,1),1,0)}setScrollTop(t){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:t},1)}}class iB extends te{constructor(t,i){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=t,this._model=i,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(lv),this._domNode=Ba(document.createElement("div")),ey.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Ba(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Ba(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Ba(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Ba(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Ba(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=cc(this._domNode.domNode,$c.POINTER_DOWN,(t=>{if(t.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(t.button===0&&this._lastRenderData){const i=yc(this._slider.domNode),e=i.top+i.height/2;this._startSliderDragging(t,e,this._lastRenderData.renderedLayout)}return}const i=this._model.options.minimapLineHeight,e=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*t.offsetY;let s=Math.floor(e/i)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;s=Math.min(s,this._model.getLineCount()),this._model.revealLineNumber(s)})),this._sliderPointerMoveMonitor=new Lw,this._sliderPointerDownListener=cc(this._slider.domNode,$c.POINTER_DOWN,(t=>{t.preventDefault(),t.stopPropagation(),t.button===0&&this._lastRenderData&&this._startSliderDragging(t,t.pageY,this._lastRenderData.renderedLayout)})),this._gestureDisposable=Wy.addTarget(this._domNode.domNode),this._sliderTouchStartListener=rc(this._domNode.domNode,Py.Start,(t=>{t.preventDefault(),t.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(t))}),{passive:!1}),this._sliderTouchMoveListener=rc(this._domNode.domNode,Py.Change,(t=>{t.preventDefault(),t.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(t)}),{passive:!1}),this._sliderTouchEndListener=cc(this._domNode.domNode,Py.End,(t=>{t.preventDefault(),t.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)}))}_startSliderDragging(t,i,e){if(!(t.target&&t.target instanceof Element))return;const s=t.pageX;this._slider.toggleClassName("active",!0);const n=(t,n)=>{const o=yc(this._domNode.domNode),r=Math.min(Math.abs(n-s),Math.abs(n-o.left),Math.abs(n-o.left-o.width));if(yt&&r>140)return void this._model.setScrollTop(e.scrollTop);const h=t-i;this._model.setScrollTop(e.getDesiredScrollTopFromDelta(h))};t.pageY!==i&&n(t.pageY,s),this._sliderPointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,(t=>n(t.pageY,t.pageX)),(()=>{this._slider.toggleClassName("active",!1)}))}scrollDueToTouchEvent(t){const i=this._domNode.domNode.getBoundingClientRect().top,e=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(t.pageY-i);this._model.setScrollTop(e)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const t=["minimap"];return this._model.options.showSlider==="always"?t.push("slider-always"):t.push("slider-mouseover"),this._model.options.autohide&&t.push("autohide"),t.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new qE(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(t,i){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(t,i)}onLinesDeleted(t,i){var e;return(e=this._lastRenderData)===null||e===void 0||e.onLinesDeleted(t,i),!0}onLinesInserted(t,i){var e;return(e=this._lastRenderData)===null||e===void 0||e.onLinesInserted(t,i),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(lv),this._renderDecorations=!0,!0}onTokensChanged(t){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(t)}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(t){if(this._model.options.renderMinimap===0)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);t.scrollLeft+t.viewportWidth>=t.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=KE.create(this._model.options,t.viewportStartLineNumber,t.viewportEndLineNumber,t.viewportStartLineNumberVerticalOffset,t.viewportHeight,t.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),t.scrollTop,t.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(t){if(this._renderDecorations){this._renderDecorations=!1;const i=this._model.getSelections();i.sort(Es.compareRangesUsingStarts);const e=this._model.getMinimapDecorationsInViewport(t.startLineNumber,t.endLineNumber);e.sort(((t,i)=>(t.options.zIndex||0)-(i.options.zIndex||0)));const{canvasInnerWidth:s,canvasInnerHeight:n}=this._model.options,o=this._model.options.minimapLineHeight,r=this._model.options.minimapCharWidth,h=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,n);const a=new eB(t.startLineNumber,t.endLineNumber,!1);this._renderSelectionLineHighlights(c,i,a,t,o),this._renderDecorationsLineHighlights(c,e,a,t,o);const l=new eB(t.startLineNumber,t.endLineNumber,null);this._renderSelectionsHighlights(c,i,l,t,o,h,r,s),this._renderDecorationsHighlights(c,e,l,t,o,h,r,s),this._renderSectionHeaders(t)}}_renderSelectionLineHighlights(t,i,e,s,n){if(!this._selectionColor||this._selectionColor.isTransparent())return;t.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,r=0;for(const h of i){const i=s.intersectWithViewport(h);if(!i)continue;const[c,a]=i;for(let t=c;t<=a;t++)e.set(t,!0);const l=s.getYForLineNumber(c,n),u=s.getYForLineNumber(a,n);r>=l||(r>o&&t.fillRect(8,o,t.canvas.width,r-o),o=l),r=u}r>o&&t.fillRect(8,o,t.canvas.width,r-o)}_renderDecorationsLineHighlights(t,i,e,s,n){const o=new Map;for(let r=i.length-1;r>=0;r--){const h=i[r],c=h.options.minimap;if(!c||c.position!==1)continue;const a=s.intersectWithViewport(h.range);if(!a)continue;const[l,u]=a,d=c.getColor(this._theme.value);if(!d||d.isTransparent())continue;let f=o.get(d.toString());f||(f=d.transparent(.5).toString(),o.set(d.toString(),f)),t.fillStyle=f;for(let i=l;i<=u;i++){if(e.has(i))continue;e.set(i,!0);const o=s.getYForLineNumber(l,n);t.fillRect(8,o,t.canvas.width,n)}}}_renderSelectionsHighlights(t,i,e,s,n,o,r,h){if(this._selectionColor&&!this._selectionColor.isTransparent())for(const c of i){const i=s.intersectWithViewport(c);if(!i)continue;const[a,l]=i;for(let i=a;i<=l;i++)this.renderDecorationOnLine(t,e,c,this._selectionColor,s,i,n,n,o,r,h)}}_renderDecorationsHighlights(t,i,e,s,n,o,r,h){for(const c of i){const i=c.options.minimap;if(!i)continue;const a=s.intersectWithViewport(c.range);if(!a)continue;const[l,u]=a,d=i.getColor(this._theme.value);if(d&&!d.isTransparent())for(let a=l;a<=u;a++)switch(i.position){case 1:this.renderDecorationOnLine(t,e,c.range,d,s,a,n,n,o,r,h);continue;case 2:{const i=s.getYForLineNumber(a,n);this.renderDecoration(t,d,2,i,2,n);continue}}}}renderDecorationOnLine(t,i,e,s,n,o,r,h,c,a,l){const u=n.getYForLineNumber(o,h);if(u+r<0||u>this._model.options.canvasInnerHeight)return;const{startLineNumber:d,endLineNumber:f}=e,g=d===o?e.startColumn:1,A=f===o?e.endColumn:this._model.getLineMaxColumn(o),p=this.getXOffsetForPosition(i,o,g,c,a,l),w=this.getXOffsetForPosition(i,o,A,c,a,l);this.renderDecoration(t,s,p,u,w-p,r)}getXOffsetForPosition(t,i,e,s,n,o){if(e===1)return 8;if((e-1)*n>=o)return o;let r=t.get(i);if(!r){const e=this._model.getLineContent(i);r=[8];let h=8;for(let t=1;t<e.length+1;t++){const i=e.charCodeAt(t-1),c=h+(i===9?s*n:Lo(i)?2*n:n);if(c>=o){r[t]=o;break}r[t]=c,h=c}t.set(i,r)}return e-1<r.length?r[e-1]:o}renderDecoration(t,i,e,s,n,o){t.fillStyle=i&&i.toString()||"",t.fillRect(e,s,n,o)}_renderSectionHeaders(t){var i;const e=this._model.options.minimapLineHeight,s=this._model.options.sectionHeaderFontSize,n=1.5*s,{canvasInnerWidth:o}=this._model.options,r=this._model.options.backgroundColor,h=`rgb(${r.r} ${r.g} ${r.b} / .7)`,c=this._model.options.sectionHeaderFontColor,a=`rgb(${c.r} ${c.g} ${c.b})`,l=a,u=this._decorationsCanvas.domNode.getContext("2d");u.font=s+"px "+this._model.options.sectionHeaderFontFamily,u.strokeStyle=l,u.lineWidth=.2;const d=this._model.getSectionHeaderDecorationsInViewport(t.startLineNumber,t.endLineNumber);d.sort(((t,i)=>t.range.startLineNumber-i.range.startLineNumber));const f=iB._fitSectionHeader.bind(null,u,o-8);for(const r of d){const c=t.getYForLineNumber(r.range.startLineNumber,e)+s,l=c-s,d=l+2,g=this._model.getSectionHeaderText(r,f);iB._renderSectionLabel(u,g,((i=r.options.minimap)===null||i===void 0?void 0:i.sectionHeaderStyle)===2,h,a,o,l,n,c,d)}}static _fitSectionHeader(t,i,e){if(!e)return e;const s=t.measureText(e).width,n=t.measureText("…").width;if(s<=i||s<=n)return e;const o=e.length,r=s/e.length,h=Math.floor((i-n)/r)-1;let c=Math.ceil(h/2);for(;c>0&&/\s/.test(e[c-1]);)--c;return e.substring(0,c)+"…"+e.substring(o-(h-c))}static _renderSectionLabel(t,i,e,s,n,o,r,h,c,a){i&&(t.fillStyle=s,t.fillRect(0,r,o,h),t.fillStyle=n,t.fillText(i,8,c)),e&&(t.beginPath(),t.moveTo(0,a),t.lineTo(o,a),t.closePath(),t.stroke())}renderLines(t){const i=t.startLineNumber,e=t.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(t)){const i=this._lastRenderData._get();return new XE(t,i.imageData,i.lines)}const n=this._getBuffer();if(!n)return null;const[o,r,h]=iB._renderUntouchedLines(n,t.topPaddingLineCount,i,e,s,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(i,e,h),a=this._model.getOptions().tabSize,l=this._model.options.defaultBackgroundColor,u=this._model.options.backgroundColor,d=this._model.options.foregroundAlpha,f=this._model.tokensColorTracker,g=f.backgroundIsLight(),A=this._model.options.renderMinimap,p=this._model.options.charRenderer(),w=this._model.options.fontScale,m=this._model.options.minimapCharWidth,v=(A===1?2:3)*w,b=s>v?Math.floor((s-v)/2):0,y=u.a/255,k=new UE(Math.round((u.r-l.r)*y+l.r),Math.round((u.g-l.g)*y+l.g),Math.round((u.b-l.b)*y+l.b),255);let x=t.topPaddingLineCount*s;const C=[];for(let t=0,o=e-i+1;t<o;t++)h[t]&&iB._renderLine(n,k,u.a,g,A,m,f,d,p,x,b,a,c[t],w,s),C[t]=new $E(x),x+=s;const E=o===-1?0:o,B=(r===-1?n.height:r)-E;return this._canvas.domNode.getContext("2d").putImageData(n,0,0,0,E,n.width,B),new XE(t,n,C)}static _renderUntouchedLines(t,i,e,s,n,o){const r=[];if(!o){for(let t=0,i=s-e+1;t<i;t++)r[t]=!0;return[-1,-1,r]}const h=o._get(),c=h.imageData.data,a=h.rendLineNumberStart,l=h.lines,u=l.length,d=t.width,f=t.data,g=(s-e+1)*n*d*4;let A=-1,p=-1,w=-1,m=-1,v=-1,b=-1,y=i*n;for(let t=e;t<=s;t++){const i=t-e,s=t-a,o=s>=0&&s<u?l[s].dy:-1;if(o===-1){r[i]=!0,y+=n;continue}const h=o*d*4,k=(o+n)*d*4,x=y*d*4,C=(y+n)*d*4;m===h&&b===x?(m=k,b=C):(w!==-1&&(f.set(c.subarray(w,m),v),A===-1&&w===0&&w===v&&(A=m),p===-1&&m===g&&w===v&&(p=w)),w=h,m=k,v=x,b=C),r[i]=!1,y+=n}return w!==-1&&(f.set(c.subarray(w,m),v),A===-1&&w===0&&w===v&&(A=m),p===-1&&m===g&&w===v&&(p=w)),[A===-1?-1:A/(4*d),p===-1?-1:p/(4*d),r]}static _renderLine(t,i,e,s,n,o,r,h,c,a,l,u,d,f,g){const A=d.content,p=d.tokens,w=t.width-o,m=g===1;let v=8,b=0,y=0;for(let d=0,g=p.getCount();d<g;d++){const g=p.getEndOffset(d),k=p.getForeground(d),x=r.getColor(k);for(;b<g;b++){if(v>w)return;const r=A.charCodeAt(b);if(r===9){const t=u-(b+y)%u;y+=t-1,v+=t*o}else if(r===32)v+=o;else{const u=Lo(r)?2:1;for(let d=0;d<u;d++)if(n===2?c.blockRenderChar(t,v,a+l,x,h,i,e,m):c.renderChar(t,v,a+l,r,x,h,i,e,f,s,m),v+=o,v>w)return}}}}}class eB{constructor(t,i,e){this._startLineNumber=t,this._endLineNumber=i,this._defaultValue=e,this._values=[];for(let t=0,i=this._endLineNumber-this._startLineNumber+1;t<i;t++)this._values[t]=e}has(t){return this.get(t)!==this._defaultValue}set(t,i){t<this._startLineNumber||t>this._endLineNumber||(this._values[t-this._startLineNumber]=i)}get(t){return t<this._startLineNumber||t>this._endLineNumber?this._defaultValue:this._values[t-this._startLineNumber]}}class sB extends iy{constructor(t,i){super(t),this._viewDomNode=i;const e=this._context.configuration.options.get(145);this._widgets={},this._verticalScrollbarWidth=e.verticalScrollbarWidth,this._minimapWidth=e.minimap.minimapWidth,this._horizontalScrollbarHeight=e.horizontalScrollbarHeight,this._editorHeight=e.height,this._editorWidth=e.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=Ba(document.createElement("div")),ey.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=Ba(document.createElement("div")),ey.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(t){const i=this._context.configuration.options.get(145);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(t){const i=Ba(t.getDomNode());this._widgets[t.getId()]={widget:t,preference:null,domNode:i},i.setPosition("absolute"),i.setAttribute("widgetId",t.getId()),t.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(i):this._domNode.appendChild(i),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(t,i){const e=this._widgets[t.getId()];return e.preference===i?(this._updateMaxMinWidth(),!1):(e.preference=i,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(t){const i=t.getId();if(this._widgets.hasOwnProperty(i)){const t=this._widgets[i].domNode.domNode;delete this._widgets[i],t.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var t,i;let e=0;const s=Object.keys(this._widgets);for(let n=0,o=s.length;n<o;n++){const o=s[n],r=(i=(t=this._widgets[o].widget).getMinContentWidthInPx)===null||i===void 0?void 0:i.call(t);r!==void 0&&(e=Math.max(e,r))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(t){const i=t.domNode;if(t.preference!==null)if(t.preference===0)i.setTop(0),i.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(t.preference===1){const t=i.domNode.clientHeight;i.setTop(this._editorHeight-t-2*this._horizontalScrollbarHeight),i.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else if(t.preference===2)i.setTop(0),i.domNode.style.right="50%";else{const{top:e,left:s}=t.preference;if(this._context.configuration.options.get(42)&&t.widget.allowEditorOverflow){const t=this._viewDomNodeRect;i.setTop(e+t.top),i.setLeft(s+t.left),i.setPosition("fixed")}else i.setTop(e),i.setLeft(s),i.setPosition("absolute")}else i.setTop("")}prepareRender(t){this._viewDomNodeRect=yc(this._viewDomNode.domNode)}render(t){this._domNode.setWidth(this._editorWidth);const i=Object.keys(this._widgets);for(let t=0,e=i.length;t<e;t++){const e=i[t];this._renderWidget(this._widgets[e])}}}class nB{constructor(t,i){const e=t.options;this.lineHeight=e.get(67),this.pixelRatio=e.get(143),this.overviewRulerLanes=e.get(83),this.renderBorder=e.get(82);const s=i.getColor(ax);this.borderColor=s?s.toString():null,this.hideCursor=e.get(59);const n=i.getColor(Uk);this.cursorColorSingle=n?n.transparent(.7).toString():null;const o=i.getColor(Pk);this.cursorColorPrimary=o?o.transparent(.7).toString():null;const r=i.getColor(Wk);this.cursorColorSecondary=r?r.transparent(.7).toString():null,this.themeType=i.type;const h=e.get(73),c=h.enabled,a=h.side,l=i.getColor(lx),u=Gs.getDefaultBackground();this.backgroundColor=l||(c&&a==="right"?u:null);const d=e.get(145).overviewRuler;this.top=d.top,this.right=d.right,this.domWidth=d.width,this.domHeight=d.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[f,g]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=f,this.w=g}_initLanes(t,i,e){const s=i-t;if(e>=3){const i=Math.floor(s/3),e=Math.floor(s/3),n=s-i-e,o=t+i;return[[0,t,o,t,t+i+n,t,o,t],[0,i,n,i+n,e,i+n+e,n+e,i+n+e]]}if(e===2){const i=Math.floor(s/2),e=s-i;return[[0,t,t,t,t+i,t,t,t],[0,i,i,i,e,i+e,i+e,i+e]]}return[[0,t,t,t,t,t,t,t],[0,s,s,s,s,s,s,s]]}equals(t){return this.lineHeight===t.lineHeight&&this.pixelRatio===t.pixelRatio&&this.overviewRulerLanes===t.overviewRulerLanes&&this.renderBorder===t.renderBorder&&this.borderColor===t.borderColor&&this.hideCursor===t.hideCursor&&this.cursorColorSingle===t.cursorColorSingle&&this.cursorColorPrimary===t.cursorColorPrimary&&this.cursorColorSecondary===t.cursorColorSecondary&&this.themeType===t.themeType&&CA.equals(this.backgroundColor,t.backgroundColor)&&this.top===t.top&&this.right===t.right&&this.domWidth===t.domWidth&&this.domHeight===t.domHeight&&this.canvasWidth===t.canvasWidth&&this.canvasHeight===t.canvasHeight}}class oB extends iy{constructor(t){super(t),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=Ba(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Gs.onDidChange((t=>{t.changedColorMap&&this._updateSettings(!0)})),this._cursorPositions=[{position:new Cs(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(t){const i=new nB(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(i))&&(this._settings=i,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,t&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(t){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}onCursorStateChanged(t){this._cursorPositions=[];for(let i=0,e=t.selections.length;i<e;i++){let s=this._settings.cursorColorSingle;e>1&&(s=i===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:t.selections[i].getPosition(),color:s})}return this._cursorPositions.sort(((t,i)=>Cs.compare(t.position,i.position))),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(t){return!!t.affectsOverviewRuler&&this._markRenderingIsMaybeNeeded()}onFlushed(t){return this._markRenderingIsNeeded()}onScrollChanged(t){return!!t.scrollHeightChanged&&this._markRenderingIsNeeded()}onZonesChanged(t){return this._markRenderingIsNeeded()}onThemeChanged(t){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}getDomNode(){return this._domNode.domNode}prepareRender(t){}render(t){this._render(),this._actualShouldRender=0}_render(){const t=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0)return this._domNode.setBackgroundColor(t?CA.Format.CSS.formatHexA(t):""),void this._domNode.setDisplay("none");const i=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(i.sort(Ip.compareByRenderingProps),this._actualShouldRender!==1||Ip.equalsArr(this._renderedDecorations,i)||(this._actualShouldRender=2),this._actualShouldRender!==1||h(this._renderedCursorPositions,this._cursorPositions,((t,i)=>t.position.lineNumber===i.position.lineNumber&&t.color===i.color))||(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=i,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const e=this._settings.canvasWidth,s=this._settings.canvasHeight,n=this._settings.lineHeight,o=this._context.viewLayout,r=s/this._context.viewLayout.getScrollHeight(),c=6*this._settings.pixelRatio|0,a=c/2|0,l=this._domNode.domNode.getContext("2d");t?t.isOpaque()?(l.fillStyle=CA.Format.CSS.formatHexA(t),l.fillRect(0,0,e,s)):(l.clearRect(0,0,e,s),l.fillStyle=CA.Format.CSS.formatHexA(t),l.fillRect(0,0,e,s)):l.clearRect(0,0,e,s);const u=this._settings.x,d=this._settings.w;for(const t of i){const i=t.color,e=t.data;l.fillStyle=i;let h=0,f=0,g=0;for(let t=0,i=e.length/3;t<i;t++){const i=e[3*t],A=e[3*t+1],p=e[3*t+2];let w=o.getVerticalOffsetForLineNumber(A)*r|0,m=(o.getVerticalOffsetForLineNumber(p)+n)*r|0;if(m-w<c){let t=(w+m)/2|0;t<a?t=a:t+a>s&&(t=s-a),w=t-a,m=t+a}w>g+1||i!==h?(t!==0&&l.fillRect(u[h],f,d[h],g-f),h=i,f=w,g=m):m>g&&(g=m)}l.fillRect(u[h],f,d[h],g-f)}if(!this._settings.hideCursor){const t=2*this._settings.pixelRatio|0,i=t/2|0,e=this._settings.x[7],n=this._settings.w[7];let h=-100,c=-100,a=null;for(let u=0,d=this._cursorPositions.length;u<d;u++){const d=this._cursorPositions[u].color;if(!d)continue;const f=this._cursorPositions[u].position;let g=o.getVerticalOffsetForLineNumber(f.lineNumber)*r|0;g<i?g=i:g+i>s&&(g=s-i);const A=g-i,p=A+t;A>c+1||d!==a?(u!==0&&a&&l.fillRect(e,h,n,c-h),h=A,c=p):p>c&&(c=p),a=d,l.fillStyle=d}a&&l.fillRect(e,h,n,c-h)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(l.beginPath(),l.lineWidth=1,l.strokeStyle=this._settings.borderColor,l.moveTo(0,0),l.lineTo(0,s),l.stroke(),l.moveTo(0,0),l.lineTo(e,0),l.stroke())}}class rB{constructor(t,i,e){this._colorZoneBrand=void 0,this.from=0|t,this.to=0|i,this.colorId=0|e}static compare(t,i){return t.colorId===i.colorId?t.from===i.from?t.to-i.to:t.from-i.from:t.colorId-i.colorId}}class hB{constructor(t,i,e,s){this._overviewRulerZoneBrand=void 0,this.startLineNumber=t,this.endLineNumber=i,this.heightInLines=e,this.color=s,this._colorZone=null}static compare(t,i){return t.color===i.color?t.startLineNumber===i.startLineNumber?t.heightInLines===i.heightInLines?t.endLineNumber-i.endLineNumber:t.heightInLines-i.heightInLines:t.startLineNumber-i.startLineNumber:t.color<i.color?-1:1}setColorZone(t){this._colorZone=t}getColorZones(){return this._colorZone}}class cB{constructor(t){this._getVerticalOffsetForLine=t,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(t){this._zones=t,this._zones.sort(hB.compare)}setLineHeight(t){return this._lineHeight!==t&&(this._lineHeight=t,this._colorZonesInvalid=!0,!0)}setPixelRatio(t){this._pixelRatio=t,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(t){return this._domWidth!==t&&(this._domWidth=t,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(t){return this._domHeight!==t&&(this._domHeight=t,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(t){return this._outerHeight!==t&&(this._outerHeight=t,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const t=this._colorZonesInvalid,i=Math.floor(this._lineHeight),e=Math.floor(this.getCanvasHeight()),s=e/Math.floor(this._outerHeight),n=Math.floor(4*this._pixelRatio/2),o=[];for(let r=0,h=this._zones.length;r<h;r++){const h=this._zones[r];if(!t){const t=h.getColorZones();if(t){o.push(t);continue}}const c=this._getVerticalOffsetForLine(h.startLineNumber),a=h.heightInLines===0?this._getVerticalOffsetForLine(h.endLineNumber)+i:c+h.heightInLines*i,l=Math.floor(s*c),u=Math.floor(s*a);let d=Math.floor((l+u)/2),f=u-d;f<n&&(f=n),d-f<0&&(d=f),d+f>e&&(d=e-f);const g=h.color;let A=this._color2Id[g];A||(A=++this._lastAssignedId,this._color2Id[g]=A,this._id2Color[A]=g);const p=new rB(d-f,d+f,A);h.setColorZone(p),o.push(p)}return this._colorZonesInvalid=!1,o.sort(rB.compare),o}}class aB extends ty{constructor(t,i){super(),this._context=t;const e=this._context.configuration.options;this._domNode=Ba(document.createElement("canvas")),this._domNode.setClassName(i),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new cB((t=>this._context.viewLayout.getVerticalOffsetForLineNumber(t))),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(e.get(67)),this._zoneManager.setPixelRatio(e.get(143)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(t){const i=this._context.configuration.options;return t.hasChanged(67)&&(this._zoneManager.setLineHeight(i.get(67)),this._render()),t.hasChanged(143)&&(this._zoneManager.setPixelRatio(i.get(143)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(t){return this._render(),!0}onScrollChanged(t){return t.scrollHeightChanged&&(this._zoneManager.setOuterHeight(t.scrollHeight),this._render()),!0}onZonesChanged(t){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(t){this._domNode.setTop(t.top),this._domNode.setRight(t.right);let i=!1;i=this._zoneManager.setDOMWidth(t.width)||i,i=this._zoneManager.setDOMHeight(t.height)||i,i&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(t){this._zoneManager.setZones(t),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const t=this._zoneManager.getCanvasWidth(),i=this._zoneManager.getCanvasHeight(),e=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),n=this._domNode.domNode.getContext("2d");return n.clearRect(0,0,t,i),e.length>0&&this._renderOneLane(n,e,s,t),!0}_renderOneLane(t,i,e,s){let n=0,o=0,r=0;for(const h of i){const i=h.colorId,c=h.from,a=h.to;i!==n?(t.fillRect(0,o,s,r-o),n=i,t.fillStyle=e[n],o=c,r=a):r>=c?r=Math.max(r,a):(t.fillRect(0,o,s,r-o),o=c,r=a)}t.fillRect(0,o,s,r-o)}}class lB extends iy{constructor(t){super(t),this.domNode=Ba(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const i=this._context.configuration.options;this._rulers=i.get(102),this._typicalHalfwidthCharacterWidth=i.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(t){const i=this._context.configuration.options;return this._rulers=i.get(102),this._typicalHalfwidthCharacterWidth=i.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(t){return t.scrollHeightChanged}prepareRender(t){}_ensureRulersCount(){const t=this._renderedRulers.length,i=this._rulers.length;if(t===i)return;if(t<i){const{tabSize:e}=this._context.viewModel.model.getOptions(),s=e;let n=i-t;for(;n>0;){const t=Ba(document.createElement("div"));t.setClassName("view-ruler"),t.setWidth(s),this.domNode.appendChild(t),this._renderedRulers.push(t),n--}return}let e=t-i;for(;e>0;){const t=this._renderedRulers.pop();this.domNode.removeChild(t),e--}}render(t){this._ensureRulersCount();for(let i=0,e=this._rulers.length;i<e;i++){const e=this._renderedRulers[i],s=this._rulers[i];e.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),e.setHeight(Math.min(t.scrollHeight,1e6)),e.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}class uB extends iy{constructor(t){super(t),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(103);this._useShadows=i.useShadows,this._domNode=Ba(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const t=this._useShadows&&this._scrollTop>0;return this._shouldShow!==t&&(this._shouldShow=t,!0)}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(145);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(t){const i=this._context.configuration.options.get(103);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(t){return this._scrollTop=t.scrollTop,this._updateShouldShow()}prepareRender(t){}render(t){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class dB{constructor(t){this.left=t.left,this.width=t.width,this.startStyle=null,this.endStyle=null}}class fB{constructor(t,i){this.lineNumber=t,this.ranges=i}}function gB(t){return new dB(t)}function AB(t){return new fB(t.lineNumber,t.ranges.map(gB))}class pB extends Sk{constructor(t){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=t;const i=this._context.configuration.options;this._roundedSelection=i.get(101),this._typicalHalfwidthCharacterWidth=i.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(t){const i=this._context.configuration.options;return this._roundedSelection=i.get(101),this._typicalHalfwidthCharacterWidth=i.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(t){return this._selections=t.selections.slice(0),!0}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return t.scrollTopChanged}onZonesChanged(t){return!0}_visibleRangesHaveGaps(t){for(let i=0,e=t.length;i<e;i++)if(t[i].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(t,i,e){const s=this._typicalHalfwidthCharacterWidth/4;let n=null,o=null;if(e&&e.length>0&&i.length>0){const s=i[0].lineNumber;if(s===t.startLineNumber)for(let t=0;!n&&t<e.length;t++)e[t].lineNumber===s&&(n=e[t].ranges[0]);const r=i[i.length-1].lineNumber;if(r===t.endLineNumber)for(let t=e.length-1;!o&&t>=0;t--)e[t].lineNumber===r&&(o=e[t].ranges[0]);n&&!n.startStyle&&(n=null),o&&!o.startStyle&&(o=null)}for(let t=0,e=i.length;t<e;t++){const r=i[t].ranges[0],h=r.left,c=r.left+r.width,a={top:0,bottom:0},l={top:0,bottom:0};if(t>0){const e=i[t-1].ranges[0].left,n=i[t-1].ranges[0].left+i[t-1].ranges[0].width;wB(h-e)<s?a.top=2:h>e&&(a.top=1),wB(c-n)<s?l.top=2:e<c&&c<n&&(l.top=1)}else n&&(a.top=n.startStyle.top,l.top=n.endStyle.top);if(t+1<e){const e=i[t+1].ranges[0].left,n=i[t+1].ranges[0].left+i[t+1].ranges[0].width;wB(h-e)<s?a.bottom=2:e<h&&h<n&&(a.bottom=1),wB(c-n)<s?l.bottom=2:c<n&&(l.bottom=1)}else o&&(a.bottom=o.startStyle.bottom,l.bottom=o.endStyle.bottom);r.startStyle=a,r.endStyle=l}}_getVisibleRangesWithStyle(t,i,e){const s=(i.linesVisibleRangesForRange(t,!0)||[]).map(AB);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(i.visibleRange,s,e),s}_createSelectionPiece(t,i,e,s,n){return'<div class="cslr '+e+'" style="top:'+t.toString()+"px;bottom:"+i.toString()+"px;left:"+s.toString()+"px;width:"+n.toString()+'px;"></div>'}_actualRenderOneSelection(t,i,e,s){if(s.length===0)return;const n=!!s[0].ranges[0].startStyle,o=s[0].lineNumber,r=s[s.length-1].lineNumber;for(let h=0,c=s.length;h<c;h++){const c=s[h],a=c.lineNumber,l=a-i,u=e&&a===o?1:0,d=e&&a!==o&&a===r?1:0;let f="",g="";for(let t=0,i=c.ranges.length;t<i;t++){const i=c.ranges[t];if(n){const t=i.startStyle,e=i.endStyle;if(t.top===1||t.bottom===1){f+=this._createSelectionPiece(u,d,pB.SELECTION_CLASS_NAME,i.left-pB.ROUNDED_PIECE_WIDTH,pB.ROUNDED_PIECE_WIDTH);let e=pB.EDITOR_BACKGROUND_CLASS_NAME;t.top===1&&(e+=" "+pB.SELECTION_TOP_RIGHT),t.bottom===1&&(e+=" "+pB.SELECTION_BOTTOM_RIGHT),f+=this._createSelectionPiece(u,d,e,i.left-pB.ROUNDED_PIECE_WIDTH,pB.ROUNDED_PIECE_WIDTH)}if(e.top===1||e.bottom===1){f+=this._createSelectionPiece(u,d,pB.SELECTION_CLASS_NAME,i.left+i.width,pB.ROUNDED_PIECE_WIDTH);let t=pB.EDITOR_BACKGROUND_CLASS_NAME;e.top===1&&(t+=" "+pB.SELECTION_TOP_LEFT),e.bottom===1&&(t+=" "+pB.SELECTION_BOTTOM_LEFT),f+=this._createSelectionPiece(u,d,t,i.left+i.width,pB.ROUNDED_PIECE_WIDTH)}}let e=pB.SELECTION_CLASS_NAME;if(n){const t=i.startStyle,s=i.endStyle;t.top===0&&(e+=" "+pB.SELECTION_TOP_LEFT),t.bottom===0&&(e+=" "+pB.SELECTION_BOTTOM_LEFT),s.top===0&&(e+=" "+pB.SELECTION_TOP_RIGHT),s.bottom===0&&(e+=" "+pB.SELECTION_BOTTOM_RIGHT)}g+=this._createSelectionPiece(u,d,e,i.left,i.width)}t[l][0]+=f,t[l][1]+=g}}prepareRender(t){const i=[],e=t.visibleRange.startLineNumber,s=t.visibleRange.endLineNumber;for(let t=e;t<=s;t++)i[t-e]=["",""];const n=[];for(let s=0,o=this._selections.length;s<o;s++){const o=this._selections[s];if(o.isEmpty()){n[s]=null;continue}const r=this._getVisibleRangesWithStyle(o,t,this._previousFrameVisibleRangesWithStyle[s]);n[s]=r,this._actualRenderOneSelection(i,e,this._selections.length>1,r)}this._previousFrameVisibleRangesWithStyle=n,this._renderResult=i.map((([t,i])=>t+i))}render(t,i){if(!this._renderResult)return"";const e=i-t;return e<0||e>=this._renderResult.length?"":this._renderResult[e]}}function wB(t){return t<0?-t:t}pB.SELECTION_CLASS_NAME="selected-text",pB.SELECTION_TOP_LEFT="top-left-radius",pB.SELECTION_BOTTOM_LEFT="bottom-left-radius",pB.SELECTION_TOP_RIGHT="top-right-radius",pB.SELECTION_BOTTOM_RIGHT="bottom-right-radius",pB.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",pB.ROUNDED_PIECE_WIDTH=10,Nk(((t,i)=>{const e=t.getColor(ym);e&&!e.isTransparent()&&i.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${e}; }`)}));class mB{constructor(t,i,e,s,n,o,r){this.top=t,this.left=i,this.paddingLeft=e,this.width=s,this.height=n,this.textContent=o,this.textContentClassName=r}}var vB;(function(t){t[t.Single=0]="Single",t[t.MultiPrimary=1]="MultiPrimary",t[t.MultiSecondary=2]="MultiSecondary"})(vB||(vB={}));class bB{constructor(t,i){this._context=t;const e=this._context.configuration.options,s=e.get(50);this._cursorStyle=e.get(28),this._lineHeight=e.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(e.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Ba(document.createElement("div")),this._domNode.setClassName(`cursor ${zx}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Da(this._domNode,s),this._domNode.setDisplay("none"),this._position=new Cs(1,1),this._pluralityClass="",this.setPlurality(i),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(t){switch(t){default:case vB.Single:this._pluralityClass="";break;case vB.MultiPrimary:this._pluralityClass="cursor-primary";break;case vB.MultiSecondary:this._pluralityClass="cursor-secondary"}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(t){const i=this._context.configuration.options,e=i.get(50);return this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),Da(this._domNode,e),!0}onCursorPositionChanged(t,i){return this._domNode.domNode.style.transitionProperty=i?"none":"",this._position=t,!0}_getGraphemeAwarePosition(){const{lineNumber:t,column:i}=this._position,e=this._context.viewModel.getLineContent(t),[s,n]=function(t,i){i>0&&vo(t.charCodeAt(i))&&i--;const e=i+Co(t,i);return[e-Eo(t,e),e]}(e,i-1);return[new Cs(t,s+1),e.substring(s,n)]}_prepareRender(t){let i="",e="";const[s,n]=this._getGraphemeAwarePosition();if(this._cursorStyle===Ai.Line||this._cursorStyle===Ai.LineThin){const o=t.visibleRangeForPosition(s);if(!o||o.outsideRenderedLine)return null;const r=Gh(this._domNode.domNode);let h;this._cursorStyle===Ai.Line?(h=la(r,this._lineCursorWidth>0?this._lineCursorWidth:2),h>2&&(i=n,e=this._getTokenClassName(s))):h=la(r,1);let c=o.left,a=0;h>=2&&c>=1&&(a=1,c-=a);const l=t.getVerticalOffsetForLineNumber(s.lineNumber)-t.bigNumbersDelta;return new mB(l,c,a,h,this._lineHeight,i,e)}const o=t.linesVisibleRangesForRange(new Es(s.lineNumber,s.column,s.lineNumber,s.column+n.length),!1);if(!o||o.length===0)return null;const r=o[0];if(r.outsideRenderedLine||r.ranges.length===0)return null;const h=r.ranges[0],c=n==="\t"||h.width<1?this._typicalHalfwidthCharacterWidth:h.width;this._cursorStyle===Ai.Block&&(i=n,e=this._getTokenClassName(s));let a=t.getVerticalOffsetForLineNumber(s.lineNumber)-t.bigNumbersDelta,l=this._lineHeight;return this._cursorStyle!==Ai.Underline&&this._cursorStyle!==Ai.UnderlineThin||(a+=this._lineHeight-2,l=2),new mB(a,h.left,0,c,l,i,e)}_getTokenClassName(t){const i=this._context.viewModel.getViewLineData(t.lineNumber),e=i.tokens.findTokenIndexAtOffset(t.column-1);return i.tokens.getClassName(e)}prepareRender(t){this._renderData=this._prepareRender(t)}render(t){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${zx} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class yB extends iy{constructor(t){super(t);const i=this._context.configuration.options;this._readOnly=i.get(91),this._cursorBlinking=i.get(26),this._cursorStyle=i.get(28),this._cursorSmoothCaretAnimation=i.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new bB(this._context,vB.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=Ba(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new xr,this._cursorFlatBlinkInterval=new gc,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(t){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(t){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(t){const i=this._context.configuration.options;this._readOnly=i.get(91),this._cursorBlinking=i.get(26),this._cursorStyle=i.get(28),this._cursorSmoothCaretAnimation=i.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(t);for(let i=0,e=this._secondaryCursors.length;i<e;i++)this._secondaryCursors[i].onConfigurationChanged(t);return!0}_onCursorPositionChanged(t,i,e){const s=this._secondaryCursors.length!==i.length||this._cursorSmoothCaretAnimation==="explicit"&&e!==3;if(this._primaryCursor.setPlurality(i.length?vB.MultiPrimary:vB.Single),this._primaryCursor.onCursorPositionChanged(t,s),this._updateBlinking(),this._secondaryCursors.length<i.length){const t=i.length-this._secondaryCursors.length;for(let i=0;i<t;i++){const t=new bB(this._context,vB.MultiSecondary);this._domNode.domNode.insertBefore(t.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(t)}}else if(this._secondaryCursors.length>i.length){const t=this._secondaryCursors.length-i.length;for(let i=0;i<t;i++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let t=0;t<i.length;t++)this._secondaryCursors[t].onCursorPositionChanged(i[t],s)}onCursorStateChanged(t){const i=[];for(let e=0,s=t.selections.length;e<s;e++)i[e]=t.selections[e].getPosition();this._onCursorPositionChanged(i[0],i.slice(1),t.reason);const e=t.selections[0].isEmpty();return this._selectionIsEmpty!==e&&(this._selectionIsEmpty=e,this._updateDomClassName()),!0}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onFocusChanged(t){return this._editorHasFocus=t.isFocused,this._updateBlinking(),!1}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return!0}onTokensChanged(t){const i=i=>{for(let e=0,s=t.ranges.length;e<s;e++)if(t.ranges[e].fromLineNumber<=i.lineNumber&&i.lineNumber<=t.ranges[e].toLineNumber)return!0;return!1};if(i(this._primaryCursor.getPosition()))return!0;for(const t of this._secondaryCursors)if(i(t.getPosition()))return!0;return!1}onZonesChanged(t){return!0}_getCursorBlinking(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const t=this._getCursorBlinking(),i=t===0,e=t===5;i?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),i||e||(t===1?this._cursorFlatBlinkInterval.cancelAndSet((()=>{this._isVisible?this._hide():this._show()}),yB.BLINK_INTERVAL,Gh(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet((()=>{this._blinkingEnabled=!0,this._updateDomClassName()}),yB.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let t="cursors-layer";switch(this._selectionIsEmpty||(t+=" has-selection"),this._cursorStyle){case Ai.Line:t+=" cursor-line-style";break;case Ai.Block:t+=" cursor-block-style";break;case Ai.Underline:t+=" cursor-underline-style";break;case Ai.LineThin:t+=" cursor-line-thin-style";break;case Ai.BlockOutline:t+=" cursor-block-outline-style";break;case Ai.UnderlineThin:t+=" cursor-underline-thin-style";break;default:t+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:t+=" cursor-blink";break;case 2:t+=" cursor-smooth";break;case 3:t+=" cursor-phase";break;case 4:t+=" cursor-expand";break;default:t+=" cursor-solid"}else t+=" cursor-solid";return this._cursorSmoothCaretAnimation!=="on"&&this._cursorSmoothCaretAnimation!=="explicit"||(t+=" cursor-smooth-caret-animation"),t}_show(){this._primaryCursor.show();for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].hide();this._isVisible=!1}prepareRender(t){this._primaryCursor.prepareRender(t);for(let i=0,e=this._secondaryCursors.length;i<e;i++)this._secondaryCursors[i].prepareRender(t)}render(t){const i=[];let e=0;const s=this._primaryCursor.render(t);s&&(i[e++]=s);for(let s=0,n=this._secondaryCursors.length;s<n;s++){const n=this._secondaryCursors[s].render(t);n&&(i[e++]=n)}this._renderData=i}getLastRenderData(){return this._renderData}}yB.BLINK_INTERVAL=500,Nk(((t,i)=>{const e=[{class:".cursor",foreground:Uk,background:Hk},{class:".cursor-primary",foreground:Pk,background:jk},{class:".cursor-secondary",foreground:Wk,background:Yk}];for(const s of e){const e=t.getColor(s.foreground);if(e){let n=t.getColor(s.background);n||(n=e.opposite()),i.addRule(`.monaco-editor .cursors-layer ${s.class} { background-color: ${e}; border-color: ${e}; color: ${n}; }`),dy(t.type)&&i.addRule(`.monaco-editor .cursors-layer.has-selection ${s.class} { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}}}));const kB=()=>{throw new Error("Invalid change accessor")};class xB extends iy{constructor(t){super(t);const i=this._context.configuration.options,e=i.get(145);this._lineHeight=i.get(67),this._contentWidth=e.contentWidth,this._contentLeft=e.contentLeft,this.domNode=Ba(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Ba(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const t=this._context.viewLayout.getWhitespaces(),i=new Map;for(const e of t)i.set(e.id,e);let e=!1;return this._context.viewModel.changeWhitespace((t=>{const s=Object.keys(this._zones);for(let n=0,o=s.length;n<o;n++){const o=s[n],r=this._zones[o],h=this._computeWhitespaceProps(r.delegate);r.isInHiddenArea=h.isInHiddenArea;const c=i.get(o);!c||c.afterLineNumber===h.afterViewLineNumber&&c.height===h.heightInPx||(t.changeOneWhitespace(o,h.afterViewLineNumber,h.heightInPx),this._safeCallOnComputedHeight(r.delegate,h.heightInPx),e=!0)}})),e}onConfigurationChanged(t){const i=this._context.configuration.options,e=i.get(145);return this._lineHeight=i.get(67),this._contentWidth=e.contentWidth,this._contentLeft=e.contentLeft,t.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(t){return this._recomputeWhitespacesProps()}onLinesDeleted(t){return!0}onScrollChanged(t){return t.scrollTopChanged||t.scrollWidthChanged}onZonesChanged(t){return!0}onLinesInserted(t){return!0}_getZoneOrdinal(t){var i,e;return(e=(i=t.ordinal)!==null&&i!==void 0?i:t.afterColumn)!==null&&e!==void 0?e:1e4}_computeWhitespaceProps(t){if(t.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(t),minWidthInPx:this._minWidthInPixels(t)};let i,e;if(t.afterColumn!==void 0)i=this._context.viewModel.model.validatePosition({lineNumber:t.afterLineNumber,column:t.afterColumn});else{const e=this._context.viewModel.model.validatePosition({lineNumber:t.afterLineNumber,column:1}).lineNumber;i=new Cs(e,this._context.viewModel.model.getLineMaxColumn(e))}e=i.column===this._context.viewModel.model.getLineMaxColumn(i.lineNumber)?this._context.viewModel.model.validatePosition({lineNumber:i.lineNumber+1,column:1}):this._context.viewModel.model.validatePosition({lineNumber:i.lineNumber,column:i.column+1});const s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i,t.afterColumnAffinity,!0),n=t.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(e);return{isInHiddenArea:!n,afterViewLineNumber:s.lineNumber,heightInPx:n?this._heightInPixels(t):0,minWidthInPx:this._minWidthInPixels(t)}}changeViewZones(t){let i=!1;return this._context.viewModel.changeWhitespace((e=>{const s={addZone:t=>(i=!0,this._addZone(e,t)),removeZone:t=>{t&&(i=this._removeZone(e,t)||i)},layoutZone:t=>{t&&(i=this._layoutZone(e,t)||i)}};(function(t,i){try{return t(i)}catch(t){Oi(t)}})(t,s),s.addZone=kB,s.removeZone=kB,s.layoutZone=kB})),i}_addZone(t,i){const e=this._computeWhitespaceProps(i),s={whitespaceId:t.insertWhitespace(e.afterViewLineNumber,this._getZoneOrdinal(i),e.heightInPx,e.minWidthInPx),delegate:i,isInHiddenArea:e.isInHiddenArea,isVisible:!1,domNode:Ba(i.domNode),marginDomNode:i.marginDomNode?Ba(i.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,e.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(t,i){if(this._zones.hasOwnProperty(i)){const e=this._zones[i];return delete this._zones[i],t.removeWhitespace(e.whitespaceId),e.domNode.removeAttribute("monaco-visible-view-zone"),e.domNode.removeAttribute("monaco-view-zone"),e.domNode.domNode.parentNode.removeChild(e.domNode.domNode),e.marginDomNode&&(e.marginDomNode.removeAttribute("monaco-visible-view-zone"),e.marginDomNode.removeAttribute("monaco-view-zone"),e.marginDomNode.domNode.parentNode.removeChild(e.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(t,i){if(this._zones.hasOwnProperty(i)){const e=this._zones[i],s=this._computeWhitespaceProps(e.delegate);return e.isInHiddenArea=s.isInHiddenArea,t.changeOneWhitespace(e.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(e.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(t){return this._zones.hasOwnProperty(t)?!!this._zones[t].delegate.suppressMouseDown:!1}_heightInPixels(t){return typeof t.heightInPx=="number"?t.heightInPx:typeof t.heightInLines=="number"?this._lineHeight*t.heightInLines:this._lineHeight}_minWidthInPixels(t){return typeof t.minWidthInPx=="number"?t.minWidthInPx:0}_safeCallOnComputedHeight(t,i){if(typeof t.onComputedHeight=="function")try{t.onComputedHeight(i)}catch(t){Oi(t)}}_safeCallOnDomNodeTop(t,i){if(typeof t.onDomNodeTop=="function")try{t.onDomNodeTop(i)}catch(t){Oi(t)}}prepareRender(t){}render(t){const i=t.viewportData.whitespaceViewportData,e={};let s=!1;for(const t of i)this._zones[t.id].isInHiddenArea||(e[t.id]=t,s=!0);const n=Object.keys(this._zones);for(let i=0,s=n.length;i<s;i++){const s=n[i],o=this._zones[s];let r=0,h=0,c="none";e.hasOwnProperty(s)?(r=e[s].verticalOffset-t.bigNumbersDelta,h=e[s].height,c="block",o.isVisible||(o.domNode.setAttribute("monaco-visible-view-zone","true"),o.isVisible=!0),this._safeCallOnDomNodeTop(o.delegate,t.getScrolledTopFromAbsoluteTop(e[s].verticalOffset))):(o.isVisible&&(o.domNode.removeAttribute("monaco-visible-view-zone"),o.isVisible=!1),this._safeCallOnDomNodeTop(o.delegate,t.getScrolledTopFromAbsoluteTop(-1e6))),o.domNode.setTop(r),o.domNode.setHeight(h),o.domNode.setDisplay(c),o.marginDomNode&&(o.marginDomNode.setTop(r),o.marginDomNode.setHeight(h),o.marginDomNode.setDisplay(c))}s&&(this.domNode.setWidth(Math.max(t.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}class CB extends Sk{constructor(t){super(),this._context=t,this._options=new EB(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(t){const i=new EB(this._context.configuration);return this._options.equals(i)?t.hasChanged(145):(this._options=i,!0)}onCursorStateChanged(t){return this._selection=t.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return t.scrollTopChanged}onZonesChanged(t){return!0}prepareRender(t){if(this._options.renderWhitespace==="none")return void(this._renderResult=null);const i=t.visibleRange.startLineNumber,e=t.visibleRange.endLineNumber-i+1,s=new Array(e);for(let t=0;t<e;t++)s[t]=!0;const n=this._context.viewModel.getMinimapLinesRenderingData(t.viewportData.startLineNumber,t.viewportData.endLineNumber,s);this._renderResult=[];for(let i=t.viewportData.startLineNumber;i<=t.viewportData.endLineNumber;i++){const e=i-t.viewportData.startLineNumber,s=n.data[e];let o=null;if(this._options.renderWhitespace==="selection"){const t=this._selection;for(const e of t){if(e.endLineNumber<i||e.startLineNumber>i)continue;const t=e.startLineNumber===i?e.startColumn:s.minColumn,n=e.endLineNumber===i?e.endColumn:s.maxColumn;t<n&&(o||(o=[]),o.push(new fp(t-1,n-1)))}}this._renderResult[e]=this._applyRenderWhitespace(t,i,o,s)}}_applyRenderWhitespace(t,i,e,s){if(this._options.renderWhitespace==="selection"&&!e||this._options.renderWhitespace==="trailing"&&s.continuesWithWrappedLine)return"";const n=this._context.theme.getColor(_k),o=this._options.renderWithSVG,r=s.content,h=this._options.stopRenderingLineAfter===-1?r.length:Math.min(this._options.stopRenderingLineAfter,r.length),c=s.continuesWithWrappedLine,a=s.minColumn-1,l=this._options.renderWhitespace==="boundary",u=this._options.renderWhitespace==="trailing",d=this._options.lineHeight,f=this._options.middotWidth,g=this._options.wsmiddotWidth,A=this._options.spaceWidth,p=Math.abs(g-A)<Math.abs(f-A)?11825:183,w=this._options.canUseHalfwidthRightwardsArrow;let m,v="",b=!1,y=so(r);y===-1?(b=!0,y=h,m=h):m=oo(r);let k=0,x=e&&e[k],C=0;for(let s=a;s<h;s++){const n=r.charCodeAt(s);if(x&&s>=x.endOffset&&(k++,x=e&&e[k]),n!==9&&n!==32||u&&!b&&s<=m)continue;if(l&&s>=y&&s<=m&&n===32){const t=s-1>=0?r.charCodeAt(s-1):0,i=s+1<h?r.charCodeAt(s+1):0;if(t!==32&&i!==32)continue}if(l&&c&&s===h-1){const t=s-1>=0?r.charCodeAt(s-1):0;if(n===32&&t!==32&&t!==9)continue}if(e&&(!x||x.startOffset>s||x.endOffset<=s))continue;const a=t.visibleRangeForPosition(new Cs(i,s+1));a&&(o?(C=Math.max(C,a.left),v+=n===9?this._renderArrow(d,A,a.left):`<circle cx="${(a.left+A/2).toFixed(2)}" cy="${(d/2).toFixed(2)}" r="${(A/7).toFixed(2)}" />`):v+=n===9?`<div class="mwh" style="left:${a.left}px;height:${d}px;">${w?"￫":"→"}</div>`:`<div class="mwh" style="left:${a.left}px;height:${d}px;">${String.fromCharCode(p)}</div>`)}return o?(C=Math.round(C+A),`<svg style="bottom:0;position:absolute;width:${C}px;height:${d}px" viewBox="0 0 ${C} ${d}" xmlns="http://www.w3.org/2000/svg" fill="${n}">`+v+"</svg>"):v}_renderArrow(t,i,e){const s=t/2,n=e,o={x:0,y:i/7/2},r={x:.8*i,y:o.y},h={x:r.x-.2*r.x,y:r.y+.2*r.x},c={x:h.x+.1*r.x,y:h.y+.1*r.x},a={x:c.x+.35*r.x,y:c.y-.35*r.x};return`<path d="M ${[o,r,h,c,a,{x:a.x,y:-a.y},{x:c.x,y:-c.y},{x:h.x,y:-h.y},{x:r.x,y:-r.y},{x:o.x,y:-o.y}].map((t=>`${(n+t.x).toFixed(2)} ${(s+t.y).toFixed(2)}`)).join(" L ")}" />`}render(t,i){if(!this._renderResult)return"";const e=i-t;return e<0||e>=this._renderResult.length?"":this._renderResult[e]}}class EB{constructor(t){const i=t.options,e=i.get(50),s=i.get(38);s==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):s==="svg"?(this.renderWhitespace=i.get(99),this.renderWithSVG=!0):(this.renderWhitespace=i.get(99),this.renderWithSVG=!1),this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(117)}equals(t){return this.renderWhitespace===t.renderWhitespace&&this.renderWithSVG===t.renderWithSVG&&this.spaceWidth===t.spaceWidth&&this.middotWidth===t.middotWidth&&this.wsmiddotWidth===t.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===t.canUseHalfwidthRightwardsArrow&&this.lineHeight===t.lineHeight&&this.stopRenderingLineAfter===t.stopRenderingLineAfter}}class BB{constructor(t,i,e,s){this.selections=t,this.startLineNumber=0|i.startLineNumber,this.endLineNumber=0|i.endLineNumber,this.relativeVerticalOffset=i.relativeVerticalOffset,this.bigNumbersDelta=0|i.bigNumbersDelta,this.lineHeight=0|i.lineHeight,this.whitespaceViewportData=e,this._model=s,this.visibleRange=new Es(i.startLineNumber,this._model.getLineMinColumn(i.startLineNumber),i.endLineNumber,this._model.getLineMaxColumn(i.endLineNumber))}getViewLineRenderingData(t){return this._model.getViewportViewLineRenderingData(this.visibleRange,t)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class DB{get type(){return this._theme.type}get value(){return this._theme}constructor(t){this._theme=t}update(t){this._theme=t}getColor(t){return this._theme.getColor(t)}}class MB{constructor(t,i,e){this.configuration=t,this.theme=new DB(i),this.viewModel=e,this.viewLayout=e.viewLayout}addEventHandler(t){this.viewModel.addViewEventHandler(t)}removeEventHandler(t){this.viewModel.removeViewEventHandler(t)}}var SB=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},FB=function(t,i){return function(e,s){i(e,s,t)}};let IB=class extends ty{constructor(t,i,e,s,n,o,r){super(),this._instantiationService=r,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new Bs(1,1,1,1)],this._renderAnimationFrame=null;const h=new KC(i,s,n,t);this._context=new MB(i,e,s),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(_x,this._context,h,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Ba(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Ba(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Ba(document.createElement("div")),ey.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new AE(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new QE(this._context,this._linesContent),this._viewZones=new xB(this._context),this._viewParts.push(this._viewZones);const c=new oB(this._context);this._viewParts.push(c);const a=new uB(this._context);this._viewParts.push(a);const l=new iE(this._context);this._viewParts.push(l),l.addDynamicOverlay(new dE(this._context)),l.addDynamicOverlay(new pB(this._context)),l.addDynamicOverlay(new FE(this._context)),l.addDynamicOverlay(new gE(this._context)),l.addDynamicOverlay(new CB(this._context));const u=new eE(this._context);this._viewParts.push(u),u.addDynamicOverlay(new fE(this._context)),u.addDynamicOverlay(new zE(this._context)),u.addDynamicOverlay(new OE(this._context)),u.addDynamicOverlay(new Qx(this._context)),this._glyphMarginWidgets=new bE(this._context),this._viewParts.push(this._glyphMarginWidgets);const d=new Ox(this._context);d.getDomNode().appendChild(this._viewZones.marginDomNode),d.getDomNode().appendChild(u.getDomNode()),d.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(d),this._contentWidgets=new oE(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new yB(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new sB(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const f=new lB(this._context);this._viewParts.push(f);const g=new nE(this._context);this._viewParts.push(g);const A=new tB(this._context);if(this._viewParts.push(A),c){const t=this._scrollbar.getOverviewRulerLayoutInfo();t.parent.insertBefore(c.getDomNode(),t.insertBefore)}this._linesContent.appendChild(l.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(a.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(A.getDomNode()),this._overflowGuardContainer.appendChild(g.domNode),this.domNode.appendChild(this._overflowGuardContainer),o?(o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),o.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new Mk(this._context,h,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const t=this._context.viewModel.model,i=this._context.viewModel.glyphLanes;let e=[],s=0;e=e.concat(t.getAllMarginDecorations().map((t=>{var i,e,n;const o=(e=(i=t.options.glyphMargin)===null||i===void 0?void 0:i.position)!==null&&e!==void 0?e:eg.Center;return s=Math.max(s,t.range.endLineNumber),{range:t.range,lane:o,persist:(n=t.options.glyphMargin)===null||n===void 0?void 0:n.persistLane}}))),e=e.concat(this._glyphMarginWidgets.getWidgets().map((i=>{const e=t.validateRange(i.preference.range);return s=Math.max(s,e.endLineNumber),{range:e,lane:i.preference.lane}}))),e.sort(((t,i)=>Es.compareRangesUsingStarts(t.range,i.range))),i.reset(s);for(const t of e)i.push(t.lane,t.range,t.persist);return i}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:t=>{this._textAreaHandler.textArea.domNode.dispatchEvent(t)},getLastRenderData:()=>{const t=this._viewCursors.getLastRenderData()||[],i=this._textAreaHandler.getLastRenderData();return new Fy(t,i)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:t=>this._viewZones.shouldSuppressMouseDownOnViewZone(t),shouldSuppressMouseDownOnWidget:t=>this._contentWidgets.shouldSuppressMouseDownOnWidget(t),getPositionFromDOMInfo:(t,i)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(t,i)),visibleRangeForPosition:(t,i)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Cs(t,i))),getLineWidth:t=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(t))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:t=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(t))}}_applyLayout(){const t=this._context.configuration.options.get(145);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const t=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(142)+" "+Lk(this._context.theme.type)+t}handleEvents(t){super.handleEvents(t),this._scheduleRender()}onConfigurationChanged(t){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(t){return this._selections=t.selections,!1}onDecorationsChanged(t){return t.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(t){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(t){return this._context.theme.update(t.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const t of this._viewParts)t.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new Ji;if(this._renderAnimationFrame===null){const t=this._createCoordinatedRendering();this._renderAnimationFrame=RB.INSTANCE.scheduleCoordinatedRendering({window:Gh(this.domNode.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new Ji;try{return t.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new Ji;return t.renderText()},prepareRender:(i,e)=>{if(this._store.isDisposed)throw new Ji;return t.prepareRender(i,e)},render:(i,e)=>{if(this._store.isDisposed)throw new Ji;return t.render(i,e)}})}}_flushAccumulatedAndRenderNow(){const t=this._createCoordinatedRendering();LB((()=>t.prepareRenderText()));const i=LB((()=>t.renderText()));if(i){const[e,s]=i;LB((()=>t.prepareRender(e,s))),LB((()=>t.render(e,s)))}}_getViewPartsToRender(){const t=[];let i=0;for(const e of this._viewParts)e.shouldRender()&&(t[i++]=e);return t}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const t=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(t.requiredLanes)}Iw.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let t=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&t.length===0)return null;const i=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(i.startLineNumber,i.endLineNumber,i.centeredLineNumber);const e=new BB(this._selections,i,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(e),this._viewLines.shouldRender()&&(this._viewLines.renderText(e),this._viewLines.onDidRender(),t=this._getViewPartsToRender()),[t,new ny(this._context.viewLayout,e,this._viewLines)]},prepareRender:(t,i)=>{for(const e of t)e.prepareRender(i)},render:(t,i)=>{for(const e of t)e.render(i),e.onDidRender()}}}delegateVerticalScrollbarPointerDown(t){this._scrollbar.delegateVerticalScrollbarPointerDown(t)}delegateScrollFromMouseWheelEvent(t){this._scrollbar.delegateScrollFromMouseWheelEvent(t)}restoreState(t){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:t.scrollTop,scrollLeft:t.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(t,i){const e=this._context.viewModel.model.validatePosition({lineNumber:t,column:i}),s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(e);this._flushAccumulatedAndRenderNow();const n=this._viewLines.visibleRangeForPosition(new Cs(s.lineNumber,s.column));return n?n.left:-1}getTargetAtClientPoint(t,i){const e=this._pointerHandler.getTargetAtClientPoint(t,i);return e?sE.convertViewToModelMouseTarget(e,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(t){return new aB(this._context,t)}change(t){this._viewZones.changeViewZones(t),this._scheduleRender()}render(t,i){if(i){this._viewLines.forceShouldRender();for(const t of this._viewParts)t.forceShouldRender()}t?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(t){this._textAreaHandler.writeScreenReaderContent(t)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(t){this._textAreaHandler.setAriaOptions(t)}addContentWidget(t){this._contentWidgets.addWidget(t.widget),this.layoutContentWidget(t),this._scheduleRender()}layoutContentWidget(t){var i,e,s,n,o,r,h,c;this._contentWidgets.setWidgetPosition(t.widget,(e=(i=t.position)===null||i===void 0?void 0:i.position)!==null&&e!==void 0?e:null,(n=(s=t.position)===null||s===void 0?void 0:s.secondaryPosition)!==null&&n!==void 0?n:null,(r=(o=t.position)===null||o===void 0?void 0:o.preference)!==null&&r!==void 0?r:null,(c=(h=t.position)===null||h===void 0?void 0:h.positionAffinity)!==null&&c!==void 0?c:null),this._scheduleRender()}removeContentWidget(t){this._contentWidgets.removeWidget(t.widget),this._scheduleRender()}addOverlayWidget(t){this._overlayWidgets.addWidget(t.widget),this.layoutOverlayWidget(t),this._scheduleRender()}layoutOverlayWidget(t){const i=t.position?t.position.preference:null;this._overlayWidgets.setWidgetPosition(t.widget,i)&&this._scheduleRender()}removeOverlayWidget(t){this._overlayWidgets.removeWidget(t.widget),this._scheduleRender()}addGlyphMarginWidget(t){this._glyphMarginWidgets.addWidget(t.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(t){const i=t.position;this._glyphMarginWidgets.setWidgetPosition(t.widget,i)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(t){this._glyphMarginWidgets.removeWidget(t.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};function LB(t){try{return t()}catch(t){return Oi(t),null}}IB=SB([FB(6,Oa)],IB);class RB{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(t){return this._coordinatedRenderings.push(t),this._scheduleRender(t.window),{dispose:()=>{const i=this._coordinatedRenderings.indexOf(t);if(i!==-1&&(this._coordinatedRenderings.splice(i,1),this._coordinatedRenderings.length===0)){for(const[t,i]of this._animationFrameRunners)i.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(t){if(!this._animationFrameRunners.has(t)){const i=()=>{this._animationFrameRunners.delete(t),this._onRenderScheduled()};this._animationFrameRunners.set(t,dc(t,i,100))}}_onRenderScheduled(){const t=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of t)LB((()=>i.prepareRenderText()));const i=[];for(let e=0,s=t.length;e<s;e++){const s=t[e];i[e]=LB((()=>s.renderText()))}for(let e=0,s=t.length;e<s;e++){const s=t[e],n=i[e];if(!n)continue;const[o,r]=n;LB((()=>s.prepareRender(o,r)))}for(let e=0,s=t.length;e<s;e++){const s=t[e],n=i[e];if(!n)continue;const[o,r]=n;LB((()=>s.render(o,r)))}}}RB.INSTANCE=new RB;class TB{constructor(t,i,e,s,n){this.injectionOffsets=t,this.injectionOptions=i,this.breakOffsets=e,this.breakOffsetsVisibleColumn=s,this.wrappedTextIndentLength=n}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(t){return t>0?this.wrappedTextIndentLength:0}getLineLength(t){const i=t>0?this.breakOffsets[t-1]:0;let e=this.breakOffsets[t]-i;return t>0&&(e+=this.wrappedTextIndentLength),e}getMaxOutputOffset(t){return this.getLineLength(t)}translateToInputOffset(t,i){t>0&&(i=Math.max(0,i-this.wrappedTextIndentLength));let e=t===0?i:this.breakOffsets[t-1]+i;if(this.injectionOffsets!==null)for(let t=0;t<this.injectionOffsets.length&&e>this.injectionOffsets[t];t++)e<this.injectionOffsets[t]+this.injectionOptions[t].content.length?e=this.injectionOffsets[t]:e-=this.injectionOptions[t].content.length;return e}translateToOutputPosition(t,i=2){let e=t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(t<this.injectionOffsets[s])&&(i===1||t!==this.injectionOffsets[s]);s++)e+=this.injectionOptions[s].content.length;return this.offsetInInputWithInjectionsToOutputPosition(e,i)}offsetInInputWithInjectionsToOutputPosition(t,i=2){let e=0,s=this.breakOffsets.length-1,n=0,o=0;for(;e<=s;){n=e+(s-e)/2|0;const r=this.breakOffsets[n];if(o=n>0?this.breakOffsets[n-1]:0,i===0)if(t<=o)s=n-1;else{if(!(t>r))break;e=n+1}else if(t<o)s=n-1;else{if(!(t>=r))break;e=n+1}}let r=t-o;return n>0&&(r+=this.wrappedTextIndentLength),new OB(n,r)}normalizeOutputPosition(t,i,e){if(this.injectionOffsets!==null){const s=this.outputPositionToOffsetInInputWithInjections(t,i),n=this.normalizeOffsetInInputWithInjectionsAroundInjections(s,e);if(n!==s)return this.offsetInInputWithInjectionsToOutputPosition(n,e)}if(e===0){if(t>0&&i===this.getMinOutputOffset(t))return new OB(t-1,this.getMaxOutputOffset(t-1))}else if(e===1&&t<this.getOutputLineCount()-1&&i===this.getMaxOutputOffset(t))return new OB(t+1,this.getMinOutputOffset(t+1));return new OB(t,i)}outputPositionToOffsetInInputWithInjections(t,i){return t>0&&(i=Math.max(0,i-this.wrappedTextIndentLength)),(t>0?this.breakOffsets[t-1]:0)+i}normalizeOffsetInInputWithInjectionsAroundInjections(t,i){const e=this.getInjectedTextAtOffset(t);if(!e)return t;if(i===2){if(t===e.offsetInInputWithInjections+e.length&&NB(this.injectionOptions[e.injectedTextIndex].cursorStops))return e.offsetInInputWithInjections+e.length;{let t=e.offsetInInputWithInjections;if(QB(this.injectionOptions[e.injectedTextIndex].cursorStops))return t;let i=e.injectedTextIndex-1;for(;i>=0&&this.injectionOffsets[i]===this.injectionOffsets[e.injectedTextIndex]&&!NB(this.injectionOptions[i].cursorStops)&&(t-=this.injectionOptions[i].content.length,!QB(this.injectionOptions[i].cursorStops));)i--;return t}}if(i===1||i===4){let t=e.offsetInInputWithInjections+e.length,i=e.injectedTextIndex;for(;i+1<this.injectionOffsets.length&&this.injectionOffsets[i+1]===this.injectionOffsets[i];)t+=this.injectionOptions[i+1].content.length,i++;return t}if(i===0||i===3){let t=e.offsetInInputWithInjections,i=e.injectedTextIndex;for(;i-1>=0&&this.injectionOffsets[i-1]===this.injectionOffsets[i];)t-=this.injectionOptions[i-1].content.length,i--;return t}jl()}getInjectedText(t,i){const e=this.outputPositionToOffsetInInputWithInjections(t,i),s=this.getInjectedTextAtOffset(e);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(t){const i=this.injectionOffsets,e=this.injectionOptions;if(i!==null){let s=0;for(let n=0;n<i.length;n++){const o=e[n].content.length,r=i[n]+s,h=i[n]+s+o;if(r>t)break;if(t<=h)return{injectedTextIndex:n,offsetInInputWithInjections:r,length:o};s+=o}}}}function NB(t){return t==null||t===sg.Right||t===sg.Both}function QB(t){return t==null||t===sg.Left||t===sg.Both}class OB{constructor(t,i){this.outputLineIndex=t,this.outputOffset=i}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(t){return new Cs(t+this.outputLineIndex,this.outputOffset+1)}}class zB{constructor(){this.changeType=1}}class UB{static applyInjectedText(t,i){if(!i||i.length===0)return t;let e="",s=0;for(const n of i)e+=t.substring(s,n.column-1),s=n.column-1,e+=n.options.content;return e+=t.substring(s),e}static fromDecorations(t){const i=[];for(const e of t)e.options.before&&e.options.before.content.length>0&&i.push(new UB(e.ownerId,e.range.startLineNumber,e.range.startColumn,e.options.before,0)),e.options.after&&e.options.after.content.length>0&&i.push(new UB(e.ownerId,e.range.endLineNumber,e.range.endColumn,e.options.after,1));return i.sort(((t,i)=>t.lineNumber===i.lineNumber?t.column===i.column?t.order-i.order:t.column-i.column:t.lineNumber-i.lineNumber)),i}constructor(t,i,e,s,n){this.ownerId=t,this.lineNumber=i,this.column=e,this.options=s,this.order=n}}class HB{constructor(t,i,e){this.changeType=2,this.lineNumber=t,this.detail=i,this.injectedText=e}}class PB{constructor(t,i){this.changeType=3,this.fromLineNumber=t,this.toLineNumber=i}}class jB{constructor(t,i,e,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=t,this.toLineNumber=i,this.detail=e}}class WB{constructor(){this.changeType=5}}class YB{constructor(t,i,e,s){this.changes=t,this.versionId=i,this.isUndoing=e,this.isRedoing=s,this.resultingSelection=null}containsEvent(t){for(let i=0,e=this.changes.length;i<e;i++)if(this.changes[i].changeType===t)return!0;return!1}static merge(t,i){const e=[].concat(t.changes).concat(i.changes),s=i.versionId,n=t.isUndoing||i.isUndoing,o=t.isRedoing||i.isRedoing;return new YB(e,s,n,o)}}class _B{constructor(t){this.changes=t}}class VB{constructor(t,i){this.rawContentChangedEvent=t,this.contentChangedEvent=i}merge(t){const i=YB.merge(this.rawContentChangedEvent,t.rawContentChangedEvent),e=VB._mergeChangeEvents(this.contentChangedEvent,t.contentChangedEvent);return new VB(i,e)}static _mergeChangeEvents(t,i){const e=[].concat(t.changes).concat(i.changes),s=i.eol,n=i.versionId,o=t.isUndoing||i.isUndoing,r=t.isRedoing||i.isRedoing,h=t.isFlush||i.isFlush;return{changes:e,eol:s,isEolChange:t.isEolChange&&i.isEolChange,versionId:n,isUndoing:o,isRedoing:r,isFlush:h}}}const JB=Yu("domLineBreaksComputer",{createHTML:t=>t});class GB{static create(t){return new GB(new WeakRef(t))}constructor(t){this.targetWindow=t}createLineBreaksComputer(t,i,e,s,n){const o=[],r=[];return{addRequest:(t,i,e)=>{o.push(t),r.push(i)},finalize:()=>function(t,i,e,s,n,o,r,h){var c;function a(t){const e=h[t];if(e){const s=UB.applyInjectedText(i[t],e),n=e.map((t=>t.options)),o=e.map((t=>t.column-1));return new TB(o,n,[s.length],[],0)}return null}if(n===-1){const t=[];for(let e=0,s=i.length;e<s;e++)t[e]=a(e);return t}const l=Math.round(n*e.typicalHalfwidthCharacterWidth),u=o===3?2:o===2?1:0,d=Math.round(s*u),f=Math.ceil(e.spaceWidth*d),g=document.createElement("div");Da(g,e);const A=new wd(1e4),p=[],w=[],m=[],v=[],b=[];for(let t=0;t<i.length;t++){const n=UB.applyInjectedText(i[t],h[t]);let r=0,c=0,a=l;if(o!==0)if(r=so(n),r===-1)r=0;else{for(let t=0;t<r;t++)c+=n.charCodeAt(t)===9?s-c%s:1;const t=Math.ceil(e.spaceWidth*c);t+e.typicalFullwidthCharacterWidth>l?(r=0,c=0):a=l-t}const u=n.substr(r),d=KB(u,c,s,a,A,f);p[t]=r,w[t]=c,m[t]=u,v[t]=d[0],b[t]=d[1]}const y=A.build(),k=(c=JB==null?void 0:JB.createHTML(y))!==null&&c!==void 0?c:y;g.innerHTML=k,g.style.position="absolute",g.style.top="10000",r==="keepAll"?(g.style.wordBreak="keep-all",g.style.overflowWrap="anywhere"):(g.style.wordBreak="inherit",g.style.overflowWrap="break-word"),t.document.body.appendChild(g);const x=document.createRange(),C=Array.prototype.slice.call(g.children,0),E=[];for(let t=0;t<i.length;t++){const i=$B(x,C[t],m[t],v[t]);if(i===null){E[t]=a(t);continue}const e=p[t],s=w[t]+d,n=b[t],o=[];for(let t=0,e=i.length;t<e;t++)o[t]=n[i[t]];if(e!==0)for(let t=0,s=i.length;t<s;t++)i[t]+=e;let r,c;const l=h[t];l?(r=l.map((t=>t.options)),c=l.map((t=>t.column-1))):(r=null,c=null),E[t]=new TB(c,r,i,o,s)}return t.document.body.removeChild(g),E}(_(this.targetWindow.deref()),o,t,i,e,s,n,r)}}}function KB(t,i,e,s,n,o){if(o!==0){const t=String(o);n.appendString('<div style="text-indent: -'),n.appendString(t),n.appendString("px; padding-left: "),n.appendString(t),n.appendString("px; box-sizing: border-box; width:")}else n.appendString('<div style="width:');n.appendString(String(s)),n.appendString('px;">');const r=t.length;let h=i,c=0;const a=[],l=[];let u=0<r?t.charCodeAt(0):0;n.appendString("<span>");for(let i=0;i<r;i++){i!==0&&i%16384==0&&n.appendString("</span><span>"),a[i]=c,l[i]=h;const s=u;u=i+1<r?t.charCodeAt(i+1):0;let o=1,d=1;switch(s){case 9:o=e-h%e,d=o;for(let t=1;t<=o;t++)t<o?n.appendCharCode(160):n.appendASCIICharCode(32);break;case 32:u===32?n.appendCharCode(160):n.appendASCIICharCode(32);break;case 60:n.appendString("&lt;");break;case 62:n.appendString("&gt;");break;case 38:n.appendString("&amp;");break;case 0:n.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:n.appendCharCode(65533);break;default:Lo(s)&&d++,s<32?n.appendCharCode(9216+s):n.appendCharCode(s)}c+=o,h+=d}return n.appendString("</span>"),a[t.length]=c,l[t.length]=h,n.appendString("</div>"),[a,l]}function $B(t,i,e,s){if(e.length<=1)return null;const n=Array.prototype.slice.call(i.children,0),o=[];try{XB(t,n,s,0,null,e.length-1,null,o)}catch(t){return console.log(t),null}return o.length===0?null:(o.push(e.length),o)}function XB(t,i,e,s,n,o,r,h){if(s===o||(n=n||qB(t,i,e[s],e[s+1]),r=r||qB(t,i,e[o],e[o+1]),Math.abs(n[0].top-r[0].top)<=.1))return;if(s+1===o)return void h.push(o);const c=s+(o-s)/2|0,a=qB(t,i,e[c],e[c+1]);XB(t,i,e,s,n,c,a,h),XB(t,i,e,c,a,o,r,h)}function qB(t,i,e,s){return t.setStart(i[e/16384|0].firstChild,e%16384),t.setEnd(i[s/16384|0].firstChild,s%16384),t.getClientRects()}class ZB extends te{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new ne),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(t,i,e){this._editor=t,this._instantiationService=e;for(const t of i)this._pending.has(t.id)?Oi(new Error(`Cannot have two contributions with the same id ${t.id}`)):this._pending.set(t.id,t);this._instantiateSome(0),this._register(lc(Gh(this._editor.getDomNode()),(()=>{this._instantiateSome(1)}))),this._register(lc(Gh(this._editor.getDomNode()),(()=>{this._instantiateSome(2)}))),this._register(lc(Gh(this._editor.getDomNode()),(()=>{this._instantiateSome(3)}),5e3))}saveViewState(){const t={};for(const[i,e]of this._instances)typeof e.saveViewState=="function"&&(t[i]=e.saveViewState());return t}restoreViewState(t){for(const[i,e]of this._instances)typeof e.restoreViewState=="function"&&e.restoreViewState(t[i])}get(t){return this._instantiateById(t),this._instances.get(t)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var t;return lc(Gh((t=this._editor)===null||t===void 0?void 0:t.getDomNode()),(()=>{this._instantiateSome(1)}),50)}_instantiateSome(t){if(this._finishedInstantiation[t])return;this._finishedInstantiation[t]=!0;const i=this._findPendingContributionsByInstantiation(t);for(const t of i)this._instantiateById(t.id)}_findPendingContributionsByInstantiation(t){const i=[];for(const[,e]of this._pending)e.instantiation===t&&i.push(e);return i}_instantiateById(t){const i=this._pending.get(t);if(i){if(this._pending.delete(t),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const t=this._instantiationService.createInstance(i.ctor,this._editor);this._instances.set(i.id,t),typeof t.restoreViewState=="function"&&i.instantiation!==0&&console.warn(`Editor contribution '${i.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(t){Oi(t)}}}}class tD{constructor(t,i,e,s,n,o,r){this.id=t,this.label=i,this.alias=e,this.metadata=s,this._precondition=n,this._run=o,this._contextKeyService=r}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(t){return this.isSupported()?this._run(t):Promise.resolve(void 0)}}function iD(t){let i=0,e=0,s=0,n=0;for(let o=0,r=t.length;o<r;o++){const h=t.charCodeAt(o);h===13?(i===0&&(e=o),i++,o+1<r&&t.charCodeAt(o+1)===10?(n|=2,o++):n|=3,s=o+1):h===10&&(n|=1,i===0&&(e=o),i++,s=o+1)}return i===0&&(e=t.length),[i,e,t.length-s,n]}class eD{constructor(t,i,e,s){this.range=t,this.nestingLevel=i,this.nestingLevelOfEqualBracketType=e,this.isInvalid=s}}class sD{constructor(t,i,e,s,n,o){this.range=t,this.openingBracketRange=i,this.closingBracketRange=e,this.nestingLevel=s,this.nestingLevelOfEqualBracketType=n,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class nD extends sD{constructor(t,i,e,s,n,o,r){super(t,i,e,s,n,o),this.minVisibleColumnIndentation=r}}class oD{static ofText(t){let i=0,e=0;for(const s of t)s===`\n`?(i++,e=0):e++;return new oD(i,e)}constructor(t,i){this.lineCount=t,this.columnCount=i}createRange(t){return this.lineCount===0?new Es(t.lineNumber,t.column,t.lineNumber,t.column+this.columnCount):new Es(t.lineNumber,t.column,t.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(t){return this.lineCount===0?new Cs(t.lineNumber,t.column+this.columnCount):new Cs(t.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}}oD.zero=new oD(0,0);const rD=0;function hD(t){return t===0}const cD=2**26;function aD(t,i){return t*cD+i}function lD(t){const i=t,e=Math.floor(i/cD);return new oD(e,i-e*cD)}function uD(t,i){let e=t+i;return i>=cD&&(e-=t%cD),e}function dD(t,i){return t.reduce(((t,e)=>uD(t,i(e))),rD)}function fD(t,i){return t===i}function gD(t,i){const e=t,s=i;if(s-e<=0)return rD;const n=Math.floor(e/cD),o=Math.floor(s/cD),r=s-o*cD;return n===o?aD(0,r-(e-n*cD)):aD(o-n,r)}function AD(t,i){return t<i}function pD(t,i){return t<=i}function wD(t,i){return t>=i}function mD(t){return aD(t.lineNumber-1,t.column-1)}function vD(t,i){const e=t,s=Math.floor(e/cD),n=e-s*cD,o=i,r=Math.floor(o/cD);return new Es(s+1,n+1,r+1,o-r*cD+1)}class bD{static fromModelContentChanges(t){return t.map((t=>{const i=Es.lift(t.range);return new bD(mD(i.getStartPosition()),mD(i.getEndPosition()),function(t){const i=eo(t);return aD(i.length-1,i[i.length-1].length)}(t.text))})).reverse()}constructor(t,i,e){this.startOffset=t,this.endOffset=i,this.newLength=e}toString(){return`[${lD(this.startOffset)}...${lD(this.endOffset)}) -> ${lD(this.newLength)}`}}class yD{constructor(t){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=t.map((t=>kD.from(t)))}getOffsetBeforeChange(t){return this.adjustNextEdit(t),this.translateCurToOld(t)}getDistanceToNextChange(t){this.adjustNextEdit(t);const i=this.edits[this.nextEditIdx],e=i?this.translateOldToCur(i.offsetObj):null;return e===null?null:gD(t,e)}translateOldToCur(t){return t.lineCount===this.deltaLineIdxInOld?aD(t.lineCount+this.deltaOldToNewLineCount,t.columnCount+this.deltaOldToNewColumnCount):aD(t.lineCount+this.deltaOldToNewLineCount,t.columnCount)}translateCurToOld(t){const i=lD(t);return i.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?aD(i.lineCount-this.deltaOldToNewLineCount,i.columnCount-this.deltaOldToNewColumnCount):aD(i.lineCount-this.deltaOldToNewLineCount,i.columnCount)}adjustNextEdit(t){for(;this.nextEditIdx<this.edits.length;){const i=this.edits[this.nextEditIdx],e=this.translateOldToCur(i.endOffsetAfterObj);if(!pD(e,t))break;{this.nextEditIdx++;const t=lD(e),s=lD(this.translateOldToCur(i.endOffsetBeforeObj)),n=t.lineCount-s.lineCount;this.deltaOldToNewLineCount+=n;const o=this.deltaLineIdxInOld===i.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,r=t.columnCount-s.columnCount;this.deltaOldToNewColumnCount=o+r,this.deltaLineIdxInOld=i.endOffsetBeforeObj.lineCount}}}}class kD{static from(t){return new kD(t.startOffset,t.endOffset,t.newLength)}constructor(t,i,e){this.endOffsetBeforeObj=lD(i),this.endOffsetAfterObj=lD(uD(t,e)),this.offsetObj=lD(t)}}const xD=[];class CD{static create(t,i){if(t<=128&&i.length===0){let e=CD.cache[t];return e||(e=new CD(t,i),CD.cache[t]=e),e}return new CD(t,i)}static getEmpty(){return this.empty}constructor(t,i){this.items=t,this.additionalItems=i}add(t,i){const e=i.getKey(t);let s=e>>5;if(s===0){const t=1<<e|this.items;return t===this.items?this:CD.create(t,this.additionalItems)}s--;const n=this.additionalItems.slice(0);for(;n.length<s;)n.push(0);return n[s]|=1<<(31&e),CD.create(this.items,n)}merge(t){const i=this.items|t.items;if(this.additionalItems===xD&&t.additionalItems===xD)return i===this.items?this:i===t.items?t:CD.create(i,xD);const e=[];for(let i=0;i<Math.max(this.additionalItems.length,t.additionalItems.length);i++){const s=this.additionalItems[i]||0,n=t.additionalItems[i]||0;e.push(s|n)}return CD.create(i,e)}intersects(t){if(this.items&t.items)return!0;for(let i=0;i<Math.min(this.additionalItems.length,t.additionalItems.length);i++)if(this.additionalItems[i]&t.additionalItems[i])return!0;return!1}}CD.cache=new Array(129),CD.empty=CD.create(0,xD);const ED={getKey:t=>t};class BD{constructor(){this.items=new Map}getKey(t){let i=this.items.get(t);return i===void 0&&(i=this.items.size,this.items.set(t,i)),i}}class DD{get length(){return this._length}constructor(t){this._length=t}}class MD extends DD{static create(t,i,e){let s=t.length;return i&&(s=uD(s,i.length)),e&&(s=uD(s,e.length)),new MD(s,t,i,e,i?i.missingOpeningBracketIds:CD.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(t){switch(t){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const t=[];return t.push(this.openingBracket),this.child&&t.push(this.child),this.closingBracket&&t.push(this.closingBracket),t}constructor(t,i,e,s,n){super(t),this.openingBracket=i,this.child=e,this.closingBracket=s,this.missingOpeningBracketIds=n}canBeReused(t){return this.closingBracket!==null&&!t.intersects(this.missingOpeningBracketIds)}deepClone(){return new MD(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(t,i){return this.child?this.child.computeMinIndentation(uD(t,this.openingBracket.length),i):Number.MAX_SAFE_INTEGER}}class SD extends DD{static create23(t,i,e,s=!1){let n=t.length,o=t.missingOpeningBracketIds;if(t.listHeight!==i.listHeight)throw new Error("Invalid list heights");if(n=uD(n,i.length),o=o.merge(i.missingOpeningBracketIds),e){if(t.listHeight!==e.listHeight)throw new Error("Invalid list heights");n=uD(n,e.length),o=o.merge(e.missingOpeningBracketIds)}return s?new ID(n,t.listHeight+1,t,i,e,o):new FD(n,t.listHeight+1,t,i,e,o)}static getEmpty(){return new RD(rD,0,[],CD.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(t,i,e){super(t),this.listHeight=i,this._missingOpeningBracketIds=e,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const t=this.childrenLength;if(t===0)return;const i=this.getChild(t-1),e=i.kind===4?i.toMutable():i;return i!==e&&this.setChild(t-1,e),e}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(t){if(t.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let i=this;for(;i.kind===4;){const t=i.childrenLength;if(t===0)throw new Ji;i=i.getChild(t-1)}return i.canBeReused(t)}handleChildrenChanged(){this.throwIfImmutable();const t=this.childrenLength;let i=this.getChild(0).length,e=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<t;s++){const t=this.getChild(s);i=uD(i,t.length),e=e.merge(t.missingOpeningBracketIds)}this._length=i,this._missingOpeningBracketIds=e,this.cachedMinIndentation=-1}computeMinIndentation(t,i){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let e=Number.MAX_SAFE_INTEGER,s=t;for(let t=0;t<this.childrenLength;t++){const n=this.getChild(t);n&&(e=Math.min(e,n.computeMinIndentation(s,i)),s=uD(s,n.length))}return this.cachedMinIndentation=e,e}}class FD extends SD{get childrenLength(){return this._item3!==null?3:2}getChild(t){switch(t){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(t,i){switch(t){case 0:return void(this._item1=i);case 1:return void(this._item2=i);case 2:return void(this._item3=i)}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(t,i,e,s,n,o){super(t,i,o),this._item1=e,this._item2=s,this._item3=n}deepClone(){return new FD(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=t,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const t=this._item3;return this._item3=null,this.handleChildrenChanged(),t}prependChildOfSameHeight(t){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=t,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const t=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),t}toMutable(){return this}}class ID extends FD{toMutable(){return new FD(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class LD extends SD{get childrenLength(){return this._children.length}getChild(t){return this._children[t]}setChild(t,i){this._children[t]=i}get children(){return this._children}constructor(t,i,e,s){super(t,i,s),this._children=e}deepClone(){const t=new Array(this._children.length);for(let i=0;i<this._children.length;i++)t[i]=this._children[i].deepClone();return new LD(this.length,this.listHeight,t,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){this.throwIfImmutable(),this._children.push(t),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const t=this._children.pop();return this.handleChildrenChanged(),t}prependChildOfSameHeight(t){this.throwIfImmutable(),this._children.unshift(t),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const t=this._children.shift();return this.handleChildrenChanged(),t}toMutable(){return this}}class RD extends LD{toMutable(){return new LD(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const TD=[];class ND extends DD{get listHeight(){return 0}get childrenLength(){return 0}getChild(t){return null}get children(){return TD}deepClone(){return this}}class QD extends ND{get kind(){return 0}get missingOpeningBracketIds(){return CD.getEmpty()}canBeReused(t){return!0}computeMinIndentation(t,i){const e=lD(t),s=(e.columnCount===0?e.lineCount:e.lineCount+1)+1,n=function(t){return Math.floor(t/cD)}(uD(t,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let t=s;t<=n;t++){const e=i.getLineFirstNonWhitespaceColumn(t),s=i.getLineContent(t);if(e===0)continue;const n=Ey.visibleColumnFromColumn(s,e,i.getOptions().tabSize);o=Math.min(o,n)}return o}}class OD extends ND{static create(t,i,e){return new OD(t,i,e)}get kind(){return 1}get missingOpeningBracketIds(){return CD.getEmpty()}constructor(t,i,e){super(t),this.bracketInfo=i,this.bracketIds=e}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(t){return!1}computeMinIndentation(t,i){return Number.MAX_SAFE_INTEGER}}class zD extends ND{get kind(){return 3}constructor(t,i){super(i),this.missingOpeningBracketIds=t}canBeReused(t){return!t.intersects(this.missingOpeningBracketIds)}computeMinIndentation(t,i){return Number.MAX_SAFE_INTEGER}}let UD=class{constructor(t,i,e,s,n){this.length=t,this.kind=i,this.bracketId=e,this.bracketIds=s,this.astNode=n}};class HD{constructor(t,i){this.textModel=t,this.bracketTokens=i,this.reader=new PD(this.textModel,this.bracketTokens),this._offset=rD,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=t.getLineCount(),this.textBufferLastLineLength=t.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return aD(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(t){this.didPeek=!1,this._offset=uD(this._offset,t);const i=lD(this._offset);this.reader.setPosition(i.lineCount,i.columnCount)}read(){let t;return this.peeked?(this.didPeek=!1,t=this.peeked):t=this.reader.read(),t&&(this._offset=uD(this._offset,t.length)),t}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class PD{constructor(t,i){this.textModel=t,this.bracketTokens=i,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=t.getLineCount(),this.textBufferLastLineLength=t.getLineLength(this.textBufferLineCount)}setPosition(t,i){t===this.lineIdx?(this.lineCharOffset=i,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=t,this.lineCharOffset=i,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const t=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=t.length,t}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const t=this.lineIdx,i=this.lineCharOffset;let e=0;for(;;){const s=this.lineTokens,n=s.getCount();let o=null;if(this.lineTokenOffset<n){const r=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<n&&r===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const h=op.getTokenType(r)===0,c=op.containsBalancedBrackets(r),a=s.getEndOffset(this.lineTokenOffset);if(c&&h&&this.lineCharOffset<a){const t=s.getLanguageId(this.lineTokenOffset),i=this.line.substring(this.lineCharOffset,a),e=this.bracketTokens.getSingleLanguageBracketTokens(t),n=e.regExpGlobal;if(n){n.lastIndex=0;const t=n.exec(i);t&&(o=e.getToken(t[0]),o&&(this.lineCharOffset+=t.index))}}if(e+=a-this.lineCharOffset,o){if(t!==this.lineIdx||i!==this.lineCharOffset){this.peekedToken=o;break}return this.lineCharOffset+=o.length,o}this.lineTokenOffset++,this.lineCharOffset=a}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,e+=33,e>1e3))break;if(e>1500)break}const s=(n=t,o=i,r=this.lineIdx,h=this.lineCharOffset,n!==r?aD(r-n,h):aD(0,h-o));var n,o,r,h;return new UD(s,0,-1,CD.getEmpty(),new QD(s))}}class jD{constructor(t,i){this.text=t,this._offset=rD,this.idx=0;const e=i.getRegExpStr(),s=e?new RegExp(e+`|\n`,"gi"):null,n=[];let o,r=0,h=0,c=0,a=0;const l=[];for(let t=0;t<60;t++)l.push(new UD(aD(0,t),0,-1,CD.getEmpty(),new QD(aD(0,t))));const u=[];for(let t=0;t<60;t++)u.push(new UD(aD(1,t),0,-1,CD.getEmpty(),new QD(aD(1,t))));if(s)for(s.lastIndex=0;(o=s.exec(t))!==null;){const t=o.index,e=o[0];if(e===`\n`)r++,h=t+1;else{if(c!==t){let i;if(a===r){const e=t-c;if(e<l.length)i=l[e];else{const t=aD(0,e);i=new UD(t,0,-1,CD.getEmpty(),new QD(t))}}else{const e=r-a,s=t-h;if(e===1&&s<u.length)i=u[s];else{const t=aD(e,s);i=new UD(t,0,-1,CD.getEmpty(),new QD(t))}}n.push(i)}n.push(i.getToken(e)),c=t+e.length,a=r}}const d=t.length;if(c!==d){const t=a===r?aD(0,d-c):aD(r-a,d-h);n.push(new UD(t,0,-1,CD.getEmpty(),new QD(t)))}this.length=aD(r,d-h),this.tokens=n}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(t){throw new _i}}class WD{static createFromLanguage(t,i){function e(t){return i.getKey(`${t.languageId}:::${t.bracketText}`)}const s=new Map;for(const i of t.bracketsNew.openingBrackets){const t=aD(0,i.bracketText.length),n=e(i),o=CD.getEmpty().add(n,ED);s.set(i.bracketText,new UD(t,1,n,o,OD.create(t,i,o)))}for(const i of t.bracketsNew.closingBrackets){const t=aD(0,i.bracketText.length);let n=CD.getEmpty();const o=i.getOpeningBrackets();for(const t of o)n=n.add(e(t),ED);s.set(i.bracketText,new UD(t,2,e(o[0]),n,OD.create(t,i,n)))}return new WD(s)}constructor(t){this.map=t,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const t=[...this.map.keys()];return t.sort(),t.reverse(),t.map((t=>function(t){let i=Xn(t);return/^[\w ]+/.test(t)&&(i=`\\b${i}`),/[\w ]+$/.test(t)&&(i=`${i}\\b`),i}(t))).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const t=this.getRegExpStr();this._regExpGlobal=t?new RegExp(t,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(t){return this.map.get(t.toLowerCase())}findClosingTokenText(t){for(const[i,e]of this.map)if(e.kind===2&&e.bracketIds.intersects(t))return i}get isEmpty(){return this.map.size===0}}class YD{constructor(t,i){this.denseKeyProvider=t,this.getLanguageConfiguration=i,this.languageIdToBracketTokens=new Map}didLanguageChange(t){return this.languageIdToBracketTokens.has(t)}getSingleLanguageBracketTokens(t){let i=this.languageIdToBracketTokens.get(t);return i||(i=WD.createFromLanguage(this.getLanguageConfiguration(t),this.denseKeyProvider),this.languageIdToBracketTokens.set(t,i)),i}}function _D(t,i=!1){if(t.length===0)return null;if(t.length===1)return t[0];let e=t.length;for(;e>3;){const s=e>>1;for(let n=0;n<s;n++){const s=n<<1;t[n]=SD.create23(t[s],t[s+1],s+3===e?t[s+2]:null,i)}e=s}return SD.create23(t[0],t[1],e>=3?t[2]:null,i)}function VD(t,i){return Math.abs(t.listHeight-i.listHeight)}function JD(t,i){return t.listHeight===i.listHeight?SD.create23(t,i,null,!1):t.listHeight>i.listHeight?function(t,i){let e=t=t.toMutable();const s=[];let n;for(;;){if(i.listHeight===e.listHeight){n=i;break}if(e.kind!==4)throw new Error("unexpected");s.push(e),e=e.makeLastElementMutable()}for(let t=s.length-1;t>=0;t--){const i=s[t];n?i.childrenLength>=3?n=SD.create23(i.unappendChild(),n,null,!1):(i.appendChildOfSameHeight(n),n=void 0):i.handleChildrenChanged()}return n?SD.create23(t,n,null,!1):t}(t,i):function(t,i){let e=t=t.toMutable();const s=[];for(;i.listHeight!==e.listHeight;){if(e.kind!==4)throw new Error("unexpected");s.push(e),e=e.makeFirstElementMutable()}let n=i;for(let t=s.length-1;t>=0;t--){const i=s[t];n?i.childrenLength>=3?n=SD.create23(n,i.unprependChild(),null,!1):(i.prependChildOfSameHeight(n),n=void 0):i.handleChildrenChanged()}return n?SD.create23(n,t,null,!1):t}(i,t)}class GD{constructor(t){this.lastOffset=rD,this.nextNodes=[t],this.offsets=[rD],this.idxs=[]}readLongestNodeAt(t,i){if(AD(t,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=t;;){const e=$D(this.nextNodes);if(!e)return;const s=$D(this.offsets);if(AD(t,s))return;if(AD(s,t))if(uD(s,e.length)<=t)this.nextNodeAfterCurrent();else{const t=KD(e);t!==-1?(this.nextNodes.push(e.getChild(t)),this.offsets.push(s),this.idxs.push(t)):this.nextNodeAfterCurrent()}else{if(i(e))return this.nextNodeAfterCurrent(),e;{const t=KD(e);if(t===-1)return void this.nextNodeAfterCurrent();this.nextNodes.push(e.getChild(t)),this.offsets.push(s),this.idxs.push(t)}}}}nextNodeAfterCurrent(){for(;;){const t=$D(this.offsets),i=$D(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const e=$D(this.nextNodes),s=KD(e,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(e.getChild(s)),this.offsets.push(uD(t,i.length)),this.idxs[this.idxs.length-1]=s;break}this.idxs.pop()}}}function KD(t,i=-1){for(;;){if(++i>=t.childrenLength)return-1;if(t.getChild(i))return i}}function $D(t){return t.length>0?t[t.length-1]:void 0}function XD(t,i,e,s){return new qD(t,i,e,s).parseDocument()}class qD{constructor(t,i,e,s){if(this.tokenizer=t,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,e&&s)throw new Error("Not supported");this.oldNodeReader=e?new GD(e):void 0,this.positionMapper=new yD(i)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let t=this.parseList(CD.getEmpty(),0);return t||(t=SD.getEmpty()),t}parseList(t,i){const e=[];for(;;){let s=this.tryReadChildFromCache(t);if(!s){const e=this.tokenizer.peek();if(!e||e.kind===2&&e.bracketIds.intersects(t))break;s=this.parseChild(t,i+1)}s.kind===4&&s.childrenLength===0||e.push(s)}return this.oldNodeReader?function(t){if(t.length===0)return null;if(t.length===1)return t[0];let i=0;function e(){if(i>=t.length)return null;const e=i,s=t[e].listHeight;for(i++;i<t.length&&t[i].listHeight===s;)i++;return i-e>=2?_D(e===0&&i===t.length?t:t.slice(e,i),!1):t[e]}let s=e(),n=e();if(!n)return s;for(let t=e();t;t=e())VD(s,n)<=VD(n,t)?(s=JD(s,n),n=t):n=JD(n,t);return JD(s,n)}(e):_D(e,this.createImmutableLists)}tryReadChildFromCache(t){if(this.oldNodeReader){const i=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(i===null||!hD(i)){const e=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),(e=>i!==null&&!AD(e.length,i)?!1:e.canBeReused(t)));if(e)return this._itemsFromCache++,this.tokenizer.skip(e.length),e}}}parseChild(t,i){this._itemsConstructed++;const e=this.tokenizer.read();switch(e.kind){case 2:return new zD(e.bracketIds,e.length);case 0:return e.astNode;case 1:{if(i>300)return new QD(e.length);const s=t.merge(e.bracketIds),n=this.parseList(s,i+1),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===e.bracketId||o.bracketIds.intersects(e.bracketIds))?(this.tokenizer.read(),MD.create(e.astNode,n,o.astNode)):MD.create(e.astNode,n,null)}default:throw new Error("unexpected")}}}function ZD(t,i){if(t.length===0)return i;if(i.length===0)return t;const e=new L(iM(t)),s=iM(i);s.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let n=e.dequeue();function o(t){if(t===void 0){const t=e.takeWhile((t=>!0))||[];return n&&t.unshift(n),t}const i=[];for(;n&&!hD(t);){const[s,o]=n.splitAt(t);i.push(s),t=gD(s.lengthAfter,t),n=o??e.dequeue()}return hD(t)||i.push(new tM(!1,t,t)),i}const r=[];function h(t,i,e){if(r.length>0&&fD(r[r.length-1].endOffset,t)){const t=r[r.length-1];r[r.length-1]=new bD(t.startOffset,i,uD(t.newLength,e))}else r.push({startOffset:t,endOffset:i,newLength:e})}let c=rD;for(const t of s){const i=o(t.lengthBefore);if(t.modified){const e=uD(c,dD(i,(t=>t.lengthBefore)));h(c,e,t.lengthAfter),c=e}else for(const t of i){const i=c;c=uD(c,t.lengthBefore),t.modified&&h(i,c,t.lengthAfter)}}return r}class tM{constructor(t,i,e){this.modified=t,this.lengthBefore=i,this.lengthAfter=e}splitAt(t){const i=gD(t,this.lengthAfter);return fD(i,rD)?[this,void 0]:this.modified?[new tM(this.modified,this.lengthBefore,t),new tM(this.modified,rD,i)]:[new tM(this.modified,t,t),new tM(this.modified,i,i)]}toString(){return`${this.modified?"M":"U"}:${lD(this.lengthBefore)} -> ${lD(this.lengthAfter)}`}}function iM(t){const i=[];let e=rD;for(const s of t){const t=gD(e,s.startOffset);hD(t)||i.push(new tM(!1,t,t));const n=gD(s.startOffset,s.endOffset);i.push(new tM(!0,n,s.newLength)),e=s.endOffset}return i}class eM extends te{didLanguageChange(t){return this.brackets.didLanguageChange(t)}constructor(t,i){if(super(),this.textModel=t,this.getLanguageConfiguration=i,this.didChangeEmitter=new de,this.denseKeyProvider=new BD,this.brackets=new YD(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],t.tokenization.hasTokens)t.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const t=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),i=new jD(this.textModel.getValue(),t);this.initialAstWithoutTokens=XD(i,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const t=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,t||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:t}){const i=t.map((t=>new bD(aD(t.fromLineNumber-1,0),aD(t.toLineNumber,0),aD(t.toLineNumber-t.fromLineNumber+1,0))));this.handleEdits(i,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(t){const i=bD.fromModelContentChanges(t.changes);this.handleEdits(i,!1)}handleEdits(t,i){const e=ZD(this.queuedTextEdits,t);this.queuedTextEdits=e,this.initialAstWithoutTokens&&!i&&(this.queuedTextEditsForInitialAstWithoutTokens=ZD(this.queuedTextEditsForInitialAstWithoutTokens,t))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(t,i,e){const s=i;return XD(new HD(this.textModel,this.brackets),t,s,e)}getBracketsInRange(t,i){this.flushQueue();const e=aD(t.startLineNumber-1,t.startColumn-1),s=aD(t.endLineNumber-1,t.endColumn-1);return new R((t=>{const n=this.initialAstWithoutTokens||this.astWithTokens;oM(n,rD,n.length,e,s,t,0,0,new Map,i)}))}getBracketPairsInRange(t,i){this.flushQueue();const e=mD(t.getStartPosition()),s=mD(t.getEndPosition());return new R((t=>{const n=this.initialAstWithoutTokens||this.astWithTokens,o=new rM(t,i,this.textModel);hM(n,rD,n.length,e,s,o,0,new Map)}))}getFirstBracketAfter(t){this.flushQueue();const i=this.initialAstWithoutTokens||this.astWithTokens;return nM(i,rD,i.length,mD(t))}getFirstBracketBefore(t){this.flushQueue();const i=this.initialAstWithoutTokens||this.astWithTokens;return sM(i,rD,i.length,mD(t))}}function sM(t,i,e,s){if(t.kind===4||t.kind===2){const n=[];for(const s of t.children)e=uD(i,s.length),n.push({nodeOffsetStart:i,nodeOffsetEnd:e}),i=e;for(let i=n.length-1;i>=0;i--){const{nodeOffsetStart:e,nodeOffsetEnd:o}=n[i];if(AD(e,s)){const n=sM(t.children[i],e,o,s);if(n)return n}}return null}if(t.kind===3)return null;if(t.kind===1){const s=vD(i,e);return{bracketInfo:t.bracketInfo,range:s}}return null}function nM(t,i,e,s){if(t.kind===4||t.kind===2){for(const n of t.children){if(AD(s,e=uD(i,n.length))){const t=nM(n,i,e,s);if(t)return t}i=e}return null}if(t.kind===3)return null;if(t.kind===1){const s=vD(i,e);return{bracketInfo:t.bracketInfo,range:s}}return null}function oM(t,i,e,s,n,o,r,h,c,a,l=!1){if(r>200)return!0;t:for(;;)switch(t.kind){case 4:{const h=t.childrenLength;for(let l=0;l<h;l++){const h=t.getChild(l);if(h){if(e=uD(i,h.length),pD(i,n)&&wD(e,s)){if(wD(e,n)){t=h;continue t}if(!oM(h,i,e,s,n,o,r,0,c,a))return!1}i=e}}return!0}case 2:{const l=!a||!t.closingBracket||t.closingBracket.bracketInfo.closesColorized(t.openingBracket.bracketInfo);let u=0;if(c){let i=c.get(t.openingBracket.text);i===void 0&&(i=0),u=i,l&&(i++,c.set(t.openingBracket.text,i))}const d=t.childrenLength;for(let f=0;f<d;f++){const d=t.getChild(f);if(d){if(e=uD(i,d.length),pD(i,n)&&wD(e,s)){if(wD(e,n)&&d.kind!==1){t=d,l?(r++,h=u+1):h=u;continue t}if((l||d.kind!==1||!t.closingBracket)&&!oM(d,i,e,s,n,o,l?r+1:r,l?u+1:u,c,a,!t.closingBracket))return!1}i=e}}return c==null||c.set(t.openingBracket.text,u),!0}case 3:{const t=vD(i,e);return o(new eD(t,r-1,0,!0))}case 1:{const t=vD(i,e);return o(new eD(t,r-1,h-1,l))}case 0:return!0}}class rM{constructor(t,i,e){this.push=t,this.includeMinIndentation=i,this.textModel=e}}function hM(t,i,e,s,n,o,r,h){var c;if(r>200)return!0;let a=!0;if(t.kind===2){let l=0;if(h){let i=h.get(t.openingBracket.text);i===void 0&&(i=0),l=i,i++,h.set(t.openingBracket.text,i)}const u=uD(i,t.openingBracket.length);let d=-1;if(o.includeMinIndentation&&(d=t.computeMinIndentation(i,o.textModel)),a=o.push(new nD(vD(i,e),vD(i,u),t.closingBracket?vD(uD(u,((c=t.child)===null||c===void 0?void 0:c.length)||rD),e):void 0,r,l,t,d)),i=u,a&&t.child){const c=t.child;if(e=uD(i,c.length),pD(i,n)&&wD(e,s)&&(a=hM(c,i,e,s,n,o,r+1,h),!a))return!1}h==null||h.set(t.openingBracket.text,l)}else{let e=i;for(const i of t.children){const t=e;if(e=uD(e,i.length),pD(t,n)&&pD(s,e)&&(a=hM(i,t,e,s,n,o,r,h),!a))return!1}}return a}class cM extends te{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(t,i){super(),this.textModel=t,this.languageConfigurationService=i,this.bracketPairsTree=this._register(new ie),this.onDidChangeEmitter=new de,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange((t=>{var i;t.languageId&&!(!((i=this.bracketPairsTree.value)===null||i===void 0)&&i.object.didLanguageChange(t.languageId))||(this.bracketPairsTree.clear(),this.updateBracketPairsTree())})))}handleDidChangeOptions(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(t){var i;(i=this.bracketPairsTree.value)===null||i===void 0||i.object.handleContentChanged(t)}handleDidChangeBackgroundTokenizationState(){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(t){var i;(i=this.bracketPairsTree.value)===null||i===void 0||i.object.handleDidChangeTokens(t)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new Zi;this.bracketPairsTree.value=(t=e.add(new eM(this.textModel,(t=>this.languageConfigurationService.getLanguageConfiguration(t)))),i=e,{object:t,dispose:()=>i==null?void 0:i.dispose()}),e.add(this.bracketPairsTree.value.object.onDidChange((t=>this.onDidChangeEmitter.fire(t)))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire());var t,i}getBracketPairsInRange(t){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getBracketPairsInRange(t,!1))||R.empty}getBracketPairsInRangeWithMinIndentation(t){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getBracketPairsInRange(t,!0))||R.empty}getBracketsInRange(t,i=!1){var e;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((e=this.bracketPairsTree.value)===null||e===void 0?void 0:e.object.getBracketsInRange(t,i))||R.empty}findMatchingBracketUp(t,i,e){const s=this.textModel.validatePosition(i),n=this.textModel.getLanguageIdAtPosition(s.lineNumber,s.column);if(this.canBuildAST){const e=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew.getClosingBracketInfo(t);if(!e)return null;const s=this.getBracketPairsInRange(Es.fromPositions(i,i)).findLast((t=>e.closes(t.openingBracketInfo)));return s?s.openingBracketRange:null}{const i=t.toLowerCase(),o=this.languageConfigurationService.getLanguageConfiguration(n).brackets;if(!o)return null;const r=o.textIsBracket[i];return r?uM(this._findMatchingBracketUp(r,s,aM(e))):null}}matchBracket(t,i){if(this.canBuildAST){const i=this.getBracketPairsInRange(Es.fromPositions(t,t)).filter((i=>i.closingBracketRange!==void 0&&(i.openingBracketRange.containsPosition(t)||i.closingBracketRange.containsPosition(t)))).findLastMaxBy(M((i=>i.openingBracketRange.containsPosition(t)?i.openingBracketRange:i.closingBracketRange),Es.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}{const e=aM(i);return this._matchBracket(this.textModel.validatePosition(t),e)}}_establishBracketSearchOffsets(t,i,e,s){const n=i.getCount(),o=i.getLanguageId(s);let r=Math.max(0,t.column-1-e.maxBracketLength);for(let t=s-1;t>=0;t--){const e=i.getEndOffset(t);if(e<=r)break;if(td(i.getStandardTokenType(t))||i.getLanguageId(t)!==o){r=e;break}}let h=Math.min(i.getLineContent().length,t.column-1+e.maxBracketLength);for(let t=s+1;t<n;t++){const e=i.getStartOffset(t);if(e>=h)break;if(td(i.getStandardTokenType(t))||i.getLanguageId(t)!==o){h=e;break}}return{searchStartOffset:r,searchEndOffset:h}}_matchBracket(t,i){const e=t.lineNumber,s=this.textModel.tokenization.getLineTokens(e),n=this.textModel.getLineContent(e),o=s.findTokenIndexAtOffset(t.column-1);if(o<0)return null;const r=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(o)).brackets;if(r&&!td(s.getStandardTokenType(o))){let{searchStartOffset:h,searchEndOffset:c}=this._establishBracketSearchOffsets(t,s,r,o),a=null;for(;;){const s=Bd.findNextBracketInRange(r.forwardRegex,e,n,h,c);if(!s)break;if(s.startColumn<=t.column&&t.column<=s.endColumn){const t=n.substring(s.startColumn-1,s.endColumn-1).toLowerCase(),e=this._matchFoundBracket(s,r.textIsBracket[t],r.textIsOpenBracket[t],i);if(e){if(e instanceof lM)return null;a=e}}h=s.endColumn-1}if(a)return a}if(o>0&&s.getStartOffset(o)===t.column-1){const r=o-1,h=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(r)).brackets;if(h&&!td(s.getStandardTokenType(r))){const{searchStartOffset:o,searchEndOffset:c}=this._establishBracketSearchOffsets(t,s,h,r),a=Bd.findPrevBracketInRange(h.reversedRegex,e,n,o,c);if(a&&a.startColumn<=t.column&&t.column<=a.endColumn){const t=n.substring(a.startColumn-1,a.endColumn-1).toLowerCase(),e=this._matchFoundBracket(a,h.textIsBracket[t],h.textIsOpenBracket[t],i);if(e)return e instanceof lM?null:e}}}return null}_matchFoundBracket(t,i,e,s){if(!i)return null;const n=e?this._findMatchingBracketDown(i,t.getEndPosition(),s):this._findMatchingBracketUp(i,t.getStartPosition(),s);return n?n instanceof lM?n:[t,n]:null}_findMatchingBracketUp(t,i,e){const s=t.languageId,n=t.reversedRegex;let o=-1,r=0;const h=(i,s,h,c)=>{for(;;){if(e&&++r%100==0&&!e())return lM.INSTANCE;const a=Bd.findPrevBracketInRange(n,i,s,h,c);if(!a)break;const l=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(t.isOpen(l)?o++:t.isClose(l)&&o--,o===0)return a;c=a.startColumn-1}return null};for(let t=i.lineNumber;t>=1;t--){const e=this.textModel.tokenization.getLineTokens(t),n=e.getCount(),o=this.textModel.getLineContent(t);let r=n-1,c=o.length,a=o.length;t===i.lineNumber&&(r=e.findTokenIndexAtOffset(i.column-1),c=i.column-1,a=i.column-1);let l=!0;for(;r>=0;r--){const i=e.getLanguageId(r)===s&&!td(e.getStandardTokenType(r));if(i)l?c=e.getStartOffset(r):(c=e.getStartOffset(r),a=e.getEndOffset(r));else if(l&&c!==a){const i=h(t,o,c,a);if(i)return i}l=i}if(l&&c!==a){const i=h(t,o,c,a);if(i)return i}}return null}_findMatchingBracketDown(t,i,e){const s=t.languageId,n=t.forwardRegex;let o=1,r=0;const h=(i,s,h,c)=>{for(;;){if(e&&++r%100==0&&!e())return lM.INSTANCE;const a=Bd.findNextBracketInRange(n,i,s,h,c);if(!a)break;const l=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(t.isOpen(l)?o++:t.isClose(l)&&o--,o===0)return a;h=a.endColumn-1}return null},c=this.textModel.getLineCount();for(let t=i.lineNumber;t<=c;t++){const e=this.textModel.tokenization.getLineTokens(t),n=e.getCount(),o=this.textModel.getLineContent(t);let r=0,c=0,a=0;t===i.lineNumber&&(r=e.findTokenIndexAtOffset(i.column-1),c=i.column-1,a=i.column-1);let l=!0;for(;r<n;r++){const i=e.getLanguageId(r)===s&&!td(e.getStandardTokenType(r));if(i)l||(c=e.getStartOffset(r)),a=e.getEndOffset(r);else if(l&&c!==a){const i=h(t,o,c,a);if(i)return i}l=i}if(l&&c!==a){const i=h(t,o,c,a);if(i)return i}}return null}findPrevBracket(t){var i;const e=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getFirstBracketBefore(e))||null;let s=null,n=null,o=null;for(let t=e.lineNumber;t>=1;t--){const i=this.textModel.tokenization.getLineTokens(t),r=i.getCount(),h=this.textModel.getLineContent(t);let c=r-1,a=h.length,l=h.length;if(t===e.lineNumber){c=i.findTokenIndexAtOffset(e.column-1),a=e.column-1,l=e.column-1;const t=i.getLanguageId(c);s!==t&&(s=t,n=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let u=!0;for(;c>=0;c--){const e=i.getLanguageId(c);if(s!==e){if(n&&o&&u&&a!==l){const i=Bd.findPrevBracketInRange(n.reversedRegex,t,h,a,l);if(i)return this._toFoundBracket(o,i);u=!1}s=e,n=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const r=!!n&&!td(i.getStandardTokenType(c));if(r)u?a=i.getStartOffset(c):(a=i.getStartOffset(c),l=i.getEndOffset(c));else if(o&&n&&u&&a!==l){const i=Bd.findPrevBracketInRange(n.reversedRegex,t,h,a,l);if(i)return this._toFoundBracket(o,i)}u=r}if(o&&n&&u&&a!==l){const i=Bd.findPrevBracketInRange(n.reversedRegex,t,h,a,l);if(i)return this._toFoundBracket(o,i)}}return null}findNextBracket(t){var i;const e=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getFirstBracketAfter(e))||null;const s=this.textModel.getLineCount();let n=null,o=null,r=null;for(let t=e.lineNumber;t<=s;t++){const i=this.textModel.tokenization.getLineTokens(t),s=i.getCount(),h=this.textModel.getLineContent(t);let c=0,a=0,l=0;if(t===e.lineNumber){c=i.findTokenIndexAtOffset(e.column-1),a=e.column-1,l=e.column-1;const t=i.getLanguageId(c);n!==t&&(n=t,o=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let u=!0;for(;c<s;c++){const e=i.getLanguageId(c);if(n!==e){if(r&&o&&u&&a!==l){const i=Bd.findNextBracketInRange(o.forwardRegex,t,h,a,l);if(i)return this._toFoundBracket(r,i);u=!1}n=e,o=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const s=!!o&&!td(i.getStandardTokenType(c));if(s)u||(a=i.getStartOffset(c)),l=i.getEndOffset(c);else if(r&&o&&u&&a!==l){const i=Bd.findNextBracketInRange(o.forwardRegex,t,h,a,l);if(i)return this._toFoundBracket(r,i)}u=s}if(r&&o&&u&&a!==l){const i=Bd.findNextBracketInRange(o.forwardRegex,t,h,a,l);if(i)return this._toFoundBracket(r,i)}}return null}findEnclosingBrackets(t,i){const e=this.textModel.validatePosition(t);if(this.canBuildAST){const t=Es.fromPositions(e),i=this.getBracketPairsInRange(Es.fromPositions(e,e)).findLast((i=>i.closingBracketRange!==void 0&&i.range.strictContainsRange(t)));return i?[i.openingBracketRange,i.closingBracketRange]:null}const s=aM(i),n=this.textModel.getLineCount(),o=new Map;let r=[];const h=(t,i)=>{if(!o.has(t)){const e=[];for(let t=0,s=i?i.brackets.length:0;t<s;t++)e[t]=0;o.set(t,e)}r=o.get(t)};let c=0;const a=(t,i,e,n,o)=>{for(;;){if(s&&++c%100==0&&!s())return lM.INSTANCE;const h=Bd.findNextBracketInRange(t.forwardRegex,i,e,n,o);if(!h)break;const a=e.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),l=t.textIsBracket[a];if(l&&(l.isOpen(a)?r[l.index]++:l.isClose(a)&&r[l.index]--,r[l.index]===-1))return this._matchFoundBracket(h,l,!1,s);n=h.endColumn-1}return null};let l=null,u=null;for(let t=e.lineNumber;t<=n;t++){const i=this.textModel.tokenization.getLineTokens(t),s=i.getCount(),n=this.textModel.getLineContent(t);let o=0,r=0,c=0;if(t===e.lineNumber){o=i.findTokenIndexAtOffset(e.column-1),r=e.column-1,c=e.column-1;const t=i.getLanguageId(o);l!==t&&(l=t,u=this.languageConfigurationService.getLanguageConfiguration(l).brackets,h(l,u))}let d=!0;for(;o<s;o++){const e=i.getLanguageId(o);if(l!==e){if(u&&d&&r!==c){const i=a(u,t,n,r,c);if(i)return uM(i);d=!1}l=e,u=this.languageConfigurationService.getLanguageConfiguration(l).brackets,h(l,u)}const s=!!u&&!td(i.getStandardTokenType(o));if(s)d||(r=i.getStartOffset(o)),c=i.getEndOffset(o);else if(u&&d&&r!==c){const i=a(u,t,n,r,c);if(i)return uM(i)}d=s}if(u&&d&&r!==c){const i=a(u,t,n,r,c);if(i)return uM(i)}}return null}_toFoundBracket(t,i){if(!i)return null;let e=this.textModel.getValueInRange(i);e=e.toLowerCase();const s=t.getBracketInfo(e);return s?{range:i,bracketInfo:s}:null}}function aM(t){if(t===void 0)return()=>!0;{const i=Date.now();return()=>Date.now()-i<=t}}class lM{constructor(){this._searchCanceledBrand=void 0}}function uM(t){return t instanceof lM?null:t}lM.INSTANCE=new lM;class dM extends te{constructor(t){super(),this.textModel=t,this.colorProvider=new fM,this.onDidChangeEmitter=new de,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=t.getOptions().bracketPairColorizationOptions,this._register(t.bracketPairs.onDidChange((t=>{this.onDidChangeEmitter.fire()})))}handleDidChangeOptions(t){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(t,i,e,s){return s?[]:i===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(t,!0).map((t=>({id:`bracket${t.range.toString()}-${t.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(t,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:t.range}))).toArray():[]}getAllDecorations(t,i){return t===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new Es(1,1,this.textModel.getLineCount(),1),t,i):[]}}class fM{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(t,i){return t.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(i?t.nestingLevelOfEqualBracketType:t.nestingLevel)}getInlineClassNameOfLevel(t){return"bracket-highlighting-"+t%30}}function gM(t){return t.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}Nk(((t,i)=>{const e=[wx,mx,vx,bx,yx,kx],s=new fM;i.addRule(`.monaco-editor .${s.unexpectedClosingBracketClassName} { color: ${t.getColor(xx)}; }`);const n=e.map((i=>t.getColor(i))).filter((t=>!!t)).filter((t=>!t.isTransparent()));for(let t=0;t<30;t++){const e=n[t%n.length];i.addRule(`.monaco-editor .${s.getInlineClassNameOfLevel(t)} { color: ${e}; }`)}}));class AM{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,i,e,s){this.oldPosition=t,this.oldText=i,this.newPosition=e,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${gM(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${gM(this.oldText)}")`:`(replace@${this.oldPosition} "${gM(this.oldText)}" with "${gM(this.newText)}")`}static _writeStringSize(t){return 4+2*t.length}static _writeString(t,i,e){const s=i.length;ud(t,s,e),e+=4;for(let n=0;n<s;n++)ad(t,i.charCodeAt(n),e),e+=2;return e}static _readString(t,i){const e=ld(t,i);return pd(t,i+=4,e)}writeSize(){return 8+AM._writeStringSize(this.oldText)+AM._writeStringSize(this.newText)}write(t,i){return ud(t,this.oldPosition,i),i+=4,ud(t,this.newPosition,i),i+=4,i=AM._writeString(t,this.oldText,i),i=AM._writeString(t,this.newText,i)}static read(t,i,e){const s=ld(t,i),n=ld(t,i+=4);i+=4;const o=AM._readString(t,i);i+=AM._writeStringSize(o);const r=AM._readString(t,i);return i+=AM._writeStringSize(r),e.push(new AM(s,o,n,r)),i}}class pM{constructor(t,i){this._prevEdits=t,this._currEdits=i,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let t=0,i=0,e=this._getPrev(t),s=this._getCurr(i);for(;t<this._prevLen||i<this._currLen;){if(e===null){this._acceptCurr(s),s=this._getCurr(++i);continue}if(s===null){this._acceptPrev(e),e=this._getPrev(++t);continue}if(s.oldEnd<=e.newPosition){this._acceptCurr(s),s=this._getCurr(++i);continue}if(e.newEnd<=s.oldPosition){this._acceptPrev(e),e=this._getPrev(++t);continue}if(s.oldPosition<e.newPosition){const[t,i]=pM._splitCurr(s,e.newPosition-s.oldPosition);this._acceptCurr(t),s=i;continue}if(e.newPosition<s.oldPosition){const[t,i]=pM._splitPrev(e,s.oldPosition-e.newPosition);this._acceptPrev(t),e=i;continue}let n,o;if(s.oldEnd===e.newEnd)n=e,o=s,e=this._getPrev(++t),s=this._getCurr(++i);else if(s.oldEnd<e.newEnd){const[t,r]=pM._splitPrev(e,s.oldLength);n=t,o=s,e=r,s=this._getCurr(++i)}else{const[i,r]=pM._splitCurr(s,e.newLength);n=e,o=i,e=this._getPrev(++t),s=r}this._result[this._resultLen++]=new AM(n.oldPosition,n.oldText,o.newPosition,o.newText),this._prevDeltaOffset+=n.newLength-n.oldLength,this._currDeltaOffset+=o.newLength-o.oldLength}const n=pM._merge(this._result);return pM._removeNoOps(n)}_acceptCurr(t){this._result[this._resultLen++]=pM._rebaseCurr(this._prevDeltaOffset,t),this._currDeltaOffset+=t.newLength-t.oldLength}_getCurr(t){return t<this._currLen?this._currEdits[t]:null}_acceptPrev(t){this._result[this._resultLen++]=pM._rebasePrev(this._currDeltaOffset,t),this._prevDeltaOffset+=t.newLength-t.oldLength}_getPrev(t){return t<this._prevLen?this._prevEdits[t]:null}static _rebaseCurr(t,i){return new AM(i.oldPosition-t,i.oldText,i.newPosition,i.newText)}static _rebasePrev(t,i){return new AM(i.oldPosition,i.oldText,i.newPosition+t,i.newText)}static _splitPrev(t,i){const e=t.newText.substr(0,i),s=t.newText.substr(i);return[new AM(t.oldPosition,t.oldText,t.newPosition,e),new AM(t.oldEnd,"",t.newPosition+i,s)]}static _splitCurr(t,i){const e=t.oldText.substr(0,i),s=t.oldText.substr(i);return[new AM(t.oldPosition,e,t.newPosition,t.newText),new AM(t.oldPosition+i,s,t.newEnd,"")]}static _merge(t){if(t.length===0)return t;const i=[];let e=0,s=t[0];for(let n=1;n<t.length;n++){const o=t[n];s.oldEnd===o.oldPosition?s=new AM(s.oldPosition,s.oldText+o.oldText,s.newPosition,s.newText+o.newText):(i[e++]=s,s=o)}return i[e++]=s,i}static _removeNoOps(t){if(t.length===0)return t;const i=[];let e=0;for(let s=0;s<t.length;s++){const n=t[s];n.oldText!==n.newText&&(i[e++]=n)}return i}}function wM(t){return t===47||t===92}function mM(t){return t.replace(/[\\/]/g,Ze.sep)}function vM(t,i=Ze.sep){if(!t)return"";const e=t.length,s=t.charCodeAt(0);if(wM(s)){if(wM(t.charCodeAt(1))&&!wM(t.charCodeAt(2))){let s=3;const n=s;for(;s<e&&!wM(t.charCodeAt(s));s++);if(n!==s&&!wM(t.charCodeAt(s+1))){for(s+=1;s<e;s++)if(wM(t.charCodeAt(s)))return t.slice(0,s+1).replace(/[\\/]/g,i)}}return i}if(yM(s)&&t.charCodeAt(1)===58)return wM(t.charCodeAt(2))?t.slice(0,2)+i:t.slice(0,2);let n=t.indexOf("://");if(n!==-1){for(n+=3;n<e;n++)if(wM(t.charCodeAt(n)))return t.slice(0,n+1)}return""}function bM(t,i,e,s=rs){if(t===i)return!0;if(!t||!i||i.length>t.length)return!1;if(e){if(!Ao(t,i))return!1;if(i.length===t.length)return!0;let e=i.length;return i.charAt(i.length-1)===s&&e--,t.charAt(e)===s}return i.charAt(i.length-1)!==s&&(i+=s),t.indexOf(i)===0}function yM(t){return t>=65&&t<=90||t>=97&&t<=122}function kM(t){return vs(t,!0)}const xM=new class{constructor(t){this._ignorePathCasing=t}compare(t,i,e=!1){return t===i?0:ro(this.getComparisonKey(t,e),this.getComparisonKey(i,e))}isEqual(t,i,e=!1){return t===i||!(!t||!i)&&this.getComparisonKey(t,e)===this.getComparisonKey(i,e)}getComparisonKey(t,i=!1){return t.with({path:this._ignorePathCasing(t)?t.path.toLowerCase():void 0,fragment:i?null:void 0}).toString()}isEqualOrParent(t,i,e=!1){if(t.scheme===i.scheme){if(t.scheme===Lh.file)return bM(kM(t),kM(i),this._ignorePathCasing(t))&&t.query===i.query&&(e||t.fragment===i.fragment);if(RM(t.authority,i.authority))return bM(t.path,i.path,this._ignorePathCasing(t),"/")&&t.query===i.query&&(e||t.fragment===i.fragment)}return!1}joinPath(t,...i){return fs.joinPath(t,...i)}basenameOrAuthority(t){return BM(t)||t.authority}basename(t){return Ze.basename(t.path)}extname(t){return Ze.extname(t.path)}dirname(t){if(t.path.length===0)return t;let i;return t.scheme===Lh.file?i=fs.file(ss(kM(t))).path:(i=Ze.dirname(t.path),t.authority&&i.length&&i.charCodeAt(0)!==47&&(console.error(`dirname("${t.toString})) resulted in a relative path`),i="/")),t.with({path:i})}normalizePath(t){if(!t.path.length)return t;let i;return i=t.scheme===Lh.file?fs.file(ts(kM(t))).path:Ze.normalize(t.path),t.with({path:i})}relativePath(t,i){if(t.scheme!==i.scheme||!RM(t.authority,i.authority))return;if(t.scheme===Lh.file){const e=es(kM(t),kM(i));return yt?mM(e):e}let e=t.path||"/";const s=i.path||"/";if(this._ignorePathCasing(t)){let t=0;for(const i=Math.min(e.length,s.length);t<i&&(e.charCodeAt(t)===s.charCodeAt(t)||e.charAt(t).toLowerCase()===s.charAt(t).toLowerCase());t++);e=s.substr(0,t)+e.substr(t)}return Ze.relative(e,s)}resolvePath(t,i){if(t.scheme===Lh.file){const e=fs.file(is(kM(t),i));return t.with({authority:e.authority,path:e.path})}var e;return(e=i).indexOf("/")===-1&&(e=mM(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),i=e,t.with({path:Ze.resolve(t.path,i)})}isAbsolutePath(t){return!!t.path&&t.path[0]==="/"}isEqualAuthority(t,i){return t===i||t!==void 0&&i!==void 0&&go(t,i)}hasTrailingPathSeparator(t,i=rs){if(t.scheme===Lh.file){const e=kM(t);return e.length>vM(e).length&&e[e.length-1]===i}{const i=t.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(t.fsPath)}}removeTrailingPathSeparator(t,i=rs){return TM(t,i)?t.with({path:t.path.substr(0,t.path.length-1)}):t}addTrailingPathSeparator(t,i=rs){let e=!1;if(t.scheme===Lh.file){const s=kM(t);e=s!==void 0&&s.length===vM(s).length&&s[s.length-1]===i}else{i="/";const s=t.path;e=s.length===1&&s.charCodeAt(s.length-1)===47}return e||TM(t,i)?t:t.with({path:t.path+"/"})}}((()=>!1)),CM=xM.isEqual.bind(xM);xM.isEqualOrParent.bind(xM),xM.getComparisonKey.bind(xM);const EM=xM.basenameOrAuthority.bind(xM),BM=xM.basename.bind(xM),DM=xM.extname.bind(xM),MM=xM.dirname.bind(xM),SM=xM.joinPath.bind(xM),FM=xM.normalizePath.bind(xM),IM=xM.relativePath.bind(xM),LM=xM.resolvePath.bind(xM);xM.isAbsolutePath.bind(xM);const RM=xM.isEqualAuthority.bind(xM),TM=xM.hasTrailingPathSeparator.bind(xM);var NM;function QM(t){return t.toString()}xM.removeTrailingPathSeparator.bind(xM),xM.addTrailingPathSeparator.bind(xM),function(t){t.META_DATA_LABEL="label",t.META_DATA_DESCRIPTION="description",t.META_DATA_SIZE="size",t.META_DATA_MIME="mime",t.parseMetaData=function(i){const e=new Map;i.path.substring(i.path.indexOf(";")+1,i.path.lastIndexOf(";")).split(";").forEach((t=>{const[i,s]=t.split(":");i&&s&&e.set(i,s)}));const s=i.path.substring(0,i.path.indexOf(";"));return s&&e.set(t.META_DATA_MIME,s),e}}(NM||(NM={}));class OM{static create(t,i){const e=t.getAlternativeVersionId(),s=HM(t);return new OM(e,e,s,s,i,i,[])}constructor(t,i,e,s,n,o,r){this.beforeVersionId=t,this.afterVersionId=i,this.beforeEOL=e,this.afterEOL=s,this.beforeCursorState=n,this.afterCursorState=o,this.changes=r}append(t,i,e,s,n){var o,r;i.length>0&&(this.changes=(o=this.changes,r=i,o===null||o.length===0?r:new pM(o,r).compress())),this.afterEOL=e,this.afterVersionId=s,this.afterCursorState=n}static _writeSelectionsSize(t){return 4+16*(t?t.length:0)}static _writeSelections(t,i,e){if(ud(t,i?i.length:0,e),e+=4,i)for(const s of i)ud(t,s.selectionStartLineNumber,e),e+=4,ud(t,s.selectionStartColumn,e),e+=4,ud(t,s.positionLineNumber,e),e+=4,ud(t,s.positionColumn,e),e+=4;return e}static _readSelections(t,i,e){const s=ld(t,i);i+=4;for(let n=0;n<s;n++){const s=ld(t,i),n=ld(t,i+=4),o=ld(t,i+=4),r=ld(t,i+=4);i+=4,e.push(new Bs(s,n,o,r))}return i}serialize(){let t=10+OM._writeSelectionsSize(this.beforeCursorState)+OM._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)t+=i.writeSize();const i=new Uint8Array(t);let e=0;ud(i,this.beforeVersionId,e),e+=4,ud(i,this.afterVersionId,e),e+=4,fd(i,this.beforeEOL,e),e+=1,fd(i,this.afterEOL,e),e+=1,e=OM._writeSelections(i,this.beforeCursorState,e),e=OM._writeSelections(i,this.afterCursorState,e),ud(i,this.changes.length,e),e+=4;for(const t of this.changes)e=t.write(i,e);return i.buffer}static deserialize(t){const i=new Uint8Array(t);let e=0;const s=ld(i,e);e+=4;const n=ld(i,e);e+=4;const o=dd(i,e);e+=1;const r=dd(i,e);e+=1;const h=[];e=OM._readSelections(i,e,h);const c=[];e=OM._readSelections(i,e,c);const a=ld(i,e);e+=4;const l=[];for(let t=0;t<a;t++)e=AM.read(i,e,l);return new OM(s,n,o,r,h,c,l)}}class zM{get type(){return 0}get resource(){return fs.isUri(this.model)?this.model:this.model.uri}constructor(t,i,e,s){this.label=t,this.code=i,this.model=e,this._data=OM.create(e,s)}toString(){return(this._data instanceof OM?this._data:OM.deserialize(this._data)).changes.map((t=>t.toString())).join(", ")}matchesResource(t){return(fs.isUri(this.model)?this.model:this.model.uri).toString()===t.toString()}setModel(t){this.model=t}canAppend(t){return this.model===t&&this._data instanceof OM}append(t,i,e,s,n){this._data instanceof OM&&this._data.append(t,i,e,s,n)}close(){this._data instanceof OM&&(this._data=this._data.serialize())}open(){this._data instanceof OM||(this._data=OM.deserialize(this._data))}undo(){if(fs.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof OM&&(this._data=this._data.serialize());const t=OM.deserialize(this._data);this.model._applyUndo(t.changes,t.beforeEOL,t.beforeVersionId,t.beforeCursorState)}redo(){if(fs.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof OM&&(this._data=this._data.serialize());const t=OM.deserialize(this._data);this.model._applyRedo(t.changes,t.afterEOL,t.afterVersionId,t.afterCursorState)}heapSize(){return this._data instanceof OM&&(this._data=this._data.serialize()),this._data.byteLength+168}}class UM{get resources(){return this._editStackElementsArr.map((t=>t.resource))}constructor(t,i,e){this.label=t,this.code=i,this.type=1,this._isOpen=!0,this._editStackElementsArr=e.slice(0),this._editStackElementsMap=new Map;for(const t of this._editStackElementsArr){const i=QM(t.resource);this._editStackElementsMap.set(i,t)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(t){const i=QM(t);return this._editStackElementsMap.has(i)}setModel(t){const i=QM(fs.isUri(t)?t:t.uri);this._editStackElementsMap.has(i)&&this._editStackElementsMap.get(i).setModel(t)}canAppend(t){if(!this._isOpen)return!1;const i=QM(t.uri);return this._editStackElementsMap.has(i)?this._editStackElementsMap.get(i).canAppend(t):!1}append(t,i,e,s,n){const o=QM(t.uri);this._editStackElementsMap.get(o).append(t,i,e,s,n)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const t of this._editStackElementsArr)t.undo()}redo(){for(const t of this._editStackElementsArr)t.redo()}heapSize(t){const i=QM(t);return this._editStackElementsMap.has(i)?this._editStackElementsMap.get(i).heapSize():0}split(){return this._editStackElementsArr}toString(){const t=[];for(const i of this._editStackElementsArr)t.push(`${BM(i.resource)}: ${i}`);return`{${t.join(", ")}}`}}function HM(t){return t.getEOL()===`\n`?0:1}function PM(t){return!!t&&(t instanceof zM||t instanceof UM)}class jM{constructor(t,i){this._model=t,this._undoRedoService=i}pushStackElement(){const t=this._undoRedoService.getLastElement(this._model.uri);PM(t)&&t.close()}popStackElement(){const t=this._undoRedoService.getLastElement(this._model.uri);PM(t)&&t.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(t,i){const e=this._undoRedoService.getLastElement(this._model.uri);if(PM(e)&&e.canAppend(this._model))return e;const s=new zM(st(0,"Typing"),"undoredo.textBufferEdit",this._model,t);return this._undoRedoService.pushElement(s,i),s}pushEOL(t){const i=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(t),i.append(this._model,[],HM(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(t,i,e,s){const n=this._getOrCreateEditStackElement(t,s),o=this._model.applyEdits(i,!0),r=jM._computeCursorState(e,o),h=o.map(((t,i)=>({index:i,textChange:t.textChange})));return h.sort(((t,i)=>t.textChange.oldPosition===i.textChange.oldPosition?t.index-i.index:t.textChange.oldPosition-i.textChange.oldPosition)),n.append(this._model,h.map((t=>t.textChange)),HM(this._model),this._model.getAlternativeVersionId(),r),r}static _computeCursorState(t,i){try{return t?t(i):null}catch(t){return Oi(t),null}}}class WM{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function YM(t,i,e,s,n){let o;for(n.spacesDiff=0,n.looksLikeAlignment=!1,o=0;o<i&&o<s&&t.charCodeAt(o)===e.charCodeAt(o);o++);let r=0,h=0;for(let e=o;e<i;e++)t.charCodeAt(e)===32?r++:h++;let c=0,a=0;for(let t=o;t<s;t++)e.charCodeAt(t)===32?c++:a++;if(r>0&&h>0||c>0&&a>0)return;const l=Math.abs(h-a),u=Math.abs(r-c);if(l===0)return n.spacesDiff=u,void(u>0&&0<=c-1&&c-1<t.length&&c<e.length&&e.charCodeAt(c)!==32&&t.charCodeAt(c-1)===32&&t.charCodeAt(t.length-1)===44&&(n.looksLikeAlignment=!0));u%l!=0||(n.spacesDiff=u/l)}function _M(t,i,e){const s=Math.min(t.getLineCount(),1e4);let n=0,o=0,r="",h=0;const c=[2,4,6,8,3,5,7],a=[0,0,0,0,0,0,0,0,0],l=new WM;for(let c=1;c<=s;c++){const s=t.getLineLength(c),u=t.getLineContent(c),d=s<=65536;let f=!1,g=0,A=0,p=0;for(let i=0,e=s;i<e;i++){const e=d?u.charCodeAt(i):t.getLineCharCode(c,i);if(e===9)p++;else{if(e!==32){f=!0,g=i;break}A++}}if(!f||(p>0?n++:A>1&&o++,YM(r,h,u,g,l),l.looksLikeAlignment&&(!e||i!==l.spacesDiff)))continue;const w=l.spacesDiff;w<=8&&a[w]++,r=u,h=g}let u=e;n!==o&&(u=n<o);let d=i;if(u){let t=u?0:.1*s;c.forEach((i=>{const e=a[i];e>t&&(t=e,d=i)})),d===4&&a[4]>0&&a[2]>0&&a[2]>=a[4]/2&&(d=2)}return{insertSpaces:u,tabSize:d}}function VM(t){return(1&t.metadata)>>>0}function JM(t,i){t.metadata=254&t.metadata|i}function GM(t){return(2&t.metadata)>>>1==1}function KM(t,i){t.metadata=253&t.metadata|(i?1:0)<<1}function $M(t){return(4&t.metadata)>>>2==1}function XM(t,i){t.metadata=251&t.metadata|(i?1:0)<<2}function qM(t){return(64&t.metadata)>>>6==1}function ZM(t,i){t.metadata=191&t.metadata|(i?1:0)<<6}function tS(t,i){t.metadata=231&t.metadata|i<<3}function iS(t,i){t.metadata=223&t.metadata|(i?1:0)<<5}class eS{constructor(t,i,e){this.metadata=0,this.parent=this,this.left=this,this.right=this,JM(this,1),this.start=i,this.end=e,this.delta=0,this.maxEnd=e,this.id=t,this.ownerId=0,this.options=null,XM(this,!1),ZM(this,!1),tS(this,1),iS(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=i,this.cachedAbsoluteEnd=e,this.range=null,KM(this,!1)}reset(t,i,e,s){this.start=i,this.end=e,this.maxEnd=e,this.cachedVersionId=t,this.cachedAbsoluteStart=i,this.cachedAbsoluteEnd=e,this.range=s}setOptions(t){this.options=t;const i=this.options.className;XM(this,i==="squiggly-error"||i==="squiggly-warning"||i==="squiggly-info"),ZM(this,this.options.glyphMarginClassName!==null),tS(this,this.options.stickiness),iS(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(t,i,e){this.cachedVersionId!==e&&(this.range=null),this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i}detach(){this.parent=null,this.left=null,this.right=null}}const sS=new eS(null,0,0);sS.parent=sS,sS.left=sS,sS.right=sS,JM(sS,0);class nS{constructor(){this.root=sS,this.requestNormalizeDelta=!1}intervalSearch(t,i,e,s,n,o){return this.root===sS?[]:function(t,i,e,s,n,o,r){let h=t.root,c=0,a=0,l=0,u=0;const d=[];let f=0;for(;h!==sS;)if(GM(h))KM(h.left,!1),KM(h.right,!1),h===h.parent.right&&(c-=h.parent.delta),h=h.parent;else{if(!GM(h.left)){if(a=c+h.maxEnd,a<i){KM(h,!0);continue}if(h.left!==sS){h=h.left;continue}}if(l=c+h.start,l>e)KM(h,!0);else{if(u=c+h.end,u>=i){h.setCachedOffsets(l,u,o);let t=!0;s&&h.ownerId&&h.ownerId!==s&&(t=!1),n&&$M(h)&&(t=!1),r&&!qM(h)&&(t=!1),t&&(d[f++]=h)}KM(h,!0),h.right===sS||GM(h.right)||(c+=h.delta,h=h.right)}}return KM(t.root,!1),d}(this,t,i,e,s,n,o)}search(t,i,e,s){return this.root===sS?[]:function(t,i,e,s,n){let o=t.root,r=0,h=0,c=0;const a=[];let l=0;for(;o!==sS;){if(GM(o)){KM(o.left,!1),KM(o.right,!1),o===o.parent.right&&(r-=o.parent.delta),o=o.parent;continue}if(o.left!==sS&&!GM(o.left)){o=o.left;continue}h=r+o.start,c=r+o.end,o.setCachedOffsets(h,c,s);let t=!0;i&&o.ownerId&&o.ownerId!==i&&(t=!1),e&&$M(o)&&(t=!1),n&&!qM(o)&&(t=!1),t&&(a[l++]=o),KM(o,!0),o.right===sS||GM(o.right)||(r+=o.delta,o=o.right)}return KM(t.root,!1),a}(this,t,i,e,s)}collectNodesFromOwner(t){return function(t,i){let e=t.root;const s=[];let n=0;for(;e!==sS;)GM(e)?(KM(e.left,!1),KM(e.right,!1),e=e.parent):e.left===sS||GM(e.left)?(e.ownerId===i&&(s[n++]=e),KM(e,!0),e.right===sS||GM(e.right)||(e=e.right)):e=e.left;return KM(t.root,!1),s}(this,t)}collectNodesPostOrder(){return function(t){let i=t.root;const e=[];let s=0;for(;i!==sS;)GM(i)?(KM(i.left,!1),KM(i.right,!1),i=i.parent):i.left===sS||GM(i.left)?i.right===sS||GM(i.right)?(e[s++]=i,KM(i,!0)):i=i.right:i=i.left;return KM(t.root,!1),e}(this)}insert(t){hS(this,t),this._normalizeDeltaIfNecessary()}delete(t){cS(this,t),this._normalizeDeltaIfNecessary()}resolveNode(t,i){const e=t;let s=0;for(;t!==this.root;)t===t.parent.right&&(s+=t.parent.delta),t=t.parent;const n=e.start+s,o=e.end+s;e.setCachedOffsets(n,o,i)}acceptReplace(t,i,e,s){const n=function(t,i,e){let s=t.root,n=0,o=0,r=0,h=0;const c=[];let a=0;for(;s!==sS;)if(GM(s))KM(s.left,!1),KM(s.right,!1),s===s.parent.right&&(n-=s.parent.delta),s=s.parent;else{if(!GM(s.left)){if(o=n+s.maxEnd,o<i){KM(s,!0);continue}if(s.left!==sS){s=s.left;continue}}r=n+s.start,r>e?KM(s,!0):(h=n+s.end,h>=i&&(s.setCachedOffsets(r,h,0),c[a++]=s),KM(s,!0),s.right===sS||GM(s.right)||(n+=s.delta,s=s.right))}return KM(t.root,!1),c}(this,t,t+i);for(let t=0,i=n.length;t<i;t++)cS(this,n[t]);this._normalizeDeltaIfNecessary(),function(t,i,e,s){let n=t.root,o=0,r=0,h=0;const c=s-(e-i);for(;n!==sS;)if(GM(n))KM(n.left,!1),KM(n.right,!1),n===n.parent.right&&(o-=n.parent.delta),fS(n),n=n.parent;else{if(!GM(n.left)){if(r=o+n.maxEnd,r<i){KM(n,!0);continue}if(n.left!==sS){n=n.left;continue}}h=o+n.start,h>e?(n.start+=c,n.end+=c,n.delta+=c,(n.delta<-1073741824||n.delta>1073741824)&&(t.requestNormalizeDelta=!0),KM(n,!0)):(KM(n,!0),n.right===sS||GM(n.right)||(o+=n.delta,n=n.right))}KM(t.root,!1)}(this,t,t+i,e),this._normalizeDeltaIfNecessary();for(let o=0,r=n.length;o<r;o++){const r=n[o];r.start=r.cachedAbsoluteStart,r.end=r.cachedAbsoluteEnd,rS(r,t,t+i,e,s),r.maxEnd=r.end,hS(this,r)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function(t){let i=t.root,e=0;for(;i!==sS;)i.left===sS||GM(i.left)?i.right===sS||GM(i.right)?(i.start=e+i.start,i.end=e+i.end,i.delta=0,fS(i),KM(i,!0),KM(i.left,!1),KM(i.right,!1),i===i.parent.right&&(e-=i.parent.delta),i=i.parent):(e+=i.delta,i=i.right):i=i.left;KM(t.root,!1)}(this))}}function oS(t,i,e,s){return t<e||!(t>e)&&s!==1&&(s===2||i)}function rS(t,i,e,s,n){const o=function(t){return(24&t.metadata)>>>3}(t),r=o===0||o===2,h=o===1||o===2,c=e-i,a=s,l=Math.min(c,a),u=t.start;let d=!1;const f=t.end;let g=!1;i<=u&&f<=e&&function(t){return(32&t.metadata)>>>5==1}(t)&&(t.start=i,d=!0,t.end=i,g=!0);{const t=n?1:c>0?2:0;!d&&oS(u,r,i,t)&&(d=!0),!g&&oS(f,h,i,t)&&(g=!0)}if(l>0&&!n){const t=c>a?2:0;!d&&oS(u,r,i+l,t)&&(d=!0),!g&&oS(f,h,i+l,t)&&(g=!0)}{const s=n?1:0;!d&&oS(u,r,e,s)&&(t.start=i+a,d=!0),!g&&oS(f,h,e,s)&&(t.end=i+a,g=!0)}const A=a-c;d||(t.start=Math.max(0,u+A)),g||(t.end=Math.max(0,f+A)),t.start>t.end&&(t.end=t.start)}function hS(t,i){if(t.root===sS)return i.parent=sS,i.left=sS,i.right=sS,JM(i,0),t.root=i,t.root;(function(t,i){let e=0,s=t.root;const n=i.start,o=i.end;for(;;)if(AS(n,o,s.start+e,s.end+e)<0){if(s.left===sS){i.start-=e,i.end-=e,i.maxEnd-=e,s.left=i;break}s=s.left}else{if(s.right===sS){i.start-=e+s.delta,i.end-=e+s.delta,i.maxEnd-=e+s.delta,s.right=i;break}e+=s.delta,s=s.right}i.parent=s,i.left=sS,i.right=sS,JM(i,1)})(t,i),gS(i.parent);let e=i;for(;e!==t.root&&VM(e.parent)===1;)if(e.parent===e.parent.parent.left){const i=e.parent.parent.right;VM(i)===1?(JM(e.parent,0),JM(i,0),JM(e.parent.parent,1),e=e.parent.parent):(e===e.parent.right&&(e=e.parent,lS(t,e)),JM(e.parent,0),JM(e.parent.parent,1),uS(t,e.parent.parent))}else{const i=e.parent.parent.left;VM(i)===1?(JM(e.parent,0),JM(i,0),JM(e.parent.parent,1),e=e.parent.parent):(e===e.parent.left&&(e=e.parent,uS(t,e)),JM(e.parent,0),JM(e.parent.parent,1),lS(t,e.parent.parent))}return JM(t.root,0),i}function cS(t,i){let e,s;if(i.left===sS?(e=i.right,s=i,e.delta+=i.delta,(e.delta<-1073741824||e.delta>1073741824)&&(t.requestNormalizeDelta=!0),e.start+=i.delta,e.end+=i.delta):i.right===sS?(e=i.left,s=i):(s=function(t){for(;t.left!==sS;)t=t.left;return t}(i.right),e=s.right,e.start+=s.delta,e.end+=s.delta,e.delta+=s.delta,(e.delta<-1073741824||e.delta>1073741824)&&(t.requestNormalizeDelta=!0),s.start+=i.delta,s.end+=i.delta,s.delta=i.delta,(s.delta<-1073741824||s.delta>1073741824)&&(t.requestNormalizeDelta=!0)),s===t.root)return t.root=e,JM(e,0),i.detach(),aS(),fS(e),void(t.root.parent=sS);const n=VM(s)===1;if(s===s.parent.left?s.parent.left=e:s.parent.right=e,s===i?e.parent=s.parent:(s.parent===i?e.parent=s:e.parent=s.parent,s.left=i.left,s.right=i.right,s.parent=i.parent,JM(s,VM(i)),i===t.root?t.root=s:i===i.parent.left?i.parent.left=s:i.parent.right=s,s.left!==sS&&(s.left.parent=s),s.right!==sS&&(s.right.parent=s)),i.detach(),n)return gS(e.parent),s!==i&&(gS(s),gS(s.parent)),void aS();let o;for(gS(e),gS(e.parent),s!==i&&(gS(s),gS(s.parent));e!==t.root&&VM(e)===0;)e===e.parent.left?(o=e.parent.right,VM(o)===1&&(JM(o,0),JM(e.parent,1),lS(t,e.parent),o=e.parent.right),VM(o.left)===0&&VM(o.right)===0?(JM(o,1),e=e.parent):(VM(o.right)===0&&(JM(o.left,0),JM(o,1),uS(t,o),o=e.parent.right),JM(o,VM(e.parent)),JM(e.parent,0),JM(o.right,0),lS(t,e.parent),e=t.root)):(o=e.parent.left,VM(o)===1&&(JM(o,0),JM(e.parent,1),uS(t,e.parent),o=e.parent.left),VM(o.left)===0&&VM(o.right)===0?(JM(o,1),e=e.parent):(VM(o.left)===0&&(JM(o.right,0),JM(o,1),lS(t,o),o=e.parent.left),JM(o,VM(e.parent)),JM(e.parent,0),JM(o.left,0),uS(t,e.parent),e=t.root));JM(e,0),aS()}function aS(){sS.parent=sS,sS.delta=0,sS.start=0,sS.end=0}function lS(t,i){const e=i.right;e.delta+=i.delta,(e.delta<-1073741824||e.delta>1073741824)&&(t.requestNormalizeDelta=!0),e.start+=i.delta,e.end+=i.delta,i.right=e.left,e.left!==sS&&(e.left.parent=i),e.parent=i.parent,i.parent===sS?t.root=e:i===i.parent.left?i.parent.left=e:i.parent.right=e,e.left=i,i.parent=e,fS(i),fS(e)}function uS(t,i){const e=i.left;i.delta-=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(t.requestNormalizeDelta=!0),i.start-=e.delta,i.end-=e.delta,i.left=e.right,e.right!==sS&&(e.right.parent=i),e.parent=i.parent,i.parent===sS?t.root=e:i===i.parent.right?i.parent.right=e:i.parent.left=e,e.right=i,i.parent=e,fS(i),fS(e)}function dS(t){let i=t.end;if(t.left!==sS){const e=t.left.maxEnd;e>i&&(i=e)}if(t.right!==sS){const e=t.right.maxEnd+t.delta;e>i&&(i=e)}return i}function fS(t){t.maxEnd=dS(t)}function gS(t){for(;t!==sS;){const i=dS(t);if(t.maxEnd===i)return;t.maxEnd=i,t=t.parent}}function AS(t,i,e,s){return t===e?i-s:t-e}class pS{constructor(t,i){this.piece=t,this.color=i,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==wS)return mS(this.right);let t=this;for(;t.parent!==wS&&t.parent.left!==t;)t=t.parent;return t.parent===wS?wS:t.parent}prev(){if(this.left!==wS)return vS(this.left);let t=this;for(;t.parent!==wS&&t.parent.right!==t;)t=t.parent;return t.parent===wS?wS:t.parent}detach(){this.parent=null,this.left=null,this.right=null}}const wS=new pS(null,0);function mS(t){for(;t.left!==wS;)t=t.left;return t}function vS(t){for(;t.right!==wS;)t=t.right;return t}function bS(t){return t===wS?0:t.size_left+t.piece.length+bS(t.right)}function yS(t){return t===wS?0:t.lf_left+t.piece.lineFeedCnt+yS(t.right)}function kS(){wS.parent=wS}function xS(t,i){const e=i.right;e.size_left+=i.size_left+(i.piece?i.piece.length:0),e.lf_left+=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),i.right=e.left,e.left!==wS&&(e.left.parent=i),e.parent=i.parent,i.parent===wS?t.root=e:i.parent.left===i?i.parent.left=e:i.parent.right=e,e.left=i,i.parent=e}function CS(t,i){const e=i.left;i.left=e.right,e.right!==wS&&(e.right.parent=i),e.parent=i.parent,i.size_left-=e.size_left+(e.piece?e.piece.length:0),i.lf_left-=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),i.parent===wS?t.root=e:i===i.parent.right?i.parent.right=e:i.parent.left=e,e.right=i,i.parent=e}function ES(t,i){let e,s;if(i.left===wS?(s=i,e=s.right):i.right===wS?(s=i,e=s.left):(s=mS(i.right),e=s.right),s===t.root)return t.root=e,e.color=0,i.detach(),kS(),void(t.root.parent=wS);const n=s.color===1;if(s===s.parent.left?s.parent.left=e:s.parent.right=e,s===i?(e.parent=s.parent,MS(t,e)):(s.parent===i?e.parent=s:e.parent=s.parent,MS(t,e),s.left=i.left,s.right=i.right,s.parent=i.parent,s.color=i.color,i===t.root?t.root=s:i===i.parent.left?i.parent.left=s:i.parent.right=s,s.left!==wS&&(s.left.parent=s),s.right!==wS&&(s.right.parent=s),s.size_left=i.size_left,s.lf_left=i.lf_left,MS(t,s)),i.detach(),e.parent.left===e){const i=bS(e),s=yS(e);if(i!==e.parent.size_left||s!==e.parent.lf_left){const n=i-e.parent.size_left,o=s-e.parent.lf_left;e.parent.size_left=i,e.parent.lf_left=s,DS(t,e.parent,n,o)}}if(MS(t,e.parent),n)return void kS();let o;for(;e!==t.root&&e.color===0;)e===e.parent.left?(o=e.parent.right,o.color===1&&(o.color=0,e.parent.color=1,xS(t,e.parent),o=e.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,e=e.parent):(o.right.color===0&&(o.left.color=0,o.color=1,CS(t,o),o=e.parent.right),o.color=e.parent.color,e.parent.color=0,o.right.color=0,xS(t,e.parent),e=t.root)):(o=e.parent.left,o.color===1&&(o.color=0,e.parent.color=1,CS(t,e.parent),o=e.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,e=e.parent):(o.left.color===0&&(o.right.color=0,o.color=1,xS(t,o),o=e.parent.left),o.color=e.parent.color,e.parent.color=0,o.left.color=0,CS(t,e.parent),e=t.root));e.color=0,kS()}function BS(t,i){for(MS(t,i);i!==t.root&&i.parent.color===1;)if(i.parent===i.parent.parent.left){const e=i.parent.parent.right;e.color===1?(i.parent.color=0,e.color=0,i.parent.parent.color=1,i=i.parent.parent):(i===i.parent.right&&xS(t,i=i.parent),i.parent.color=0,i.parent.parent.color=1,CS(t,i.parent.parent))}else{const e=i.parent.parent.left;e.color===1?(i.parent.color=0,e.color=0,i.parent.parent.color=1,i=i.parent.parent):(i===i.parent.left&&CS(t,i=i.parent),i.parent.color=0,i.parent.parent.color=1,xS(t,i.parent.parent))}t.root.color=0}function DS(t,i,e,s){for(;i!==t.root&&i!==wS;)i.parent.left===i&&(i.parent.size_left+=e,i.parent.lf_left+=s),i=i.parent}function MS(t,i){let e=0,s=0;if(i!==t.root){for(;i!==t.root&&i===i.parent.right;)i=i.parent;if(i!==t.root)for(e=bS((i=i.parent).left)-i.size_left,s=yS(i.left)-i.lf_left,i.size_left+=e,i.lf_left+=s;i!==t.root&&(e!==0||s!==0);)i.parent.left===i&&(i.parent.size_left+=e,i.parent.lf_left+=s),i=i.parent}}wS.parent=wS,wS.left=wS,wS.right=wS,wS.color=0;const SS=65535;function FS(t){let i;return i=t[t.length-1]<65536?new Uint16Array(t.length):new Uint32Array(t.length),i.set(t,0),i}class IS{constructor(t,i,e,s,n){this.lineStarts=t,this.cr=i,this.lf=e,this.crlf=s,this.isBasicASCII=n}}function LS(t,i=!0){const e=[0];let s=1;for(let i=0,n=t.length;i<n;i++){const o=t.charCodeAt(i);o===13?i+1<n&&t.charCodeAt(i+1)===10?(e[s++]=i+2,i++):e[s++]=i+1:o===10&&(e[s++]=i+1)}return i?FS(e):e}class RS{constructor(t,i,e,s,n){this.bufferIndex=t,this.start=i,this.end=e,this.lineFeedCnt=s,this.length=n}}class TS{constructor(t,i){this.buffer=t,this.lineStarts=i}}class NS{constructor(t,i){this._pieces=[],this._tree=t,this._BOM=i,this._index=0,t.root!==wS&&t.iterate(t.root,(t=>(t!==wS&&this._pieces.push(t.piece),!0)))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class QS{constructor(t){this._limit=t,this._cache=[]}get(t){for(let i=this._cache.length-1;i>=0;i--){const e=this._cache[i];if(e.nodeStartOffset<=t&&e.nodeStartOffset+e.node.piece.length>=t)return e}return null}get2(t){for(let i=this._cache.length-1;i>=0;i--){const e=this._cache[i];if(e.nodeStartLineNumber&&e.nodeStartLineNumber<t&&e.nodeStartLineNumber+e.node.piece.lineFeedCnt>=t)return e}return null}set(t){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(t)}validate(t){let i=!1;const e=this._cache;for(let s=0;s<e.length;s++){const n=e[s];(n.node.parent===null||n.nodeStartOffset>=t)&&(e[s]=null,i=!0)}if(i){const t=[];for(const i of e)i!==null&&t.push(i);this._cache=t}}}class OS{constructor(t,i,e){this.create(t,i,e)}create(t,i,e){this._buffers=[new TS("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=wS,this._lineCnt=1,this._length=0,this._EOL=i,this._EOLLength=i.length,this._EOLNormalized=e;let s=null;for(let i=0,e=t.length;i<e;i++)if(t[i].buffer.length>0){t[i].lineStarts||(t[i].lineStarts=LS(t[i].buffer));const e=new RS(i+1,{line:0,column:0},{line:t[i].lineStarts.length-1,column:t[i].buffer.length-t[i].lineStarts[t[i].lineStarts.length-1]},t[i].lineStarts.length-1,t[i].buffer.length);this._buffers.push(t[i]),s=this.rbInsertRight(s,e)}this._searchCache=new QS(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(t){const i=SS,e=i-Math.floor(21845),s=2*e;let n="",o=0;const r=[];if(this.iterate(this.root,(i=>{const h=this.getNodeContent(i),c=h.length;if(o<=e||o+c<s)return n+=h,o+=c,!0;const a=n.replace(/\r\n|\r|\n/g,t);return r.push(new TS(a,LS(a))),n=h,o=c,!0})),o>0){const i=n.replace(/\r\n|\r|\n/g,t);r.push(new TS(i,LS(i)))}this.create(r,t,!0)}getEOL(){return this._EOL}setEOL(t){this._EOL=t,this._EOLLength=this._EOL.length,this.normalizeEOL(t)}createSnapshot(t){return new NS(this,t)}getOffsetAt(t,i){let e=0,s=this.root;for(;s!==wS;)if(s.left!==wS&&s.lf_left+1>=t)s=s.left;else{if(s.lf_left+s.piece.lineFeedCnt+1>=t)return e+=s.size_left,e+(this.getAccumulatedValue(s,t-s.lf_left-2)+i-1);t-=s.lf_left+s.piece.lineFeedCnt,e+=s.size_left+s.piece.length,s=s.right}return e}getPositionAt(t){t=Math.floor(t),t=Math.max(0,t);let i=this.root,e=0;const s=t;for(;i!==wS;)if(i.size_left!==0&&i.size_left>=t)i=i.left;else{if(i.size_left+i.piece.length>=t){const n=this.getIndexOf(i,t-i.size_left);if(e+=i.lf_left+n.index,n.index===0){const t=this.getOffsetAt(e+1,1);return new Cs(e+1,s-t+1)}return new Cs(e+1,n.remainder+1)}if(t-=i.size_left+i.piece.length,e+=i.lf_left+i.piece.lineFeedCnt,i.right===wS){const i=this.getOffsetAt(e+1,1);return new Cs(e+1,s-t-i+1)}i=i.right}return new Cs(1,1)}getValueInRange(t,i){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return"";const e=this.nodeAt2(t.startLineNumber,t.startColumn),s=this.nodeAt2(t.endLineNumber,t.endColumn),n=this.getValueInRange2(e,s);return i?i===this._EOL&&this._EOLNormalized&&i===this.getEOL()&&this._EOLNormalized?n:n.replace(/\r\n|\r|\n/g,i):n}getValueInRange2(t,i){if(t.node===i.node){const e=t.node,s=this._buffers[e.piece.bufferIndex].buffer,n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);return s.substring(n+t.remainder,n+i.remainder)}let e=t.node;const s=this._buffers[e.piece.bufferIndex].buffer,n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);let o=s.substring(n+t.remainder,n+e.piece.length);for(e=e.next();e!==wS;){const t=this._buffers[e.piece.bufferIndex].buffer,s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);if(e===i.node){o+=t.substring(s,s+i.remainder);break}o+=t.substr(s,e.piece.length),e=e.next()}return o}getLinesContent(){const t=[];let i=0,e="",s=!1;return this.iterate(this.root,(n=>{if(n===wS)return!0;const o=n.piece;let r=o.length;if(r===0)return!0;const h=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,a=o.start.line,l=o.end.line;let u=c[a]+o.start.column;if(s&&(h.charCodeAt(u)===10&&(u++,r--),t[i++]=e,e="",s=!1,r===0))return!0;if(a===l)return this._EOLNormalized||h.charCodeAt(u+r-1)!==13?e+=h.substr(u,r):(s=!0,e+=h.substr(u,r-1)),!0;e+=this._EOLNormalized?h.substring(u,Math.max(u,c[a+1]-this._EOLLength)):h.substring(u,c[a+1]).replace(/(\r\n|\r|\n)$/,""),t[i++]=e;for(let s=a+1;s<l;s++)e=this._EOLNormalized?h.substring(c[s],c[s+1]-this._EOLLength):h.substring(c[s],c[s+1]).replace(/(\r\n|\r|\n)$/,""),t[i++]=e;return this._EOLNormalized||h.charCodeAt(c[l]+o.end.column-1)!==13?e=h.substr(c[l],o.end.column):(s=!0,o.end.column===0?i--:e=h.substr(c[l],o.end.column-1)),!0})),s&&(t[i++]=e,e=""),t[i++]=e,t}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(t){return this._lastVisitedLine.lineNumber===t||(this._lastVisitedLine.lineNumber=t,t===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(t):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(t,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(t).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(t){if(t.remainder===t.node.piece.length){const i=t.node.next();if(!i)return 0;const e=this._buffers[i.piece.bufferIndex],s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return e.buffer.charCodeAt(s)}{const i=this._buffers[t.node.piece.bufferIndex],e=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start)+t.remainder;return i.buffer.charCodeAt(e)}}getLineCharCode(t,i){const e=this.nodeAt2(t,i+1);return this._getCharCode(e)}getLineLength(t){if(t===this.getLineCount()){const i=this.getOffsetAt(t,1);return this.getLength()-i}return this.getOffsetAt(t+1,1)-this.getOffsetAt(t,1)-this._EOLLength}findMatchesInNode(t,i,e,s,n,o,r,h,c,a,l){const u=this._buffers[t.piece.bufferIndex],d=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start),f=this.offsetInBuffer(t.piece.bufferIndex,n),g=this.offsetInBuffer(t.piece.bufferIndex,o);let A;const p={line:0,column:0};let w,m;i._wordSeparators?(w=u.buffer.substring(f,g),m=t=>t+f,i.reset(0)):(w=u.buffer,m=t=>t,i.reset(f));do{if(A=i.next(w),A){if(m(A.index)>=g)return a;this.positionInBuffer(t,m(A.index)-d,p);const i=this.getLineFeedCnt(t.piece.bufferIndex,n,p),o=p.line===n.line?p.column-n.column+s:p.column+1,r=o+A[0].length;if(l[a++]=ug(new Es(e+i,o,e+i,r),A,h),m(A.index)+A[0].length>=g||a>=c)return a}}while(A);return a}findMatchesLineByLine(t,i,e,s){const n=[];let o=0;const r=new Ag(i.wordSeparators,i.regex);let h=this.nodeAt2(t.startLineNumber,t.startColumn);if(h===null)return[];const c=this.nodeAt2(t.endLineNumber,t.endColumn);if(c===null)return[];let a=this.positionInBuffer(h.node,h.remainder);const l=this.positionInBuffer(c.node,c.remainder);if(h.node===c.node)return this.findMatchesInNode(h.node,r,t.startLineNumber,t.startColumn,a,l,i,e,s,o,n),n;let u=t.startLineNumber,d=h.node;for(;d!==c.node;){const c=this.getLineFeedCnt(d.piece.bufferIndex,a,d.piece.end);if(c>=1){const h=this._buffers[d.piece.bufferIndex].lineStarts,l=this.offsetInBuffer(d.piece.bufferIndex,d.piece.start),f=h[a.line+c],g=u===t.startLineNumber?t.startColumn:1;if(o=this.findMatchesInNode(d,r,u,g,a,this.positionInBuffer(d,f-l),i,e,s,o,n),o>=s)return n;u+=c}const l=u===t.startLineNumber?t.startColumn-1:0;if(u===t.endLineNumber){const h=this.getLineContent(u).substring(l,t.endColumn-1);return o=this._findMatchesInLine(i,r,h,t.endLineNumber,l,o,n,e,s),n}if(o=this._findMatchesInLine(i,r,this.getLineContent(u).substr(l),u,l,o,n,e,s),o>=s)return n;u++,h=this.nodeAt2(u,1),d=h.node,a=this.positionInBuffer(h.node,h.remainder)}if(u===t.endLineNumber){const h=u===t.startLineNumber?t.startColumn-1:0,c=this.getLineContent(u).substring(h,t.endColumn-1);return o=this._findMatchesInLine(i,r,c,t.endLineNumber,h,o,n,e,s),n}const f=u===t.startLineNumber?t.startColumn:1;return o=this.findMatchesInNode(c.node,r,u,f,a,l,i,e,s,o,n),n}_findMatchesInLine(t,i,e,s,n,o,r,h,c){const a=t.wordSeparators;if(!h&&t.simpleSearch){const i=t.simpleSearch,h=i.length,l=e.length;let u=-h;for(;(u=e.indexOf(i,u+h))!==-1;)if((!a||gg(a,e,l,u,h))&&(r[o++]=new og(new Es(s,u+1+n,s,u+1+h+n),null),o>=c))return o;return o}let l;i.reset(0);do{if(l=i.next(e),l&&(r[o++]=ug(new Es(s,l.index+1+n,s,l.index+1+l[0].length+n),l,h),o>=c))return o}while(l);return o}insert(t,i,e=!1){if(this._EOLNormalized=this._EOLNormalized&&e,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==wS){const{node:e,remainder:s,nodeStartOffset:n}=this.nodeAt(t),o=e.piece,r=o.bufferIndex,h=this.positionInBuffer(e,s);if(e.piece.bufferIndex===0&&o.end.line===this._lastChangeBufferPos.line&&o.end.column===this._lastChangeBufferPos.column&&n+o.length===t&&i.length<SS)return this.appendToNode(e,i),void this.computeBufferMetadata();if(n===t)this.insertContentToNodeLeft(i,e),this._searchCache.validate(t);else if(n+e.piece.length>t){const t=[];let n=new RS(o.bufferIndex,h,o.end,this.getLineFeedCnt(o.bufferIndex,h,o.end),this.offsetInBuffer(r,o.end)-this.offsetInBuffer(r,h));if(this.shouldCheckCRLF()&&this.endWithCR(i)&&this.nodeCharCodeAt(e,s)===10){const t={line:n.start.line+1,column:0};n=new RS(n.bufferIndex,t,n.end,this.getLineFeedCnt(n.bufferIndex,t,n.end),n.length-1),i+=`\n`}if(this.shouldCheckCRLF()&&this.startWithLF(i))if(this.nodeCharCodeAt(e,s-1)===13){const n=this.positionInBuffer(e,s-1);this.deleteNodeTail(e,n),i="\r"+i,e.piece.length===0&&t.push(e)}else this.deleteNodeTail(e,h);else this.deleteNodeTail(e,h);const c=this.createNewPieces(i);n.length>0&&this.rbInsertRight(e,n);let a=e;for(let t=0;t<c.length;t++)a=this.rbInsertRight(a,c[t]);this.deleteNodes(t)}else this.insertContentToNodeRight(i,e)}else{const t=this.createNewPieces(i);let e=this.rbInsertLeft(null,t[0]);for(let i=1;i<t.length;i++)e=this.rbInsertRight(e,t[i])}this.computeBufferMetadata()}delete(t,i){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",i<=0||this.root===wS)return;const e=this.nodeAt(t),s=this.nodeAt(t+i),n=e.node,o=s.node;if(n===o){const o=this.positionInBuffer(n,e.remainder),r=this.positionInBuffer(n,s.remainder);if(e.nodeStartOffset===t){if(i===n.piece.length){const t=n.next();return ES(this,n),this.validateCRLFWithPrevNode(t),void this.computeBufferMetadata()}return this.deleteNodeHead(n,r),this._searchCache.validate(t),this.validateCRLFWithPrevNode(n),void this.computeBufferMetadata()}return e.nodeStartOffset+n.piece.length===t+i?(this.deleteNodeTail(n,o),this.validateCRLFWithNextNode(n),void this.computeBufferMetadata()):(this.shrinkNode(n,o,r),void this.computeBufferMetadata())}const r=[],h=this.positionInBuffer(n,e.remainder);this.deleteNodeTail(n,h),this._searchCache.validate(t),n.piece.length===0&&r.push(n);const c=this.positionInBuffer(o,s.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&r.push(o);for(let t=n.next();t!==wS&&t!==o;t=t.next())r.push(t);const a=n.piece.length===0?n.prev():n;this.deleteNodes(r),this.validateCRLFWithNextNode(a),this.computeBufferMetadata()}insertContentToNodeLeft(t,i){const e=[];if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.startWithLF(i)){const s=i.piece,n={line:s.start.line+1,column:0},o=new RS(s.bufferIndex,n,s.end,this.getLineFeedCnt(s.bufferIndex,n,s.end),s.length-1);i.piece=o,t+=`\n`,DS(this,i,-1,-1),i.piece.length===0&&e.push(i)}const s=this.createNewPieces(t);let n=this.rbInsertLeft(i,s[s.length-1]);for(let t=s.length-2;t>=0;t--)n=this.rbInsertLeft(n,s[t]);this.validateCRLFWithPrevNode(n),this.deleteNodes(e)}insertContentToNodeRight(t,i){this.adjustCarriageReturnFromNext(t,i)&&(t+=`\n`);const e=this.createNewPieces(t),s=this.rbInsertRight(i,e[0]);let n=s;for(let t=1;t<e.length;t++)n=this.rbInsertRight(n,e[t]);this.validateCRLFWithPrevNode(s)}positionInBuffer(t,i,e){const s=t.piece,n=t.piece.bufferIndex,o=this._buffers[n].lineStarts,r=o[s.start.line]+s.start.column+i;let h=s.start.line,c=s.end.line,a=0,l=0,u=0;for(;h<=c&&(a=h+(c-h)/2|0,u=o[a],a!==c);)if(l=o[a+1],r<u)c=a-1;else{if(!(r>=l))break;h=a+1}return e?(e.line=a,e.column=r-u,null):{line:a,column:r-u}}getLineFeedCnt(t,i,e){if(e.column===0)return e.line-i.line;const s=this._buffers[t].lineStarts;if(e.line===s.length-1)return e.line-i.line;const n=s[e.line+1],o=s[e.line]+e.column;if(n>o+1)return e.line-i.line;const r=o-1;return this._buffers[t].buffer.charCodeAt(r)===13?e.line-i.line+1:e.line-i.line}offsetInBuffer(t,i){return this._buffers[t].lineStarts[i.line]+i.column}deleteNodes(t){for(let i=0;i<t.length;i++)ES(this,t[i])}createNewPieces(t){if(t.length>SS){const i=[];for(;t.length>SS;){const e=t.charCodeAt(65534);let s;e===13||e>=55296&&e<=56319?(s=t.substring(0,65534),t=t.substring(65534)):(s=t.substring(0,SS),t=t.substring(SS));const n=LS(s);i.push(new RS(this._buffers.length,{line:0,column:0},{line:n.length-1,column:s.length-n[n.length-1]},n.length-1,s.length)),this._buffers.push(new TS(s,n))}const e=LS(t);return i.push(new RS(this._buffers.length,{line:0,column:0},{line:e.length-1,column:t.length-e[e.length-1]},e.length-1,t.length)),this._buffers.push(new TS(t,e)),i}let i=this._buffers[0].buffer.length;const e=LS(t,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===i&&i!==0&&this.startWithLF(t)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let t=0;t<e.length;t++)e[t]+=i+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(e.slice(1)),this._buffers[0].buffer+="_"+t,i+=1}else{if(i!==0)for(let t=0;t<e.length;t++)e[t]+=i;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(e.slice(1)),this._buffers[0].buffer+=t}const n=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,r={line:o,column:n-this._buffers[0].lineStarts[o]},h=new RS(0,s,r,this.getLineFeedCnt(0,s,r),n-i);return this._lastChangeBufferPos=r,[h]}getLineRawContent(t,i=0){let e=this.root,s="";const n=this._searchCache.get2(t);if(n){e=n.node;const o=this.getAccumulatedValue(e,t-n.nodeStartLineNumber-1),r=this._buffers[e.piece.bufferIndex].buffer,h=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);if(n.nodeStartLineNumber+e.piece.lineFeedCnt!==t){const s=this.getAccumulatedValue(e,t-n.nodeStartLineNumber);return r.substring(h+o,h+s-i)}s=r.substring(h+o,h+e.piece.length)}else{let n=0;const o=t;for(;e!==wS;)if(e.left!==wS&&e.lf_left>=t-1)e=e.left;else{if(e.lf_left+e.piece.lineFeedCnt>t-1){const s=this.getAccumulatedValue(e,t-e.lf_left-2),r=this.getAccumulatedValue(e,t-e.lf_left-1),h=this._buffers[e.piece.bufferIndex].buffer,c=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);return n+=e.size_left,this._searchCache.set({node:e,nodeStartOffset:n,nodeStartLineNumber:o-(t-1-e.lf_left)}),h.substring(c+s,c+r-i)}if(e.lf_left+e.piece.lineFeedCnt===t-1){const i=this.getAccumulatedValue(e,t-e.lf_left-2),n=this._buffers[e.piece.bufferIndex].buffer,o=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);s=n.substring(o+i,o+e.piece.length);break}t-=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right}}for(e=e.next();e!==wS;){const t=this._buffers[e.piece.bufferIndex].buffer;if(e.piece.lineFeedCnt>0){const n=this.getAccumulatedValue(e,0),o=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);return s+=t.substring(o,o+n-i),s}{const i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);s+=t.substr(i,e.piece.length)}e=e.next()}return s}computeBufferMetadata(){let t=this.root,i=1,e=0;for(;t!==wS;)i+=t.lf_left+t.piece.lineFeedCnt,e+=t.size_left+t.piece.length,t=t.right;this._lineCnt=i,this._length=e,this._searchCache.validate(this._length)}getIndexOf(t,i){const e=t.piece,s=this.positionInBuffer(t,i),n=s.line-e.start.line;if(this.offsetInBuffer(e.bufferIndex,e.end)-this.offsetInBuffer(e.bufferIndex,e.start)===i){const i=this.getLineFeedCnt(t.piece.bufferIndex,e.start,s);if(i!==n)return{index:i,remainder:0}}return{index:n,remainder:s.column}}getAccumulatedValue(t,i){if(i<0)return 0;const e=t.piece,s=this._buffers[e.bufferIndex].lineStarts,n=e.start.line+i+1;return n>e.end.line?s[e.end.line]+e.end.column-s[e.start.line]-e.start.column:s[n]-s[e.start.line]-e.start.column}deleteNodeTail(t,i){const e=t.piece,s=e.lineFeedCnt,n=this.offsetInBuffer(e.bufferIndex,e.end),o=i,r=this.offsetInBuffer(e.bufferIndex,o),h=this.getLineFeedCnt(e.bufferIndex,e.start,o),c=h-s,a=r-n,l=e.length+a;t.piece=new RS(e.bufferIndex,e.start,o,h,l),DS(this,t,a,c)}deleteNodeHead(t,i){const e=t.piece,s=e.lineFeedCnt,n=this.offsetInBuffer(e.bufferIndex,e.start),o=i,r=this.getLineFeedCnt(e.bufferIndex,o,e.end),h=r-s,c=n-this.offsetInBuffer(e.bufferIndex,o),a=e.length+c;t.piece=new RS(e.bufferIndex,o,e.end,r,a),DS(this,t,c,h)}shrinkNode(t,i,e){const s=t.piece,n=s.start,o=s.end,r=s.length,h=s.lineFeedCnt,c=i,a=this.getLineFeedCnt(s.bufferIndex,s.start,c),l=this.offsetInBuffer(s.bufferIndex,i)-this.offsetInBuffer(s.bufferIndex,n);t.piece=new RS(s.bufferIndex,s.start,c,a,l),DS(this,t,l-r,a-h);const u=new RS(s.bufferIndex,e,o,this.getLineFeedCnt(s.bufferIndex,e,o),this.offsetInBuffer(s.bufferIndex,o)-this.offsetInBuffer(s.bufferIndex,e)),d=this.rbInsertRight(t,u);this.validateCRLFWithPrevNode(d)}appendToNode(t,i){this.adjustCarriageReturnFromNext(i,t)&&(i+=`\n`);const e=this.shouldCheckCRLF()&&this.startWithLF(i)&&this.endWithCR(t),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=i;const n=LS(i,!1);for(let t=0;t<n.length;t++)n[t]+=s;if(e){const t=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-t}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1));const o=this._buffers[0].lineStarts.length-1,r={line:o,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[o]},h=t.piece.length+i.length,c=t.piece.lineFeedCnt,a=this.getLineFeedCnt(0,t.piece.start,r),l=a-c;t.piece=new RS(t.piece.bufferIndex,t.piece.start,r,a,h),this._lastChangeBufferPos=r,DS(this,t,i.length,l)}nodeAt(t){let i=this.root;const e=this._searchCache.get(t);if(e)return{node:e.node,nodeStartOffset:e.nodeStartOffset,remainder:t-e.nodeStartOffset};let s=0;for(;i!==wS;)if(i.size_left>t)i=i.left;else{if(i.size_left+i.piece.length>=t){s+=i.size_left;const e={node:i,remainder:t-i.size_left,nodeStartOffset:s};return this._searchCache.set(e),e}t-=i.size_left+i.piece.length,s+=i.size_left+i.piece.length,i=i.right}return null}nodeAt2(t,i){let e=this.root,s=0;for(;e!==wS;)if(e.left!==wS&&e.lf_left>=t-1)e=e.left;else{if(e.lf_left+e.piece.lineFeedCnt>t-1){const n=this.getAccumulatedValue(e,t-e.lf_left-2),o=this.getAccumulatedValue(e,t-e.lf_left-1);return s+=e.size_left,{node:e,remainder:Math.min(n+i-1,o),nodeStartOffset:s}}if(e.lf_left+e.piece.lineFeedCnt===t-1){const n=this.getAccumulatedValue(e,t-e.lf_left-2);if(n+i-1<=e.piece.length)return{node:e,remainder:n+i-1,nodeStartOffset:s};i-=e.piece.length-n;break}t-=e.lf_left+e.piece.lineFeedCnt,s+=e.size_left+e.piece.length,e=e.right}for(e=e.next();e!==wS;){if(e.piece.lineFeedCnt>0){const t=this.getAccumulatedValue(e,0),s=this.offsetOfNode(e);return{node:e,remainder:Math.min(i-1,t),nodeStartOffset:s}}if(e.piece.length>=i-1)return{node:e,remainder:i-1,nodeStartOffset:this.offsetOfNode(e)};i-=e.piece.length,e=e.next()}return null}nodeCharCodeAt(t,i){if(t.piece.lineFeedCnt<1)return-1;const e=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start)+i;return e.buffer.charCodeAt(s)}offsetOfNode(t){if(!t)return 0;let i=t.size_left;for(;t!==this.root;)t.parent.right===t&&(i+=t.parent.size_left+t.parent.piece.length),t=t.parent;return i}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`\n`)}startWithLF(t){if(typeof t=="string")return t.charCodeAt(0)===10;if(t===wS||t.piece.lineFeedCnt===0)return!1;const i=t.piece,e=this._buffers[i.bufferIndex].lineStarts,s=i.start.line,n=e[s]+i.start.column;return s===e.length-1?!1:!(e[s+1]>n+1)&&this._buffers[i.bufferIndex].buffer.charCodeAt(n)===10}endWithCR(t){return typeof t=="string"?t.charCodeAt(t.length-1)===13:t!==wS&&t.piece.lineFeedCnt!==0&&this.nodeCharCodeAt(t,t.piece.length-1)===13}validateCRLFWithPrevNode(t){if(this.shouldCheckCRLF()&&this.startWithLF(t)){const i=t.prev();this.endWithCR(i)&&this.fixCRLF(i,t)}}validateCRLFWithNextNode(t){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const i=t.next();this.startWithLF(i)&&this.fixCRLF(t,i)}}fixCRLF(t,i){const e=[],s=this._buffers[t.piece.bufferIndex].lineStarts;let n;n=t.piece.end.column===0?{line:t.piece.end.line-1,column:s[t.piece.end.line]-s[t.piece.end.line-1]-1}:{line:t.piece.end.line,column:t.piece.end.column-1};const o=t.piece.length-1,r=t.piece.lineFeedCnt-1;t.piece=new RS(t.piece.bufferIndex,t.piece.start,n,r,o),DS(this,t,-1,-1),t.piece.length===0&&e.push(t);const h={line:i.piece.start.line+1,column:0},c=i.piece.length-1,a=this.getLineFeedCnt(i.piece.bufferIndex,h,i.piece.end);i.piece=new RS(i.piece.bufferIndex,h,i.piece.end,a,c),DS(this,i,-1,-1),i.piece.length===0&&e.push(i);const l=this.createNewPieces(`\r\n`);this.rbInsertRight(t,l[0]);for(let t=0;t<e.length;t++)ES(this,e[t])}adjustCarriageReturnFromNext(t,i){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const e=i.next();if(this.startWithLF(e)){if(t+=`\n`,e.piece.length===1)ES(this,e);else{const t=e.piece,i={line:t.start.line+1,column:0},s=t.length-1,n=this.getLineFeedCnt(t.bufferIndex,i,t.end);e.piece=new RS(t.bufferIndex,i,t.end,n,s),DS(this,e,-1,-1)}return!0}}return!1}iterate(t,i){if(t===wS)return i(wS);const e=this.iterate(t.left,i);return e&&i(t)&&this.iterate(t.right,i)}getNodeContent(t){if(t===wS)return"";const i=this._buffers[t.piece.bufferIndex],e=t.piece,s=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return i.buffer.substring(s,n)}getPieceContent(t){const i=this._buffers[t.bufferIndex],e=this.offsetInBuffer(t.bufferIndex,t.start),s=this.offsetInBuffer(t.bufferIndex,t.end);return i.buffer.substring(e,s)}rbInsertRight(t,i){const e=new pS(i,1);if(e.left=wS,e.right=wS,e.parent=wS,e.size_left=0,e.lf_left=0,this.root===wS)this.root=e,e.color=0;else if(t.right===wS)t.right=e,e.parent=t;else{const i=mS(t.right);i.left=e,e.parent=i}return BS(this,e),e}rbInsertLeft(t,i){const e=new pS(i,1);if(e.left=wS,e.right=wS,e.parent=wS,e.size_left=0,e.lf_left=0,this.root===wS)this.root=e,e.color=0;else if(t.left===wS)t.left=e,e.parent=t;else{const i=vS(t.left);i.right=e,e.parent=i}return BS(this,e),e}}class zS extends te{constructor(t,i,e,s,n,o,r){super(),this._onDidChangeContent=this._register(new de),this._BOM=i,this._mightContainNonBasicASCII=!o,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=n,this._pieceTree=new OS(t,e,r)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(t){return this._pieceTree.createSnapshot(t?this._BOM:"")}getOffsetAt(t,i){return this._pieceTree.getOffsetAt(t,i)}getPositionAt(t){return this._pieceTree.getPositionAt(t)}getRangeAt(t,i){const e=t+i,s=this.getPositionAt(t),n=this.getPositionAt(e);return new Es(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,i=0){if(t.isEmpty())return"";const e=this._getEndOfLine(i);return this._pieceTree.getValueInRange(t,e)}getValueLengthInRange(t,i=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const e=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this._getEndOfLine(i),r=this.getEOL();return o.length!==r.length&&(n=(o.length-r.length)*(t.endLineNumber-t.startLineNumber)),s-e+n}getCharacterCountInRange(t,i=0){if(this._mightContainNonBasicASCII){let e=0;const s=t.startLineNumber,n=t.endLineNumber;for(let i=s;i<=n;i++){const o=this.getLineContent(i),r=i===s?t.startColumn-1:0,h=i===n?t.endColumn-1:o.length;for(let t=r;t<h;t++)mo(o.charCodeAt(t))?(e+=1,t+=1):e+=1}return e+=this._getEndOfLine(i).length*(n-s),e}return this.getValueLengthInRange(t,i)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(t){return this._pieceTree.getLineContent(t)}getLineCharCode(t,i){return this._pieceTree.getLineCharCode(t,i)}getLineLength(t){return this._pieceTree.getLineLength(t)}getLineFirstNonWhitespaceColumn(t){const i=so(this.getLineContent(t));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(t){const i=oo(this.getLineContent(t));return i===-1?0:i+2}_getEndOfLine(t){switch(t){case 1:return`\n`;case 2:return`\r\n`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this._pieceTree.setEOL(t)}applyEdits(t,i,e){let s=this._mightContainRTL,n=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,r=!0,h=[];for(let i=0;i<t.length;i++){const e=t[i];r&&e._isTracked&&(r=!1);const c=e.range;if(e.text){let t=!0;o||(t=!So(e.text),o=t),!s&&t&&(s=Do(e.text)),!n&&t&&(n=Io(e.text))}let a="",l=0,u=0,d=0;if(e.text){let t;[l,u,d,t]=iD(e.text);const i=this.getEOL();a=t===0||t===(i===`\r\n`?2:1)?e.text:e.text.replace(/\r\n|\r|\n/g,i)}h[i]={sortIndex:i,identifier:e.identifier||null,range:c,rangeOffset:this.getOffsetAt(c.startLineNumber,c.startColumn),rangeLength:this.getValueLengthInRange(c),text:a,eolCount:l,firstLineLength:u,lastLineLength:d,forceMoveMarkers:!!e.forceMoveMarkers,isAutoWhitespaceEdit:e.isAutoWhitespaceEdit||!1}}h.sort(zS._sortOpsAscending);let c=!1;for(let t=0,i=h.length-1;t<i;t++){const i=h[t].range.getEndPosition(),e=h[t+1].range.getStartPosition();if(e.isBeforeOrEqual(i)){if(e.isBefore(i))throw new Error("Overlapping ranges are not allowed!");c=!0}}r&&(h=this._reduceOperations(h));const a=e||i?zS._getInverseEditRanges(h):[],l=[];if(i)for(let t=0;t<h.length;t++){const i=h[t],e=a[t];if(i.isAutoWhitespaceEdit&&i.range.isEmpty())for(let t=e.startLineNumber;t<=e.endLineNumber;t++){let s="";t===e.startLineNumber&&(s=this.getLineContent(i.range.startLineNumber),so(s)!==-1)||l.push({lineNumber:t,oldContent:s})}}let u=null;if(e){let t=0;u=[];for(let i=0;i<h.length;i++){const e=h[i],s=a[i],n=this.getValueInRange(e.range),o=e.rangeOffset+t;t+=e.text.length-n.length,u[i]={sortIndex:e.sortIndex,identifier:e.identifier,range:s,text:n,textChange:new AM(e.rangeOffset,n,o,e.text)}}c||u.sort(((t,i)=>t.sortIndex-i.sortIndex))}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=n,this._mightContainNonBasicASCII=o;const d=this._doApplyEdits(h);let f=null;if(i&&l.length>0){l.sort(((t,i)=>i.lineNumber-t.lineNumber)),f=[];for(let t=0,i=l.length;t<i;t++){const i=l[t].lineNumber;if(t>0&&l[t-1].lineNumber===i)continue;const e=l[t].oldContent,s=this.getLineContent(i);s.length!==0&&s!==e&&so(s)===-1&&f.push(i)}}return this._onDidChangeContent.fire(),new cg(u,d,f)}_reduceOperations(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let i=!1;const e=t[0].range,s=t[t.length-1].range,n=new Es(e.startLineNumber,e.startColumn,s.endLineNumber,s.endColumn);let o=e.startLineNumber,r=e.startColumn;const h=[];for(let e=0,s=t.length;e<s;e++){const s=t[e],n=s.range;i=i||s.forceMoveMarkers,h.push(this.getValueInRange(new Es(o,r,n.startLineNumber,n.startColumn))),s.text.length>0&&h.push(s.text),o=n.endLineNumber,r=n.endColumn}const c=h.join(""),[a,l,u]=iD(c);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:c,eolCount:a,firstLineLength:l,lastLineLength:u,forceMoveMarkers:i,isAutoWhitespaceEdit:!1}}_doApplyEdits(t){t.sort(zS._sortOpsDescending);const i=[];for(let e=0;e<t.length;e++){const s=t[e],n=s.range.startLineNumber,o=s.range.startColumn,r=s.range.endLineNumber,h=s.range.endColumn;if(n===r&&o===h&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new Es(n,o,r,h);i.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return i}findMatchesLineByLine(t,i,e,s){return this._pieceTree.findMatchesLineByLine(t,i,e,s)}static _getInverseEditRanges(t){const i=[];let e=0,s=0,n=null;for(let o=0,r=t.length;o<r;o++){const r=t[o];let h,c,a;if(n?n.range.endLineNumber===r.range.startLineNumber?(h=e,c=s+(r.range.startColumn-n.range.endColumn)):(h=e+(r.range.startLineNumber-n.range.endLineNumber),c=r.range.startColumn):(h=r.range.startLineNumber,c=r.range.startColumn),r.text.length>0){const t=r.eolCount+1;a=t===1?new Es(h,c,h,c+r.firstLineLength):new Es(h,c,h+t-1,r.lastLineLength+1)}else a=new Es(h,c,h,c);e=a.endLineNumber,s=a.endColumn,i.push(a),n=r}return i}static _sortOpsAscending(t,i){const e=Es.compareRangesUsingEnds(t.range,i.range);return e===0?t.sortIndex-i.sortIndex:e}static _sortOpsDescending(t,i){const e=Es.compareRangesUsingEnds(t.range,i.range);return e===0?i.sortIndex-t.sortIndex:-e}}class US{constructor(t,i,e,s,n,o,r,h,c){this._chunks=t,this._bom=i,this._cr=e,this._lf=s,this._crlf=n,this._containsRTL=o,this._containsUnusualLineTerminators=r,this._isBasicASCII=h,this._normalizeEOL=c}_getEOL(t){const i=this._cr+this._lf+this._crlf,e=this._cr+this._crlf;return i===0?t===1?`\n`:`\r\n`:e>i/2?`\r\n`:`\n`}create(t){const i=this._getEOL(t),e=this._chunks;if(this._normalizeEOL&&(i===`\r\n`&&(this._cr>0||this._lf>0)||i===`\n`&&(this._cr>0||this._crlf>0)))for(let t=0,s=e.length;t<s;t++){const s=e[t].buffer.replace(/\r\n|\r|\n/g,i),n=LS(s);e[t]=new TS(s,n)}const s=new zS(e,this._bom,i,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class HS{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(t){if(t.length===0)return;this.chunks.length===0&&No(t)&&(this.BOM=To,t=t.substr(1));const i=t.charCodeAt(t.length-1);i===13||i>=55296&&i<=56319?(this._acceptChunk1(t.substr(0,t.length-1),!1),this._hasPreviousChar=!0,this._previousChar=i):(this._acceptChunk1(t,!1),this._hasPreviousChar=!1,this._previousChar=i)}_acceptChunk1(t,i){(i||t.length!==0)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+t):this._acceptChunk2(t))}_acceptChunk2(t){const i=function(t,i){t.length=0,t[0]=0;let e=1,s=0,n=0,o=0,r=!0;for(let h=0,c=i.length;h<c;h++){const a=i.charCodeAt(h);a===13?h+1<c&&i.charCodeAt(h+1)===10?(o++,t[e++]=h+2,h++):(s++,t[e++]=h+1):a===10?(n++,t[e++]=h+1):r&&a!==9&&(a<32||a>126)&&(r=!1)}const h=new IS(FS(t),s,n,o,r);return t.length=0,h}(this._tmpLineStarts,t);this.chunks.push(new TS(t,i.lineStarts)),this.cr+=i.cr,this.lf+=i.lf,this.crlf+=i.crlf,i.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=Do(t)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Io(t)))}finish(t=!0){return this._finish(),new US(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,t)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const t=this.chunks[this.chunks.length-1];t.buffer+=String.fromCharCode(this._previousChar);const i=LS(t.buffer);t.lineStarts=i,this._previousChar===13&&this.cr++}}}class PS{constructor(t){this._default=t,this._store=[]}get(t){return t<this._store.length?this._store[t]:this._default}set(t,i){for(;t>=this._store.length;)this._store[this._store.length]=this._default;this._store[t]=i}replace(t,i,e){if(t>=this._store.length)return;if(i===0)return void this.insert(t,e);if(e===0)return void this.delete(t,i);const s=this._store.slice(0,t),n=this._store.slice(t+i),o=function(t,i){const e=[];for(let s=0;s<t;s++)e[s]=i;return e}(e,this._default);this._store=s.concat(o,n)}delete(t,i){i===0||t>=this._store.length||this._store.splice(t,i)}insert(t,i){if(i===0||t>=this._store.length)return;const e=[];for(let t=0;t<i;t++)e[t]=this._default;this._store=b(this._store,t,e)}}class jS{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(t,i){this._startLineNumber=t,this._tokens=i}getLineTokens(t){return this._tokens[t-this._startLineNumber]}appendLineTokens(t){this._tokens.push(t)}}class WS{constructor(){this._tokens=[]}add(t,i){if(this._tokens.length>0){const e=this._tokens[this._tokens.length-1];if(e.endLineNumber+1===t)return void e.appendLineTokens(i)}this._tokens.push(new jS(t,[i]))}finalize(){return this._tokens}}class YS{constructor(t,i){this.tokenizationSupport=i,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new VS(t)}getStartState(t){return this.store.getStartState(t,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class _S extends YS{constructor(t,i,e,s){super(t,i),this._textModel=e,this._languageIdCodec=s}updateTokensUntilLine(t,i){const e=this._textModel.getLanguageId();for(;;){const s=this.getFirstInvalidLine();if(!s||s.lineNumber>i)break;const n=this._textModel.getLineContent(s.lineNumber),o=KS(this._languageIdCodec,e,this.tokenizationSupport,n,!0,s.startState);t.add(s.lineNumber,o.tokens),this.store.setEndState(s.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(t,i){const e=this.getStartState(t.lineNumber);if(!e)return 0;const s=this._textModel.getLanguageId(),n=this._textModel.getLineContent(t.lineNumber),o=n.substring(0,t.column-1)+i+n.substring(t.column-1),r=KS(this._languageIdCodec,s,this.tokenizationSupport,o,!0,e),h=new rp(r.tokens,o,this._languageIdCodec);if(h.getCount()===0)return 0;const c=h.findTokenIndexAtOffset(t.column-1);return h.getStandardTokenType(c)}tokenizeLineWithEdit(t,i,e){const s=t.lineNumber,n=t.column,o=this.getStartState(s);if(!o)return null;const r=this._textModel.getLineContent(s),h=r.substring(0,n-1)+e+r.substring(n-1+i),c=this._textModel.getLanguageIdAtPosition(s,0),a=KS(this._languageIdCodec,c,this.tokenizationSupport,h,!0,o);return new rp(a.tokens,h,this._languageIdCodec)}hasAccurateTokensForLine(t){return t<this.store.getFirstInvalidEndStateLineNumberOrMax()}isCheapToTokenize(t){const i=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<i||t===i&&this._textModel.getLineLength(t)<2048}tokenizeHeuristically(t,i,e){if(e<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(t,e),{heuristicTokens:!1};let s=this.guessStartState(i);const n=this._textModel.getLanguageId();for(let o=i;o<=e;o++){const i=this._textModel.getLineContent(o),e=KS(this._languageIdCodec,n,this.tokenizationSupport,i,!0,s);t.add(o,e.tokens),s=e.endState}return{heuristicTokens:!0}}guessStartState(t){let i=this._textModel.getLineFirstNonWhitespaceColumn(t);const e=[];let s=null;for(let n=t-1;i>1&&n>=1;n--){const t=this._textModel.getLineFirstNonWhitespaceColumn(n);if(t!==0&&t<i&&(e.push(this._textModel.getLineContent(n)),i=t,s=this.getStartState(n),s))break}s||(s=this.tokenizationSupport.getInitialState()),e.reverse();const n=this._textModel.getLanguageId();let o=s;for(const t of e)o=KS(this._languageIdCodec,n,this.tokenizationSupport,t,!1,o).endState;return o}}class VS{constructor(t){this.lineCount=t,this._tokenizationStateStore=new JS,this._invalidEndStatesLineNumbers=new GS,this._invalidEndStatesLineNumbers.addRange(new yg(1,t+1))}getEndState(t){return this._tokenizationStateStore.getEndState(t)}setEndState(t,i){if(!i)throw new Ji("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(t);const e=this._tokenizationStateStore.setEndState(t,i);return e&&t<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new yg(t+1,t+2)),e}acceptChange(t,i){this.lineCount+=i-t.length,this._tokenizationStateStore.acceptChange(t,i),this._invalidEndStatesLineNumbers.addRangeAndResize(new yg(t.startLineNumber,t.endLineNumberExclusive),i)}acceptChanges(t){for(const i of t){const[t]=iD(i.text);this.acceptChange(new Fg(i.range.startLineNumber,i.range.endLineNumber+1),t+1)}}invalidateEndStateRange(t){this._invalidEndStatesLineNumbers.addRange(new yg(t.startLineNumber,t.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(t,i){return t===1?i:this.getEndState(t-1)}getFirstInvalidLine(t){const i=this.getFirstInvalidEndStateLineNumber();if(i===null)return null;const e=this.getStartState(i,t);if(!e)throw new Ji("Start state must be defined");return{lineNumber:i,startState:e}}}class JS{constructor(){this._lineEndStates=new PS(null)}getEndState(t){return this._lineEndStates.get(t)}setEndState(t,i){const e=this._lineEndStates.get(t);return(!e||!e.equals(i))&&(this._lineEndStates.set(t,i),!0)}acceptChange(t,i){let e=t.length;i>0&&e>0&&(e--,i--),this._lineEndStates.replace(t.startLineNumber,e,i)}}class GS{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(t){const i=this._ranges.findIndex((i=>i.contains(t)));if(i!==-1){const e=this._ranges[i];e.start===t?e.endExclusive===t+1?this._ranges.splice(i,1):this._ranges[i]=new yg(t+1,e.endExclusive):e.endExclusive===t+1?this._ranges[i]=new yg(e.start,t):this._ranges.splice(i,1,new yg(e.start,t),new yg(t+1,e.endExclusive))}}addRange(t){yg.addRange(t,this._ranges)}addRangeAndResize(t,i){let e=0;for(;!(e>=this._ranges.length||t.start<=this._ranges[e].endExclusive);)e++;let s=e;for(;!(s>=this._ranges.length||t.endExclusive<this._ranges[s].start);)s++;const n=i-t.length;for(let t=s;t<this._ranges.length;t++)this._ranges[t]=this._ranges[t].delta(n);if(e===s){const s=new yg(t.start,t.start+i);s.isEmpty||this._ranges.splice(e,0,s)}else{const i=Math.min(t.start,this._ranges[e].start),o=Math.max(t.endExclusive,this._ranges[s-1].endExclusive),r=new yg(i,o+n);r.isEmpty?this._ranges.splice(e,s-e):this._ranges.splice(e,s-e,r)}}toString(){return this._ranges.map((t=>t.toString())).join(" + ")}}function KS(t,i,e,s,n,o){let r=null;if(e)try{r=e.tokenizeEncoded(s,n,o.clone())}catch(t){Oi(t)}return r||(r=np(t.encodeLanguageId(i),o)),rp.convertToEndOffset(r.tokens,s.length),r}class $S{constructor(t,i){this._tokenizerWithStateStore=t,this._backgroundTokenStore=i,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){!this._isScheduled&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._isScheduled=!0,Br((t=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(t)})))}_backgroundTokenizeWithDeadline(t){const i=Date.now()+t.timeRemaining(),e=()=>{!this._isDisposed&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._backgroundTokenizeForAtLeast1ms(),Date.now()<i?Lt(e):this._beginBackgroundTokenization())};e()}_backgroundTokenizeForAtLeast1ms(){const t=this._tokenizerWithStateStore._textModel.getLineCount(),i=new WS,e=re.create(!1);do{if(e.elapsed()>1||this._tokenizeOneInvalidLine(i)>=t)break}while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(i.finalize()),this.checkFinished()}_hasLinesToTokenize(){return!!this._tokenizerWithStateStore&&!this._tokenizerWithStateStore.store.allStatesValid()}_tokenizeOneInvalidLine(t){var i;const e=(i=this._tokenizerWithStateStore)===null||i===void 0?void 0:i.getFirstInvalidLine();return e?(this._tokenizerWithStateStore.updateTokensUntilLine(t,e.lineNumber),e.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(t,i){this._tokenizerWithStateStore.store.invalidateEndStateRange(new Fg(t,i))}}const XS=new Uint32Array(0).buffer;class qS{static deleteBeginning(t,i){return t===null||t===XS?t:qS.delete(t,0,i)}static deleteEnding(t,i){if(t===null||t===XS)return t;const e=ZS(t),s=e[e.length-2];return qS.delete(t,i,s)}static delete(t,i,e){if(t===null||t===XS||i===e)return t;const s=ZS(t),n=s.length>>>1;if(i===0&&s[s.length-2]===e)return XS;const o=rp.findIndexInTokensArray(s,i),r=o>0?s[o-1<<1]:0;if(e<s[o<<1]){const r=e-i;for(let t=o;t<n;t++)s[t<<1]-=r;return t}let h,c;r!==i?(s[o<<1]=i,h=o+1<<1,c=i):(h=o<<1,c=r);const a=e-i;for(let t=o+1;t<n;t++){const i=s[t<<1]-a;i>c&&(s[h++]=i,s[h++]=s[1+(t<<1)],c=i)}if(h===s.length)return t;const l=new Uint32Array(h);return l.set(s.subarray(0,h),0),l.buffer}static append(t,i){if(i===XS)return t;if(t===XS)return i;if(t===null)return t;if(i===null)return null;const e=ZS(t),s=ZS(i),n=s.length>>>1,o=new Uint32Array(e.length+s.length);o.set(e,0);let r=e.length;const h=e[e.length-2];for(let t=0;t<n;t++)o[r++]=s[t<<1]+h,o[r++]=s[1+(t<<1)];return o.buffer}static insert(t,i,e){if(t===null||t===XS)return t;const s=ZS(t),n=s.length>>>1;let o=rp.findIndexInTokensArray(s,i);o>0&&s[o-1<<1]===i&&o--;for(let t=o;t<n;t++)s[t<<1]+=e;return t}}function ZS(t){return t instanceof Uint32Array?t:new Uint32Array(t)}class tF{constructor(t){this._lineTokens=[],this._len=0,this._languageIdCodec=t}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(t,i,e){let s=null;if(i<this._len&&(s=this._lineTokens[i]),s!==null&&s!==XS)return new rp(ZS(s),e,this._languageIdCodec);const n=new Uint32Array(2);return n[0]=e.length,n[1]=iF(this._languageIdCodec.encodeLanguageId(t)),new rp(n,e,this._languageIdCodec)}static _massageTokens(t,i,e){const s=e?ZS(e):null;if(i===0){let i=!1;if(s&&s.length>1&&(i=op.getLanguageId(s[1])!==t),!i)return XS}if(!s||s.length===0){const e=new Uint32Array(2);return e[0]=i,e[1]=iF(t),e.buffer}return s[s.length-2]=i,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(t){for(;t>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(t,i){i!==0&&(t+i>this._len&&(i=this._len-t),this._lineTokens.splice(t,i),this._len-=i)}_insertLines(t,i){if(i===0)return;const e=[];for(let t=0;t<i;t++)e[t]=null;this._lineTokens=b(this._lineTokens,t,e),this._len+=i}setTokens(t,i,e,s,n){const o=tF._massageTokens(this._languageIdCodec.encodeLanguageId(t),e,s);this._ensureLine(i);const r=this._lineTokens[i];return this._lineTokens[i]=o,!!n&&!tF._equals(r,o)}static _equals(t,i){if(!t||!i)return!t&&!i;const e=ZS(t),s=ZS(i);if(e.length!==s.length)return!1;for(let t=0,i=e.length;t<i;t++)if(e[t]!==s[t])return!1;return!0}acceptEdit(t,i,e){this._acceptDeleteRange(t),this._acceptInsertText(new Cs(t.startLineNumber,t.startColumn),i,e)}_acceptDeleteRange(t){const i=t.startLineNumber-1;if(i>=this._len)return;if(t.startLineNumber===t.endLineNumber)return t.startColumn===t.endColumn?void 0:void(this._lineTokens[i]=qS.delete(this._lineTokens[i],t.startColumn-1,t.endColumn-1));this._lineTokens[i]=qS.deleteEnding(this._lineTokens[i],t.startColumn-1);const e=t.endLineNumber-1;let s=null;e<this._len&&(s=qS.deleteBeginning(this._lineTokens[e],t.endColumn-1)),this._lineTokens[i]=qS.append(this._lineTokens[i],s),this._deleteLines(t.startLineNumber,t.endLineNumber-t.startLineNumber)}_acceptInsertText(t,i,e){if(i===0&&e===0)return;const s=t.lineNumber-1;s>=this._len||(i!==0?(this._lineTokens[s]=qS.deleteEnding(this._lineTokens[s],t.column-1),this._lineTokens[s]=qS.insert(this._lineTokens[s],t.column-1,e),this._insertLines(t.lineNumber,i)):this._lineTokens[s]=qS.insert(this._lineTokens[s],t.column-1,e))}setMultilineTokens(t,i){if(t.length===0)return{changes:[]};const e=[];for(let s=0,n=t.length;s<n;s++){const n=t[s];let o=0,r=0,h=!1;for(let t=n.startLineNumber;t<=n.endLineNumber;t++)h?(this.setTokens(i.getLanguageId(),t-1,i.getLineLength(t),n.getLineTokens(t),!1),r=t):this.setTokens(i.getLanguageId(),t-1,i.getLineLength(t),n.getLineTokens(t),!0)&&(h=!0,o=t,r=t);h&&e.push({fromLineNumber:o,toLineNumber:r})}return{changes:e}}}function iF(t){return(32768|t|2<<24|1024)>>>0}class eF{constructor(t){this._pieces=[],this._isComplete=!1,this._languageIdCodec=t}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(t,i){this._pieces=t||[],this._isComplete=i}setPartial(t,i){let e=t;if(i.length>0){const s=i[0].getRange(),n=i[i.length-1].getRange();if(!s||!n)return t;e=t.plusRange(s).plusRange(n)}let s=null;for(let t=0,i=this._pieces.length;t<i;t++){const n=this._pieces[t];if(n.endLineNumber<e.startLineNumber)continue;if(n.startLineNumber>e.endLineNumber){s=s||{index:t};break}if(n.removeTokens(e),n.isEmpty()){this._pieces.splice(t,1),t--,i--;continue}if(n.endLineNumber<e.startLineNumber)continue;if(n.startLineNumber>e.endLineNumber){s=s||{index:t};continue}const[o,r]=n.split(e);o.isEmpty()?s=s||{index:t}:r.isEmpty()||(this._pieces.splice(t,1,o,r),t++,i++,s=s||{index:t})}return s=s||{index:this._pieces.length},i.length>0&&(this._pieces=b(this._pieces,s.index,i)),e}isComplete(){return this._isComplete}addSparseTokens(t,i){if(i.getLineContent().length===0)return i;const e=this._pieces;if(e.length===0)return i;const s=e[eF._findFirstPieceWithLine(e,t)].getLineTokens(t);if(!s)return i;const n=i.getCount(),o=s.getCount();let r=0;const h=[];let c=0,a=0;const l=(t,i)=>{t!==a&&(a=t,h[c++]=t,h[c++]=i)};for(let t=0;t<o;t++){const e=s.getStartCharacter(t),o=s.getEndCharacter(t),h=s.getMetadata(t),c=((1&h?2048:0)|(2&h?4096:0)|(4&h?8192:0)|(8&h?16384:0)|(16&h?16744448:0)|(32&h?4278190080:0))>>>0,a=~c>>>0;for(;r<n&&i.getEndOffset(r)<=e;)l(i.getEndOffset(r),i.getMetadata(r)),r++;for(r<n&&i.getStartOffset(r)<e&&l(e,i.getMetadata(r));r<n&&i.getEndOffset(r)<o;)l(i.getEndOffset(r),i.getMetadata(r)&a|h&c),r++;if(r<n)l(o,i.getMetadata(r)&a|h&c),i.getEndOffset(r)===o&&r++;else{const t=Math.min(Math.max(0,r-1),n-1);l(o,i.getMetadata(t)&a|h&c)}}for(;r<n;)l(i.getEndOffset(r),i.getMetadata(r)),r++;return new rp(new Uint32Array(h),i.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(t,i){let e=0,s=t.length-1;for(;e<s;){let n=e+Math.floor((s-e)/2);if(t[n].endLineNumber<i)e=n+1;else{if(!(t[n].startLineNumber>i)){for(;n>e&&t[n-1].startLineNumber<=i&&i<=t[n-1].endLineNumber;)n--;return n}s=n-1}}return e}acceptEdit(t,i,e,s,n){for(const o of this._pieces)o.acceptEdit(t,i,e,s,n)}}class sF extends CE{constructor(t,i,e,s,n,o){super(),this._languageService=t,this._languageConfigurationService=i,this._textModel=e,this._bracketPairsTextModelPart=s,this._languageId=n,this._attachedViews=o,this._semanticTokens=new eF(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new de),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new de),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new de),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new nF(this._languageService.languageIdCodec,this._textModel,(()=>this._languageId),this._attachedViews)),this._register(this._languageConfigurationService.onDidChange((t=>{t.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}))),this._register(this.grammarTokens.onDidChangeTokens((t=>{this._emitModelTokensChangedEvent(t)}))),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState((t=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})))}handleDidChangeContent(t){if(t.isFlush)this._semanticTokens.flush();else if(!t.isEolChange)for(const i of t.changes){const[t,e,s]=iD(i.text);this._semanticTokens.acceptEdit(i.range,t,e,s,i.text.length>0?i.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(t)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(t){this.validateLineNumber(t);const i=this.grammarTokens.getLineTokens(t);return this._semanticTokens.addSparseTokens(t,i)}_emitModelTokensChangedEvent(t){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(t),this._onDidChangeTokens.fire(t))}validateLineNumber(t){if(t<1||t>this._textModel.getLineCount())throw new Ji("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(t){this.validateLineNumber(t),this.grammarTokens.forceTokenization(t)}hasAccurateTokensForLine(t){return this.validateLineNumber(t),this.grammarTokens.hasAccurateTokensForLine(t)}isCheapToTokenize(t){return this.validateLineNumber(t),this.grammarTokens.isCheapToTokenize(t)}tokenizeIfCheap(t){this.validateLineNumber(t),this.grammarTokens.tokenizeIfCheap(t)}getTokenTypeIfInsertingCharacter(t,i,e){return this.grammarTokens.getTokenTypeIfInsertingCharacter(t,i,e)}tokenizeLineWithEdit(t,i,e){return this.grammarTokens.tokenizeLineWithEdit(t,i,e)}setSemanticTokens(t,i){this._semanticTokens.set(t,i),this._emitModelTokensChangedEvent({semanticTokensApplied:t!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(t,i){if(this.hasCompleteSemanticTokens())return;const e=this._textModel.validateRange(this._semanticTokens.setPartial(t,i));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:e.startLineNumber,toLineNumber:e.endLineNumber}]})}getWordAtPosition(t){this.assertNotDisposed();const i=this._textModel.validatePosition(t),e=this._textModel.getLineContent(i.lineNumber),s=this.getLineTokens(i.lineNumber),n=s.findTokenIndexAtOffset(i.column-1),[o,r]=sF._findLanguageBoundaries(s,n),h=$t(i.column,this.getLanguageConfiguration(s.getLanguageId(n)).getWordDefinition(),e.substring(o,r),o);if(h&&h.startColumn<=t.column&&t.column<=h.endColumn)return h;if(n>0&&o===i.column-1){const[o,r]=sF._findLanguageBoundaries(s,n-1),h=$t(i.column,this.getLanguageConfiguration(s.getLanguageId(n-1)).getWordDefinition(),e.substring(o,r),o);if(h&&h.startColumn<=t.column&&t.column<=h.endColumn)return h}return null}getLanguageConfiguration(t){return this._languageConfigurationService.getLanguageConfiguration(t)}static _findLanguageBoundaries(t,i){const e=t.getLanguageId(i);let s=0;for(let n=i;n>=0&&t.getLanguageId(n)===e;n--)s=t.getStartOffset(n);let n=t.getLineContent().length;for(let s=i,o=t.getCount();s<o&&t.getLanguageId(s)===e;s++)n=t.getEndOffset(s);return[s,n]}getWordUntilPosition(t){const i=this.getWordAtPosition(t);return i?{word:i.word.substr(0,t.column-i.startColumn),startColumn:i.startColumn,endColumn:t.column}:{word:"",startColumn:t.column,endColumn:t.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(t,i){const e=this._textModel.validatePosition(new Cs(t,i)),s=this.getLineTokens(e.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(e.column-1))}setLanguageId(t,i="api"){if(this._languageId===t)return;const e={oldLanguage:this._languageId,newLanguage:t,source:i};this._languageId=t,this._bracketPairsTextModelPart.handleDidChangeLanguage(e),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(e),this._onDidChangeLanguageConfiguration.fire({})}}class nF extends te{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(t,i,e,s){super(),this._languageIdCodec=t,this._textModel=i,this.getLanguageId=e,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new ie),this._tokens=new tF(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new ie),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new de),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new de),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new ne),this._register(Gs.onDidChange((t=>{const i=this.getLanguageId();t.changedLanguages.indexOf(i)!==-1&&this.resetTokenization()}))),this.resetTokenization(),this._register(s.onDidChangeVisibleRanges((({view:t,state:i})=>{if(i){let e=this._attachedViewStates.get(t);e||(e=new oF((()=>this.refreshRanges(e.lineRanges))),this._attachedViewStates.set(t,e)),e.handleStateChange(i)}else this._attachedViewStates.deleteAndDispose(t)})))}resetTokenization(t=!0){var i;this._tokens.flush(),(i=this._debugBackgroundTokens)===null||i===void 0||i.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new VS(this._textModel.getLineCount())),t&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const[e,s]=(()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const t=Gs.get(this.getLanguageId());if(!t)return[null,null];let i;try{i=t.getInitialState()}catch(t){return Oi(t),[null,null]}return[t,i]})();if(this._tokenizer=e&&s?new _S(this._textModel.getLineCount(),e,this._textModel,this._languageIdCodec):null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const t={setTokens:t=>{this.setTokens(t)},backgroundTokenizationFinished:()=>{this._backgroundTokenizationState!==2&&(this._backgroundTokenizationState=2,this._onDidChangeBackgroundTokenizationState.fire())},setEndState:(t,i)=>{var e;if(!this._tokenizer)return;const s=this._tokenizer.store.getFirstInvalidEndStateLineNumber();s!==null&&t>=s&&((e=this._tokenizer)===null||e===void 0||e.store.setEndState(t,i))}};e&&e.createBackgroundTokenizer&&!e.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=e.createBackgroundTokenizer(this._textModel,t)),this._backgroundTokenizer.value||this._textModel.isTooLargeForTokenization()||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new $S(this._tokenizer,t),this._defaultBackgroundTokenizer.handleChanges()),e!=null&&e.backgroundTokenizerShouldOnlyVerifyTokens&&e.createBackgroundTokenizer?(this._debugBackgroundTokens=new tF(this._languageIdCodec),this._debugBackgroundStates=new VS(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=e.createBackgroundTokenizer(this._textModel,{setTokens:t=>{var i;(i=this._debugBackgroundTokens)===null||i===void 0||i.setMultilineTokens(t,this._textModel)},backgroundTokenizationFinished(){},setEndState:(t,i)=>{var e;(e=this._debugBackgroundStates)===null||e===void 0||e.setEndState(t,i)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var t;(t=this._defaultBackgroundTokenizer)===null||t===void 0||t.handleChanges()}handleDidChangeContent(t){var i,e,s;if(t.isFlush)this.resetTokenization(!1);else if(!t.isEolChange){for(const e of t.changes){const[t,s]=iD(e.text);this._tokens.acceptEdit(e.range,t,s),(i=this._debugBackgroundTokens)===null||i===void 0||i.acceptEdit(e.range,t,s)}(e=this._debugBackgroundStates)===null||e===void 0||e.acceptChanges(t.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(t.changes),(s=this._defaultBackgroundTokenizer)===null||s===void 0||s.handleChanges()}}setTokens(t){const{changes:i}=this._tokens.setMultilineTokens(t,this._textModel);return i.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:i}),{changes:i}}refreshAllVisibleLineTokens(){const t=Fg.joinMany([...this._attachedViewStates].map((([t,i])=>i.lineRanges)));this.refreshRanges(t)}refreshRanges(t){for(const i of t)this.refreshRange(i.startLineNumber,i.endLineNumberExclusive-1)}refreshRange(t,i){var e,s;if(!this._tokenizer)return;t=Math.max(1,Math.min(this._textModel.getLineCount(),t)),i=Math.min(this._textModel.getLineCount(),i);const n=new WS,{heuristicTokens:o}=this._tokenizer.tokenizeHeuristically(n,t,i),r=this.setTokens(n.finalize());if(o)for(const t of r.changes)(e=this._backgroundTokenizer.value)===null||e===void 0||e.requestTokens(t.fromLineNumber,t.toLineNumber+1);(s=this._defaultBackgroundTokenizer)===null||s===void 0||s.checkFinished()}forceTokenization(t){var i,e;const s=new WS;(i=this._tokenizer)===null||i===void 0||i.updateTokensUntilLine(s,t),this.setTokens(s.finalize()),(e=this._defaultBackgroundTokenizer)===null||e===void 0||e.checkFinished()}hasAccurateTokensForLine(t){return!this._tokenizer||this._tokenizer.hasAccurateTokensForLine(t)}isCheapToTokenize(t){return!this._tokenizer||this._tokenizer.isCheapToTokenize(t)}tokenizeIfCheap(t){this.isCheapToTokenize(t)&&this.forceTokenization(t)}getLineTokens(t){var i;const e=this._textModel.getLineContent(t),s=this._tokens.getTokens(this._textModel.getLanguageId(),t-1,e);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>t&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>t){const n=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),t-1,e);!s.equals(n)&&(!((i=this._debugBackgroundTokenizer.value)===null||i===void 0)&&i.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(t)}return s}getTokenTypeIfInsertingCharacter(t,i,e){if(!this._tokenizer)return 0;const s=this._textModel.validatePosition(new Cs(t,i));return this.forceTokenization(s.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(s,e)}tokenizeLineWithEdit(t,i,e){if(!this._tokenizer)return null;const s=this._textModel.validatePosition(t);return this.forceTokenization(s.lineNumber),this._tokenizer.tokenizeLineWithEdit(s,i,e)}get hasTokens(){return this._tokens.hasTokens}}class oF extends te{get lineRanges(){return this._lineRanges}constructor(t){super(),this._refreshTokens=t,this.runner=this._register(new Er((()=>this.update()),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){h(this._computedLineRanges,this._lineRanges,((t,i)=>t.equals(i)))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(t){this._lineRanges=t.visibleLineRanges,t.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}const rF=za("undoRedoService");class hF{constructor(t,i){this.resource=t,this.elements=i}}class cF{constructor(){this.id=cF._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}cF._ID=0,cF.None=new cF;class aF{constructor(){this.id=aF._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}aF._ID=0,aF.None=new aF;var lF,uF=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},dF=function(t,i){return function(e,s){i(e,s,t)}};function fF(t,i){let e;var s;return typeof t=="string"?e=function(t){const i=new HS;return i.acceptChunk(t),i.finish()}(t):e=(s=t)&&typeof s.read=="function"?function(t){const i=new HS;let e;for(;typeof(e=t.read())=="string";)i.acceptChunk(e);return i.finish()}(t):t,e.create(i)}let gF=0;class AF{constructor(t){this._source=t,this._eos=!1}read(){if(this._eos)return null;const t=[];let i=0,e=0;for(;;){const s=this._source.read();if(s===null)return this._eos=!0,i===0?null:t.join("");if(s.length>0&&(t[i++]=s,e+=s.length),e>=65536)return t.join("")}}}const pF=()=>{throw new Error("Invalid change accessor")};let wF=lF=class extends te{static resolveOptions(t,i){if(i.detectIndentation){const e=_M(t,i.tabSize,i.insertSpaces);return new ng({tabSize:e.tabSize,indentSize:"tabSize",insertSpaces:e.insertSpaces,trimAutoWhitespace:i.trimAutoWhitespace,defaultEOL:i.defaultEOL,bracketPairColorizationOptions:i.bracketPairColorizationOptions})}return new ng(i)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(t){return this._eventEmitter.slowEvent((i=>t(i.contentChangedEvent)))}onDidChangeContentOrInjectedText(t){return Xi(this._eventEmitter.fastEvent((i=>t(i))),this._onDidChangeInjectedText.event((i=>t(i))))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(t,i,e,s=null,n,o,r){super(),this._undoRedoService=n,this._languageService=o,this._languageConfigurationService=r,this._onWillDispose=this._register(new de),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new FF((t=>this.handleBeforeFireDecorationsChangedEvent(t)))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new de),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new de),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new de),this._eventEmitter=this._register(new IF),this._languageSelectionListener=this._register(new ie),this._deltaDecorationCallCnt=0,this._attachedViews=new LF,gF++,this.id="$model"+gF,this.isForSimpleWidget=e.isForSimpleWidget,this._associatedResource=s??fs.parse("inmemory://model/"+gF),this._attachedEditorCount=0;const{textBuffer:h,disposable:c}=fF(t,e.defaultEOL);this._buffer=h,this._bufferDisposable=c,this._options=lF.resolveOptions(this._buffer,e);const a=typeof i=="string"?i:i.languageId;typeof i!="string"&&(this._languageSelectionListener.value=i.onDidChange((()=>this._setLanguage(i.languageId)))),this._bracketPairs=this._register(new cM(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new ME(this,this._languageConfigurationService)),this._decorationProvider=this._register(new dM(this)),this._tokenizationTextModelPart=new sF(this._languageService,this._languageConfigurationService,this,this._bracketPairs,a,this._attachedViews);const l=this._buffer.getLineCount(),u=this._buffer.getValueLengthInRange(new Es(1,1,l,this._buffer.getLineLength(l)+1),0);e.largeFileOptimizations?(this._isTooLargeForTokenization=u>lF.LARGE_FILE_SIZE_THRESHOLD||l>lF.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=u>lF.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=u>lF._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=Qo(gF),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new bF,this._commandManager=new jM(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange((()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))),this._languageService.requestRichLanguageFeatures(a)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const t=new zS([],"",`\n`,!1,!1,!0,!0);t.dispose(),this._buffer=t,this._bufferDisposable=te.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(t,i){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(i),this._bracketPairs.handleDidChangeContent(i),this._eventEmitter.fire(new VB(t,i)))}setValue(t){if(this._assertNotDisposed(),t==null)throw Wi();const{textBuffer:i,disposable:e}=fF(t,this._options.defaultEOL);this._setValueFromTextBuffer(i,e)}_createContentChanged2(t,i,e,s,n,o,r,h){return{changes:[{range:t,rangeOffset:i,rangeLength:e,text:s}],eol:this._buffer.getEOL(),isEolChange:h,versionId:this.getVersionId(),isUndoing:n,isRedoing:o,isFlush:r}}_setValueFromTextBuffer(t,i){this._assertNotDisposed();const e=this.getFullModelRange(),s=this.getValueLengthInRange(e),n=this.getLineCount(),o=this.getLineMaxColumn(n);this._buffer=t,this._bufferDisposable.dispose(),this._bufferDisposable=i,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new bF,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new YB([new zB],this._versionId,!1,!1),this._createContentChanged2(new Es(1,1,n,o),0,s,this.getValue(),!1,!1,!0,!1))}setEOL(t){this._assertNotDisposed();const i=t===1?`\r\n`:`\n`;if(this._buffer.getEOL()===i)return;const e=this.getFullModelRange(),s=this.getValueLengthInRange(e),n=this.getLineCount(),o=this.getLineMaxColumn(n);this._onBeforeEOLChange(),this._buffer.setEOL(i),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new YB([new WB],this._versionId,!1,!1),this._createContentChanged2(new Es(1,1,n,o),0,s,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const t=this.getVersionId(),i=this._decorationsTree.collectNodesPostOrder();for(let e=0,s=i.length;e<s;e++){const s=i[e],n=s.range,o=s.cachedAbsoluteStart-s.start,r=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),h=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);s.cachedAbsoluteStart=r,s.cachedAbsoluteEnd=h,s.cachedVersionId=t,s.start=r-o,s.end=h-o,fS(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(t){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(t)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let t=0,i=0;const e=this._buffer.getLineCount();for(let s=1;s<=e;s++){const e=this._buffer.getLineLength(s);e>=1e4?i+=e:t+=e}return i>t}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(t){this._assertNotDisposed();const i=t.tabSize!==void 0?t.tabSize:this._options.tabSize,e=t.indentSize!==void 0?t.indentSize:this._options.originalIndentSize,s=t.insertSpaces!==void 0?t.insertSpaces:this._options.insertSpaces,n=t.trimAutoWhitespace!==void 0?t.trimAutoWhitespace:this._options.trimAutoWhitespace,o=t.bracketColorizationOptions!==void 0?t.bracketColorizationOptions:this._options.bracketPairColorizationOptions,r=new ng({tabSize:i,indentSize:e,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:n,bracketPairColorizationOptions:o});if(this._options.equals(r))return;const h=this._options.createChangeEvent(r);this._options=r,this._bracketPairs.handleDidChangeOptions(h),this._decorationProvider.handleDidChangeOptions(h),this._onDidChangeOptions.fire(h)}detectIndentation(t,i){this._assertNotDisposed();const e=_M(this._buffer,i,t);this.updateOptions({insertSpaces:e.insertSpaces,tabSize:e.tabSize,indentSize:e.tabSize})}normalizeIndentation(t){return this._assertNotDisposed(),Vx(t,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(t=null){const i=this.findMatches(Fo.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(t,i.map((t=>({range:t.range,text:null}))),(()=>null))}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(t){this._assertNotDisposed();const i=this._validatePosition(t.lineNumber,t.column,0);return this._buffer.getOffsetAt(i.lineNumber,i.column)}getPositionAt(t){this._assertNotDisposed();const i=Math.min(this._buffer.getLength(),Math.max(0,t));return this._buffer.getPositionAt(i)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(t){this._versionId=t}_overwriteAlternativeVersionId(t){this._alternativeVersionId=t}_overwriteInitialUndoRedoSnapshot(t){this._initialUndoRedoSnapshot=t}getValue(t,i=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Ji("Operation would exceed heap memory limits");const e=this.getFullModelRange(),s=this.getValueInRange(e,t);return i?this._buffer.getBOM()+s:s}createSnapshot(t=!1){return new AF(this._buffer.createSnapshot(t))}getValueLength(t,i=!1){this._assertNotDisposed();const e=this.getFullModelRange(),s=this.getValueLengthInRange(e,t);return i?this._buffer.getBOM().length+s:s}getValueInRange(t,i=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(t),i)}getValueLengthInRange(t,i=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(t),i)}getCharacterCountInRange(t,i=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(t),i)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Ji("Illegal value for lineNumber");return this._buffer.getLineContent(t)}getLineLength(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Ji("Illegal value for lineNumber");return this._buffer.getLineLength(t)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Ji("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`\n`?0:1}getLineMinColumn(t){return this._assertNotDisposed(),1}getLineMaxColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Ji("Illegal value for lineNumber");return this._buffer.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Ji("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(t)}getLineLastNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Ji("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(t)}_validateRangeRelaxedNoAllocations(t){const i=this._buffer.getLineCount(),e=t.startLineNumber,s=t.startColumn;let n=Math.floor(typeof e!="number"||isNaN(e)?1:e),o=Math.floor(typeof s!="number"||isNaN(s)?1:s);if(n<1)n=1,o=1;else if(n>i)n=i,o=this.getLineMaxColumn(n);else if(o<=1)o=1;else{const t=this.getLineMaxColumn(n);o>=t&&(o=t)}const r=t.endLineNumber,h=t.endColumn;let c=Math.floor(typeof r!="number"||isNaN(r)?1:r),a=Math.floor(typeof h!="number"||isNaN(h)?1:h);if(c<1)c=1,a=1;else if(c>i)c=i,a=this.getLineMaxColumn(c);else if(a<=1)a=1;else{const t=this.getLineMaxColumn(c);a>=t&&(a=t)}return e===n&&s===o&&r===c&&h===a&&t instanceof Es&&!(t instanceof Bs)?t:new Es(n,o,c,a)}_isValidPosition(t,i,e){return typeof t!="number"||typeof i!="number"||isNaN(t)||isNaN(i)||t<1||i<1||(0|t)!==t||(0|i)!==i||t>this._buffer.getLineCount()?!1:i===1?!0:!(i>this.getLineMaxColumn(t)||e===1&&mo(this._buffer.getLineCharCode(t,i-2)))}_validatePosition(t,i,e){const s=Math.floor(typeof t!="number"||isNaN(t)?1:t),n=Math.floor(typeof i!="number"||isNaN(i)?1:i),o=this._buffer.getLineCount();if(s<1)return new Cs(1,1);if(s>o)return new Cs(o,this.getLineMaxColumn(o));if(n<=1)return new Cs(s,1);const r=this.getLineMaxColumn(s);return n>=r?new Cs(s,r):e===1&&mo(this._buffer.getLineCharCode(s,n-2))?new Cs(s,n-1):new Cs(s,n)}validatePosition(t){return this._assertNotDisposed(),t instanceof Cs&&this._isValidPosition(t.lineNumber,t.column,1)?t:this._validatePosition(t.lineNumber,t.column,1)}_isValidRange(t,i){const e=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;if(!this._isValidPosition(e,s,0)||!this._isValidPosition(n,o,0))return!1;if(i===1){const t=s>1?this._buffer.getLineCharCode(e,s-2):0,i=o>1&&o<=this._buffer.getLineLength(n)?this._buffer.getLineCharCode(n,o-2):0,r=mo(t),h=mo(i);return!r&&!h}return!0}validateRange(t){if(this._assertNotDisposed(),t instanceof Es&&!(t instanceof Bs)&&this._isValidRange(t,1))return t;const i=this._validatePosition(t.startLineNumber,t.startColumn,0),e=this._validatePosition(t.endLineNumber,t.endColumn,0),s=i.lineNumber,n=i.column,o=e.lineNumber,r=e.column;{const t=n>1?this._buffer.getLineCharCode(s,n-2):0,i=r>1&&r<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,r-2):0,e=mo(t),h=mo(i);return e||h?s===o&&n===r?new Es(s,n-1,o,r-1):e&&h?new Es(s,n-1,o,r+1):e?new Es(s,n-1,o,r):new Es(s,n,o,r+1):new Es(s,n,o,r)}}modifyPosition(t,i){this._assertNotDisposed();const e=this.getOffsetAt(t)+i;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,e)))}getFullModelRange(){this._assertNotDisposed();const t=this.getLineCount();return new Es(1,1,t,this.getLineMaxColumn(t))}findMatchesLineByLine(t,i,e,s){return this._buffer.findMatchesLineByLine(t,i,e,s)}findMatches(t,i,e,s,n,o,r=999){this._assertNotDisposed();let h=null;i!==null&&(Array.isArray(i)||(i=[i]),i.every((t=>Es.isIRange(t)))&&(h=i.map((t=>this.validateRange(t))))),h===null&&(h=[this.getFullModelRange()]),h=h.sort(((t,i)=>t.startLineNumber-i.startLineNumber||t.startColumn-i.startColumn));const c=[];let a;if(c.push(h.reduce(((t,i)=>Es.areIntersecting(t,i)?t.plusRange(i):(c.push(t),i)))),!e&&t.indexOf(`\n`)<0){const i=new lg(t,e,s,n).parseSearchRequest();if(!i)return[];a=t=>this.findMatchesLineByLine(t,i,o,r)}else a=i=>fg.findMatches(this,new lg(t,e,s,n),i,o,r);return c.map(a).reduce(((t,i)=>t.concat(i)),[])}findNextMatch(t,i,e,s,n,o){this._assertNotDisposed();const r=this.validatePosition(i);if(!e&&t.indexOf(`\n`)<0){const i=new lg(t,e,s,n).parseSearchRequest();if(!i)return null;const h=this.getLineCount();let c=new Es(r.lineNumber,r.column,h,this.getLineMaxColumn(h)),a=this.findMatchesLineByLine(c,i,o,1);return fg.findNextMatch(this,new lg(t,e,s,n),r,o),a.length>0?a[0]:(c=new Es(1,1,r.lineNumber,this.getLineMaxColumn(r.lineNumber)),a=this.findMatchesLineByLine(c,i,o,1),a.length>0?a[0]:null)}return fg.findNextMatch(this,new lg(t,e,s,n),r,o)}findPreviousMatch(t,i,e,s,n,o){this._assertNotDisposed();const r=this.validatePosition(i);return fg.findPreviousMatch(this,new lg(t,e,s,n),r,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(t){if((this.getEOL()===`\n`?0:1)!==t)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(t){return t instanceof rg?t:new rg(t.identifier||null,this.validateRange(t.range),t.text,t.forceMoveMarkers||!1,t.isAutoWhitespaceEdit||!1,t._isTracked||!1)}_validateEditOperations(t){const i=[];for(let e=0,s=t.length;e<s;e++)i[e]=this._validateEditOperation(t[e]);return i}pushEditOperations(t,i,e,s){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(t,this._validateEditOperations(i),e,s)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(t,i,e,s){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const e=i.map((t=>({range:this.validateRange(t.range),text:t.text})));let s=!0;if(t)for(let i=0,n=t.length;i<n;i++){const n=t[i];let o=!1;for(let t=0,i=e.length;t<i;t++){const i=e[t].range,s=i.startLineNumber>n.endLineNumber,r=n.startLineNumber>i.endLineNumber;if(!s&&!r){o=!0;break}}if(!o){s=!1;break}}if(s)for(let t=0,s=this._trimAutoWhitespaceLines.length;t<s;t++){const s=this._trimAutoWhitespaceLines[t],n=this.getLineMaxColumn(s);let o=!0;for(let t=0,i=e.length;t<i;t++){const i=e[t].range,r=e[t].text;if(!(s<i.startLineNumber||s>i.endLineNumber)&&!(s===i.startLineNumber&&i.startColumn===n&&i.isEmpty()&&r&&r.length>0&&r.charAt(0)===`\n`||s===i.startLineNumber&&i.startColumn===1&&i.isEmpty()&&r&&r.length>0&&r.charAt(r.length-1)===`\n`)){o=!1;break}}if(o){const t=new Es(s,1,s,n);i.push(new rg(null,t,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(t,i,e,s)}_applyUndo(t,i,e,s){const n=t.map((t=>{const i=this.getPositionAt(t.newPosition),e=this.getPositionAt(t.newEnd);return{range:new Es(i.lineNumber,i.column,e.lineNumber,e.column),text:t.oldText}}));this._applyUndoRedoEdits(n,i,!0,!1,e,s)}_applyRedo(t,i,e,s){const n=t.map((t=>{const i=this.getPositionAt(t.oldPosition),e=this.getPositionAt(t.oldEnd);return{range:new Es(i.lineNumber,i.column,e.lineNumber,e.column),text:t.newText}}));this._applyUndoRedoEdits(n,i,!1,!0,e,s)}_applyUndoRedoEdits(t,i,e,s,n,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=e,this._isRedoing=s,this.applyEdits(t,!1),this.setEOL(i),this._overwriteAlternativeVersionId(n)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(t,i=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const e=this._validateEditOperations(t);return this._doApplyEdits(e,i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(t,i){const e=this._buffer.getLineCount(),s=this._buffer.applyEdits(t,this._options.trimAutoWhitespace,i),n=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,o.length!==0){for(let t=0,i=o.length;t<i;t++){const i=o[t];this._decorationsTree.acceptReplace(i.rangeOffset,i.rangeLength,i.text.length,i.forceMoveMarkers)}const t=[];this._increaseVersionId();let i=e;for(let e=0,s=o.length;e<s;e++){const s=o[e],[r]=iD(s.text);this._onDidChangeDecorations.fire();const h=s.range.startLineNumber,c=s.range.endLineNumber,a=c-h,l=r,u=Math.min(a,l),d=l-a,f=n-i-d+h,g=f,A=f+l,p=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Cs(g,1)),this.getOffsetAt(new Cs(A,this.getLineMaxColumn(A))),0),w=UB.fromDecorations(p),m=new L(w);for(let i=u;i>=0;i--){const e=h+i,s=f+i;m.takeFromEndWhile((t=>t.lineNumber>s));const n=m.takeFromEndWhile((t=>t.lineNumber===s));t.push(new HB(e,this.getLineContent(s),n))}if(u<a){const i=h+u;t.push(new PB(i+1,c))}if(u<l){const e=new L(w),s=h+u,o=l-u,r=n-i-o+s+1,c=[],a=[];for(let t=0;t<o;t++){const i=r+t;a[t]=this.getLineContent(i),e.takeWhile((t=>t.lineNumber<i)),c[t]=e.takeWhile((t=>t.lineNumber===i))}t.push(new jB(s+1,h+l,a,c))}i+=d}this._emitContentChangedEvent(new YB(t,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(t){if(t===null||t.size===0)return;const i=Array.from(t).map((t=>new HB(t,this.getLineContent(t),this._getInjectedTextInLine(t))));this._onDidChangeInjectedText.fire(new _B(i))}changeDecorations(t,i=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(i,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(t,i){const e={addDecoration:(i,e)=>this._deltaDecorationsImpl(t,[],[{range:i,options:e}])[0],changeDecoration:(t,i)=>{this._changeDecorationImpl(t,i)},changeDecorationOptions:(t,i)=>{this._changeDecorationOptionsImpl(t,SF(i))},removeDecoration:i=>{this._deltaDecorationsImpl(t,[i],[])},deltaDecorations:(i,e)=>i.length===0&&e.length===0?[]:this._deltaDecorationsImpl(t,i,e)};let s=null;try{s=i(e)}catch(t){Oi(t)}return e.addDecoration=pF,e.changeDecoration=pF,e.changeDecorationOptions=pF,e.removeDecoration=pF,e.deltaDecorations=pF,s}deltaDecorations(t,i,e=0){if(this._assertNotDisposed(),t||(t=[]),t.length===0&&i.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Oi(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(e,t,i)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(t){return this.getDecorationRange(t)}_setTrackedRange(t,i,e){const s=t?this._decorations[t]:null;if(!s)return i?this._deltaDecorationsImpl(0,[],[{range:i,options:MF[e]}],!0)[0]:null;if(!i)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const n=this._validateRangeRelaxedNoAllocations(i),o=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),r=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),o,r,n),s.setOptions(MF[e]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(t){if(this._isDisposed)return;const i=this._decorationsTree.collectNodesFromOwner(t);for(let t=0,e=i.length;t<e;t++){const e=i[t];this._decorationsTree.delete(e),delete this._decorations[e.id]}}getDecorationOptions(t){const i=this._decorations[t];return i?i.options:null}getDecorationRange(t){const i=this._decorations[t];return i?this._decorationsTree.getNodeRange(this,i):null}getLineDecorations(t,i=0,e=!1){return t<1||t>this.getLineCount()?[]:this.getLinesDecorations(t,t,i,e)}getLinesDecorations(t,i,e=0,s=!1,n=!1){const o=this.getLineCount(),r=Math.min(o,Math.max(1,t)),h=Math.min(o,Math.max(1,i)),c=this.getLineMaxColumn(h),a=new Es(r,1,h,c),l=this._getDecorationsInRange(a,e,s,n);return x(l,this._decorationProvider.getDecorationsInRange(a,e,s)),l}getDecorationsInRange(t,i=0,e=!1,s=!1,n=!1){const o=this.validateRange(t),r=this._getDecorationsInRange(o,i,e,n);return x(r,this._decorationProvider.getDecorationsInRange(o,i,e,s)),r}getOverviewRulerDecorations(t=0,i=!1){return this._decorationsTree.getAll(this,t,i,!0,!1)}getInjectedTextDecorations(t=0){return this._decorationsTree.getAllInjectedText(this,t)}_getInjectedTextInLine(t){const i=this._buffer.getOffsetAt(t,1),e=i+this._buffer.getLineLength(t),s=this._decorationsTree.getInjectedTextInInterval(this,i,e,0);return UB.fromDecorations(s).filter((i=>i.lineNumber===t))}getAllDecorations(t=0,i=!1){let e=this._decorationsTree.getAll(this,t,i,!1,!1);return e=e.concat(this._decorationProvider.getAllDecorations(t,i)),e}getAllMarginDecorations(t=0){return this._decorationsTree.getAll(this,t,!1,!1,!0)}_getDecorationsInRange(t,i,e,s){const n=this._buffer.getOffsetAt(t.startLineNumber,t.startColumn),o=this._buffer.getOffsetAt(t.endLineNumber,t.endColumn);return this._decorationsTree.getAllInInterval(this,n,o,i,e,s)}getRangeAt(t,i){return this._buffer.getRangeAt(t,i-t)}_changeDecorationImpl(t,i){const e=this._decorations[t];if(!e)return;if(e.options.after){const i=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber)}if(e.options.before){const i=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(i),n=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(e),e.reset(this.getVersionId(),n,o,s),this._decorationsTree.insert(e),this._onDidChangeDecorations.checkAffectedAndFire(e.options),e.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),e.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(t,i){const e=this._decorations[t];if(!e)return;const s=!(!e.options.overviewRuler||!e.options.overviewRuler.color),n=!(!i.overviewRuler||!i.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(e.options),this._onDidChangeDecorations.checkAffectedAndFire(i),e.options.after||i.after){const t=this._decorationsTree.getNodeRange(this,e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.endLineNumber)}if(e.options.before||i.before){const t=this._decorationsTree.getNodeRange(this,e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.startLineNumber)}const o=s!==n,r=function(t){return!!t.after||!!t.before}(i)!==vF(e);o||r?(this._decorationsTree.delete(e),e.setOptions(i),this._decorationsTree.insert(e)):e.setOptions(i)}_deltaDecorationsImpl(t,i,e,s=!1){const n=this.getVersionId(),o=i.length;let r=0;const h=e.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const a=new Array(h);for(;r<o||c<h;){let l=null;if(r<o){do{l=this._decorations[i[r++]]}while(!l&&r<o);if(l){if(l.options.after){const t=this._decorationsTree.getNodeRange(this,l);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.endLineNumber)}if(l.options.before){const t=this._decorationsTree.getNodeRange(this,l);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.startLineNumber)}this._decorationsTree.delete(l),s||this._onDidChangeDecorations.checkAffectedAndFire(l.options)}}if(c<h){if(!l){const t=++this._lastDecorationId,i=`${this._instanceId};${t}`;l=new eS(i,0,0),this._decorations[i]=l}const i=e[c],o=this._validateRangeRelaxedNoAllocations(i.range),r=SF(i.options),h=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),u=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);l.ownerId=t,l.reset(n,h,u,o),l.setOptions(r),l.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber),l.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber),s||this._onDidChangeDecorations.checkAffectedAndFire(r),this._decorationsTree.insert(l),a[c]=l.id,c++}else l&&delete this._decorations[l.id]}return a}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(t,i){typeof t=="string"?(this._languageSelectionListener.clear(),this._setLanguage(t,i)):(this._languageSelectionListener.value=t.onDidChange((()=>this._setLanguage(t.languageId,i))),this._setLanguage(t.languageId,i))}_setLanguage(t,i){this.tokenization.setLanguageId(t,i),this._languageService.requestRichLanguageFeatures(t)}getLanguageIdAtPosition(t,i){return this.tokenization.getLanguageIdAtPosition(t,i)}getWordAtPosition(t){return this._tokenizationTextModelPart.getWordAtPosition(t)}getWordUntilPosition(t){return this._tokenizationTextModelPart.getWordUntilPosition(t)}normalizePosition(t,i){return t}getLineIndentColumn(t){return function(t){let i=0;for(const e of t){if(e!==" "&&e!=="\t")break;i++}return i}(this.getLineContent(t))+1}};function mF(t){return!(!t.options.overviewRuler||!t.options.overviewRuler.color)}function vF(t){return!!t.options.after||!!t.options.before}wF._MODEL_SYNC_LIMIT=52428800,wF.LARGE_FILE_SIZE_THRESHOLD=20971520,wF.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,wF.LARGE_FILE_HEAP_OPERATION_THRESHOLD=268435456,wF.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:jt.tabSize,indentSize:jt.indentSize,insertSpaces:jt.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:jt.trimAutoWhitespace,largeFileOptimizations:jt.largeFileOptimizations,bracketPairColorizationOptions:jt.bracketPairColorizationOptions},wF=lF=uF([dF(4,rF),dF(5,Od),dF(6,uf)],wF);class bF{constructor(){this._decorationsTree0=new nS,this._decorationsTree1=new nS,this._injectedTextDecorationsTree=new nS}ensureAllNodesHaveRanges(t){this.getAll(t,0,!1,!1,!1)}_ensureNodesHaveRanges(t,i){for(const e of i)e.range===null&&(e.range=t.getRangeAt(e.cachedAbsoluteStart,e.cachedAbsoluteEnd));return i}getAllInInterval(t,i,e,s,n,o){const r=t.getVersionId(),h=this._intervalSearch(i,e,s,n,r,o);return this._ensureNodesHaveRanges(t,h)}_intervalSearch(t,i,e,s,n,o){const r=this._decorationsTree0.intervalSearch(t,i,e,s,n,o),h=this._decorationsTree1.intervalSearch(t,i,e,s,n,o),c=this._injectedTextDecorationsTree.intervalSearch(t,i,e,s,n,o);return r.concat(h).concat(c)}getInjectedTextInInterval(t,i,e,s){const n=t.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(i,e,s,!1,n,!1);return this._ensureNodesHaveRanges(t,o).filter((t=>t.options.showIfCollapsed||!t.range.isEmpty()))}getAllInjectedText(t,i){const e=t.getVersionId(),s=this._injectedTextDecorationsTree.search(i,!1,e,!1);return this._ensureNodesHaveRanges(t,s).filter((t=>t.options.showIfCollapsed||!t.range.isEmpty()))}getAll(t,i,e,s,n){const o=t.getVersionId(),r=this._search(i,e,s,o,n);return this._ensureNodesHaveRanges(t,r)}_search(t,i,e,s,n){if(e)return this._decorationsTree1.search(t,i,s,n);{const e=this._decorationsTree0.search(t,i,s,n),o=this._decorationsTree1.search(t,i,s,n),r=this._injectedTextDecorationsTree.search(t,i,s,n);return e.concat(o).concat(r)}}collectNodesFromOwner(t){const i=this._decorationsTree0.collectNodesFromOwner(t),e=this._decorationsTree1.collectNodesFromOwner(t),s=this._injectedTextDecorationsTree.collectNodesFromOwner(t);return i.concat(e).concat(s)}collectNodesPostOrder(){const t=this._decorationsTree0.collectNodesPostOrder(),i=this._decorationsTree1.collectNodesPostOrder(),e=this._injectedTextDecorationsTree.collectNodesPostOrder();return t.concat(i).concat(e)}insert(t){vF(t)?this._injectedTextDecorationsTree.insert(t):mF(t)?this._decorationsTree1.insert(t):this._decorationsTree0.insert(t)}delete(t){vF(t)?this._injectedTextDecorationsTree.delete(t):mF(t)?this._decorationsTree1.delete(t):this._decorationsTree0.delete(t)}getNodeRange(t,i){const e=t.getVersionId();return i.cachedVersionId!==e&&this._resolveNode(i,e),i.range===null&&(i.range=t.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd)),i.range}_resolveNode(t,i){vF(t)?this._injectedTextDecorationsTree.resolveNode(t,i):mF(t)?this._decorationsTree1.resolveNode(t,i):this._decorationsTree0.resolveNode(t,i)}acceptReplace(t,i,e,s){this._decorationsTree0.acceptReplace(t,i,e,s),this._decorationsTree1.acceptReplace(t,i,e,s),this._injectedTextDecorationsTree.acceptReplace(t,i,e,s)}}function yF(t){return t.replace(/[^a-z0-9\-_]/gi," ")}class kF{constructor(t){this.color=t.color||"",this.darkColor=t.darkColor||""}}class xF extends kF{constructor(t){super(t),this._resolvedColor=null,this.position=typeof t.position=="number"?t.position:ig.Center}getColor(t){return this._resolvedColor||(t.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,t):this._resolvedColor=this._resolveColor(this.color,t)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(t,i){if(typeof t=="string")return t;const e=t?i.getColor(t.id):null;return e?e.toString():""}}class CF{constructor(t){var i;this.position=(i=t==null?void 0:t.position)!==null&&i!==void 0?i:eg.Center,this.persistLane=t==null?void 0:t.persistLane}}class EF extends kF{constructor(t){var i,e;super(t),this.position=t.position,this.sectionHeaderStyle=(i=t.sectionHeaderStyle)!==null&&i!==void 0?i:null,this.sectionHeaderText=(e=t.sectionHeaderText)!==null&&e!==void 0?e:null}getColor(t){return this._resolvedColor||(t.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,t):this._resolvedColor=this._resolveColor(this.color,t)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(t,i){return typeof t=="string"?CA.fromHex(t):i.getColor(t.id)}}class BF{static from(t){return t instanceof BF?t:new BF(t)}constructor(t){this.content=t.content||"",this.inlineClassName=t.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=t.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=t.attachedData||null,this.cursorStops=t.cursorStops||null}}class DF{static register(t){return new DF(t)}static createDynamic(t){return new DF(t)}constructor(t){var i,e,s,n,o,r;this.description=t.description,this.blockClassName=t.blockClassName?yF(t.blockClassName):null,this.blockDoesNotCollapse=(i=t.blockDoesNotCollapse)!==null&&i!==void 0?i:null,this.blockIsAfterEnd=(e=t.blockIsAfterEnd)!==null&&e!==void 0?e:null,this.blockPadding=(s=t.blockPadding)!==null&&s!==void 0?s:null,this.stickiness=t.stickiness||0,this.zIndex=t.zIndex||0,this.className=t.className?yF(t.className):null,this.shouldFillLineOnLineBreak=(n=t.shouldFillLineOnLineBreak)!==null&&n!==void 0?n:null,this.hoverMessage=t.hoverMessage||null,this.glyphMarginHoverMessage=t.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=t.lineNumberHoverMessage||null,this.isWholeLine=t.isWholeLine||!1,this.showIfCollapsed=t.showIfCollapsed||!1,this.collapseOnReplaceEdit=t.collapseOnReplaceEdit||!1,this.overviewRuler=t.overviewRuler?new xF(t.overviewRuler):null,this.minimap=t.minimap?new EF(t.minimap):null,this.glyphMargin=t.glyphMarginClassName?new CF(t.glyphMargin):null,this.glyphMarginClassName=t.glyphMarginClassName?yF(t.glyphMarginClassName):null,this.linesDecorationsClassName=t.linesDecorationsClassName?yF(t.linesDecorationsClassName):null,this.lineNumberClassName=t.lineNumberClassName?yF(t.lineNumberClassName):null,this.linesDecorationsTooltip=t.linesDecorationsTooltip?t.linesDecorationsTooltip.replace(/[<>"'&]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return t})):null,this.firstLineDecorationClassName=t.firstLineDecorationClassName?yF(t.firstLineDecorationClassName):null,this.marginClassName=t.marginClassName?yF(t.marginClassName):null,this.inlineClassName=t.inlineClassName?yF(t.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=t.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=t.beforeContentClassName?yF(t.beforeContentClassName):null,this.afterContentClassName=t.afterContentClassName?yF(t.afterContentClassName):null,this.after=t.after?BF.from(t.after):null,this.before=t.before?BF.from(t.before):null,this.hideInCommentTokens=(o=t.hideInCommentTokens)!==null&&o!==void 0&&o,this.hideInStringTokens=(r=t.hideInStringTokens)!==null&&r!==void 0&&r}}DF.EMPTY=DF.register({description:"empty"});const MF=[DF.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),DF.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),DF.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),DF.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function SF(t){return t instanceof DF?t:DF.createDynamic(t)}class FF extends te{constructor(t){super(),this.handleBeforeFire=t,this._actual=this._register(new de),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var t;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(t=this._affectedInjectedTextLines)===null||t===void 0||t.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(t){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(t)}checkAffectedAndFire(t){var i,e;this._affectsMinimap||(this._affectsMinimap=!!(!((i=t.minimap)===null||i===void 0)&&i.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(!((e=t.overviewRuler)===null||e===void 0)&&e.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!t.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!t.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(t)}}class IF extends te{constructor(){super(),this._fastEmitter=this._register(new de),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new de),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(t=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=t;const i=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(i),this._slowEmitter.fire(i)}}fire(t){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(t):this._deferredEvent=t:(this._fastEmitter.fire(t),this._slowEmitter.fire(t))}}class LF{constructor(){this._onDidChangeVisibleRanges=new de,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const t=new RF((i=>{this._onDidChangeVisibleRanges.fire({view:t,state:i})}));return this._views.add(t),t}detachView(t){this._views.delete(t),this._onDidChangeVisibleRanges.fire({view:t,state:void 0})}}class RF{constructor(t){this.handleStateChange=t}setVisibleLines(t,i){const e=t.map((t=>new Fg(t.startLineNumber,t.endLineNumber+1)));this.handleStateChange({visibleLineRanges:e,stabilized:i})}}class TF{static create(t){return new TF(t.get(134),t.get(133))}constructor(t,i){this.classifier=new NF(t,i)}createLineBreaksComputer(t,i,e,s,n){const o=[],r=[],h=[];return{addRequest:(t,i,e)=>{o.push(t),r.push(i),h.push(e)},finalize:()=>{const c=t.typicalFullwidthCharacterWidth/t.typicalHalfwidthCharacterWidth,a=[];for(let t=0,l=o.length;t<l;t++){const l=r[t],u=h[t];!u||u.injectionOptions||l?a[t]=UF(this.classifier,o[t],l,i,e,c,s,n):a[t]=zF(this.classifier,u,o[t],i,e,c,s,n)}return QF.length=0,OF.length=0,a}}}}class NF extends Qf{constructor(t,i){super(0);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),1);for(let t=0;t<i.length;t++)this.set(i.charCodeAt(t),2)}get(t){return t>=0&&t<256?this._asciiMap[t]:t>=12352&&t<=12543||t>=13312&&t<=19903||t>=19968&&t<=40959?3:this._map.get(t)||this._defaultValue}}let QF=[],OF=[];function zF(t,i,e,s,n,o,r,h){if(n===-1)return null;const c=e.length;if(c<=1)return null;const a=h==="keepAll",l=i.breakOffsets,u=i.breakOffsetsVisibleColumn,d=WF(e,s,n,o,r),f=n-d,g=QF,A=OF;let p=0,w=0,m=0,v=n;const b=l.length;let y=0;if(y>=0){let t=Math.abs(u[y]-v);for(;y+1<b;){const i=Math.abs(u[y+1]-v);if(i>=t)break;t=i,y++}}for(;y<b;){let i=y<0?0:l[y],n=y<0?0:u[y];w>i&&(i=w,n=m);let r=0,h=0,d=0,k=0;if(n<=v){let m=n,b=i===0?0:e.charCodeAt(i-1),y=i===0?0:t.get(b),x=!0;for(let n=i;n<c;n++){const i=n,c=e.charCodeAt(n);let l,u;if(mo(c)?(n++,l=0,u=2):(l=t.get(c),u=HF(c,m,s,o)),i>w&&jF(b,y,c,l,a)&&(r=i,h=m),m+=u,m>v){i>w?(d=i,k=m-u):(d=n+1,k=m),m-h>f&&(r=0),x=!1;break}b=c,y=l}if(x){p>0&&(g[p]=l[l.length-1],A[p]=u[l.length-1],p++);break}}if(r===0){let c=n,l=e.charCodeAt(i),u=t.get(l),g=!1;for(let s=i-1;s>=w;s--){const i=s+1,n=e.charCodeAt(s);if(n===9){g=!0;break}let A,p;if(vo(n)?(s--,A=0,p=2):(A=t.get(n),p=Lo(n)?o:1),c<=v){if(d===0&&(d=i,k=c),c<=v-f)break;if(jF(n,A,l,u,a)){r=i,h=c;break}}c-=p,l=n,u=A}if(r!==0){const t=f-(k-h);if(t<=s){const i=e.charCodeAt(d);let n;n=mo(i)?2:HF(i,k,s,o),t-n<0&&(r=0)}}if(g){y--;continue}}if(r===0&&(r=d,h=k),r<=w){const t=e.charCodeAt(w);mo(t)?(r=w+2,h=m+2):(r=w+1,h=m+HF(t,m,s,o))}for(w=r,g[p]=r,m=h,A[p]=h,p++,v=h+f;y<0||y<b&&u[y]<h;)y++;let x=Math.abs(u[y]-v);for(;y+1<b;){const t=Math.abs(u[y+1]-v);if(t>=x)break;x=t,y++}}return p===0?null:(g.length=p,A.length=p,QF=i.breakOffsets,OF=i.breakOffsetsVisibleColumn,i.breakOffsets=g,i.breakOffsetsVisibleColumn=A,i.wrappedTextIndentLength=d,i)}function UF(t,i,e,s,n,o,r,h){const c=UB.applyInjectedText(i,e);let a,l;if(e&&e.length>0?(a=e.map((t=>t.options)),l=e.map((t=>t.column-1))):(a=null,l=null),n===-1)return a?new TB(l,a,[c.length],[],0):null;const u=c.length;if(u<=1)return a?new TB(l,a,[c.length],[],0):null;const d=h==="keepAll",f=WF(c,s,n,o,r),g=n-f,A=[],p=[];let w=0,m=0,v=0,b=n,y=c.charCodeAt(0),k=t.get(y),x=HF(y,0,s,o),C=1;mo(y)&&(x+=1,y=c.charCodeAt(1),k=t.get(y),C++);for(let i=C;i<u;i++){const e=i,n=c.charCodeAt(i);let r,h;mo(n)?(i++,r=0,h=2):(r=t.get(n),h=HF(n,x,s,o)),jF(y,k,n,r,d)&&(m=e,v=x),x+=h,x>b&&((m===0||x-v>g)&&(m=e,v=x-h),A[w]=m,p[w]=v,w++,b=v+g,m=0),y=n,k=r}return w!==0||e&&e.length!==0?(A[w]=u,p[w]=x,new TB(l,a,A,p,f)):null}function HF(t,i,e,s){return t===9?e-i%e:Lo(t)||t<32?s:1}function PF(t,i){return i-t%i}function jF(t,i,e,s,n){return e!==32&&(i===2&&s!==2||i!==1&&s===1||!n&&i===3&&s!==2||!n&&s===3&&i!==1)}function WF(t,i,e,s,n){let o=0;if(n!==0){const r=so(t);if(r!==-1){for(let e=0;e<r;e++)o+=t.charCodeAt(e)===9?PF(o,i):1;const h=n===3?2:n===2?1:0;for(let t=0;t<h;t++)o+=PF(o,i);o+s>e&&(o=0)}}return o}class YF{constructor(t){this._selTrackedRange=null,this._trackSelection=!0,this._setState(t,new tC(new Es(1,1,1,1),0,0,new Cs(1,1),0),new tC(new Es(1,1,1,1),0,0,new Cs(1,1),0))}dispose(t){this._removeTrackedRange(t)}startTrackingSelection(t){this._trackSelection=!0,this._updateTrackedRange(t)}stopTrackingSelection(t){this._trackSelection=!1,this._removeTrackedRange(t)}_updateTrackedRange(t){this._trackSelection&&(this._selTrackedRange=t.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(t){this._selTrackedRange=t.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Xx(this.modelState,this.viewState)}readSelectionFromMarkers(t){const i=t.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!i.isEmpty()?Bs.fromRange(i.collapseToEnd(),this.modelState.selection.getDirection()):Bs.fromRange(i,this.modelState.selection.getDirection())}ensureValidState(t){this._setState(t,this.modelState,this.viewState)}setState(t,i,e){this._setState(t,i,e)}static _validatePositionWithCache(t,i,e,s){return i.equals(e)?s:t.normalizePosition(i,2)}static _validateViewState(t,i){const e=i.position,s=i.selectionStart.getStartPosition(),n=i.selectionStart.getEndPosition(),o=t.normalizePosition(e,2),r=this._validatePositionWithCache(t,s,e,o),h=this._validatePositionWithCache(t,n,s,r);return e.equals(o)&&s.equals(r)&&n.equals(h)?i:new tC(Es.fromPositions(r,h),i.selectionStartKind,i.selectionStartLeftoverVisibleColumns+s.column-r.column,o,i.leftoverVisibleColumns+e.column-o.column)}_setState(t,i,e){if(e&&(e=YF._validateViewState(t.viewModel,e)),i){const e=t.model.validateRange(i.selectionStart),s=i.selectionStart.equalsRange(e)?i.selectionStartLeftoverVisibleColumns:0,n=t.model.validatePosition(i.position),o=i.position.equals(n)?i.leftoverVisibleColumns:0;i=new tC(e,i.selectionStartKind,s,n,o)}else{if(!e)return;const s=t.model.validateRange(t.coordinatesConverter.convertViewRangeToModelRange(e.selectionStart)),n=t.model.validatePosition(t.coordinatesConverter.convertViewPositionToModelPosition(e.position));i=new tC(s,e.selectionStartKind,e.selectionStartLeftoverVisibleColumns,n,e.leftoverVisibleColumns)}if(e){const s=t.coordinatesConverter.validateViewRange(e.selectionStart,i.selectionStart),n=t.coordinatesConverter.validateViewPosition(e.position,i.position);e=new tC(s,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,n,i.leftoverVisibleColumns)}else{const s=t.coordinatesConverter.convertModelPositionToViewPosition(new Cs(i.selectionStart.startLineNumber,i.selectionStart.startColumn)),n=t.coordinatesConverter.convertModelPositionToViewPosition(new Cs(i.selectionStart.endLineNumber,i.selectionStart.endColumn)),o=new Es(s.lineNumber,s.column,n.lineNumber,n.column),r=t.coordinatesConverter.convertModelPositionToViewPosition(i.position);e=new tC(o,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,r,i.leftoverVisibleColumns)}this.modelState=i,this.viewState=e,this._updateTrackedRange(t)}}class _F{constructor(t){this.context=t,this.cursors=[new YF(t)],this.lastAddedCursorIndex=0}dispose(){for(const t of this.cursors)t.dispose(this.context)}startTrackingSelections(){for(const t of this.cursors)t.startTrackingSelection(this.context)}stopTrackingSelections(){for(const t of this.cursors)t.stopTrackingSelection(this.context)}updateContext(t){this.context=t}ensureValidState(){for(const t of this.cursors)t.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map((t=>t.readSelectionFromMarkers(this.context)))}getAll(){return this.cursors.map((t=>t.asCursorState()))}getViewPositions(){return this.cursors.map((t=>t.viewState.position))}getTopMostViewPosition(){return function(t,i){return Mg(t,((t,e)=>-i(t,e)))}(this.cursors,M((t=>t.viewState.position),Cs.compare)).viewState.position}getBottomMostViewPosition(){return function(t,i){if(t.length===0)return;let e=t[0];for(let s=1;s<t.length;s++){const n=t[s];i(n,e)>=0&&(e=n)}return e}(this.cursors,M((t=>t.viewState.position),Cs.compare)).viewState.position}getSelections(){return this.cursors.map((t=>t.modelState.selection))}getViewSelections(){return this.cursors.map((t=>t.viewState.selection))}setSelections(t){this.setStates(Xx.fromModelSelections(t))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(t){t!==null&&(this.cursors[0].setState(this.context,t[0].modelState,t[0].viewState),this._setSecondaryStates(t.slice(1)))}_setSecondaryStates(t){const i=this.cursors.length-1,e=t.length;if(i<e){const t=e-i;for(let i=0;i<t;i++)this._addSecondaryCursor()}else if(i>e){const t=i-e;for(let i=0;i<t;i++)this._removeSecondaryCursor(this.cursors.length-2)}for(let i=0;i<e;i++)this.cursors[i+1].setState(this.context,t[i].modelState,t[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new YF(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(t){this.lastAddedCursorIndex>=t+1&&this.lastAddedCursorIndex--,this.cursors[t+1].dispose(this.context),this.cursors.splice(t+1,1)}normalize(){if(this.cursors.length===1)return;const t=this.cursors.slice(0),i=[];for(let e=0,s=t.length;e<s;e++)i.push({index:e,selection:t[e].modelState.selection});i.sort(M((t=>t.selection),Es.compareRangesUsingStarts));for(let e=0;e<i.length-1;e++){const s=i[e],n=i[e+1],o=s.selection,r=n.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let h;if(h=r.isEmpty()||o.isEmpty()?r.getStartPosition().isBeforeOrEqual(o.getEndPosition()):r.getStartPosition().isBefore(o.getEndPosition()),h){const o=s.index<n.index?e:e+1,r=s.index<n.index?e+1:e,h=i[r].index,c=i[o].index,a=i[r].selection,l=i[o].selection;if(!a.equalsSelection(l)){const e=a.plusRange(l),s=a.selectionStartLineNumber===a.startLineNumber&&a.selectionStartColumn===a.startColumn,n=l.selectionStartLineNumber===l.startLineNumber&&l.selectionStartColumn===l.startColumn;let r,u;h===this.lastAddedCursorIndex?(r=s,this.lastAddedCursorIndex=c):r=n,u=r?new Bs(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Bs(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn),i[o].selection=u;const d=Xx.fromModelSelection(u);t[c].setState(this.context,d.modelState,d.viewState)}for(const t of i)t.index>h&&t.index--;t.splice(h,1),i.splice(r,1),this._removeSecondaryCursor(h-1),e--}}}}class VF{constructor(t,i,e,s){this._cursorContextBrand=void 0,this.model=t,this.viewModel=i,this.coordinatesConverter=e,this.cursorConfig=s}}class JF{constructor(){this.type=0}}class GF{constructor(){this.type=1}}class KF{constructor(t){this.type=2,this._source=t}hasChanged(t){return this._source.hasChanged(t)}}class $F{constructor(t,i,e){this.selections=t,this.modelSelections=i,this.reason=e,this.type=3}}class XF{constructor(t){this.type=4,t?(this.affectsMinimap=t.affectsMinimap,this.affectsOverviewRuler=t.affectsOverviewRuler,this.affectsGlyphMargin=t.affectsGlyphMargin,this.affectsLineNumber=t.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class qF{constructor(){this.type=5}}class ZF{constructor(t){this.type=6,this.isFocused=t}}class tI{constructor(){this.type=7}}class iI{constructor(){this.type=8}}class eI{constructor(t,i){this.fromLineNumber=t,this.count=i,this.type=9}}class sI{constructor(t,i){this.type=10,this.fromLineNumber=t,this.toLineNumber=i}}class nI{constructor(t,i){this.type=11,this.fromLineNumber=t,this.toLineNumber=i}}class oI{constructor(t,i,e,s,n,o,r){this.source=t,this.minimalReveal=i,this.range=e,this.selections=s,this.verticalType=n,this.revealHorizontal=o,this.scrollType=r,this.type=12}}class rI{constructor(t){this.type=13,this.scrollWidth=t.scrollWidth,this.scrollLeft=t.scrollLeft,this.scrollHeight=t.scrollHeight,this.scrollTop=t.scrollTop,this.scrollWidthChanged=t.scrollWidthChanged,this.scrollLeftChanged=t.scrollLeftChanged,this.scrollHeightChanged=t.scrollHeightChanged,this.scrollTopChanged=t.scrollTopChanged}}class hI{constructor(t){this.theme=t,this.type=14}}class cI{constructor(t){this.type=15,this.ranges=t}}class aI{constructor(){this.type=16}}let lI=class{constructor(){this.type=17}};class uI extends te{constructor(){super(),this._onEvent=this._register(new de),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(t){this._addOutgoingEvent(t),this._emitOutgoingEvents()}_addOutgoingEvent(t){for(let i=0,e=this._outgoingEvents.length;i<e;i++){const e=this._outgoingEvents[i].kind===t.kind?this._outgoingEvents[i].attemptToMerge(t):null;if(e)return void(this._outgoingEvents[i]=e)}this._outgoingEvents.push(t)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const t=this._outgoingEvents.shift();t.isNoOp()||this._onEvent.fire(t)}}addViewEventHandler(t){for(let i=0,e=this._eventHandlers.length;i<e;i++)this._eventHandlers[i]===t&&console.warn("Detected duplicate listener in ViewEventDispatcher",t);this._eventHandlers.push(t)}removeViewEventHandler(t){for(let i=0;i<this._eventHandlers.length;i++)if(this._eventHandlers[i]===t){this._eventHandlers.splice(i,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new dI),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const t=this._collector.outgoingEvents,i=this._collector.viewEvents;this._collector=null;for(const i of t)this._addOutgoingEvent(i);i.length>0&&this._emitMany(i)}this._emitOutgoingEvents()}emitSingleViewEvent(t){try{this.beginEmitViewEvents().emitViewEvent(t)}finally{this.endEmitViewEvents()}}_emitMany(t){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(t):this._viewEventQueue=t,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const t=this._viewEventQueue;this._viewEventQueue=null;const i=this._eventHandlers.slice(0);for(const e of i)e.handleEvents(t)}}}class dI{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(t){this.viewEvents.push(t)}emitOutgoingEvent(t){this.outgoingEvents.push(t)}}class fI{constructor(t,i,e,s){this.kind=0,this._oldContentWidth=t,this._oldContentHeight=i,this.contentWidth=e,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(t){return t.kind!==this.kind?null:new fI(this._oldContentWidth,this._oldContentHeight,t.contentWidth,t.contentHeight)}}class gI{constructor(t,i){this.kind=1,this.oldHasFocus=t,this.hasFocus=i}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(t){return t.kind!==this.kind?null:new gI(this.oldHasFocus,t.hasFocus)}}class AI{constructor(t,i,e,s,n,o,r,h){this.kind=2,this._oldScrollWidth=t,this._oldScrollLeft=i,this._oldScrollHeight=e,this._oldScrollTop=s,this.scrollWidth=n,this.scrollLeft=o,this.scrollHeight=r,this.scrollTop=h,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!(this.scrollWidthChanged||this.scrollLeftChanged||this.scrollHeightChanged||this.scrollTopChanged)}attemptToMerge(t){return t.kind!==this.kind?null:new AI(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,t.scrollWidth,t.scrollLeft,t.scrollHeight,t.scrollTop)}}class pI{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(t){return t.kind!==this.kind?null:this}}class wI{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(t){return t.kind!==this.kind?null:this}}class mI{constructor(t,i,e,s,n,o,r){this.kind=6,this.oldSelections=t,this.selections=i,this.oldModelVersionId=e,this.modelVersionId=s,this.source=n,this.reason=o,this.reachedMaxCursorCount=r}static _selectionsAreEqual(t,i){if(!t&&!i)return!0;if(!t||!i)return!1;const e=t.length;if(e!==i.length)return!1;for(let s=0;s<e;s++)if(!t[s].equalsSelection(i[s]))return!1;return!0}isNoOp(){return mI._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(t){return t.kind!==this.kind?null:new mI(this.oldSelections,t.selections,this.oldModelVersionId,t.modelVersionId,t.source,t.reason,this.reachedMaxCursorCount||t.reachedMaxCursorCount)}}class vI{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(t){return t.kind!==this.kind?null:this}}class bI{constructor(t){this.event=t,this.kind=7}isNoOp(){return!1}attemptToMerge(t){return null}}class yI{constructor(t){this.event=t,this.kind=8}isNoOp(){return!1}attemptToMerge(t){return null}}class kI{constructor(t){this.event=t,this.kind=9}isNoOp(){return!1}attemptToMerge(t){return null}}class xI{constructor(t){this.event=t,this.kind=10}isNoOp(){return!1}attemptToMerge(t){return null}}class CI{constructor(t){this.event=t,this.kind=11}isNoOp(){return!1}attemptToMerge(t){return null}}class EI{constructor(t){this.event=t,this.kind=12}isNoOp(){return!1}attemptToMerge(t){return null}}class BI extends te{constructor(t,i,e,s){super(),this._model=t,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=i,this._coordinatesConverter=e,this.context=new VF(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new _F(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=$i(this._autoClosedActions),super.dispose()}updateConfiguration(t){this.context=new VF(this._model,this._viewModel,this._coordinatesConverter,t),this._cursors.updateContext(this.context)}onLineMappingChanged(t){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(t,"viewModel",0,this.getCursorStates())}setHasFocus(t){this._hasFocus=t}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const t=this._cursors.getSelections();for(let i=0;i<this._autoClosedActions.length;i++){const e=this._autoClosedActions[i];e.isValid(t)||(e.dispose(),this._autoClosedActions.splice(i,1),i--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(t,i,e,s){let n=!1;const o=this.context.cursorConfig.multiCursorLimit;s!==null&&s.length>o&&(s=s.slice(0,o),n=!0);const r=DI.from(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,e,r,n)}setCursorColumnSelectData(t){this._columnSelectData=t}revealAll(t,i,e,s,n,o){const r=this._cursors.getViewPositions();let h=null,c=null;r.length>1?c=this._cursors.getViewSelections():h=Es.fromPositions(r[0],r[0]),t.emitViewEvent(new oI(i,e,h,c,s,n,o))}revealPrimary(t,i,e,s,n,o){const r=[this._cursors.getPrimaryCursor().viewState.selection];t.emitViewEvent(new oI(i,e,null,r,s,n,o))}saveState(){const t=[],i=this._cursors.getSelections();for(let e=0,s=i.length;e<s;e++){const s=i[e];t.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return t}restoreState(t,i){const e=[];for(let t=0,s=i.length;t<s;t++){const s=i[t];let n=1,o=1;s.position&&s.position.lineNumber&&(n=s.position.lineNumber),s.position&&s.position.column&&(o=s.position.column);let r=n,h=o;s.selectionStart&&s.selectionStart.lineNumber&&(r=s.selectionStart.lineNumber),s.selectionStart&&s.selectionStart.column&&(h=s.selectionStart.column),e.push({selectionStartLineNumber:r,selectionStartColumn:h,positionLineNumber:n,positionColumn:o})}this.setStates(t,"restoreState",0,Xx.fromModelSelections(e)),this.revealAll(t,"restoreState",!1,0,!0,1)}onModelContentChanged(t,i){if(i instanceof _B){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(t,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const e=i.rawContentChangedEvent;if(this._knownModelVersionId=e.versionId,this._isHandling)return;const s=e.containsEvent(1);if(this._prevEditOperationType=0,s)this._cursors.dispose(),this._cursors=new _F(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,"model",1,null,!1);else if(this._hasFocus&&e.resultingSelection&&e.resultingSelection.length>0){const i=Xx.fromModelSelections(e.resultingSelection);this.setStates(t,"modelChange",e.isUndoing?5:e.isRedoing?6:2,i)&&this.revealAll(t,"modelChange",!1,0,!0,0)}else{const i=this._cursors.readSelectionFromMarkers();this.setStates(t,"modelChange",2,Xx.fromModelSelections(i))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const t=this._cursors.getPrimaryCursor(),i=t.viewState.selectionStart.getStartPosition(),e=t.viewState.position;return{isReal:!1,fromViewLineNumber:i.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i),toViewLineNumber:e.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,e)}}getSelections(){return this._cursors.getSelections()}setSelections(t,i,e,s){this.setStates(t,i,s,Xx.fromModelSelections(e))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(t){this._prevEditOperationType=t}_pushAutoClosedAction(t,i){const e=[],s=[];for(let n=0,o=t.length;n<o;n++)e.push({range:t[n],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:i[n],options:{description:"auto-closed-enclosing",stickiness:1}});const n=this._model.deltaDecorations([],e),o=this._model.deltaDecorations([],s);this._autoClosedActions.push(new MI(this._model,n,o))}_executeEditOperation(t){if(!t)return;t.shouldPushStackElementBefore&&this._model.pushStackElement();const i=SI.executeCommands(this._model,this._cursors.getSelections(),t.commands);if(i){this._interpretCommandResult(i);const e=[],s=[];for(let i=0;i<t.commands.length;i++){const n=t.commands[i];n instanceof FC&&n.enclosingRange&&n.closeCharacterRange&&(e.push(n.closeCharacterRange),s.push(n.enclosingRange))}e.length>0&&this._pushAutoClosedAction(e,s),this._prevEditOperationType=t.type}t.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(t){t&&t.length!==0||(t=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(t),this._cursors.normalize()}_emitStateChangedIfNecessary(t,i,e,s,n){const o=DI.from(this._model,this);if(o.equals(s))return!1;const r=this._cursors.getSelections(),h=this._cursors.getViewSelections();if(t.emitViewEvent(new $F(h,r,e)),!s||s.cursorState.length!==o.cursorState.length||o.cursorState.some(((t,i)=>!t.modelState.equals(s.cursorState[i].modelState)))){const h=s?s.cursorState.map((t=>t.modelState.selection)):null,c=s?s.modelVersionId:0;t.emitOutgoingEvent(new mI(h,r,c,o.modelVersionId,i||"keyboard",e,n))}return!0}_findAutoClosingPairs(t){if(!t.length)return null;const i=[];for(let e=0,s=t.length;e<s;e++){const s=t[e];if(!s.text||s.text.indexOf(`\n`)>=0)return null;const n=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!n)return null;const o=n[1],r=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(o);if(!r||r.length!==1)return null;const h=r[0].open,c=s.text.length-n[2].length-1,a=s.text.lastIndexOf(h,c-1);if(a===-1)return null;i.push([a,c])}return i}executeEdits(t,i,e,s){let n=null;i==="snippet"&&(n=this._findAutoClosingPairs(e)),n&&(e[0]._isTracked=!0);const o=[],r=[],h=this._model.pushEditOperations(this.getSelections(),e,(t=>{if(n)for(let i=0,e=n.length;i<e;i++){const[e,s]=n[i],h=t[i],c=h.range.startLineNumber,a=h.range.startColumn-1+e,l=h.range.startColumn-1+s;o.push(new Es(c,l+1,c,l+2)),r.push(new Es(c,a+1,c,l+2))}const i=s(t);return i&&(this._isHandling=!0),i}));h&&(this._isHandling=!1,this.setSelections(t,i,h,0)),o.length>0&&this._pushAutoClosedAction(o,r)}_executeEdit(t,i,e,s=0){if(this.context.cursorConfig.readOnly)return;const n=DI.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),t()}catch(t){Oi(t)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(i,e,s,n,!1)&&this.revealAll(i,e,!1,0,!0,0)}getAutoClosedCharacters(){return MI.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(t){this._compositionState=new II(this._model,this.getSelections())}endComposition(t,i){const e=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit((()=>{i==="keyboard"&&this._executeEditOperation(SC.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,e,this.getSelections(),this.getAutoClosedCharacters()))}),t,i)}type(t,i,e){this._executeEdit((()=>{if(e==="keyboard"){const t=i.length;let e=0;for(;e<t;){const t=Co(i,e),s=i.substr(e,t);this._executeEditOperation(SC.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),s)),e+=t}}else this._executeEditOperation(SC.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),i))}),t,e)}compositionType(t,i,e,s,n,o){if(i.length!==0||e!==0||s!==0)this._executeEdit((()=>{this._executeEditOperation(SC.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),i,e,s,n))}),t,o);else if(n!==0){const i=this.getSelections().map((t=>{const i=t.getPosition();return new Bs(i.lineNumber,i.column+n,i.lineNumber,i.column+n)}));this.setSelections(t,o,i,0)}}paste(t,i,e,s,n){this._executeEdit((()=>{this._executeEditOperation(SC.paste(this.context.cursorConfig,this._model,this.getSelections(),i,e,s||[]))}),t,n,4)}cut(t,i){this._executeEdit((()=>{this._executeEditOperation(uC.cut(this.context.cursorConfig,this._model,this.getSelections()))}),t,i)}executeCommand(t,i,e){this._executeEdit((()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new iC(0,[i],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),t,e)}executeCommands(t,i,e){this._executeEdit((()=>{this._executeEditOperation(new iC(0,i,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),t,e)}}class DI{static from(t,i){return new DI(t.getVersionId(),i.getCursorStates())}constructor(t,i){this.modelVersionId=t,this.cursorState=i}equals(t){if(!t||this.modelVersionId!==t.modelVersionId||this.cursorState.length!==t.cursorState.length)return!1;for(let i=0,e=this.cursorState.length;i<e;i++)if(!this.cursorState[i].equals(t.cursorState[i]))return!1;return!0}}class MI{static getAllAutoClosedCharacters(t){let i=[];for(const e of t)i=i.concat(e.getAutoClosedCharactersRanges());return i}constructor(t,i,e){this._model=t,this._autoClosedCharactersDecorations=i,this._autoClosedEnclosingDecorations=e}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const t=[];for(let i=0;i<this._autoClosedCharactersDecorations.length;i++){const e=this._model.getDecorationRange(this._autoClosedCharactersDecorations[i]);e&&t.push(e)}return t}isValid(t){const i=[];for(let t=0;t<this._autoClosedEnclosingDecorations.length;t++){const e=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[t]);if(e&&(i.push(e),e.startLineNumber!==e.endLineNumber))return!1}i.sort(Es.compareRangesUsingStarts),t.sort(Es.compareRangesUsingStarts);for(let e=0;e<t.length;e++)if(e>=i.length||!i[e].strictContainsRange(t[e]))return!1;return!0}}class SI{static executeCommands(t,i,e){const s={model:t,selectionsBefore:i,trackedRanges:[],trackedRangesDirection:[]},n=this._innerExecuteCommands(s,e);for(let t=0,i=s.trackedRanges.length;t<i;t++)s.model._setTrackedRange(s.trackedRanges[t],null,0);return n}static _innerExecuteCommands(t,i){if(this._arrayIsEmpty(i))return null;const e=this._getEditOperations(t,i);if(e.operations.length===0)return null;const s=e.operations,n=this._getLoserCursorMap(s);if(n.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const o=[];for(let t=0,i=s.length;t<i;t++)n.hasOwnProperty(s[t].identifier.major.toString())||o.push(s[t]);e.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let r=t.model.pushEditOperations(t.selectionsBefore,o,(e=>{const s=[];for(let i=0;i<t.selectionsBefore.length;i++)s[i]=[];for(const t of e)t.identifier&&s[t.identifier.major].push(t);const n=(t,i)=>t.identifier.minor-i.identifier.minor,o=[];for(let e=0;e<t.selectionsBefore.length;e++)s[e].length>0?(s[e].sort(n),o[e]=i[e].computeCursorState(t.model,{getInverseEditOperations:()=>s[e],getTrackedSelection:i=>{const e=parseInt(i,10),s=t.model._getTrackedRange(t.trackedRanges[e]);return t.trackedRangesDirection[e]===0?new Bs(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn):new Bs(s.endLineNumber,s.endColumn,s.startLineNumber,s.startColumn)}})):o[e]=t.selectionsBefore[e];return o}));r||(r=t.selectionsBefore);const h=[];for(const t in n)n.hasOwnProperty(t)&&h.push(parseInt(t,10));h.sort(((t,i)=>i-t));for(const t of h)r.splice(t,1);return r}static _arrayIsEmpty(t){for(let i=0,e=t.length;i<e;i++)if(t[i])return!1;return!0}static _getEditOperations(t,i){let e=[],s=!1;for(let n=0,o=i.length;n<o;n++){const o=i[n];if(o){const i=this._getEditOperationsFromCommand(t,n,o);e=e.concat(i.operations),s=s||i.hadTrackedEditOperation}}return{operations:e,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(t,i,e){const s=[];let n=0;const o=(t,o,r=!1)=>{Es.isEmpty(t)&&o===""||s.push({identifier:{major:i,minor:n++},range:t,text:o,forceMoveMarkers:r,isAutoWhitespaceEdit:e.insertsAutoWhitespace})};let r=!1;const h={addEditOperation:o,addTrackedEditOperation:(t,i,e)=>{r=!0,o(t,i,e)},trackSelection:(i,e)=>{const s=Bs.liftSelection(i);let n;if(s.isEmpty())if(typeof e=="boolean")n=e?2:3;else{const i=t.model.getLineMaxColumn(s.startLineNumber);n=s.startColumn===i?2:3}else n=1;const o=t.trackedRanges.length,r=t.model._setTrackedRange(null,s,n);return t.trackedRanges[o]=r,t.trackedRangesDirection[o]=s.getDirection(),o.toString()}};try{e.getEditOperations(t.model,h)}catch(t){return Oi(t),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:r}}static _getLoserCursorMap(t){(t=t.slice(0)).sort(((t,i)=>-Es.compareRangesUsingEnds(t.range,i.range)));const i={};for(let e=1;e<t.length;e++){const s=t[e-1],n=t[e];if(Es.getStartPosition(s.range).isBefore(Es.getEndPosition(n.range))){let o;o=s.identifier.major>n.identifier.major?s.identifier.major:n.identifier.major,i[o.toString()]=!0;for(let i=0;i<t.length;i++)t[i].identifier.major===o&&(t.splice(i,1),i<e&&e--,i--);e>0&&e--}}return i}}class FI{constructor(t,i,e){this.text=t,this.startSelection=i,this.endSelection=e}}class II{static _capture(t,i){const e=[];for(const s of i){if(s.startLineNumber!==s.endLineNumber)return null;e.push(new FI(t.getLineContent(s.startLineNumber),s.startColumn-1,s.endColumn-1))}return e}constructor(t,i){this._original=II._capture(t,i)}deduceOutcome(t,i){if(!this._original)return null;const e=II._capture(t,i);if(!e||this._original.length!==e.length)return null;const s=[];for(let t=0,i=this._original.length;t<i;t++)s.push(II._deduceOutcome(this._original[t],e[t]));return s}static _deduceOutcome(t,i){const e=Math.min(t.startSelection,i.startSelection,po(t.text,i.text)),s=Math.min(t.text.length-t.endSelection,i.text.length-i.endSelection,wo(t.text,i.text)),n=t.text.substring(e,t.text.length-s),o=i.text.substring(e,i.text.length-s);return new IC(n,t.startSelection-e,t.endSelection-e,o,i.startSelection-e,i.endSelection-e)}}const LI={getInitialState:()=>ep,tokenizeEncoded:(t,i,e)=>np(0,e)};function RI(t,i,e,s,n,o,r){let h="<div>",c=s,a=0,l=!0;for(let u=0,d=i.getCount();u<d;u++){const d=i.getEndOffset(u);if(d<=s)continue;let f="";for(;c<d&&c<n;c++){const i=t.charCodeAt(c);switch(i){case 9:{let t=o-(c+a)%o;for(a+=t-1;t>0;)r&&l?(f+="&#160;",l=!1):(f+=" ",l=!0),t--;break}case 60:f+="&lt;",l=!1;break;case 62:f+="&gt;",l=!1;break;case 38:f+="&amp;",l=!1;break;case 0:f+="&#00;",l=!1;break;case 65279:case 8232:case 8233:case 133:f+="�",l=!1;break;case 13:f+="&#8203",l=!1;break;case 32:r&&l?(f+="&#160;",l=!1):(f+=" ",l=!0);break;default:f+=String.fromCharCode(i),l=!1}}if(h+=`<span style="${i.getInlineStyle(u,e)}">${f}</span>`,d>n||c>=n)break}return h+="</div>",h}function TI(t,i,e){let s='<div class="monaco-tokenized-source">';const n=eo(t);let o=e.getInitialState();for(let t=0,r=n.length;t<r;t++){const r=n[t];t>0&&(s+="<br/>");const h=e.tokenizeEncoded(r,!0,o);rp.convertToEndOffset(h.tokens,r.length);const c=new rp(h.tokens,r,i).inflate();let a=0;for(let t=0,i=c.getCount();t<i;t++){const i=c.getClassName(t),e=c.getEndOffset(t);s+=`<span class="${i}">${$n(r.substring(a,e))}</span>`,a=e}o=h.endState}return s+="</div>",s}class NI{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(t){this._hasPending=!0,this._inserts.push(t)}change(t){this._hasPending=!0,this._changes.push(t)}remove(t){this._hasPending=!0,this._removes.push(t)}mustCommit(){return this._hasPending}commit(t){if(!this._hasPending)return;const i=this._inserts,e=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],t._commitPendingChanges(i,e,s)}}class QI{constructor(t,i,e,s,n){this.id=t,this.afterLineNumber=i,this.ordinal=e,this.height=s,this.minWidth=n,this.prefixSum=0}}let OI=class t{constructor(i,e,s,n){this._instanceId=Qo(++t.INSTANCE_COUNT),this._pendingChanges=new NI,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=i,this._lineHeight=e,this._paddingTop=s,this._paddingBottom=n}static findInsertionIndex(t,i,e){let s=0,n=t.length;for(;s<n;){const o=s+n>>>1;i===t[o].afterLineNumber?e<t[o].ordinal?n=o:s=o+1:i<t[o].afterLineNumber?n=o:s=o+1}return s}setLineHeight(t){this._checkPendingChanges(),this._lineHeight=t}setPadding(t,i){this._paddingTop=t,this._paddingBottom=i}onFlushed(t){this._checkPendingChanges(),this._lineCount=t}changeWhitespace(t){let i=!1;try{t({insertWhitespace:(t,e,s,n)=>{i=!0,t|=0,e|=0,s|=0,n|=0;const o=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new QI(o,t,e,s,n)),o},changeOneWhitespace:(t,e,s)=>{i=!0,e|=0,s|=0,this._pendingChanges.change({id:t,newAfterLineNumber:e,newHeight:s})},removeWhitespace:t=>{i=!0,this._pendingChanges.remove({id:t})}})}finally{this._pendingChanges.commit(this)}return i}_commitPendingChanges(t,i,e){if((t.length>0||e.length>0)&&(this._minWidth=-1),t.length+i.length+e.length<=1){for(const i of t)this._insertWhitespace(i);for(const t of i)this._changeOneWhitespace(t.id,t.newAfterLineNumber,t.newHeight);for(const t of e){const i=this._findWhitespaceIndex(t.id);i!==-1&&this._removeWhitespace(i)}return}const s=new Set;for(const t of e)s.add(t.id);const n=new Map;for(const t of i)n.set(t.id,t);const o=t=>{const i=[];for(const e of t)if(!s.has(e.id)){if(n.has(e.id)){const t=n.get(e.id);e.afterLineNumber=t.newAfterLineNumber,e.height=t.newHeight}i.push(e)}return i},r=o(this._arr).concat(o(t));r.sort(((t,i)=>t.afterLineNumber===i.afterLineNumber?t.ordinal-i.ordinal:t.afterLineNumber-i.afterLineNumber)),this._arr=r,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(i){const e=t.findInsertionIndex(this._arr,i.afterLineNumber,i.ordinal);this._arr.splice(e,0,i),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}_findWhitespaceIndex(t){const i=this._arr;for(let e=0,s=i.length;e<s;e++)if(i[e].id===t)return e;return-1}_changeOneWhitespace(t,i,e){const s=this._findWhitespaceIndex(t);if(s!==-1&&(this._arr[s].height!==e&&(this._arr[s].height=e,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==i)){const t=this._arr[s];this._removeWhitespace(s),t.afterLineNumber=i,this._insertWhitespace(t)}}_removeWhitespace(t){this._arr.splice(t,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}onLinesDeleted(t,i){this._checkPendingChanges(),t|=0,i|=0,this._lineCount-=i-t+1;for(let e=0,s=this._arr.length;e<s;e++){const s=this._arr[e].afterLineNumber;t<=s&&s<=i?this._arr[e].afterLineNumber=t-1:s>i&&(this._arr[e].afterLineNumber-=i-t+1)}}onLinesInserted(t,i){this._checkPendingChanges(),t|=0,i|=0,this._lineCount+=i-t+1;for(let e=0,s=this._arr.length;e<s;e++)t<=this._arr[e].afterLineNumber&&(this._arr[e].afterLineNumber+=i-t+1)}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(t){this._checkPendingChanges(),t|=0;let i=Math.max(0,this._prefixSumValidIndex+1);i===0&&(this._arr[0].prefixSum=this._arr[0].height,i++);for(let e=i;e<=t;e++)this._arr[e].prefixSum=this._arr[e-1].prefixSum+this._arr[e].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,t),this._arr[t].prefixSum}getLinesTotalHeight(){return this._checkPendingChanges(),this._lineHeight*this._lineCount+this.getWhitespacesTotalHeight()+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(t){this._checkPendingChanges(),t|=0;const i=this._findLastWhitespaceBeforeLineNumber(t);return i===-1?0:this.getWhitespacesAccumulatedHeight(i)}_findLastWhitespaceBeforeLineNumber(t){t|=0;const i=this._arr;let e=0,s=i.length-1;for(;e<=s;){const n=e+((s-e|0)/2|0)|0;if(i[n].afterLineNumber<t){if(n+1>=i.length||i[n+1].afterLineNumber>=t)return n;e=n+1|0}else s=n-1|0}return-1}_findFirstWhitespaceAfterLineNumber(t){t|=0;const i=this._findLastWhitespaceBeforeLineNumber(t)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(t){return this._checkPendingChanges(),t|=0,this._findFirstWhitespaceAfterLineNumber(t)}getVerticalOffsetForLineNumber(t,i=!1){let e;return this._checkPendingChanges(),e=(t|=0)>1?this._lineHeight*(t-1):0,e+this.getWhitespaceAccumulatedHeightBeforeLineNumber(t-(i?1:0))+this._paddingTop}getVerticalOffsetAfterLineNumber(t,i=!1){return this._checkPendingChanges(),t|=0,this._lineHeight*t+this.getWhitespaceAccumulatedHeightBeforeLineNumber(t+(i?1:0))+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let t=0;for(let i=0,e=this._arr.length;i<e;i++)t=Math.max(t,this._arr[i].minWidth);this._minWidth=t}return this._minWidth}isAfterLines(t){return this._checkPendingChanges(),t>this.getLinesTotalHeight()}isInTopPadding(t){return this._paddingTop!==0&&(this._checkPendingChanges(),t<this._paddingTop)}isInBottomPadding(t){return this._paddingBottom===0?!1:(this._checkPendingChanges(),t>=this.getLinesTotalHeight()-this._paddingBottom)}getLineNumberAtOrAfterVerticalOffset(t){if(this._checkPendingChanges(),(t|=0)<0)return 1;const i=0|this._lineCount,e=this._lineHeight;let s=1,n=i;for(;s<n;){const i=(s+n)/2|0,o=0|this.getVerticalOffsetForLineNumber(i);if(t>=o+e)s=i+1;else{if(t>=o)return i;n=i}}return s>i?i:s}getLinesViewportData(t,i){this._checkPendingChanges(),t|=0,i|=0;const e=this._lineHeight,s=0|this.getLineNumberAtOrAfterVerticalOffset(t),n=0|this.getVerticalOffsetForLineNumber(s);let o=0|this._lineCount,r=0|this.getFirstWhitespaceIndexAfterLineNumber(s);const h=0|this.getWhitespacesCount();let c,a;r===-1?(r=h,a=o+1,c=0):(a=0|this.getAfterLineNumberForWhitespaceIndex(r),c=0|this.getHeightForWhitespaceIndex(r));let l=n,u=l;const d=5e5;let f=0;n>=d&&(f=Math.floor(n/d)*d,f=Math.floor(f/e)*e,u-=f);const g=[],A=t+(i-t)/2;let p=-1;for(let t=s;t<=o;t++){for(p===-1&&(l<=A&&A<l+e||l>A)&&(p=t),l+=e,g[t-s]=u,u+=e;a===t;)u+=c,l+=c,r++,r>=h?a=o+1:(a=0|this.getAfterLineNumberForWhitespaceIndex(r),c=0|this.getHeightForWhitespaceIndex(r));if(l>=i){o=t;break}}p===-1&&(p=o);const w=0|this.getVerticalOffsetForLineNumber(o);let m=s,v=o;return m<v&&n<t&&m++,m<v&&w+e>i&&v--,{bigNumbersDelta:f,startLineNumber:s,endLineNumber:o,relativeVerticalOffset:g,centeredLineNumber:p,completelyVisibleStartLineNumber:m,completelyVisibleEndLineNumber:v,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(t){this._checkPendingChanges(),t|=0;const i=this.getAfterLineNumberForWhitespaceIndex(t);let e,s;return e=i>=1?this._lineHeight*i:0,s=t>0?this.getWhitespacesAccumulatedHeight(t-1):0,e+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(t){this._checkPendingChanges(),t|=0;let i=0,e=this.getWhitespacesCount()-1;if(e<0||t>=this.getVerticalOffsetForWhitespaceIndex(e)+this.getHeightForWhitespaceIndex(e))return-1;for(;i<e;){const s=Math.floor((i+e)/2),n=this.getVerticalOffsetForWhitespaceIndex(s);if(t>=n+this.getHeightForWhitespaceIndex(s))i=s+1;else{if(t>=n)return s;e=s}}return i}getWhitespaceAtVerticalOffset(t){this._checkPendingChanges(),t|=0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(t);if(i<0||i>=this.getWhitespacesCount())return null;const e=this.getVerticalOffsetForWhitespaceIndex(i);if(e>t)return null;const s=this.getHeightForWhitespaceIndex(i);return{id:this.getIdForWhitespaceIndex(i),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(i),verticalOffset:e,height:s}}getWhitespaceViewportData(t,i){this._checkPendingChanges(),t|=0,i|=0;const e=this.getWhitespaceIndexAtOrAfterVerticallOffset(t),s=this.getWhitespacesCount()-1;if(e<0)return[];const n=[];for(let t=e;t<=s;t++){const e=this.getVerticalOffsetForWhitespaceIndex(t),s=this.getHeightForWhitespaceIndex(t);if(e>=i)break;n.push({id:this.getIdForWhitespaceIndex(t),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(t),verticalOffset:e,height:s})}return n}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(t){return this._checkPendingChanges(),t|=0,this._arr[t].id}getAfterLineNumberForWhitespaceIndex(t){return this._checkPendingChanges(),t|=0,this._arr[t].afterLineNumber}getHeightForWhitespaceIndex(t){return this._checkPendingChanges(),t|=0,this._arr[t].height}};OI.INSTANCE_COUNT=0;class zI{constructor(t,i,e,s){(t|=0)<0&&(t=0),(i|=0)<0&&(i=0),(e|=0)<0&&(e=0),(s|=0)<0&&(s=0),this.width=t,this.contentWidth=i,this.scrollWidth=Math.max(t,i),this.height=e,this.contentHeight=s,this.scrollHeight=Math.max(e,s)}equals(t){return this.width===t.width&&this.contentWidth===t.contentWidth&&this.height===t.height&&this.contentHeight===t.contentHeight}}class UI extends te{constructor(t,i){super(),this._onDidContentSizeChange=this._register(new de),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new zI(0,0,0,0),this._scrollable=this._register(new Zy({forceIntegerValues:!0,smoothScrollDuration:t,scheduleAtNextAnimationFrame:i})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(t){this._scrollable.setSmoothScrollDuration(t)}validateScrollPosition(t){return this._scrollable.validateScrollPosition(t)}getScrollDimensions(){return this._dimensions}setScrollDimensions(t){if(this._dimensions.equals(t))return;const i=this._dimensions;this._dimensions=t,this._scrollable.setScrollDimensions({width:t.width,scrollWidth:t.scrollWidth,height:t.height,scrollHeight:t.scrollHeight},!0);const e=i.contentWidth!==t.contentWidth,s=i.contentHeight!==t.contentHeight;(e||s)&&this._onDidContentSizeChange.fire(new fI(i.contentWidth,i.contentHeight,t.contentWidth,t.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(t){this._scrollable.setScrollPositionNow(t)}setScrollPositionSmooth(t){this._scrollable.setScrollPositionSmooth(t)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class HI extends te{constructor(t,i,e){super(),this._configuration=t;const s=this._configuration.options,n=s.get(145),o=s.get(84);this._linesLayout=new OI(i,s.get(67),o.top,o.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new UI(0,e)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new zI(n.contentWidth,0,n.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(114)?125:0)}onConfigurationChanged(t){const i=this._configuration.options;if(t.hasChanged(67)&&this._linesLayout.setLineHeight(i.get(67)),t.hasChanged(84)){const t=i.get(84);this._linesLayout.setPadding(t.top,t.bottom)}if(t.hasChanged(145)){const t=i.get(145),e=t.contentWidth,s=t.height,n=this._scrollable.getScrollDimensions(),o=n.contentWidth;this._scrollable.setScrollDimensions(new zI(e,n.contentWidth,s,this._getContentHeight(e,s,o)))}else this._updateHeight();t.hasChanged(114)&&this._configureSmoothScrollDuration()}onFlushed(t){this._linesLayout.onFlushed(t)}onLinesDeleted(t,i){this._linesLayout.onLinesDeleted(t,i)}onLinesInserted(t,i){this._linesLayout.onLinesInserted(t,i)}_getHorizontalScrollbarHeight(t,i){const e=this._configuration.options.get(103);return e.horizontal===2||t>=i?0:e.horizontalScrollbarSize}_getContentHeight(t,i,e){const s=this._configuration.options;let n=this._linesLayout.getLinesTotalHeight();return s.get(105)?n+=Math.max(0,i-s.get(67)-s.get(84).bottom):s.get(103).ignoreHorizontalScrollbarInContentHeight||(n+=this._getHorizontalScrollbarHeight(t,e)),n}_updateHeight(){const t=this._scrollable.getScrollDimensions(),i=t.width,e=t.height,s=t.contentWidth;this._scrollable.setScrollDimensions(new zI(i,t.contentWidth,e,this._getContentHeight(i,e,s)))}getCurrentViewport(){const t=this._scrollable.getScrollDimensions(),i=this._scrollable.getCurrentScrollPosition();return new Cp(i.scrollTop,i.scrollLeft,t.width,t.height)}getFutureViewport(){const t=this._scrollable.getScrollDimensions(),i=this._scrollable.getFutureScrollPosition();return new Cp(i.scrollTop,i.scrollLeft,t.width,t.height)}_computeContentWidth(){const t=this._configuration.options,i=this._maxLineWidth,e=t.get(146),s=t.get(50),n=t.get(145);if(e.isViewportWrapping){const e=t.get(73);return i>n.contentWidth+s.typicalHalfwidthCharacterWidth&&e.enabled&&e.side==="right"?i+n.verticalScrollbarWidth:i}{const e=t.get(104)*s.typicalHalfwidthCharacterWidth,o=this._linesLayout.getWhitespaceMinWidth();return Math.max(i+e+n.verticalScrollbarWidth,o,this._overlayWidgetsMinWidth)}}setMaxLineWidth(t){this._maxLineWidth=t,this._updateContentWidth()}setOverlayWidgetsMinWidth(t){this._overlayWidgetsMinWidth=t,this._updateContentWidth()}_updateContentWidth(){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new zI(t.width,this._computeContentWidth(),t.height,t.contentHeight)),this._updateHeight()}saveState(){const t=this._scrollable.getFutureScrollPosition(),i=t.scrollTop,e=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(i);return{scrollTop:i,scrollTopWithoutViewZones:i-this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(e),scrollLeft:t.scrollLeft}}changeWhitespace(t){const i=this._linesLayout.changeWhitespace(t);return i&&this.onHeightMaybeChanged(),i}getVerticalOffsetForLineNumber(t,i=!1){return this._linesLayout.getVerticalOffsetForLineNumber(t,i)}getVerticalOffsetAfterLineNumber(t,i=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(t,i)}isAfterLines(t){return this._linesLayout.isAfterLines(t)}isInTopPadding(t){return this._linesLayout.isInTopPadding(t)}isInBottomPadding(t){return this._linesLayout.isInBottomPadding(t)}getLineNumberAtVerticalOffset(t){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t)}getWhitespaceAtVerticalOffset(t){return this._linesLayout.getWhitespaceAtVerticalOffset(t)}getLinesViewportData(){const t=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(t.top,t.top+t.height)}getLinesViewportDataAtScrollTop(t){const i=this._scrollable.getScrollDimensions();return t+i.height>i.scrollHeight&&(t=i.scrollHeight-i.height),t<0&&(t=0),this._linesLayout.getLinesViewportData(t,t+i.height)}getWhitespaceViewportData(){const t=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(t.top,t.top+t.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(t){return this._scrollable.validateScrollPosition(t)}setScrollPosition(t,i){i===1?this._scrollable.setScrollPositionNow(t):this._scrollable.setScrollPositionSmooth(t)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(t,i){const e=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:e.scrollLeft+t,scrollTop:e.scrollTop+i})}}class PI{constructor(t,i,e,s,n){this.editorId=t,this.model=i,this.configuration=e,this._linesCollection=s,this._coordinatesConverter=n,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(t){const i=t.id;let e=this._decorationsCache[i];if(!e){const s=t.range,n=t.options;let o;if(n.isWholeLine){const t=this._coordinatesConverter.convertModelPositionToViewPosition(new Cs(s.startLineNumber,1),0,!1,!0),i=this._coordinatesConverter.convertModelPositionToViewPosition(new Cs(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);o=new Es(t.lineNumber,t.column,i.lineNumber,i.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(s,1);e=new Fp(o,n),this._decorationsCache[i]=e}return e}getMinimapDecorationsInRange(t){return this._getDecorationsInRange(t,!0,!1).decorations}getDecorationsViewportData(t){let i=this._cachedModelDecorationsResolver!==null;return i=i&&t.equalsRange(this._cachedModelDecorationsResolverViewRange),i||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(t,!1,!1),this._cachedModelDecorationsResolverViewRange=t),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(t,i=!1,e=!1){const s=new Es(t,this._linesCollection.getViewLineMinColumn(t),t,this._linesCollection.getViewLineMaxColumn(t));return this._getDecorationsInRange(s,i,e).inlineDecorations[0]}_getDecorationsInRange(t,i,e){const s=this._linesCollection.getDecorationsInRange(t,this.editorId,yi(this.configuration.options),i,e),n=t.startLineNumber,o=t.endLineNumber,r=[];let h=0;const c=[];for(let t=n;t<=o;t++)c[t-n]=[];for(let t=0,i=s.length;t<i;t++){const i=s[t],e=i.options;if(!jI(this.model,i))continue;const a=this._getOrCreateViewModelDecoration(i),l=a.range;if(r[h++]=a,e.inlineClassName){const t=new Mp(l,e.inlineClassName,e.inlineClassNameAffectsLetterSpacing?3:0),i=Math.max(n,l.startLineNumber),s=Math.min(o,l.endLineNumber);for(let e=i;e<=s;e++)c[e-n].push(t)}if(e.beforeContentClassName&&n<=l.startLineNumber&&l.startLineNumber<=o){const t=new Mp(new Es(l.startLineNumber,l.startColumn,l.startLineNumber,l.startColumn),e.beforeContentClassName,1);c[l.startLineNumber-n].push(t)}if(e.afterContentClassName&&n<=l.endLineNumber&&l.endLineNumber<=o){const t=new Mp(new Es(l.endLineNumber,l.endColumn,l.endLineNumber,l.endColumn),e.afterContentClassName,2);c[l.endLineNumber-n].push(t)}}return{decorations:r,inlineDecorations:c}}}function jI(t,i){return(!i.options.hideInCommentTokens||!WI(t,i))&&(!i.options.hideInStringTokens||!YI(t,i))}function WI(t,i){return _I(t,i.range,(t=>t===1))}function YI(t,i){return _I(t,i.range,(t=>t===2))}function _I(t,i,e){for(let s=i.startLineNumber;s<=i.endLineNumber;s++){const n=t.tokenization.getLineTokens(s),o=s===i.startLineNumber,r=s===i.endLineNumber;let h=o?n.findTokenIndexAtOffset(i.startColumn-1):0;for(;h<n.getCount()&&!(r&&n.getStartOffset(h)>i.endColumn-1);){if(!e(n.getStandardTokenType(h)))return!1;h++}}return!0}function VI(t,i){return t===null?i?GI.INSTANCE:KI.INSTANCE:new JI(t,i)}class JI{constructor(t,i){this._projectionData=t,this._isVisible=i}isVisible(){return this._isVisible}setVisible(t){return this._isVisible=t,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(t,i,e){this._assertVisible();const s=e>0?this._projectionData.breakOffsets[e-1]:0,n=this._projectionData.breakOffsets[e];let o;if(this._projectionData.injectionOffsets!==null){const e=this._projectionData.injectionOffsets.map(((t,i)=>new UB(0,0,t+1,this._projectionData.injectionOptions[i],0)));o=UB.applyInjectedText(t.getLineContent(i),e).substring(s,n)}else o=t.getValueInRange({startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:n+1});return e>0&&(o=XI(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(t,i,e){return this._assertVisible(),this._projectionData.getLineLength(e)}getViewLineMinColumn(t,i,e){return this._assertVisible(),this._projectionData.getMinOutputOffset(e)+1}getViewLineMaxColumn(t,i,e){return this._assertVisible(),this._projectionData.getMaxOutputOffset(e)+1}getViewLineData(t,i,e){const s=new Array;return this.getViewLinesData(t,i,e,1,0,[!0],s),s[0]}getViewLinesData(t,i,e,s,n,o,r){this._assertVisible();const h=this._projectionData,c=h.injectionOffsets,a=h.injectionOptions;let l,u=null;if(c){u=[];let t=0,i=0;for(let e=0;e<h.getOutputLineCount();e++){const s=new Array;u[e]=s;const n=e>0?h.breakOffsets[e-1]:0,o=h.breakOffsets[e];for(;i<c.length;){const r=a[i].content.length,l=c[i]+t,u=l+r;if(l>o)break;if(n<u){const t=a[i];if(t.inlineClassName){const i=e>0?h.wrappedTextIndentLength:0,r=i+Math.max(l-n,0),c=i+Math.min(u-n,o-n);r!==c&&s.push(new Sp(r,c,t.inlineClassName,t.inlineClassNameAffectsLetterSpacing))}}if(!(u<=o))break;t+=r,i++}}}l=c?t.tokenization.getLineTokens(i).withInserted(c.map(((t,i)=>({offset:t,text:a[i].content,tokenMetadata:rp.defaultTokenMetadata})))):t.tokenization.getLineTokens(i);for(let t=e;t<e+s;t++){const i=n+t-e;o[i]?r[i]=this._getViewLineData(l,u?u[t]:null,t):r[i]=null}}_getViewLineData(t,i,e){this._assertVisible();const s=this._projectionData,n=e>0?s.wrappedTextIndentLength:0,o=e>0?s.breakOffsets[e-1]:0,r=s.breakOffsets[e],h=t.sliceAndInflate(o,r,n);let c=h.getLineContent();e>0&&(c=XI(s.wrappedTextIndentLength)+c);const a=this._projectionData.getMinOutputOffset(e)+1,l=c.length+1,u=e+1<this.getViewLineCount(),d=e===0?0:s.breakOffsetsVisibleColumn[e-1];return new Bp(c,u,a,l,d,h,i)}getModelColumnOfViewPosition(t,i){return this._assertVisible(),this._projectionData.translateToInputOffset(t,i-1)+1}getViewPositionOfModelPosition(t,i,e=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(i-1,e).toPosition(t)}getViewLineNumberOfModelPosition(t,i){return this._assertVisible(),t+this._projectionData.translateToOutputPosition(i-1).outputLineIndex}normalizePosition(t,i,e){const s=i.lineNumber-t;return this._projectionData.normalizeOutputPosition(t,i.column-1,e).toPosition(s)}getInjectedTextAt(t,i){return this._projectionData.getInjectedText(t,i-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class GI{constructor(){}isVisible(){return!0}setVisible(t){return t?this:KI.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(t,i,e){return t.getLineContent(i)}getViewLineLength(t,i,e){return t.getLineLength(i)}getViewLineMinColumn(t,i,e){return t.getLineMinColumn(i)}getViewLineMaxColumn(t,i,e){return t.getLineMaxColumn(i)}getViewLineData(t,i,e){const s=t.tokenization.getLineTokens(i),n=s.getLineContent();return new Bp(n,!1,1,n.length+1,0,s.inflate(),null)}getViewLinesData(t,i,e,s,n,o,r){o[n]?r[n]=this.getViewLineData(t,i,0):r[n]=null}getModelColumnOfViewPosition(t,i){return i}getViewPositionOfModelPosition(t,i){return new Cs(t,i)}getViewLineNumberOfModelPosition(t,i){return t}normalizePosition(t,i,e){return i}getInjectedTextAt(t,i){return null}}GI.INSTANCE=new GI;class KI{constructor(){}isVisible(){return!1}setVisible(t){return t?GI.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(t,i,e){throw new Error("Not supported")}getViewLineLength(t,i,e){throw new Error("Not supported")}getViewLineMinColumn(t,i,e){throw new Error("Not supported")}getViewLineMaxColumn(t,i,e){throw new Error("Not supported")}getViewLineData(t,i,e){throw new Error("Not supported")}getViewLinesData(t,i,e,s,n,o,r){throw new Error("Not supported")}getModelColumnOfViewPosition(t,i){throw new Error("Not supported")}getViewPositionOfModelPosition(t,i){throw new Error("Not supported")}getViewLineNumberOfModelPosition(t,i){throw new Error("Not supported")}normalizePosition(t,i,e){throw new Error("Not supported")}getInjectedTextAt(t,i){throw new Error("Not supported")}}KI.INSTANCE=new KI;const $I=[""];function XI(t){if(t>=$I.length)for(let i=1;i<=t;i++)$I[i]=qI(i);return $I[t]}function qI(t){return new Array(t+1).join(" ")}class ZI{constructor(t,i,e,s,n,o,r,h,c,a){this._editorId=t,this.model=i,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=e,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=n,this.tabSize=o,this.wrappingStrategy=r,this.wrappingColumn=h,this.wrappingIndent=c,this.wordBreak=a,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new eL(this)}_constructLines(t,i){this.modelLineProjections=[],t&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const e=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),n=e.length,o=this.createLineBreaksComputer(),r=new L(UB.fromDecorations(s));for(let t=0;t<n;t++){const s=r.takeWhile((i=>i.lineNumber===t+1));o.addRequest(e[t],s,i?i[t]:null)}const h=o.finalize(),c=[],a=this.hiddenAreasDecorationIds.map((t=>this.model.getDecorationRange(t))).sort(Es.compareRangesUsingStarts);let l=1,u=0,d=-1,f=d+1<a.length?u+1:n+2;for(let t=0;t<n;t++){const i=t+1;i===f&&(d++,l=a[d].startLineNumber,u=a[d].endLineNumber,f=d+1<a.length?u+1:n+2);const e=i>=l&&i<=u,s=VI(h[t],!e);c[t]=s.getViewLineCount(),this.modelLineProjections[t]=s}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new Rf(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map((t=>this.model.getDecorationRange(t)))}setHiddenAreas(t){const i=function(t){if(t.length===0)return[];const i=t.slice();i.sort(Es.compareRangesUsingStarts);const e=[];let s=i[0].startLineNumber,n=i[0].endLineNumber;for(let t=1,o=i.length;t<o;t++){const o=i[t];o.startLineNumber>n+1?(e.push(new Es(s,1,n,1)),s=o.startLineNumber,n=o.endLineNumber):o.endLineNumber>n&&(n=o.endLineNumber)}return e.push(new Es(s,1,n,1)),e}(t.map((t=>this.model.validateRange(t)))),e=this.hiddenAreasDecorationIds.map((t=>this.model.getDecorationRange(t))).sort(Es.compareRangesUsingStarts);if(i.length===e.length){let t=!1;for(let s=0;s<i.length;s++)if(!i[s].equalsRange(e[s])){t=!0;break}if(!t)return!1}const s=i.map((t=>({range:t,options:DF.EMPTY})));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);const n=i;let o=1,r=0,h=-1,c=h+1<n.length?r+1:this.modelLineProjections.length+2,a=!1;for(let t=0;t<this.modelLineProjections.length;t++){const i=t+1;i===c&&(h++,o=n[h].startLineNumber,r=n[h].endLineNumber,c=h+1<n.length?r+1:this.modelLineProjections.length+2);let e=!1;if(i>=o&&i<=r?this.modelLineProjections[t].isVisible()&&(this.modelLineProjections[t]=this.modelLineProjections[t].setVisible(!1),e=!0):(a=!0,this.modelLineProjections[t].isVisible()||(this.modelLineProjections[t]=this.modelLineProjections[t].setVisible(!0),e=!0)),e){const i=this.modelLineProjections[t].getViewLineCount();this.projectedModelLineLineCounts.setValue(t,i)}}return a||this.setHiddenAreas([]),!0}modelPositionIsVisible(t,i){return!(t<1||t>this.modelLineProjections.length)&&this.modelLineProjections[t-1].isVisible()}getModelLineViewLineCount(t){return t<1||t>this.modelLineProjections.length?1:this.modelLineProjections[t-1].getViewLineCount()}setTabSize(t){return this.tabSize!==t&&(this.tabSize=t,this._constructLines(!1,null),!0)}setWrappingSettings(t,i,e,s,n){const o=this.fontInfo.equals(t),r=this.wrappingStrategy===i,h=this.wrappingColumn===e,c=this.wrappingIndent===s,a=this.wordBreak===n;if(o&&r&&h&&c&&a)return!1;const l=o&&r&&!h&&c&&a;this.fontInfo=t,this.wrappingStrategy=i,this.wrappingColumn=e,this.wrappingIndent=s,this.wordBreak=n;let u=null;if(l){u=[];for(let t=0,i=this.modelLineProjections.length;t<i;t++)u[t]=this.modelLineProjections[t].getProjectionData()}return this._constructLines(!1,u),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(t,i,e){if(!t||t<=this._validModelVersionId)return null;const s=i===1?1:this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,n=this.projectedModelLineLineCounts.getPrefixSum(e);return this.modelLineProjections.splice(i-1,e-i+1),this.projectedModelLineLineCounts.removeValues(i-1,e-i+1),new sI(s,n)}onModelLinesInserted(t,i,e,s){if(!t||t<=this._validModelVersionId)return null;const n=i>2&&!this.modelLineProjections[i-2].isVisible(),o=i===1?1:this.projectedModelLineLineCounts.getPrefixSum(i-1)+1;let r=0;const h=[],c=[];for(let t=0,i=s.length;t<i;t++){const i=VI(s[t],!n);h.push(i);const e=i.getViewLineCount();r+=e,c[t]=e}return this.modelLineProjections=this.modelLineProjections.slice(0,i-1).concat(h).concat(this.modelLineProjections.slice(i-1)),this.projectedModelLineLineCounts.insertValues(i-1,c),new nI(o,o+r-1)}onModelLineChanged(t,i,e){if(t!==null&&t<=this._validModelVersionId)return[!1,null,null,null];const s=i-1,n=this.modelLineProjections[s].getViewLineCount(),o=VI(e,this.modelLineProjections[s].isVisible());this.modelLineProjections[s]=o;const r=this.modelLineProjections[s].getViewLineCount();let h=!1,c=0,a=-1,l=0,u=-1,d=0,f=-1;return n>r?(c=this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,a=c+r-1,d=a+1,f=d+(n-r)-1,h=!0):n<r?(c=this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,a=c+n-1,l=a+1,u=l+(r-n)-1,h=!0):(c=this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,a=c+r-1),this.projectedModelLineLineCounts.setValue(s,r),[h,c<=a?new eI(c,a-c+1):null,l<=u?new nI(l,u):null,d<=f?new sI(d,f):null]}acceptVersionId(t){this._validModelVersionId=t,this.modelLineProjections.length!==1||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(t){if(t<1)return 1;const i=this.getViewLineCount();return t>i?i:0|t}getActiveIndentGuide(t,i,e){t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i),e=this._toValidViewLineNumber(e);const s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),n=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),o=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.model.guides.getActiveIndentGuide(s.lineNumber,n.lineNumber,o.lineNumber),h=this.convertModelPositionToViewPosition(r.startLineNumber,1),c=this.convertModelPositionToViewPosition(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber));return{startLineNumber:h.lineNumber,endLineNumber:c.lineNumber,indent:r.indent}}getViewLineInfo(t){t=this._toValidViewLineNumber(t);const i=this.projectedModelLineLineCounts.getIndexOf(t-1),e=i.index,s=i.remainder;return new tL(e+1,s)}getMinColumnOfViewLine(t){return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(t){return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(t){const i=this.modelLineProjections[t.modelLineNumber-1],e=i.getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx),s=i.getModelColumnOfViewPosition(t.modelLineWrappedLineIdx,e);return new Cs(t.modelLineNumber,s)}getModelEndPositionOfViewLine(t){const i=this.modelLineProjections[t.modelLineNumber-1],e=i.getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx),s=i.getModelColumnOfViewPosition(t.modelLineWrappedLineIdx,e);return new Cs(t.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(t,i){const e=this.getViewLineInfo(t),s=this.getViewLineInfo(i),n=new Array;let o=this.getModelStartPositionOfViewLine(e),r=new Array;for(let t=e.modelLineNumber;t<=s.modelLineNumber;t++){const i=this.modelLineProjections[t-1];if(i.isVisible()){const n=t===e.modelLineNumber?e.modelLineWrappedLineIdx:0,o=t===s.modelLineNumber?s.modelLineWrappedLineIdx+1:i.getViewLineCount();for(let i=n;i<o;i++)r.push(new tL(t,i))}if(!i.isVisible()&&o){const i=new Cs(t-1,this.model.getLineMaxColumn(t-1)+1),e=Es.fromPositions(o,i);n.push(new iL(e,r)),r=[],o=null}else i.isVisible()&&!o&&(o=new Cs(t,1))}if(o){const t=Es.fromPositions(o,this.getModelEndPositionOfViewLine(s));n.push(new iL(t,r))}return n}getViewLinesBracketGuides(t,i,e,s){const n=e?this.convertViewPositionToModelPosition(e.lineNumber,e.column):null,o=[];for(const e of this.getViewLineInfosGroupedByModelRanges(t,i)){const t=e.modelRange.startLineNumber,i=this.model.guides.getLinesBracketGuides(t,e.modelRange.endLineNumber,n,s);for(const s of e.viewLines){const e=i[s.modelLineNumber-t].map((t=>{if(t.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[s.modelLineNumber-1].getViewPositionOfModelPosition(0,t.forWrappedLinesAfterColumn).lineNumber>=s.modelLineWrappedLineIdx||t.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[s.modelLineNumber-1].getViewPositionOfModelPosition(0,t.forWrappedLinesBeforeOrAtColumn).lineNumber<s.modelLineWrappedLineIdx)return;if(!t.horizontalLine)return t;let i=-1;if(t.column!==-1){const e=this.modelLineProjections[s.modelLineNumber-1].getViewPositionOfModelPosition(0,t.column);if(e.lineNumber===s.modelLineWrappedLineIdx)i=e.column;else if(e.lineNumber<s.modelLineWrappedLineIdx)i=this.getMinColumnOfViewLine(s);else if(e.lineNumber>s.modelLineWrappedLineIdx)return}const e=this.convertModelPositionToViewPosition(s.modelLineNumber,t.horizontalLine.endColumn),n=this.modelLineProjections[s.modelLineNumber-1].getViewPositionOfModelPosition(0,t.horizontalLine.endColumn);return n.lineNumber===s.modelLineWrappedLineIdx?new BE(t.visibleColumn,i,t.className,new DE(t.horizontalLine.top,e.column),-1,-1):n.lineNumber<s.modelLineWrappedLineIdx||t.visibleColumn!==-1?void 0:new BE(t.visibleColumn,i,t.className,new DE(t.horizontalLine.top,this.getMaxColumnOfViewLine(s)),-1,-1)}));o.push(e.filter((t=>!!t)))}}return o}getViewLinesIndentGuides(t,i){t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const e=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),s=this.convertViewPositionToModelPosition(i,this.getViewLineMaxColumn(i));let n=[];const o=[],r=[],h=e.lineNumber-1,c=s.lineNumber-1;let a=null;for(let t=h;t<=c;t++){const i=this.modelLineProjections[t];if(i.isVisible()){const s=i.getViewLineNumberOfModelPosition(0,t===h?e.column:1),n=i.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(t+1)),c=n-s+1;let l=0;c>1&&i.getViewLineMinColumn(this.model,t+1,n)===1&&(l=s===0?1:2),o.push(c),r.push(l),a===null&&(a=new Cs(t+1,0))}else a!==null&&(n=n.concat(this.model.guides.getLinesIndentGuides(a.lineNumber,t)),a=null)}a!==null&&(n=n.concat(this.model.guides.getLinesIndentGuides(a.lineNumber,s.lineNumber)),a=null);const l=i-t+1,u=new Array(l);let d=0;for(let t=0,i=n.length;t<i;t++){let i=n[t];const e=Math.min(l-d,o[t]),s=r[t];let h;h=s===2?0:s===1?1:e;for(let t=0;t<e;t++)t===h&&(i=0),u[d++]=i}return u}getViewLineContent(t){const i=this.getViewLineInfo(t);return this.modelLineProjections[i.modelLineNumber-1].getViewLineContent(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineLength(t){const i=this.getViewLineInfo(t);return this.modelLineProjections[i.modelLineNumber-1].getViewLineLength(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineMinColumn(t){const i=this.getViewLineInfo(t);return this.modelLineProjections[i.modelLineNumber-1].getViewLineMinColumn(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineMaxColumn(t){const i=this.getViewLineInfo(t);return this.modelLineProjections[i.modelLineNumber-1].getViewLineMaxColumn(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineData(t){const i=this.getViewLineInfo(t);return this.modelLineProjections[i.modelLineNumber-1].getViewLineData(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLinesData(t,i,e){t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const s=this.projectedModelLineLineCounts.getIndexOf(t-1);let n=t;const o=s.index,r=s.remainder,h=[];for(let s=o,c=this.model.getLineCount();s<c;s++){const c=this.modelLineProjections[s];if(!c.isVisible())continue;const a=s===o?r:0;let l=c.getViewLineCount()-a,u=!1;if(n+l>i&&(u=!0,l=i-n+1),c.getViewLinesData(this.model,s+1,a,l,n-t,e,h),n+=l,u)break}return h}validateViewPosition(t,i,e){t=this._toValidViewLineNumber(t);const s=this.projectedModelLineLineCounts.getIndexOf(t-1),n=s.index,o=s.remainder,r=this.modelLineProjections[n],h=r.getViewLineMinColumn(this.model,n+1,o),c=r.getViewLineMaxColumn(this.model,n+1,o);i<h&&(i=h),i>c&&(i=c);const a=r.getModelColumnOfViewPosition(o,i);return this.model.validatePosition(new Cs(n+1,a)).equals(e)?new Cs(t,i):this.convertModelPositionToViewPosition(e.lineNumber,e.column)}validateViewRange(t,i){const e=this.validateViewPosition(t.startLineNumber,t.startColumn,i.getStartPosition()),s=this.validateViewPosition(t.endLineNumber,t.endColumn,i.getEndPosition());return new Es(e.lineNumber,e.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(t,i){const e=this.getViewLineInfo(t),s=this.modelLineProjections[e.modelLineNumber-1].getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return this.model.validatePosition(new Cs(e.modelLineNumber,s))}convertViewRangeToModelRange(t){const i=this.convertViewPositionToModelPosition(t.startLineNumber,t.startColumn),e=this.convertViewPositionToModelPosition(t.endLineNumber,t.endColumn);return new Es(i.lineNumber,i.column,e.lineNumber,e.column)}convertModelPositionToViewPosition(t,i,e=2,s=!1,n=!1){const o=this.model.validatePosition(new Cs(t,i)),r=o.lineNumber,h=o.column;let c=r-1,a=!1;if(n)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,a=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,a=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new Cs(s?0:1,1);const l=1+this.projectedModelLineLineCounts.getPrefixSum(c);let u;return u=a?n?this.modelLineProjections[c].getViewPositionOfModelPosition(l,1,e):this.modelLineProjections[c].getViewPositionOfModelPosition(l,this.model.getLineMaxColumn(c+1),e):this.modelLineProjections[r-1].getViewPositionOfModelPosition(l,h,e),u}convertModelRangeToViewRange(t,i=0){if(t.isEmpty()){const e=this.convertModelPositionToViewPosition(t.startLineNumber,t.startColumn,i);return Es.fromPositions(e)}{const i=this.convertModelPositionToViewPosition(t.startLineNumber,t.startColumn,1),e=this.convertModelPositionToViewPosition(t.endLineNumber,t.endColumn,0);return new Es(i.lineNumber,i.column,e.lineNumber,e.column)}}getViewLineNumberOfModelPosition(t,i){let e=t-1;if(this.modelLineProjections[e].isVisible()){const t=1+this.projectedModelLineLineCounts.getPrefixSum(e);return this.modelLineProjections[e].getViewLineNumberOfModelPosition(t,i)}for(;e>0&&!this.modelLineProjections[e].isVisible();)e--;if(e===0&&!this.modelLineProjections[e].isVisible())return 1;const s=1+this.projectedModelLineLineCounts.getPrefixSum(e);return this.modelLineProjections[e].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(e+1))}getDecorationsInRange(t,i,e,s,n){const o=this.convertViewPositionToModelPosition(t.startLineNumber,t.startColumn),r=this.convertViewPositionToModelPosition(t.endLineNumber,t.endColumn);if(r.lineNumber-o.lineNumber<=t.endLineNumber-t.startLineNumber)return this.model.getDecorationsInRange(new Es(o.lineNumber,1,r.lineNumber,r.column),i,e,s,n);let h=[];const c=o.lineNumber-1,a=r.lineNumber-1;let l=null;for(let t=c;t<=a;t++)if(this.modelLineProjections[t].isVisible())l===null&&(l=new Cs(t+1,t===c?o.column:1));else if(l!==null){const n=this.model.getLineMaxColumn(t);h=h.concat(this.model.getDecorationsInRange(new Es(l.lineNumber,l.column,t,n),i,e,s)),l=null}l!==null&&(h=h.concat(this.model.getDecorationsInRange(new Es(l.lineNumber,l.column,r.lineNumber,r.column),i,e,s)),l=null),h.sort(((t,i)=>{const e=Es.compareRangesUsingStarts(t.range,i.range);return e===0?t.id<i.id?-1:t.id>i.id?1:0:e}));const u=[];let d=0,f=null;for(const t of h){const i=t.id;f!==i&&(f=i,u[d++]=t)}return u}getInjectedTextAt(t){const i=this.getViewLineInfo(t.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].getInjectedTextAt(i.modelLineWrappedLineIdx,t.column)}normalizePosition(t,i){const e=this.getViewLineInfo(t.lineNumber);return this.modelLineProjections[e.modelLineNumber-1].normalizePosition(e.modelLineWrappedLineIdx,t,i)}getLineIndentColumn(t){const i=this.getViewLineInfo(t);return i.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(i.modelLineNumber):0}}class tL{constructor(t,i){this.modelLineNumber=t,this.modelLineWrappedLineIdx=i}}class iL{constructor(t,i){this.modelRange=t,this.viewLines=i}}class eL{constructor(t){this._lines=t}convertViewPositionToModelPosition(t){return this._lines.convertViewPositionToModelPosition(t.lineNumber,t.column)}convertViewRangeToModelRange(t){return this._lines.convertViewRangeToModelRange(t)}validateViewPosition(t,i){return this._lines.validateViewPosition(t.lineNumber,t.column,i)}validateViewRange(t,i){return this._lines.validateViewRange(t,i)}convertModelPositionToViewPosition(t,i,e,s){return this._lines.convertModelPositionToViewPosition(t.lineNumber,t.column,i,e,s)}convertModelRangeToViewRange(t,i){return this._lines.convertModelRangeToViewRange(t,i)}modelPositionIsVisible(t){return this._lines.modelPositionIsVisible(t.lineNumber,t.column)}getModelLineViewLineCount(t){return this._lines.getModelLineViewLineCount(t)}getViewLineNumberOfModelPosition(t,i){return this._lines.getViewLineNumberOfModelPosition(t,i)}}class sL{constructor(t){this.model=t}dispose(){}createCoordinatesConverter(){return new nL(this)}getHiddenAreas(){return[]}setHiddenAreas(t){return!1}setTabSize(t){return!1}setWrappingSettings(t,i,e,s){return!1}createLineBreaksComputer(){const t=[];return{addRequest:(i,e,s)=>{t.push(null)},finalize:()=>t}}onModelFlushed(){}onModelLinesDeleted(t,i,e){return new sI(i,e)}onModelLinesInserted(t,i,e,s){return new nI(i,e)}onModelLineChanged(t,i,e){return[!1,new eI(i,1),null,null]}acceptVersionId(t){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(t,i,e){return{startLineNumber:t,endLineNumber:t,indent:0}}getViewLinesBracketGuides(t,i,e){return new Array(i-t+1).fill([])}getViewLinesIndentGuides(t,i){const e=i-t+1,s=new Array(e);for(let t=0;t<e;t++)s[t]=0;return s}getViewLineContent(t){return this.model.getLineContent(t)}getViewLineLength(t){return this.model.getLineLength(t)}getViewLineMinColumn(t){return this.model.getLineMinColumn(t)}getViewLineMaxColumn(t){return this.model.getLineMaxColumn(t)}getViewLineData(t){const i=this.model.tokenization.getLineTokens(t),e=i.getLineContent();return new Bp(e,!1,1,e.length+1,0,i.inflate(),null)}getViewLinesData(t,i,e){const s=this.model.getLineCount();t=Math.min(Math.max(1,t),s),i=Math.min(Math.max(1,i),s);const n=[];for(let s=t;s<=i;s++){const i=s-t;n[i]=e[i]?this.getViewLineData(s):null}return n}getDecorationsInRange(t,i,e,s,n){return this.model.getDecorationsInRange(t,i,e,s,n)}normalizePosition(t,i){return this.model.normalizePosition(t,i)}getLineIndentColumn(t){return this.model.getLineIndentColumn(t)}getInjectedTextAt(t){return null}}class nL{constructor(t){this._lines=t}_validPosition(t){return this._lines.model.validatePosition(t)}_validRange(t){return this._lines.model.validateRange(t)}convertViewPositionToModelPosition(t){return this._validPosition(t)}convertViewRangeToModelRange(t){return this._validRange(t)}validateViewPosition(t,i){return this._validPosition(i)}validateViewRange(t,i){return this._validRange(i)}convertModelPositionToViewPosition(t){return this._validPosition(t)}convertModelRangeToViewRange(t){return this._validRange(t)}modelPositionIsVisible(t){const i=this._lines.model.getLineCount();return!(t.lineNumber<1||t.lineNumber>i)}getModelLineViewLineCount(t){return 1}getViewLineNumberOfModelPosition(t,i){return t}}const oL=eg.Right;class rL{constructor(t){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((t+1)*oL/8))}reset(t){const i=Math.ceil((t+1)*oL/8);this.lanes.length<i?this.lanes=new Uint8Array(i):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(t,i,e){e&&(this.persist|=1<<t-1);for(let e=i.startLineNumber;e<=i.endLineNumber;e++){const i=oL*e+(t-1);this.lanes[i>>>3]|=1<<i%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(e))}}getLanesAtLine(t){const i=[];let e=oL*t;for(let t=0;t<oL;t++)(this.persist&1<<t||this.lanes[e>>>3]&1<<e%8)&&i.push(t+1),e++;return i.length?i:[eg.Center]}countAtLine(t){let i=oL*t,e=0;for(let t=0;t<oL;t++)(this.persist&1<<t||this.lanes[i>>>3]&1<<i%8)&&e++,i++;return e}}let hL=class extends te{constructor(t,i,e,s,n,o,r,h,c){if(super(),this.languageConfigurationService=r,this._themeService=h,this._attachedView=c,this.hiddenAreasModel=new lL,this.previousHiddenAreas=[],this._editorId=t,this._configuration=i,this.model=e,this._eventDispatcher=new uI,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new $x(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new Er((()=>this._updateConfigurationViewLineCountNow()),0)),this._hasFocus=!1,this._viewportStart=cL.create(this.model),this.glyphLanes=new rL(0),this.model.isTooLargeForTokenization())this._lines=new sL(this.model);else{const t=this._configuration.options,i=t.get(50),e=t.get(139),o=t.get(146),r=t.get(138),h=t.get(129);this._lines=new ZI(this._editorId,this.model,s,n,i,this.model.getOptions().tabSize,e,o.wrappingColumn,r,h)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new BI(e,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new HI(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll((t=>{t.scrollTopChanged&&this._handleVisibleLinesChanged(),t.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new rI(t)),this._eventDispatcher.emitOutgoingEvent(new AI(t.oldScrollWidth,t.oldScrollLeft,t.oldScrollHeight,t.oldScrollTop,t.scrollWidth,t.scrollLeft,t.scrollHeight,t.scrollTop))}))),this._register(this.viewLayout.onDidContentSizeChange((t=>{this._eventDispatcher.emitOutgoingEvent(t)}))),this._decorations=new PI(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast((t=>{try{const i=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(i,t)}finally{this._eventDispatcher.endEmitViewEvents()}}))),this._register(HE.getInstance().onDidChange((()=>{this._eventDispatcher.emitSingleViewEvent(new aI)}))),this._register(this._themeService.onDidColorThemeChange((t=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new hI(t))}))),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(t){this._eventDispatcher.addViewEventHandler(t)}removeViewEventHandler(t){this._eventDispatcher.removeViewEventHandler(t)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const t=this.viewLayout.getLinesViewportData(),i=new Es(t.startLineNumber,this.getLineMinColumn(t.startLineNumber),t.endLineNumber,this.getLineMaxColumn(t.endLineNumber));return this._toModelVisibleRanges(i)}visibleLinesStabilized(){const t=this.getModelVisibleRanges();this._attachedView.setVisibleLines(t,!0)}_handleVisibleLinesChanged(){const t=this.getModelVisibleRanges();this._attachedView.setVisibleLines(t,!1)}setHasFocus(t){this._hasFocus=t,this._cursor.setHasFocus(t),this._eventDispatcher.emitSingleViewEvent(new ZF(t)),this._eventDispatcher.emitOutgoingEvent(new gI(!t,t))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new JF)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new GF)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const t=new Cs(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),i=this.coordinatesConverter.convertViewPositionToModelPosition(t);return new dL(i,this._viewportStart.startLineDelta)}return new dL(null,0)}_onConfigurationChanged(t,i){const e=this._captureStableViewport(),s=this._configuration.options,n=s.get(50),o=s.get(139),r=s.get(146),h=s.get(138),c=s.get(129);this._lines.setWrappingSettings(n,o,r.wrappingColumn,h,c)&&(t.emitViewEvent(new qF),t.emitViewEvent(new iI),t.emitViewEvent(new XF(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),i.hasChanged(91)&&(this._decorations.reset(),t.emitViewEvent(new XF(null))),i.hasChanged(98)&&(this._decorations.reset(),t.emitViewEvent(new XF(null))),t.emitViewEvent(new KF(i)),this.viewLayout.onConfigurationChanged(i),e.recoverViewportStart(this.coordinatesConverter,this.viewLayout),$x.shouldRecreate(i)&&(this.cursorConfig=new $x(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText((t=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let e=!1,s=!1;const n=t instanceof VB?t.rawContentChangedEvent.changes:t.changes,o=t instanceof VB?t.rawContentChangedEvent.versionId:null,r=this._lines.createLineBreaksComputer();for(const t of n)switch(t.changeType){case 4:for(let i=0;i<t.detail.length;i++){const e=t.detail[i];let s=t.injectedTexts[i];s&&(s=s.filter((t=>!t.ownerId||t.ownerId===this._editorId))),r.addRequest(e,s,null)}break;case 2:{let i=null;t.injectedText&&(i=t.injectedText.filter((t=>!t.ownerId||t.ownerId===this._editorId))),r.addRequest(t.detail,i,null);break}}const h=r.finalize(),c=new L(h);for(const t of n)switch(t.changeType){case 1:this._lines.onModelFlushed(),i.emitViewEvent(new qF),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),e=!0;break;case 3:{const s=this._lines.onModelLinesDeleted(o,t.fromLineNumber,t.toLineNumber);s!==null&&(i.emitViewEvent(s),this.viewLayout.onLinesDeleted(s.fromLineNumber,s.toLineNumber)),e=!0;break}case 4:{const s=c.takeCount(t.detail.length),n=this._lines.onModelLinesInserted(o,t.fromLineNumber,t.toLineNumber,s);n!==null&&(i.emitViewEvent(n),this.viewLayout.onLinesInserted(n.fromLineNumber,n.toLineNumber)),e=!0;break}case 2:{const e=c.dequeue(),[n,r,h,a]=this._lines.onModelLineChanged(o,t.lineNumber,e);s=n,r&&i.emitViewEvent(r),h&&(i.emitViewEvent(h),this.viewLayout.onLinesInserted(h.fromLineNumber,h.toLineNumber)),a&&(i.emitViewEvent(a),this.viewLayout.onLinesDeleted(a.fromLineNumber,a.toLineNumber));break}}o!==null&&this._lines.acceptVersionId(o),this.viewLayout.onHeightMaybeChanged(),!e&&s&&(i.emitViewEvent(new iI),i.emitViewEvent(new XF(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const i=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&i){const t=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(t){const i=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),e=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber);this.viewLayout.setScrollPosition({scrollTop:e+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();t instanceof VB&&i.emitOutgoingEvent(new xI(t.contentChangedEvent)),this._cursor.onModelContentChanged(i,t)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()}))),this._register(this.model.onDidChangeTokens((t=>{const i=[];for(let e=0,s=t.ranges.length;e<s;e++){const s=t.ranges[e],n=this.coordinatesConverter.convertModelPositionToViewPosition(new Cs(s.fromLineNumber,1)).lineNumber,o=this.coordinatesConverter.convertModelPositionToViewPosition(new Cs(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;i[e]={fromLineNumber:n,toLineNumber:o}}this._eventDispatcher.emitSingleViewEvent(new cI(i)),this._eventDispatcher.emitOutgoingEvent(new EI(t))}))),this._register(this.model.onDidChangeLanguageConfiguration((t=>{this._eventDispatcher.emitSingleViewEvent(new tI),this.cursorConfig=new $x(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new kI(t))}))),this._register(this.model.onDidChangeLanguage((t=>{this.cursorConfig=new $x(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new yI(t))}))),this._register(this.model.onDidChangeOptions((t=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new qF),t.emitViewEvent(new iI),t.emitViewEvent(new XF(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new $x(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new CI(t))}))),this._register(this.model.onDidChangeDecorations((t=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new XF(t)),this._eventDispatcher.emitOutgoingEvent(new bI(t))})))}setHiddenAreas(t,i){var e;this.hiddenAreasModel.setHiddenAreas(i,t);const s=this.hiddenAreasModel.getMergedRanges();if(s===this.previousHiddenAreas)return;this.previousHiddenAreas=s;const n=this._captureStableViewport();let o=!1;try{const t=this._eventDispatcher.beginEmitViewEvents();o=this._lines.setHiddenAreas(s),o&&(t.emitViewEvent(new qF),t.emitViewEvent(new iI),t.emitViewEvent(new XF(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const i=(e=n.viewportStartModelPosition)===null||e===void 0?void 0:e.lineNumber;i&&s.some((t=>t.startLineNumber<=i&&i<=t.endLineNumber))||n.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),o&&this._eventDispatcher.emitOutgoingEvent(new wI)}getVisibleRangesPlusViewportAboveBelow(){const t=this._configuration.options.get(145),i=this._configuration.options.get(67),e=Math.max(20,Math.round(t.height/i)),s=this.viewLayout.getLinesViewportData(),n=Math.max(1,s.completelyVisibleStartLineNumber-e),o=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+e);return this._toModelVisibleRanges(new Es(n,this.getLineMinColumn(n),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const t=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(t)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(t){const i=this.coordinatesConverter.convertViewRangeToModelRange(t),e=this._lines.getHiddenAreas();if(e.length===0)return[i];const s=[];let n=0,o=i.startLineNumber,r=i.startColumn;const h=i.endLineNumber,c=i.endColumn;for(let t=0,i=e.length;t<i;t++){const i=e[t].startLineNumber,c=e[t].endLineNumber;c<o||i>h||(o<i&&(s[n++]=new Es(o,r,i-1,this.model.getLineMaxColumn(i-1))),o=c+1,r=1)}return(o<h||o===h&&r<c)&&(s[n++]=new Es(o,r,h,c)),s}getCompletelyVisibleViewRange(){const t=this.viewLayout.getLinesViewportData(),i=t.completelyVisibleStartLineNumber,e=t.completelyVisibleEndLineNumber;return new Es(i,this.getLineMinColumn(i),e,this.getLineMaxColumn(e))}getCompletelyVisibleViewRangeAtScrollTop(t){const i=this.viewLayout.getLinesViewportDataAtScrollTop(t),e=i.completelyVisibleStartLineNumber,s=i.completelyVisibleEndLineNumber;return new Es(e,this.getLineMinColumn(e),s,this.getLineMaxColumn(s))}saveState(){const t=this.viewLayout.saveState(),i=t.scrollTop,e=this.viewLayout.getLineNumberAtVerticalOffset(i),s=this.coordinatesConverter.convertViewPositionToModelPosition(new Cs(e,this.getLineMinColumn(e))),n=this.viewLayout.getVerticalOffsetForLineNumber(e)-i;return{scrollLeft:t.scrollLeft,firstPosition:s,firstPositionDeltaTop:n}}reduceRestoreState(t){if(t.firstPosition===void 0)return this._reduceRestoreStateCompatibility(t);const i=this.model.validatePosition(t.firstPosition),e=this.coordinatesConverter.convertModelPositionToViewPosition(i),s=this.viewLayout.getVerticalOffsetForLineNumber(e.lineNumber)-t.firstPositionDeltaTop;return{scrollLeft:t.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(t,i,e){this._viewportStart.update(this,t)}getActiveIndentGuide(t,i,e){return this._lines.getActiveIndentGuide(t,i,e)}getLinesIndentGuides(t,i){return this._lines.getViewLinesIndentGuides(t,i)}getBracketGuidesInRangeByLine(t,i,e,s){return this._lines.getViewLinesBracketGuides(t,i,e,s)}getLineContent(t){return this._lines.getViewLineContent(t)}getLineLength(t){return this._lines.getViewLineLength(t)}getLineMinColumn(t){return this._lines.getViewLineMinColumn(t)}getLineMaxColumn(t){return this._lines.getViewLineMaxColumn(t)}getLineFirstNonWhitespaceColumn(t){const i=so(this.getLineContent(t));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(t){const i=oo(this.getLineContent(t));return i===-1?0:i+2}getMinimapDecorationsInRange(t){return this._decorations.getMinimapDecorationsInRange(t)}getDecorationsInViewport(t){return this._decorations.getDecorationsViewportData(t).decorations}getInjectedTextAt(t){return this._lines.getInjectedTextAt(t)}getViewportViewLineRenderingData(t,i){const e=this._decorations.getDecorationsViewportData(t).inlineDecorations[i-t.startLineNumber];return this._getViewLineRenderingData(i,e)}getViewLineRenderingData(t){const i=this._decorations.getInlineDecorationsOnLine(t);return this._getViewLineRenderingData(t,i)}_getViewLineRenderingData(t,i){const e=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),n=this.getTabSize(),o=this._lines.getViewLineData(t);return o.inlineDecorations&&(i=[...i,...o.inlineDecorations.map((i=>i.toInlineDecoration(t)))]),new Dp(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,e,s,o.tokens,i,n,o.startVisibleColumn)}getViewLineData(t){return this._lines.getViewLineData(t)}getMinimapLinesRenderingData(t,i,e){const s=this._lines.getViewLinesData(t,i,e);return new Ep(this.getTabSize(),s)}getAllOverviewRulerDecorations(t){const i=this.model.getOverviewRulerDecorations(this._editorId,yi(this._configuration.options)),e=new aL;for(const s of i){const i=s.options,n=i.overviewRuler;if(!n)continue;const o=n.position;if(o===0)continue;const r=n.getColor(t.value),h=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);e.accept(r,i.zIndex,h,c,o)}return e.asArray}_invalidateDecorationsColorCache(){const t=this.model.getOverviewRulerDecorations();for(const i of t){const t=i.options.overviewRuler;t==null||t.invalidateCachedColor();const e=i.options.minimap;e==null||e.invalidateCachedColor()}}getValueInRange(t,i){const e=this.coordinatesConverter.convertViewRangeToModelRange(t);return this.model.getValueInRange(e,i)}getValueLengthInRange(t,i){const e=this.coordinatesConverter.convertViewRangeToModelRange(t);return this.model.getValueLengthInRange(e,i)}modifyPosition(t,i){const e=this.coordinatesConverter.convertViewPositionToModelPosition(t),s=this.model.modifyPosition(e,i);return this.coordinatesConverter.convertModelPositionToViewPosition(s)}deduceModelPositionRelativeToViewPosition(t,i,e){const s=this.coordinatesConverter.convertViewPositionToModelPosition(t);this.model.getEOL().length===2&&(i<0?i-=e:i+=e);const n=this.model.getOffsetAt(s)+i;return this.model.getPositionAt(n)}getPlainTextToCopy(t,i,e){const s=e?`\r\n`:this.model.getEOL();(t=t.slice(0)).sort(Es.compareRangesUsingStarts);let n=!1,o=!1;for(const i of t)i.isEmpty()?n=!0:o=!0;if(!o){if(!i)return"";const e=t.map((t=>t.startLineNumber));let n="";for(let t=0;t<e.length;t++)t>0&&e[t-1]===e[t]||(n+=this.model.getLineContent(e[t])+s);return n}if(n&&i){const i=[];let s=0;for(const n of t){const t=n.startLineNumber;n.isEmpty()?t!==s&&i.push(this.model.getLineContent(t)):i.push(this.model.getValueInRange(n,e?2:0)),s=t}return i.length===1?i[0]:i}const r=[];for(const i of t)i.isEmpty()||r.push(this.model.getValueInRange(i,e?2:0));return r.length===1?r[0]:r}getRichTextToCopy(t,i){const e=this.model.getLanguageId();if(e===ef||t.length!==1)return null;let s=t[0];if(s.isEmpty()){if(!i)return null;const t=s.startLineNumber;s=new Es(t,this.model.getLineMinColumn(t),t,this.model.getLineMaxColumn(t))}const n=this._configuration.options.get(50),o=this._getColorMap();let r;return/[:;\\\/<>]/.test(n.fontFamily)||n.fontFamily===Li.fontFamily?r=Li.fontFamily:(r=n.fontFamily,r=r.replace(/"/g,"'"),/[,']/.test(r)||/[+ ]/.test(r)&&(r=`'${r}'`),r=`${r}, ${Li.fontFamily}`),{mode:e,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${r};font-weight: ${n.fontWeight};font-size: ${n.fontSize}px;line-height: ${n.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,o)+"</div>"}}_getHTMLToCopy(t,i){const e=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn,r=this.getTabSize();let h="";for(let t=e;t<=n;t++){const c=this.model.tokenization.getLineTokens(t),a=c.getLineContent(),l=t===e?s-1:0,u=t===n?o-1:a.length;h+=a===""?"<br>":RI(a,c.inflate(),i,l,u,r,yt)}return h}_getColorMap(){const t=Gs.getColorMap(),i=["#000000"];if(t)for(let e=1,s=t.length;e<s;e++)i[e]=CA.Format.CSS.formatHex(t[e]);return i}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(t,i,e){return this._withViewEventsCollector((s=>this._cursor.setStates(s,t,i,e)))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(t){this._cursor.setCursorColumnSelectData(t)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(t){this._cursor.setPrevEditOperationType(t)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(t,i,e=0){this._withViewEventsCollector((s=>this._cursor.setSelections(s,t,i,e)))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(t){this._withViewEventsCollector((i=>this._cursor.restoreState(i,t)))}_executeCursorEdit(t){this._cursor.context.cursorConfig.readOnly?this._eventDispatcher.emitOutgoingEvent(new vI):this._withViewEventsCollector(t)}executeEdits(t,i,e){this._executeCursorEdit((s=>this._cursor.executeEdits(s,t,i,e)))}startComposition(){this._executeCursorEdit((t=>this._cursor.startComposition(t)))}endComposition(t){this._executeCursorEdit((i=>this._cursor.endComposition(i,t)))}type(t,i){this._executeCursorEdit((e=>this._cursor.type(e,t,i)))}compositionType(t,i,e,s,n){this._executeCursorEdit((o=>this._cursor.compositionType(o,t,i,e,s,n)))}paste(t,i,e,s){this._executeCursorEdit((n=>this._cursor.paste(n,t,i,e,s)))}cut(t){this._executeCursorEdit((i=>this._cursor.cut(i,t)))}executeCommand(t,i){this._executeCursorEdit((e=>this._cursor.executeCommand(e,t,i)))}executeCommands(t,i){this._executeCursorEdit((e=>this._cursor.executeCommands(e,t,i)))}revealAllCursors(t,i,e=!1){this._withViewEventsCollector((s=>this._cursor.revealAll(s,t,e,0,i,0)))}revealPrimaryCursor(t,i,e=!1){this._withViewEventsCollector((s=>this._cursor.revealPrimary(s,t,e,0,i,0)))}revealTopMostCursor(t){const i=this._cursor.getTopMostViewPosition(),e=new Es(i.lineNumber,i.column,i.lineNumber,i.column);this._withViewEventsCollector((i=>i.emitViewEvent(new oI(t,!1,e,null,0,!0,0))))}revealBottomMostCursor(t){const i=this._cursor.getBottomMostViewPosition(),e=new Es(i.lineNumber,i.column,i.lineNumber,i.column);this._withViewEventsCollector((i=>i.emitViewEvent(new oI(t,!1,e,null,0,!0,0))))}revealRange(t,i,e,s,n){this._withViewEventsCollector((o=>o.emitViewEvent(new oI(t,!1,e,null,s,i,n))))}changeWhitespace(t){this.viewLayout.changeWhitespace(t)&&(this._eventDispatcher.emitSingleViewEvent(new lI),this._eventDispatcher.emitOutgoingEvent(new pI))}_withViewEventsCollector(t){try{return t(this._eventDispatcher.beginEmitViewEvents())}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(t,i){return this._lines.normalizePosition(t,i)}getLineIndentColumn(t){return this._lines.getLineIndentColumn(t)}};class cL{static create(t){const i=t._setTrackedRange(null,new Es(1,1,1,1),1);return new cL(t,1,!1,i,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(t,i,e,s,n){this._model=t,this._viewLineNumber=i,this._isValid=e,this._modelTrackedRange=s,this._startLineDelta=n}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(t,i){const e=t.coordinatesConverter.convertViewPositionToModelPosition(new Cs(i,t.getLineMinColumn(i))),s=t.model._setTrackedRange(this._modelTrackedRange,new Es(e.lineNumber,e.column,e.lineNumber,e.column),1),n=t.viewLayout.getVerticalOffsetForLineNumber(i),o=t.viewLayout.getCurrentScrollTop();this._viewLineNumber=i,this._isValid=!0,this._modelTrackedRange=s,this._startLineDelta=o-n}invalidate(){this._isValid=!1}}class aL{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(t,i,e,s,n){const o=this._asMap[t];if(o){const t=o.data,i=t[t.length-3],r=t[t.length-1];if(i===n&&r+1>=e)return void(s>r&&(t[t.length-1]=s));t.push(n,e,s)}else{const o=new Ip(t,i,[n,e,s]);this._asMap[t]=o,this.asArray.push(o)}}}class lL{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(t,i){const e=this.hiddenAreas.get(t);e&&uL(e,i)||(this.hiddenAreas.set(t,i),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const t=Array.from(this.hiddenAreas.values()).reduce(((t,i)=>function(t,i){const e=[];let s=0,n=0;for(;s<t.length&&n<i.length;){const o=t[s],r=i[n];if(o.endLineNumber<r.startLineNumber-1)e.push(t[s++]);else if(r.endLineNumber<o.startLineNumber-1)e.push(i[n++]);else{const t=Math.min(o.startLineNumber,r.startLineNumber),i=Math.max(o.endLineNumber,r.endLineNumber);e.push(new Es(t,1,i,1)),s++,n++}}for(;s<t.length;)e.push(t[s++]);for(;n<i.length;)e.push(i[n++]);return e}(t,i)),[]);return uL(this.ranges,t)||(this.ranges=t),this.ranges}}function uL(t,i){if(t.length!==i.length)return!1;for(let e=0;e<t.length;e++)if(!t[e].equalsRange(i[e]))return!1;return!0}class dL{constructor(t,i){this.viewportStartModelPosition=t,this.startLineDelta=i}recoverViewportStart(t,i){if(!this.viewportStartModelPosition)return;const e=t.convertModelPositionToViewPosition(this.viewportStartModelPosition),s=i.getVerticalOffsetForLineNumber(e.lineNumber);i.setScrollPosition({scrollTop:s+this.startLineDelta},1)}}class fL{constructor(...t){this._entries=new Map;for(const[i,e]of t)this.set(i,e)}set(t,i){const e=this._entries.get(t);return this._entries.set(t,i),e}get(t){return this._entries.get(t)}}var gL;(function(t){t[t.Ignore=0]="Ignore",t[t.Info=1]="Info",t[t.Warning=2]="Warning",t[t.Error=3]="Error"})(gL||(gL={})),function(t){const i="error",e="warning",s="info";t.fromValue=function(n){return n?go(i,n)?t.Error:go(e,n)||go("warn",n)?t.Warning:go(s,n)?t.Info:t.Ignore:t.Ignore},t.toString=function(n){switch(n){case t.Error:return i;case t.Warning:return e;case t.Info:return s;default:return"ignore"}}}(gL||(gL={}));const AL=gL;var pL=AL;const wL=za("notificationService");var mL,vL=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},bL=function(t,i){return function(e,s){i(e,s,t)}};let yL=mL=class extends te{get isSimpleWidget(){return this._configuration.isSimpleWidget}constructor(t,i,e,s,n,o,r,h,c,a,l,u){var d;super(),this.languageConfigurationService=l,this._deliveryQueue=new fe,this._contributions=this._register(new ZB),this._onDidDispose=this._register(new de),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new EL(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new CL({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new CL({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new EL(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new EL(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new EL(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new EL(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new EL(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new EL(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new EL(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new EL(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new EL(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new EL(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new EL(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new EL(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new EL(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new EL(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new EL(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new EL(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new EL(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),n.willCreateCodeEditor();const f={...i};let g;this._domElement=t,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++kL,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=e.telemetryData,this._configuration=this._register(this._createConfiguration(e.isSimpleWidget||!1,f,a)),this._register(this._configuration.onDidChange((t=>{this._onDidChangeConfiguration.fire(t);const i=this._configuration.options;if(t.hasChanged(145)){const t=i.get(145);this._onDidLayoutChange.fire(t)}}))),this._contextKeyService=this._register(r.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=n,this._commandService=o,this._themeService=h,this._register(new BL(this,this._contextKeyService)),this._register(new DL(this,this._contextKeyService,u)),this._instantiationService=s.createChild(new fL([Nl,this._contextKeyService])),this._modelData=null,this._focusTracker=new ML(t,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange((()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())}))),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={},g=Array.isArray(e.contributions)?e.contributions:Du.getEditorContributions(),this._contributions.initialize(this,g,this._instantiationService);for(const t of Du.getEditorActions()){if(this._actions.has(t.id)){Oi(new Error(`Cannot have two actions with the same id ${t.id}`));continue}const i=new tD(t.id,t.label,t.alias,t.metadata,(d=t.precondition)!==null&&d!==void 0?d:void 0,(i=>this._instantiationService.invokeFunction((e=>Promise.resolve(t.runEditorCommand(e,this,i))))),this._contextKeyService);this._actions.set(i.id,i)}const A=()=>!this._configuration.options.get(91)&&this._configuration.options.get(36).enabled;this._register(new wa(this._domElement,{onDragOver:t=>{if(!A())return;const i=this.getTargetAtClientPoint(t.clientX,t.clientY);i!=null&&i.position&&this.showDropIndicatorAt(i.position)},onDrop:async t=>{if(!A()||(this.removeDropIndicator(),!t.dataTransfer))return;const i=this.getTargetAtClientPoint(t.clientX,t.clientY);i!=null&&i.position&&this._onDropIntoEditor.fire({position:i.position,event:t})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(t){var i;(i=this._modelData)===null||i===void 0||i.view.writeScreenReaderContent(t)}_createConfiguration(t,i,e){return new Ew(t,i,this._domElement,e)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return ip.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(t){return this._instantiationService.invokeFunction(t)}updateOptions(t){this._configuration.updateOptions(t||{})}getOptions(){return this._configuration.options}getOption(t){return this._configuration.options.get(t)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(t){return this._modelData?dC.getWordAtPosition(this._modelData.model,this._configuration.options.get(131),this._configuration.options.get(130),t):null}getValue(t=null){if(!this._modelData)return"";const i=!(!t||!t.preserveBOM);let e=0;return t&&t.lineEnding&&t.lineEnding===`\n`?e=1:t&&t.lineEnding&&t.lineEnding===`\r\n`&&(e=2),this._modelData.model.getValue(e,i)}setValue(t){this._modelData&&this._modelData.model.setValue(t)}getModel(){return this._modelData?this._modelData.model:null}setModel(t=null){var i;const e=t;if(this._modelData===null&&e===null||this._modelData&&this._modelData.model===e)return;const s={oldModelUrl:((i=this._modelData)===null||i===void 0?void 0:i.model.uri)||null,newModelUrl:(e==null?void 0:e.uri)||null};this._onWillChangeModel.fire(s);const n=this.hasTextFocus(),o=this._detachModel();this._attachModel(e),n&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(o),this._contributionsDisposable=this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const t in this._decorationTypeSubtypes){const i=this._decorationTypeSubtypes[t];for(const e in i)this._removeDecorationType(t+"-"+e)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(t,i,e,s){const n=t.model.validatePosition({lineNumber:i,column:e}),o=t.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);return t.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,s)}getTopForLineNumber(t,i=!1){return this._modelData?mL._getVerticalOffsetForPosition(this._modelData,t,1,i):-1}getTopForPosition(t,i){return this._modelData?mL._getVerticalOffsetForPosition(this._modelData,t,i,!1):-1}static _getVerticalOffsetForPosition(t,i,e,s=!1){const n=t.model.validatePosition({lineNumber:i,column:e}),o=t.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);return t.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,s)}getBottomForLineNumber(t,i=!1){return this._modelData?mL._getVerticalOffsetAfterPosition(this._modelData,t,1,i):-1}setHiddenAreas(t,i){var e;(e=this._modelData)===null||e===void 0||e.viewModel.setHiddenAreas(t.map((t=>Es.lift(t))),i)}getVisibleColumnFromPosition(t){if(!this._modelData)return t.column;const i=this._modelData.model.validatePosition(t),e=this._modelData.model.getOptions().tabSize;return Ey.visibleColumnFromColumn(this._modelData.model.getLineContent(i.lineNumber),i.column,e)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(t,i="api"){if(this._modelData){if(!Cs.isIPosition(t))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,[{selectionStartLineNumber:t.lineNumber,selectionStartColumn:t.column,positionLineNumber:t.lineNumber,positionColumn:t.column}])}}_sendRevealRange(t,i,e,s){if(!this._modelData)return;if(!Es.isIRange(t))throw new Error("Invalid arguments");const n=this._modelData.model.validateRange(t),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(n);this._modelData.viewModel.revealRange("api",e,o,i,s)}revealLine(t,i=0){this._revealLine(t,0,i)}revealLineInCenter(t,i=0){this._revealLine(t,1,i)}revealLineInCenterIfOutsideViewport(t,i=0){this._revealLine(t,2,i)}revealLineNearTop(t,i=0){this._revealLine(t,5,i)}_revealLine(t,i,e){if(typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Es(t,1,t,1),i,!1,e)}revealPosition(t,i=0){this._revealPosition(t,0,!0,i)}revealPositionInCenter(t,i=0){this._revealPosition(t,1,!0,i)}revealPositionInCenterIfOutsideViewport(t,i=0){this._revealPosition(t,2,!0,i)}revealPositionNearTop(t,i=0){this._revealPosition(t,5,!0,i)}_revealPosition(t,i,e,s){if(!Cs.isIPosition(t))throw new Error("Invalid arguments");this._sendRevealRange(new Es(t.lineNumber,t.column,t.lineNumber,t.column),i,e,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(t,i="api"){const e=Bs.isISelection(t),s=Es.isIRange(t);if(!e&&!s)throw new Error("Invalid arguments");if(e)this._setSelectionImpl(t,i);else if(s){const e={selectionStartLineNumber:t.startLineNumber,selectionStartColumn:t.startColumn,positionLineNumber:t.endLineNumber,positionColumn:t.endColumn};this._setSelectionImpl(e,i)}}_setSelectionImpl(t,i){if(!this._modelData)return;const e=new Bs(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn);this._modelData.viewModel.setSelections(i,[e])}revealLines(t,i,e=0){this._revealLines(t,i,0,e)}revealLinesInCenter(t,i,e=0){this._revealLines(t,i,1,e)}revealLinesInCenterIfOutsideViewport(t,i,e=0){this._revealLines(t,i,2,e)}revealLinesNearTop(t,i,e=0){this._revealLines(t,i,5,e)}_revealLines(t,i,e,s){if(typeof t!="number"||typeof i!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Es(t,1,i,1),e,!1,s)}revealRange(t,i=0,e=!1,s=!0){this._revealRange(t,e?1:0,s,i)}revealRangeInCenter(t,i=0){this._revealRange(t,1,!0,i)}revealRangeInCenterIfOutsideViewport(t,i=0){this._revealRange(t,2,!0,i)}revealRangeNearTop(t,i=0){this._revealRange(t,5,!0,i)}revealRangeNearTopIfOutsideViewport(t,i=0){this._revealRange(t,6,!0,i)}revealRangeAtTop(t,i=0){this._revealRange(t,3,!0,i)}_revealRange(t,i,e,s){if(!Es.isIRange(t))throw new Error("Invalid arguments");this._sendRevealRange(Es.lift(t),i,e,s)}setSelections(t,i="api",e=0){if(this._modelData){if(!t||t.length===0)throw new Error("Invalid arguments");for(let i=0,e=t.length;i<e;i++)if(!Bs.isISelection(t[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,t,e)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(t,i=1){if(this._modelData){if(typeof t!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:t},i)}}setScrollTop(t,i=1){if(this._modelData){if(typeof t!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:t},i)}}setScrollPosition(t,i=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(t,i)}hasPendingScrollAnimation(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}saveViewState(){if(!this._modelData)return null;const t=this._contributions.saveViewState();return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:t}}restoreViewState(t){if(!this._modelData||!this._modelData.hasRealView)return;const i=t;if(i&&i.cursorState&&i.viewState){const t=i.cursorState;Array.isArray(t)?t.length>0&&this._modelData.viewModel.restoreCursorState(t):this._modelData.viewModel.restoreCursorState([t]),this._contributions.restoreViewState(i.contributionsState||{});const e=this._modelData.viewModel.reduceRestoreState(i.viewState);this._modelData.view.restoreState(e)}}handleInitialized(){var t;(t=this._getViewModel())===null||t===void 0||t.visibleLinesStabilized()}getContribution(t){return this._contributions.get(t)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let t=this.getActions();return t=t.filter((t=>t.isSupported())),t}getAction(t){return this._actions.get(t)||null}trigger(t,i,e){switch(e=e||{},i){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(t);case"type":{const i=e;return void this._type(t,i.text||"")}case"replacePreviousChar":{const i=e;return void this._compositionType(t,i.text||"",i.replaceCharCnt||0,0,0)}case"compositionType":{const i=e;return void this._compositionType(t,i.text||"",i.replacePrevCharCnt||0,i.replaceNextCharCnt||0,i.positionDelta||0)}case"paste":{const i=e;return void this._paste(t,i.text||"",i.pasteOnNewLine||!1,i.multicursorText||null,i.mode||null,i.clipboardEvent)}case"cut":return void this._cut(t)}const s=this.getAction(i);s?Promise.resolve(s.run(e)).then(void 0,Oi):this._modelData&&(this._triggerEditorCommand(t,i,e)||this._triggerCommand(i,e))}_triggerCommand(t,i){this._commandService.executeCommand(t,i)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(t){this._modelData&&(this._modelData.viewModel.endComposition(t),this._onDidCompositionEnd.fire())}_type(t,i){this._modelData&&i.length!==0&&(t==="keyboard"&&this._onWillType.fire(i),this._modelData.viewModel.type(i,t),t==="keyboard"&&this._onDidType.fire(i))}_compositionType(t,i,e,s,n){this._modelData&&this._modelData.viewModel.compositionType(i,e,s,n,t)}_paste(t,i,e,s,n,o){if(!this._modelData)return;const r=this._modelData.viewModel,h=r.getSelection().getStartPosition();r.paste(i,e,s,t);const c=r.getSelection().getStartPosition();t==="keyboard"&&this._onDidPaste.fire({clipboardEvent:o,range:new Es(h.lineNumber,h.column,c.lineNumber,c.column),languageId:n})}_cut(t){this._modelData&&this._modelData.viewModel.cut(t)}_triggerEditorCommand(t,i,e){const s=Du.getEditorCommand(i);return!!s&&((e=e||{}).source=t,this._instantiationService.invokeFunction((t=>{Promise.resolve(s.runEditorCommand(t,this,e)).then(void 0,Oi)})),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!!this._modelData&&!this._configuration.options.get(91)&&(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!!this._modelData&&!this._configuration.options.get(91)&&(this._modelData.model.popStackElement(),!0)}executeEdits(t,i,e){if(!this._modelData||this._configuration.options.get(91))return!1;let s;return s=e?Array.isArray(e)?()=>e:e:()=>null,this._modelData.viewModel.executeEdits(t,i,s),!0}executeCommand(t,i){this._modelData&&this._modelData.viewModel.executeCommand(i,t)}executeCommands(t,i){this._modelData&&this._modelData.viewModel.executeCommands(i,t)}createDecorationsCollection(t){return new SL(this,t)}changeDecorations(t){return this._modelData?this._modelData.model.changeDecorations(t,this._id):null}getLineDecorations(t){return this._modelData?this._modelData.model.getLineDecorations(t,this._id,yi(this._configuration.options)):null}getDecorationsInRange(t){return this._modelData?this._modelData.model.getDecorationsInRange(t,this._id,yi(this._configuration.options)):null}deltaDecorations(t,i){return this._modelData?t.length===0&&i.length===0?t:this._modelData.model.deltaDecorations(t,i,this._id):[]}removeDecorations(t){this._modelData&&t.length!==0&&this._modelData.model.changeDecorations((i=>{i.deltaDecorations(t,[])}))}removeDecorationsByType(t){const i=this._decorationTypeKeysToIds[t];i&&this.changeDecorations((t=>t.deltaDecorations(i,[]))),this._decorationTypeKeysToIds.hasOwnProperty(t)&&delete this._decorationTypeKeysToIds[t],this._decorationTypeSubtypes.hasOwnProperty(t)&&delete this._decorationTypeSubtypes[t]}getLayoutInfo(){return this._configuration.options.get(145)}createOverviewRuler(t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(t):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarPointerDown(t){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(t)}delegateScrollFromMouseWheelEvent(t){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(t)}layout(t,i=!1){this._configuration.observeContainer(t),i||this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(t){const i={widget:t,position:t.getPosition()};this._contentWidgets.hasOwnProperty(t.getId())&&console.warn("Overwriting a content widget with the same id:"+t.getId()),this._contentWidgets[t.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(i)}layoutContentWidget(t){const i=t.getId();if(this._contentWidgets.hasOwnProperty(i)){const e=this._contentWidgets[i];e.position=t.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(e)}}removeContentWidget(t){const i=t.getId();if(this._contentWidgets.hasOwnProperty(i)){const t=this._contentWidgets[i];delete this._contentWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(t)}}addOverlayWidget(t){const i={widget:t,position:t.getPosition()};this._overlayWidgets.hasOwnProperty(t.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[t.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(i)}layoutOverlayWidget(t){const i=t.getId();if(this._overlayWidgets.hasOwnProperty(i)){const e=this._overlayWidgets[i];e.position=t.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(e)}}removeOverlayWidget(t){const i=t.getId();if(this._overlayWidgets.hasOwnProperty(i)){const t=this._overlayWidgets[i];delete this._overlayWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(t)}}addGlyphMarginWidget(t){const i={widget:t,position:t.getPosition()};this._glyphMarginWidgets.hasOwnProperty(t.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[t.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(i)}layoutGlyphMarginWidget(t){const i=t.getId();if(this._glyphMarginWidgets.hasOwnProperty(i)){const e=this._glyphMarginWidgets[i];e.position=t.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(e)}}removeGlyphMarginWidget(t){const i=t.getId();if(this._glyphMarginWidgets.hasOwnProperty(i)){const t=this._glyphMarginWidgets[i];delete this._glyphMarginWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(t)}}changeViewZones(t){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(t)}getTargetAtClientPoint(t,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(t,i):null}getScrolledVisiblePosition(t){if(!this._modelData||!this._modelData.hasRealView)return null;const i=this._modelData.model.validatePosition(t),e=this._configuration.options,s=e.get(145);return{top:mL._getVerticalOffsetForPosition(this._modelData,i.lineNumber,i.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(i.lineNumber,i.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft(),height:e.get(67)}}getOffsetForColumn(t,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(t,i):-1}render(t=!1){this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,t)}setAriaOptions(t){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(t)}applyFontInfo(t){Da(t,this._configuration.options.get(50))}setBanner(t,i){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=t,this._configuration.setReservedHeight(t?i:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(t){if(!t)return void(this._modelData=null);const i=[];this._domElement.setAttribute("data-mode-id",t.getLanguageId()),this._configuration.setIsDominatedByLongLines(t.isDominatedByLongLines()),this._configuration.setModelLineCount(t.getLineCount());const e=t.onBeforeAttached(),s=new hL(this._id,this._configuration,t,GB.create(Gh(this._domElement)),TF.create(this._configuration.options),(t=>fc(Gh(this._domElement),t)),this.languageConfigurationService,this._themeService,e);i.push(t.onWillDispose((()=>this.setModel(null)))),i.push(s.onEvent((i=>{switch(i.kind){case 0:this._onDidContentSizeChange.fire(i);break;case 1:this._editorTextFocus.setValue(i.hasFocus);break;case 2:this._onDidScrollChange.fire(i);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(i.reachedMaxCursorCount){const t=st(0,"The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",this.getOption(80));this._notificationService.prompt(pL.Warning,t,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:st(0,"Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const t=[];for(let e=0,s=i.selections.length;e<s;e++)t[e]=i.selections[e].getPosition();const e={position:t[0],secondaryPositions:t.slice(1),reason:i.reason,source:i.source};this._onDidChangeCursorPosition.fire(e);const s={selection:i.selections[0],secondarySelections:i.selections.slice(1),modelVersionId:i.modelVersionId,oldSelections:i.oldSelections,oldModelVersionId:i.oldModelVersionId,source:i.source,reason:i.reason};this._onDidChangeCursorSelection.fire(s);break}case 7:this._onDidChangeModelDecorations.fire(i.event);break;case 8:this._domElement.setAttribute("data-mode-id",t.getLanguageId()),this._onDidChangeModelLanguage.fire(i.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(i.event);break;case 10:this._onDidChangeModelContent.fire(i.event);break;case 11:this._onDidChangeModelOptions.fire(i.event);break;case 12:this._onDidChangeModelTokens.fire(i.event)}})));const[n,o]=this._createView(s);if(o){this._domElement.appendChild(n.domNode.domNode);let i=Object.keys(this._contentWidgets);for(let t=0,e=i.length;t<e;t++){const e=i[t];n.addContentWidget(this._contentWidgets[e])}i=Object.keys(this._overlayWidgets);for(let t=0,e=i.length;t<e;t++){const e=i[t];n.addOverlayWidget(this._overlayWidgets[e])}i=Object.keys(this._glyphMarginWidgets);for(let t=0,e=i.length;t<e;t++){const e=i[t];n.addGlyphMarginWidget(this._glyphMarginWidgets[e])}n.render(!1,!0),n.domNode.domNode.setAttribute("data-uri",t.uri.toString())}this._modelData=new xL(t,s,n,o,i,e)}_createView(t){let i;i=this.isSimpleWidget?{paste:(t,i,e,s)=>{this._paste("keyboard",t,i,e,s)},type:t=>{this._type("keyboard",t)},compositionType:(t,i,e,s)=>{this._compositionType("keyboard",t,i,e,s)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(t,i,e,s)=>{const n={text:t,pasteOnNewLine:i,multicursorText:e,mode:s};this._commandService.executeCommand("paste",n)},type:t=>{const i={text:t};this._commandService.executeCommand("type",i)},compositionType:(t,i,e,s)=>{if(e||s){const n={text:t,replacePrevCharCnt:i,replaceNextCharCnt:e,positionDelta:s};this._commandService.executeCommand("compositionType",n)}else{const e={text:t,replaceCharCnt:i};this._commandService.executeCommand("replacePreviousChar",e)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const e=new sE(t.coordinatesConverter);return e.onKeyDown=t=>this._onKeyDown.fire(t),e.onKeyUp=t=>this._onKeyUp.fire(t),e.onContextMenu=t=>this._onContextMenu.fire(t),e.onMouseMove=t=>this._onMouseMove.fire(t),e.onMouseLeave=t=>this._onMouseLeave.fire(t),e.onMouseDown=t=>this._onMouseDown.fire(t),e.onMouseUp=t=>this._onMouseUp.fire(t),e.onMouseDrag=t=>this._onMouseDrag.fire(t),e.onMouseDrop=t=>this._onMouseDrop.fire(t),e.onMouseDropCanceled=t=>this._onMouseDropCanceled.fire(t),e.onMouseWheel=t=>this._onMouseWheel.fire(t),[new IB(i,this._configuration,this._themeService.getColorTheme(),t,e,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(t){t==null||t.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var t;if((t=this._contributionsDisposable)===null||t===void 0||t.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const i=this._modelData.model,e=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),e&&this._domElement.contains(e)&&this._domElement.removeChild(e),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),i}_removeDecorationType(t){this._codeEditorService.removeDecorationType(t)}hasModel(){return this._modelData!==null}showDropIndicatorAt(t){const i=[{range:new Es(t.lineNumber,t.column,t.lineNumber,t.column),options:mL.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(i),this.revealPosition(t,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(t,i){this._contextKeyService.createKey(t,i)}};yL.dropIntoEditorDecorationOptions=DF.register({description:"workbench-dnd-target",className:"dnd-target"}),yL=mL=vL([bL(3,Oa),bL(4,Ua),bL(5,$a),bL(6,Nl),bL(7,Fk),bL(8,wL),bL(9,yw),bL(10,uf),bL(11,jA)],yL);let kL=0,xL=class{constructor(t,i,e,s,n,o){this.model=t,this.viewModel=i,this.view=e,this.hasRealView=s,this.listenersToRemove=n,this.attachedView=o}dispose(){$i(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}};class CL extends te{constructor(t){super(),this._emitterOptions=t,this._onDidChangeToTrue=this._register(new de(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new de(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(t){const i=t?2:1;this._value!==i&&(this._value=i,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class EL extends de{constructor(t,i){super({deliveryQueue:i}),this._contributions=t}fire(t){this._contributions.onBeforeInteractionEvent(),super.fire(t)}}class BL extends te{constructor(t,i){super(),this._editor=t,i.createKey("editorId",t.getId()),this._editorSimpleInput=QC.editorSimpleInput.bindTo(i),this._editorFocus=QC.focus.bindTo(i),this._textInputFocus=QC.textInputFocus.bindTo(i),this._editorTextFocus=QC.editorTextFocus.bindTo(i),this._tabMovesFocus=QC.tabMovesFocus.bindTo(i),this._editorReadonly=QC.readOnly.bindTo(i),this._inDiffEditor=QC.inDiffEditor.bindTo(i),this._editorColumnSelection=QC.columnSelection.bindTo(i),this._hasMultipleSelections=QC.hasMultipleSelections.bindTo(i),this._hasNonEmptySelection=QC.hasNonEmptySelection.bindTo(i),this._canUndo=QC.canUndo.bindTo(i),this._canRedo=QC.canRedo.bindTo(i),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromConfig()))),this._register(this._editor.onDidChangeCursorSelection((()=>this._updateFromSelection()))),this._register(this._editor.onDidFocusEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidFocusEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidChangeModel((()=>this._updateFromModel()))),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromModel()))),this._register(bw.onDidChangeTabFocus((t=>this._tabMovesFocus.set(t)))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const t=this._editor.getOptions();this._tabMovesFocus.set(bw.getTabFocusMode()),this._editorReadonly.set(t.get(91)),this._inDiffEditor.set(t.get(61)),this._editorColumnSelection.set(t.get(22))}_updateFromSelection(){const t=this._editor.getSelections();t?(this._hasMultipleSelections.set(t.length>1),this._hasNonEmptySelection.set(t.some((t=>!t.isEmpty())))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const t=this._editor.getModel();this._canUndo.set(!!(t&&t.canUndo())),this._canRedo.set(!!(t&&t.canRedo()))}}class DL extends te{constructor(t,i,e){super(),this._editor=t,this._contextKeyService=i,this._languageFeaturesService=e,this._langId=QC.languageId.bindTo(i),this._hasCompletionItemProvider=QC.hasCompletionItemProvider.bindTo(i),this._hasCodeActionsProvider=QC.hasCodeActionsProvider.bindTo(i),this._hasCodeLensProvider=QC.hasCodeLensProvider.bindTo(i),this._hasDefinitionProvider=QC.hasDefinitionProvider.bindTo(i),this._hasDeclarationProvider=QC.hasDeclarationProvider.bindTo(i),this._hasImplementationProvider=QC.hasImplementationProvider.bindTo(i),this._hasTypeDefinitionProvider=QC.hasTypeDefinitionProvider.bindTo(i),this._hasHoverProvider=QC.hasHoverProvider.bindTo(i),this._hasDocumentHighlightProvider=QC.hasDocumentHighlightProvider.bindTo(i),this._hasDocumentSymbolProvider=QC.hasDocumentSymbolProvider.bindTo(i),this._hasReferenceProvider=QC.hasReferenceProvider.bindTo(i),this._hasRenameProvider=QC.hasRenameProvider.bindTo(i),this._hasSignatureHelpProvider=QC.hasSignatureHelpProvider.bindTo(i),this._hasInlayHintsProvider=QC.hasInlayHintsProvider.bindTo(i),this._hasDocumentFormattingProvider=QC.hasDocumentFormattingProvider.bindTo(i),this._hasDocumentSelectionFormattingProvider=QC.hasDocumentSelectionFormattingProvider.bindTo(i),this._hasMultipleDocumentFormattingProvider=QC.hasMultipleDocumentFormattingProvider.bindTo(i),this._hasMultipleDocumentSelectionFormattingProvider=QC.hasMultipleDocumentSelectionFormattingProvider.bindTo(i),this._isInEmbeddedEditor=QC.isInEmbeddedEditor.bindTo(i);const s=()=>this._update();this._register(t.onDidChangeModel(s)),this._register(t.onDidChangeModelLanguage(s)),this._register(e.completionProvider.onDidChange(s)),this._register(e.codeActionProvider.onDidChange(s)),this._register(e.codeLensProvider.onDidChange(s)),this._register(e.definitionProvider.onDidChange(s)),this._register(e.declarationProvider.onDidChange(s)),this._register(e.implementationProvider.onDidChange(s)),this._register(e.typeDefinitionProvider.onDidChange(s)),this._register(e.hoverProvider.onDidChange(s)),this._register(e.documentHighlightProvider.onDidChange(s)),this._register(e.documentSymbolProvider.onDidChange(s)),this._register(e.referenceProvider.onDidChange(s)),this._register(e.renameProvider.onDidChange(s)),this._register(e.documentFormattingEditProvider.onDidChange(s)),this._register(e.documentRangeFormattingEditProvider.onDidChange(s)),this._register(e.signatureHelpProvider.onDidChange(s)),this._register(e.inlayHintsProvider.onDidChange(s)),s()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents((()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()}))}_update(){const t=this._editor.getModel();t?this._contextKeyService.bufferChangeEvents((()=>{this._langId.set(t.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(t)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(t)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(t)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(t)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(t)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(t)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(t)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(t)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(t)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(t)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(t)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(t)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(t)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(t)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(t)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(t)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(t)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(t).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(t).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(t).length>1),this._isInEmbeddedEditor.set(t.uri.scheme===Lh.walkThroughSnippet||t.uri.scheme===Lh.vscodeChatCodeBlock)})):this.reset()}}class ML extends te{constructor(t,i){super(),this._onChange=this._register(new de),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(ta(t)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus((()=>{this._hasDomElementFocus=!0,this._update()}))),this._register(this._domFocusTracker.onDidBlur((()=>{this._hasDomElementFocus=!1,this._update()}))),i&&(this._overflowWidgetsDomNode=this._register(ta(i)),this._register(this._overflowWidgetsDomNode.onDidFocus((()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()}))),this._register(this._overflowWidgetsDomNode.onDidBlur((()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()}))))}_update(){const t=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==t&&(this._hadFocus=t,this._onChange.fire(void 0))}hasFocus(){var t;return(t=this._hadFocus)!==null&&t!==void 0&&t}}class SL{get length(){return this._decorationIds.length}constructor(t,i){this._editor=t,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(i)&&i.length>0&&this.set(i)}onDidChange(t,i,e){return this._editor.onDidChangeModelDecorations((e=>{this._isChangingDecorations||t.call(i,e)}),e)}getRange(t){return this._editor.hasModel()?t>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[t]):null}getRanges(){if(!this._editor.hasModel())return[];const t=this._editor.getModel(),i=[];for(const e of this._decorationIds){const s=t.getDecorationRange(e);s&&i.push(s)}return i}has(t){return this._decorationIds.includes(t.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(t){try{this._isChangingDecorations=!0,this._editor.changeDecorations((i=>{this._decorationIds=i.deltaDecorations(this._decorationIds,t)}))}finally{this._isChangingDecorations=!1}return this._decorationIds}append(t){let i=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations((e=>{i=e.deltaDecorations([],t),this._decorationIds=this._decorationIds.concat(i)}))}finally{this._isChangingDecorations=!1}return i}}const FL=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),IL=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function LL(t){return FL+encodeURIComponent(t.toString())+IL}const RL=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),TL=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');Nk(((t,i)=>{const e=t.getColor(um);e&&i.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${LL(e)}") repeat-x bottom left; }`);const s=t.getColor(gm);s&&i.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${LL(s)}") repeat-x bottom left; }`);const n=t.getColor(pm);n&&i.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${LL(n)}") repeat-x bottom left; }`);const o=t.getColor(mm);var r;o&&i.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${r=o,RL+encodeURIComponent(r.toString())+TL}") no-repeat bottom left; }`);const h=t.getColor(ux);h&&i.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${h.rgba.a}; }`)}));var NL=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},QL=function(t,i){return function(e,s){i(e,s,t)}};let OL=class extends te{constructor(t){super(),this._themeService=t,this._onWillCreateCodeEditor=this._register(new de),this._onCodeEditorAdd=this._register(new de),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new de),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new de),this._onDiffEditorAdd=this._register(new de),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new de),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new _t,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(t){this._codeEditors[t.getId()]=t,this._onCodeEditorAdd.fire(t)}removeCodeEditor(t){delete this._codeEditors[t.getId()]&&this._onCodeEditorRemove.fire(t)}listCodeEditors(){return Object.keys(this._codeEditors).map((t=>this._codeEditors[t]))}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(t){this._diffEditors[t.getId()]=t,this._onDiffEditorAdd.fire(t)}listDiffEditors(){return Object.keys(this._diffEditors).map((t=>this._diffEditors[t]))}getFocusedCodeEditor(){let t=null;const i=this.listCodeEditors();for(const e of i){if(e.hasTextFocus())return e;e.hasWidgetFocus()&&(t=e)}return t}removeDecorationType(t){const i=this._decorationOptionProviders.get(t);i&&(i.refCount--,i.refCount<=0&&(this._decorationOptionProviders.delete(t),i.dispose(),this.listCodeEditors().forEach((i=>i.removeDecorationsByType(t)))))}setModelProperty(t,i,e){const s=t.toString();let n;this._modelProperties.has(s)?n=this._modelProperties.get(s):(n=new Map,this._modelProperties.set(s,n)),n.set(i,e)}getModelProperty(t,i){const e=t.toString();if(this._modelProperties.has(e))return this._modelProperties.get(e).get(i)}async openCodeEditor(t,i,e){for(const s of this._codeEditorOpenHandlers){const n=await s(t,i,e);if(n!==null)return n}return null}registerCodeEditorOpenHandler(t){return qi(this._codeEditorOpenHandlers.unshift(t))}};OL=NL([QL(0,Fk)],OL);var zL=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},UL=function(t,i){return function(e,s){i(e,s,t)}};let HL=class extends OL{constructor(t,i){super(i),this._register(this.onCodeEditorAdd((()=>this._checkContextKey()))),this._register(this.onCodeEditorRemove((()=>this._checkContextKey()))),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler((async(t,i,e)=>i?this.doOpenEditor(i,t):null)))}_checkContextKey(){let t=!1;for(const i of this.listCodeEditors())if(!i.isSimpleWidget){t=!0;break}this._editorIsOpen.set(t)}setActiveCodeEditor(t){this._activeCodeEditor=t}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(t,i){if(!this.findModel(t,i.resource)){if(i.resource){const e=i.resource.scheme;if(e===Lh.http||e===Lh.https)return ua(i.resource.toString()),t}return null}const e=i.options?i.options.selection:null;if(e)if(typeof e.endLineNumber=="number"&&typeof e.endColumn=="number")t.setSelection(e),t.revealRangeInCenter(e,1);else{const i={lineNumber:e.startLineNumber,column:e.startColumn};t.setPosition(i),t.revealPositionInCenter(i,1)}return t}findModel(t,i){const e=t.getModel();return e&&e.uri.toString()!==i.toString()?null:e}};HL=zL([UL(0,Nl),UL(1,Fk)],HL),Hd(Ua,HL,0);const PL=za("layoutService");var jL=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},WL=function(t,i){return function(e,s){i(e,s,t)}};let YL=class{get mainContainer(){var t,i;return(i=(t=m(this._codeEditorService.listCodeEditors()))===null||t===void 0?void 0:t.getContainerDomNode())!==null&&i!==void 0?i:Wn.document.body}get activeContainer(){var t,i;const e=(t=this._codeEditorService.getFocusedCodeEditor())!==null&&t!==void 0?t:this._codeEditorService.getActiveCodeEditor();return(i=e==null?void 0:e.getContainerDomNode())!==null&&i!==void 0?i:this.mainContainer}get mainContainerDimension(){return wc(this.mainContainer)}get activeContainerDimension(){return wc(this.activeContainer)}get containers(){return f(this._codeEditorService.listCodeEditors().map((t=>t.getContainerDomNode())))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var t;(t=this._codeEditorService.getFocusedCodeEditor())===null||t===void 0||t.focus()}constructor(t){this._codeEditorService=t,this.onDidLayoutMainContainer=he.None,this.onDidLayoutActiveContainer=he.None,this.onDidLayoutContainer=he.None,this.onDidChangeActiveContainer=he.None,this.onDidAddContainer=he.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};YL=jL([WL(0,Ua)],YL);let _L=class extends YL{get mainContainer(){return this._container}constructor(t,i){super(i),this._container=t}};_L=jL([WL(1,Ua)],_L),Hd(PL,YL,1);const VL=za("dialogService");var JL=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},GL=function(t,i){return function(e,s){i(e,s,t)}};function KL(t){return t.scheme===Lh.file?t.fsPath:t.path}let $L=0;class XL{constructor(t,i,e,s,n,o,r){this.id=++$L,this.type=0,this.actual=t,this.label=t.label,this.confirmBeforeUndo=t.confirmBeforeUndo||!1,this.resourceLabel=i,this.strResource=e,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=n,this.sourceId=o,this.sourceOrder=r,this.isValid=!0}setValid(t){this.isValid=t}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class qL{constructor(t,i){this.resourceLabel=t,this.reason=i}}class ZL{constructor(){this.elements=new Map}createMessage(){const t=[],i=[];for(const[,e]of this.elements)(e.reason===0?t:i).push(e.resourceLabel);const e=[];return t.length>0&&e.push(st(0,"The following files have been closed and modified on disk: {0}.",t.join(", "))),i.length>0&&e.push(st(0,"The following files have been modified in an incompatible way: {0}.",i.join(", "))),e.join(`\n`)}get size(){return this.elements.size}has(t){return this.elements.has(t)}set(t,i){this.elements.set(t,i)}delete(t){return this.elements.delete(t)}}class tR{constructor(t,i,e,s,n,o,r){this.id=++$L,this.type=1,this.actual=t,this.label=t.label,this.confirmBeforeUndo=t.confirmBeforeUndo||!1,this.resourceLabels=i,this.strResources=e,this.groupId=s,this.groupOrder=n,this.sourceId=o,this.sourceOrder=r,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(t,i,e){this.removedResources||(this.removedResources=new ZL),this.removedResources.has(i)||this.removedResources.set(i,new qL(t,e))}setValid(t,i,e){e?this.invalidatedResources&&(this.invalidatedResources.delete(i),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new ZL),this.invalidatedResources.has(i)||this.invalidatedResources.set(i,new qL(t,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class iR{constructor(t,i){this.resourceLabel=t,this.strResource=i,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const t of this._past)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,0);for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const t=[];t.push(`* ${this.strResource}:`);for(let i=0;i<this._past.length;i++)t.push(`   * [UNDO] ${this._past[i]}`);for(let i=this._future.length-1;i>=0;i--)t.push(`   * [REDO] ${this._future[i]}`);return t.join(`\n`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(t,i){t.type===1?t.setValid(this.resourceLabel,this.strResource,i):t.setValid(i)}setElementsValidFlag(t,i){for(const e of this._past)i(e.actual)&&this._setElementValidFlag(e,t);for(const e of this._future)i(e.actual)&&this._setElementValidFlag(e,t)}pushElement(t){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(t),this.versionId++}createSnapshot(t){const i=[];for(let t=0,e=this._past.length;t<e;t++)i.push(this._past[t].id);for(let t=this._future.length-1;t>=0;t--)i.push(this._future[t].id);return new hF(t,i)}restoreSnapshot(t){const i=t.elements.length;let e=!0,s=0,n=-1;for(let o=0,r=this._past.length;o<r;o++,s++){const r=this._past[o];e&&(s>=i||r.id!==t.elements[s])&&(e=!1,n=0),e||r.type!==1||r.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let n=this._future.length-1;n>=0;n--,s++){const r=this._future[n];e&&(s>=i||r.id!==t.elements[s])&&(e=!1,o=n),e||r.type!==1||r.removeResource(this.resourceLabel,this.strResource,0)}n!==-1&&(this._past=this._past.slice(0,n)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const t=[],i=[];for(const i of this._past)t.push(i.actual);for(const t of this._future)i.push(t.actual);return{past:t,future:i}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(t,i){for(let e=this._past.length-1;e>=0;e--)if(this._past[e]===t){i.has(this.strResource)?this._past[e]=i.get(this.strResource):this._past.splice(e,1);break}this.versionId++}splitFutureWorkspaceElement(t,i){for(let e=this._future.length-1;e>=0;e--)if(this._future[e]===t){i.has(this.strResource)?this._future[e]=i.get(this.strResource):this._future.splice(e,1);break}this.versionId++}moveBackward(t){this._past.pop(),this._future.push(t),this.versionId++}moveForward(t){this._future.pop(),this._past.push(t),this.versionId++}}class eR{constructor(t){this.editStacks=t,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let t=0,i=this.editStacks.length;t<i;t++)if(this._versionIds[t]!==this.editStacks[t].versionId)return!1;return!0}}const sR=new iR("","");sR.locked=!0;let nR=class{constructor(t,i){this._dialogService=t,this._notificationService=i,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(t){for(const i of this._uriComparisonKeyComputers)if(i[0]===t.scheme)return i[1].getComparisonKey(t);return t.toString()}_print(t){console.log("------------------------------------"),console.log(`AFTER ${t}: `);const i=[];for(const t of this._editStacks)i.push(t[1].toString());console.log(i.join(`\n`))}pushElement(t,i=cF.None,e=aF.None){if(t.type===0){const s=KL(t.resource),n=this.getUriComparisonKey(t.resource);this._pushElement(new XL(t,s,n,i.id,i.nextOrder(),e.id,e.nextOrder()))}else{const s=new Set,n=[],o=[];for(const i of t.resources){const t=KL(i),e=this.getUriComparisonKey(i);s.has(e)||(s.add(e),n.push(t),o.push(e))}n.length===1?this._pushElement(new XL(t,n[0],o[0],i.id,i.nextOrder(),e.id,e.nextOrder())):this._pushElement(new tR(t,n,o,i.id,i.nextOrder(),e.id,e.nextOrder()))}}_pushElement(t){for(let i=0,e=t.strResources.length;i<e;i++){const e=t.resourceLabels[i],s=t.strResources[i];let n;this._editStacks.has(s)?n=this._editStacks.get(s):(n=new iR(e,s),this._editStacks.set(s,n)),n.pushElement(t)}}getLastElement(t){const i=this.getUriComparisonKey(t);if(this._editStacks.has(i)){const t=this._editStacks.get(i);if(t.hasFutureElements())return null;const e=t.getClosestPastElement();return e?e.actual:null}return null}_splitPastWorkspaceElement(t,i){const e=t.actual.split(),s=new Map;for(const t of e){const i=KL(t.resource),e=this.getUriComparisonKey(t.resource),n=new XL(t,i,e,0,0,0,0);s.set(n.strResource,n)}for(const e of t.strResources)i&&i.has(e)||this._editStacks.get(e).splitPastWorkspaceElement(t,s)}_splitFutureWorkspaceElement(t,i){const e=t.actual.split(),s=new Map;for(const t of e){const i=KL(t.resource),e=this.getUriComparisonKey(t.resource),n=new XL(t,i,e,0,0,0,0);s.set(n.strResource,n)}for(const e of t.strResources)i&&i.has(e)||this._editStacks.get(e).splitFutureWorkspaceElement(t,s)}removeElements(t){const i=typeof t=="string"?t:this.getUriComparisonKey(t);this._editStacks.has(i)&&(this._editStacks.get(i).dispose(),this._editStacks.delete(i))}setElementsValidFlag(t,i,e){const s=this.getUriComparisonKey(t);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(i,e)}createSnapshot(t){const i=this.getUriComparisonKey(t);return this._editStacks.has(i)?this._editStacks.get(i).createSnapshot(t):new hF(t,[])}restoreSnapshot(t){const i=this.getUriComparisonKey(t.resource);if(this._editStacks.has(i)){const e=this._editStacks.get(i);e.restoreSnapshot(t),e.hasPastElements()||e.hasFutureElements()||(e.dispose(),this._editStacks.delete(i))}}getElements(t){const i=this.getUriComparisonKey(t);return this._editStacks.has(i)?this._editStacks.get(i).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(t){if(!t)return[null,null];let i=null,e=null;for(const[s,n]of this._editStacks){const o=n.getClosestPastElement();o&&o.sourceId===t&&(!i||o.sourceOrder>i.sourceOrder)&&(i=o,e=s)}return[i,e]}canUndo(t){if(t instanceof aF){const[,i]=this._findClosestUndoElementWithSource(t.id);return!!i}const i=this.getUriComparisonKey(t);return this._editStacks.has(i)?this._editStacks.get(i).hasPastElements():!1}_onError(t,i){Oi(t);for(const t of i.strResources)this.removeElements(t);this._notificationService.error(t)}_acquireLocks(t){for(const i of t.editStacks)if(i.locked)throw new Error("Cannot acquire edit stack lock");for(const i of t.editStacks)i.locked=!0;return()=>{for(const i of t.editStacks)i.locked=!1}}_safeInvokeWithLocks(t,i,e,s,n){const o=this._acquireLocks(e);let r;try{r=i()}catch(i){return o(),s.dispose(),this._onError(i,t)}return r?r.then((()=>(o(),s.dispose(),n())),(i=>(o(),s.dispose(),this._onError(i,t)))):(o(),s.dispose(),n())}async _invokeWorkspacePrepare(t){if(t.actual.prepareUndoRedo===void 0)return te.None;const i=t.actual.prepareUndoRedo();return i===void 0?te.None:i}_invokeResourcePrepare(t,i){if(t.actual.type!==1||t.actual.prepareUndoRedo===void 0)return i(te.None);const e=t.actual.prepareUndoRedo();return e?Ki(e)?i(e):e.then((t=>i(t))):i(te.None)}_getAffectedEditStacks(t){const i=[];for(const e of t.strResources)i.push(this._editStacks.get(e)||sR);return new eR(i)}_tryToSplitAndUndo(t,i,e,s){if(i.canSplit())return this._splitPastWorkspaceElement(i,e),this._notificationService.warn(s),new oR(this._undo(t,0,!0));for(const t of i.strResources)this.removeElements(t);return this._notificationService.warn(s),new oR}_checkWorkspaceUndo(t,i,e,s){if(i.removedResources)return this._tryToSplitAndUndo(t,i,i.removedResources,st(0,"Could not undo '{0}' across all files. {1}",i.label,i.removedResources.createMessage()));if(s&&i.invalidatedResources)return this._tryToSplitAndUndo(t,i,i.invalidatedResources,st(0,"Could not undo '{0}' across all files. {1}",i.label,i.invalidatedResources.createMessage()));const n=[];for(const t of e.editStacks)t.getClosestPastElement()!==i&&n.push(t.resourceLabel);if(n.length>0)return this._tryToSplitAndUndo(t,i,null,st(0,"Could not undo '{0}' across all files because changes were made to {1}",i.label,n.join(", ")));const o=[];for(const t of e.editStacks)t.locked&&o.push(t.resourceLabel);return o.length>0?this._tryToSplitAndUndo(t,i,null,st(0,"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",i.label,o.join(", "))):e.isValid()?null:this._tryToSplitAndUndo(t,i,null,st(0,"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",i.label))}_workspaceUndo(t,i,e){const s=this._getAffectedEditStacks(i),n=this._checkWorkspaceUndo(t,i,s,!1);return n?n.returnValue:this._confirmAndExecuteWorkspaceUndo(t,i,s,e)}_isPartOfUndoGroup(t){if(!t.groupId)return!1;for(const[,i]of this._editStacks){const e=i.getClosestPastElement();if(e){if(e===t){const e=i.getSecondClosestPastElement();if(e&&e.groupId===t.groupId)return!0}if(e.groupId===t.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(t,i,e,s){if(i.canSplit()&&!this._isPartOfUndoGroup(i)){let n;(function(t){t[t.All=0]="All",t[t.This=1]="This",t[t.Cancel=2]="Cancel"})(n||(n={}));const{result:o}=await this._dialogService.prompt({type:AL.Info,message:st(0,"Would you like to undo '{0}' across all files?",i.label),buttons:[{label:st(0,"&&Undo in {0} Files",e.editStacks.length),run:()=>n.All},{label:st(0,"Undo this &&File"),run:()=>n.This}],cancelButton:{run:()=>n.Cancel}});if(o===n.Cancel)return;if(o===n.This)return this._splitPastWorkspaceElement(i,null),this._undo(t,0,!0);const r=this._checkWorkspaceUndo(t,i,e,!1);if(r)return r.returnValue;s=!0}let n;try{n=await this._invokeWorkspacePrepare(i)}catch(t){return this._onError(t,i)}const o=this._checkWorkspaceUndo(t,i,e,!0);if(o)return n.dispose(),o.returnValue;for(const t of e.editStacks)t.moveBackward(i);return this._safeInvokeWithLocks(i,(()=>i.actual.undo()),e,n,(()=>this._continueUndoInGroup(i.groupId,s)))}_resourceUndo(t,i,e){if(i.isValid){if(!t.locked)return this._invokeResourcePrepare(i,(s=>(t.moveBackward(i),this._safeInvokeWithLocks(i,(()=>i.actual.undo()),new eR([t]),s,(()=>this._continueUndoInGroup(i.groupId,e))))));{const t=st(0,"Could not undo '{0}' because there is already an undo or redo operation running.",i.label);this._notificationService.warn(t)}}else t.flushAllElements()}_findClosestUndoElementInGroup(t){if(!t)return[null,null];let i=null,e=null;for(const[s,n]of this._editStacks){const o=n.getClosestPastElement();o&&o.groupId===t&&(!i||o.groupOrder>i.groupOrder)&&(i=o,e=s)}return[i,e]}_continueUndoInGroup(t,i){if(!t)return;const[,e]=this._findClosestUndoElementInGroup(t);return e?this._undo(e,0,i):void 0}undo(t){if(t instanceof aF){const[,i]=this._findClosestUndoElementWithSource(t.id);return i?this._undo(i,t.id,!1):void 0}return typeof t=="string"?this._undo(t,0,!1):this._undo(this.getUriComparisonKey(t),0,!1)}_undo(t,i=0,e){if(!this._editStacks.has(t))return;const s=this._editStacks.get(t),n=s.getClosestPastElement();if(n){if(n.groupId){const[t,s]=this._findClosestUndoElementInGroup(n.groupId);if(n!==t&&s)return this._undo(s,i,e)}if((n.sourceId!==i||n.confirmBeforeUndo)&&!e)return this._confirmAndContinueUndo(t,i,n);try{return n.type===1?this._workspaceUndo(t,n,e):this._resourceUndo(s,n,e)}finally{}}}async _confirmAndContinueUndo(t,i,e){if((await this._dialogService.confirm({message:st(0,"Would you like to undo '{0}'?",e.label),primaryButton:st(0,"&&Yes"),cancelButton:st(0,"No")})).confirmed)return this._undo(t,i,!0)}_findClosestRedoElementWithSource(t){if(!t)return[null,null];let i=null,e=null;for(const[s,n]of this._editStacks){const o=n.getClosestFutureElement();o&&o.sourceId===t&&(!i||o.sourceOrder<i.sourceOrder)&&(i=o,e=s)}return[i,e]}canRedo(t){if(t instanceof aF){const[,i]=this._findClosestRedoElementWithSource(t.id);return!!i}const i=this.getUriComparisonKey(t);return this._editStacks.has(i)?this._editStacks.get(i).hasFutureElements():!1}_tryToSplitAndRedo(t,i,e,s){if(i.canSplit())return this._splitFutureWorkspaceElement(i,e),this._notificationService.warn(s),new oR(this._redo(t));for(const t of i.strResources)this.removeElements(t);return this._notificationService.warn(s),new oR}_checkWorkspaceRedo(t,i,e,s){if(i.removedResources)return this._tryToSplitAndRedo(t,i,i.removedResources,st(0,"Could not redo '{0}' across all files. {1}",i.label,i.removedResources.createMessage()));if(s&&i.invalidatedResources)return this._tryToSplitAndRedo(t,i,i.invalidatedResources,st(0,"Could not redo '{0}' across all files. {1}",i.label,i.invalidatedResources.createMessage()));const n=[];for(const t of e.editStacks)t.getClosestFutureElement()!==i&&n.push(t.resourceLabel);if(n.length>0)return this._tryToSplitAndRedo(t,i,null,st(0,"Could not redo '{0}' across all files because changes were made to {1}",i.label,n.join(", ")));const o=[];for(const t of e.editStacks)t.locked&&o.push(t.resourceLabel);return o.length>0?this._tryToSplitAndRedo(t,i,null,st(0,"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",i.label,o.join(", "))):e.isValid()?null:this._tryToSplitAndRedo(t,i,null,st(0,"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",i.label))}_workspaceRedo(t,i){const e=this._getAffectedEditStacks(i),s=this._checkWorkspaceRedo(t,i,e,!1);return s?s.returnValue:this._executeWorkspaceRedo(t,i,e)}async _executeWorkspaceRedo(t,i,e){let s;try{s=await this._invokeWorkspacePrepare(i)}catch(t){return this._onError(t,i)}const n=this._checkWorkspaceRedo(t,i,e,!0);if(n)return s.dispose(),n.returnValue;for(const t of e.editStacks)t.moveForward(i);return this._safeInvokeWithLocks(i,(()=>i.actual.redo()),e,s,(()=>this._continueRedoInGroup(i.groupId)))}_resourceRedo(t,i){if(i.isValid){if(!t.locked)return this._invokeResourcePrepare(i,(e=>(t.moveForward(i),this._safeInvokeWithLocks(i,(()=>i.actual.redo()),new eR([t]),e,(()=>this._continueRedoInGroup(i.groupId))))));{const t=st(0,"Could not redo '{0}' because there is already an undo or redo operation running.",i.label);this._notificationService.warn(t)}}else t.flushAllElements()}_findClosestRedoElementInGroup(t){if(!t)return[null,null];let i=null,e=null;for(const[s,n]of this._editStacks){const o=n.getClosestFutureElement();o&&o.groupId===t&&(!i||o.groupOrder<i.groupOrder)&&(i=o,e=s)}return[i,e]}_continueRedoInGroup(t){if(!t)return;const[,i]=this._findClosestRedoElementInGroup(t);return i?this._redo(i):void 0}redo(t){if(t instanceof aF){const[,i]=this._findClosestRedoElementWithSource(t.id);return i?this._redo(i):void 0}return typeof t=="string"?this._redo(t):this._redo(this.getUriComparisonKey(t))}_redo(t){if(!this._editStacks.has(t))return;const i=this._editStacks.get(t),e=i.getClosestFutureElement();if(e){if(e.groupId){const[t,i]=this._findClosestRedoElementInGroup(e.groupId);if(e!==t&&i)return this._redo(i)}try{return e.type===1?this._workspaceRedo(t,e):this._resourceRedo(i,e)}finally{}}}};nR=JL([GL(0,VL),GL(1,wL)],nR);class oR{constructor(t){this.returnValue=t}}function rR(t,i,e){return Math.min(Math.max(t,i),e)}Hd(rF,nR,1);class hR{constructor(){this._n=1,this._val=0}update(t){return this._val=this._val+(t-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class cR{constructor(t){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(t),this._values.fill(0,0,t)}update(t){const i=this._values[this._index];return this._values[this._index]=t,this._index=(this._index+1)%this._values.length,this._sum-=i,this._sum+=t,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const aR=za("environmentService");var lR=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},uR=function(t,i){return function(e,s){i(e,s,t)}};const dR=za("ILanguageFeatureDebounceService");var fR;(function(t){const i=new WeakMap;let e=0;t.of=function(t){let s=i.get(t);return s===void 0&&(s=++e,i.set(t,s)),s}})(fR||(fR={}));class gR{constructor(t){this._default=t}get(t){return this._default}update(t,i){return this._default}default(){return this._default}}class AR{constructor(t,i,e,s,n,o){this._logService=t,this._name=i,this._registry=e,this._default=s,this._min=n,this._max=o,this._cache=new Kf(50,.7)}_key(t){return t.id+this._registry.all(t).reduce(((t,i)=>Hh(fR.of(i),t)),0)}get(t){const i=this._key(t),e=this._cache.get(i);return e?rR(e.value,this._min,this._max):this.default()}update(t,i){const e=this._key(t);let s=this._cache.get(e);s||(s=new cR(6),this._cache.set(e,s));const n=rR(s.update(i),this._min,this._max);return Rh(t.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${t.uri.toString()} is ${n}ms`),n}_overall(){const t=new hR;for(const[,i]of this._cache)t.update(i.value);return t.value}default(){return rR(0|this._overall()||this._default,this._min,this._max)}}let pR=class{constructor(t,i){this._logService=t,this._data=new Map,this._isDev=i.isExtensionDevelopment||!i.isBuilt}for(t,i,e){var s,n,o;const r=(s=e==null?void 0:e.min)!==null&&s!==void 0?s:50,h=(n=e==null?void 0:e.max)!==null&&n!==void 0?n:r**2,c=(o=e==null?void 0:e.key)!==null&&o!==void 0?o:void 0,a=`${fR.of(t)},${r}${c?","+c:""}`;let l=this._data.get(a);return l||(this._isDev?l=new AR(this._logService,i,t,0|this._overallAverage()||1.5*r,r,h):(this._logService.debug(`[DEBOUNCE: ${i}] is disabled in developed mode`),l=new gR(1.5*r)),this._data.set(a,l)),l}_overallAverage(){const t=new hR;for(const i of this._data.values())t.update(i.default());return t.value}};pR=lR([uR(0,au),uR(1,aR)],pR),Hd(dR,pR,1);class wR{static create(t,i){return new wR(t,new mR(i))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(t,i){this._startLineNumber=t,this._tokens=i,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(t){return this._startLineNumber<=t&&t<=this._endLineNumber?this._tokens.getLineTokens(t-this._startLineNumber):null}getRange(){const t=this._tokens.getRange();return t&&new Es(this._startLineNumber+t.startLineNumber,t.startColumn,this._startLineNumber+t.endLineNumber,t.endColumn)}removeTokens(t){const i=t.startLineNumber-this._startLineNumber,e=t.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(i,t.startColumn-1,e,t.endColumn-1),this._updateEndLineNumber()}split(t){const i=t.startLineNumber-this._startLineNumber,e=t.endLineNumber-this._startLineNumber,[s,n,o]=this._tokens.split(i,t.startColumn-1,e,t.endColumn-1);return[new wR(this._startLineNumber,s),new wR(this._startLineNumber+o,n)]}applyEdit(t,i){const[e,s,n]=iD(i);this.acceptEdit(t,e,s,n,i.length>0?i.charCodeAt(0):0)}acceptEdit(t,i,e,s,n){this._acceptDeleteRange(t),this._acceptInsertText(new Cs(t.startLineNumber,t.startColumn),i,e,s,n),this._updateEndLineNumber()}_acceptDeleteRange(t){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return;const i=t.startLineNumber-this._startLineNumber,e=t.endLineNumber-this._startLineNumber;if(e<0){const t=e-i;return void(this._startLineNumber-=t)}const s=this._tokens.getMaxDeltaLine();if(!(i>=s+1)){if(i<0&&e>=s+1)return this._startLineNumber=0,void this._tokens.clear();if(i<0){const s=-i;this._startLineNumber-=s,this._tokens.acceptDeleteRange(t.startColumn-1,0,0,e,t.endColumn-1)}else this._tokens.acceptDeleteRange(0,i,t.startColumn-1,e,t.endColumn-1)}}_acceptInsertText(t,i,e,s,n){if(i===0&&e===0)return;const o=t.lineNumber-this._startLineNumber;if(o<0)return void(this._startLineNumber+=i);o>=this._tokens.getMaxDeltaLine()+1||this._tokens.acceptInsertText(o,t.column-1,i,e,s,n)}}class mR{constructor(t){this._tokens=t,this._tokenCount=t.length/4}toString(t){const i=[];for(let e=0;e<this._tokenCount;e++)i.push(`(${this._getDeltaLine(e)+t},${this._getStartCharacter(e)}-${this._getEndCharacter(e)})`);return`[${i.join(",")}]`}getMaxDeltaLine(){const t=this._getTokenCount();return t===0?-1:this._getDeltaLine(t-1)}getRange(){const t=this._getTokenCount();if(t===0)return null;const i=this._getStartCharacter(0),e=this._getDeltaLine(t-1),s=this._getEndCharacter(t-1);return new Es(0,i+1,e,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(t){return this._tokens[4*t]}_getStartCharacter(t){return this._tokens[4*t+1]}_getEndCharacter(t){return this._tokens[4*t+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(t){let i=0,e=this._getTokenCount()-1;for(;i<e;){const s=i+Math.floor((e-i)/2),n=this._getDeltaLine(s);if(n<t)i=s+1;else{if(!(n>t)){let n=s;for(;n>i&&this._getDeltaLine(n-1)===t;)n--;let o=s;for(;o<e&&this._getDeltaLine(o+1)===t;)o++;return new vR(this._tokens.subarray(4*n,4*o+4))}e=s-1}}return this._getDeltaLine(i)===t?new vR(this._tokens.subarray(4*i,4*i+4)):null}clear(){this._tokenCount=0}removeTokens(t,i,e,s){const n=this._tokens,o=this._tokenCount;let r=0,h=!1,c=0;for(let a=0;a<o;a++){const o=4*a,l=n[o],u=n[o+1],d=n[o+2],f=n[o+3];if((l>t||l===t&&d>=i)&&(l<e||l===e&&u<=s))h=!0;else{if(r===0&&(c=l),h){const t=4*r;n[t]=l-c,n[t+1]=u,n[t+2]=d,n[t+3]=f}r++}}return this._tokenCount=r,c}split(t,i,e,s){const n=this._tokens,o=this._tokenCount,r=[],h=[];let c=r,a=0,l=0;for(let r=0;r<o;r++){const o=4*r,u=n[o],d=n[o+1],f=n[o+2],g=n[o+3];if(u>t||u===t&&f>=i){if(u<e||u===e&&d<=s)continue;c!==h&&(c=h,a=0,l=u)}c[a++]=u-l,c[a++]=d,c[a++]=f,c[a++]=g}return[new mR(new Uint32Array(r)),new mR(new Uint32Array(h)),l]}acceptDeleteRange(t,i,e,s,n){const o=this._tokens,r=this._tokenCount,h=s-i;let c=0,a=!1;for(let l=0;l<r;l++){const u=4*l;let d=o[u],f=o[u+1],g=o[u+2];const A=o[u+3];if(d<i||d===i&&g<=e){c++;continue}if(d===i&&f<e)d===s&&g>n?g-=n-e:g=e;else if(d===i&&f===e){if(!(d===s&&g>n)){a=!0;continue}g-=n-e}else if(d<s||d===s&&f<n){if(!(d===s&&g>n)){a=!0;continue}d=i,f=e,g=f+(g-n)}else if(d>s){if(h===0&&!a){c=r;break}d-=h}else{if(!(d===s&&f>=n))throw new Error("Not possible!");t&&d===0&&(f+=t,g+=t),d-=h,f-=n-e,g-=n-e}const p=4*c;o[p]=d,o[p+1]=f,o[p+2]=g,o[p+3]=A,c++}this._tokenCount=c}acceptInsertText(t,i,e,s,n,o){const r=e===0&&s===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),h=this._tokens,c=this._tokenCount;for(let o=0;o<c;o++){const c=4*o;let a=h[c],l=h[c+1],u=h[c+2];if(!(a<t||a===t&&u<i)){if(a===t&&u===i){if(!r)continue;u+=1}else if(a===t&&l<i&&i<u)e===0?u+=s:u=i;else{if(a===t&&l===i&&r)continue;if(a===t)if(a+=e,e===0)l+=s,u+=s;else{const t=u-l;l=n+(l-i),u=l+t}else a+=e}h[c]=a,h[c+1]=l,h[c+2]=u}}}}class vR{constructor(t){this._tokens=t}getCount(){return this._tokens.length/4}getStartCharacter(t){return this._tokens[4*t+1]}getEndCharacter(t){return this._tokens[4*t+2]}getMetadata(t){return this._tokens[4*t+3]}}var bR=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},yR=function(t,i){return function(e,s){i(e,s,t)}};let kR=class{constructor(t,i,e,s){this._legend=t,this._themeService=i,this._languageService=e,this._logService=s,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new ER}getMetadata(t,i,e){const s=this._languageService.languageIdCodec.encodeLanguageId(e),n=this._hashTable.get(t,i,s);let o;if(n)o=n.metadata,this._logService.getLevel()===lu.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${t} / ${i}: foreground ${op.getForeground(o)}, fontStyle ${op.getFontStyle(o).toString(2)}`);else{let n=this._legend.tokenTypes[t];const r=[];if(n){let t=i;for(let i=0;t>0&&i<this._legend.tokenModifiers.length;i++)1&t&&r.push(this._legend.tokenModifiers[i]),t>>=1;t>0&&this._logService.getLevel()===lu.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${i.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),r.push("not-in-legend"));const s=this._themeService.getColorTheme().getTokenStyleMetadata(n,r,e);s===void 0?o=2147483647:(o=0,s.italic!==void 0&&(o|=1|(s.italic?1:0)<<11),s.bold!==void 0&&(o|=2|(s.bold?2:0)<<11),s.underline!==void 0&&(o|=4|(s.underline?4:0)<<11),s.strikethrough!==void 0&&(o|=8|(s.strikethrough?8:0)<<11),s.foreground&&(o|=16|s.foreground<<15),o===0&&(o=2147483647))}else this._logService.getLevel()===lu.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${t} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,n="not-in-legend";this._hashTable.add(t,i,s,o),this._logService.getLevel()===lu.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${t} (${n}) / ${i} (${r.join(" ")}): foreground ${op.getForeground(o)}, fontStyle ${op.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(t,i){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${t}, column ${i}`))}warnInvalidLengthSemanticTokens(t,i){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${t}, column ${i}`))}warnInvalidEditStart(t,i,e,s,n){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${t}, resultId: ${i}) at edit #${e}: The provided start offset ${s} is outside the previous data (length ${n}).`))}};function xR(t,i,e){const s=t.data,n=t.data.length/5|0,o=Math.max(Math.ceil(n/1024),400),r=[];let h=0,c=1,a=0;for(;h<n;){const t=h;let l=Math.min(t+o,n);if(l<n){let i=l;for(;i-1>t&&s[5*i]===0;)i--;if(i-1===t){let t=l;for(;t+1<n&&s[5*t]===0;)t++;l=t}else l=i}let u=new Uint32Array(4*(l-t)),d=0,f=0,g=0,A=0;for(;h<l;){const t=5*h,n=s[t],o=s[t+1],r=c+n|0,l=n===0?a+o|0:o,p=l+s[t+2]|0,w=s[t+3],m=s[t+4];if(p<=l)i.warnInvalidLengthSemanticTokens(r,l+1);else if(g===r&&A>l)i.warnOverlappingSemanticTokens(r,l+1);else{const t=i.getMetadata(w,m,e);t!==2147483647&&(f===0&&(f=r),u[d]=r-f,u[d+1]=l,u[d+2]=p,u[d+3]=t,d+=4,g=r,A=p)}c=r,a=l,h++}d!==u.length&&(u=u.subarray(0,d));const p=wR.create(f,u);r.push(p)}return r}kR=bR([yR(1,Fk),yR(2,Od),yR(3,au)],kR);class CR{constructor(t,i,e,s){this.tokenTypeIndex=t,this.tokenModifierSet=i,this.languageId=e,this.metadata=s,this.next=null}}class ER{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=ER._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<ER._SIZES.length?2/3*this._currentLength:0),this._elements=[],ER._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(t,i){for(let e=0;e<i;e++)t[e]=null}_hash2(t,i){return(t<<5)-t+i|0}_hashFunc(t,i,e){return this._hash2(this._hash2(t,i),e)%this._currentLength}get(t,i,e){const s=this._hashFunc(t,i,e);let n=this._elements[s];for(;n;){if(n.tokenTypeIndex===t&&n.tokenModifierSet===i&&n.languageId===e)return n;n=n.next}return null}add(t,i,e,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const t=this._elements;this._currentLengthIndex++,this._currentLength=ER._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<ER._SIZES.length?2/3*this._currentLength:0),this._elements=[],ER._nullOutEntries(this._elements,this._currentLength);for(const i of t){let t=i;for(;t;){const i=t.next;t.next=null,this._add(t),t=i}}}this._add(new CR(t,i,e,s))}_add(t){const i=this._hashFunc(t.tokenTypeIndex,t.tokenModifierSet,t.languageId);t.next=this._elements[i],this._elements[i]=t}}ER._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];const BR=za("semanticTokensStylingService");var DR=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},MR=function(t,i){return function(e,s){i(e,s,t)}};let SR=class extends te{constructor(t,i,e){super(),this._themeService=t,this._logService=i,this._languageService=e,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange((()=>{this._caches=new WeakMap})))}getStyling(t){return this._caches.has(t)||this._caches.set(t,new kR(t.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(t)}};SR=DR([MR(0,Fk),MR(1,au),MR(2,Od)],SR),Hd(BR,SR,1);const FR="**",IR="/",LR="[/\\\\]",RR="[^/\\\\]",TR=/\//g;function NR(t,i){switch(t){case 0:return"";case 1:return`${RR}*?`;default:return`(?:${LR}|${RR}+${LR}${i?`|${LR}${RR}+`:""})*?`}}function QR(t,i){if(!t)return[];const e=[];let s=!1,n=!1,o="";for(const r of t){switch(r){case i:if(!s&&!n){e.push(o),o="";continue}break;case"{":s=!0;break;case"}":s=!1;break;case"[":n=!0;break;case"]":n=!1}o+=r}return o&&e.push(o),e}function OR(t){if(!t)return"";let i="";const e=QR(t,IR);if(e.every((t=>t===FR)))i=".*";else{let t=!1;e.forEach(((s,n)=>{if(s===FR){if(t)return;i+=NR(2,n===e.length-1)}else{let t=!1,o="",r=!1,h="";for(const e of s)if(e!=="}"&&t)o+=e;else if(!r||e==="]"&&h)switch(e){case"{":t=!0;continue;case"[":r=!0;continue;case"}":{const e=`(?:${QR(o,",").map((t=>OR(t))).join("|")})`;i+=e,t=!1,o="";break}case"]":i+="["+h+"]",r=!1,h="";break;case"?":i+=RR;continue;case"*":i+=NR(1);continue;default:i+=Xn(e)}else{let t;t=e==="-"?e:e!=="^"&&e!=="!"||h?e===IR?"":Xn(e):"^",h+=t}n<e.length-1&&(e[n+1]!==FR||n+2<e.length)&&(i+=LR)}t=s===FR}))}return i}const zR=/^\*\*\/\*\.[\w\.-]+$/,UR=/^\*\*\/([\w\.-]+)\/?$/,HR=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,PR=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,jR=/^\*\*((\/[\w\.-]+)+)\/?$/,WR=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,YR=new Kf(1e4),_R=function(){return!1},VR=function(){return null};function JR(t,i){if(!t)return VR;let e;e=typeof t!="string"?t.pattern:t,e=e.trim();const s=`${e}_${!!i.trimForExclusions}`;let n,o=YR.get(s);return o||(o=zR.test(e)?function(t,i){return function(e,s){return typeof e=="string"&&e.endsWith(t)?i:null}}(e.substr(4),e):(n=UR.exec(KR(e,i)))?function(t,i){const e=`/${t}`,s=`\\${t}`,n=function(n,o){return typeof n!="string"?null:o?o===t?i:null:n===t||n.endsWith(e)||n.endsWith(s)?i:null},o=[t];return n.basenames=o,n.patterns=[i],n.allBasenames=o,n}(n[1],e):(i.trimForExclusions?PR:HR).test(e)?function(t,i){const e=qR(t.slice(1,-1).split(",").map((t=>JR(t,i))).filter((t=>t!==VR)),t),s=e.length;if(!s)return VR;if(s===1)return e[0];const n=function(i,s){for(let n=0,o=e.length;n<o;n++)if(e[n](i,s))return t;return null},o=e.find((t=>!!t.allBasenames));o&&(n.allBasenames=o.allBasenames);const r=e.reduce(((t,i)=>i.allPaths?t.concat(i.allPaths):t),[]);return r.length&&(n.allPaths=r),n}(e,i):(n=jR.exec(KR(e,i)))?$R(n[1].substr(1),e,!0):(n=WR.exec(KR(e,i)))?$R(n[1],e,!1):function(t){try{const i=new RegExp(`^${OR(t)}$`);return function(e){return i.lastIndex=0,typeof e=="string"&&i.test(e)?t:null}}catch{return VR}}(e),YR.set(s,o)),GR(o,t)}function GR(t,i){if(typeof i=="string")return t;const e=function(e,s){return bM(e,i.base,!xt)?t(Zn(e.substr(i.base.length),rs),s):null};return e.allBasenames=t.allBasenames,e.allPaths=t.allPaths,e.basenames=t.basenames,e.patterns=t.patterns,e}function KR(t,i){return i.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}function $R(t,i,e){const s=rs===Ze.sep,n=s?t:t.replace(TR,rs),o=rs+n,r=Ze.sep+t;let h;return h=e?function(e,h){return typeof e!="string"||e!==n&&!e.endsWith(o)&&(s||e!==t&&!e.endsWith(r))?null:i}:function(e,o){return typeof e!="string"||e!==n&&(s||e!==t)?null:i},h.allPaths=[(e?"*/":"./")+t],h}function XR(t,i={}){if(!t)return _R;if(typeof t=="string"||function(t){const i=t;return i?typeof i.base=="string"&&typeof i.pattern=="string":!1}(t)){const e=JR(t,i);if(e===VR)return _R;const s=function(t,i){return!!e(t,i)};return e.allBasenames&&(s.allBasenames=e.allBasenames),e.allPaths&&(s.allPaths=e.allPaths),s}return function(t,i){const e=qR(Object.getOwnPropertyNames(t).map((e=>function(t,i,e){if(i===!1)return VR;const s=JR(t,e);if(s===VR)return VR;if(typeof i=="boolean")return s;if(i){const e=i.when;if(typeof e=="string"){const i=(i,n,o,r)=>{if(!r||!s(i,n))return null;const h=r(e.replace("$(basename)",(()=>o)));return gr(h)?h.then((i=>i?t:null)):h?t:null};return i.requiresSiblings=!0,i}}return s}(e,t[e],i))).filter((t=>t!==VR))),s=e.length;if(!s)return VR;if(!e.some((t=>!!t.requiresSiblings))){if(s===1)return e[0];const t=function(t,i){let s;for(let n=0,o=e.length;n<o;n++){const o=e[n](t,i);if(typeof o=="string")return o;gr(o)&&(s||(s=[]),s.push(o))}return s?(async()=>{for(const t of s){const i=await t;if(typeof i=="string")return i}return null})():null},i=e.find((t=>!!t.allBasenames));i&&(t.allBasenames=i.allBasenames);const n=e.reduce(((t,i)=>i.allPaths?t.concat(i.allPaths):t),[]);return n.length&&(t.allPaths=n),t}const n=function(t,i,s){let n,o;for(let r=0,h=e.length;r<h;r++){const h=e[r];h.requiresSiblings&&s&&(i||(i=ns(t)),n||(n=i.substr(0,i.length-os(t).length)));const c=h(t,i,n,s);if(typeof c=="string")return c;gr(c)&&(o||(o=[]),o.push(c))}return o?(async()=>{for(const t of o){const i=await t;if(typeof i=="string")return i}return null})():null},o=e.find((t=>!!t.allBasenames));o&&(n.allBasenames=o.allBasenames);const r=e.reduce(((t,i)=>i.allPaths?t.concat(i.allPaths):t),[]);return r.length&&(n.allPaths=r),n}(t,i)}function qR(t,i){const e=t.filter((t=>!!t.basenames));if(e.length<2)return t;const s=e.reduce(((t,i)=>{const e=i.basenames;return e?t.concat(e):t}),[]);let n;if(i){n=[];for(let t=0,e=s.length;t<e;t++)n.push(i)}else n=e.reduce(((t,i)=>{const e=i.patterns;return e?t.concat(e):t}),[]);const o=function(t,i){if(typeof t!="string")return null;if(!i){let e;for(e=t.length;e>0;e--){const i=t.charCodeAt(e-1);if(i===47||i===92)break}i=t.substr(e)}const e=s.indexOf(i);return e!==-1?n[e]:null};o.basenames=s,o.patterns=n,o.allBasenames=s;const r=t.filter((t=>!t.basenames));return r.push(o),r}function ZR(t,i,e,s,n,o){if(Array.isArray(t)){let r=0;for(const h of t){const t=ZR(h,i,e,s,n,o);if(t===10)return t;t>r&&(r=t)}return r}if(typeof t=="string")return s?t==="*"?5:t===e?10:0:0;if(t){const{language:a,pattern:l,scheme:u,hasAccessToAllModels:d,notebookType:f}=t;if(!s&&!d)return 0;f&&n&&(i=n);let g=0;if(u)if(u===i.scheme)g=10;else{if(u!=="*")return 0;g=5}if(a)if(a===e)g=10;else{if(a!=="*")return 0;g=Math.max(g,5)}if(f)if(f===o)g=10;else{if(f!=="*"||o===void 0)return 0;g=Math.max(g,5)}if(l){let t;if(t=typeof l=="string"?l:{...l,base:ts(l.base)},t!==i.fsPath&&(r=t,h=i.fsPath,!r||typeof h!="string"||!XR(r)(h,void 0,c)))return 0;g=10}return g}return 0;var r,h,c}function tT(t){return typeof t!="string"&&(Array.isArray(t)?t.every(tT):!!t.exclusive)}class iT{constructor(t,i,e,s){this.uri=t,this.languageId=i,this.notebookUri=e,this.notebookType=s}equals(t){var i,e;return this.notebookType===t.notebookType&&this.languageId===t.languageId&&this.uri.toString()===t.uri.toString()&&((i=this.notebookUri)===null||i===void 0?void 0:i.toString())===((e=t.notebookUri)===null||e===void 0?void 0:e.toString())}}class eT{constructor(t){this._notebookInfoResolver=t,this._clock=0,this._entries=[],this._onDidChange=new de,this.onDidChange=this._onDidChange.event}register(t,i){let e={selector:t,provider:i,_score:-1,_time:this._clock++};return this._entries.push(e),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),qi((()=>{if(e){const t=this._entries.indexOf(e);t>=0&&(this._entries.splice(t,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),e=void 0)}}))}has(t){return this.all(t).length>0}all(t){if(!t)return[];this._updateScores(t);const i=[];for(const t of this._entries)t._score>0&&i.push(t.provider);return i}ordered(t){const i=[];return this._orderedForEach(t,(t=>i.push(t.provider))),i}orderedGroups(t){const i=[];let e,s;return this._orderedForEach(t,(t=>{e&&s===t._score?e.push(t.provider):(s=t._score,e=[t.provider],i.push(e))})),i}_orderedForEach(t,i){this._updateScores(t);for(const t of this._entries)t._score>0&&i(t)}_updateScores(t){var i,e;const s=(i=this._notebookInfoResolver)===null||i===void 0?void 0:i.call(this,t.uri),n=s?new iT(t.uri,t.getLanguageId(),s.uri,s.type):new iT(t.uri,t.getLanguageId(),void 0,void 0);if(!(!((e=this._lastCandidate)===null||e===void 0)&&e.equals(n))){this._lastCandidate=n;for(const i of this._entries)if(i._score=ZR(i.selector,n.uri,n.languageId,ag(t),n.notebookUri,n.notebookType),tT(i.selector)&&i._score>0){for(const t of this._entries)t._score=0;i._score=1e3;break}this._entries.sort(eT._compareByScoreAndTime)}}static _compareByScoreAndTime(t,i){return t._score<i._score?1:t._score>i._score?-1:sT(t.selector)&&!sT(i.selector)?1:!sT(t.selector)&&sT(i.selector)?-1:t._time<i._time?1:t._time>i._time?-1:0}}function sT(t){return typeof t!="string"&&(Array.isArray(t)?t.some(sT):!!t.isBuiltin)}Hd(jA,class{constructor(){this.referenceProvider=new eT(this._score.bind(this)),this.renameProvider=new eT(this._score.bind(this)),this.newSymbolNamesProvider=new eT(this._score.bind(this)),this.codeActionProvider=new eT(this._score.bind(this)),this.definitionProvider=new eT(this._score.bind(this)),this.typeDefinitionProvider=new eT(this._score.bind(this)),this.declarationProvider=new eT(this._score.bind(this)),this.implementationProvider=new eT(this._score.bind(this)),this.documentSymbolProvider=new eT(this._score.bind(this)),this.inlayHintsProvider=new eT(this._score.bind(this)),this.colorProvider=new eT(this._score.bind(this)),this.codeLensProvider=new eT(this._score.bind(this)),this.documentFormattingEditProvider=new eT(this._score.bind(this)),this.documentRangeFormattingEditProvider=new eT(this._score.bind(this)),this.onTypeFormattingEditProvider=new eT(this._score.bind(this)),this.signatureHelpProvider=new eT(this._score.bind(this)),this.hoverProvider=new eT(this._score.bind(this)),this.documentHighlightProvider=new eT(this._score.bind(this)),this.multiDocumentHighlightProvider=new eT(this._score.bind(this)),this.selectionRangeProvider=new eT(this._score.bind(this)),this.foldingRangeProvider=new eT(this._score.bind(this)),this.linkProvider=new eT(this._score.bind(this)),this.inlineCompletionsProvider=new eT(this._score.bind(this)),this.inlineEditProvider=new eT(this._score.bind(this)),this.completionProvider=new eT(this._score.bind(this)),this.linkedEditingRangeProvider=new eT(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new eT(this._score.bind(this)),this.documentSemanticTokensProvider=new eT(this._score.bind(this)),this.documentOnDropEditProvider=new eT(this._score.bind(this)),this.documentPasteEditProvider=new eT(this._score.bind(this))}_score(t){var i;return(i=this._notebookTypeResolver)===null||i===void 0?void 0:i.call(this,t)}},1);var nT=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},oT=function(t,i){return function(e,s){i(e,s,t)}};const rT=za("hoverService");let hT=class extends te{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(t,i,e={},s,n){super(),this.placement=t,this.instantHover=i,this.overrideOptions=e,this.configurationService=s,this.hoverService=n,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new Zi),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration((t=>{t.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))})))}showHover(t,i){const e=typeof this.overrideOptions=="function"?this.overrideOptions(t,i):this.overrideOptions;this.hoverDisposables.clear();const s=t.target instanceof HTMLElement?[t.target]:t.target.targetElements;for(const t of s)this.hoverDisposables.add(cc(t,"keydown",(t=>{t.equals(9)&&this.hoverService.hideHover()})));const n=t.content instanceof HTMLElement?void 0:t.content.toString();return this.hoverService.showHover({...t,...e,persistence:{hideOnKeyDown:!0,...e.persistence},id:n,appearance:{...t.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...e.appearance}},i)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};hT=nT([oT(3,Id),oT(4,rT)],hT);const cT=za("contextViewService"),aT=za("contextMenuService"),lT=ha;let uT=class extends te{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new ck(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class dT extends te{static render(t,i,e){return new dT(t,i,e)}constructor(t,i,e){super(),this.actionContainer=ia(t,lT("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=ia(this.actionContainer,lT("a.action")),this.action.setAttribute("role","button"),i.iconClass&&ia(this.action,lT(`span.icon.${i.iconClass}`)),ia(this.action,lT("span")).textContent=e?`${i.label} (${e})`:i.label,this._register(rc(this.actionContainer,$c.CLICK,(t=>{t.stopPropagation(),t.preventDefault(),i.run(this.actionContainer)}))),this._register(rc(this.actionContainer,$c.KEY_DOWN,(t=>{const e=new hr(t);(e.equals(3)||e.equals(10))&&(t.stopPropagation(),t.preventDefault(),i.run(this.actionContainer))}))),this.setEnabled(!0)}setEnabled(t){t?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function fT(t,i){return t&&i?st(0,"Inspect this in the accessible view with {0}.",i):t?st(0,"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}const gT=za("openerService");function AT(t,i={}){const e=pT(i);return mT(e,function(t,i){const e={type:1,children:[]};let s=0,n=e;const o=[],r=new wT(t);for(;!r.eos();){let t=r.next();const e=t==="\\"&&bT(r.peek(),i)!==0;if(e&&(t=r.next()),!e&&vT(t,i)&&t===r.peek()){r.advance(),n.type===2&&(n=o.pop());const e=bT(t,i);if(n.type===e||n.type===5&&e===6)n=o.pop();else{const t={type:e,children:[]};e===5&&(t.index=s,s++),n.children.push(t),o.push(n),n=t}}else if(t===`\n`)n.type===2&&(n=o.pop()),n.children.push({type:8});else if(n.type!==2){const i={type:2,content:t};n.children.push(i),o.push(n),n=i}else n.content+=t}return n.type===2&&(n=o.pop()),e}(t,!!i.renderCodeSegments),i.actionHandler,i.renderCodeSegments),e}function pT(t){const i=t.inline?"span":"div",e=document.createElement(i);return t.className&&(e.className=t.className),e}class wT{constructor(t){this.source=t,this.index=0}eos(){return this.index>=this.source.length}next(){const t=this.peek();return this.advance(),t}peek(){return this.source[this.index]}advance(){this.index++}}function mT(t,i,e,s){let n;if(i.type===2)n=document.createTextNode(i.content||"");else if(i.type===3)n=document.createElement("b");else if(i.type===4)n=document.createElement("i");else if(i.type===7&&s)n=document.createElement("code");else if(i.type===5&&e){const t=document.createElement("a");e.disposables.add(cc(t,"click",(t=>{e.callback(String(i.index),t)}))),n=t}else i.type===8?n=document.createElement("br"):i.type===1&&(n=t);n&&t!==n&&t.appendChild(n),n&&Array.isArray(i.children)&&i.children.forEach((t=>{mT(n,t,e,s)}))}function vT(t,i){return bT(t,i)!==0}function bT(t,i){switch(t){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return i?7:0;default:return 0}}const yT=new RegExp(`(\\\\)?\\$\\((${Ka.iconNameExpression}(?:${Ka.iconModifierExpression})?)\\)`,"g");function kT(t){const i=new Array;let e,s=0,n=0;for(;(e=yT.exec(t))!==null;){n=e.index||0,s<n&&i.push(t.substring(s,n)),s=(e.index||0)+e[0].length;const[,o,r]=e;i.push(o?`$(${r})`:xT({id:r}))}return s<t.length&&i.push(t.substring(s)),i}function xT(t){const i=ha("span");return i.classList.add(...Ka.asClassNameArray(t)),i}function CT(t){const i=function(t){if(ET=0,DT(t,MT,4352),ET>0||(DT(t,ST,4449),ET>0)||(DT(t,FT,4520),ET>0)||(DT(t,IT,12593),ET))return BT.subarray(0,ET);if(t>=44032&&t<=55203){const i=t-44032,e=i%588,s=Math.floor(i/588),n=Math.floor(e/28),o=e%28-1;if(s<MT.length?DT(s,MT,0):4352+s-12593<IT.length&&DT(4352+s,IT,12593),n<ST.length?DT(n,ST,0):4449+n-12593<IT.length&&DT(4449+n-12593,IT,12593),o>=0&&(o<FT.length?DT(o,FT,0):4520+o-12593<IT.length&&DT(4520+o-12593,IT,12593)),ET>0)return BT.subarray(0,ET)}}(t);if(i&&i.length>0)return new Uint32Array(i)}let ET=0;const BT=new Uint32Array(10);function DT(t,i,e){t>=e&&t<e+i.length&&function(t){t!==0&&(BT[ET++]=255&t,t>>8&&(BT[ET++]=t>>8&255),t>>16&&(BT[ET++]=t>>16&255))}(i[t-e])}const MT=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),ST=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),FT=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),IT=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function LT(...t){return function(i,e){for(let s=0,n=t.length;s<n;s++){const n=t[s](i,e);if(n)return n}return null}}TT.bind(void 0,!1);const RT=TT.bind(void 0,!0);function TT(t,i,e){if(!e||e.length<i.length)return null;let s;return s=t?Ao(e,i):e.indexOf(i)===0,s?i.length>0?[{start:0,end:i.length}]:[]:null}function NT(t,i){const e=i.toLowerCase().indexOf(t.toLowerCase());return e===-1?null:[{start:e,end:e+t.length}]}function QT(t,i){return OT(t.toLowerCase(),i.toLowerCase(),0,0)}function OT(t,i,e,s){if(e===t.length)return[];if(s===i.length)return null;if(t[e]===i[s]){let n=null;return(n=OT(t,i,e+1,s+1))?GT({start:s,end:s+1},n):null}return OT(t,i,e,s+1)}function zT(t){return 97<=t&&t<=122}function UT(t){return 65<=t&&t<=90}function HT(t){return 48<=t&&t<=57}function PT(t){return t===32||t===9||t===10||t===13}const jT=new Set;function WT(t){return PT(t)||jT.has(t)}function YT(t,i){return t===i||WT(t)&&WT(i)}"()[]{}<>`'\"-/;:,.?!".split("").forEach((t=>jT.add(t.charCodeAt(0))));const _T=new Map;function VT(t){if(_T.has(t))return _T.get(t);let i;const e=CT(t);return e&&(i=e),_T.set(t,i),i}function JT(t){return zT(t)||UT(t)||HT(t)}function GT(t,i){return i.length===0?i=[t]:t.end===i[0].start?i[0].start=t.start:i.unshift(t),i}function KT(t,i){for(let e=i;e<t.length;e++){const i=t.charCodeAt(e);if(UT(i)||HT(i)||e>0&&!JT(t.charCodeAt(e-1)))return e}return t.length}function $T(t,i,e,s){if(e===t.length)return[];if(s===i.length||t[e]!==i[s].toLowerCase())return null;{let n=null,o=s+1;for(n=$T(t,i,e+1,s+1);!n&&(o=KT(i,o))<i.length;)n=$T(t,i,e+1,o),o++;return n===null?null:GT({start:s,end:s+1},n)}}function XT(t,i){if(!i||(i=i.trim()).length===0||!function(t){let i=0,e=0,s=0,n=0;for(let o=0;o<t.length;o++)s=t.charCodeAt(o),UT(s)&&i++,zT(s)&&e++,PT(s)&&n++;return i!==0&&e!==0||n!==0?i<=5:t.length<=30}(t))return null;i.length>60&&(i=i.substring(0,60));const e=function(t){let i=0,e=0,s=0,n=0,o=0;for(let r=0;r<t.length;r++)o=t.charCodeAt(r),UT(o)&&i++,zT(o)&&e++,JT(o)&&s++,HT(o)&&n++;return{upperPercent:i/t.length,lowerPercent:e/t.length,alphaPercent:s/t.length,numericPercent:n/t.length}}(i);if(!function(t){const{upperPercent:i,lowerPercent:e,alphaPercent:s,numericPercent:n}=t;return e>.2&&i<.8&&s>.6&&n<.2}(e)){if(!function(t){const{upperPercent:i,lowerPercent:e}=t;return e===0&&i>.6}(e))return null;i=i.toLowerCase()}let s=null,n=0;for(t=t.toLowerCase();n<i.length&&(s=$T(t,i,0,n))===null;)n=KT(i,n+1);return s}function qT(t,i,e,s,n){let o=0;if(e===t.length)return[];if(s===i.length)return null;if(!YT(t.charCodeAt(e),i.charCodeAt(s))){const n=VT(t.charCodeAt(e));if(!n)return null;for(let t=0;t<n.length;t++)if(!YT(n[t],i.charCodeAt(s+t)))return null;o+=n.length-1}let r=null,h=s+o+1;if(r=qT(t,i,e+1,h,n),!n)for(;!r&&(h=ZT(i,h))<i.length;)r=qT(t,i,e+1,h,n),h++;if(!r)return null;if(t.charCodeAt(e)!==i.charCodeAt(s)){const n=VT(t.charCodeAt(e));if(!n)return r;for(let t=0;t<n.length;t++)if(n[t]!==i.charCodeAt(s+t))return r}return GT({start:s,end:s+o+1},r)}function ZT(t,i){for(let e=i;e<t.length;e++)if(WT(t.charCodeAt(e))||e>0&&WT(t.charCodeAt(e-1)))return e;return t.length}const tN=LT(RT,XT,NT),iN=LT(RT,XT,QT),eN=new Kf(1e4);function sN(t,i,e=!1){if(typeof t!="string"||typeof i!="string")return null;let s=eN.get(t);s||(s=new RegExp(t.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*"),"i"),eN.set(t,s));const n=s.exec(i);return n?[{start:n.index,end:n.index+n[0].length}]:e?iN(t,i):tN(t,i)}function nN(t,i){const e=bN(t,t.toLowerCase(),0,i,i.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return e?rN(e):null}function oN(t,i,e,s,n,o){const r=Math.min(13,t.length);for(;e<r;e++){const r=bN(t,i,e,s,n,o,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(r)return r}return[0,o]}function rN(t){if(t===void 0)return[];const i=[],e=t[1];for(let s=t.length-1;s>1;s--){const n=t[s]+e,o=i[i.length-1];o&&o.end===n?o.end=n+1:i.push({start:n,end:n+1})}return i}const hN=128;function cN(){const t=[],i=[];for(let t=0;t<=hN;t++)i[t]=0;for(let e=0;e<=hN;e++)t.push(i.slice(0));return t}function aN(t){const i=[];for(let e=0;e<=t;e++)i[e]=0;return i}const lN=aN(2*hN),uN=aN(2*hN),dN=cN(),fN=cN(),gN=cN();function AN(t,i){if(i<0||i>=t.length)return!1;const e=t.codePointAt(i);switch(e){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!Ro(e)}}function pN(t,i){if(i<0||i>=t.length)return!1;switch(t.charCodeAt(i)){case 32:case 9:return!0;default:return!1}}function wN(t,i,e){return i[t]!==e[t]}var mN;(function(t){t.Default=[-100,0],t.isDefault=function(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}})(mN||(mN={}));class vN{constructor(t,i){this.firstMatchCanBeWeak=t,this.boostFullMatch=i}}function bN(t,i,e,s,n,o,r=vN.default){const h=t.length>hN?hN:t.length,c=s.length>hN?hN:s.length;if(e>=h||o>=c||h-e>c-o||!function(t,i,e,s,n,o,r=!1){for(;i<e&&n<o;)t[i]===s[n]&&(r&&(lN[i]=n),i+=1),n+=1;return i===e}(i,e,h,n,o,c,!0))return;(function(t,i,e,s,n,o){let r=t-1,h=i-1;for(;r>=e&&h>=s;)n[r]===o[h]&&(uN[r]=h,r--),h--})(h,c,e,o,i,n);let a=1,l=1,u=e,d=o;const f=[!1];for(a=1,u=e;u<h;a++,u++){const r=lN[u],g=uN[u],A=u+1<h?uN[u+1]:c;for(l=r-o+1,d=r;d<A;l++,d++){let h=Number.MIN_SAFE_INTEGER,A=!1;d<=g&&(h=yN(t,i,u,e,s,n,d,c,o,dN[a-1][l-1]===0,f));let p=0;h!==Number.MAX_SAFE_INTEGER&&(A=!0,p=h+fN[a-1][l-1]);const w=d>r,m=w?fN[a][l-1]+(dN[a][l-1]>0?-5:0):0,v=d>r+1&&dN[a][l-1]>0,b=v?fN[a][l-2]+(dN[a][l-2]>0?-5:0):0;if(v&&(!w||b>=m)&&(!A||b>=p))fN[a][l]=b,gN[a][l]=3,dN[a][l]=0;else if(w&&(!A||m>=p))fN[a][l]=m,gN[a][l]=2,dN[a][l]=0;else{if(!A)throw new Error("not possible");fN[a][l]=p,gN[a][l]=1,dN[a][l]=dN[a-1][l-1]+1}}}if(!f[0]&&!r.firstMatchCanBeWeak)return;a--,l--;const g=[fN[a][l],o];let A=0,p=0;for(;a>=1;){let t=l;do{const i=gN[a][t];if(i===3)t-=2;else{if(i!==2)break;t-=1}}while(t>=1);A>1&&i[e+a-1]===n[o+l-1]&&!wN(t+o-1,s,n)&&A+1>dN[a][t]&&(t=l),t===l?A++:A=1,p||(p=t),a--,l=t-1,g.push(l)}c===h&&r.boostFullMatch&&(g[0]+=2);const w=p-h;return g[0]-=w,g}function yN(t,i,e,s,n,o,r,h,c,a,l){if(i[e]!==o[r])return Number.MIN_SAFE_INTEGER;let u=1,d=!1;return r===e-s?u=t[e]===n[r]?7:5:!wN(r,n,o)||r!==0&&wN(r-1,n,o)?!AN(o,r)||r!==0&&AN(o,r-1)?(AN(o,r-1)||pN(o,r-1))&&(u=5,d=!0):u=5:(u=t[e]===n[r]?7:5,d=!0),u>1&&e===s&&(l[0]=!0),d||(d=wN(r,n,o)||AN(o,r-1)||pN(o,r-1)),e===s?r>c&&(u-=d?3:5):u+=a?d?2:0:d?0:1,r+1===h&&(u-=d?3:5),u}function kN(t,i,e,s,n,o,r){return function(t,i,e,s,n,o,r,h){let c=bN(t,i,e,s,n,o,h);if(c&&!r)return c;if(t.length>=3){const i=Math.min(7,t.length-1);for(let r=e+1;r<i;r++){const i=xN(t,r);if(i){const t=bN(i,i.toLowerCase(),e,s,n,o,h);t&&(t[0]-=3,(!c||t[0]>c[0])&&(c=t))}}}return c}(t,i,e,s,n,o,!0,r)}function xN(t,i){if(i+1>=t.length)return;const e=t[i],s=t[i+1];return e!==s?t.slice(0,i)+s+e+t.slice(i+2):void 0}vN.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};const CN="$(",EN=new RegExp(`\\$\\(${Ka.iconNameExpression}(?:${Ka.iconModifierExpression})?\\)`,"g"),BN=new RegExp(`(\\\\)?${EN.source}`,"g"),DN=new RegExp(`\\\\${EN.source}`,"g"),MN=new RegExp(`(\\s)?(\\\\)?${EN.source}(\\s)?`,"g");function SN(t){return t.indexOf(CN)===-1?t:t.replace(MN,((t,i,e,s)=>e?t:i||s||""))}const FN=new RegExp(`\\$\\(${Ka.iconNameCharacter}+\\)`,"g");function IN(t){FN.lastIndex=0;let i="";const e=[];let s=0;for(;;){const n=FN.lastIndex,o=FN.exec(t),r=t.substring(n,o==null?void 0:o.index);if(r.length>0){i+=r;for(let t=0;t<r.length;t++)e.push(s)}if(!o)break;s+=o[0].length}return{text:i,iconOffsets:e}}function LN(t,i,e=!1){const{text:s,iconOffsets:n}=i;if(!n||n.length===0)return sN(t,s,e);const o=Zn(s," "),r=s.length-o.length,h=sN(t,o,e);if(h)for(const t of h){const i=n[t.start+r]+r;t.start+=i,t.end+=i}return h}class RN{constructor(t="",i=!1){var e,s,n;if(this.value=t,typeof this.value!="string")throw Wi("value");typeof i=="boolean"?(this.isTrusted=i,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(e=i.isTrusted)!==null&&e!==void 0?e:void 0,this.supportThemeIcons=(s=i.supportThemeIcons)!==null&&s!==void 0&&s,this.supportHtml=(n=i.supportHtml)!==null&&n!==void 0&&n)}appendText(t,i=0){return this.value+=function(t){return t.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}(this.supportThemeIcons?function(t){return t.replace(BN,((t,i)=>i?t:`\\${t}`))}(t):t).replace(/([ \t]+)/g,((t,i)=>"&nbsp;".repeat(i.length))).replace(/\>/gm,"\\>").replace(/\n/g,i===1?`\\\n`:`\n\n`),this}appendMarkdown(t){return this.value+=t,this}appendCodeblock(t,i){return this.value+=`\n${function(t,i){var e,s;const n=(s=(e=t.match(/^`+/gm))===null||e===void 0?void 0:e.reduce(((t,i)=>t.length>i.length?t:i)).length)!==null&&s!==void 0?s:0,o=n>=3?n+1:3;return[`${"`".repeat(o)}${i}`,t,`${"`".repeat(o)}`].join(`\n`)}(i,t)}\n`,this}appendLink(t,i,e){return this.value+="[",this.value+=this._escape(i,"]"),this.value+="](",this.value+=this._escape(String(t),")"),e&&(this.value+=` "${this._escape(this._escape(e,'"'),")")}"`),this.value+=")",this}_escape(t,i){const e=new RegExp(Xn(i),"g");return t.replace(e,((i,e)=>t.charAt(e-1)!=="\\"?`\\${i}`:i))}}function TN(t){return NN(t)?!t.value:!Array.isArray(t)||t.every(TN)}function NN(t){return t instanceof RN||!(!t||typeof t!="object")&&!(typeof t.value!="string"||typeof t.isTrusted!="boolean"&&typeof t.isTrusted!="object"&&t.isTrusted!==void 0||typeof t.supportThemeIcons!="boolean"&&t.supportThemeIcons!==void 0)}function QN(t){return t.replace(/"/g,"&quot;")}function ON(t){return t&&t.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}class zN{constructor(t){this._prefix=t,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const UN=new zN("id#");let HN={};(function(){function t(t,i){i(HN)}var i,e;t.amd=!0,i=this,e=function(t){function i(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function e(t,i){(i==null||i>t.length)&&(i=t.length);for(var e=0,s=new Array(i);e<i;e++)s[e]=t[e];return s}function s(t,i){var s=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s)return(s=s.call(t)).next.bind(s);if(Array.isArray(t)||(s=function(t,i){if(t){if(typeof t=="string")return e(t,i);var s=Object.prototype.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?e(t,i):void 0}}(t))||i&&t&&typeof t.length=="number"){s&&(t=s);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}t.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var o=/[&<>"']/,r=/[&<>"']/g,h=/[<>"']|&(?!#?\w+;)/,c=/[<>"']|&(?!#?\w+;)/g,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=function(t){return a[t]};function u(t,i){if(i){if(o.test(t))return t.replace(r,l)}else if(h.test(t))return t.replace(c,l);return t}var d=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function f(t){return t.replace(d,(function(t,i){return(i=i.toLowerCase())==="colon"?":":i.charAt(0)==="#"?i.charAt(1)==="x"?String.fromCharCode(parseInt(i.substring(2),16)):String.fromCharCode(+i.substring(1)):""}))}var g=/(^|[^\[])\^/g;function A(t,i){t=typeof t=="string"?t:t.source,i=i||"";var e={replace:function(i,s){return s=(s=s.source||s).replace(g,"$1"),t=t.replace(i,s),e},getRegex:function(){return new RegExp(t,i)}};return e}var p=/[^\w:]/g,w=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function m(t,i,e){if(t){var s;try{s=decodeURIComponent(f(e)).replace(p,"").toLowerCase()}catch{return null}if(s.indexOf("javascript:")===0||s.indexOf("vbscript:")===0||s.indexOf("data:")===0)return null}i&&!w.test(e)&&(e=function(t,i){v[" "+t]||(b.test(t)?v[" "+t]=t+"/":v[" "+t]=B(t,"/",!0));var e=(t=v[" "+t]).indexOf(":")===-1;return i.substring(0,2)==="//"?e?i:t.replace(y,"$1")+i:i.charAt(0)==="/"?e?i:t.replace(k,"$1")+i:t+i}(i,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var v={},b=/^[^:]+:\/*[^/]*$/,y=/^([^:]+:)[\s\S]*$/,k=/^([^:]+:\/*[^/]*)[\s\S]*$/,x={exec:function(){}};function C(t){for(var i,e,s=1;s<arguments.length;s++)for(e in i=arguments[s])Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e]);return t}function E(t,i){var e=t.replace(/\|/g,(function(t,i,e){for(var s=!1,n=i;--n>=0&&e[n]==="\\";)s=!s;return s?"|":" |"})).split(/ \|/),s=0;if(e[0].trim()||e.shift(),e.length>0&&!e[e.length-1].trim()&&e.pop(),e.length>i)e.splice(i);else for(;e.length<i;)e.push("");for(;s<e.length;s++)e[s]=e[s].trim().replace(/\\\|/g,"|");return e}function B(t,i,e){var s=t.length;if(s===0)return"";for(var n=0;n<s;){var o=t.charAt(s-n-1);if(o!==i||e){if(o===i||!e)break;n++}else n++}return t.slice(0,s-n)}function D(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function M(t,i){if(i<1)return"";for(var e="";i>1;)1&i&&(e+=t),i>>=1,t+=t;return e+t}function S(t,i,e,s){var n=i.href,o=i.title?u(i.title):null,r=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){s.state.inLink=!0;var h={type:"link",raw:e,href:n,title:o,text:r,tokens:s.inlineTokens(r)};return s.state.inLink=!1,h}return{type:"image",raw:e,href:n,title:o,text:u(r)}}var F=function(){function i(i){this.options=i||t.defaults}var e=i.prototype;return e.space=function(t){var i=this.rules.block.newline.exec(t);if(i&&i[0].length>0)return{type:"space",raw:i[0]}},e.code=function(t){var i=this.rules.block.code.exec(t);if(i){var e=i[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?e:B(e,`\n`)}}},e.fences=function(t){var i=this.rules.block.fences.exec(t);if(i){var e=i[0],s=function(t,i){var e=t.match(/^(\s+)(?:```)/);if(e===null)return i;var s=e[1];return i.split(`\n`).map((function(t){var i=t.match(/^\s+/);return i===null?t:i[0].length>=s.length?t.slice(s.length):t})).join(`\n`)}(e,i[3]||"");return{type:"code",raw:e,lang:i[2]?i[2].trim():i[2],text:s}}},e.heading=function(t){var i=this.rules.block.heading.exec(t);if(i){var e=i[2].trim();if(/#$/.test(e)){var s=B(e,"#");this.options.pedantic?e=s.trim():s&&!/ $/.test(s)||(e=s.trim())}return{type:"heading",raw:i[0],depth:i[1].length,text:e,tokens:this.lexer.inline(e)}}},e.hr=function(t){var i=this.rules.block.hr.exec(t);if(i)return{type:"hr",raw:i[0]}},e.blockquote=function(t){var i=this.rules.block.blockquote.exec(t);if(i){var e=i[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:i[0],tokens:this.lexer.blockTokens(e,[]),text:e}}},e.list=function(t){var i=this.rules.block.list.exec(t);if(i){var e,n,o,r,h,c,a,l,u,d,f,g,A=i[1].trim(),p=A.length>1,w={type:"list",raw:"",ordered:p,start:p?+A.slice(0,-1):"",loose:!1,items:[]};A=p?"\\d{1,9}\\"+A.slice(-1):"\\"+A,this.options.pedantic&&(A=p?A:"[*+-]");for(var m=new RegExp("^( {0,3}"+A+")((?:[\t ][^\\n]*)?(?:\\n|$))");t&&(g=!1,i=m.exec(t))&&!this.rules.block.hr.test(t);){if(e=i[0],t=t.substring(e.length),l=i[2].split(`\n`,1)[0],u=t.split(`\n`,1)[0],this.options.pedantic?(r=2,f=l.trimLeft()):(r=(r=i[2].search(/[^ ]/))>4?1:r,f=l.slice(r),r+=i[1].length),c=!1,!l&&/^ *$/.test(u)&&(e+=u+`\n`,t=t.substring(u.length+1),g=!0),!g)for(var v=new RegExp("^ {0,"+Math.min(3,r-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),b=new RegExp("^ {0,"+Math.min(3,r-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),y=new RegExp("^ {0,"+Math.min(3,r-1)+"}(?:```|~~~)"),k=new RegExp("^ {0,"+Math.min(3,r-1)+"}#");t&&(l=d=t.split(`\n`,1)[0],this.options.pedantic&&(l=l.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!y.test(l))&&!k.test(l)&&!v.test(l)&&!b.test(t);){if(l.search(/[^ ]/)>=r||!l.trim())f+=`\n`+l.slice(r);else{if(c)break;f+=`\n`+l}c||l.trim()||(c=!0),e+=d+`\n`,t=t.substring(d.length+1)}w.loose||(a?w.loose=!0:/\n *\n *$/.test(e)&&(a=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(f))&&(o=n[0]!=="[ ] ",f=f.replace(/^\[[ xX]\] +/,"")),w.items.push({type:"list_item",raw:e,task:!!n,checked:o,loose:!1,text:f}),w.raw+=e}w.items[w.items.length-1].raw=e.trimRight(),w.items[w.items.length-1].text=f.trimRight(),w.raw=w.raw.trimRight();var x=w.items.length;for(h=0;h<x;h++){this.lexer.state.top=!1,w.items[h].tokens=this.lexer.blockTokens(w.items[h].text,[]);var C=w.items[h].tokens.filter((function(t){return t.type==="space"})),E=C.every((function(t){for(var i,e=0,n=s(t.raw.split(""));!(i=n()).done;)if(i.value===`\n`&&(e+=1),e>1)return!0;return!1}));!w.loose&&C.length&&E&&(w.loose=!0,w.items[h].loose=!0)}return w}},e.html=function(t){var i=this.rules.block.html.exec(t);if(i){var e={type:"html",raw:i[0],pre:!this.options.sanitizer&&(i[1]==="pre"||i[1]==="script"||i[1]==="style"),text:i[0]};if(this.options.sanitize){var s=this.options.sanitizer?this.options.sanitizer(i[0]):u(i[0]);e.type="paragraph",e.text=s,e.tokens=this.lexer.inline(s)}return e}},e.def=function(t){var i=this.rules.block.def.exec(t);if(i)return i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),{type:"def",tag:i[1].toLowerCase().replace(/\s+/g," "),raw:i[0],href:i[2],title:i[3]}},e.table=function(t){var i=this.rules.block.table.exec(t);if(i){var e={type:"table",header:E(i[1]).map((function(t){return{text:t}})),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:i[3]&&i[3].trim()?i[3].replace(/\n[ \t]*$/,"").split(`\n`):[]};if(e.header.length===e.align.length){e.raw=i[0];var s,n,o,r,h=e.align.length;for(s=0;s<h;s++)/^ *-+: *$/.test(e.align[s])?e.align[s]="right":/^ *:-+: *$/.test(e.align[s])?e.align[s]="center":/^ *:-+ *$/.test(e.align[s])?e.align[s]="left":e.align[s]=null;for(h=e.rows.length,s=0;s<h;s++)e.rows[s]=E(e.rows[s],e.header.length).map((function(t){return{text:t}}));for(h=e.header.length,n=0;n<h;n++)e.header[n].tokens=this.lexer.inline(e.header[n].text);for(h=e.rows.length,n=0;n<h;n++)for(r=e.rows[n],o=0;o<r.length;o++)r[o].tokens=this.lexer.inline(r[o].text);return e}}},e.lheading=function(t){var i=this.rules.block.lheading.exec(t);if(i)return{type:"heading",raw:i[0],depth:i[2].charAt(0)==="="?1:2,text:i[1],tokens:this.lexer.inline(i[1])}},e.paragraph=function(t){var i=this.rules.block.paragraph.exec(t);if(i){var e=i[1].charAt(i[1].length-1)===`\n`?i[1].slice(0,-1):i[1];return{type:"paragraph",raw:i[0],text:e,tokens:this.lexer.inline(e)}}},e.text=function(t){var i=this.rules.block.text.exec(t);if(i)return{type:"text",raw:i[0],text:i[0],tokens:this.lexer.inline(i[0])}},e.escape=function(t){var i=this.rules.inline.escape.exec(t);if(i)return{type:"escape",raw:i[0],text:u(i[1])}},e.tag=function(t){var i=this.rules.inline.tag.exec(t);if(i)return!this.lexer.state.inLink&&/^<a /i.test(i[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(i[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:i[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):u(i[0]):i[0]}},e.link=function(t){var i=this.rules.inline.link.exec(t);if(i){var e=i[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;var s=B(e.slice(0,-1),"\\");if((e.length-s.length)%2==0)return}else{var n=function(t,i){if(t.indexOf(i[1])===-1)return-1;for(var e=t.length,s=0,n=0;n<e;n++)if(t[n]==="\\")n++;else if(t[n]===i[0])s++;else if(t[n]===i[1]&&--s<0)return n;return-1}(i[2],"()");if(n>-1){var o=(i[0].indexOf("!")===0?5:4)+i[1].length+n;i[2]=i[2].substring(0,n),i[0]=i[0].substring(0,o).trim(),i[3]=""}}var r=i[2],h="";if(this.options.pedantic){var c=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);c&&(r=c[1],h=c[3])}else h=i[3]?i[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(e)?r.slice(1):r.slice(1,-1)),S(i,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:h&&h.replace(this.rules.inline._escapes,"$1")},i[0],this.lexer)}},e.reflink=function(t,i){var e;if((e=this.rules.inline.reflink.exec(t))||(e=this.rules.inline.nolink.exec(t))){var s=(e[2]||e[1]).replace(/\s+/g," ");if(!(s=i[s.toLowerCase()])||!s.href){var n=e[0].charAt(0);return{type:"text",raw:n,text:n}}return S(e,s,e[0],this.lexer)}},e.emStrong=function(t,i,e){e===void 0&&(e="");var s=this.rules.inline.emStrong.lDelim.exec(t);if(s&&(!s[3]||!e.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var n=s[1]||s[2]||"";if(!n||n&&(e===""||this.rules.inline.punctuation.exec(e))){var o,r,h=s[0].length-1,c=h,a=0,l=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,i=i.slice(-1*t.length+h);(s=l.exec(i))!=null;)if(o=s[1]||s[2]||s[3]||s[4]||s[5]||s[6])if(r=o.length,s[3]||s[4])c+=r;else if(!((s[5]||s[6])&&h%3)||(h+r)%3){if(!((c-=r)>0)){if(r=Math.min(r,r+c+a),Math.min(h,r)%2){var u=t.slice(1,h+s.index+r);return{type:"em",raw:t.slice(0,h+s.index+r+1),text:u,tokens:this.lexer.inlineTokens(u)}}var d=t.slice(2,h+s.index+r-1);return{type:"strong",raw:t.slice(0,h+s.index+r+1),text:d,tokens:this.lexer.inlineTokens(d)}}}else a+=r}}},e.codespan=function(t){var i=this.rules.inline.code.exec(t);if(i){var e=i[2].replace(/\n/g," "),s=/[^ ]/.test(e),n=/^ /.test(e)&&/ $/.test(e);return s&&n&&(e=e.substring(1,e.length-1)),e=u(e,!0),{type:"codespan",raw:i[0],text:e}}},e.br=function(t){var i=this.rules.inline.br.exec(t);if(i)return{type:"br",raw:i[0]}},e.del=function(t){var i=this.rules.inline.del.exec(t);if(i)return{type:"del",raw:i[0],text:i[2],tokens:this.lexer.inlineTokens(i[2])}},e.autolink=function(t,i){var e,s,n=this.rules.inline.autolink.exec(t);if(n)return s=n[2]==="@"?"mailto:"+(e=u(this.options.mangle?i(n[1]):n[1])):e=u(n[1]),{type:"link",raw:n[0],text:e,href:s,tokens:[{type:"text",raw:e,text:e}]}},e.url=function(t,i){var e;if(e=this.rules.inline.url.exec(t)){var s,n;if(e[2]==="@")n="mailto:"+(s=u(this.options.mangle?i(e[0]):e[0]));else{var o;do{o=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])[0]}while(o!==e[0]);s=u(e[0]),n=e[1]==="www."?"http://"+s:s}return{type:"link",raw:e[0],text:s,href:n,tokens:[{type:"text",raw:s,text:s}]}}},e.inlineText=function(t,i){var e,s=this.rules.inline.text.exec(t);if(s)return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):u(s[0]):s[0]:u(this.options.smartypants?i(s[0]):s[0]),{type:"text",raw:s[0],text:e}},i}(),I={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:x,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};I.def=A(I.def).replace("label",I._label).replace("title",I._title).getRegex(),I.bullet=/(?:[*+-]|\d{1,9}[.)])/,I.listItemStart=A(/^( *)(bull) */).replace("bull",I.bullet).getRegex(),I.list=A(I.list).replace(/bull/g,I.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+I.def.source+")").getRegex(),I._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",I._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,I.html=A(I.html,"i").replace("comment",I._comment).replace("tag",I._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),I.paragraph=A(I._paragraph).replace("hr",I.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",I._tag).getRegex(),I.blockquote=A(I.blockquote).replace("paragraph",I.paragraph).getRegex(),I.normal=C({},I),I.gfm=C({},I.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),I.gfm.table=A(I.gfm.table).replace("hr",I.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",I._tag).getRegex(),I.gfm.paragraph=A(I._paragraph).replace("hr",I.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",I.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",I._tag).getRegex(),I.pedantic=C({},I.normal,{html:A(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",I._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:x,paragraph:A(I.normal._paragraph).replace("hr",I.hr).replace("heading",` *#{1,6} *[^\n]`).replace("lheading",I.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var L={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:x,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:x,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function R(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function T(t){var i,e,s="",n=t.length;for(i=0;i<n;i++)e=t.charCodeAt(i),Math.random()>.5&&(e="x"+e.toString(16)),s+="&#"+e+";";return s}L._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",L.punctuation=A(L.punctuation).replace(/punctuation/g,L._punctuation).getRegex(),L.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,L.escapedEmSt=/\\\*|\\_/g,L._comment=A(I._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),L.emStrong.lDelim=A(L.emStrong.lDelim).replace(/punct/g,L._punctuation).getRegex(),L.emStrong.rDelimAst=A(L.emStrong.rDelimAst,"g").replace(/punct/g,L._punctuation).getRegex(),L.emStrong.rDelimUnd=A(L.emStrong.rDelimUnd,"g").replace(/punct/g,L._punctuation).getRegex(),L._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,L._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,L._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,L.autolink=A(L.autolink).replace("scheme",L._scheme).replace("email",L._email).getRegex(),L._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,L.tag=A(L.tag).replace("comment",L._comment).replace("attribute",L._attribute).getRegex(),L._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,L._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,L._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,L.link=A(L.link).replace("label",L._label).replace("href",L._href).replace("title",L._title).getRegex(),L.reflink=A(L.reflink).replace("label",L._label).replace("ref",I._label).getRegex(),L.nolink=A(L.nolink).replace("ref",I._label).getRegex(),L.reflinkSearch=A(L.reflinkSearch,"g").replace("reflink",L.reflink).replace("nolink",L.nolink).getRegex(),L.normal=C({},L),L.pedantic=C({},L.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:A(/^!?\[(label)\]\((.*?)\)/).replace("label",L._label).getRegex(),reflink:A(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",L._label).getRegex()}),L.gfm=C({},L.normal,{escape:A(L.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),L.gfm.url=A(L.gfm.url,"i").replace("email",L.gfm._extended_email).getRegex(),L.breaks=C({},L.gfm,{br:A(L.br).replace("{2,}","*").getRegex(),text:A(L.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var N=function(){function e(i){this.tokens=[],this.tokens.links=Object.create(null),this.options=i||t.defaults,this.options.tokenizer=this.options.tokenizer||new F,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var e={block:I.normal,inline:L.normal};this.options.pedantic?(e.block=I.pedantic,e.inline=L.pedantic):this.options.gfm&&(e.block=I.gfm,this.options.breaks?e.inline=L.breaks:e.inline=L.gfm),this.tokenizer.rules=e}e.lex=function(t,i){return new e(i).lex(t)},e.lexInline=function(t,i){return new e(i).inlineTokens(t)};var s,n,o,r=e.prototype;return r.lex=function(t){var i;for(t=t.replace(/\r\n|\r/g,`\n`),this.blockTokens(t,this.tokens);i=this.inlineQueue.shift();)this.inlineTokens(i.src,i.tokens);return this.tokens},r.blockTokens=function(t,i){var e,s,n,o,r=this;for(i===void 0&&(i=[]),t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,(function(t,i,e){return i+"    ".repeat(e.length)}));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(s){return!!(e=s.call({lexer:r},t,i))&&(t=t.substring(e.raw.length),i.push(e),!0)})))){if(e=this.tokenizer.space(t))t=t.substring(e.raw.length),e.raw.length===1&&i.length>0?i[i.length-1].raw+=`\n`:i.push(e);else if(e=this.tokenizer.code(t))t=t.substring(e.raw.length),!(s=i[i.length-1])||s.type!=="paragraph"&&s.type!=="text"?i.push(e):(s.raw+=`\n`+e.raw,s.text+=`\n`+e.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(e=this.tokenizer.fences(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.heading(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.hr(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.blockquote(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.list(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.html(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.def(t))t=t.substring(e.raw.length),!(s=i[i.length-1])||s.type!=="paragraph"&&s.type!=="text"?this.tokens.links[e.tag]||(this.tokens.links[e.tag]={href:e.href,title:e.title}):(s.raw+=`\n`+e.raw,s.text+=`\n`+e.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(e=this.tokenizer.table(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.lheading(t))t=t.substring(e.raw.length),i.push(e);else if(n=t,this.options.extensions&&this.options.extensions.startBlock&&function(){var i=1/0,e=t.slice(1),s=void 0;r.options.extensions.startBlock.forEach((function(t){typeof(s=t.call({lexer:this},e))=="number"&&s>=0&&(i=Math.min(i,s))})),i<1/0&&i>=0&&(n=t.substring(0,i+1))}(),this.state.top&&(e=this.tokenizer.paragraph(n)))s=i[i.length-1],o&&s.type==="paragraph"?(s.raw+=`\n`+e.raw,s.text+=`\n`+e.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):i.push(e),o=n.length!==t.length,t=t.substring(e.raw.length);else if(e=this.tokenizer.text(t))t=t.substring(e.raw.length),(s=i[i.length-1])&&s.type==="text"?(s.raw+=`\n`+e.raw,s.text+=`\n`+e.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):i.push(e);else if(t){var h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}throw new Error(h)}}return this.state.top=!0,i},r.inline=function(t,i){return i===void 0&&(i=[]),this.inlineQueue.push({src:t,tokens:i}),i},r.inlineTokens=function(t,i){var e,s,n,o=this;i===void 0&&(i=[]);var r,h,c,a=t;if(this.tokens.links){var l=Object.keys(this.tokens.links);if(l.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)l.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,r.index)+"["+M("a",r[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,r.index)+"["+M("a",r[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(r=this.tokenizer.rules.inline.escapedEmSt.exec(a))!=null;)a=a.slice(0,r.index)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(h||(c=""),h=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(s){return!!(e=s.call({lexer:o},t,i))&&(t=t.substring(e.raw.length),i.push(e),!0)}))))if(e=this.tokenizer.escape(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.tag(t))t=t.substring(e.raw.length),(s=i[i.length-1])&&e.type==="text"&&s.type==="text"?(s.raw+=e.raw,s.text+=e.text):i.push(e);else if(e=this.tokenizer.link(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(e.raw.length),(s=i[i.length-1])&&e.type==="text"&&s.type==="text"?(s.raw+=e.raw,s.text+=e.text):i.push(e);else if(e=this.tokenizer.emStrong(t,a,c))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.codespan(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.br(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.del(t))t=t.substring(e.raw.length),i.push(e);else if(e=this.tokenizer.autolink(t,T))t=t.substring(e.raw.length),i.push(e);else if(this.state.inLink||!(e=this.tokenizer.url(t,T))){if(n=t,this.options.extensions&&this.options.extensions.startInline&&function(){var i=1/0,e=t.slice(1),s=void 0;o.options.extensions.startInline.forEach((function(t){typeof(s=t.call({lexer:this},e))=="number"&&s>=0&&(i=Math.min(i,s))})),i<1/0&&i>=0&&(n=t.substring(0,i+1))}(),e=this.tokenizer.inlineText(n,R))t=t.substring(e.raw.length),e.raw.slice(-1)!=="_"&&(c=e.raw.slice(-1)),h=!0,(s=i[i.length-1])&&s.type==="text"?(s.raw+=e.raw,s.text+=e.text):i.push(e);else if(t){var u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}else t=t.substring(e.raw.length),i.push(e);return i},s=e,o=[{key:"rules",get:function(){return{block:I,inline:L}}}],(n=null)&&i(s.prototype,n),o&&i(s,o),Object.defineProperty(s,"prototype",{writable:!1}),e}(),Q=function(){function i(i){this.options=i||t.defaults}var e=i.prototype;return e.code=function(t,i,e){var s=(i||"").match(/\S*/)[0];if(this.options.highlight){var n=this.options.highlight(t,s);n!=null&&n!==t&&(e=!0,t=n)}return t=t.replace(/\n$/,"")+`\n`,s?'<pre><code class="'+this.options.langPrefix+u(s,!0)+'">'+(e?t:u(t,!0))+`</code></pre>\n`:"<pre><code>"+(e?t:u(t,!0))+`</code></pre>\n`},e.blockquote=function(t){return`<blockquote>\n`+t+`</blockquote>\n`},e.html=function(t){return t},e.heading=function(t,i,e,s){return this.options.headerIds?"<h"+i+' id="'+(this.options.headerPrefix+s.slug(e))+'">'+t+"</h"+i+`>\n`:"<h"+i+">"+t+"</h"+i+`>\n`},e.hr=function(){return this.options.xhtml?`<hr/>\n`:`<hr>\n`},e.list=function(t,i,e){var s=i?"ol":"ul";return"<"+s+(i&&e!==1?' start="'+e+'"':"")+`>\n`+t+"</"+s+`>\n`},e.listitem=function(t){return"<li>"+t+`</li>\n`},e.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},e.paragraph=function(t){return"<p>"+t+`</p>\n`},e.table=function(t,i){return i&&(i="<tbody>"+i+"</tbody>"),`<table>\n<thead>\n`+t+`</thead>\n`+i+`</table>\n`},e.tablerow=function(t){return`<tr>\n`+t+`</tr>\n`},e.tablecell=function(t,i){var e=i.header?"th":"td";return(i.align?"<"+e+' align="'+i.align+'">':"<"+e+">")+t+"</"+e+`>\n`},e.strong=function(t){return"<strong>"+t+"</strong>"},e.em=function(t){return"<em>"+t+"</em>"},e.codespan=function(t){return"<code>"+t+"</code>"},e.br=function(){return this.options.xhtml?"<br/>":"<br>"},e.del=function(t){return"<del>"+t+"</del>"},e.link=function(t,i,e){if((t=m(this.options.sanitize,this.options.baseUrl,t))===null)return e;var s='<a href="'+u(t)+'"';return i&&(s+=' title="'+i+'"'),s+=">"+e+"</a>"},e.image=function(t,i,e){if((t=m(this.options.sanitize,this.options.baseUrl,t))===null)return e;var s='<img src="'+t+'" alt="'+e+'"';return i&&(s+=' title="'+i+'"'),s+=this.options.xhtml?"/>":">"},e.text=function(t){return t},i}(),O=function(){function t(){}var i=t.prototype;return i.strong=function(t){return t},i.em=function(t){return t},i.codespan=function(t){return t},i.del=function(t){return t},i.html=function(t){return t},i.text=function(t){return t},i.link=function(t,i,e){return""+e},i.image=function(t,i,e){return""+e},i.br=function(){return""},t}(),z=function(){function t(){this.seen={}}var i=t.prototype;return i.serialize=function(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},i.getNextSafeSlug=function(t,i){var e=t,s=0;if(this.seen.hasOwnProperty(e)){s=this.seen[t];do{e=t+"-"+ ++s}while(this.seen.hasOwnProperty(e))}return i||(this.seen[t]=s,this.seen[e]=0),e},i.slug=function(t,i){i===void 0&&(i={});var e=this.serialize(t);return this.getNextSafeSlug(e,i.dryrun)},t}(),U=function(){function i(i){this.options=i||t.defaults,this.options.renderer=this.options.renderer||new Q,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new O,this.slugger=new z}i.parse=function(t,e){return new i(e).parse(t)},i.parseInline=function(t,e){return new i(e).parseInline(t)};var e=i.prototype;return e.parse=function(t,i){i===void 0&&(i=!0);var e,s,n,o,r,h,c,a,l,u,d,g,A,p,w,m,v,b,y,k="",x=t.length;for(e=0;e<x;e++)if(u=t[e],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type])||(y=this.options.extensions.renderers[u.type].call({parser:this},u))===!1&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type))switch(u.type){case"space":continue;case"hr":k+=this.renderer.hr();continue;case"heading":k+=this.renderer.heading(this.parseInline(u.tokens),u.depth,f(this.parseInline(u.tokens,this.textRenderer)),this.slugger);continue;case"code":k+=this.renderer.code(u.text,u.lang,u.escaped);continue;case"table":for(a="",c="",o=u.header.length,s=0;s<o;s++)c+=this.renderer.tablecell(this.parseInline(u.header[s].tokens),{header:!0,align:u.align[s]});for(a+=this.renderer.tablerow(c),l="",o=u.rows.length,s=0;s<o;s++){for(c="",r=(h=u.rows[s]).length,n=0;n<r;n++)c+=this.renderer.tablecell(this.parseInline(h[n].tokens),{header:!1,align:u.align[n]});l+=this.renderer.tablerow(c)}k+=this.renderer.table(a,l);continue;case"blockquote":l=this.parse(u.tokens),k+=this.renderer.blockquote(l);continue;case"list":for(d=u.ordered,g=u.start,A=u.loose,o=u.items.length,l="",s=0;s<o;s++)m=(w=u.items[s]).checked,v=w.task,p="",w.task&&(b=this.renderer.checkbox(m),A?w.tokens.length>0&&w.tokens[0].type==="paragraph"?(w.tokens[0].text=b+" "+w.tokens[0].text,w.tokens[0].tokens&&w.tokens[0].tokens.length>0&&w.tokens[0].tokens[0].type==="text"&&(w.tokens[0].tokens[0].text=b+" "+w.tokens[0].tokens[0].text)):w.tokens.unshift({type:"text",text:b}):p+=b),p+=this.parse(w.tokens,A),l+=this.renderer.listitem(p,v,m);k+=this.renderer.list(l,d,g);continue;case"html":k+=this.renderer.html(u.text);continue;case"paragraph":k+=this.renderer.paragraph(this.parseInline(u.tokens));continue;case"text":for(l=u.tokens?this.parseInline(u.tokens):u.text;e+1<x&&t[e+1].type==="text";)l+=`\n`+((u=t[++e]).tokens?this.parseInline(u.tokens):u.text);k+=i?this.renderer.paragraph(l):l;continue;default:var C='Token with "'+u.type+'" type was not found.';if(this.options.silent)return void console.error(C);throw new Error(C)}else k+=y||"";return k},e.parseInline=function(t,i){i=i||this.renderer;var e,s,n,o="",r=t.length;for(e=0;e<r;e++)if(s=t[e],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type])||(n=this.options.extensions.renderers[s.type].call({parser:this},s))===!1&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))switch(s.type){case"escape":case"text":o+=i.text(s.text);break;case"html":o+=i.html(s.text);break;case"link":o+=i.link(s.href,s.title,this.parseInline(s.tokens,i));break;case"image":o+=i.image(s.href,s.title,s.text);break;case"strong":o+=i.strong(this.parseInline(s.tokens,i));break;case"em":o+=i.em(this.parseInline(s.tokens,i));break;case"codespan":o+=i.codespan(s.text);break;case"br":o+=i.br();break;case"del":o+=i.del(this.parseInline(s.tokens,i));break;default:var h='Token with "'+s.type+'" type was not found.';if(this.options.silent)return void console.error(h);throw new Error(h)}else o+=n||"";return o},i}();function H(t,i,e){if(t==null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof i=="function"&&(e=i,i=null),D(i=C({},H.defaults,i||{})),e){var s,n=i.highlight;try{s=N.lex(t,i)}catch(t){return e(t)}var o=function(t){var o;if(!t)try{i.walkTokens&&H.walkTokens(s,i.walkTokens),o=U.parse(s,i)}catch(i){t=i}return i.highlight=n,t?e(t):e(null,o)};if(!n||n.length<3||(delete i.highlight,!s.length))return o();var r=0;return H.walkTokens(s,(function(t){t.type==="code"&&(r++,setTimeout((function(){n(t.text,t.lang,(function(i,e){if(i)return o(i);e!=null&&e!==t.text&&(t.text=e,t.escaped=!0),--r==0&&o()}))}),0))})),void(r===0&&o())}function h(t){if(t.message+=`\nPlease report this to https://github.com/markedjs/marked.`,i.silent)return"<p>An error occurred:</p><pre>"+u(t.message+"",!0)+"</pre>";throw t}try{var c=N.lex(t,i);if(i.walkTokens){if(i.async)return Promise.all(H.walkTokens(c,i.walkTokens)).then((function(){return U.parse(c,i)})).catch(h);H.walkTokens(c,i.walkTokens)}return U.parse(c,i)}catch(t){h(t)}}H.options=H.setOptions=function(i){var e;return C(H.defaults,i),e=H.defaults,t.defaults=e,H},H.getDefaults=n,H.defaults=t.defaults,H.use=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];var s,n=C.apply(void 0,[{}].concat(i)),o=H.defaults.extensions||{renderers:{},childTokens:{}};i.forEach((function(t){if(t.extensions&&(s=!0,t.extensions.forEach((function(t){if(!t.name)throw new Error("extension name required");if(t.renderer){var i=o.renderers?o.renderers[t.name]:null;o.renderers[t.name]=i?function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];var o=t.renderer.apply(this,s);return o===!1&&(o=i.apply(this,s)),o}:t.renderer}if(t.tokenizer){if(!t.level||t.level!=="block"&&t.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");o[t.level]?o[t.level].unshift(t.tokenizer):o[t.level]=[t.tokenizer],t.start&&(t.level==="block"?o.startBlock?o.startBlock.push(t.start):o.startBlock=[t.start]:t.level==="inline"&&(o.startInline?o.startInline.push(t.start):o.startInline=[t.start]))}t.childTokens&&(o.childTokens[t.name]=t.childTokens)}))),t.renderer&&function(){var i=H.defaults.renderer||new Q,e=function(e){var s=i[e];i[e]=function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];var h=t.renderer[e].apply(i,o);return h===!1&&(h=s.apply(i,o)),h}};for(var s in t.renderer)e(s);n.renderer=i}(),t.tokenizer&&function(){var i=H.defaults.tokenizer||new F,e=function(e){var s=i[e];i[e]=function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];var h=t.tokenizer[e].apply(i,o);return h===!1&&(h=s.apply(i,o)),h}};for(var s in t.tokenizer)e(s);n.tokenizer=i}(),t.walkTokens){var i=H.defaults.walkTokens;n.walkTokens=function(e){var s=[];return s.push(t.walkTokens.call(this,e)),i&&(s=s.concat(i.call(this,e))),s}}s&&(n.extensions=o),H.setOptions(n)}))},H.walkTokens=function(t,i){for(var e,n=[],o=function(){var t=e.value;switch(n=n.concat(i.call(H,t)),t.type){case"table":for(var o,r=s(t.header);!(o=r()).done;){var h=o.value;n=n.concat(H.walkTokens(h.tokens,i))}for(var c,a=s(t.rows);!(c=a()).done;)for(var l,u=s(c.value);!(l=u()).done;){var d=l.value;n=n.concat(H.walkTokens(d.tokens,i))}break;case"list":n=n.concat(H.walkTokens(t.items,i));break;default:H.defaults.extensions&&H.defaults.extensions.childTokens&&H.defaults.extensions.childTokens[t.type]?H.defaults.extensions.childTokens[t.type].forEach((function(e){n=n.concat(H.walkTokens(t[e],i))})):t.tokens&&(n=n.concat(H.walkTokens(t.tokens,i)))}},r=s(t);!(e=r()).done;)o();return n},H.parseInline=function(t,i){if(t==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");D(i=C({},H.defaults,i||{}));try{var e=N.lexInline(t,i);return i.walkTokens&&H.walkTokens(e,i.walkTokens),U.parseInline(e,i)}catch(t){if(t.message+=`\nPlease report this to https://github.com/markedjs/marked.`,i.silent)return"<p>An error occurred:</p><pre>"+u(t.message+"",!0)+"</pre>";throw t}},H.Parser=U,H.parser=U.parse,H.Renderer=Q,H.TextRenderer=O,H.Lexer=N,H.lexer=N.lex,H.Tokenizer=F,H.Slugger=z,H.parse=H;var P=H.options,j=H.setOptions,W=H.use,Y=H.walkTokens,_=H.parseInline,V=H,J=U.parse,G=N.lex;t.Lexer=N,t.Parser=U,t.Renderer=Q,t.Slugger=z,t.TextRenderer=O,t.Tokenizer=F,t.getDefaults=n,t.lexer=G,t.marked=H,t.options=P,t.parse=V,t.parseInline=_,t.parser=J,t.setOptions=j,t.use=W,t.walkTokens=Y,Object.defineProperty(t,"__esModule",{value:!0})},t.amd?t(0,e):e(typeof exports=="object"&&typeof module<"u"?exports:(i=typeof globalThis<"u"?globalThis:i||self).marked={})})(),HN.Lexer||exports.Lexer,HN.Parser||exports.Parser,HN.Renderer||exports.Renderer,HN.Slugger||exports.Slugger,HN.TextRenderer||exports.TextRenderer,HN.Tokenizer||exports.Tokenizer,HN.getDefaults||exports.getDefaults,HN.lexer||exports.lexer;var PN=HN.marked||exports.marked;function jN(t){let i=JSON.parse(t);return i=YN(i),i}function WN(t,i){return i instanceof RegExp?{$mid:2,source:i.source,flags:i.flags}:i}function YN(t,i=0){if(!t||i>200)return t;if(typeof t=="object"){switch(t.$mid){case 1:return fs.revive(t);case 2:return new RegExp(t.source,t.flags);case 17:return new Date(t.source)}if(t instanceof hd||t instanceof Uint8Array)return t;if(Array.isArray(t))for(let e=0;e<t.length;++e)t[e]=YN(t[e],i+1);else for(const e in t)Object.hasOwnProperty.call(t,e)&&(t[e]=YN(t[e],i+1))}return t}HN.options||exports.options,HN.parse||exports.parse,HN.parseInline||exports.parseInline,HN.parser||exports.parser,HN.setOptions||exports.setOptions,HN.use||exports.use,HN.walkTokens||exports.walkTokens;const _N=Object.freeze({image:(t,i,e)=>{let s=[],n=[];return t&&(({href:t,dimensions:s}=function(t){const i=[],e=t.split("|").map((t=>t.trim()));t=e[0];const s=e[1];if(s){const t=/height=(\d+)/.exec(s),e=/width=(\d+)/.exec(s),n=t?t[1]:"",o=e?e[1]:"",r=isFinite(parseInt(o)),h=isFinite(parseInt(n));r&&i.push(`width="${o}"`),h&&i.push(`height="${n}"`)}return{href:t,dimensions:i}}(t)),n.push(`src="${QN(t)}"`)),e&&n.push(`alt="${QN(e)}"`),i&&n.push(`title="${QN(i)}"`),s.length&&(n=n.concat(s)),"<img "+n.join(" ")+">"},paragraph:t=>`<p>${t}</p>`,link:(t,i,e)=>typeof t!="string"?"":(t===e&&(e=ON(e)),i=typeof i=="string"?QN(ON(i)):"",`<a href="${t=(t=ON(t)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" title="${i||t}" draggable="false">${e}</a>`)});function VN(t,i={},e={}){var s,n;const o=new Zi;let r=!1;const h=pT(i),c=function(i){let e;try{e=jN(decodeURIComponent(i))}catch{}return e?(e=$(e,(i=>t.uris&&t.uris[i]?fs.revive(t.uris[i]):void 0)),encodeURIComponent(JSON.stringify(e))):i},a=function(i,e){const s=t.uris&&t.uris[i];let n=fs.revive(s);return e?i.startsWith(Lh.data+":")?i:(n||(n=fs.parse(i)),Oh.uriToBrowserUri(n).toString(!0)):n?fs.parse(i).toString()===n.toString()?i:(n.query&&(n=n.with({query:c(n.query)})),n.toString()):i},l=new PN.Renderer;l.image=_N.image,l.link=_N.link,l.paragraph=_N.paragraph;const u=[],d=[];if(i.codeBlockRendererSync?l.code=(t,e)=>{const s=UN.nextId(),n=i.codeBlockRendererSync(JN(e),t);return d.push([s,n]),`<div class="code" data-code="${s}">${$n(t)}</div>`}:i.codeBlockRenderer&&(l.code=(t,e)=>{const s=UN.nextId(),n=i.codeBlockRenderer(JN(e),t);return u.push(n.then((t=>[s,t]))),`<div class="code" data-code="${s}">${$n(t)}</div>`}),i.actionHandler){const e=function(e){let s=e.target;if(s.tagName==="A"||(s=s.parentElement,s&&s.tagName==="A"))try{let n=s.dataset.href;n&&(t.baseUri&&(n=GN(fs.from(t.baseUri),n)),i.actionHandler.callback(n,e))}catch(t){Oi(t)}finally{e.preventDefault()}},s=i.actionHandler.disposables.add(new gk(h,"click")),n=i.actionHandler.disposables.add(new gk(h,"auxclick"));i.actionHandler.disposables.add(he.any(s.event,n.event)((t=>{const i=new ur(Gh(h),t);(i.leftButton||i.middleButton)&&e(i)}))),i.actionHandler.disposables.add(rc(h,"keydown",(t=>{const i=new hr(t);(i.equals(10)||i.equals(3))&&e(i)})))}t.supportHtml||(e.sanitizer=i=>t.isTrusted&&i.match(/^(<span[^>]+>)|(<\/\s*span>)$/)?i:"",e.sanitize=!0,e.silent=!0),e.renderer=l;let f,g=(s=t.value)!==null&&s!==void 0?s:"";if(g.length>1e5&&(g=`${g.substr(0,1e5)}…`),t.supportThemeIcons&&(g=function(t){return t.replace(DN,(t=>`\\${t}`))}(g)),i.fillInIncompleteTokens){const t={...PN.defaults,...e},i=function(t){let i,e;for(i=0;i<t.length;i++){const s=t[i];let n;if(s.type==="paragraph"&&(n=s.raw.match(/(\n|^)(````*)/))){const s=n[2];e=sQ(t.slice(i),s);break}if(s.type==="paragraph"&&s.raw.match(/(\n|^)\|/)){e=dQ(t.slice(i));break}if(i===t.length-1&&s.type==="paragraph"){const t=iQ(s);if(t){e=[t];break}}}if(e){const s=[...t.slice(0,i),...e];return s.links=t.links,s}return t}(PN.lexer(g,t));f=PN.parser(i,t)}else f=PN.parse(g,e);t.supportThemeIcons&&(f=kT(f).map((t=>typeof t=="string"?t:t.outerHTML)).join(""));const A=(new DOMParser).parseFromString(KN(t,f),"text/html");if(A.body.querySelectorAll("img").forEach((i=>{const e=i.getAttribute("src");if(e){let s=e;try{t.baseUri&&(s=GN(fs.from(t.baseUri),s))}catch{}i.src=a(s,!0)}})),A.body.querySelectorAll("a").forEach((i=>{const e=i.getAttribute("href");if(i.setAttribute("href",""),!e||/^data:|javascript:/i.test(e)||/^command:/i.test(e)&&!t.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(e))i.replaceWith(...i.childNodes);else{let s=a(e,!1);t.baseUri&&(s=GN(fs.from(t.baseUri),e)),i.dataset.href=s}})),h.innerHTML=KN(t,A.body.innerHTML),u.length>0)Promise.all(u).then((t=>{var e,s;if(r)return;const n=new Map(t),o=h.querySelectorAll("div[data-code]");for(const t of o){const i=n.get((e=t.dataset.code)!==null&&e!==void 0?e:"");i&&sa(t,i)}(s=i.asyncRenderCallback)===null||s===void 0||s.call(i)}));else if(d.length>0){const t=new Map(d),i=h.querySelectorAll("div[data-code]");for(const e of i){const i=t.get((n=e.dataset.code)!==null&&n!==void 0?n:"");i&&sa(e,i)}}if(i.asyncRenderCallback)for(const t of h.getElementsByTagName("img")){const e=o.add(rc(t,"load",(()=>{e.dispose(),i.asyncRenderCallback()})))}return{element:h,dispose:()=>{r=!0,o.dispose()}}}function JN(t){if(!t)return"";const i=t.split(/[\s+|:|,|\{|\?]/,1);return i.length?i[0]:t}function GN(t,i){return/^\w[\w\d+.-]*:/.test(i)?i:t.path.endsWith("/")?LM(t,i).toString():LM(MM(t),i).toString()}function KN(t,i){const{config:e,allowedSchemes:s}=function(t){const i=[Lh.http,Lh.https,Lh.mailto,Lh.data,Lh.file,Lh.vscodeFileResource,Lh.vscodeRemote,Lh.vscodeRemoteResource];return t.isTrusted&&i.push(Lh.command),{config:{ALLOWED_TAGS:[...Aa],ALLOWED_ATTR:$N,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:i}}(t);Fh("uponSanitizeAttribute",((t,i)=>{var e;if(i.attrName!=="style"&&i.attrName!=="class"){if(t.tagName==="INPUT"&&((e=t.attributes.getNamedItem("type"))===null||e===void 0?void 0:e.value)==="checkbox"){if(i.attrName==="type"&&i.attrValue==="checkbox"||i.attrName==="disabled"||i.attrName==="checked")return void(i.keepAttr=!0);i.keepAttr=!1}}else{if(t.tagName==="SPAN"){if(i.attrName==="style")return void(i.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(i.attrValue));if(i.attrName==="class")return void(i.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(i.attrValue))}i.keepAttr=!1}})),Fh("uponSanitizeElement",((t,i)=>{var e,s;i.tagName==="input"&&(((e=t.attributes.getNamedItem("type"))===null||e===void 0?void 0:e.value)==="checkbox"?t.setAttribute("disabled",""):(s=t.parentElement)===null||s===void 0||s.removeChild(t))}));const n=function(t,i=!1){const e=document.createElement("a");return Fh("afterSanitizeAttributes",(s=>{for(const n of["href","src"])if(s.hasAttribute(n)){const o=s.getAttribute(n);if(n==="href"&&o.startsWith("#"))continue;if(e.href=o,!t.includes(e.protocol.replace(/:$/,""))){if(i&&n==="src"&&e.href.startsWith("data:"))continue;s.removeAttribute(n)}}})),qi((()=>{Ih("afterSanitizeAttributes")}))}(s);try{return Sh(i,{...e,RETURN_TRUSTED_TYPE:!0})}finally{Ih("uponSanitizeAttribute"),n.dispose()}}const $N=["align","autoplay","alt","checked","class","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","src","style","target","title","type","width","start"];function XN(t){return typeof t=="string"?t:function(t){var i;let e=(i=t.value)!==null&&i!==void 0?i:"";e.length>1e5&&(e=`${e.substr(0,1e5)}…`);const s=PN.parse(e,{renderer:ZN.value}).replace(/&(#\d+|[a-zA-Z]+);/g,(t=>{var i;return(i=qN.get(t))!==null&&i!==void 0?i:t}));return KN({isTrusted:!1},s).toString()}(t)}const qN=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),ZN=new _n((()=>{const t=new PN.Renderer;return t.code=t=>t,t.blockquote=t=>t,t.html=t=>"",t.heading=(t,i,e)=>t+`\n`,t.hr=()=>"",t.list=(t,i)=>t,t.listitem=t=>t+`\n`,t.paragraph=t=>t+`\n`,t.table=(t,i)=>t+i+`\n`,t.tablerow=t=>t,t.tablecell=(t,i)=>t+" ",t.strong=t=>t,t.em=t=>t,t.codespan=t=>t,t.br=()=>`\n`,t.del=t=>t,t.image=(t,i,e)=>"",t.text=t=>t,t.link=(t,i,e)=>e,t}));function tQ(t){let i="";return t.forEach((t=>{i+=t.raw})),i}function iQ(t){var i,e;for(let s=0;s<t.tokens.length;s++){const n=t.tokens[s];if(n.type==="text"){const o=n.raw.split(`\n`),r=o[o.length-1];if(r.includes("`"))return nQ(t);if(r.includes("**"))return uQ(t,"**");if(r.match(/\*\w/))return oQ(t);if(r.match(/(^|\s)__\w/))return lQ(t);if(r.match(/(^|\s)_\w/))return rQ(t);if(r.match(/(^|\s)\[.*\]\(\w*/)){const n=t.tokens.slice(s+1);return((i=n[0])===null||i===void 0?void 0:i.type)==="link"&&((e=n[1])===null||e===void 0?void 0:e.type)==="text"&&n[1].raw.match(/^ *"[^"]*$/)?cQ(t):hQ(t)}if(eQ(r))return hQ(t);if(r.match(/(^|\s)\[\w/)&&!t.tokens.slice(s+1).some((t=>eQ(t.raw))))return aQ(t)}}}function eQ(t){return!!t.match(/^[^\[]*\]\([^\)]*$/)}function sQ(t,i){const e=tQ(t);return PN.lexer(e+`\n${i}`)}function nQ(t){return uQ(t,"`")}function oQ(t){return uQ(t,"*")}function rQ(t){return uQ(t,"_")}function hQ(t){return uQ(t,")")}function cQ(t){return uQ(t,'")')}function aQ(t){return uQ(t,"](about:blank)")}function lQ(t){return uQ(t,"__")}function uQ(t,i){const e=tQ(Array.isArray(t)?t:[t]);return PN.lexer(e+i)[0]}function dQ(t){const i=tQ(t),e=i.split(`\n`);let s,n=!1;for(let t=0;t<e.length;t++){const i=e[t].trim();if(s===void 0&&i.match(/^\s*\|/)){const t=i.match(/(\|[^\|]+)(?=\||$)/g);t&&(s=t.length)}else if(typeof s=="number"){if(!i.match(/^\s*\|/)||t!==e.length-1)return;n=!0}}if(typeof s=="number"&&s>0){const t=n?e.slice(0,-1).join(`\n`):i,o=!!t.match(/\|\s*$/),r=t+(o?"":"|")+`\n|${" --- |".repeat(s)}`;return PN.lexer(r)}}var fQ,gQ=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},AQ=function(t,i){return function(e,s){i(e,s,t)}};let pQ=fQ=class{constructor(t,i,e){this._options=t,this._languageService=i,this._openerService=e,this._onDidRenderAsync=new de,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(t,i,e){if(!t)return{element:document.createElement("span"),dispose:()=>{}};const s=new Zi,n=s.add(VN(t,{...this._getRenderOptions(t,s),...i},e));return n.element.classList.add("rendered-markdown"),{element:n.element,dispose:()=>s.dispose()}}_getRenderOptions(t,i){return{codeBlockRenderer:async(t,i)=>{var e,s,n;let o;t?o=this._languageService.getLanguageIdByLanguageName(t):this._options.editor&&(o=(e=this._options.editor.getModel())===null||e===void 0?void 0:e.getLanguageId()),o||(o=ef);const r=await async function(t,i,e){if(!e)return TI(i,t.languageIdCodec,LI);const s=await Gs.getOrCreate(e);return TI(i,t.languageIdCodec,s||LI)}(this._languageService,i,o),h=document.createElement("span");return h.innerHTML=(n=(s=fQ._ttpTokenizer)===null||s===void 0?void 0:s.createHTML(r))!==null&&n!==void 0?n:r,this._options.editor?Da(h,this._options.editor.getOption(50)):this._options.codeBlockFontFamily&&(h.style.fontFamily=this._options.codeBlockFontFamily),this._options.codeBlockFontSize!==void 0&&(h.style.fontSize=this._options.codeBlockFontSize),h},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>wQ(this._openerService,i,t.isTrusted),disposables:i}}}};async function wQ(t,i,e){try{return await t.open(i,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:mQ(e)})}catch(t){return Oi(t),!1}}function mQ(t){return t===!0||!(!t||!Array.isArray(t.enabledCommands))&&t.enabledCommands}pQ._ttpTokenizer=Yu("tokenizeToString",{createHTML:t=>t}),pQ=fQ=gQ([AQ(1,Od),AQ(2,gT)],pQ);var vQ=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},bQ=function(t,i){return function(e,s){i(e,s,t)}};const yQ=ha;let kQ=class extends Yy{get _targetWindow(){return Gh(this._target.targetElements[0])}get _targetDocumentElement(){return Gh(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(t){this._isLocked!==t&&(this._isLocked=t,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(t,i,e,s,n,o){var r,h,c,a,l,u,d,f;super(),this._keybindingService=i,this._configurationService=e,this._openerService=s,this._instantiationService=n,this._accessibilityService=o,this._messageListeners=new Zi,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new de),this._onRequestLayout=this._register(new de),this._linkHandler=t.linkHandler||(i=>wQ(this._openerService,i,NN(t.content)?t.content.isTrusted:void 0)),this._target="targetElements"in t.target?t.target:new CQ(t.target),this._hoverPointer=!((r=t.appearance)===null||r===void 0)&&r.showPointer?yQ("div.workbench-hover-pointer"):void 0,this._hover=this._register(new uT),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),!((h=t.appearance)===null||h===void 0)&&h.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),!((c=t.appearance)===null||c===void 0)&&c.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),t.additionalClasses&&this._hover.containerDomNode.classList.add(...t.additionalClasses),!((a=t.position)===null||a===void 0)&&a.forcePosition&&(this._forcePosition=!0),t.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=(u=(l=t.position)===null||l===void 0?void 0:l.hoverPosition)!==null&&u!==void 0?u:3,this.onmousedown(this._hover.containerDomNode,(t=>t.stopPropagation())),this.onkeydown(this._hover.containerDomNode,(t=>{t.equals(9)&&this.dispose()})),this._register(rc(this._targetWindow,"blur",(()=>this.dispose())));const g=yQ("div.hover-row.markdown-hover"),A=yQ("div.hover-contents");if(typeof t.content=="string")A.textContent=t.content,A.style.whiteSpace="pre-wrap";else if(t.content instanceof HTMLElement)A.appendChild(t.content),A.classList.add("html-hover-contents");else{const i=t.content,e=this._instantiationService.createInstance(pQ,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Li.fontFamily}),{element:s}=e.render(i,{actionHandler:{callback:t=>this._linkHandler(t),disposables:this._messageListeners},asyncRenderCallback:()=>{A.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});A.appendChild(s)}if(g.appendChild(A),this._hover.contentsDomNode.appendChild(g),t.actions&&t.actions.length>0){const i=yQ("div.hover-row.status-bar"),e=yQ("div.actions");t.actions.forEach((t=>{const i=this._keybindingService.lookupKeybinding(t.commandId),s=i?i.getLabel():null;dT.render(e,{label:t.label,commandId:t.commandId,run:i=>{t.run(i),this.dispose()},iconClass:t.iconClass},s)})),i.appendChild(e),this._hover.containerDomNode.appendChild(i)}let p;if(this._hoverContainer=yQ("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode),p=!(t.actions&&t.actions.length>0)&&(((d=t.persistence)===null||d===void 0?void 0:d.hideOnHover)===void 0?typeof t.content=="string"||NN(t.content)&&!t.content.value.includes("](")&&!t.content.value.includes("</a>"):t.persistence.hideOnHover),p&&((f=t.appearance)===null||f===void 0?void 0:f.showHoverHint)){const t=yQ("div.hover-row.status-bar"),i=yQ("div.info");i.textContent=st(0,"Hold {0} key to mouse over",kt?"Option":"Alt"),t.appendChild(i),this._hover.containerDomNode.appendChild(t)}const w=[...this._target.targetElements];p||w.push(this._hoverContainer);const m=this._register(new xQ(w));if(this._register(m.onMouseOut((()=>{this._isLocked||this.dispose()}))),p){const t=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new xQ(t)),this._register(this._lockMouseTracker.onMouseOut((()=>{this._isLocked||this.dispose()})))}else this._lockMouseTracker=m}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const t=this._hover.containerDomNode,i=this.findLastFocusableChild(this._hover.containerDomNode);if(i){const e=ea(this._hoverContainer,yQ("div")),s=ia(this._hoverContainer,yQ("div"));e.tabIndex=0,s.tabIndex=0,this._register(rc(s,"focus",(i=>{t.focus(),i.preventDefault()}))),this._register(rc(e,"focus",(t=>{i.focus(),t.preventDefault()})))}}findLastFocusableChild(t){if(t.hasChildNodes())for(let i=0;i<t.childNodes.length;i++){const e=t.childNodes.item(t.childNodes.length-i-1);if(e.nodeType===e.ELEMENT_NODE){const t=e;if(typeof t.tabIndex=="number"&&t.tabIndex>=0)return t}const s=this.findLastFocusableChild(e);if(s)return s}}render(t){var i;t.appendChild(this._hoverContainer);const e=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&fT(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(i=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))===null||i===void 0?void 0:i.getAriaLabel());e&&aw(e),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const t=this._target.targetElements.map((t=>(t=>{const i=kc(t),e=t.getBoundingClientRect();return{top:e.top*i,bottom:e.bottom*i,right:e.right*i,left:e.left*i}})(t))),{top:i,right:e,bottom:s,left:n}=t[0],o=e-n,r=s-i,h={top:i,right:e,bottom:s,left:n,width:o,height:r,center:{x:n+o/2,y:i+r/2}};if(this.adjustHorizontalHoverPosition(h),this.adjustVerticalHoverPosition(h),this.adjustHoverMaxHeight(h),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:h.left+=3,h.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:h.left-=3,h.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:h.top+=3,h.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:h.top-=3,h.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px"}h.center.x=h.left+o/2,h.center.y=h.top+r/2}this.computeXCordinate(h),this.computeYCordinate(h),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(h)),this._hover.onContentsChanged()}computeXCordinate(t){const i=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=t.right:this._hoverPosition===0?this._x=t.left-i:(this._hoverPointer?this._x=t.center.x-this._hover.containerDomNode.clientWidth/2:this._x=t.left,this._x+i>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-i-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=t.left+2)}computeYCordinate(t){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=t.top:this._hoverPosition===2?this._y=t.bottom-2:this._hoverPointer?this._y=t.center.y+this._hover.containerDomNode.clientHeight/2:this._y=t.bottom,this._y>this._targetWindow.innerHeight&&(this._y=t.bottom)}adjustHorizontalHoverPosition(t){if(this._target.x!==void 0)return;const i=this._hoverPointer?3:0;if(this._forcePosition){const e=i+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=this._targetDocumentElement.clientWidth-t.right-e+"px":this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=t.left-e+"px")}else this._hoverPosition===1?this._targetDocumentElement.clientWidth-t.right<this._hover.containerDomNode.clientWidth+i&&(t.left>=this._hover.containerDomNode.clientWidth+i?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(t.left<this._hover.containerDomNode.clientWidth+i&&(this._targetDocumentElement.clientWidth-t.right>=this._hover.containerDomNode.clientWidth+i?this._hoverPosition=1:this._hoverPosition=2),t.left-this._hover.containerDomNode.clientWidth-i<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(t){if(this._target.y!==void 0||this._forcePosition)return;const i=this._hoverPointer?3:0;this._hoverPosition===3?t.top-this._hover.containerDomNode.clientHeight-i<0&&(this._hoverPosition=2):this._hoverPosition===2&&t.bottom+this._hover.containerDomNode.clientHeight+i>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(t){let i=this._targetWindow.innerHeight/2;if(this._forcePosition){const e=2+(this._hoverPointer?3:0);this._hoverPosition===3?i=Math.min(i,t.top-e):this._hoverPosition===2&&(i=Math.min(i,this._targetWindow.innerHeight-t.bottom-e))}if(this._hover.containerDomNode.style.maxHeight=`${i}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const t=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==t&&(this._hover.contentsDomNode.style.paddingRight=t)}}setHoverPointerPosition(t){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const i=this._hover.containerDomNode.clientHeight;i>t.height?this._hoverPointer.style.top=t.center.y-(this._y-i)-3+"px":this._hoverPointer.style.top=Math.round(i/2)-3+"px";break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const i=this._hover.containerDomNode.clientWidth;let e=Math.round(i/2)-3;const s=this._x+e;(s<t.left||s>t.right)&&(e=t.center.x-this._x-3),this._hoverPointer.style.left=`${e}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};kQ=vQ([bQ(1,Hx),bQ(2,Id),bQ(3,gT),bQ(4,Oa),bQ(5,yw)],kQ);class xQ extends Yy{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(t){super(),this._elements=t,this._isMouseIn=!0,this._onMouseOut=this._register(new de),this._elements.forEach((t=>this.onmouseover(t,(()=>this._onTargetMouseOver(t))))),this._elements.forEach((t=>this.onmouseleave(t,(()=>this._onTargetMouseLeave(t)))))}_onTargetMouseOver(t){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(t)}_onTargetMouseLeave(t){this._isMouseIn=!1,this._evaluateMouseState(t)}_evaluateMouseState(t){this._clearEvaluateMouseStateTimeout(t),this._mouseTimeout=Gh(t).setTimeout((()=>this._fireIfMouseOutside()),0)}_clearEvaluateMouseStateTimeout(t){this._mouseTimeout&&(Gh(t).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class CQ{constructor(t){this._element=t,this.targetElements=[this._element]}dispose(){}}var EQ,BQ;function DQ(t,i,e){const s=e.mode===BQ.ALIGN?e.offset:e.offset+e.size,n=e.mode===BQ.ALIGN?e.offset+e.size:e.offset;return e.position===0?i<=t-s?s:i<=n?n-i:Math.max(t-i,0):i<=n?n-i:i<=t-s?s:0}(function(t){function i(t,i){if(t.start>=i.end||i.start>=t.end)return{start:0,end:0};const e=Math.max(t.start,i.start),s=Math.min(t.end,i.end);return s-e<=0?{start:0,end:0}:{start:e,end:s}}function e(t){return t.end-t.start<=0}t.intersect=i,t.isEmpty=e,t.intersects=function(t,s){return!e(i(t,s))},t.relativeComplement=function(t,i){const s=[],n={start:t.start,end:Math.min(i.start,t.end)},o={start:Math.max(i.end,t.start),end:t.end};return e(n)||s.push(n),e(o)||s.push(o),s}})(EQ||(EQ={})),function(t){t[t.AVOID=0]="AVOID",t[t.ALIGN=1]="ALIGN"}(BQ||(BQ={}));class MQ extends te{constructor(t,i){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=te.None,this.toDisposeOnSetContainer=te.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ha(".context-view"),aa(this.view),this.setContainer(t,i),this._register(qi((()=>this.setContainer(null,1))))}setContainer(t,i){var e;this.useFixedPosition=i!==1;const s=this.useShadowDOM;if(this.useShadowDOM=i===3,(t!==this.container||s!==this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(e=this.shadowRootHostElement)===null||e===void 0||e.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),t)){if(this.container=t,this.useShadowDOM){this.shadowRootHostElement=ha(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const t=document.createElement("style");t.textContent=SQ,this.shadowRoot.appendChild(t),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ha("slot"))}else this.container.appendChild(this.view);const i=new Zi;MQ.BUBBLE_UP_EVENTS.forEach((t=>{i.add(cc(this.container,t,(t=>{this.onDOMEvent(t,!1)})))})),MQ.BUBBLE_DOWN_EVENTS.forEach((t=>{i.add(cc(this.container,t,(t=>{this.onDOMEvent(t,!0)}),!0))})),this.toDisposeOnSetContainer=i}}show(t){var i,e,s;this.isVisible()&&this.hide(),nc(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+((i=t.layer)!==null&&i!==void 0?i:0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",ca(this.view),this.toDisposeOnClean=t.render(this.view)||te.None,this.delegate=t,this.doLayout(),(s=(e=this.delegate).focus)===null||s===void 0||s.call(e)}getViewElement(){return this.view}layout(){var t,i;this.isVisible()&&(this.delegate.canRelayout!==!1||Dt&&qo?((i=(t=this.delegate)===null||t===void 0?void 0:t.layout)===null||i===void 0||i.call(t),this.doLayout()):this.hide())}doLayout(){if(!this.isVisible())return;const t=this.delegate.getAnchor();let i;if(t instanceof HTMLElement){const e=yc(t),s=kc(t);i={top:e.top*s,left:e.left*s,width:e.width*s,height:e.height*s}}else i=function(t){const i=t;return!!i&&typeof i.x=="number"&&typeof i.y=="number"}(t)?{top:t.y,left:t.x,width:t.width||1,height:t.height||2}:{top:t.posy,left:t.posx,width:2,height:2};const e=xc(this.view),s=Bc(this.view),n=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,r=this.delegate.anchorAxisAlignment||0;let h,c;const a=function(){var t,i;return(i=(t=Nc().defaultView)===null||t===void 0?void 0:t.window)!==null&&i!==void 0?i:Wn}();if(r===0){const t={offset:i.top-a.pageYOffset,size:i.height,position:n===0?0:1},r={offset:i.left,size:i.width,position:o===0?0:1,mode:BQ.ALIGN};h=DQ(a.innerHeight,s,t)+a.pageYOffset,EQ.intersects({start:h,end:h+s},{start:t.offset,end:t.offset+t.size})&&(r.mode=BQ.AVOID),c=DQ(a.innerWidth,e,r)}else{const t={offset:i.left,size:i.width,position:o===0?0:1},r={offset:i.top,size:i.height,position:n===0?0:1,mode:BQ.ALIGN};c=DQ(a.innerWidth,e,t),EQ.intersects({start:c,end:c+e},{start:t.offset,end:t.offset+t.size})&&(r.mode=BQ.AVOID),h=DQ(a.innerHeight,s,r)+a.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(n===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const l=yc(this.container);this.view.style.top=h-(this.useFixedPosition?yc(this.view).top:l.top)+"px",this.view.style.left=c-(this.useFixedPosition?yc(this.view).left:l.left)+"px",this.view.style.width="initial"}hide(t){const i=this.delegate;this.delegate=null,i!=null&&i.onHide&&i.onHide(t),this.toDisposeOnClean.dispose(),aa(this.view)}isVisible(){return!!this.delegate}onDOMEvent(t,i){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(t,Gh(t).document.activeElement):i&&!Dc(t.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}MQ.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],MQ.BUBBLE_DOWN_EVENTS=["click"];const SQ=`\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*='codicon-'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }\n\n\t:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }\n`;var FQ=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},IQ=function(t,i){return function(e,s){i(e,s,t)}};let LQ=class extends te{constructor(t){super(),this.layoutService=t,this.currentViewDisposable=this._register(new ie),this.contextView=this._register(new MQ(this.layoutService.mainContainer,1)),this.layout(),this._register(t.onDidLayoutContainer((()=>this.layout())))}showContextView(t,i,e){let s;s=i?i===this.layoutService.getContainer(Gh(i))?1:e?3:2:1,this.contextView.setContainer(i??this.layoutService.activeContainer,s),this.contextView.show(t);const n=qi((()=>{this.currentViewDisposable===n&&this.hideContextView()}));return this.currentViewDisposable.value=n,n}layout(){this.contextView.layout()}hideContextView(t){this.contextView.hide(t)}};LQ=FQ([IQ(0,PL)],LQ);class RQ extends LQ{getContextViewElement(){return this.contextView.getViewElement()}}var TQ=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},NQ=function(t,i){return function(e,s){i(e,s,t)}};let QQ=class extends te{constructor(t,i,e,s,n){super(),this._instantiationService=t,this._keybindingService=e,this._layoutService=s,this._accessibilityService=n,i.onDidShowContextMenu((()=>this.hideHover())),this._contextViewHandler=this._register(new LQ(this._layoutService))}showHover(t,i,e){var s,n,o,r;if(OQ(this._currentHoverOptions)===OQ(t)||this._currentHover&&(!((n=(s=this._currentHoverOptions)===null||s===void 0?void 0:s.persistence)===null||n===void 0)&&n.sticky))return;this._currentHoverOptions=t,this._lastHoverOptions=t;const h=t.trapFocus||this._accessibilityService.isScreenReaderOptimized(),c=Lc();e||(this._lastFocusedElementBeforeOpen=h&&c?c:void 0);const a=new Zi,l=this._instantiationService.createInstance(kQ,t);if(!((o=t.persistence)===null||o===void 0)&&o.sticky&&(l.isLocked=!0),l.onDispose((()=>{var i,e;!((i=this._currentHover)===null||i===void 0)&&i.domNode&&Tc(this._currentHover.domNode)&&((e=this._lastFocusedElementBeforeOpen)===null||e===void 0||e.focus()),this._currentHoverOptions===t&&(this._currentHoverOptions=void 0),a.dispose()})),!t.container){const i=t.target instanceof HTMLElement?t.target:t.target.targetElements[0];t.container=this._layoutService.getContainer(Gh(i))}if(this._contextViewHandler.showContextView(new zQ(l,i),t.container),l.onRequestLayout((()=>this._contextViewHandler.layout())),(r=t.persistence)===null||r===void 0?void 0:r.sticky)a.add(rc(Gh(t.container).document,$c.MOUSE_DOWN,(t=>{Dc(t.target,l.domNode)||this.doHideHover()})));else{if("targetElements"in t.target)for(const i of t.target.targetElements)a.add(rc(i,$c.CLICK,(()=>this.hideHover())));else a.add(rc(t.target,$c.CLICK,(()=>this.hideHover())));const i=Lc();if(i){const e=Gh(i).document;a.add(rc(i,$c.KEY_DOWN,(i=>{var e;return this._keyDown(i,l,!!(!((e=t.persistence)===null||e===void 0)&&e.hideOnKeyDown))}))),a.add(rc(e,$c.KEY_DOWN,(i=>{var e;return this._keyDown(i,l,!!(!((e=t.persistence)===null||e===void 0)&&e.hideOnKeyDown))}))),a.add(rc(i,$c.KEY_UP,(t=>this._keyUp(t,l)))),a.add(rc(e,$c.KEY_UP,(t=>this._keyUp(t,l))))}}if("IntersectionObserver"in Wn){const i=new IntersectionObserver((t=>this._intersectionChange(t,l)),{threshold:0}),e="targetElements"in t.target?t.target.targetElements[0]:t.target;i.observe(e),a.add(qi((()=>i.disconnect())))}return this._currentHover=l,l}hideHover(){var t;!(!((t=this._currentHover)===null||t===void 0)&&t.isLocked)&&this._currentHoverOptions&&this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(t,i){t[t.length-1].isIntersecting||i.dispose()}_keyDown(t,i,e){var s,n;if(t.key==="Alt")return void(i.isLocked=!0);const o=new hr(t);this._keybindingService.resolveKeyboardEvent(o).getSingleModifierDispatchChords().some((t=>!!t))||this._keybindingService.softDispatch(o,o.target).kind!==0||!e||!((s=this._currentHoverOptions)===null||s===void 0)&&s.trapFocus&&t.key==="Tab"||(this.hideHover(),(n=this._lastFocusedElementBeforeOpen)===null||n===void 0||n.focus())}_keyUp(t,i){var e;t.key==="Alt"&&(i.isLocked=!1,i.isMouseIn||(this.hideHover(),(e=this._lastFocusedElementBeforeOpen)===null||e===void 0||e.focus()))}};function OQ(t){var i;if(t!==void 0)return(i=t==null?void 0:t.id)!==null&&i!==void 0?i:t}QQ=TQ([NQ(0,Oa),NQ(1,aT),NQ(2,Hx),NQ(3,PL),NQ(4,yw)],QQ);class zQ{get anchorPosition(){return this._hover.anchor}constructor(t,i=!1){this._hover=t,this._focus=i,this.layer=1}render(t){return this._hover.render(t),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}Hd(rT,QQ,1),Nk(((t,i)=>{const e=t.getColor(Mm);e&&(i.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${e.transparent(.5)}; }`),i.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${e.transparent(.5)}; }`))}));const UQ=za("IWorkspaceEditService");class HQ{constructor(t){this.metadata=t}static convert(t){return t.edits.map((t=>{if(PQ.is(t))return PQ.lift(t);if(jQ.is(t))return jQ.lift(t);throw new Error("Unsupported edit")}))}}class PQ extends HQ{static is(t){return t instanceof PQ||Q(t)&&fs.isUri(t.resource)&&Q(t.textEdit)}static lift(t){return t instanceof PQ?t:new PQ(t.resource,t.textEdit,t.versionId,t.metadata)}constructor(t,i,e=void 0,s){super(s),this.resource=t,this.textEdit=i,this.versionId=e}}class jQ extends HQ{static is(t){return t instanceof jQ||Q(t)&&(!!t.newResource||!!t.oldResource)}static lift(t){return t instanceof jQ?t:new jQ(t.oldResource,t.newResource,t.options,t.metadata)}constructor(t,i,e={},s){super(s),this.oldResource=t,this.newResource=i,this.options=e}}const WQ={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0},YQ=Object.freeze({id:"editor",order:5,type:"object",title:st(0,"Editor"),scope:5}),_Q={...YQ,properties:{"editor.tabSize":{type:"number",default:jt.tabSize,minimum:1,markdownDescription:st(0,"The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:st(0,'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:jt.insertSpaces,markdownDescription:st(0,"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:jt.detectIndentation,markdownDescription:st(0,"Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:jt.trimAutoWhitespace,description:st(0,"Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:jt.largeFileOptimizations,description:st(0,"Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[st(0,"Turn off Word Based Suggestions."),st(0,"Only suggest words from the active document."),st(0,"Suggest words from all open documents of the same language."),st(0,"Suggest words from all open documents.")],description:st(0,"Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[st(0,"Semantic highlighting enabled for all color themes."),st(0,"Semantic highlighting disabled for all color themes."),st(0,"Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:st(0,"Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:st(0,"Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:st(0,"Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:st(0,"Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:st(0,"Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:st(0,"Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:st(0,"Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:st(0,"The opening bracket character or string sequence.")},{type:"string",description:st(0,"The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:st(0,"Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:st(0,"The opening bracket character or string sequence.")},{type:"string",description:st(0,"The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:WQ.maxComputationTime,description:st(0,"Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:WQ.maxFileSize,description:st(0,"Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:WQ.renderSideBySide,description:st(0,"Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:WQ.renderSideBySideInlineBreakpoint,description:st(0,"If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:WQ.useInlineViewWhenSpaceIsLimited,description:st(0,"If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:WQ.renderMarginRevertIcon,description:st(0,"When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:WQ.renderGutterMenu,description:st(0,"When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:WQ.ignoreTrimWhitespace,description:st(0,"When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:WQ.renderIndicators,description:st(0,"Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:WQ.diffCodeLens,description:st(0,"Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:WQ.diffWordWrap,markdownEnumDescriptions:[st(0,"Lines will never wrap."),st(0,"Lines will wrap at the viewport width."),st(0,"Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:WQ.diffAlgorithm,markdownEnumDescriptions:[st(0,"Uses the legacy diffing algorithm."),st(0,"Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:WQ.hideUnchangedRegions.enabled,markdownDescription:st(0,"Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:WQ.hideUnchangedRegions.revealLineCount,markdownDescription:st(0,"Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:WQ.hideUnchangedRegions.minimumLineCount,markdownDescription:st(0,"Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:WQ.hideUnchangedRegions.contextLineCount,markdownDescription:st(0,"Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:WQ.experimental.showMoves,markdownDescription:st(0,"Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:WQ.experimental.showEmptyDecorations,description:st(0,"Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")}}};for(const t of Ri){const i=t.schema;if(i!==void 0)if((VQ=i).type!==void 0||VQ.anyOf!==void 0)_Q.properties[`editor.${t.name}`]=i;else for(const t in i)Object.hasOwnProperty.call(i,t)&&(_Q.properties[t]=i[t])}var VQ;let JQ=null;function GQ(){return JQ===null&&(JQ=Object.create(null),Object.keys(_Q.properties).forEach((t=>{JQ[t]=!0}))),JQ}Vl.as(_d).registerConfiguration(_Q);class KQ{static insert(t,i){return{range:new Es(t.lineNumber,t.column,t.lineNumber,t.column),text:i,forceMoveMarkers:!0}}static delete(t){return{range:t,text:null}}static replace(t,i){return{range:t,text:i}}static replaceMove(t,i){return{range:t,text:i,forceMoveMarkers:!0}}}function $Q(t){return Object.isFrozen(t)?t:function(t){if(!t||typeof t!="object")return t;const i=[t];for(;i.length>0;){const t=i.shift();Object.freeze(t);for(const e in t)if(K.call(t,e)){const s=t[e];typeof s!="object"||Object.isFrozen(s)||O(s)||i.push(s)}}return t}(t)}class XQ{constructor(t={},i=[],e=[],s){this._contents=t,this._keys=i,this._overrides=e,this.raw=s,this.overrideConfigurations=new Map}get rawConfiguration(){var t;if(!this._rawConfiguration)if(!((t=this.raw)===null||t===void 0)&&t.length){const t=this.raw.map((t=>{if(t instanceof XQ)return t;const i=new qQ("");return i.parseRaw(t),i.configurationModel}));this._rawConfiguration=t.reduce(((t,i)=>i===t?i:t.merge(i)),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(t){return t?Qd(this.contents,t):this.contents}inspect(t,i){const e=this;return{get value(){return $Q(e.rawConfiguration.getValue(t))},get override(){return i?$Q(e.rawConfiguration.getOverrideValue(t,i)):void 0},get merged(){return $Q(i?e.rawConfiguration.override(i).getValue(t):e.rawConfiguration.getValue(t))},get overrides(){const i=[];for(const{contents:s,identifiers:n,keys:o}of e.rawConfiguration.overrides){const e=new XQ(s,o).getValue(t);e!==void 0&&i.push({identifiers:n,value:e})}return i.length?$Q(i):void 0}}}getOverrideValue(t,i){const e=this.getContentsForOverrideIdentifer(i);return e?t?Qd(e,t):e:void 0}override(t){let i=this.overrideConfigurations.get(t);return i||(i=this.createOverrideConfigurationModel(t),this.overrideConfigurations.set(t,i)),i}merge(...t){var i,e;const s=G(this.contents),n=G(this.overrides),o=[...this.keys],r=!((i=this.raw)===null||i===void 0)&&i.length?[...this.raw]:[this];for(const i of t)if(r.push(...!((e=i.raw)===null||e===void 0)&&e.length?i.raw:[i]),!i.isEmpty()){this.mergeContents(s,i.contents);for(const t of i.overrides){const[i]=n.filter((i=>h(i.identifiers,t.identifiers)));i?(this.mergeContents(i.contents,t.contents),i.keys.push(...t.keys),i.keys=w(i.keys)):n.push(G(t))}for(const t of i.keys)o.indexOf(t)===-1&&o.push(t)}return new XQ(s,o,n,r.every((t=>t instanceof XQ))?void 0:r)}createOverrideConfigurationModel(t){const i=this.getContentsForOverrideIdentifer(t);if(!i||typeof i!="object"||!Object.keys(i).length)return this;const e={};for(const t of w([...Object.keys(this.contents),...Object.keys(i)])){let s=this.contents[t];const n=i[t];n&&(typeof s=="object"&&typeof n=="object"?(s=G(s),this.mergeContents(s,n)):s=n),e[t]=s}return new XQ(e,this.keys,this.overrides)}mergeContents(t,i){for(const e of Object.keys(i))e in t&&Q(t[e])&&Q(i[e])?this.mergeContents(t[e],i[e]):t[e]=G(i[e])}getContentsForOverrideIdentifer(t){let i=null,e=null;const s=t=>{t&&(e?this.mergeContents(e,t):e=G(t))};for(const e of this.overrides)e.identifiers.length===1&&e.identifiers[0]===t?i=e.contents:e.identifiers.includes(t)&&s(e.contents);return s(i),e}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,i){this.updateValue(t,i,!0)}setValue(t,i){this.updateValue(t,i,!1)}removeValue(t){const i=this.keys.indexOf(t);i!==-1&&(this.keys.splice(i,1),Td(this.contents,t),$d.test(t)&&this.overrides.splice(this.overrides.findIndex((i=>h(i.identifiers,Xd(t)))),1))}updateValue(t,i,e){Rd(this.contents,t,i,(t=>console.error(t))),(e=e||this.keys.indexOf(t)===-1)&&this.keys.push(t),$d.test(t)&&this.overrides.push({identifiers:Xd(t),keys:Object.keys(this.contents[t]),contents:Ld(this.contents[t],(t=>console.error(t)))})}}class qQ{constructor(t){this._name=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||new XQ}parseRaw(t,i){this._raw=t;const{contents:e,keys:s,overrides:n,restricted:o,hasExcludedProperties:r}=this.doParseRaw(t,i);this._configurationModel=new XQ(e,s,n,r?[t]:void 0),this._restrictedConfigurations=o||[]}doParseRaw(t,i){const e=Vl.as(_d).getConfigurationProperties(),s=this.filter(t,e,!0,i);return{contents:Ld(t=s.raw,(t=>console.error(`Conflict in settings file ${this._name}: ${t}`))),keys:Object.keys(t),overrides:this.toOverrides(t,(t=>console.error(`Conflict in settings file ${this._name}: ${t}`))),restricted:s.restricted,hasExcludedProperties:s.hasExcludedProperties}}filter(t,i,e,s){var n,o,r;let h=!1;if(!(s!=null&&s.scopes)&&!(s!=null&&s.skipRestricted)&&!(!((n=s==null?void 0:s.exclude)===null||n===void 0)&&n.length))return{raw:t,restricted:[],hasExcludedProperties:h};const c={},a=[];for(const n in t)if($d.test(n)&&e){const e=this.filter(t[n],i,!1,s);c[n]=e.raw,h=h||e.hasExcludedProperties,a.push(...e.restricted)}else{const e=i[n],l=e?e.scope!==void 0?e.scope:3:void 0;e!=null&&e.restricted&&a.push(n),!((o=s.exclude)===null||o===void 0)&&o.includes(n)||!(!((r=s.include)===null||r===void 0)&&r.includes(n))&&(l!==void 0&&s.scopes!==void 0&&!s.scopes.includes(l)||s.skipRestricted&&(e!=null&&e.restricted))?h=!0:c[n]=t[n]}return{raw:c,restricted:a,hasExcludedProperties:h}}toOverrides(t,i){const e=[];for(const s of Object.keys(t))if($d.test(s)){const n={};for(const i in t[s])n[i]=t[s][i];e.push({identifiers:Xd(s),keys:Object.keys(n),contents:Ld(n,i)})}return e}}class ZQ{constructor(t,i,e,s,n,o,r,h,c,a,l,u,d){this.key=t,this.overrides=i,this._value=e,this.overrideIdentifiers=s,this.defaultConfiguration=n,this.policyConfiguration=o,this.applicationConfiguration=r,this.userConfiguration=h,this.localUserConfiguration=c,this.remoteUserConfiguration=a,this.workspaceConfiguration=l,this.folderConfigurationModel=u,this.memoryConfigurationModel=d}toInspectValue(t){return(t==null?void 0:t.value)!==void 0||(t==null?void 0:t.override)!==void 0||(t==null?void 0:t.overrides)!==void 0?t:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class tO{constructor(t,i,e,s,n=new XQ,o=new XQ,r=new Jf,h=new XQ,c=new Jf){this._defaultConfiguration=t,this._policyConfiguration=i,this._applicationConfiguration=e,this._localUserConfiguration=s,this._remoteUserConfiguration=n,this._workspaceConfiguration=o,this._folderConfigurations=r,this._memoryConfiguration=h,this._memoryConfigurationByResource=c,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Jf,this._userConfiguration=null}getValue(t,i,e){return this.getConsolidatedConfigurationModel(t,i,e).getValue(t)}updateValue(t,i,e={}){let s;e.resource?(s=this._memoryConfigurationByResource.get(e.resource),s||(s=new XQ,this._memoryConfigurationByResource.set(e.resource,s))):s=this._memoryConfiguration,i===void 0?s.removeValue(t):s.setValue(t,i),e.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(t,i,e){const s=this.getConsolidatedConfigurationModel(t,i,e),n=this.getFolderConfigurationModelForResource(i.resource,e),o=i.resource&&this._memoryConfigurationByResource.get(i.resource)||this._memoryConfiguration,r=new Set;for(const i of s.overrides)for(const e of i.identifiers)s.getOverrideValue(t,e)!==void 0&&r.add(e);return new ZQ(t,i,s.getValue(t),r.size?[...r]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,e?this._workspaceConfiguration:void 0,n||void 0,o)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(t,i,e){let s=this.getConsolidatedConfigurationModelForResource(i,e);return i.overrideIdentifier&&(s=s.override(i.overrideIdentifier)),this._policyConfiguration.isEmpty()||this._policyConfiguration.getValue(t)===void 0||(s=s.merge(this._policyConfiguration)),s}getConsolidatedConfigurationModelForResource({resource:t},i){let e=this.getWorkspaceConsolidatedConfiguration();if(i&&t){const s=i.getFolder(t);s&&(e=this.getFolderConsolidatedConfiguration(s.uri)||e);const n=this._memoryConfigurationByResource.get(t);n&&(e=e.merge(n))}return e}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(t){let i=this._foldersConsolidatedConfigurations.get(t);if(!i){const e=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(t);s?(i=e.merge(s),this._foldersConsolidatedConfigurations.set(t,i)):i=e}return i}getFolderConfigurationModelForResource(t,i){if(i&&t){const e=i.getFolder(t);if(e)return this._folderConfigurations.get(e.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce(((t,i)=>{const{contents:e,overrides:s,keys:n}=this._folderConfigurations.get(i);return t.push([i,{contents:e,overrides:s,keys:n}]),t}),[])}}static parse(t){const i=this.parseConfigurationModel(t.defaults),e=this.parseConfigurationModel(t.policy),s=this.parseConfigurationModel(t.application),n=this.parseConfigurationModel(t.user),o=this.parseConfigurationModel(t.workspace),r=t.folders.reduce(((t,i)=>(t.set(fs.revive(i[0]),this.parseConfigurationModel(i[1])),t)),new Jf);return new tO(i,e,s,n,new XQ,o,r,new XQ,new Jf)}static parseConfigurationModel(t){return new XQ(t.contents,t.keys,t.overrides)}}class iO{constructor(t,i,e,s){this.change=t,this.previous=i,this.currentConfiguraiton=e,this.currentWorkspace=s,this._marker=`\n`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const i of t.keys)this.affectedKeys.add(i);for(const[,i]of t.overrides)for(const t of i)this.affectedKeys.add(t);this._affectsConfigStr=this._marker;for(const t of this.affectedKeys)this._affectsConfigStr+=t+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=tO.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(t,i){var e;const s=this._marker+t,n=this._affectsConfigStr.indexOf(s);if(n<0)return!1;const o=n+s.length;if(o>=this._affectsConfigStr.length)return!1;const r=this._affectsConfigStr.charCodeAt(o);return r!==this._markerCode1&&r!==this._markerCode2?!1:i?!Z(this.previousConfiguration?this.previousConfiguration.getValue(t,i,(e=this.previous)===null||e===void 0?void 0:e.workspace):void 0,this.currentConfiguraiton.getValue(t,i,this.currentWorkspace)):!0}}const eO={kind:0},sO={kind:1};class nO{constructor(t,i,e){var s;this._log=e,this._defaultKeybindings=t,this._defaultBoundCommands=new Map;for(const i of t){const t=i.command;t&&t.charAt(0)!=="-"&&this._defaultBoundCommands.set(t,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=nO.handleRemovals([].concat(t).concat(i));for(let t=0,i=this._keybindings.length;t<i;t++){const i=this._keybindings[t];if(i.chords.length===0)continue;const e=(s=i.when)===null||s===void 0?void 0:s.substituteConstants();e&&e.type===0||this._addKeyPress(i.chords[0],i)}}static _isTargetedForRemoval(t,i,e){if(i){for(let e=0;e<i.length;e++)if(i[e]!==t.chords[e])return!1}return!(e&&e.type!==1&&(!t.when||!function(t,i){const e=t?t.substituteConstants():void 0,s=i?i.substituteConstants():void 0;return!e&&!s||!(!e||!s)&&e.equals(s)}(e,t.when)))}static handleRemovals(t){const i=new Map;for(let e=0,s=t.length;e<s;e++){const s=t[e];if(s.command&&s.command.charAt(0)==="-"){const t=s.command.substring(1);i.has(t)?i.get(t).push(s):i.set(t,[s])}}if(i.size===0)return t;const e=[];for(let s=0,n=t.length;s<n;s++){const n=t[s];if(!n.command||n.command.length===0){e.push(n);continue}if(n.command.charAt(0)==="-")continue;const o=i.get(n.command);if(!o||!n.isDefault){e.push(n);continue}let r=!1;for(const t of o){const i=t.when;if(this._isTargetedForRemoval(n,t.chords,i)){r=!0;break}}r||e.push(n)}return e}_addKeyPress(t,i){const e=this._map.get(t);if(e===void 0)return this._map.set(t,[i]),void this._addToLookupMap(i);for(let t=e.length-1;t>=0;t--){const s=e[t];if(s.command===i.command)continue;let n=!0;for(let t=1;t<s.chords.length&&t<i.chords.length;t++)if(s.chords[t]!==i.chords[t]){n=!1;break}n&&nO.whenIsEntirelyIncluded(s.when,i.when)&&this._removeFromLookupMap(s)}e.push(i),this._addToLookupMap(i)}_addToLookupMap(t){if(!t.command)return;let i=this._lookupMap.get(t.command);i===void 0?(i=[t],this._lookupMap.set(t.command,i)):i.push(t)}_removeFromLookupMap(t){if(!t.command)return;const i=this._lookupMap.get(t.command);if(i!==void 0){for(let e=0,s=i.length;e<s;e++)if(i[e]===t)return void i.splice(e,1)}}static whenIsEntirelyIncluded(t,i){return!i||i.type===1||!(!t||t.type===1)&&zl(t,i)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(t,i){const e=this._lookupMap.get(t);if(e===void 0||e.length===0)return null;if(e.length===1)return e[0];for(let t=e.length-1;t>=0;t--){const s=e[t];if(i.contextMatchesRules(s.when))return s}return e[e.length-1]}resolve(t,i,e){const s=[...i,e];this._log(`| Resolving ${s}`);const n=this._map.get(s[0]);if(n===void 0)return this._log("\\ No keybinding entries."),eO;let o=null;if(s.length<2)o=n;else{o=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];if(s.length>i.chords.length)continue;let e=!0;for(let t=1;t<s.length;t++)if(i.chords[t]!==s[t]){e=!1;break}e&&o.push(i)}}const r=this._findCommand(t,o);return r?s.length<r.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${r.chords.length-s.length} more chord(s), when: ${oO(r.when)}, source: ${rO(r)}.`),sO):(this._log(`\\ From ${o.length} keybinding entries, matched ${r.command}, when: ${oO(r.when)}, source: ${rO(r)}.`),h=r.command,c=r.commandArgs,a=r.bubble,{kind:2,commandId:h,commandArgs:c,isBubble:a}):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),eO);var h,c,a}_findCommand(t,i){for(let e=i.length-1;e>=0;e--){const s=i[e];if(nO._contextMatchesRules(t,s.when))return s}return null}static _contextMatchesRules(t,i){return!i||i.evaluate(t)}}function oO(t){return t?`${t.serialize()}`:"no when condition"}function rO(t){return t.extensionId?t.isBuiltinExtension?`built-in extension ${t.extensionId}`:`user extension ${t.extensionId}`:t.isDefault?"built-in":"user"}const hO=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class cO extends te{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:he.None}get inChordMode(){return this._currentChords.length>0}constructor(t,i,e,s,n){super(),this._contextKeyService=t,this._commandService=i,this._telemetryService=e,this._notificationService=s,this._logService=n,this._onDidUpdateKeybindings=this._register(new de),this._currentChords=[],this._currentChordChecker=new Cr,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=aO.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new xr,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(t){this._logging&&this._logService.info(`[KeybindingService]: ${t}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(t,i){const e=this._getResolver().lookupPrimaryKeybinding(t,i||this._contextKeyService);if(e)return e.resolvedKeybinding}dispatchEvent(t,i){return this._dispatch(t,i)}softDispatch(t,i){this._log("/ Soft dispatching keyboard event");const e=this.resolveKeyboardEvent(t);if(e.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),eO;const[s]=e.getDispatchChords();if(s===null)return this._log("\\ Keyboard event cannot be dispatched"),eO;const n=this._contextKeyService.getContext(i),o=this._currentChords.map((({keypress:t})=>t));return this._getResolver().resolve(n,o,s)}_scheduleLeaveChordMode(){const t=Date.now();this._currentChordChecker.cancelAndSet((()=>{this._documentHasFocus()?Date.now()-t>5e3&&this._leaveChordMode():this._leaveChordMode()}),500)}_expectAnotherChord(t,i){switch(this._currentChords.push({keypress:t,label:i}),this._currentChords.length){case 0:throw Yi("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(st(0,"({0}) was pressed. Waiting for second key of chord...",i));break;default:{const t=this._currentChords.map((({label:t})=>t)).join(", ");this._currentChordStatusMessage=this._notificationService.status(st(0,"({0}) was pressed. Waiting for next key of chord...",t))}}this._scheduleLeaveChordMode(),Ux.enabled&&Ux.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],Ux.enable()}_dispatch(t,i){return this._doDispatch(this.resolveKeyboardEvent(t),i,!1)}_singleModifierDispatch(t,i){const e=this.resolveKeyboardEvent(t),[s]=e.getSingleModifierDispatchChords();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=aO.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=aO.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet((()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null}),300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(e,i,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[n]=e.getChords();return this._ignoreSingleModifiers=new aO(n),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(t,i,e=!1){var s;let n=!1;if(t.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let o=null,r=null;if(e){const[i]=t.getSingleModifierDispatchChords();o=i,r=i?[i]:[]}else[o]=t.getDispatchChords(),r=this._currentChords.map((({keypress:t})=>t));if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),n;const h=this._contextKeyService.getContext(i),c=t.getLabel(),a=this._getResolver().resolve(h,r,o);switch(a.kind){case 0:if(this._logService.trace("KeybindingService#dispatch",c,"[ No matching keybinding ]"),this.inChordMode){const t=this._currentChords.map((({label:t})=>t)).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${t}, ${c}".`),this._notificationService.status(st(0,"The key combination ({0}, {1}) is not a command.",t,c),{hideAfter:1e4}),this._leaveChordMode(),n=!0}return n;case 1:return this._logService.trace("KeybindingService#dispatch",c,"[ Several keybindings match - more chords needed ]"),n=!0,this._expectAnotherChord(o,c),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),n;case 2:if(this._logService.trace("KeybindingService#dispatch",c,`[ Will dispatch command ${a.commandId} ]`),a.commandId===null||a.commandId===""){if(this.inChordMode){const t=this._currentChords.map((({label:t})=>t)).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${t}, ${c}".`),this._notificationService.status(st(0,"The key combination ({0}, {1}) is not a command.",t,c),{hideAfter:1e4}),this._leaveChordMode(),n=!0}}else{this.inChordMode&&this._leaveChordMode(),a.isBubble||(n=!0),this._log(`+ Invoking command ${a.commandId}.`),this._currentlyDispatchingCommandId=a.commandId;try{a.commandArgs===void 0?this._commandService.executeCommand(a.commandId).then(void 0,(t=>this._notificationService.warn(t))):this._commandService.executeCommand(a.commandId,a.commandArgs).then(void 0,(t=>this._notificationService.warn(t)))}finally{this._currentlyDispatchingCommandId=null}hO.test(a.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:a.commandId,from:"keybinding",detail:(s=t.getUserSettingsLabel())!==null&&s!==void 0?s:void 0})}return n}}mightProducePrintableCharacter(t){return!t.ctrlKey&&!t.metaKey&&(t.keyCode>=31&&t.keyCode<=56||t.keyCode>=21&&t.keyCode<=30)}}class aO{constructor(t){this._ctrlKey=!!t&&t.ctrlKey,this._shiftKey=!!t&&t.shiftKey,this._altKey=!!t&&t.altKey,this._metaKey=!!t&&t.metaKey}has(t){switch(t){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}aO.EMPTY=new aO(null);class lO{constructor(t,i,e,s,n,o,r){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=t,this.chords=t?uO(t.getDispatchChords()):[],t&&this.chords.length===0&&(this.chords=uO(t.getSingleModifierDispatchChords())),this.bubble=!!i&&i.charCodeAt(0)===94,this.command=this.bubble?i.substr(1):i,this.commandArgs=e,this.when=s,this.isDefault=n,this.extensionId=o,this.isBuiltinExtension=r}}function uO(t){const i=[];for(let e=0,s=t.length;e<s;e++){const s=t[e];if(!s)return[];i.push(s)}return i}class dO{constructor(t,i,e=i){this.modifierLabels=[null],this.modifierLabels[2]=t,this.modifierLabels[1]=i,this.modifierLabels[3]=e}toLabel(t,i,e){if(i.length===0)return null;const s=[];for(let n=0,o=i.length;n<o;n++){const o=i[n],r=e(o);if(r===null)return null;s[n]=wO(o,r,this.modifierLabels[t])}return s.join(" ")}}const fO=new dO({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:st(0,"Ctrl"),shiftKey:st(0,"Shift"),altKey:st(0,"Alt"),metaKey:st(0,"Windows"),separator:"+"},{ctrlKey:st(0,"Ctrl"),shiftKey:st(0,"Shift"),altKey:st(0,"Alt"),metaKey:st(0,"Super"),separator:"+"}),gO=new dO({ctrlKey:st(0,"Control"),shiftKey:st(0,"Shift"),altKey:st(0,"Option"),metaKey:st(0,"Command"),separator:"+"},{ctrlKey:st(0,"Control"),shiftKey:st(0,"Shift"),altKey:st(0,"Alt"),metaKey:st(0,"Windows"),separator:"+"},{ctrlKey:st(0,"Control"),shiftKey:st(0,"Shift"),altKey:st(0,"Alt"),metaKey:st(0,"Super"),separator:"+"}),AO=new dO({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),pO=new dO({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function wO(t,i,e){if(i===null)return"";const s=[];return t.ctrlKey&&s.push(e.ctrlKey),t.shiftKey&&s.push(e.shiftKey),t.altKey&&s.push(e.altKey),t.metaKey&&s.push(e.metaKey),i!==""&&s.push(i),s.join(e.separator)}class mO extends nr{constructor(t,i){if(super(),i.length===0)throw Wi("chords");this._os=t,this._chords=i}getLabel(){return fO.toLabel(this._os,this._chords,(t=>this._getLabel(t)))}getAriaLabel(){return gO.toLabel(this._os,this._chords,(t=>this._getAriaLabel(t)))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:AO.toLabel(this._os,this._chords,(t=>this._getElectronAccelerator(t)))}getUserSettingsLabel(){return pO.toLabel(this._os,this._chords,(t=>this._getUserSettingsLabel(t)))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map((t=>this._getChord(t)))}_getChord(t){return new sr(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,this._getLabel(t),this._getAriaLabel(t))}getDispatchChords(){return this._chords.map((t=>this._getChordDispatch(t)))}getSingleModifierDispatchChords(){return this._chords.map((t=>this._getSingleModifierChordDispatch(t)))}}class vO extends mO{constructor(t,i){super(i,t)}_keyCodeToUILabel(t){if(this._os===2)switch(t){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return Le.toString(t)}_getLabel(t){return t.isDuplicateModifierCase()?"":this._keyCodeToUILabel(t.keyCode)}_getAriaLabel(t){return t.isDuplicateModifierCase()?"":Le.toString(t.keyCode)}_getElectronAccelerator(t){return Le.toElectronAccelerator(t.keyCode)}_getUserSettingsLabel(t){if(t.isDuplicateModifierCase())return"";const i=Le.toUserSettingsUS(t.keyCode);return i&&i.toLowerCase()}_getChordDispatch(t){return vO.getDispatchStr(t)}static getDispatchStr(t){if(t.isModifierKey())return null;let i="";return t.ctrlKey&&(i+="ctrl+"),t.shiftKey&&(i+="shift+"),t.altKey&&(i+="alt+"),t.metaKey&&(i+="meta+"),i+=Le.toString(t.keyCode),i}_getSingleModifierChordDispatch(t){return t.keyCode!==5||t.shiftKey||t.altKey||t.metaKey?t.keyCode!==4||t.ctrlKey||t.altKey||t.metaKey?t.keyCode!==6||t.ctrlKey||t.shiftKey||t.metaKey?t.keyCode!==57||t.ctrlKey||t.shiftKey||t.altKey?null:"meta":"alt":"shift":"ctrl"}static _scanCodeToKeyCode(t){const i=Ie[t];if(i!==-1)return i;switch(t){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(t){if(!t)return null;if(t instanceof ir)return t;const i=this._scanCodeToKeyCode(t.scanCode);return i===0?null:new ir(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,i)}static resolveKeybinding(t,i){const e=uO(t.chords.map((t=>this._toKeyCodeChord(t))));return e.length>0?[new vO(e,i)]:[]}}const bO=za("labelService"),yO=za("progressService");class kO{constructor(t){this.callback=t}report(t){this._value=t,this.callback(this._value)}}kO.None=Object.freeze({report(){}});const xO=za("editorProgressService");class CO{constructor(){this._value="",this._pos=0}reset(t){return this._value=t,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(t){return t.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}class EO{constructor(t=!0){this._caseSensitive=t}reset(t){return this._value=t,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let t=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46){if(!t)break;this._from++}else t=!1;return this}cmp(t){return this._caseSensitive?ho(t,this._value,0,t.length,this._from,this._to):ao(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class BO{constructor(t=!0,i=!0){this._splitOnBackslash=t,this._caseSensitive=i}reset(t){this._from=0,this._to=0,this._value=t,this._valueLen=t.length;for(let i=t.length-1;i>=0;i--,this._valueLen--){const t=this._value.charCodeAt(i);if(!(t===47||this._splitOnBackslash&&t===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let t=!0;for(;this._to<this._valueLen;this._to++){const i=this._value.charCodeAt(this._to);if(i===47||this._splitOnBackslash&&i===92){if(!t)break;this._from++}else t=!1}return this}cmp(t){return this._caseSensitive?ho(t,this._value,0,t.length,this._from,this._to):ao(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class DO{constructor(t,i){this._ignorePathCasing=t,this._ignoreQueryAndFragment=i,this._states=[],this._stateIdx=0}reset(t){return this._value=t,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new BO(!1,!this._ignorePathCasing(t)),this._pathIterator.reset(t.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(t)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(t){if(this._states[this._stateIdx]===1)return co(t,this._value.scheme);if(this._states[this._stateIdx]===2)return co(t,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(t);if(this._states[this._stateIdx]===4)return ro(t,this._value.query);if(this._states[this._stateIdx]===5)return ro(t,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class MO{constructor(){this.height=1}rotateLeft(){const t=this.right;return this.right=t.left,t.left=this,this.updateHeight(),t.updateHeight(),t}rotateRight(){const t=this.left;return this.left=t.right,t.right=this,this.updateHeight(),t.updateHeight(),t}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var t,i;return(i=(t=this.left)===null||t===void 0?void 0:t.height)!==null&&i!==void 0?i:0}get heightRight(){var t,i;return(i=(t=this.right)===null||t===void 0?void 0:t.height)!==null&&i!==void 0?i:0}}class SO{static forUris(t=(()=>!1),i=(()=>!1)){return new SO(new DO(t,i))}static forStrings(){return new SO(new CO)}static forConfigKeys(){return new SO(new EO)}constructor(t){this._iter=t}clear(){this._root=void 0}set(t,i){const e=this._iter.reset(t);let s;this._root||(this._root=new MO,this._root.segment=e.value());const n=[];for(s=this._root;;){const t=e.cmp(s.segment);if(t>0)s.left||(s.left=new MO,s.left.segment=e.value()),n.push([-1,s]),s=s.left;else if(t<0)s.right||(s.right=new MO,s.right.segment=e.value()),n.push([1,s]),s=s.right;else{if(!e.hasNext())break;e.next(),s.mid||(s.mid=new MO,s.mid.segment=e.value()),n.push([0,s]),s=s.mid}}const o=s.value;s.value=i,s.key=t;for(let t=n.length-1;t>=0;t--){const i=n[t][1];i.updateHeight();const e=i.balanceFactor();if(e<-1||e>1){const e=n[t][0],s=n[t+1][0];if(e===1&&s===1)n[t][1]=i.rotateLeft();else if(e===-1&&s===-1)n[t][1]=i.rotateRight();else if(e===1&&s===-1)i.right=n[t+1][1]=n[t+1][1].rotateRight(),n[t][1]=i.rotateLeft();else{if(e!==-1||s!==1)throw new Error;i.left=n[t+1][1]=n[t+1][1].rotateLeft(),n[t][1]=i.rotateRight()}if(t>0)switch(n[t-1][0]){case-1:n[t-1][1].left=n[t][1];break;case 1:n[t-1][1].right=n[t][1];break;case 0:n[t-1][1].mid=n[t][1]}else this._root=n[0][1]}}return o}get(t){var i;return(i=this._getNode(t))===null||i===void 0?void 0:i.value}_getNode(t){const i=this._iter.reset(t);let e=this._root;for(;e;){const t=i.cmp(e.segment);if(t>0)e=e.left;else if(t<0)e=e.right;else{if(!i.hasNext())break;i.next(),e=e.mid}}return e}has(t){const i=this._getNode(t);return!((i==null?void 0:i.value)===void 0&&(i==null?void 0:i.mid)===void 0)}delete(t){return this._delete(t,!1)}deleteSuperstr(t){return this._delete(t,!0)}_delete(t,i){var e;const s=this._iter.reset(t),n=[];let o=this._root;for(;o;){const t=s.cmp(o.segment);if(t>0)n.push([-1,o]),o=o.left;else if(t<0)n.push([1,o]),o=o.right;else{if(!s.hasNext())break;s.next(),n.push([0,o]),o=o.mid}}if(o){if(i?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const t=this._min(o.right);if(t.key){const{key:i,value:e,segment:s}=t;this._delete(t.key,!1),o.key=i,o.value=e,o.segment=s}}else{const t=(e=o.left)!==null&&e!==void 0?e:o.right;if(n.length>0){const[i,e]=n[n.length-1];switch(i){case-1:e.left=t;break;case 0:e.mid=t;break;case 1:e.right=t}}else this._root=t}for(let t=n.length-1;t>=0;t--){const i=n[t][1];i.updateHeight();const e=i.balanceFactor();if(e>1?(i.right.balanceFactor()>=0||(i.right=i.right.rotateRight()),n[t][1]=i.rotateLeft()):e<-1&&(i.left.balanceFactor()<=0||(i.left=i.left.rotateLeft()),n[t][1]=i.rotateRight()),t>0)switch(n[t-1][0]){case-1:n[t-1][1].left=n[t][1];break;case 1:n[t-1][1].right=n[t][1];break;case 0:n[t-1][1].mid=n[t][1]}else this._root=n[0][1]}}}_min(t){for(;t.left;)t=t.left;return t}findSubstr(t){const i=this._iter.reset(t);let e,s=this._root;for(;s;){const t=i.cmp(s.segment);if(t>0)s=s.left;else if(t<0)s=s.right;else{if(!i.hasNext())break;i.next(),e=s.value||e,s=s.mid}}return s&&s.value||e}findSuperstr(t){return this._findSuperstrOrElement(t,!1)}_findSuperstrOrElement(t,i){const e=this._iter.reset(t);let s=this._root;for(;s;){const t=e.cmp(s.segment);if(t>0)s=s.left;else if(t<0)s=s.right;else{if(!e.hasNext())return s.mid?this._entries(s.mid):i?s.value:void 0;e.next(),s=s.mid}}}forEach(t){for(const[i,e]of this)t(e,i)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(t){const i=[];return this._dfsEntries(t,i),i[Symbol.iterator]()}_dfsEntries(t,i){t&&(t.left&&this._dfsEntries(t.left,i),t.value&&i.push([t.key,t.value]),t.mid&&this._dfsEntries(t.mid,i),t.right&&this._dfsEntries(t.right,i))}}const FO=za("contextService");function IO(t){const i=t;return typeof(i==null?void 0:i.id)=="string"&&fs.isUri(i.uri)}function LO(t){const i=t;return typeof(i==null?void 0:i.id)=="string"&&!IO(t)&&!function(t){const i=t;return typeof(i==null?void 0:i.id)=="string"&&fs.isUri(i.configPath)}(t)}const RO={id:"ext-dev"},TO={id:"empty-window"};class NO{constructor(t,i){this.raw=i,this.uri=t.uri,this.index=t.index,this.name=t.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const QO="code-workspace";st(0,"Code Workspace");const OO="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var zO,UO,HO,PO,jO,WO,YO,_O;(function(t){t.inspectTokensAction=st(0,"Developer: Inspect Tokens")})(zO||(zO={})),function(t){t.gotoLineActionLabel=st(0,"Go to Line/Column...")}(UO||(UO={})),function(t){t.helpQuickAccessActionLabel=st(0,"Show all Quick Access Providers")}(HO||(HO={})),function(t){t.quickCommandActionLabel=st(0,"Command Palette"),t.quickCommandHelp=st(0,"Show And Run Commands")}(PO||(PO={})),function(t){t.quickOutlineActionLabel=st(0,"Go to Symbol..."),t.quickOutlineByCategoryActionLabel=st(0,"Go to Symbol by Category...")}(jO||(jO={})),function(t){t.editorViewAccessibleLabel=st(0,"Editor content"),t.accessibilityHelpMessage=st(0,"Press Alt+F1 for Accessibility Options.")}(WO||(WO={})),function(t){t.toggleHighContrast=st(0,"Toggle High Contrast Theme")}(YO||(YO={})),function(t){t.bulkEditServiceSummary=st(0,"Made {0} edits in {1} files")}(_O||(_O={}));const VO=za("workspaceTrustManagementService");let JO=[],GO=[],KO=[];function $O(t,i=!1){(function(t,i,e){const s=function(t,i){return{id:t.id,mime:t.mime,filename:t.filename,extension:t.extension,filepattern:t.filepattern,firstline:t.firstline,userConfigured:i,filenameLowercase:t.filename?t.filename.toLowerCase():void 0,extensionLowercase:t.extension?t.extension.toLowerCase():void 0,filepatternLowercase:t.filepattern?XR(t.filepattern.toLowerCase()):void 0,filepatternOnPath:!!t.filepattern&&t.filepattern.indexOf(Ze.sep)>=0}}(t,i);JO.push(s),s.userConfigured?KO.push(s):GO.push(s),e&&!s.userConfigured&&JO.forEach((t=>{t.mime===s.mime||t.userConfigured||(s.extension&&t.extension===s.extension&&console.warn(`Overwriting extension <<${s.extension}>> to now point to mime <<${s.mime}>>`),s.filename&&t.filename===s.filename&&console.warn(`Overwriting filename <<${s.filename}>> to now point to mime <<${s.mime}>>`),s.filepattern&&t.filepattern===s.filepattern&&console.warn(`Overwriting filepattern <<${s.filepattern}>> to now point to mime <<${s.mime}>>`),s.firstline&&t.firstline===s.firstline&&console.warn(`Overwriting firstline <<${s.firstline}>> to now point to mime <<${s.mime}>>`))}))})(t,!1,i)}function XO(t,i){return function(t,i){let e;if(t)switch(t.scheme){case Lh.file:e=t.fsPath;break;case Lh.data:e=NM.parseMetaData(t).get(NM.META_DATA_LABEL);break;case Lh.vscodeNotebookCell:e=void 0;break;default:e=t.path}if(!e)return[{id:"unknown",mime:jd.unknown}];e=e.toLowerCase();const s=ns(e),n=qO(e,s,KO);if(n)return[n,{id:ef,mime:jd.text}];const o=qO(e,s,GO);if(o)return[o,{id:ef,mime:jd.text}];if(i){const t=function(t){if(No(t)&&(t=t.substr(1)),t.length>0)for(let i=JO.length-1;i>=0;i--){const e=JO[i];if(!e.firstline)continue;const s=t.match(e.firstline);if(s&&s.length>0)return e}}(i);if(t)return[t,{id:ef,mime:jd.text}]}return[{id:"unknown",mime:jd.unknown}]}(t,i).map((t=>t.id))}function qO(t,i,e){var s;let n,o,r;for(let h=e.length-1;h>=0;h--){const c=e[h];if(i===c.filenameLowercase){n=c;break}if(c.filepattern&&(!o||c.filepattern.length>o.filepattern.length)){const e=c.filepatternOnPath?t:i;!((s=c.filepatternLowercase)===null||s===void 0)&&s.call(c,e)&&(o=c)}c.extension&&(!r||c.extension.length>r.extension.length)&&i.endsWith(c.extensionLowercase)&&(r=c)}return n||o||r||void 0}const ZO=Object.prototype.hasOwnProperty,tz="vs.editor.nullLanguage";class iz{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(tz,0),this._register(ef,1),this._nextLanguageId=2}_register(t,i){this._languageIdToLanguage[i]=t,this._languageToLanguageId.set(t,i)}register(t){if(this._languageToLanguageId.has(t))return;const i=this._nextLanguageId++;this._register(t,i)}encodeLanguageId(t){return this._languageToLanguageId.get(t)||0}decodeLanguageId(t){return this._languageIdToLanguage[t]||tz}}class ez extends te{constructor(t=!0,i=!1){super(),this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,ez.instanceCount++,this._warnOnOverwrite=i,this.languageIdCodec=new iz,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},t&&(this._initializeFromRegistry(),this._register(tf.onDidChangeLanguages((t=>{this._initializeFromRegistry()}))))}dispose(){ez.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},JO=JO.filter((t=>t.userConfigured)),GO=[];const t=[].concat(tf.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(t)}_registerLanguages(t){for(const i of t)this._registerLanguage(i);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach((t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach((t=>{this._lowercaseNameMap[t.toLowerCase()]=i.identifier})),i.mimetypes.forEach((t=>{this._mimeTypesMap[t]=i.identifier}))})),Vl.as(_d).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(t){const i=t.id;let e;ZO.call(this._languages,i)?e=this._languages[i]:(this.languageIdCodec.register(i),e={identifier:i,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[i]=e),this._mergeLanguage(e,t)}_mergeLanguage(t,i){const e=i.id;let s=null;if(Array.isArray(i.mimetypes)&&i.mimetypes.length>0&&(t.mimetypes.push(...i.mimetypes),s=i.mimetypes[0]),s||(s=`text/x-${e}`,t.mimetypes.push(s)),Array.isArray(i.extensions)){i.configuration?t.extensions=i.extensions.concat(t.extensions):t.extensions=t.extensions.concat(i.extensions);for(const t of i.extensions)$O({id:e,mime:s,extension:t},this._warnOnOverwrite)}if(Array.isArray(i.filenames))for(const n of i.filenames)$O({id:e,mime:s,filename:n},this._warnOnOverwrite),t.filenames.push(n);if(Array.isArray(i.filenamePatterns))for(const t of i.filenamePatterns)$O({id:e,mime:s,filepattern:t},this._warnOnOverwrite);if(typeof i.firstLine=="string"&&i.firstLine.length>0){let t=i.firstLine;t.charAt(0)!=="^"&&(t="^"+t);try{const i=new RegExp(t);(n=i).source!=="^"&&n.source!=="^$"&&n.source!=="$"&&n.source!=="^\\s*$"&&n.exec("")&&n.lastIndex===0||$O({id:e,mime:s,firstline:i},this._warnOnOverwrite)}catch(e){console.warn(`[${i.id}]: Invalid regular expression \`${t}\`: `,e)}}var n;t.aliases.push(e);let o=null;if(i.aliases!==void 0&&Array.isArray(i.aliases)&&(o=i.aliases.length===0?[null]:i.aliases),o!==null)for(const i of o)i&&i.length!==0&&t.aliases.push(i);const r=o!==null&&o.length>0;if(!(r&&o[0]===null)){const i=(r?o[0]:null)||e;!r&&t.name||(t.name=i)}i.configuration&&t.configurationFiles.push(i.configuration),i.icon&&t.icons.push(i.icon)}isRegisteredLanguageId(t){return!!t&&ZO.call(this._languages,t)}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(t){const i=t.toLowerCase();return ZO.call(this._lowercaseNameMap,i)?this._lowercaseNameMap[i]:null}getLanguageIdByMimeType(t){return t&&ZO.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:null}guessLanguageIdByFilepathOrFirstLine(t,i){return t||i?XO(t,i):[]}}ez.instanceCount=0;class sz extends te{constructor(t=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new de),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new de),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new de({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,sz.instanceCount++,this._registry=this._register(new ez(!0,t)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange((()=>this._onDidChange.fire())))}dispose(){sz.instanceCount--,super.dispose()}isRegisteredLanguageId(t){return this._registry.isRegisteredLanguageId(t)}getLanguageIdByLanguageName(t){return this._registry.getLanguageIdByLanguageName(t)}getLanguageIdByMimeType(t){return this._registry.getLanguageIdByMimeType(t)}guessLanguageIdByFilepathOrFirstLine(t,i){return m(this._registry.guessLanguageIdByFilepathOrFirstLine(t,i),null)}createById(t){return new nz(this.onDidChange,(()=>this._createAndGetLanguageIdentifier(t)))}createByFilepathOrFirstLine(t,i){return new nz(this.onDidChange,(()=>{const e=this.guessLanguageIdByFilepathOrFirstLine(t,i);return this._createAndGetLanguageIdentifier(e)}))}_createAndGetLanguageIdentifier(t){return t&&this.isRegisteredLanguageId(t)||(t=ef),t}requestBasicLanguageFeatures(t){this._requestedBasicLanguages.has(t)||(this._requestedBasicLanguages.add(t),this._onDidRequestBasicLanguageFeatures.fire(t))}requestRichLanguageFeatures(t){this._requestedRichLanguages.has(t)||(this._requestedRichLanguages.add(t),this.requestBasicLanguageFeatures(t),Gs.getOrCreate(t),this._onDidRequestRichLanguageFeatures.fire(t))}}sz.instanceCount=0;class nz{constructor(t,i){this._onDidChangeLanguages=t,this._selector=i,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages((()=>this._evaluate()))),this._emitter||(this._emitter=new de({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var t;const i=this._selector();i!==this.languageId&&(this.languageId=i,(t=this._emitter)===null||t===void 0||t.fire(this.languageId))}}const oz={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:jd.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};let rz=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});const hz=new _n((()=>rz("mouse",!1))),cz=new _n((()=>rz("element",!1)));function az(t){return t==="element"?cz.value:hz.value}function lz(){return rz("element",!0)}class uz{constructor(t,i,e){this.hoverDelegate=t,this.target=i,this.fadeInAnimation=e}async update(t,i,e){var s;if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let n;if(t===void 0||N(t)||t instanceof HTMLElement)n=t;else if(V(t.markdown)){this._hoverWidget||this.show(st(0,"Loading..."),i),this._cancellationTokenSource=new xe;const e=this._cancellationTokenSource.token;if(n=await t.markdown(e),n===void 0&&(n=t.markdownNotSupportedFallback),this.isDisposed||e.isCancellationRequested)return}else n=(s=t.markdown)!==null&&s!==void 0?s:t.markdownNotSupportedFallback;this.show(n,i,e)}show(t,i,e){const s=this._hoverWidget;if(this.hasContent(t)){const n={content:t,target:this.target,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!s},position:{hoverPosition:2},...e};this._hoverWidget=this.hoverDelegate.showHover(n,i)}s==null||s.dispose()}hasContent(t){return!!t&&(!NN(t)||!!t.value)}get isDisposed(){var t;return(t=this._hoverWidget)===null||t===void 0?void 0:t.isDisposed}dispose(){var t,i;(t=this._hoverWidget)===null||t===void 0||t.dispose(),(i=this._cancellationTokenSource)===null||i===void 0||i.dispose(!0),this._cancellationTokenSource=void 0}}function dz(t,i){for(i=i??Gh(t).document.body;!t.hasAttribute("custom-hover")&&t!==i;)t=t.parentElement;return t}function fz(t,i,e,s){let n,o;i.setAttribute("custom-hover","true"),i.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",i.title),i.title="");const r=(i,e)=>{var s;const r=o!==void 0;i&&(o==null||o.dispose(),o=void 0),e&&(n==null||n.dispose(),n=void 0),r&&((s=t.onDidHideHover)===null||s===void 0||s.call(t),o=void 0)},h=(n,r,h)=>new xr((async()=>{o&&!o.isDisposed||(o=new uz(t,h||i,n>0),await o.update(typeof e=="function"?e():e,r,s))}),n);let c=!1;const a=rc(i,$c.MOUSE_DOWN,(()=>{c=!0,r(!0,!0)}),!0),l=rc(i,$c.MOUSE_UP,(()=>{c=!1}),!0),u=rc(i,$c.MOUSE_LEAVE,(t=>{c=!1,r(!1,t.fromElement===i)}),!0),d=rc(i,$c.MOUSE_OVER,(e=>{if(n)return;const s=new Zi,o={targetElements:[i],dispose:()=>{}};if(t.placement===void 0||t.placement==="mouse"){const t=t=>{o.x=t.x+10,t.target instanceof HTMLElement&&dz(t.target,i)!==i&&r(!0,!0)};s.add(rc(i,$c.MOUSE_MOVE,t,!0))}n=s,e.target instanceof HTMLElement&&dz(e.target,i)!==i||s.add(h(t.delay,!1,o))}),!0),f=()=>{if(c||n)return;const e={targetElements:[i],dispose:()=>{}},s=new Zi;s.add(rc(i,$c.BLUR,(()=>r(!0,!0)),!0)),s.add(h(t.delay,!1,e)),n=s};let g;const A=i.tagName.toLowerCase();return A!=="input"&&A!=="textarea"&&(g=rc(i,$c.FOCUS,f,!0)),{show:t=>{r(!1,!0),h(0,t)},hide:()=>{r(!0,!0)},update:async(t,i)=>{e=t,await(o==null?void 0:o.update(e,void 0,i))},dispose:()=>{d.dispose(),u.dispose(),a.dispose(),l.dispose(),g==null||g.dispose(),r(!0,!0)}}}class gz{constructor(t){this.spliceables=t}splice(t,i,e){this.spliceables.forEach((s=>s.splice(t,i,e)))}}class Az extends Error{constructor(t,i){super(`ListError [${t}] ${i}`)}}function pz(t,i){const e=[];for(const s of i){if(t.start>=s.range.end)continue;if(t.end<s.range.start)break;const i=EQ.intersect(t,s.range);EQ.isEmpty(i)||e.push({range:i,size:s.size})}return e}function wz({start:t,end:i},e){return{start:t+e,end:i+e}}class mz{get paddingTop(){return this._paddingTop}set paddingTop(t){this._size=this._size+t-this._paddingTop,this._paddingTop=t}constructor(t){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=t??0,this._size=this._paddingTop}splice(t,i,e=[]){const s=e.length-i,n=pz({start:0,end:t},this.groups),o=pz({start:t+i,end:Number.POSITIVE_INFINITY},this.groups).map((t=>({range:wz(t.range,s),size:t.size}))),r=e.map(((i,e)=>({range:{start:t+e,end:t+e+1},size:i.size})));this.groups=function(...t){return function(t){const i=[];let e=null;for(const s of t){const t=s.range.start,n=s.range.end,o=s.size;e&&o===e.size?e.range.end=n:(e={range:{start:t,end:n},size:o},i.push(e))}return i}(t.reduce(((t,i)=>t.concat(i)),[]))}(n,r,o),this._size=this._paddingTop+this.groups.reduce(((t,i)=>t+i.size*(i.range.end-i.range.start)),0)}get count(){const t=this.groups.length;return t?this.groups[t-1].range.end:0}get size(){return this._size}indexAt(t){if(t<0)return-1;if(t<this._paddingTop)return 0;let i=0,e=this._paddingTop;for(const s of this.groups){const n=s.range.end-s.range.start,o=e+n*s.size;if(t<o)return i+Math.floor((t-e)/s.size);i+=n,e=o}return i}indexAfter(t){return Math.min(this.indexAt(t)+1,this.count)}positionAt(t){if(t<0)return-1;let i=0,e=0;for(const s of this.groups){const n=s.range.end-s.range.start,o=e+n;if(t<o)return this._paddingTop+i+(t-e)*s.size;i+=n*s.size,e=o}return-1}}class vz{constructor(t){this.renderers=t,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(t){let i=this.getTemplateCache(t).pop(),e=!1;if(i)e=this.transactionNodesPendingRemoval.has(i.domNode),e&&this.transactionNodesPendingRemoval.delete(i.domNode);else{const e=ha(".monaco-list-row");i={domNode:e,templateId:t,templateData:this.getRenderer(t).renderTemplate(e)}}return{row:i,isReusingConnectedDomNode:e}}release(t){t&&this.releaseRow(t)}transact(t){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{t()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(t){const{domNode:i,templateId:e}=t;i&&(this.inTransaction?this.transactionNodesPendingRemoval.add(i):this.doRemoveNode(i)),this.getTemplateCache(e).push(t)}doRemoveNode(t){t.classList.remove("scrolling"),function(t){var i;try{(i=t.parentElement)===null||i===void 0||i.removeChild(t)}catch{}}(t)}getTemplateCache(t){let i=this.cache.get(t);return i||(i=[],this.cache.set(t,i)),i}dispose(){this.cache.forEach(((t,i)=>{for(const e of t)this.getRenderer(i).disposeTemplate(e.templateData),e.templateData=null})),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(t){const i=this.renderers.get(t);if(!i)throw new Error(`No renderer found for ${t}`);return i}}var bz=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};const yz={CurrentDragAndDropData:void 0},kz={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements:t=>[t],getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class xz{constructor(t){this.elements=t}update(){}getData(){return this.elements}}class Cz{constructor(t){this.elements=t}update(){}getData(){return this.elements}}class Ez{constructor(){this.types=[],this.files=[]}update(t){if(t.types&&this.types.splice(0,this.types.length,...t.types),t.files){this.files.splice(0,this.files.length);for(let i=0;i<t.files.length;i++){const e=t.files.item(i);e&&(e.size||e.type)&&this.files.push(e)}}}getData(){return{types:this.types,files:this.files}}}class Bz{constructor(t){t!=null&&t.getSetSize?this.getSetSize=t.getSetSize.bind(t):this.getSetSize=(t,i,e)=>e,t!=null&&t.getPosInSet?this.getPosInSet=t.getPosInSet.bind(t):this.getPosInSet=(t,i)=>i+1,t!=null&&t.getRole?this.getRole=t.getRole.bind(t):this.getRole=t=>"listitem",t!=null&&t.isChecked?this.isChecked=t.isChecked.bind(t):this.isChecked=t=>{}}}class Dz{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(t){if(t!==this._horizontalScrolling){if(t&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=t,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Cc(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(t,i,e,s=kz){var n,o,r,h,c,a,l,u,d,f,g,A,p;if(this.virtualDelegate=i,this.domId="list_id_"+ ++Dz.InstanceCount,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new mr(50),this.splicing=!1,this.dragOverAnimationStopDisposable=te.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=te.None,this.onDragLeaveTimeout=te.None,this.disposables=new Zi,this._onDidChangeContentHeight=new de,this._onDidChangeContentWidth=new de,this.onDidChangeContentHeight=he.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap((n=s.paddingTop)!==null&&n!==void 0?n:0);for(const t of e)this.renderers.set(t.templateId,t);this.cache=this.disposables.add(new vz(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport!="boolean"||s.mouseSupport),this._horizontalScrolling=(o=s.horizontalScrolling)!==null&&o!==void 0?o:kz.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=s.paddingBottom===void 0?0:s.paddingBottom,this.accessibilityProvider=new Bz(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((r=s.transformOptimization)!==null&&r!==void 0?r:kz.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Wy.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new Zy({forceIntegerValues:!0,smoothScrollDuration:(h=s.smoothScrolling)!==null&&h!==void 0&&h?125:0,scheduleAtNextAnimationFrame:t=>fc(Gh(this.domNode),t)})),this.scrollableElement=this.disposables.add(new hk(this.rowsContainer,{alwaysConsumeMouseWheel:(c=s.alwaysConsumeMouseWheel)!==null&&c!==void 0?c:kz.alwaysConsumeMouseWheel,horizontal:1,vertical:(a=s.verticalScrollMode)!==null&&a!==void 0?a:kz.verticalScrollMode,useShadows:(l=s.useShadows)!==null&&l!==void 0?l:kz.useShadows,mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity,scrollByPage:s.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),t.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(rc(this.rowsContainer,Py.Change,(t=>this.onTouchChange(t)))),this.disposables.add(rc(this.scrollableElement.getDomNode(),"scroll",(t=>t.target.scrollTop=0))),this.disposables.add(rc(this.domNode,"dragover",(t=>this.onDragOver(this.toDragEvent(t))))),this.disposables.add(rc(this.domNode,"drop",(t=>this.onDrop(this.toDragEvent(t))))),this.disposables.add(rc(this.domNode,"dragleave",(t=>this.onDragLeave(this.toDragEvent(t))))),this.disposables.add(rc(this.domNode,"dragend",(t=>this.onDragEnd(t)))),this.setRowLineHeight=(u=s.setRowLineHeight)!==null&&u!==void 0?u:kz.setRowLineHeight,this.setRowHeight=(d=s.setRowHeight)!==null&&d!==void 0?d:kz.setRowHeight,this.supportDynamicHeights=(f=s.supportDynamicHeights)!==null&&f!==void 0?f:kz.supportDynamicHeights,this.dnd=(g=s.dnd)!==null&&g!==void 0?g:this.disposables.add(kz.dnd),this.layout((A=s.initialSize)===null||A===void 0?void 0:A.height,(p=s.initialSize)===null||p===void 0?void 0:p.width)}updateOptions(t){let i;if(t.paddingBottom!==void 0&&(this.paddingBottom=t.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),t.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(t.smoothScrolling?125:0),t.horizontalScrolling!==void 0&&(this.horizontalScrolling=t.horizontalScrolling),t.scrollByPage!==void 0&&(i={...i??{},scrollByPage:t.scrollByPage}),t.mouseWheelScrollSensitivity!==void 0&&(i={...i??{},mouseWheelScrollSensitivity:t.mouseWheelScrollSensitivity}),t.fastScrollSensitivity!==void 0&&(i={...i??{},fastScrollSensitivity:t.fastScrollSensitivity}),i&&this.scrollableElement.updateOptions(i),t.paddingTop!==void 0&&t.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),e=t.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=t.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+e),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(t){return new mz(t)}splice(t,i,e=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(t,i,e)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(t,i,e=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),n={start:t,end:t+i},o=EQ.intersect(s,n),r=new Map;for(let t=o.end-1;t>=o.start;t--){const i=this.items[t];if(i.dragStartDisposable.dispose(),i.checkedDisposable.dispose(),i.row){let e=r.get(i.templateId);e||(e=[],r.set(i.templateId,e));const s=this.renderers.get(i.templateId);s&&s.disposeElement&&s.disposeElement(i.element,t,i.row.templateData,i.size),e.push(i.row)}i.row=null,i.stale=!0}const h={start:t+i,end:this.items.length},c=EQ.intersect(h,s),a=EQ.relativeComplement(h,s),l=e.map((t=>({id:String(this.itemId++),element:t,templateId:this.virtualDelegate.getTemplateId(t),size:this.virtualDelegate.getHeight(t),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(t),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:te.None,checkedDisposable:te.None,stale:!1})));let u;t===0&&i>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,l),u=this.items,this.items=l):(this.rangeMap.splice(t,i,l),u=this.items.splice(t,i,...l));const d=e.length-i,f=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),g=wz(c,d),A=EQ.intersect(f,g);for(let t=A.start;t<A.end;t++)this.updateItemInDOM(this.items[t],t);const p=EQ.relativeComplement(g,f);for(const t of p)for(let i=t.start;i<t.end;i++)this.removeItemFromDOM(i);const w=a.map((t=>wz(t,d))),m=[{start:t,end:t+e.length},...w].map((t=>EQ.intersect(f,t))).reverse();for(const t of m)for(let i=t.end-1;i>=t.start;i--){const t=this.items[i],e=r.get(t.templateId),s=e==null?void 0:e.pop();this.insertItemInDOM(i,s)}for(const t of r.values())for(const i of t)this.cache.release(i);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),u.map((t=>t.element))}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=fc(Gh(this.domNode),(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null})))}eventuallyUpdateScrollWidth(){this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger((()=>this.updateScrollWidth())):this.scrollableElementWidthDelayer.cancel()}updateScrollWidth(){if(!this.horizontalScrolling)return;let t=0;for(const i of this.items)i.width!==void 0&&(t=Math.max(t,i.width));this.scrollWidth=t,this.scrollableElement.setScrollDimensions({scrollWidth:t===0?0:t+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const t of this.items)t.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(t){return this.items[t].element}indexOf(t){return this.items.findIndex((i=>i.element===t))}domElement(t){const i=this.items[t].row;return i&&i.domNode}elementHeight(t){return this.items[t].size}elementTop(t){return this.rangeMap.positionAt(t)}indexAt(t){return this.rangeMap.indexAt(t)}indexAfter(t){return this.rangeMap.indexAfter(t)}layout(t,i){const e={height:typeof t=="number"?t:Ec(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,e.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(e),i!==void 0&&(this.renderWidth=i,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof i=="number"?i:Cc(this.domNode)})}render(t,i,e,s,n,o=!1){const r=this.getRenderRange(i,e),h=EQ.relativeComplement(r,t).reverse(),c=EQ.relativeComplement(t,r);if(o){const i=EQ.intersect(t,r);for(let t=i.start;t<i.end;t++)this.updateItemInDOM(this.items[t],t)}this.cache.transact((()=>{for(const t of c)for(let i=t.start;i<t.end;i++)this.removeItemFromDOM(i);for(const t of h)for(let i=t.end-1;i>=t.start;i--)this.insertItemInDOM(i)})),s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${i}px`,this.horizontalScrolling&&n!==void 0&&(this.rowsContainer.style.width=`${Math.max(n,this.renderWidth)}px`),this.lastRenderTop=i,this.lastRenderHeight=e}insertItemInDOM(t,i){var e,s,n;const o=this.items[t];if(!o.row)if(i)o.row=i,o.stale=!0;else{const t=this.cache.alloc(o.templateId);o.row=t.row,o.stale||(o.stale=t.isReusingConnectedDomNode)}const r=this.accessibilityProvider.getRole(o.element)||"listitem";o.row.domNode.setAttribute("role",r);const h=this.accessibilityProvider.isChecked(o.element);if(typeof h=="boolean")o.row.domNode.setAttribute("aria-checked",String(!!h));else if(h){const t=t=>o.row.domNode.setAttribute("aria-checked",String(!!t));t(h.value),o.checkedDisposable=h.onDidChange(t)}if(o.stale||!o.row.domNode.parentElement){const i=(n=(s=(e=this.items.at(t+1))===null||e===void 0?void 0:e.row)===null||s===void 0?void 0:s.domNode)!==null&&n!==void 0?n:null;this.rowsContainer.insertBefore(o.row.domNode,i),o.stale=!1}this.updateItemInDOM(o,t);const c=this.renderers.get(o.templateId);if(!c)throw new Error(`No renderer found for template id ${o.templateId}`);c==null||c.renderElement(o.element,t,o.row.templateData,o.size);const a=this.dnd.getDragURI(o.element);o.dragStartDisposable.dispose(),o.row.domNode.draggable=!!a,a&&(o.dragStartDisposable=rc(o.row.domNode,"dragstart",(t=>this.onDragStart(o.element,a,t)))),this.horizontalScrolling&&(this.measureItemWidth(o),this.eventuallyUpdateScrollWidth())}measureItemWidth(t){if(!t.row||!t.row.domNode)return;t.row.domNode.style.width="fit-content",t.width=Cc(t.row.domNode);const i=Gh(t.row.domNode).getComputedStyle(t.row.domNode);i.paddingLeft&&(t.width+=parseFloat(i.paddingLeft)),i.paddingRight&&(t.width+=parseFloat(i.paddingRight)),t.row.domNode.style.width=""}updateItemInDOM(t,i){t.row.domNode.style.top=`${this.elementTop(i)}px`,this.setRowHeight&&(t.row.domNode.style.height=`${t.size}px`),this.setRowLineHeight&&(t.row.domNode.style.lineHeight=`${t.size}px`),t.row.domNode.setAttribute("data-index",`${i}`),t.row.domNode.setAttribute("data-last-element",i===this.length-1?"true":"false"),t.row.domNode.setAttribute("data-parity",i%2==0?"even":"odd"),t.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t.element,i,this.length))),t.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t.element,i))),t.row.domNode.setAttribute("id",this.getElementDomId(i)),t.row.domNode.classList.toggle("drop-target",t.dropTarget)}removeItemFromDOM(t){const i=this.items[t];if(i.dragStartDisposable.dispose(),i.checkedDisposable.dispose(),i.row){const e=this.renderers.get(i.templateId);e&&e.disposeElement&&e.disposeElement(i.element,t,i.row.templateData,i.size),this.cache.release(i.row),i.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(t,i){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:t,reuseAnimation:i})}get scrollTop(){return this.getScrollTop()}set scrollTop(t){this.setScrollTop(t)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return he.map(this.disposables.add(new gk(this.domNode,"click")).event,(t=>this.toMouseEvent(t)),this.disposables)}get onMouseDblClick(){return he.map(this.disposables.add(new gk(this.domNode,"dblclick")).event,(t=>this.toMouseEvent(t)),this.disposables)}get onMouseMiddleClick(){return he.filter(he.map(this.disposables.add(new gk(this.domNode,"auxclick")).event,(t=>this.toMouseEvent(t)),this.disposables),(t=>t.browserEvent.button===1),this.disposables)}get onMouseDown(){return he.map(this.disposables.add(new gk(this.domNode,"mousedown")).event,(t=>this.toMouseEvent(t)),this.disposables)}get onMouseOver(){return he.map(this.disposables.add(new gk(this.domNode,"mouseover")).event,(t=>this.toMouseEvent(t)),this.disposables)}get onMouseOut(){return he.map(this.disposables.add(new gk(this.domNode,"mouseout")).event,(t=>this.toMouseEvent(t)),this.disposables)}get onContextMenu(){return he.any(he.map(this.disposables.add(new gk(this.domNode,"contextmenu")).event,(t=>this.toMouseEvent(t)),this.disposables),he.map(this.disposables.add(new gk(this.domNode,Py.Contextmenu)).event,(t=>this.toGestureEvent(t)),this.disposables))}get onTouchStart(){return he.map(this.disposables.add(new gk(this.domNode,"touchstart")).event,(t=>this.toTouchEvent(t)),this.disposables)}get onTap(){return he.map(this.disposables.add(new gk(this.rowsContainer,Py.Tap)).event,(t=>this.toGestureEvent(t)),this.disposables)}toMouseEvent(t){const i=this.getItemIndexFromEventTarget(t.target||null),e=i===void 0?void 0:this.items[i];return{browserEvent:t,index:i,element:e&&e.element}}toTouchEvent(t){const i=this.getItemIndexFromEventTarget(t.target||null),e=i===void 0?void 0:this.items[i];return{browserEvent:t,index:i,element:e&&e.element}}toGestureEvent(t){const i=this.getItemIndexFromEventTarget(t.initialTarget||null),e=i===void 0?void 0:this.items[i];return{browserEvent:t,index:i,element:e&&e.element}}toDragEvent(t){const i=this.getItemIndexFromEventTarget(t.target||null),e=i===void 0?void 0:this.items[i];return{browserEvent:t,index:i,element:e&&e.element,sector:this.getTargetSector(t,i)}}onScroll(t){try{const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(i,t.scrollTop,t.height,t.scrollLeft,t.scrollWidth),this.supportDynamicHeights&&this._rerender(t.scrollTop,t.height,t.inSmoothScrolling)}catch(i){throw console.error("Got bad scroll event:",t),i}}onTouchChange(t){t.preventDefault(),t.stopPropagation(),this.scrollTop-=t.translationY}onDragStart(t,i,e){var s,n;if(!e.dataTransfer)return;const o=this.dnd.getDragElements(t);if(e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData(oz.TEXT,i),e.dataTransfer.setDragImage){let t;this.dnd.getDragLabel&&(t=this.dnd.getDragLabel(o,e)),t===void 0&&(t=String(o.length));const i=ha(".monaco-drag-image");i.textContent=t;const s=(t=>{for(;t&&!t.classList.contains("monaco-workbench");)t=t.parentElement;return t||this.domNode.ownerDocument})(this.domNode);s.appendChild(i),e.dataTransfer.setDragImage(i,-10,-10),setTimeout((()=>s.removeChild(i)),0)}this.domNode.classList.add("dragging"),this.currentDragData=new xz(o),yz.CurrentDragAndDropData=new Cz(o),(n=(s=this.dnd).onDragStart)===null||n===void 0||n.call(s,this.currentDragData,e)}onDragOver(t){var i,e;if(t.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),yz.CurrentDragAndDropData&&yz.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(t.browserEvent),!t.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(yz.CurrentDragAndDropData)this.currentDragData=yz.CurrentDragAndDropData;else{if(!t.browserEvent.dataTransfer.types)return!1;this.currentDragData=new Ez}const s=this.dnd.onDragOver(this.currentDragData,t.element,t.index,t.sector,t.browserEvent);if(this.canDrop=typeof s=="boolean"?s:s.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;let n;t.browserEvent.dataTransfer.dropEffect=typeof s!="boolean"&&((i=s.effect)===null||i===void 0?void 0:i.type)===0?"copy":"move",n=typeof s!="boolean"&&s.feedback?s.feedback:t.index===void 0?[-1]:[t.index],n=w(n).filter((t=>t>=-1&&t<this.length)).sort(((t,i)=>t-i)),n=n[0]===-1?[-1]:n;let o=typeof s!="boolean"&&s.effect&&s.effect.position?s.effect.position:"drop-target";if(r=this.currentDragFeedback,c=n,(Array.isArray(r)&&Array.isArray(c)?h(r,c):r===c)&&this.currentDragFeedbackPosition===o)return!0;var r,c;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=o,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(o),this.rowsContainer.classList.add(o),this.currentDragFeedbackDisposable=qi((()=>{this.domNode.classList.remove(o),this.rowsContainer.classList.remove(o)}));else{if(n.length>1&&o!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");o==="drop-target-after"&&n[0]<this.length-1&&(n[0]+=1,o="drop-target-before");for(const t of n){const i=this.items[t];i.dropTarget=!0,(e=i.row)===null||e===void 0||e.domNode.classList.add(o)}this.currentDragFeedbackDisposable=qi((()=>{var t;for(const i of n){const e=this.items[i];e.dropTarget=!1,(t=e.row)===null||t===void 0||t.domNode.classList.remove(o)}}))}return!0}onDragLeave(t){var i,e;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=yr((()=>this.clearDragOverFeedback()),100,this.disposables),this.currentDragData&&((e=(i=this.dnd).onDragLeave)===null||e===void 0||e.call(i,this.currentDragData,t.element,t.index,t.browserEvent))}onDrop(t){if(!this.canDrop)return;const i=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,yz.CurrentDragAndDropData=void 0,i&&t.browserEvent.dataTransfer&&(t.browserEvent.preventDefault(),i.update(t.browserEvent.dataTransfer),this.dnd.drop(i,t.element,t.index,t.sector,t.browserEvent))}onDragEnd(t){var i,e;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,yz.CurrentDragAndDropData=void 0,(e=(i=this.dnd).onDragEnd)===null||e===void 0||e.call(i,t)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=te.None}setupDragAndDropScrollTopAnimation(t){if(!this.dragOverAnimationDisposable){const t=bc(this.domNode).top;this.dragOverAnimationDisposable=function(t,i){const e=()=>{i(),s=fc(t,e)};let s=fc(t,e);return qi((()=>s.dispose()))}(Gh(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=yr((()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}),1e3,this.disposables),this.dragOverMouseY=t.pageY}animateDragAndDropScrollTop(t){if(this.dragOverMouseY===void 0)return;const i=this.dragOverMouseY-t,e=this.renderHeight-35;i<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(i-35))):i>e&&(this.scrollTop+=Math.min(14,Math.floor(.3*(i-e))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(t,i){if(i===void 0)return;const e=t.offsetY/this.items[i].size;return rR(Math.floor(e/.25),0,3)}getItemIndexFromEventTarget(t){const i=this.scrollableElement.getDomNode();let e=t;for(;e instanceof HTMLElement&&e!==this.rowsContainer&&i.contains(e);){const t=e.getAttribute("data-index");if(t){const i=Number(t);if(!isNaN(i))return i}e=e.parentElement}}getRenderRange(t,i){return{start:this.rangeMap.indexAt(t),end:this.rangeMap.indexAfter(t+i-1)}}_rerender(t,i,e){const s=this.getRenderRange(t,i);let n,o;t===this.elementTop(s.start)?(n=s.start,o=0):s.end-s.start>1&&(n=s.start+1,o=this.elementTop(n)-t);let r=0;for(;;){const h=this.getRenderRange(t,i);let c=!1;for(let t=h.start;t<h.end;t++){const i=this.probeDynamicHeight(t);i!==0&&this.rangeMap.splice(t,1,[this.items[t]]),r+=i,c=c||i!==0}if(!c){r!==0&&this.eventuallyUpdateScrollDimensions();const i=EQ.relativeComplement(s,h);for(const t of i)for(let i=t.start;i<t.end;i++)this.items[i].row&&this.removeItemFromDOM(i);const c=EQ.relativeComplement(h,s).reverse();for(const t of c)for(let i=t.end-1;i>=t.start;i--)this.insertItemInDOM(i);for(let t=h.start;t<h.end;t++)this.items[t].row&&this.updateItemInDOM(this.items[t],t);if(typeof n=="number"){const i=this.scrollable.getFutureScrollPosition().scrollTop-t,s=this.elementTop(n)-o+i;this.setScrollTop(s,e)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}}probeDynamicHeight(t){var i,e,s;const n=this.items[t];if(this.virtualDelegate.getDynamicHeight){const t=this.virtualDelegate.getDynamicHeight(n.element);if(t!==null){const i=n.size;return n.size=t,n.lastDynamicHeightWidth=this.renderWidth,t-i}}if(!n.hasDynamicHeight||n.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(n.element))return 0;const o=n.size;if(n.row)return n.row.domNode.style.height="",n.size=n.row.domNode.offsetHeight,n.size!==0||Dc(n.row.domNode,Gh(n.row.domNode).document.body)||console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!"),n.lastDynamicHeightWidth=this.renderWidth,n.size-o;const{row:r}=this.cache.alloc(n.templateId);r.domNode.style.height="",this.rowsContainer.appendChild(r.domNode);const h=this.renderers.get(n.templateId);if(!h)throw new Ji("Missing renderer for templateId: "+n.templateId);return h.renderElement(n.element,t,r.templateData,void 0),n.size=r.domNode.offsetHeight,(i=h.disposeElement)===null||i===void 0||i.call(h,n.element,t,r.templateData,void 0),(s=(e=this.virtualDelegate).setDynamicHeight)===null||s===void 0||s.call(e,n.element,n.size),n.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(r.domNode),this.cache.release(r),n.size-o}getElementDomId(t){return`${this.domId}_${t}`}dispose(){var t,i;for(const i of this.items)if(i.dragStartDisposable.dispose(),i.checkedDisposable.dispose(),i.row){const e=this.renderers.get(i.row.templateId);e&&((t=e.disposeElement)===null||t===void 0||t.call(e,i.element,-1,i.row.templateData,void 0),e.disposeTemplate(i.row.templateData))}this.items=[],this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),(i=this.dragOverAnimationDisposable)===null||i===void 0||i.dispose(),this.disposables.dispose()}}Dz.InstanceCount=0,bz([Hy],Dz.prototype,"onMouseClick",null),bz([Hy],Dz.prototype,"onMouseDblClick",null),bz([Hy],Dz.prototype,"onMouseMiddleClick",null),bz([Hy],Dz.prototype,"onMouseDown",null),bz([Hy],Dz.prototype,"onMouseOver",null),bz([Hy],Dz.prototype,"onMouseOut",null),bz([Hy],Dz.prototype,"onContextMenu",null),bz([Hy],Dz.prototype,"onTouchStart",null),bz([Hy],Dz.prototype,"onTap",null);class Mz{constructor(t,i,e){this.owner=t,this.debugNameSource=i,this.referenceFn=e}getDebugName(t){return function(t,i){var e;const s=Fz.get(t);if(s)return s;const n=function(t,i){const e=Fz.get(t);if(e)return e;const s=i.owner?function(t){var i;const e=Lz.get(t);if(e)return e;const s=function(t){const i=t.constructor;return i?i.name:"Object"}(t);let n=(i=Iz.get(s))!==null&&i!==void 0?i:0;n++,Iz.set(s,n);const o=n===1?s:`${s}#${n}`;return Lz.set(t,o),o}(i.owner)+".":"";let n;const o=i.debugNameSource;if(o!==void 0){if(typeof o!="function")return s+o;if(n=o(),n!==void 0)return s+n}const r=i.referenceFn;if(r!==void 0&&(n=Rz(r),n!==void 0))return s+n;if(i.owner!==void 0){const e=function(t,i){for(const e in t)if(t[e]===i)return e}(i.owner,t);if(e!==void 0)return s+e}}(t,i);if(n){let i=(e=Sz.get(n))!==null&&e!==void 0?e:0;i++,Sz.set(n,i);const s=i===1?n:`${n}#${i}`;return Fz.set(t,s),s}}(t,this)}}const Sz=new Map,Fz=new WeakMap,Iz=new Map,Lz=new WeakMap;function Rz(t){const i=t.toString(),e=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(i),s=e?e[1]:void 0;return s==null?void 0:s.trim()}let Tz,Nz,Qz;class Oz{get TChange(){return null}reportChanges(){this.get()}read(t){return t?t.readObservable(this):this.get()}map(t,i){const e=i===void 0?void 0:t,s=i===void 0?t:i;return Nz({owner:e,debugName:()=>{const t=Rz(s);if(t!==void 0)return t;const i=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());return i?`${this.debugName}.${i[2]}`:e?void 0:`${this.debugName} (mapped)`}},(t=>s(this.read(t),t)))}recomputeInitiallyAndOnChange(t,i){return t.add(Tz(this,i)),this}}class zz extends Oz{constructor(){super(...arguments),this.observers=new Set}addObserver(t){const i=this.observers.size;this.observers.add(t),i===0&&this.onFirstObserverAdded()}removeObserver(t){this.observers.delete(t)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function Uz(t,i){const e=new jz(t,i);try{t(e)}finally{e.finish()}}function Hz(t){if(Qz)t(Qz);else{const i=new jz(t,void 0);Qz=i;try{t(i)}finally{i.finish(),Qz=void 0}}}function Pz(t,i,e){t?i(t):Uz(i,e)}class jz{constructor(t,i){var e;this._fn=t,this._getDebugName=i,this.updatingObservers=[],(e=void 0)===null||e===void 0||e.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():Rz(this._fn)}updateObserver(t,i){this.updatingObservers.push({observer:t,observable:i}),t.beginUpdate(i)}finish(){var t;const i=this.updatingObservers;for(let t=0;t<i.length;t++){const{observer:e,observable:s}=i[t];e.endUpdate(s)}this.updatingObservers=null,(t=void 0)===null||t===void 0||t.handleEndTransaction()}}function Wz(t,i){return typeof t=="string"?new Yz(void 0,t,i):new Yz(t,void 0,i)}class Yz extends zz{get debugName(){var t;return(t=new Mz(this._owner,this._debugName,void 0).getDebugName(this))!==null&&t!==void 0?t:"ObservableValue"}constructor(t,i,e){super(),this._owner=t,this._debugName=i,this._value=e}get(){return this._value}set(t,i,e){var s;if(this._value===t)return;let n;i||(i=n=new jz((()=>{}),(()=>`Setting ${this.debugName}`)));try{const n=this._value;this._setValue(t),(s=void 0)===null||s===void 0||s.handleObservableChanged(this,{oldValue:n,newValue:t,change:e,didChange:!0,hadValue:!0});for(const t of this.observers)i.updateObserver(t,this),t.handleChange(this,e)}finally{n&&n.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(t){this._value=t}}function _z(t,i){return typeof t=="string"?new Vz(void 0,t,i):new Vz(t,void 0,i)}class Vz extends Yz{_setValue(t){this._value!==t&&(this._value&&this._value.dispose(),this._value=t)}dispose(){var t;(t=this._value)===null||t===void 0||t.dispose()}}const Jz=(t,i)=>t===i;function Gz(t,i){return i!==void 0?new qz(new Mz(t,void 0,i),i,void 0,void 0,void 0,Jz):new qz(new Mz(void 0,void 0,t),t,void 0,void 0,void 0,Jz)}function Kz(t,i){var e;return new qz(new Mz(t.owner,t.debugName,t.debugReferenceFn),i,void 0,void 0,t.onLastObserverRemoved,(e=t.equalityComparer)!==null&&e!==void 0?e:Jz)}function $z(t,i){let e,s;i===void 0?(e=t,s=void 0):(s=t,e=i);const n=new Zi;return new qz(new Mz(s,void 0,e),(t=>(n.clear(),e(t,n))),void 0,void 0,(()=>n.dispose()),Jz)}function Xz(t,i){let e,s;i===void 0?(e=t,s=void 0):(s=t,e=i);const n=new Zi;return new qz(new Mz(s,void 0,e),(t=>{n.clear();const i=e(t);return i&&n.add(i),i}),void 0,void 0,(()=>n.dispose()),Jz)}(function(t){Nz=t})(Kz);class qz extends zz{get debugName(){var t;return(t=this._debugNameData.getDebugName(this))!==null&&t!==void 0?t:"(anonymous)"}constructor(t,i,e,s,n=void 0,o){var r,h;super(),this._debugNameData=t,this._computeFn=i,this.createChangeSummary=e,this._handleChange=s,this._handleLastObserverRemoved=n,this._equalityComparator=o,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(r=this.createChangeSummary)===null||r===void 0?void 0:r.call(this),(h=void 0)===null||h===void 0||h.handleDerivedCreated(this)}onLastObserverRemoved(){var t;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(t=this._handleLastObserverRemoved)===null||t===void 0||t.call(this)}get(){var t;if(this.observers.size===0){const i=this._computeFn(this,(t=this.createChangeSummary)===null||t===void 0?void 0:t.call(this));return this.onLastObserverRemoved(),i}do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}_recomputeIfNeeded(){var t,i;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const s=this.state!==0,n=this.value;this.state=3;const o=this.changeSummary;this.changeSummary=(t=this.createChangeSummary)===null||t===void 0?void 0:t.call(this);try{this.value=this._computeFn(this,o)}finally{for(const t of this.dependenciesToBeRemoved)t.removeObserver(this);this.dependenciesToBeRemoved.clear()}const r=s&&!this._equalityComparator(n,this.value);if((i=void 0)===null||i===void 0||i.handleDerivedRecomputed(this,{oldValue:n,newValue:this.value,change:void 0,didChange:r,hadValue:s}),r)for(const t of this.observers)t.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(t){this.updateCount++;const i=this.updateCount===1;if(this.state===3&&(this.state=1,!i))for(const t of this.observers)t.handlePossibleChange(this);if(i)for(const t of this.observers)t.beginUpdate(this)}endUpdate(t){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const i of t)i.endUpdate(this)}Yl((()=>this.updateCount>=0))}handlePossibleChange(t){if(this.state===3&&this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(t,i){if(this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){const e=!this._handleChange||this._handleChange({changedObservable:t,change:i,didChange:i=>i===t},this.changeSummary),s=this.state===3;if(e&&(this.state===1||s)&&(this.state=2,s))for(const t of this.observers)t.handlePossibleChange(this)}}readObservable(t){t.addObserver(this);const i=t.get();return this.dependencies.add(t),this.dependenciesToBeRemoved.delete(t),i}addObserver(t){const i=!this.observers.has(t)&&this.updateCount>0;super.addObserver(t),i&&t.beginUpdate(this)}removeObserver(t){const i=this.observers.has(t)&&this.updateCount>0;super.removeObserver(t),i&&t.endUpdate(this)}}function Zz(t){return new sU(new Mz(void 0,void 0,t),t,void 0,void 0)}function tU(t,i){var e;return new sU(new Mz(t.owner,t.debugName,(e=t.debugReferenceFn)!==null&&e!==void 0?e:i),i,void 0,void 0)}function iU(t,i){var e;return new sU(new Mz(t.owner,t.debugName,(e=t.debugReferenceFn)!==null&&e!==void 0?e:i),i,t.createEmptyChangeSummary,t.handleChange)}function eU(t){const i=new Zi,e=tU({owner:void 0,debugName:void 0,debugReferenceFn:t},(e=>{i.clear(),t(e,i)}));return qi((()=>{e.dispose(),i.dispose()}))}class sU{get debugName(){var t;return(t=this._debugNameData.getDebugName(this))!==null&&t!==void 0?t:"(anonymous)"}constructor(t,i,e,s){var n,o;this._debugNameData=t,this._runFn=i,this.createChangeSummary=e,this._handleChange=s,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(n=this.createChangeSummary)===null||n===void 0?void 0:n.call(this),(o=void 0)===null||o===void 0||o.handleAutorunCreated(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var t,i,e;if(this.state===3)return;const s=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=s,this.state=3;const n=this.disposed;try{if(!n){(t=void 0)===null||t===void 0||t.handleAutorunTriggered(this);const e=this.changeSummary;this.changeSummary=(i=this.createChangeSummary)===null||i===void 0?void 0:i.call(this),this._runFn(this,e)}}finally{n||(e=void 0)===null||e===void 0||e.handleAutorunFinished(this);for(const t of this.dependenciesToBeRemoved)t.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,Yl((()=>this.updateCount>=0))}handlePossibleChange(t){this.state===3&&this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)&&(this.state=1)}handleChange(t,i){this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)&&(!this._handleChange||this._handleChange({changedObservable:t,change:i,didChange:i=>i===t},this.changeSummary))&&(this.state=2)}readObservable(t){if(this.disposed)return t.get();t.addObserver(this);const i=t.get();return this.dependencies.add(t),this.dependenciesToBeRemoved.delete(t),i}}function nU(t){return new oU(t)}(function(t){t.Observer=sU})(Zz||(Zz={}));class oU extends Oz{constructor(t){super(),this.value=t}get debugName(){return this.toString()}get(){return this.value}addObserver(t){}removeObserver(t){}toString(){return`Const: ${this.value}`}}function rU(t,i){return new hU(t,i)}class hU extends zz{constructor(t,i){super(),this.event=t,this._getValue=i,this.hasValue=!1,this.handleEvent=t=>{var i;const e=this._getValue(t),s=this.value,n=!this.hasValue||s!==e;let o=!1;n&&(this.value=e,this.hasValue&&(o=!0,Pz(hU.globalTransaction,(t=>{var i;(i=void 0)===null||i===void 0||i.handleFromEventObservableTriggered(this,{oldValue:s,newValue:e,change:void 0,didChange:n,hadValue:this.hasValue});for(const i of this.observers)t.updateObserver(i,this),i.handleChange(this,void 0)}),(()=>{const t=this.getDebugName();return"Event fired"+(t?`: ${t}`:"")}))),this.hasValue=!0),o||(i=void 0)===null||i===void 0||i.handleFromEventObservableTriggered(this,{oldValue:s,newValue:e,change:void 0,didChange:n,hadValue:this.hasValue})}}getDebugName(){return Rz(this._getValue)}get debugName(){const t=this.getDebugName();return"From Event"+(t?`: ${t}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}function cU(t,i){return new aU(t,i)}(function(t){t.Observer=hU,t.batchEventsGlobally=function(t,i){let e=!1;hU.globalTransaction===void 0&&(hU.globalTransaction=t,e=!0);try{i()}finally{e&&(hU.globalTransaction=void 0)}}})(rU||(rU={}));class aU extends zz{constructor(t,i){super(),this.debugName=t,this.event=i,this.handleEvent=()=>{Uz((t=>{for(const i of this.observers)t.updateObserver(i,this),i.handleChange(this,void 0)}),(()=>this.debugName))}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function lU(t){return typeof t=="string"?new uU(t):new uU(void 0,t)}class uU extends zz{get debugName(){var t;return(t=new Mz(this._owner,this._debugName,void 0).getDebugName(this))!==null&&t!==void 0?t:"Observable Signal"}constructor(t,i){super(),this._debugName=t,this._owner=i}trigger(t,i){if(t)for(const e of this.observers)t.updateObserver(e,this),e.handleChange(this,i);else Uz((t=>{this.trigger(t,i)}),(()=>`Trigger signal ${this.debugName}`))}get(){}}function dU(t,i){const e=new fU(!0,i);return t.addObserver(e),i?i(t.get()):t.reportChanges(),qi((()=>{t.removeObserver(e)}))}(function(t){Tz=t})(dU);class fU{constructor(t,i){this._forceRecompute=t,this._handleValue=i,this._counter=0}beginUpdate(t){this._counter++}endUpdate(t){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(t.get()):t.reportChanges())}handlePossibleChange(t){}handleChange(t,i){}}class gU{constructor(t,i){this._map=t,this._keySelector=i,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach((t=>t.store.dispose())),this._cache.clear()}setItems(t){const i=[],e=new Set(this._cache.keys());for(const s of t){const t=this._keySelector?this._keySelector(s):s;let n=this._cache.get(t);if(n)e.delete(t);else{const i=new Zi;n={out:this._map(s,i),store:i},this._cache.set(t,n)}i.push(n.out)}for(const t of e)this._cache.get(t).store.dispose(),this._cache.delete(t);this._items=i}getItems(){return this._items}}var AU=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};class pU{constructor(t){this.trait=t,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(t){return t}renderElement(t,i,e){const s=this.renderedElements.findIndex((t=>t.templateData===e));if(s>=0){const t=this.renderedElements[s];this.trait.unrender(e),t.index=i}else{const t={index:i,templateData:e};this.renderedElements.push(t)}this.trait.renderIndex(i,e)}splice(t,i,e){const s=[];for(const n of this.renderedElements)n.index<t?s.push(n):n.index>=t+i&&s.push({index:n.index+e-i,templateData:n.templateData});this.renderedElements=s}renderIndexes(t){for(const{index:i,templateData:e}of this.renderedElements)t.indexOf(i)>-1&&this.trait.renderIndex(i,e)}disposeTemplate(t){const i=this.renderedElements.findIndex((i=>i.templateData===t));i<0||this.renderedElements.splice(i,1)}}let wU=class{get name(){return this._trait}get renderer(){return new pU(this)}constructor(t){this._trait=t,this.indexes=[],this.sortedIndexes=[],this._onChange=new de,this.onChange=this._onChange.event}splice(t,i,e){const s=e.length-i,n=t+i,o=[];let r=0;for(;r<this.sortedIndexes.length&&this.sortedIndexes[r]<t;)o.push(this.sortedIndexes[r++]);for(let i=0;i<e.length;i++)e[i]&&o.push(i+t);for(;r<this.sortedIndexes.length&&this.sortedIndexes[r]>=n;)o.push(this.sortedIndexes[r++]+s);this.renderer.splice(t,i,e.length),this._set(o,o)}renderIndex(t,i){i.classList.toggle(this._trait,this.contains(t))}unrender(t){t.classList.remove(this._trait)}set(t,i){return this._set(t,[...t].sort(HU),i)}_set(t,i,e){const s=this.indexes,n=this.sortedIndexes;this.indexes=t,this.sortedIndexes=i;const o=UU(n,t);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:t,browserEvent:e}),s}get(){return this.indexes}contains(t){return c(this.sortedIndexes,t,HU)>=0}dispose(){$i(this._onChange)}};AU([Hy],wU.prototype,"renderer",null);class mU extends wU{constructor(t){super("selected"),this.setAriaSelected=t}renderIndex(t,i){super.renderIndex(t,i),this.setAriaSelected&&(this.contains(t)?i.setAttribute("aria-selected","true"):i.setAttribute("aria-selected","false"))}}class vU{constructor(t,i,e){this.trait=t,this.view=i,this.identityProvider=e}splice(t,i,e){if(!this.identityProvider)return this.trait.splice(t,i,new Array(e.length).fill(!1));const s=this.trait.get().map((t=>this.identityProvider.getId(this.view.element(t)).toString()));if(s.length===0)return this.trait.splice(t,i,new Array(e.length).fill(!1));const n=new Set(s),o=e.map((t=>n.has(this.identityProvider.getId(t).toString())));this.trait.splice(t,i,o)}}function bU(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"}function yU(t,i){return!!t.classList.contains(i)||!t.classList.contains("monaco-list")&&!!t.parentElement&&yU(t.parentElement,i)}function kU(t){return yU(t,"monaco-editor")}function xU(t){return yU(t,"monaco-tree-sticky-row")}function CU(t){return t.classList.contains("monaco-tree-sticky-container")}function EU(t){return!!(t.tagName==="A"&&t.classList.contains("monaco-button")||t.tagName==="DIV"&&t.classList.contains("monaco-button-dropdown"))||!t.classList.contains("monaco-list")&&!!t.parentElement&&EU(t.parentElement)}class BU{get onKeyDown(){return he.chain(this.disposables.add(new gk(this.view.domNode,"keydown")).event,(t=>t.filter((t=>!bU(t.target))).map((t=>new hr(t)))))}constructor(t,i,e){this.list=t,this.view=i,this.disposables=new Zi,this.multipleSelectionDisposables=new Zi,this.multipleSelectionSupport=e.multipleSelectionSupport,this.disposables.add(this.onKeyDown((t=>{switch(t.keyCode){case 3:return this.onEnter(t);case 16:return this.onUpArrow(t);case 18:return this.onDownArrow(t);case 11:return this.onPageUpArrow(t);case 12:return this.onPageDownArrow(t);case 9:return this.onEscape(t);case 31:this.multipleSelectionSupport&&(kt?t.metaKey:t.ctrlKey)&&this.onCtrlA(t)}})))}updateOptions(t){t.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=t.multipleSelectionSupport)}onEnter(t){t.preventDefault(),t.stopPropagation(),this.list.setSelection(this.list.getFocus(),t.browserEvent)}onUpArrow(t){t.preventDefault(),t.stopPropagation(),this.list.focusPrevious(1,!1,t.browserEvent);const i=this.list.getFocus()[0];this.list.setAnchor(i),this.list.reveal(i),this.view.domNode.focus()}onDownArrow(t){t.preventDefault(),t.stopPropagation(),this.list.focusNext(1,!1,t.browserEvent);const i=this.list.getFocus()[0];this.list.setAnchor(i),this.list.reveal(i),this.view.domNode.focus()}onPageUpArrow(t){t.preventDefault(),t.stopPropagation(),this.list.focusPreviousPage(t.browserEvent);const i=this.list.getFocus()[0];this.list.setAnchor(i),this.list.reveal(i),this.view.domNode.focus()}onPageDownArrow(t){t.preventDefault(),t.stopPropagation(),this.list.focusNextPage(t.browserEvent);const i=this.list.getFocus()[0];this.list.setAnchor(i),this.list.reveal(i),this.view.domNode.focus()}onCtrlA(t){t.preventDefault(),t.stopPropagation(),this.list.setSelection(v(this.list.length),t.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(t){this.list.getSelection().length&&(t.preventDefault(),t.stopPropagation(),this.list.setSelection([],t.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}var DU,MU;AU([Hy],BU.prototype,"onKeyDown",null),function(t){t[t.Automatic=0]="Automatic",t[t.Trigger=1]="Trigger"}(DU||(DU={})),function(t){t[t.Idle=0]="Idle",t[t.Typing=1]="Typing"}(MU||(MU={}));const SU=new class{mightProducePrintableCharacter(t){return!(t.ctrlKey||t.metaKey||t.altKey)&&(t.keyCode>=31&&t.keyCode<=56||t.keyCode>=21&&t.keyCode<=30||t.keyCode>=98&&t.keyCode<=107||t.keyCode>=85&&t.keyCode<=95)}};class FU{constructor(t,i,e,s,n){this.list=t,this.view=i,this.keyboardNavigationLabelProvider=e,this.keyboardNavigationEventFilter=s,this.delegate=n,this.enabled=!1,this.state=MU.Idle,this.mode=DU.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Zi,this.disposables=new Zi,this.updateOptions(t.options)}updateOptions(t){var i,e;(i=t.typeNavigationEnabled)===null||i===void 0||i?this.enable():this.disable(),this.mode=(e=t.typeNavigationMode)!==null&&e!==void 0?e:DU.Automatic}enable(){if(this.enabled)return;let t=!1;const i=he.chain(this.enabledDisposables.add(new gk(this.view.domNode,"keydown")).event,(i=>i.filter((t=>!bU(t.target))).filter((()=>this.mode===DU.Automatic||this.triggered)).map((t=>new hr(t))).filter((i=>t||this.keyboardNavigationEventFilter(i))).filter((t=>this.delegate.mightProducePrintableCharacter(t))).forEach((t=>qc(t,!0))).map((t=>t.browserEvent.key)))),e=he.debounce(i,(()=>null),800,void 0,void 0,void 0,this.enabledDisposables);he.reduce(he.any(i,e),((t,i)=>i===null?null:(t||"")+i),void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),e(this.onClear,this,this.enabledDisposables),i((()=>t=!0),void 0,this.enabledDisposables),e((()=>t=!1),void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var t;const i=this.list.getFocus();if(i.length>0&&i[0]===this.previouslyFocused){const e=(t=this.list.options.accessibilityProvider)===null||t===void 0?void 0:t.getAriaLabel(this.list.element(i[0]));typeof e=="string"?cw(e):e&&cw(e.get())}this.previouslyFocused=-1}onInput(t){if(!t)return this.state=MU.Idle,void(this.triggered=!1);const i=this.list.getFocus(),e=i.length>0?i[0]:0,s=this.state===MU.Idle?1:0;this.state=MU.Typing;for(let i=0;i<this.list.length;i++){const n=(e+i+s)%this.list.length,o=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(n)),r=o&&o.toString();if(this.list.options.typeNavigationEnabled){if(r!==void 0){if(RT(t,r))return this.previouslyFocused=e,this.list.setFocus([n]),void this.list.reveal(n);const i=nN(t,r);if(i&&i[0].end-i[0].start>1&&i.length===1)return this.previouslyFocused=e,this.list.setFocus([n]),void this.list.reveal(n)}}else if(r===void 0||RT(t,r))return this.previouslyFocused=e,this.list.setFocus([n]),void this.list.reveal(n)}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class IU{constructor(t,i){this.list=t,this.view=i,this.disposables=new Zi;const e=he.chain(this.disposables.add(new gk(i.domNode,"keydown")).event,(t=>t.filter((t=>!bU(t.target))).map((t=>new hr(t)))));he.chain(e,(t=>t.filter((t=>!(t.keyCode!==2||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)))))(this.onTab,this,this.disposables)}onTab(t){if(t.target!==this.view.domNode)return;const i=this.list.getFocus();if(i.length===0)return;const e=this.view.domElement(i[0]);if(!e)return;const s=e.querySelector("[tabIndex]");if(!(s&&s instanceof HTMLElement&&s.tabIndex!==-1))return;const n=Gh(s).getComputedStyle(s);n.visibility!=="hidden"&&n.display!=="none"&&(t.preventDefault(),t.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function LU(t){return kt?t.browserEvent.metaKey:t.browserEvent.ctrlKey}function RU(t){return t.browserEvent.shiftKey}const TU={isSelectionSingleChangeEvent:LU,isSelectionRangeChangeEvent:RU};class NU{constructor(t){this.list=t,this.disposables=new Zi,this._onPointer=new de,this.onPointer=this._onPointer.event,t.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||TU),this.mouseSupport=t.options.mouseSupport===void 0||!!t.options.mouseSupport,this.mouseSupport&&(t.onMouseDown(this.onMouseDown,this,this.disposables),t.onContextMenu(this.onContextMenu,this,this.disposables),t.onMouseDblClick(this.onDoubleClick,this,this.disposables),t.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Wy.addTarget(t.getHTMLElement()))),he.any(t.onMouseClick,t.onMouseMiddleClick,t.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(t){t.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,t.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||TU))}isSelectionSingleChangeEvent(t){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(t)}isSelectionRangeChangeEvent(t){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(t)}isSelectionChangeEvent(t){return this.isSelectionSingleChangeEvent(t)||this.isSelectionRangeChangeEvent(t)}onMouseDown(t){kU(t.browserEvent.target)||Lc()!==t.browserEvent.target&&this.list.domFocus()}onContextMenu(t){if(bU(t.browserEvent.target)||kU(t.browserEvent.target))return;const i=t.index===void 0?[]:[t.index];this.list.setFocus(i,t.browserEvent)}onViewPointer(t){if(!this.mouseSupport||bU(t.browserEvent.target)||kU(t.browserEvent.target)||t.browserEvent.isHandledByList)return;t.browserEvent.isHandledByList=!0;const i=t.index;return i===void 0?(this.list.setFocus([],t.browserEvent),this.list.setSelection([],t.browserEvent),void this.list.setAnchor(void 0)):this.isSelectionChangeEvent(t)?this.changeSelection(t):(this.list.setFocus([i],t.browserEvent),this.list.setAnchor(i),Gc(e=t.browserEvent)&&e.button===2||this.list.setSelection([i],t.browserEvent),void this._onPointer.fire(t));var e}onDoubleClick(t){if(bU(t.browserEvent.target)||kU(t.browserEvent.target)||this.isSelectionChangeEvent(t)||t.browserEvent.isHandledByList)return;t.browserEvent.isHandledByList=!0;const i=this.list.getFocus();this.list.setSelection(i,t.browserEvent)}changeSelection(t){const i=t.index;let e=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(t)){if(e===void 0){const t=this.list.getFocus()[0];e=t??i,this.list.setAnchor(e)}const s=v(Math.min(e,i),Math.max(e,i)+1),n=this.list.getSelection(),o=function(t,i){const e=t.indexOf(i);if(e===-1)return[];const s=[];let n=e-1;for(;n>=0&&t[n]===i-(e-n);)s.push(t[n--]);for(s.reverse(),n=e;n<t.length&&t[n]===i+(n-e);)s.push(t[n++]);return s}(UU(n,[e]),e);if(o.length===0)return;const r=UU(s,function(t,i){const e=[];let s=0,n=0;for(;s<t.length||n<i.length;)if(s>=t.length)e.push(i[n++]);else if(n>=i.length)e.push(t[s++]);else{if(t[s]===i[n]){s++,n++;continue}t[s]<i[n]?e.push(t[s++]):n++}return e}(n,o));this.list.setSelection(r,t.browserEvent),this.list.setFocus([i],t.browserEvent)}else if(this.isSelectionSingleChangeEvent(t)){const e=this.list.getSelection(),s=e.filter((t=>t!==i));this.list.setFocus([i]),this.list.setAnchor(i),e.length===s.length?this.list.setSelection([...s,i],t.browserEvent):this.list.setSelection(s,t.browserEvent)}}dispose(){this.disposables.dispose()}}class QU{constructor(t,i){this.styleElement=t,this.selectorSuffix=i}style(t){var i,e;const s=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];t.listBackground&&n.push(`.monaco-list${s} .monaco-list-rows { background: ${t.listBackground}; }`),t.listFocusBackground&&(n.push(`.monaco-list${s}:focus .monaco-list-row.focused { background-color: ${t.listFocusBackground}; }`),n.push(`.monaco-list${s}:focus .monaco-list-row.focused:hover { background-color: ${t.listFocusBackground}; }`)),t.listFocusForeground&&n.push(`.monaco-list${s}:focus .monaco-list-row.focused { color: ${t.listFocusForeground}; }`),t.listActiveSelectionBackground&&(n.push(`.monaco-list${s}:focus .monaco-list-row.selected { background-color: ${t.listActiveSelectionBackground}; }`),n.push(`.monaco-list${s}:focus .monaco-list-row.selected:hover { background-color: ${t.listActiveSelectionBackground}; }`)),t.listActiveSelectionForeground&&n.push(`.monaco-list${s}:focus .monaco-list-row.selected { color: ${t.listActiveSelectionForeground}; }`),t.listActiveSelectionIconForeground&&n.push(`.monaco-list${s}:focus .monaco-list-row.selected .codicon { color: ${t.listActiveSelectionIconForeground}; }`),t.listFocusAndSelectionBackground&&n.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${s}:focus .monaco-list-row.selected.focused { background-color: ${t.listFocusAndSelectionBackground}; }\n\t\t\t`),t.listFocusAndSelectionForeground&&n.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${s}:focus .monaco-list-row.selected.focused { color: ${t.listFocusAndSelectionForeground}; }\n\t\t\t`),t.listInactiveFocusForeground&&(n.push(`.monaco-list${s} .monaco-list-row.focused { color:  ${t.listInactiveFocusForeground}; }`),n.push(`.monaco-list${s} .monaco-list-row.focused:hover { color:  ${t.listInactiveFocusForeground}; }`)),t.listInactiveSelectionIconForeground&&n.push(`.monaco-list${s} .monaco-list-row.focused .codicon { color:  ${t.listInactiveSelectionIconForeground}; }`),t.listInactiveFocusBackground&&(n.push(`.monaco-list${s} .monaco-list-row.focused { background-color:  ${t.listInactiveFocusBackground}; }`),n.push(`.monaco-list${s} .monaco-list-row.focused:hover { background-color:  ${t.listInactiveFocusBackground}; }`)),t.listInactiveSelectionBackground&&(n.push(`.monaco-list${s} .monaco-list-row.selected { background-color:  ${t.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${s} .monaco-list-row.selected:hover { background-color:  ${t.listInactiveSelectionBackground}; }`)),t.listInactiveSelectionForeground&&n.push(`.monaco-list${s} .monaco-list-row.selected { color: ${t.listInactiveSelectionForeground}; }`),t.listHoverBackground&&n.push(`.monaco-list${s}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${t.listHoverBackground}; }`),t.listHoverForeground&&n.push(`.monaco-list${s}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${t.listHoverForeground}; }`);const o=ga(t.listFocusAndSelectionOutline,ga(t.listSelectionOutline,(i=t.listFocusOutline)!==null&&i!==void 0?i:""));o&&n.push(`.monaco-list${s}:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),t.listFocusOutline&&n.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${s}:focus .monaco-list-row.focused { outline: 1px solid ${t.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${s}.last-focused .monaco-list-row.focused { outline: 1px solid ${t.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);const r=ga(t.listSelectionOutline,(e=t.listInactiveFocusOutline)!==null&&e!==void 0?e:"");r&&n.push(`.monaco-list${s} .monaco-list-row.focused.selected { outline: 1px dotted ${r}; outline-offset: -1px; }`),t.listSelectionOutline&&n.push(`.monaco-list${s} .monaco-list-row.selected { outline: 1px dotted ${t.listSelectionOutline}; outline-offset: -1px; }`),t.listInactiveFocusOutline&&n.push(`.monaco-list${s} .monaco-list-row.focused { outline: 1px dotted ${t.listInactiveFocusOutline}; outline-offset: -1px; }`),t.listHoverOutline&&n.push(`.monaco-list${s} .monaco-list-row:hover { outline: 1px dashed ${t.listHoverOutline}; outline-offset: -1px; }`),t.listDropOverBackground&&n.push(`\n\t\t\t\t.monaco-list${s}.drop-target,\n\t\t\t\t.monaco-list${s} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${s} .monaco-list-row.drop-target { background-color: ${t.listDropOverBackground} !important; color: inherit !important; }\n\t\t\t`),t.listDropBetweenBackground&&(n.push(`\n\t\t\t.monaco-list${s} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,\n\t\t\t.monaco-list${s} .monaco-list-row.drop-target-before::before {\n\t\t\t\tcontent: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${t.listDropBetweenBackground};\n\t\t\t}`),n.push(`\n\t\t\t.monaco-list${s} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,\n\t\t\t.monaco-list${s} .monaco-list-row.drop-target-after::after {\n\t\t\t\tcontent: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${t.listDropBetweenBackground};\n\t\t\t}`)),t.tableColumnsBorder&&n.push(`\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${t.tableColumnsBorder};\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t`),t.tableOddRowsBackgroundColor&&n.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${t.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`),this.styleElement.textContent=n.join(`\n`)}}const OU={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:CA.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:CA.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:CA.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0},zU={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}}};function UU(t,i){const e=[];let s=0,n=0;for(;s<t.length||n<i.length;)if(s>=t.length)e.push(i[n++]);else if(n>=i.length)e.push(t[s++]);else{if(t[s]===i[n]){e.push(t[s]),s++,n++;continue}t[s]<i[n]?e.push(t[s++]):e.push(i[n++])}return e}const HU=(t,i)=>t-i;class PU{constructor(t,i){this._templateId=t,this.renderers=i}get templateId(){return this._templateId}renderTemplate(t){return this.renderers.map((i=>i.renderTemplate(t)))}renderElement(t,i,e,s){let n=0;for(const o of this.renderers)o.renderElement(t,i,e[n++],s)}disposeElement(t,i,e,s){var n;let o=0;for(const r of this.renderers)(n=r.disposeElement)===null||n===void 0||n.call(r,t,i,e[o],s),o+=1}disposeTemplate(t){let i=0;for(const e of this.renderers)e.disposeTemplate(t[i++])}}class jU{constructor(t){this.accessibilityProvider=t,this.templateId="a18n"}renderTemplate(t){return{container:t,disposables:new Zi}}renderElement(t,i,e){const s=this.accessibilityProvider.getAriaLabel(t),n=s&&typeof s!="string"?s:nU(s);e.disposables.add(Zz((t=>{this.setAriaLabel(t.readObservable(n),e.container)})));const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);typeof o=="number"?e.container.setAttribute("aria-level",`${o}`):e.container.removeAttribute("aria-level")}setAriaLabel(t,i){t?i.setAttribute("aria-label",t):i.removeAttribute("aria-label")}disposeElement(t,i,e,s){e.disposables.clear()}disposeTemplate(t){t.disposables.dispose()}}class WU{constructor(t,i){this.list=t,this.dnd=i}getDragElements(t){const i=this.list.getSelectedElements();return i.indexOf(t)>-1?i:[t]}getDragURI(t){return this.dnd.getDragURI(t)}getDragLabel(t,i){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(t,i)}onDragStart(t,i){var e,s;(s=(e=this.dnd).onDragStart)===null||s===void 0||s.call(e,t,i)}onDragOver(t,i,e,s,n){return this.dnd.onDragOver(t,i,e,s,n)}onDragLeave(t,i,e,s){var n,o;(o=(n=this.dnd).onDragLeave)===null||o===void 0||o.call(n,t,i,e,s)}onDragEnd(t){var i,e;(e=(i=this.dnd).onDragEnd)===null||e===void 0||e.call(i,t)}drop(t,i,e,s,n){this.dnd.drop(t,i,e,s,n)}dispose(){this.dnd.dispose()}}class YU{get onDidChangeFocus(){return he.map(this.eventBufferer.wrapEvent(this.focus.onChange),(t=>this.toListEvent(t)),this.disposables)}get onDidChangeSelection(){return he.map(this.eventBufferer.wrapEvent(this.selection.onChange),(t=>this.toListEvent(t)),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let t=!1;const i=he.chain(this.disposables.add(new gk(this.view.domNode,"keydown")).event,(i=>i.map((t=>new hr(t))).filter((i=>t=i.keyCode===58||i.shiftKey&&i.keyCode===68)).map((t=>qc(t,!0))).filter((()=>!1)))),e=he.chain(this.disposables.add(new gk(this.view.domNode,"keyup")).event,(i=>i.forEach((()=>t=!1)).map((t=>new hr(t))).filter((t=>t.keyCode===58||t.shiftKey&&t.keyCode===68)).map((t=>qc(t,!0))).map((({browserEvent:t})=>{const i=this.getFocus(),e=i.length?i[0]:void 0;return{index:e,element:e!==void 0?this.view.element(e):void 0,anchor:e!==void 0?this.view.domElement(e):this.view.domNode,browserEvent:t}})))),s=he.chain(this.view.onContextMenu,(i=>i.filter((i=>!t)).map((({element:t,index:i,browserEvent:e})=>({element:t,index:i,anchor:new ur(Gh(this.view.domNode),e),browserEvent:e})))));return he.any(i,e,s)}get onKeyDown(){return this.disposables.add(new gk(this.view.domNode,"keydown")).event}get onDidFocus(){return he.signal(this.disposables.add(new gk(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return he.signal(this.disposables.add(new gk(this.view.domNode,"blur",!0)).event)}constructor(t,i,e,s,n=zU){var o,r,h,c;this.user=t,this._options=n,this.focus=new wU("focused"),this.anchor=new wU("anchor"),this.eventBufferer=new me,this._ariaLabel="",this.disposables=new Zi,this._onDidDispose=new de,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new mU(a!=="listbox");const l=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=n.accessibilityProvider,this.accessibilityProvider&&(l.push(new jU(this.accessibilityProvider)),(h=(r=this.accessibilityProvider).onDidChangeActiveDescendant)===null||h===void 0||h.call(r,this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map((t=>new PU(t.templateId,[...l,t])));const u={...n,dnd:n.dnd&&new WU(this,n.dnd)};if(this.view=this.createListView(i,e,s,u),this.view.domNode.setAttribute("role",a),n.styleController)this.styleController=n.styleController(this.view.domId);else{const t=Uc(this.view.domNode);this.styleController=new QU(t,this.view.domId)}if(this.spliceable=new gz([new vU(this.focus,this.view,n.identityProvider),new vU(this.selection,this.view,n.identityProvider),new vU(this.anchor,this.view,n.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new IU(this,this.view)),(typeof n.keyboardSupport!="boolean"||n.keyboardSupport)&&(this.keyboardController=new BU(this,this.view,n),this.disposables.add(this.keyboardController)),n.keyboardNavigationLabelProvider){const t=n.keyboardNavigationDelegate||SU;this.typeNavigationController=new FU(this,this.view,n.keyboardNavigationLabelProvider,(c=n.keyboardNavigationEventFilter)!==null&&c!==void 0?c:()=>!0,t),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(n),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(t,i,e,s){return new Dz(t,i,e,s)}createMouseController(t){return new NU(this)}updateOptions(t={}){var i,e;this._options={...this._options,...t},(i=this.typeNavigationController)===null||i===void 0||i.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(t),(e=this.keyboardController)===null||e===void 0||e.updateOptions(t),this.view.updateOptions(t)}get options(){return this._options}splice(t,i,e=[]){if(t<0||t>this.view.length)throw new Az(this.user,`Invalid start index: ${t}`);if(i<0)throw new Az(this.user,`Invalid delete count: ${i}`);i===0&&e.length===0||this.eventBufferer.bufferEvents((()=>this.spliceable.splice(t,i,e)))}rerender(){this.view.rerender()}element(t){return this.view.element(t)}indexOf(t){return this.view.indexOf(t)}indexAt(t){return this.view.indexAt(t)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(t){this.view.setScrollTop(t)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(t){this._ariaLabel=t,this.view.domNode.setAttribute("aria-label",t)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(t,i){this.view.layout(t,i)}setSelection(t,i){for(const i of t)if(i<0||i>=this.length)throw new Az(this.user,`Invalid index ${i}`);this.selection.set(t,i)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map((t=>this.view.element(t)))}setAnchor(t){if(t!==void 0){if(t<0||t>=this.length)throw new Az(this.user,`Invalid index ${t}`);this.anchor.set([t])}else this.anchor.set([])}getAnchor(){return m(this.anchor.get(),void 0)}getAnchorElement(){const t=this.getAnchor();return t===void 0?void 0:this.element(t)}setFocus(t,i){for(const i of t)if(i<0||i>=this.length)throw new Az(this.user,`Invalid index ${i}`);this.focus.set(t,i)}focusNext(t=1,i=!1,e,s){if(this.length===0)return;const n=this.focus.get(),o=this.findNextIndex(n.length>0?n[0]+t:0,i,s);o>-1&&this.setFocus([o],e)}focusPrevious(t=1,i=!1,e,s){if(this.length===0)return;const n=this.focus.get(),o=this.findPreviousIndex(n.length>0?n[0]-t:0,i,s);o>-1&&this.setFocus([o],e)}async focusNextPage(t,i){let e=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);e=e===0?0:e-1;const s=this.getFocus()[0];if(s!==e&&(s===void 0||e>s)){const n=this.findPreviousIndex(e,!1,i);n>-1&&s!==n?this.setFocus([n],t):this.setFocus([e],t)}else{const n=this.view.getScrollTop();let o=n+this.view.renderHeight;e>s&&(o-=this.view.elementHeight(e)),this.view.setScrollTop(o),this.view.getScrollTop()!==n&&(this.setFocus([]),await br(0),await this.focusNextPage(t,i))}}async focusPreviousPage(t,i,e=(()=>0)){let s;const n=e(),o=this.view.getScrollTop()+n;s=o===0?this.view.indexAt(o):this.view.indexAfter(o-1);const r=this.getFocus()[0];if(r!==s&&(r===void 0||r>=s)){const e=this.findNextIndex(s,!1,i);e>-1&&r!==e?this.setFocus([e],t):this.setFocus([s],t)}else{const s=o;this.view.setScrollTop(o-this.view.renderHeight-n),this.view.getScrollTop()+e()!==s&&(this.setFocus([]),await br(0),await this.focusPreviousPage(t,i,e))}}focusLast(t,i){if(this.length===0)return;const e=this.findPreviousIndex(this.length-1,!1,i);e>-1&&this.setFocus([e],t)}focusFirst(t,i){this.focusNth(0,t,i)}focusNth(t,i,e){if(this.length===0)return;const s=this.findNextIndex(t,!1,e);s>-1&&this.setFocus([s],i)}findNextIndex(t,i=!1,e){for(let s=0;s<this.length;s++){if(t>=this.length&&!i)return-1;if(t%=this.length,!e||e(this.element(t)))return t;t++}return-1}findPreviousIndex(t,i=!1,e){for(let s=0;s<this.length;s++){if(t<0&&!i)return-1;if(t=(this.length+t%this.length)%this.length,!e||e(this.element(t)))return t;t--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map((t=>this.view.element(t)))}reveal(t,i,e=0){if(t<0||t>=this.length)throw new Az(this.user,`Invalid index ${t}`);const s=this.view.getScrollTop(),n=this.view.elementTop(t),o=this.view.elementHeight(t);if(z(i)){const t=o-this.view.renderHeight+e;this.view.setScrollTop(t*rR(i,0,1)+n-e)}else{const t=n+o,i=s+this.view.renderHeight;n<s+e&&t>=i||(n<s+e||t>=i&&o>=this.view.renderHeight?this.view.setScrollTop(n-e):t>=i&&this.view.setScrollTop(t-this.view.renderHeight))}}getRelativeTop(t,i=0){if(t<0||t>=this.length)throw new Az(this.user,`Invalid index ${t}`);const e=this.view.getScrollTop(),s=this.view.elementTop(t),n=this.view.elementHeight(t);if(s<e+i||s+n>e+this.view.renderHeight)return null;const o=n-this.view.renderHeight+i;return Math.abs((e+i-s)/o)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(t){return this.view.getElementDomId(t)}getElementTop(t){return this.view.elementTop(t)}style(t){this.styleController.style(t)}toListEvent({indexes:t,browserEvent:i}){return{indexes:t,elements:t.map((t=>this.view.element(t))),browserEvent:i}}_onFocusChange(){const t=this.focus.get();this.view.domNode.classList.toggle("element-focused",t.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var t;const i=this.focus.get();if(i.length>0){let e;!((t=this.accessibilityProvider)===null||t===void 0)&&t.getActiveDescendantId&&(e=this.accessibilityProvider.getActiveDescendantId(this.view.element(i[0]))),this.view.domNode.setAttribute("aria-activedescendant",e||this.view.getElementDomId(i[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const t=this.selection.get();this.view.domNode.classList.toggle("selection-none",t.length===0),this.view.domNode.classList.toggle("selection-single",t.length===1),this.view.domNode.classList.toggle("selection-multiple",t.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}AU([Hy],YU.prototype,"onDidChangeFocus",null),AU([Hy],YU.prototype,"onDidChangeSelection",null),AU([Hy],YU.prototype,"onContextMenu",null),AU([Hy],YU.prototype,"onKeyDown",null),AU([Hy],YU.prototype,"onDidFocus",null),AU([Hy],YU.prototype,"onDidBlur",null);const _U=ha,VU="selectOption.entry.template";class JU{get templateId(){return VU}renderTemplate(t){const i=Object.create(null);return i.root=t,i.text=ia(t,_U(".option-text")),i.detail=ia(t,_U(".option-detail")),i.decoratorRight=ia(t,_U(".option-decorator-right")),i}renderElement(t,i,e){const s=e,n=t.text,o=t.detail,r=t.decoratorRight,h=t.isDisabled;s.text.textContent=n,s.detail.textContent=o||"",s.decoratorRight.innerText=r||"",h?s.root.classList.add("option-disabled"):s.root.classList.remove("option-disabled")}disposeTemplate(t){}}class GU extends te{constructor(t,i,e,s,n){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=s,this.selectBoxOptions=n||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=GU.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new de,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(e),this.selected=i||0,t&&this.setOptions(t,i),this.initStyleSheet()}setTitle(t){!this._hover&&t?this._hover=this._register(fz(az("mouse"),this.selectElement,t)):this._hover&&this._hover.update(t)}getHeight(){return 22}getTemplateId(){return VU}constructSelectDropDown(t){this.contextViewProvider=t,this.selectDropDownContainer=ha(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=ia(this.selectDropDownContainer,_U(".select-box-details-pane"));const i=ia(this.selectDropDownContainer,_U(".select-box-dropdown-container-width-control")),e=ia(i,_U(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",ia(e,this.widthControlElement),this._dropDownPosition=0,this.styleElement=Uc(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(rc(this.selectDropDownContainer,$c.DRAG_START,(t=>{qc(t,!0)})))}registerListeners(){let t;this._register(cc(this.selectElement,"change",(t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}))),this._register(rc(this.selectElement,$c.CLICK,(t=>{qc(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()}))),this._register(rc(this.selectElement,$c.MOUSE_DOWN,(t=>{qc(t)}))),this._register(rc(this.selectElement,"touchstart",(i=>{t=this._isVisible}))),this._register(rc(this.selectElement,"touchend",(i=>{qc(i),t?this.hideSelectDropDown(!0):this.showSelectDropDown()}))),this._register(rc(this.selectElement,$c.KEY_DOWN,(t=>{const i=new hr(t);let e=!1;kt?i.keyCode!==18&&i.keyCode!==16&&i.keyCode!==10&&i.keyCode!==3||(e=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(e=!0),e&&(this.showSelectDropDown(),qc(t,!0))})))}get onDidSelect(){return this._onDidSelect.event}setOptions(t,i){h(this.options,t)||(this.options=t,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach(((t,i)=>{this.selectElement.add(this.createOption(t.text,i,t.isDisabled)),typeof t.description=="string"&&(this._hasDetails=!0)}))),i!==void 0&&(this.select(i),this._currentSelection=this.selected)}setOptionsList(){var t;(t=this.selectList)===null||t===void 0||t.splice(0,this.selectList.length,this.options)}select(t){t>=0&&t<this.options.length?this.selected=t:t>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(t){this.selectElement.tabIndex=t?0:-1}render(t){this.container=t,t.classList.add("select-container"),t.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const t=[];this.styles.listFocusBackground&&t.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&t.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&t.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(t.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),t.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),t.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(t.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),t.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&t.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&t.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&t.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&t.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),t.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),t.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=t.join(`\n`)}styleSelectElement(){var t,i,e;const s=(t=this.styles.selectBackground)!==null&&t!==void 0?t:"",n=(i=this.styles.selectForeground)!==null&&i!==void 0?i:"",o=(e=this.styles.selectBorder)!==null&&e!==void 0?e:"";this.selectElement.style.backgroundColor=s,this.selectElement.style.color=n,this.selectElement.style.borderColor=o}styleList(){var t,i;const e=(t=this.styles.selectBackground)!==null&&t!==void 0?t:"",s=ga(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=s,this.selectionDetailsPane.style.backgroundColor=s;const n=(i=this.styles.focusBorder)!==null&&i!==void 0?i:"";this.selectDropDownContainer.style.outlineColor=n,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(t,i,e){const s=document.createElement("option");return s.value=t,s.text=t,s.disabled=!!e,s}showSelectDropDown(){this.selectionDetailsPane.innerText="",this.contextViewProvider&&!this._isVisible&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:t=>this.renderSelectDropDown(t,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:t=>this.renderSelectDropDown(t),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(t){this.contextViewProvider&&this._isVisible&&(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),t&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(t,i){return t.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(i),{dispose:()=>{try{t.removeChild(this.selectDropDownContainer)}catch{}}}}measureMaxDetailsHeight(){let t=0;return this.options.forEach(((i,e)=>{this.updateDetail(e),this.selectionDetailsPane.offsetHeight>t&&(t=this.selectionDetailsPane.offsetHeight)})),t}layoutSelectDropDown(t){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const i=Gh(this.selectElement),e=yc(this.selectElement),s=Gh(this.selectElement).getComputedStyle(this.selectElement),n=parseFloat(s.getPropertyValue("--dropdown-padding-top"))+parseFloat(s.getPropertyValue("--dropdown-padding-bottom")),o=i.innerHeight-e.top-e.height-(this.selectBoxOptions.minBottomMargin||0),r=e.top-GU.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,h=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),a=Math.max(c,Math.round(h)).toString()+"px";this.selectDropDownContainer.style.width=a,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let l=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const u=this._hasDetails?this._cachedMaxDetailsHeight:0,d=l+n+u,f=Math.floor((o-n-u)/this.getHeight()),g=Math.floor((r-n-u)/this.getHeight());if(t)return!(e.top+e.height>i.innerHeight-22||e.top<GU.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||f<1&&g<1)&&(f<GU.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&g>f&&this.options.length>f?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(e.top+e.height>i.innerHeight-22||e.top<GU.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&f<1||this._dropDownPosition===1&&g<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&f+g<1)return this.hideSelectDropDown(!0),!1;d>o&&(l=f*this.getHeight())}else d>r&&(l=g*this.getHeight());return this.selectList.layout(l),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=l+n+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=l+n+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=a,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}return!1}setWidthControlElement(t){let i=0;if(t){let e=0,s=0;this.options.forEach(((t,i)=>{const n=t.detail?t.detail.length:0,o=t.decoratorRight?t.decoratorRight.length:0,r=t.text.length+n+o;r>s&&(e=i,s=r)})),t.textContent=this.options[e].text+(this.options[e].decoratorRight?this.options[e].decoratorRight+" ":""),i=xc(t)}return i}createSelectList(t){if(this.selectList)return;this.selectDropDownListContainer=ia(t,_U(".select-box-dropdown-list-container")),this.listRenderer=new JU,this.selectList=new YU("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:t=>{let i=t.text;return t.detail&&(i+=`. ${t.detail}`),t.decoratorRight&&(i+=`. ${t.decoratorRight}`),t.description&&(i+=`. ${t.description}`),i},getWidgetAriaLabel:()=>st(0,"Select Box"),getRole:()=>kt?"":"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const i=this._register(new gk(this.selectDropDownListContainer,"keydown")),e=he.chain(i.event,(t=>t.filter((()=>this.selectList.length>0)).map((t=>new hr(t)))));this._register(he.chain(e,(t=>t.filter((t=>t.keyCode===3))))(this.onEnter,this)),this._register(he.chain(e,(t=>t.filter((t=>t.keyCode===2))))(this.onEnter,this)),this._register(he.chain(e,(t=>t.filter((t=>t.keyCode===9))))(this.onEscape,this)),this._register(he.chain(e,(t=>t.filter((t=>t.keyCode===16))))(this.onUpArrow,this)),this._register(he.chain(e,(t=>t.filter((t=>t.keyCode===18))))(this.onDownArrow,this)),this._register(he.chain(e,(t=>t.filter((t=>t.keyCode===12))))(this.onPageDown,this)),this._register(he.chain(e,(t=>t.filter((t=>t.keyCode===11))))(this.onPageUp,this)),this._register(he.chain(e,(t=>t.filter((t=>t.keyCode===14))))(this.onHome,this)),this._register(he.chain(e,(t=>t.filter((t=>t.keyCode===13))))(this.onEnd,this)),this._register(he.chain(e,(t=>t.filter((t=>t.keyCode>=21&&t.keyCode<=56||t.keyCode>=85&&t.keyCode<=113))))(this.onCharacter,this)),this._register(rc(this.selectList.getHTMLElement(),$c.POINTER_UP,(t=>this.onPointerUp(t)))),this._register(this.selectList.onMouseOver((t=>t.index!==void 0&&this.selectList.setFocus([t.index])))),this._register(this.selectList.onDidChangeFocus((t=>this.onListFocus(t)))),this._register(rc(this.selectDropDownContainer,$c.FOCUS_OUT,(t=>{this._isVisible&&!Dc(t.relatedTarget,this.selectDropDownContainer)&&this.onListBlur()}))),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(t){if(!this.selectList.length)return;qc(t);const i=t.target;if(!i||i.classList.contains("slider"))return;const e=i.closest(".monaco-list-row");if(!e)return;const s=Number(e.getAttribute("data-index")),n=e.classList.contains("option-disabled");s>=0&&s<this.options.length&&!n&&(this.selected=s,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(t,i){const e=t=>{for(let i=0;i<t.childNodes.length;i++){const s=t.childNodes.item(i);(s.tagName&&s.tagName.toLowerCase())==="img"?t.removeChild(s):e(s)}},s=VN({value:t,supportThemeIcons:!0},{actionHandler:i});return s.element.classList.add("select-box-description-markdown"),e(s.element),s.element}onListFocus(t){this._isVisible&&this._hasDetails&&this.updateDetail(t.indexes[0])}updateDetail(t){var i,e;this.selectionDetailsPane.innerText="";const s=this.options[t],n=(i=s==null?void 0:s.description)!==null&&i!==void 0?i:"",o=(e=s==null?void 0:s.descriptionIsMarkdown)!==null&&e!==void 0&&e;if(n){if(o){const t=s.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(n,t))}else this.selectionDetailsPane.innerText=n;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(t){qc(t),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(t){qc(t),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(t){if(this.selected<this.options.length-1){qc(t,!0);const i=this.options[this.selected+1].isDisabled;if(i&&this.options.length>this.selected+2)this.selected+=2;else{if(i)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(t){this.selected>0&&(qc(t,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(t){qc(t),this.selectList.focusPreviousPage(),setTimeout((()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)}),1)}onPageDown(t){qc(t),this.selectList.focusNextPage(),setTimeout((()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)}),1)}onHome(t){qc(t),this.options.length<2||(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(t){qc(t),this.options.length<2||(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(t){const i=Le.toString(t.keyCode);let e=-1;for(let s=0;s<this.options.length-1;s++)if(e=(s+this.selected+1)%this.options.length,this.options[e].text.charAt(0).toUpperCase()===i&&!this.options[e].isDisabled){this.select(e),this.selectList.setFocus([e]),this.selectList.reveal(this.selectList.getFocus()[0]),qc(t);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}GU.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,GU.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,GU.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;class KU extends te{constructor(t,i,e,s){super(),this.selected=0,this.selectBoxOptions=s||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new de),this.styles=e,this.registerListeners(),this.setOptions(t,i)}registerListeners(){this._register(Wy.addTarget(this.selectElement)),[Py.Tap].forEach((t=>{this._register(rc(this.selectElement,t,(t=>{this.selectElement.focus()})))})),this._register(cc(this.selectElement,"click",(t=>{qc(t,!0)}))),this._register(cc(this.selectElement,"change",(t=>{this.selectElement.title=t.target.value,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value})}))),this._register(cc(this.selectElement,"keydown",(t=>{let i=!1;kt?t.keyCode!==18&&t.keyCode!==16&&t.keyCode!==10||(i=!0):(t.keyCode===18&&t.altKey||t.keyCode===10||t.keyCode===3)&&(i=!0),i&&t.stopPropagation()})))}get onDidSelect(){return this._onDidSelect.event}setOptions(t,i){this.options&&h(this.options,t)||(this.options=t,this.selectElement.options.length=0,this.options.forEach(((t,i)=>{this.selectElement.add(this.createOption(t.text,i,t.isDisabled))}))),i!==void 0&&this.select(i)}select(t){this.options.length===0?this.selected=0:t>=0&&t<this.options.length?this.selected=t:t>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(t){this.selectElement.tabIndex=t?0:-1}render(t){t.classList.add("select-container"),t.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){var t,i,e;this.selectElement&&(this.selectElement.style.backgroundColor=(t=this.styles.selectBackground)!==null&&t!==void 0?t:"",this.selectElement.style.color=(i=this.styles.selectForeground)!==null&&i!==void 0?i:"",this.selectElement.style.borderColor=(e=this.styles.selectBorder)!==null&&e!==void 0?e:"")}createOption(t,i,e){const s=document.createElement("option");return s.value=t,s.text=t,s.disabled=!!e,s}}class $U extends Yy{constructor(t,i,e,s,n){super(),kt&&!(n!=null&&n.useCustomDrawn)?this.selectBoxDelegate=new KU(t,i,s,n):this.selectBoxDelegate=new GU(t,i,e,s,n),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(t,i){this.selectBoxDelegate.setOptions(t,i)}select(t){this.selectBoxDelegate.select(t)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(t){this.selectBoxDelegate.setFocusable(t)}render(t){this.selectBoxDelegate.render(t)}}class XU extends te{get action(){return this._action}constructor(t,i,e={}){super(),this.options=e,this._context=t||this,this._action=i,i instanceof ja&&this._register(i.onDidChange((t=>{this.element&&this.handleActionChangeEvent(t)})))}handleActionChangeEvent(t){t.enabled!==void 0&&this.updateEnabled(),t.checked!==void 0&&this.updateChecked(),t.class!==void 0&&this.updateClass(),t.label!==void 0&&(this.updateLabel(),this.updateTooltip()),t.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Wa)),this._actionRunner}set actionRunner(t){this._actionRunner=t}isEnabled(){return this._action.enabled}setActionContext(t){this._context=t}render(t){const i=this.element=t;this._register(Wy.addTarget(t));const e=this.options&&this.options.draggable;e&&(t.draggable=!0,Vo&&this._register(rc(t,$c.DRAG_START,(t=>{var i;return(i=t.dataTransfer)===null||i===void 0?void 0:i.setData(oz.TEXT,this._action.label)})))),this._register(rc(i,Py.Tap,(t=>this.onClick(t,!0)))),this._register(rc(i,$c.MOUSE_DOWN,(t=>{e||qc(t,!0),this._action.enabled&&t.button===0&&i.classList.add("active")}))),kt&&this._register(rc(i,$c.CONTEXT_MENU,(t=>{t.button===0&&t.ctrlKey===!0&&this.onClick(t)}))),this._register(rc(i,$c.CLICK,(t=>{qc(t,!0),this.options&&this.options.isMenu||this.onClick(t)}))),this._register(rc(i,$c.DBLCLICK,(t=>{qc(t,!0)}))),[$c.MOUSE_UP,$c.MOUSE_OUT].forEach((t=>{this._register(rc(i,t,(t=>{qc(t),i.classList.remove("active")})))}))}onClick(t,i=!1){var e;qc(t,!0);const s=W(this._context)?!((e=this.options)===null||e===void 0)&&e.useEventAsContext?t:{preserveFocus:i}:this._context;this.actionRunner.run(this._action,s)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(t){this.element&&(this.element.tabIndex=t?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var t,i,e;if(!this.element)return;const s=(t=this.getTooltip())!==null&&t!==void 0?t:"";if(this.updateAriaLabel(),(i=this.options.hoverDelegate)===null||i===void 0?void 0:i.showNativeHover)this.element.title=s;else if(this.customHover||s==="")this.customHover&&this.customHover.update(s);else{const t=(e=this.options.hoverDelegate)!==null&&e!==void 0?e:az("element");this.customHover=this._store.add(fz(t,this.element,s))}}updateAriaLabel(){var t;if(this.element){const i=(t=this.getTooltip())!==null&&t!==void 0?t:"";this.element.setAttribute("aria-label",i)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class qU extends XU{constructor(t,i,e){super(t,i,e),this.options=e,this.options.icon=e.icon!==void 0&&e.icon,this.options.label=e.label===void 0||e.label,this.cssClass=""}render(t){super.render(t),Y(this.element);const i=document.createElement("a");if(i.classList.add("action-label"),i.setAttribute("role",this.getDefaultAriaRole()),this.label=i,this.element.appendChild(i),this.options.label&&this.options.keybinding){const t=document.createElement("span");t.classList.add("keybinding"),t.textContent=this.options.keybinding,this.element.appendChild(t)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Ya.ID?"presentation":this.options.isMenu?"menuitem":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(t){this.label&&(this.label.tabIndex=t?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let t=null;return this.action.tooltip?t=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(t=this.action.label,this.options.keybinding&&(t=st(0,"{0} ({1})",t,this.options.keybinding))),t??void 0}updateClass(){var t;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(t=this.label)===null||t===void 0||t.classList.remove("codicon")}updateEnabled(){var t,i;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(t=this.element)===null||t===void 0||t.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(i=this.element)===null||i===void 0||i.classList.add("disabled"))}updateAriaLabel(){var t;if(this.label){const i=(t=this.getTooltip())!==null&&t!==void 0?t:"";this.label.setAttribute("aria-label",i)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox")):(this.label.classList.remove("checked"),this.label.removeAttribute("aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class ZU extends XU{constructor(t,i,e,s,n,o,r){super(t,i),this.selectBox=new $U(e,s,n,o,r),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(t){this.selectBox.select(t)}registerListeners(){this._register(this.selectBox.onDidSelect((t=>this.runAction(t.selected,t.index))))}runAction(t,i){this.actionRunner.run(this._action,this.getActionContext(t,i))}getActionContext(t,i){return t}setFocusable(t){this.selectBox.setFocusable(t)}focus(){var t;(t=this.selectBox)===null||t===void 0||t.focus()}blur(){var t;(t=this.selectBox)===null||t===void 0||t.blur()}render(t){this.selectBox.render(t)}}class tH extends Wa{constructor(t,i){super(),this._onDidChangeVisibility=this._register(new de),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=ia(t,ha(".monaco-dropdown")),this._label=ia(this._element,ha(".dropdown-label"));let e=i.labelRenderer;e||(e=t=>(t.textContent=i.label||"",null));for(const t of[$c.CLICK,$c.MOUSE_DOWN,Py.Tap])this._register(rc(this.element,t,(t=>qc(t,!0))));for(const t of[$c.MOUSE_DOWN,Py.Tap])this._register(rc(this._label,t,(t=>{Gc(t)&&(t.detail>1||t.button!==0)||(this.visible?this.hide():this.show())})));this._register(rc(this._label,$c.KEY_UP,(t=>{const i=new hr(t);(i.equals(3)||i.equals(10))&&(qc(t,!0),this.visible?this.hide():this.show())})));const s=e(this._label);s&&this._register(s),this._register(Wy.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class iH extends tH{constructor(t,i){super(t,i),this._options=i,this._actions=[],this.actions=i.actions||[]}set menuOptions(t){this._menuOptions=t}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(t){this._actions=t}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(t,i)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(t,i):void 0,getKeyBinding:t=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(t):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class eH extends XU{constructor(t,i,e,s=Object.create(null)){super(null,t,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new de),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=i,this.contextMenuProvider=e,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(t){this.actionItem=t;const i=Array.isArray(this.menuActionsOrProvider),e={contextMenuProvider:this.contextMenuProvider,labelRenderer:t=>{var i;this.element=ia(t,ha("a.action-label"));let e=[];return typeof this.options.classNames=="string"?e=this.options.classNames.split(/\s+/g).filter((t=>!!t)):this.options.classNames&&(e=this.options.classNames),e.find((t=>t==="icon"))||e.push("codicon"),this.element.classList.add(...e),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(fz((i=this.options.hoverDelegate)!==null&&i!==void 0?i:az("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new iH(t,e)),this._register(this.dropdownMenu.onDidChangeVisibility((t=>{var i;(i=this.element)===null||i===void 0||i.setAttribute("aria-expanded",`${t}`),this._onDidChangeVisibility.fire(t)}))),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const t=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return t.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let t=null;return this.action.tooltip?t=this.action.tooltip:this.action.label&&(t=this.action.label),t??void 0}setActionContext(t){super.setActionContext(t),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=t:this.dropdownMenu.menuOptions={context:t})}show(){var t;(t=this.dropdownMenu)===null||t===void 0||t.show()}updateEnabled(){var t,i;const e=!this.action.enabled;(t=this.actionItem)===null||t===void 0||t.classList.toggle("disabled",e),(i=this.element)===null||i===void 0||i.classList.toggle("disabled",e)}}var sH,nH;(function(t){t[t.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",t[t.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(sH||(sH={})),function(t){t[t.None=0]="None",t[t.Initialized=1]="Initialized",t[t.Closed=2]="Closed"}(nH||(nH={}));class oH extends te{constructor(t,i=Object.create(null)){super(),this.database=t,this.options=i,this._onDidChangeStorage=this._register(new ge),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=nH.None,this.cache=new Map,this.flushDelayer=this._register(new vr(oH.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal((t=>this.onDidChangeItemsExternal(t))))}onDidChangeItemsExternal(t){var i,e;this._onDidChangeStorage.pause();try{(i=t.changed)===null||i===void 0||i.forEach(((t,i)=>this.acceptExternal(i,t))),(e=t.deleted)===null||e===void 0||e.forEach((t=>this.acceptExternal(t,void 0)))}finally{this._onDidChangeStorage.resume()}}acceptExternal(t,i){if(this.state===nH.Closed)return;let e=!1;W(i)?e=this.cache.delete(t):this.cache.get(t)!==i&&(this.cache.set(t,i),e=!0),e&&this._onDidChangeStorage.fire({key:t,external:!0})}get(t,i){const e=this.cache.get(t);return W(e)?i:e}getBoolean(t,i){const e=this.get(t);return W(e)?i:e==="true"}getNumber(t,i){const e=this.get(t);return W(e)?i:parseInt(e,10)}async set(t,i,e=!1){if(this.state===nH.Closed)return;if(W(i))return this.delete(t,e);const s=Q(i)||Array.isArray(i)?(n=i,JSON.stringify(n,WN)):String(i);var n;return this.cache.get(t)!==s?(this.cache.set(t,s),this.pendingInserts.set(t,s),this.pendingDeletes.delete(t),this._onDidChangeStorage.fire({key:t,external:e}),this.doFlush()):void 0}async delete(t,i=!1){if(this.state!==nH.Closed)return this.cache.delete(t)?(this.pendingDeletes.has(t)||this.pendingDeletes.add(t),this.pendingInserts.delete(t),this._onDidChangeStorage.fire({key:t,external:i}),this.doFlush()):void 0}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const t={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(t).finally((()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()}))}async doFlush(t){return this.options.hint===sH.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger((()=>this.flushPending()),t)}}oH.DEFAULT_FLUSH_DELAY=100;class rH{constructor(){this.onDidChangeItemsExternal=he.None,this.items=new Map}async updateItems(t){var i,e;(i=t.insert)===null||i===void 0||i.forEach(((t,i)=>this.items.set(i,t))),(e=t.delete)===null||e===void 0||e.forEach((t=>this.items.delete(t)))}}const hH="__$__targetStorageMarker",cH=za("storageService");var aH;(function(t){t[t.NONE=0]="NONE",t[t.SHUTDOWN=1]="SHUTDOWN"})(aH||(aH={}));class lH extends te{constructor(t={flushInterval:lH.DEFAULT_FLUSH_INTERVAL}){super(),this.options=t,this._onDidChangeValue=this._register(new ge),this._onDidChangeTarget=this._register(new ge),this._onWillSaveState=this._register(new de),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(t,i,e){return he.filter(this._onDidChangeValue.event,(e=>e.scope===t&&(i===void 0||e.key===i)),e)}emitDidChangeValue(t,i){const{key:e,external:s}=i;if(e===hH){switch(t){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0}this._onDidChangeTarget.fire({scope:t})}else this._onDidChangeValue.fire({scope:t,key:e,target:this.getKeyTargets(t)[e],external:s})}get(t,i,e){var s;return(s=this.getStorage(i))===null||s===void 0?void 0:s.get(t,e)}getBoolean(t,i,e){var s;return(s=this.getStorage(i))===null||s===void 0?void 0:s.getBoolean(t,e)}getNumber(t,i,e){var s;return(s=this.getStorage(i))===null||s===void 0?void 0:s.getNumber(t,e)}store(t,i,e,s,n=!1){W(i)?this.remove(t,e,n):this.withPausedEmitters((()=>{var o;this.updateKeyTarget(t,e,s),(o=this.getStorage(e))===null||o===void 0||o.set(t,i,n)}))}remove(t,i,e=!1){this.withPausedEmitters((()=>{var s;this.updateKeyTarget(t,i,void 0),(s=this.getStorage(i))===null||s===void 0||s.delete(t,e)}))}withPausedEmitters(t){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{t()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(t,i,e,s=!1){var n,o;const r=this.getKeyTargets(i);typeof e=="number"?r[t]!==e&&(r[t]=e,(n=this.getStorage(i))===null||n===void 0||n.set(hH,JSON.stringify(r),s)):typeof r[t]=="number"&&(delete r[t],(o=this.getStorage(i))===null||o===void 0||o.set(hH,JSON.stringify(r),s))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(t){switch(t){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(t){const i=this.getStorage(t);return i?function(t){const i=t.get(hH);if(i)try{return JSON.parse(i)}catch{}return Object.create(null)}(i):Object.create(null)}}lH.DEFAULT_FLUSH_INTERVAL=6e4;const uH={keybindingLabelBackground:Tw(Vv),keybindingLabelForeground:Tw(Jv),keybindingLabelBorder:Tw(Gv),keybindingLabelBottomBorder:Tw(Kv),keybindingLabelShadow:Tw(jm)},dH={buttonForeground:Tw(Nv),buttonSeparator:Tw(Qv),buttonBackground:Tw(Ov),buttonHoverBackground:Tw(zv),buttonSecondaryForeground:Tw(Hv),buttonSecondaryBackground:Tw(Pv),buttonSecondaryHoverBackground:Tw(jv),buttonBorder:Tw(Uv)},fH={progressBarBackground:Tw(om)},gH={inputActiveOptionBorder:Tw(vv),inputActiveOptionForeground:Tw(yv),inputActiveOptionBackground:Tw(bv)};Tw(Wv),Tw(_v),Tw(Yv),Tw(cm),Tw(am),Tw(jm),Tw($w),Tw(ov),Tw(rv),Tw(hv),Tw(qw);const AH={inputBackground:Tw(pv),inputForeground:Tw(wv),inputBorder:Tw(mv),inputValidationInfoBorder:Tw(Cv),inputValidationInfoBackground:Tw(kv),inputValidationInfoForeground:Tw(xv),inputValidationWarningBorder:Tw(Dv),inputValidationWarningBackground:Tw(Ev),inputValidationWarningForeground:Tw(Bv),inputValidationErrorBorder:Tw(Fv),inputValidationErrorBackground:Tw(Mv),inputValidationErrorForeground:Tw(Sv)},pH={listFilterWidgetBackground:Tw(wb),listFilterWidgetOutline:Tw(mb),listFilterWidgetNoMatchesOutline:Tw(vb),listFilterWidgetShadow:Tw(bb),inputBoxStyles:AH,toggleStyles:gH},wH={badgeBackground:Tw(Zw),badgeForeground:Tw(tm),badgeBorder:Tw($w)};Tw(Vm),Tw(_m),Tw(Jm),Tw(Jm),Tw(Gm);const mH={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:Tw($v),listFocusForeground:Tw(Xv),listFocusOutline:Tw(qv),listActiveSelectionBackground:Tw(tb),listActiveSelectionForeground:Tw(ib),listActiveSelectionIconForeground:Tw(eb),listFocusAndSelectionOutline:Tw(Zv),listFocusAndSelectionBackground:Tw(tb),listFocusAndSelectionForeground:Tw(ib),listInactiveSelectionBackground:Tw(sb),listInactiveSelectionIconForeground:Tw(ob),listInactiveSelectionForeground:Tw(nb),listInactiveFocusBackground:Tw(rb),listInactiveFocusOutline:Tw(hb),listHoverBackground:Tw(cb),listHoverForeground:Tw(ab),listDropOverBackground:Tw(lb),listDropBetweenBackground:Tw(ub),listSelectionOutline:Tw(Xw),listHoverOutline:Tw(Xw),treeIndentGuidesStroke:Tw(yb),treeInactiveIndentGuidesStroke:Tw(kb),tableColumnsBorder:Tw(xb),tableOddRowsBackgroundColor:Tw(Cb)};function vH(t){return function(t,i){const e={...i};for(const i in t){const s=t[i];e[i]=s!==void 0?Tw(s):void 0}return e}(t,mH)}const bH={selectBackground:Tw(Iv),selectListBackground:Tw(Lv),selectForeground:Tw(Rv),decoratorRightForeground:Tw(Nb),selectBorder:Tw(Tv),focusBorder:Tw(Kw),listFocusBackground:Tw(Hb),listInactiveSelectionIconForeground:Tw(Ub),listFocusForeground:Tw(zb),listFocusOutline:(yH=Xw,kH=CA.transparent.toString(),`var(${Rw(yH)}, ${kH})`),listHoverBackground:Tw(cb),listHoverForeground:Tw(ab),listHoverOutline:Tw(Xw),selectListBorder:Tw(lm),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0};var yH,kH;const xH={shadowColor:Tw(jm),borderColor:Tw(Eb),foregroundColor:Tw(Bb),backgroundColor:Tw(Db),selectionForegroundColor:Tw(Mb),selectionBackgroundColor:Tw(Sb),selectionBorderColor:Tw(Fb),separatorColor:Tw(Ib),scrollbarShadow:Tw(im),scrollbarSliderBackground:Tw(em),scrollbarSliderHoverBackground:Tw(sm),scrollbarSliderActiveBackground:Tw(nm)};var CH=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},EH=function(t,i){return function(e,s){i(e,s,t)}};function BH(t,i,e,s,n,o){DH(t.getActions(i),e,!1,typeof s=="string"?t=>t===s:s,n,o)}function DH(t,i,e,s=(t=>t==="navigation"),n=(()=>!1),o=!1){let r,h;Array.isArray(i)?(r=i,h=i):(r=i.primary,h=i.secondary);const c=new Set;for(const[i,n]of t){let t;s(i)?(t=r,t.length>0&&o&&t.push(new Ya)):(t=h,t.length>0&&t.push(new Ya));for(let s of n){e&&(s=s instanceof ou&&s.alt?s.alt:s);const n=t.push(s);s instanceof _a&&c.add({group:i,action:s,index:n-1})}}for(const{group:t,action:i,index:e}of c){const o=s(t)?r:h,c=i.actions;n(i,t,o.length)&&o.splice(e,1,...c)}}let MH=class extends qU{constructor(t,i,e,s,n,o,r,h){super(void 0,t,{icon:!(!t.class&&!t.item.icon),label:!t.class&&!t.item.icon,draggable:i==null?void 0:i.draggable,keybinding:i==null?void 0:i.keybinding,hoverDelegate:i==null?void 0:i.hoverDelegate}),this._keybindingService=e,this._notificationService=s,this._contextKeyService=n,this._themeService=o,this._contextMenuService=r,this._accessibilityService=h,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new ie),this._altKey=pa.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(t){t.preventDefault(),t.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(t){if(super.render(t),t.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let i=!1;const e=()=>{var t;const e=!!(!((t=this._menuItemAction.alt)===null||t===void 0)&&t.enabled)&&(!this._accessibilityService.isMotionReduced()||i)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&i);e!==this._wantsAltCommand&&(this._wantsAltCommand=e,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(e)),this._register(rc(t,"mouseleave",(t=>{i=!1,e()}))),this._register(rc(t,"mouseenter",(t=>{i=!0,e()}))),e()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var t;const i=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),e=i&&i.getLabel(),s=this._commandAction.tooltip||this._commandAction.label;let n=e?st(0,"{0} ({1})",s,e):s;if(!this._wantsAltCommand&&(!((t=this._menuItemAction.alt)===null||t===void 0)&&t.enabled)){const t=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,i=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),e=i&&i.getLabel(),s=e?st(0,"{0} ({1})",t,e):t;n=st(0,`{0}\n[{1}] {2}`,n,fO.modifierLabels[Rt].altKey,s)}return n}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(t){this._itemClassDispose.value=void 0;const{element:i,label:e}=this;if(!i||!e)return;const s=this._commandAction.checked&&(n=t.toggled)&&n.condition!==void 0&&t.toggled.icon?t.toggled.icon:t.icon;var n;if(s)if(Ka.isThemeIcon(s)){const t=Ka.asClassNameArray(s);e.classList.add(...t),this._itemClassDispose.value=qi((()=>{e.classList.remove(...t)}))}else e.style.backgroundImage=fy(this._themeService.getColorTheme().type)?da(s.dark):da(s.light),e.classList.add("icon"),this._itemClassDispose.value=Xi(qi((()=>{e.style.backgroundImage="",e.classList.remove("icon")})),this._themeService.onDidColorThemeChange((()=>{this.updateClass()})))}};MH=CH([EH(2,Hx),EH(3,wL),EH(4,Nl),EH(5,Fk),EH(6,aT),EH(7,yw)],MH);let SH=class extends eH{constructor(t,i,e,s,n){var o,r,h;const c={...i,menuAsChild:(o=i==null?void 0:i.menuAsChild)!==null&&o!==void 0&&o,classNames:(r=i==null?void 0:i.classNames)!==null&&r!==void 0?r:Ka.isThemeIcon(t.item.icon)?Ka.asClassName(t.item.icon):void 0,keybindingProvider:(h=i==null?void 0:i.keybindingProvider)!==null&&h!==void 0?h:t=>e.lookupKeybinding(t.id)};super(t,{getActions:()=>t.actions},s,c),this._keybindingService=e,this._contextMenuService=s,this._themeService=n}render(t){super.render(t),Y(this.element),t.classList.add("menu-entry");const i=this._action,{icon:e}=i.item;if(e&&!Ka.isThemeIcon(e)){this.element.classList.add("icon");const t=()=>{this.element&&(this.element.style.backgroundImage=fy(this._themeService.getColorTheme().type)?da(e.dark):da(e.light))};t(),this._register(this._themeService.onDidColorThemeChange((()=>{t()})))}}};SH=CH([EH(2,Hx),EH(3,aT),EH(4,Fk)],SH);let FH=class extends XU{constructor(t,i,e,s,n,o,r,h){var c,a,l;let u;super(null,t),this._keybindingService=e,this._notificationService=s,this._contextMenuService=n,this._menuService=o,this._instaService=r,this._storageService=h,this._container=null,this._options=i,this._storageKey=`${t.item.submenu.id}_lastActionId`;const d=i!=null&&i.persistLastActionId?h.get(this._storageKey,1):void 0;d&&(u=t.actions.find((t=>d===t.id))),u||(u=t.actions[0]),this._defaultAction=this._instaService.createInstance(MH,u,{keybinding:this._getDefaultActionKeybindingLabel(u)});const f={keybindingProvider:t=>this._keybindingService.lookupKeybinding(t.id),...i,menuAsChild:(c=i==null?void 0:i.menuAsChild)===null||c===void 0||c,classNames:(a=i==null?void 0:i.classNames)!==null&&a!==void 0?a:["codicon","codicon-chevron-down"],actionRunner:(l=i==null?void 0:i.actionRunner)!==null&&l!==void 0?l:new Wa};this._dropdown=new eH(t,t.actions,this._contextMenuService,f),this._register(this._dropdown.actionRunner.onDidRun((t=>{t.action instanceof ou&&this.update(t.action)})))}update(t){var i;!((i=this._options)===null||i===void 0)&&i.persistLastActionId&&this._storageService.store(this._storageKey,t.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(MH,t,{keybinding:this._getDefaultActionKeybindingLabel(t)}),this._defaultAction.actionRunner=new class extends Wa{async runAction(t,i){await t.run(void 0)}},this._container&&this._defaultAction.render(ea(this._container,ha(".action-container")))}_getDefaultActionKeybindingLabel(t){var i;let e;if(!((i=this._options)===null||i===void 0)&&i.renderKeybindingWithDefaultActionLabel){const i=this._keybindingService.lookupKeybinding(t.id);i&&(e=`(${i.getLabel()})`)}return e}setActionContext(t){super.setActionContext(t),this._defaultAction.setActionContext(t),this._dropdown.setActionContext(t)}render(t){this._container=t,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const i=ha(".action-container");this._defaultAction.render(ia(this._container,i)),this._register(rc(i,$c.KEY_DOWN,(t=>{const i=new hr(t);i.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),i.stopPropagation())})));const e=ha(".dropdown-action-container");this._dropdown.render(ia(this._container,e)),this._register(rc(e,$c.KEY_DOWN,(t=>{var i;const e=new hr(t);e.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(i=this._defaultAction.element)===null||i===void 0||i.focus(),e.stopPropagation())})))}focus(t){t?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(t){t?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};FH=CH([EH(2,Hx),EH(3,wL),EH(4,aT),EH(5,iu),EH(6,Oa),EH(7,cH)],FH);let IH=class extends ZU{constructor(t,i){super(null,t,t.actions.map((t=>({text:t.id===Ya.ID?"─────────":t.label,isDisabled:!t.enabled}))),0,i,bH,{ariaLabel:t.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,t.actions.findIndex((t=>t.checked))))}render(t){super.render(t),t.style.borderColor=Tw(Tv)}runAction(t,i){const e=this.action.actions[i];e&&this.actionRunner.run(e)}};function LH(t,i,e){return i instanceof ou?t.createInstance(MH,i,e):i instanceof nu?i.item.isSelection?t.createInstance(IH,i):i.item.rememberDefaultAction?t.createInstance(FH,i,{...e,persistLastActionId:!0}):t.createInstance(SH,i,e):void 0}IH=CH([EH(1,cT)],IH);class RH extends te{constructor(t,i={}){var e,s,n,o,r,h,c;let a,l;switch(super(),this._actionRunnerDisposables=this._register(new Zi),this.viewItemDisposables=this._register(new ne),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new de),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new de({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new de),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new de),this.onWillRun=this._onWillRun.event,this.options=i,this._context=(e=i.context)!==null&&e!==void 0?e:null,this._orientation=(s=this.options.orientation)!==null&&s!==void 0?s:0,this._triggerKeys={keyDown:(o=(n=this.options.triggerKeys)===null||n===void 0?void 0:n.keyDown)!==null&&o!==void 0&&o,keys:(h=(r=this.options.triggerKeys)===null||r===void 0?void 0:r.keys)!==null&&h!==void 0?h:[3,10]},this._hoverDelegate=(c=i.hoverDelegate)!==null&&c!==void 0?c:this._register(lz()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Wa,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun((t=>this._onDidRun.fire(t)))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun((t=>this._onWillRun.fire(t)))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",this._orientation){case 0:a=[15],l=[17];break;case 1:a=[16],l=[18],this.domNode.className+=" vertical"}this._register(rc(this.domNode,$c.KEY_DOWN,(t=>{const i=new hr(t);let e=!0;const s=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;a&&(i.equals(a[0])||i.equals(a[1]))?e=this.focusPrevious():l&&(i.equals(l[0])||i.equals(l[1]))?e=this.focusNext():i.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():i.equals(14)?e=this.focusFirst():i.equals(13)?e=this.focusLast():i.equals(2)&&s instanceof XU&&s.trapsArrowNavigation?e=this.focusNext():this.isTriggerKeyEvent(i)?this._triggerKeys.keyDown?this.doTrigger(i):this.triggerKeyDown=!0:e=!1,e&&(i.preventDefault(),i.stopPropagation())}))),this._register(rc(this.domNode,$c.KEY_UP,(t=>{const i=new hr(t);this.isTriggerKeyEvent(i)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(i)),i.preventDefault(),i.stopPropagation()):(i.equals(2)||i.equals(1026)||i.equals(16)||i.equals(18)||i.equals(15)||i.equals(17))&&this.updateFocusedItem()}))),this.focusTracker=this._register(ta(this.domNode)),this._register(this.focusTracker.onDidBlur((()=>{Lc()!==this.domNode&&Dc(Lc(),this.domNode)||(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)}))),this._register(this.focusTracker.onDidFocus((()=>this.updateFocusedItem()))),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),t.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(t){if(this.focusable=t,this.focusable){const t=this.viewItems.find((t=>t instanceof XU&&t.isEnabled()));t instanceof XU&&t.setFocusable(!0)}else this.viewItems.forEach((t=>{t instanceof XU&&t.setFocusable(!1)}))}isTriggerKeyEvent(t){let i=!1;return this._triggerKeys.keys.forEach((e=>{i=i||t.equals(e)})),i}updateFocusedItem(){var t,i;for(let e=0;e<this.actionsList.children.length;e++){const s=this.actionsList.children[e];if(Dc(Lc(),s)){this.focusedItem=e,(i=(t=this.viewItems[this.focusedItem])===null||t===void 0?void 0:t.showHover)===null||i===void 0||i.call(t);break}}}get context(){return this._context}set context(t){this._context=t,this.viewItems.forEach((i=>i.setActionContext(t)))}get actionRunner(){return this._actionRunner}set actionRunner(t){this._actionRunner=t,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun((t=>this._onDidRun.fire(t)))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun((t=>this._onWillRun.fire(t)))),this.viewItems.forEach((i=>i.actionRunner=t))}getContainer(){return this.domNode}getAction(t){var i;if(typeof t=="number")return(i=this.viewItems[t])===null||i===void 0?void 0:i.action;if(t instanceof HTMLElement){for(;t.parentElement!==this.actionsList;){if(!t.parentElement)return;t=t.parentElement}for(let i=0;i<this.actionsList.childNodes.length;i++)if(this.actionsList.childNodes[i]===t)return this.viewItems[i].action}}push(t,i={}){const e=Array.isArray(t)?t:[t];let s=z(i.index)?i.index:null;e.forEach((t=>{const e=document.createElement("li");let n;e.className="action-item",e.setAttribute("role","presentation");const o={hoverDelegate:this._hoverDelegate,...i};this.options.actionViewItemProvider&&(n=this.options.actionViewItemProvider(t,o)),n||(n=new qU(this.context,t,o)),this.options.allowContextMenu||this.viewItemDisposables.set(n,rc(e,$c.CONTEXT_MENU,(t=>{qc(t,!0)}))),n.actionRunner=this._actionRunner,n.setActionContext(this.context),n.render(e),this.focusable&&n instanceof XU&&this.viewItems.length===0&&n.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(e),this.viewItems.push(n)):(this.actionsList.insertBefore(e,this.actionsList.children[s]),this.viewItems.splice(s,0,n),s++)})),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=$i(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),nc(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(t){let i,e=!1;if(t===void 0?e=!0:typeof t=="number"?i=t:typeof t=="boolean"&&(e=t),e&&this.focusedItem===void 0){const t=this.viewItems.findIndex((t=>t.isEnabled()));this.focusedItem=t===-1?void 0:t,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(t){if(this.focusedItem===void 0)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let e;do{if(!t&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,e=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!e.isEnabled()||e.action.id===Ya.ID));return this.updateFocus(),!0}focusPrevious(t){if(this.focusedItem===void 0)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let e;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!t&&this.options.preventLoopNavigation)return this.focusedItem=i,!1;this.focusedItem=this.viewItems.length-1}e=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!e.isEnabled()||e.action.id===Ya.ID));return this.updateFocus(!0),!0}updateFocus(t,i,e=!1){var s,n;this.focusedItem===void 0&&this.actionsList.focus({preventScroll:i}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((s=this.viewItems[this.previouslyFocusedItem])===null||s===void 0||s.blur());const o=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(o){let s=!0;V(o.focus)||(s=!1),this.options.focusOnlyEnabledItems&&V(o.isEnabled)&&!o.isEnabled()&&(s=!1),o.action.id===Ya.ID&&(s=!1),s?(e||this.previouslyFocusedItem!==this.focusedItem)&&(o.focus(t),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:i}),this.previouslyFocusedItem=void 0),s&&((n=o.showHover)===null||n===void 0||n.call(o))}}doTrigger(t){if(this.focusedItem===void 0)return;const i=this.viewItems[this.focusedItem];if(i instanceof XU){const e=i._context===null||i._context===void 0?t:i._context;this.run(i._action,e)}}async run(t,i){await this._actionRunner.run(t,i)}dispose(){this._context=void 0,this.viewItems=$i(this.viewItems),this.getContainer().remove(),super.dispose()}}const TH=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,NH=/(&amp;)?(&amp;)([^\s&])/g;var QH,OH;(function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"})(QH||(QH={})),function(t){t[t.Above=0]="Above",t[t.Below=1]="Below"}(OH||(OH={}));class zH extends RH{constructor(t,i,e,s){t.classList.add("monaco-menu-container"),t.setAttribute("role","presentation");const n=document.createElement("div");n.classList.add("monaco-menu"),n.setAttribute("role","presentation"),super(n,{orientation:1,actionViewItemProvider:t=>this.doGetActionViewItem(t,e,o),context:e.context,actionRunner:e.actionRunner,ariaLabel:e.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...kt||xt?[10]:[]],keyDown:!0}}),this.menuStyles=s,this.menuElement=n,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(t,s),this._register(Wy.addTarget(n)),this._register(rc(n,$c.KEY_DOWN,(t=>{new hr(t).equals(2)&&t.preventDefault()}))),e.enableMnemonics&&this._register(rc(n,$c.KEY_DOWN,(t=>{const i=t.key.toLocaleLowerCase();if(this.mnemonics.has(i)){qc(t,!0);const e=this.mnemonics.get(i);if(e.length===1&&(e[0]instanceof HH&&e[0].container&&this.focusItemByElement(e[0].container),e[0].onClick(t)),e.length>1){const t=e.shift();t&&t.container&&(this.focusItemByElement(t.container),e.push(t)),this.mnemonics.set(i,e)}}}))),xt&&this._register(rc(n,$c.KEY_DOWN,(t=>{const i=new hr(t);i.equals(14)||i.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),qc(t,!0)):(i.equals(13)||i.equals(12))&&(this.focusedItem=0,this.focusPrevious(),qc(t,!0))}))),this._register(rc(this.domNode,$c.MOUSE_OUT,(t=>{Dc(t.relatedTarget,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),t.stopPropagation())}))),this._register(rc(this.actionsList,$c.MOUSE_OVER,(t=>{let i=t.target;if(i&&Dc(i,this.actionsList)&&i!==this.actionsList){for(;i.parentElement!==this.actionsList&&i.parentElement!==null;)i=i.parentElement;if(i.classList.contains("action-item")){const t=this.focusedItem;this.setFocusedItem(i),t!==this.focusedItem&&this.updateFocus()}}}))),this._register(Wy.addTarget(this.actionsList)),this._register(rc(this.actionsList,Py.Tap,(t=>{let i=t.initialTarget;if(i&&Dc(i,this.actionsList)&&i!==this.actionsList){for(;i.parentElement!==this.actionsList&&i.parentElement!==null;)i=i.parentElement;if(i.classList.contains("action-item")){const t=this.focusedItem;this.setFocusedItem(i),t!==this.focusedItem&&this.updateFocus()}}})));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new ck(n,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const r=this.scrollableElement.getDomNode();r.style.position="",this.styleScrollElement(r,s),this._register(rc(n,Py.Change,(t=>{qc(t,!0);const i=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:i-t.translationY})}))),this._register(rc(r,$c.MOUSE_UP,(t=>{t.preventDefault()})));const h=Gh(t);n.style.maxHeight=`${Math.max(10,h.innerHeight-t.getBoundingClientRect().top-35)}px`,i=i.filter(((t,s)=>{var n;return!((n=e.submenuIds)===null||n===void 0)&&n.has(t.id)?(console.warn(`Found submenu cycle: ${t.id}`),!1):!(t instanceof Ya&&(s===i.length-1||s===0||i[s-1]instanceof Ya))})),this.push(i,{icon:!0,label:!0,isMenu:!0}),t.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter((t=>!(t instanceof PH))).forEach(((t,i,e)=>{t.updatePositionInSet(i+1,e.length)}))}initializeOrUpdateStyleSheet(t,i){this.styleSheet||(Fc(t)?this.styleSheet=Uc(t):(zH.globalStyleSheet||(zH.globalStyleSheet=Uc()),this.styleSheet=zH.globalStyleSheet)),this.styleSheet.textContent=function(t,i){let e=`\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${jH(Fs.menuSelection)}\n${jH(Fs.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;if(i){e+=`\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t`;const i=t.scrollbarShadow;i&&(e+=`\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${i} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${i} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${i} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`);const s=t.scrollbarSliderBackground;s&&(e+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${s};\n\t\t\t\t}\n\t\t\t`);const n=t.scrollbarSliderHoverBackground;n&&(e+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${n};\n\t\t\t\t}\n\t\t\t`);const o=t.scrollbarSliderActiveBackground;o&&(e+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${o};\n\t\t\t\t}\n\t\t\t`)}return e}(i,Fc(t))}styleScrollElement(t,i){var e,s;const n=(e=i.foregroundColor)!==null&&e!==void 0?e:"",o=(s=i.backgroundColor)!==null&&s!==void 0?s:"",r=i.borderColor?`1px solid ${i.borderColor}`:"",h=i.shadowColor?`0 2px 8px ${i.shadowColor}`:"";t.style.outline=r,t.style.borderRadius="5px",t.style.color=n,t.style.backgroundColor=o,t.style.boxShadow=h}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(t){const i=this.focusedItem;this.setFocusedItem(t),i!==this.focusedItem&&this.updateFocus()}setFocusedItem(t){for(let i=0;i<this.actionsList.children.length;i++)if(t===this.actionsList.children[i]){this.focusedItem=i;break}}updateFocus(t){super.updateFocus(t,!0,!0),this.focusedItem!==void 0&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(t,i,e){if(t instanceof Ya)return new PH(i.context,t,{icon:!0},this.menuStyles);if(t instanceof _a){const s=new HH(t,t.actions,e,{...i,submenuIds:new Set([...i.submenuIds||[],t.id])},this.menuStyles);if(i.enableMnemonics){const t=s.getMnemonic();if(t&&s.isEnabled()){let i=[];this.mnemonics.has(t)&&(i=this.mnemonics.get(t)),i.push(s),this.mnemonics.set(t,i)}}return s}{const e={enableMnemonics:i.enableMnemonics,useEventAsContext:i.useEventAsContext};if(i.getKeyBinding){const s=i.getKeyBinding(t);if(s){const t=s.getLabel();t&&(e.keybinding=t)}}const s=new UH(i.context,t,e,this.menuStyles);if(i.enableMnemonics){const t=s.getMnemonic();if(t&&s.isEnabled()){let i=[];this.mnemonics.has(t)&&(i=this.mnemonics.get(t)),i.push(s),this.mnemonics.set(t,i)}}return s}}}class UH extends XU{constructor(t,i,e,s){if(e.isMenu=!0,super(i,i,e),this.menuStyle=s,this.options=e,this.options.icon=e.icon!==void 0&&e.icon,this.options.label=e.label===void 0||e.label,this.cssClass="",this.options.label&&e.enableMnemonics){const t=this.action.label;if(t){const i=TH.exec(t);i&&(this.mnemonic=(i[1]?i[1]:i[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Er((()=>{this.element&&(this._register(rc(this.element,$c.MOUSE_UP,(t=>{if(qc(t,!0),Vo){if(new ur(Gh(this.element),t).rightButton)return;this.onClick(t)}else setTimeout((()=>{this.onClick(t)}),0)}))),this._register(rc(this.element,$c.CONTEXT_MENU,(t=>{qc(t,!0)}))))}),100),this._register(this.runOnceToEnableMouseUp)}render(t){super.render(t),this.element&&(this.container=t,this.item=ia(this.element,ha("a.action-menu-item")),this._action.id===Ya.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=ia(this.item,ha("span.menu-item-check"+Ka.asCSSSelector(Fs.menuSelection))),this.check.setAttribute("role","none"),this.label=ia(this.item,ha("span.action-label")),this.options.label&&this.options.keybinding&&(ia(this.item,ha("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var t;super.focus(),(t=this.item)===null||t===void 0||t.focus(),this.applyStyle()}updatePositionInSet(t,i){this.item&&(this.item.setAttribute("aria-posinset",`${t}`),this.item.setAttribute("aria-setsize",`${i}`))}updateLabel(){var t;if(this.label&&this.options.label){nc(this.label);let i=SN(this.action.label);if(i){const e=function(t){const i=TH,e=i.exec(t);if(!e)return t;const s=!e[1];return t.replace(i,s?"$2$3":"").trim()}(i);this.options.enableMnemonics||(i=e),this.label.setAttribute("aria-label",e.replace(/&&/g,"&"));const s=TH.exec(i);if(s){i=$n(i),NH.lastIndex=0;let e=NH.exec(i);for(;e&&e[1];)e=NH.exec(i);const n=t=>t.replace(/&amp;&amp;/g,"&amp;");e?this.label.append(Zn(n(i.substr(0,e.index))," "),ha("u",{"aria-hidden":"true"},e[3]),to(n(i.substr(e.index+e[0].length))," ")):this.label.innerText=n(i).trim(),(t=this.item)===null||t===void 0||t.setAttribute("aria-keyshortcuts",(s[1]?s[1]:s[3]).toLocaleLowerCase())}else this.label.innerText=i.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const t=this.action.checked;this.item.classList.toggle("checked",!!t),t!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",t?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const t=this.element&&this.element.classList.contains("focused"),i=t&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,e=t&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=t&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",n=t&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=i??"",this.item.style.backgroundColor=e??"",this.item.style.outline=s,this.item.style.outlineOffset=n),this.check&&(this.check.style.color=i??"")}}class HH extends UH{constructor(t,i,e,s,n){super(t,t,s,n),this.submenuActions=i,this.parentData=e,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new Zi),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:{horizontal:QH.Right,vertical:OH.Below},this.showScheduler=new Er((()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))}),250),this.hideScheduler=new Er((()=>{this.element&&!Dc(Lc(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}),750)}render(t){super.render(t),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=ia(this.item,ha("span.submenu-indicator"+Ka.asCSSSelector(Fs.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(rc(this.element,$c.KEY_UP,(t=>{const i=new hr(t);(i.equals(17)||i.equals(3))&&(qc(t,!0),this.createSubmenu(!0))}))),this._register(rc(this.element,$c.KEY_DOWN,(t=>{const i=new hr(t);Lc()===this.item&&(i.equals(17)||i.equals(3))&&qc(t,!0)}))),this._register(rc(this.element,$c.MOUSE_OVER,(t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())}))),this._register(rc(this.element,$c.MOUSE_LEAVE,(t=>{this.mouseOver=!1}))),this._register(rc(this.element,$c.FOCUS_OUT,(t=>{this.element&&!Dc(Lc(),this.element)&&this.hideScheduler.schedule()}))),this._register(this.parentData.parent.onScroll((()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}))))}updateEnabled(){}onClick(t){qc(t,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(t){if(this.parentData.submenu&&(t||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(t,i,e,s){const n={top:0,left:0};return n.left=DQ(t.width,i.width,{position:s.horizontal===QH.Right?0:1,offset:e.left,size:e.width}),n.left>=e.left&&n.left<e.left+e.width&&(e.left+10+i.width<=t.width&&(n.left=e.left+10),e.top+=10,e.height=0),n.top=DQ(t.height,i.height,{position:0,offset:e.top,size:0}),n.top+i.height===e.top&&n.top+e.height+i.height<=t.height&&(n.top+=e.height),n}createSubmenu(t=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=ia(this.element,ha("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const i=Gh(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),e=parseFloat(i.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new zH(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new Va],this.submenuOptions,this.menuStyle);const s=this.element.getBoundingClientRect(),n={top:s.top-e,left:s.left,height:s.height+2*e,width:s.width},o=this.submenuContainer.getBoundingClientRect(),r=Gh(this.element),{top:h,left:c}=this.calculateSubmenuMenuLayout(new vc(r.innerWidth,r.innerHeight),vc.lift(o),n,this.expandDirection);this.submenuContainer.style.left=c-o.left+"px",this.submenuContainer.style.top=h-o.top+"px",this.submenuDisposables.add(rc(this.submenuContainer,$c.KEY_UP,(t=>{new hr(t).equals(15)&&(qc(t,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))}))),this.submenuDisposables.add(rc(this.submenuContainer,$c.KEY_DOWN,(t=>{new hr(t).equals(15)&&qc(t,!0)}))),this.submenuDisposables.add(this.parentData.submenu.onDidCancel((()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)}))),this.parentData.submenu.focus(t),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(t){var i;this.item&&((i=this.item)===null||i===void 0||i.setAttribute("aria-expanded",t))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class PH extends qU{constructor(t,i,e,s){super(t,i,e),this.menuStyles=s}render(t){super.render(t),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function jH(t){const i=Ss()[t.id];return`.codicon-${t.id}:before { content: '\\${i.toString(16)}'; }`}class WH{constructor(t,i,e,s){this.contextViewService=t,this.telemetryService=i,this.notificationService=e,this.keybindingService=s,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(t){this.options=t}showContextMenu(t){const i=t.getActions();if(!i.length)return;let e;this.focusToReturn=Lc();const s=t.domForShadowRoot instanceof HTMLElement?t.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>t.getAnchor(),canRelayout:!1,anchorAlignment:t.anchorAlignment,anchorAxisAlignment:t.anchorAxisAlignment,render:s=>{var n;this.lastContainer=s;const o=t.getMenuClassName?t.getMenuClassName():"";o&&(s.className+=" "+o),this.options.blockMouse&&(this.block=s.appendChild(ha(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(n=this.blockDisposable)===null||n===void 0||n.dispose(),this.blockDisposable=rc(this.block,$c.MOUSE_DOWN,(t=>t.stopPropagation())));const r=new Zi,h=t.actionRunner||new Wa;h.onWillRun((i=>this.onActionRun(i,!t.skipTelemetry)),this,r),h.onDidRun(this.onDidActionRun,this,r),e=new zH(s,i,{actionViewItemProvider:t.getActionViewItem,context:t.getActionsContext?t.getActionsContext():null,actionRunner:h,getKeyBinding:t.getKeyBinding?t.getKeyBinding:t=>this.keybindingService.lookupKeybinding(t.id)},xH),e.onDidCancel((()=>this.contextViewService.hideContextView(!0)),null,r),e.onDidBlur((()=>this.contextViewService.hideContextView(!0)),null,r);const c=Gh(s);return r.add(rc(c,$c.BLUR,(()=>this.contextViewService.hideContextView(!0)))),r.add(rc(c,$c.MOUSE_DOWN,(t=>{if(t.defaultPrevented)return;const i=new ur(c,t);let e=i.target;if(!i.rightButton){for(;e;){if(e===s)return;e=e.parentElement}this.contextViewService.hideContextView(!0)}}))),Xi(r,e)},focus:()=>{e==null||e.focus(!!t.autoSelectFirstItem)},onHide:i=>{var e,s,n;(e=t.onHide)===null||e===void 0||e.call(t,!!i),this.block&&(this.block.remove(),this.block=null),(s=this.blockDisposable)===null||s===void 0||s.dispose(),this.blockDisposable=null,this.lastContainer&&(Lc()===this.lastContainer||Dc(Lc(),this.lastContainer))&&((n=this.focusToReturn)===null||n===void 0||n.focus()),this.lastContainer=null}},s,!!s)}onActionRun(t,i){i&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:t.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(t){t.error&&!Pi(t.error)&&this.notificationService.error(t.error)}}var YH=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},_H=function(t,i){return function(e,s){i(e,s,t)}};let VH=class extends te{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new WH(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(t,i,e,s,n,o){super(),this.telemetryService=t,this.notificationService=i,this.contextViewService=e,this.keybindingService=s,this.menuService=n,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new de),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new de)}configure(t){this.contextMenuHandler.configure(t)}showContextMenu(t){t=JH.transform(t,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...t,onHide:i=>{var e;(e=t.onHide)===null||e===void 0||e.call(t,i),this._onDidHideContextMenu.fire()}}),pa.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};var JH,GH;VH=YH([_H(0,cu),_H(1,wL),_H(2,cT),_H(3,Hx),_H(4,iu),_H(5,Nl)],VH),function(t){t.transform=function(t,i,e){if(!((s=t)&&s.menuId instanceof tu))return t;var s;const{menuId:n,menuActionOptions:o,contextKeyService:r}=t;return{...t,getActions:()=>{const s=[];if(n){const t=i.createMenu(n,r??e);(function(t,i,e,s){const n=t.getActions(i),o=pa.getInstance();DH(n,e,o.keyStatus.altKey||(yt||xt)&&o.keyStatus.shiftKey,s?t=>t===s:t=>t==="navigation")})(t,o,s),t.dispose()}return t.getActions?Ya.join(t.getActions(),s):s}}}}(JH||(JH={})),function(t){t[t.API=0]="API",t[t.USER=1]="USER"}(GH||(GH={}));var KH=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},$H=function(t,i){return function(e,s){i(e,s,t)}};let XH=class{constructor(t){this._commandService=t}async open(t,i){if(!Rh(t,Lh.command))return!1;if(!(i!=null&&i.allowCommands)||(typeof t=="string"&&(t=fs.parse(t)),Array.isArray(i.allowCommands)&&!i.allowCommands.includes(t.path)))return!0;let e=[];try{e=jN(decodeURIComponent(t.query))}catch{try{e=jN(t.query)}catch{}}return Array.isArray(e)||(e=[e]),await this._commandService.executeCommand(t.path,...e),!0}};XH=KH([$H(0,$a)],XH);let qH=class{constructor(t){this._editorService=t}async open(t,i){typeof t=="string"&&(t=fs.parse(t));const{selection:e,uri:s}=function(t){let i;const e=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(t.fragment);return e&&(i={startLineNumber:parseInt(e[1]),startColumn:e[2]?parseInt(e[2]):1,endLineNumber:e[4]?parseInt(e[4]):void 0,endColumn:e[4]?e[5]?parseInt(e[5]):1:void 0},t=t.with({fragment:""})),{selection:i,uri:t}}(t);return(t=s).scheme===Lh.file&&(t=FM(t)),await this._editorService.openCodeEditor({resource:t,options:{selection:e,source:i!=null&&i.fromUserGesture?GH.USER:GH.API,...i==null?void 0:i.editorOptions}},this._editorService.getFocusedCodeEditor(),i==null?void 0:i.openToSide),!0}};qH=KH([$H(0,Ua)],qH);let ZH=class{constructor(t,i){this._openers=new _t,this._validators=new _t,this._resolvers=new _t,this._resolvedUriTargets=new Jf((t=>t.with({path:null,fragment:null,query:null}).toString())),this._externalOpeners=new _t,this._defaultExternalOpener={openExternal:async t=>(Th(t,Lh.http,Lh.https)?ua(t):Wn.location.href=t,!0)},this._openers.push({open:async(t,i)=>!(!(i!=null&&i.openExternal)&&!Th(t,Lh.mailto,Lh.http,Lh.https,Lh.vsls))&&(await this._doOpenExternal(t,i),!0)}),this._openers.push(new XH(i)),this._openers.push(new qH(t))}registerOpener(t){return{dispose:this._openers.unshift(t)}}async open(t,i){var e;const s=typeof t=="string"?fs.parse(t):t,n=(e=this._resolvedUriTargets.get(s))!==null&&e!==void 0?e:t;for(const t of this._validators)if(!await t.shouldOpen(n,i))return!1;for(const e of this._openers)if(await e.open(t,i))return!0;return!1}async resolveExternalUri(t,i){for(const e of this._resolvers)try{const s=await e.resolveExternalUri(t,i);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,t),s}catch{}throw new Error("Could not resolve external URI: "+t.toString())}async _doOpenExternal(t,i){const e=typeof t=="string"?fs.parse(t):t;let s,n;try{s=(await this.resolveExternalUri(e,i)).resolved}catch{s=e}if(n=typeof t=="string"&&e.toString()===s.toString()?t:encodeURI(s.toString(!0)),i==null?void 0:i.allowContributedOpeners){const t=typeof(i==null?void 0:i.allowContributedOpeners)=="string"?i==null?void 0:i.allowContributedOpeners:void 0;for(const i of this._externalOpeners)if(await i.openExternal(n,{sourceUri:e,preferredOpenerId:t},ye.None))return!0}return this._defaultExternalOpener.openExternal(n,{sourceUri:e},ye.None)}dispose(){this._validators.clear()}};ZH=KH([$H(0,Ua),$H(1,$a)],ZH);const tP=za("editorWorkerService");var iP,eP;(function(t){t[t.Hint=1]="Hint",t[t.Info=2]="Info",t[t.Warning=4]="Warning",t[t.Error=8]="Error"})(iP||(iP={})),function(t){t.compare=function(t,i){return i-t};const i=Object.create(null);i[t.Error]=st(0,"Error"),i[t.Warning]=st(0,"Warning"),i[t.Info]=st(0,"Info"),t.toString=function(t){return i[t]||""},t.fromSeverity=function(i){switch(i){case AL.Error:return t.Error;case AL.Warning:return t.Warning;case AL.Info:return t.Info;case AL.Ignore:return t.Hint}},t.toSeverity=function(i){switch(i){case t.Error:return AL.Error;case t.Warning:return AL.Warning;case t.Info:return AL.Info;case t.Hint:return AL.Ignore}}}(iP||(iP={})),function(t){const i="";function e(t,e){const s=[i];return t.source?s.push(t.source.replace("¦","\\¦")):s.push(i),t.code?typeof t.code=="string"?s.push(t.code.replace("¦","\\¦")):s.push(t.code.value.replace("¦","\\¦")):s.push(i),t.severity!==void 0&&t.severity!==null?s.push(iP.toString(t.severity)):s.push(i),t.message&&e?s.push(t.message.replace("¦","\\¦")):s.push(i),t.startLineNumber!==void 0&&t.startLineNumber!==null?s.push(t.startLineNumber.toString()):s.push(i),t.startColumn!==void 0&&t.startColumn!==null?s.push(t.startColumn.toString()):s.push(i),t.endLineNumber!==void 0&&t.endLineNumber!==null?s.push(t.endLineNumber.toString()):s.push(i),t.endColumn!==void 0&&t.endColumn!==null?s.push(t.endColumn.toString()):s.push(i),s.push(i),s.join("¦")}t.makeKey=function(t){return e(t,!0)},t.makeKeyOptionalMessage=e}(eP||(eP={}));const sP=za("markerService");var nP=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},oP=function(t,i){return function(e,s){i(e,s,t)}};let rP=class extends te{constructor(t,i){super(),this._markerService=i,this._onDidChangeMarker=this._register(new de),this._markerDecorations=new Jf,t.getModels().forEach((t=>this._onModelAdded(t))),this._register(t.onModelAdded(this._onModelAdded,this)),this._register(t.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach((t=>t.dispose())),this._markerDecorations.clear()}getMarker(t,i){const e=this._markerDecorations.get(t);return e&&e.getMarker(i)||null}_handleMarkerChange(t){t.forEach((t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)}))}_onModelAdded(t){const i=new hP(t);this._markerDecorations.set(t.uri,i),this._updateDecorations(i)}_onModelRemoved(t){var i;const e=this._markerDecorations.get(t.uri);e&&(e.dispose(),this._markerDecorations.delete(t.uri)),t.uri.scheme!==Lh.inMemory&&t.uri.scheme!==Lh.internal&&t.uri.scheme!==Lh.vscode||(i=this._markerService)===null||i===void 0||i.read({resource:t.uri}).map((t=>t.owner)).forEach((i=>this._markerService.remove(i,[t.uri])))}_updateDecorations(t){const i=this._markerService.read({resource:t.model.uri,take:500});t.update(i)&&this._onDidChangeMarker.fire(t.model)}};rP=nP([oP(0,Ha),oP(1,sP)],rP);class hP extends te{constructor(t){super(),this.model=t,this._map=new $f,this._register(qi((()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()})))}update(t){const{added:i,removed:e}=function(t,i){const e=[],s=[];for(const s of t)i.has(s)||e.push(s);for(const e of i)t.has(e)||s.push(e);return{removed:e,added:s}}(new Set(this._map.keys()),new Set(t));if(i.length===0&&e.length===0)return!1;const s=e.map((t=>this._map.get(t))),n=i.map((t=>({range:this._createDecorationRange(this.model,t),options:this._createDecorationOption(t)}))),o=this.model.deltaDecorations(s,n);for(const t of e)this._map.delete(t);for(let t=0;t<o.length;t++)this._map.set(i[t],o[t]);return!0}getMarker(t){return this._map.getKey(t.id)}_createDecorationRange(t,i){let e=Es.lift(i);if(i.severity!==iP.Hint||this._hasMarkerTag(i,1)||this._hasMarkerTag(i,2)||(e=e.setEndPosition(e.startLineNumber,e.startColumn+2)),e=t.validateRange(e),e.isEmpty()){const i=t.getLineLastNonWhitespaceColumn(e.startLineNumber)||t.getLineMaxColumn(e.startLineNumber);if(i===1||e.endColumn>=i)return e;const s=t.getWordAtPosition(e.getStartPosition());s&&(e=new Es(e.startLineNumber,s.startColumn,e.endLineNumber,s.endColumn))}else if(i.endColumn===Number.MAX_VALUE&&i.startColumn===1&&e.startLineNumber===e.endLineNumber){const s=t.getLineFirstNonWhitespaceColumn(i.startLineNumber);s<e.endColumn&&(e=new Es(e.startLineNumber,s,e.endLineNumber,e.endColumn),i.startColumn=s)}return e}_createDecorationOption(t){let i,e,s,n,o;switch(t.severity){case iP.Hint:i=this._hasMarkerTag(t,2)?void 0:this._hasMarkerTag(t,1)?"squiggly-unnecessary":"squiggly-hint",s=0;break;case iP.Info:i="squiggly-info",e=Ik(px),s=10,o={color:Ik(uv),position:1};break;case iP.Warning:i="squiggly-warning",e=Ik(Ax),s=20,o={color:Ik(dv),position:1};break;case iP.Error:default:i="squiggly-error",e=Ik(gx),s=30,o={color:Ik(fv),position:1}}return t.tags&&(t.tags.indexOf(1)!==-1&&(n="squiggly-inline-unnecessary"),t.tags.indexOf(2)!==-1&&(n="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:i,showIfCollapsed:!0,overviewRuler:{color:e,position:ig.Right},minimap:o,zIndex:s,inlineClassName:n}}_hasMarkerTag(t,i){return!!t.tags&&t.tags.indexOf(i)>=0}}var cP,aP=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},lP=function(t,i){return function(e,s){i(e,s,t)}};function uP(t){return t.toString()}class dP{constructor(t,i,e){this.model=t,this._modelEventListeners=new Zi,this.model=t,this._modelEventListeners.add(t.onWillDispose((()=>i(t)))),this._modelEventListeners.add(t.onDidChangeLanguage((i=>e(t,i))))}dispose(){this._modelEventListeners.dispose()}}const fP=xt||kt?1:2;class gP{constructor(t,i,e,s,n,o,r,h){this.uri=t,this.initialUndoRedoSnapshot=i,this.time=e,this.sharesUndoRedoStack=s,this.heapSize=n,this.sha1=o,this.versionId=r,this.alternativeVersionId=h}}let AP=cP=class extends te{constructor(t,i,e,s,n){super(),this._configurationService=t,this._resourcePropertiesService=i,this._undoRedoService=e,this._languageService=s,this._languageConfigurationService=n,this._onModelAdded=this._register(new de),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new de),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new de),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration((t=>this._updateModelOptions(t)))),this._updateModelOptions(void 0)}static _readModelOptions(t,i){var e;let s=jt.tabSize;if(t.editor&&t.editor.tabSize!==void 0){const i=parseInt(t.editor.tabSize,10);isNaN(i)||(s=i),s<1&&(s=1)}let n="tabSize";if(t.editor&&t.editor.indentSize!==void 0&&t.editor.indentSize!=="tabSize"){const i=parseInt(t.editor.indentSize,10);isNaN(i)||(n=Math.max(i,1))}let o=jt.insertSpaces;t.editor&&t.editor.insertSpaces!==void 0&&(o=t.editor.insertSpaces!=="false"&&!!t.editor.insertSpaces);let r=fP;const h=t.eol;h===`\r\n`?r=2:h===`\n`&&(r=1);let c=jt.trimAutoWhitespace;t.editor&&t.editor.trimAutoWhitespace!==void 0&&(c=t.editor.trimAutoWhitespace!=="false"&&!!t.editor.trimAutoWhitespace);let a=jt.detectIndentation;t.editor&&t.editor.detectIndentation!==void 0&&(a=t.editor.detectIndentation!=="false"&&!!t.editor.detectIndentation);let l=jt.largeFileOptimizations;t.editor&&t.editor.largeFileOptimizations!==void 0&&(l=t.editor.largeFileOptimizations!=="false"&&!!t.editor.largeFileOptimizations);let u=jt.bracketPairColorizationOptions;return!((e=t.editor)===null||e===void 0)&&e.bracketPairColorization&&typeof t.editor.bracketPairColorization=="object"&&(u={enabled:!!t.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!t.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:i,tabSize:s,indentSize:n,insertSpaces:o,detectIndentation:a,defaultEOL:r,trimAutoWhitespace:c,largeFileOptimizations:l,bracketPairColorizationOptions:u}}_getEOL(t,i){if(t)return this._resourcePropertiesService.getEOL(t,i);const e=this._configurationService.getValue("files.eol",{overrideIdentifier:i});return e&&typeof e=="string"&&e!=="auto"?e:Rt===3||Rt===2?`\n`:`\r\n`}_shouldRestoreUndoStack(){const t=this._configurationService.getValue("files.restoreUndoStack");return typeof t!="boolean"||t}getCreationOptions(t,i,e){const s=typeof t=="string"?t:t.languageId;let n=this._modelCreationOptionsByLanguageAndResource[s+i];if(!n){const t=this._configurationService.getValue("editor",{overrideIdentifier:s,resource:i}),o=this._getEOL(i,s);n=cP._readModelOptions({editor:t,eol:o},e),this._modelCreationOptionsByLanguageAndResource[s+i]=n}return n}_updateModelOptions(t){const i=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const e=Object.keys(this._models);for(let s=0,n=e.length;s<n;s++){const n=e[s],o=this._models[n],r=o.model.getLanguageId(),h=o.model.uri;if(t&&!t.affectsConfiguration("editor",{overrideIdentifier:r,resource:h})&&!t.affectsConfiguration("files.eol",{overrideIdentifier:r,resource:h}))continue;const c=i[r+h],a=this.getCreationOptions(r,h,o.model.isForSimpleWidget);cP._setModelOptionsForModel(o.model,a,c)}}static _setModelOptionsForModel(t,i,e){e&&e.defaultEOL!==i.defaultEOL&&t.getLineCount()===1&&t.setEOL(i.defaultEOL===1?0:1),e&&e.detectIndentation===i.detectIndentation&&e.insertSpaces===i.insertSpaces&&e.tabSize===i.tabSize&&e.indentSize===i.indentSize&&e.trimAutoWhitespace===i.trimAutoWhitespace&&Z(e.bracketPairColorizationOptions,i.bracketPairColorizationOptions)||(i.detectIndentation?(t.detectIndentation(i.insertSpaces,i.tabSize),t.updateOptions({trimAutoWhitespace:i.trimAutoWhitespace,bracketColorizationOptions:i.bracketPairColorizationOptions})):t.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.indentSize,trimAutoWhitespace:i.trimAutoWhitespace,bracketColorizationOptions:i.bracketPairColorizationOptions}))}_insertDisposedModel(t){this._disposedModels.set(uP(t.uri),t),this._disposedModelsHeapSize+=t.heapSize}_removeDisposedModel(t){const i=this._disposedModels.get(uP(t));return i&&(this._disposedModelsHeapSize-=i.heapSize),this._disposedModels.delete(uP(t)),i}_ensureDisposedModelsHeapSize(t){if(this._disposedModelsHeapSize>t){const i=[];for(this._disposedModels.forEach((t=>{t.sharesUndoRedoStack||i.push(t)})),i.sort(((t,i)=>t.time-i.time));i.length>0&&this._disposedModelsHeapSize>t;){const t=i.shift();this._removeDisposedModel(t.uri),t.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(t.initialUndoRedoSnapshot)}}}_createModelData(t,i,e,s){const n=this.getCreationOptions(i,e,s),o=new wF(t,i,n,e,this._undoRedoService,this._languageService,this._languageConfigurationService);if(e&&this._disposedModels.has(uP(e))){const t=this._removeDisposedModel(e),i=this._undoRedoService.getElements(e),s=this._getSHA1Computer(),n=!!s.canComputeSHA1(o)&&s.computeSHA1(o)===t.sha1;if(n||t.sharesUndoRedoStack){for(const t of i.past)PM(t)&&t.matchesResource(e)&&t.setModel(o);for(const t of i.future)PM(t)&&t.matchesResource(e)&&t.setModel(o);this._undoRedoService.setElementsValidFlag(e,!0,(t=>PM(t)&&t.matchesResource(e))),n&&(o._overwriteVersionId(t.versionId),o._overwriteAlternativeVersionId(t.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(t.initialUndoRedoSnapshot))}else t.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(t.initialUndoRedoSnapshot)}const r=uP(o.uri);if(this._models[r])throw new Error("ModelService: Cannot add model because it already exists!");const h=new dP(o,(t=>this._onWillDispose(t)),((t,i)=>this._onDidChangeLanguage(t,i)));return this._models[r]=h,h}createModel(t,i,e,s=!1){let n;return n=i?this._createModelData(t,i,e,s):this._createModelData(t,ef,e,s),this._onModelAdded.fire(n.model),n.model}getModels(){const t=[],i=Object.keys(this._models);for(let e=0,s=i.length;e<s;e++){const s=i[e];t.push(this._models[s].model)}return t}getModel(t){const i=uP(t),e=this._models[i];return e?e.model:null}_schemaShouldMaintainUndoRedoElements(t){return t.scheme===Lh.file||t.scheme===Lh.vscodeRemote||t.scheme===Lh.vscodeUserData||t.scheme===Lh.vscodeNotebookCell||t.scheme==="fake-fs"}_onWillDispose(t){const i=uP(t.uri),e=this._models[i],s=this._undoRedoService.getUriComparisonKey(t.uri)!==t.uri.toString();let n=!1,o=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(t.uri)){const i=this._undoRedoService.getElements(t.uri);if(i.past.length>0||i.future.length>0){for(const e of i.past)PM(e)&&e.matchesResource(t.uri)&&(n=!0,o+=e.heapSize(t.uri),e.setModel(t.uri));for(const e of i.future)PM(e)&&e.matchesResource(t.uri)&&(n=!0,o+=e.heapSize(t.uri),e.setModel(t.uri))}}const r=cP.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,h=this._getSHA1Computer();if(n)if(s||!(o>r)&&h.canComputeSHA1(t))this._ensureDisposedModelsHeapSize(r-o),this._undoRedoService.setElementsValidFlag(t.uri,!1,(i=>PM(i)&&i.matchesResource(t.uri))),this._insertDisposedModel(new gP(t.uri,e.model.getInitialUndoRedoSnapshot(),Date.now(),s,o,h.computeSHA1(t),t.getVersionId(),t.getAlternativeVersionId()));else{const t=e.model.getInitialUndoRedoSnapshot();t!==null&&this._undoRedoService.restoreSnapshot(t)}else if(!s){const t=e.model.getInitialUndoRedoSnapshot();t!==null&&this._undoRedoService.restoreSnapshot(t)}delete this._models[i],e.dispose(),delete this._modelCreationOptionsByLanguageAndResource[t.getLanguageId()+t.uri],this._onModelRemoved.fire(t)}_onDidChangeLanguage(t,i){const e=i.oldLanguage,s=t.getLanguageId(),n=this.getCreationOptions(e,t.uri,t.isForSimpleWidget),o=this.getCreationOptions(s,t.uri,t.isForSimpleWidget);cP._setModelOptionsForModel(t,o,n),this._onModelModeChanged.fire({model:t,oldLanguageId:e})}_getSHA1Computer(){return new pP}};AP.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520,AP=cP=aP([lP(0,Id),lP(1,PA),lP(2,rF),lP(3,Od),lP(4,uf)],AP);class pP{canComputeSHA1(t){return t.getValueLength()<=pP.MAX_MODEL_SIZE}computeSHA1(t){const i=new Vh,e=t.createSnapshot();let s;for(;s=e.read();)i.update(s);return i.digest()}}var wP;pP.MAX_MODEL_SIZE=10485760,function(t){t[t.PRESERVE=0]="PRESERVE",t[t.LAST=1]="LAST"}(wP||(wP={}));const mP="workbench.contributions.quickaccess";Vl.add(mP,new class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(t){return t.prefix.length===0?this.defaultProvider=t:this.providers.push(t),this.providers.sort(((t,i)=>i.prefix.length-t.prefix.length)),qi((()=>{this.providers.splice(this.providers.indexOf(t),1),this.defaultProvider===t&&(this.defaultProvider=void 0)}))}getQuickAccessProviders(){return f([this.defaultProvider,...this.providers])}getQuickAccessProvider(t){return t&&this.providers.find((i=>t.startsWith(i.prefix)))||void 0||this.defaultProvider}});const vP={ctrlCmd:!1,alt:!1};var bP,yP;(function(t){t[t.Blur=1]="Blur",t[t.Gesture=2]="Gesture",t[t.Other=3]="Other"})(bP||(bP={})),function(t){t[t.NONE=0]="NONE",t[t.FIRST=1]="FIRST",t[t.SECOND=2]="SECOND",t[t.LAST=3]="LAST"}(yP||(yP={}));const kP=za("quickInputService");var xP=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},CP=function(t,i){return function(e,s){i(e,s,t)}};let EP=class extends te{constructor(t,i){super(),this.quickInputService=t,this.instantiationService=i,this.registry=Vl.as(mP),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(t="",i){this.doShowOrPick(t,!1,i)}doShowOrPick(t,i,e){var s,n,o;const[r,h]=this.getOrInstantiateProvider(t),c=this.visibleQuickAccess,a=c==null?void 0:c.descriptor;if(c&&h&&a===h)return t===h.prefix||e!=null&&e.preserveValue||(c.picker.value=t),void this.adjustValueSelection(c.picker,h,e);if(h&&!(e!=null&&e.preserveValue)){let i;if(c&&a&&a!==h){const t=c.value.substr(a.prefix.length);t&&(i=`${h.prefix}${t}`)}if(!i){const t=r==null?void 0:r.defaultFilterValue;t===wP.LAST?i=this.lastAcceptedPickerValues.get(h):typeof t=="string"&&(i=`${h.prefix}${t}`)}typeof i=="string"&&(t=i)}const l=(s=c==null?void 0:c.picker)===null||s===void 0?void 0:s.valueSelection,u=(n=c==null?void 0:c.picker)===null||n===void 0?void 0:n.value,d=new Zi,f=d.add(this.quickInputService.createQuickPick());let g;f.value=t,this.adjustValueSelection(f,h,e),f.placeholder=h==null?void 0:h.placeholder,f.quickNavigate=e==null?void 0:e.quickNavigateConfiguration,f.hideInput=!!f.quickNavigate&&!c,(typeof(e==null?void 0:e.itemActivation)=="number"||e!=null&&e.quickNavigateConfiguration)&&(f.itemActivation=(o=e==null?void 0:e.itemActivation)!==null&&o!==void 0?o:yP.SECOND),f.contextKey=h==null?void 0:h.contextKey,f.filterValue=t=>t.substring(h?h.prefix.length:0),i&&(g=new Fr,d.add(he.once(f.onWillAccept)((t=>{t.veto(),f.hide()})))),d.add(this.registerPickerListeners(f,r,h,t,e==null?void 0:e.providerOptions));const A=d.add(new xe);return r&&d.add(r.provide(f,A.token,e==null?void 0:e.providerOptions)),he.once(f.onDidHide)((()=>{f.selectedItems.length===0&&A.cancel(),d.dispose(),g==null||g.complete(f.selectedItems.slice(0))})),f.show(),l&&u===t&&(f.valueSelection=l),i?g==null?void 0:g.p:void 0}adjustValueSelection(t,i,e){var s;let n;n=e!=null&&e.preserveValue?[t.value.length,t.value.length]:[(s=i==null?void 0:i.prefix.length)!==null&&s!==void 0?s:0,t.value.length],t.valueSelection=n}registerPickerListeners(t,i,e,s,n){const o=new Zi,r=this.visibleQuickAccess={picker:t,descriptor:e,value:s};return o.add(qi((()=>{r===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)}))),o.add(t.onDidChangeValue((t=>{const[e]=this.getOrInstantiateProvider(t);e!==i?this.show(t,{preserveValue:!0,providerOptions:n}):r.value=t}))),e&&o.add(t.onDidAccept((()=>{this.lastAcceptedPickerValues.set(e,t.value)}))),o}getOrInstantiateProvider(t){const i=this.registry.getQuickAccessProvider(t);if(!i)return[void 0,void 0];let e=this.mapProviderToDescriptor.get(i);return e||(e=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,e)),[e,i]}};EP=xP([CP(0,kP),CP(1,Oa)],EP);class BP extends Yy{constructor(t){var i;super(),this._onChange=this._register(new de),this.onChange=this._onChange.event,this._onKeyDown=this._register(new de),this.onKeyDown=this._onKeyDown.event,this._opts=t,this._checked=this._opts.isChecked;const e=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,e.push(...Ka.asClassNameArray(this._icon))),this._opts.actionClassName&&e.push(...this._opts.actionClassName.split(" ")),this._checked&&e.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(fz((i=t.hoverDelegate)!==null&&i!==void 0?i:az("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...e),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,(t=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),t.preventDefault())})),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,(t=>{if(t.keyCode===10||t.keyCode===3)return this.checked=!this._checked,this._onChange.fire(!0),t.preventDefault(),void t.stopPropagation();this._onKeyDown.fire(t)}))}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(t){this._checked=t,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var DP=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};class MP{constructor(t){this.nodes=t}toString(){return this.nodes.map((t=>typeof t=="string"?t:t.label)).join("")}}DP([Hy],MP.prototype,"toString",null);const SP=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi,FP={},IP=new zN("quick-input-button-icon-");function LP(t,i,e){let s=t.iconClass||function(t){if(!t)return;let i;const e=t.dark.toString();return FP[e]?i=FP[e]:(i=IP.nextId(),_c(`.${i}, .hc-light .${i}`,`background-image: ${da(t.light||t.dark)}`),_c(`.vs-dark .${i}, .hc-black .${i}`,`background-image: ${da(t.dark)}`),FP[e]=i),i}(t.iconPath);return t.alwaysVisible&&(s=s?`${s} always-visible`:"always-visible"),{id:i,label:"",tooltip:t.tooltip||"",class:s,enabled:!0,run:e}}function RP(t,i,e){sa(i);const s=function(t){const i=[];let e,s=0;for(;e=SP.exec(t);){e.index-s>0&&i.push(t.substring(s,e.index));const[,n,o,,r]=e;r?i.push({label:n,href:o,title:r}):i.push({label:n,href:o}),s=e.index+e[0].length}return s<t.length&&i.push(t.substring(s)),new MP(i)}(t);let n=0;for(const t of s.nodes)if(typeof t=="string")i.append(...kT(t));else{let s=t.title;!s&&t.href.startsWith("command:")?s=st(0,"Click to execute command '{0}'",t.href.substring(8)):s||(s=t.href);const o=ha("a",{href:t.href,title:s,tabIndex:n++},t.label);o.style.textDecoration="underline";const r=i=>{Xc(i)&&qc(i,!0),e.callback(t.href)},h=e.disposables.add(new gk(o,$c.CLICK)).event,c=e.disposables.add(new gk(o,$c.KEY_DOWN)).event,a=he.chain(c,(t=>t.filter((t=>{const i=new hr(t);return i.equals(10)||i.equals(3)}))));e.disposables.add(Wy.addTarget(o));const l=e.disposables.add(new gk(o,Py.Tap)).event;he.any(h,l,a)(r,null,e.disposables),i.appendChild(o)}}class TP{get templateId(){return this.renderer.templateId}constructor(t,i){this.renderer=t,this.modelProvider=i}renderTemplate(t){return{data:this.renderer.renderTemplate(t),disposable:te.None}}renderElement(t,i,e,s){var n;if((n=e.disposable)===null||n===void 0||n.dispose(),!e.data)return;const o=this.modelProvider();if(o.isResolved(t))return this.renderer.renderElement(o.get(t),t,e.data,s);const r=new xe,h=o.resolve(t,r.token);e.disposable={dispose:()=>r.cancel()},this.renderer.renderPlaceholder(t,e.data),h.then((i=>this.renderer.renderElement(i,t,e.data,s)))}disposeTemplate(t){t.disposable&&(t.disposable.dispose(),t.disposable=void 0),t.data&&(this.renderer.disposeTemplate(t.data),t.data=void 0)}}class NP{constructor(t,i){this.modelProvider=t,this.accessibilityProvider=i}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(t){const i=this.modelProvider();return i.isResolved(t)?this.accessibilityProvider.getAriaLabel(i.get(t)):null}}class QP{constructor(t,i,e,s,n={}){const o=()=>this.model,r=s.map((t=>new TP(t,o)));this.list=new YU(t,i,e,r,function(t,i){return{...i,accessibilityProvider:i.accessibilityProvider&&new NP(t,i.accessibilityProvider)}}(o,n))}updateOptions(t){this.list.updateOptions(t)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return he.map(this.list.onMouseDblClick,(({element:t,index:i,browserEvent:e})=>({element:t===void 0?void 0:this._model.get(t),index:i,browserEvent:e})))}get onPointer(){return he.map(this.list.onPointer,(({element:t,index:i,browserEvent:e})=>({element:t===void 0?void 0:this._model.get(t),index:i,browserEvent:e})))}get onDidChangeSelection(){return he.map(this.list.onDidChangeSelection,(({elements:t,indexes:i,browserEvent:e})=>({elements:t.map((t=>this._model.get(t))),indexes:i,browserEvent:e})))}get model(){return this._model}set model(t){this._model=t,this.list.splice(0,this.list.length,v(t.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map((t=>this.model.get(t)))}style(t){this.list.style(t)}dispose(){this.list.dispose()}}var OP=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},zP;(function(t){t.North="north",t.South="south",t.East="east",t.West="west"})(zP||(zP={}));const UP=new de,HP=new de;class PP{constructor(t){this.el=t,this.disposables=new Zi}get onPointerMove(){return this.disposables.add(new gk(Gh(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new gk(Gh(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}OP([Hy],PP.prototype,"onPointerMove",null),OP([Hy],PP.prototype,"onPointerUp",null);class jP{get onPointerMove(){return this.disposables.add(new gk(this.el,Py.Change)).event}get onPointerUp(){return this.disposables.add(new gk(this.el,Py.End)).event}constructor(t){this.el=t,this.disposables=new Zi}dispose(){this.disposables.dispose()}}OP([Hy],jP.prototype,"onPointerMove",null),OP([Hy],jP.prototype,"onPointerUp",null);class WP{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(t){this.factory=t}dispose(){}}OP([Hy],WP.prototype,"onPointerMove",null),OP([Hy],WP.prototype,"onPointerUp",null);const YP="pointer-events-disabled";class _P extends te{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(t){this._state!==t&&(this.el.classList.toggle("disabled",t===0),this.el.classList.toggle("minimum",t===1),this.el.classList.toggle("maximum",t===2),this._state=t,this.onDidEnablementChange.fire(t))}set orthogonalStartSash(t){if(this._orthogonalStartSash!==t){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),t){const i=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=ia(this.el,ha(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(qi((()=>this._orthogonalStartDragHandle.remove()))),this.orthogonalStartDragHandleDisposables.add(new gk(this._orthogonalStartDragHandle,"mouseenter")).event((()=>_P.onMouseEnter(t)),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new gk(this._orthogonalStartDragHandle,"mouseleave")).event((()=>_P.onMouseLeave(t)),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(t.onDidEnablementChange.event(i,this)),i(t.state)}this._orthogonalStartSash=t}}set orthogonalEndSash(t){if(this._orthogonalEndSash!==t){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),t){const i=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=ia(this.el,ha(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(qi((()=>this._orthogonalEndDragHandle.remove()))),this.orthogonalEndDragHandleDisposables.add(new gk(this._orthogonalEndDragHandle,"mouseenter")).event((()=>_P.onMouseEnter(t)),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new gk(this._orthogonalEndDragHandle,"mouseleave")).event((()=>_P.onMouseLeave(t)),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(t.onDidEnablementChange.event(i,this)),i(t.state)}this._orthogonalEndSash=t}}constructor(t,i,e){super(),this.hoverDelay=300,this.hoverDelayer=this._register(new mr(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new de),this._onDidStart=this._register(new de),this._onDidChange=this._register(new de),this._onDidReset=this._register(new de),this._onDidEnd=this._register(new de),this.orthogonalStartSashDisposables=this._register(new Zi),this.orthogonalStartDragHandleDisposables=this._register(new Zi),this.orthogonalEndSashDisposables=this._register(new Zi),this.orthogonalEndDragHandleDisposables=this._register(new Zi),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=ia(t,ha(".monaco-sash")),e.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${e.orthogonalEdge}`),kt&&this.el.classList.add("mac");const s=this._register(new gk(this.el,"mousedown")).event;this._register(s((i=>this.onPointerStart(i,new PP(t))),this));const n=this._register(new gk(this.el,"dblclick")).event;this._register(n(this.onPointerDoublePress,this));const o=this._register(new gk(this.el,"mouseenter")).event;this._register(o((()=>_P.onMouseEnter(this))));const r=this._register(new gk(this.el,"mouseleave")).event;this._register(r((()=>_P.onMouseLeave(this)))),this._register(Wy.addTarget(this.el));const h=this._register(new gk(this.el,Py.Start)).event;this._register(h((t=>this.onPointerStart(t,new jP(this.el))),this));const c=this._register(new gk(this.el,Py.Tap)).event;let a;this._register(c((t=>{if(a)return clearTimeout(a),a=void 0,void this.onPointerDoublePress(t);clearTimeout(a),a=setTimeout((()=>a=void 0),250)}),this)),typeof e.size=="number"?(this.size=e.size,e.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=4,this._register(UP.event((t=>{this.size=t,this.layout()})))),this._register(HP.event((t=>this.hoverDelay=t))),this.layoutProvider=i,this.orthogonalStartSash=e.orthogonalStartSash,this.orthogonalEndSash=e.orthogonalEndSash,this.orientation=e.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",!1),this.layout()}onPointerStart(t,i){qc(t);let e=!1;if(!t.__orthogonalSashEvent){const s=this.getOrthogonalSash(t);s&&(e=!0,t.__orthogonalSashEvent=!0,s.onPointerStart(t,new WP(i)))}if(this.linkedSash&&!t.__linkedSashEvent&&(t.__linkedSashEvent=!0,this.linkedSash.onPointerStart(t,new WP(i))),!this.state)return;const s=this.el.ownerDocument.getElementsByTagName("iframe");for(const t of s)t.classList.add(YP);const n=t.pageX,o=t.pageY,r=t.altKey,h={startX:n,currentX:n,startY:o,currentY:o,altKey:r};this.el.classList.add("active"),this._onDidStart.fire(h);const c=Uc(this.el),a=()=>{let t="";t=e?"all-scroll":this.orientation===1?this.state===1?"s-resize":this.state===2?"n-resize":kt?"row-resize":"ns-resize":this.state===1?"e-resize":this.state===2?"w-resize":kt?"col-resize":"ew-resize",c.textContent=`* { cursor: ${t} !important; }`},l=new Zi;a(),e||this.onDidEnablementChange.event(a,null,l),i.onPointerMove((t=>{qc(t,!1);const i={startX:n,currentX:t.pageX,startY:o,currentY:t.pageY,altKey:r};this._onDidChange.fire(i)}),null,l),i.onPointerUp((t=>{qc(t,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),l.dispose();for(const t of s)t.classList.remove(YP)}),null,l),l.add(i)}onPointerDoublePress(t){const i=this.getOrthogonalSash(t);i&&i._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(t,i=!1){t.el.classList.contains("active")?(t.hoverDelayer.cancel(),t.el.classList.add("hover")):t.hoverDelayer.trigger((()=>t.el.classList.add("hover")),t.hoverDelay).then(void 0,(()=>{})),!i&&t.linkedSash&&_P.onMouseEnter(t.linkedSash,!0)}static onMouseLeave(t,i=!1){t.hoverDelayer.cancel(),t.el.classList.remove("hover"),!i&&t.linkedSash&&_P.onMouseLeave(t.linkedSash,!0)}clearSashHoverState(){_P.onMouseLeave(this)}layout(){if(this.orientation===0){const t=this.layoutProvider;this.el.style.left=t.getVerticalSashLeft(this)-this.size/2+"px",t.getVerticalSashTop&&(this.el.style.top=t.getVerticalSashTop(this)+"px"),t.getVerticalSashHeight&&(this.el.style.height=t.getVerticalSashHeight(this)+"px")}else{const t=this.layoutProvider;this.el.style.top=t.getHorizontalSashTop(this)-this.size/2+"px",t.getHorizontalSashLeft&&(this.el.style.left=t.getHorizontalSashLeft(this)+"px"),t.getHorizontalSashWidth&&(this.el.style.width=t.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(t){var i;const e=(i=t.initialTarget)!==null&&i!==void 0?i:t.target;if(e&&e instanceof HTMLElement)return e.classList.contains("orthogonal-drag-handle")?e.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash:void 0}dispose(){super.dispose(),this.el.remove()}}const VP={separatorBorder:CA.transparent};class JP{set size(t){this._size=t}get size(){return this._size}get visible(){return this._cachedVisibleSize===void 0}setVisible(t,i){var e,s;if(t!==this.visible){t?(this.size=rR(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof i=="number"?i:this.size,this.size=0),this.container.classList.toggle("visible",t);try{(s=(e=this.view).setVisible)===null||s===void 0||s.call(e,t)}catch(t){console.error("Splitview: Failed to set visible view"),console.error(t)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var t;return(t=this.view.proportionalLayout)===null||t===void 0||t}get snap(){return!!this.view.snap}set enabled(t){this.container.style.pointerEvents=t?"":"none"}constructor(t,i,e,s){this.container=t,this.view=i,this.disposable=s,this._cachedVisibleSize=void 0,typeof e=="number"?(this._size=e,this._cachedVisibleSize=void 0,t.classList.add("visible")):(this._size=0,this._cachedVisibleSize=e.cachedVisibleSize)}layout(t,i){this.layoutContainer(t);try{this.view.layout(this.size,t,i)}catch(t){console.error("Splitview: Failed to layout view"),console.error(t)}}dispose(){this.disposable.dispose()}}class GP extends JP{layoutContainer(t){this.container.style.top=`${t}px`,this.container.style.height=`${this.size}px`}}class KP extends JP{layoutContainer(t){this.container.style.left=`${t}px`,this.container.style.width=`${this.size}px`}}var $P,XP;(function(t){t[t.Idle=0]="Idle",t[t.Busy=1]="Busy"})($P||($P={})),function(t){t.Distribute={type:"distribute"},t.Split=function(t){return{type:"split",index:t}},t.Auto=function(t){return{type:"auto",index:t}},t.Invisible=function(t){return{type:"invisible",cachedVisibleSize:t}}}(XP||(XP={}));class qP extends te{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(t){for(const i of this.sashItems)i.sash.orthogonalStartSash=t;this._orthogonalStartSash=t}set orthogonalEndSash(t){for(const i of this.sashItems)i.sash.orthogonalEndSash=t;this._orthogonalEndSash=t}set startSnappingEnabled(t){this._startSnappingEnabled!==t&&(this._startSnappingEnabled=t,this.updateSashEnablement())}set endSnappingEnabled(t){this._endSnappingEnabled!==t&&(this._endSnappingEnabled=t,this.updateSashEnablement())}constructor(t,i={}){var e,s,n,o,r;super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=$P.Idle,this._onDidSashChange=this._register(new de),this._onDidSashReset=this._register(new de),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(e=i.orientation)!==null&&e!==void 0?e:0,this.inverseAltBehavior=(s=i.inverseAltBehavior)!==null&&s!==void 0&&s,this.proportionalLayout=(n=i.proportionalLayout)===null||n===void 0||n,this.getSashOrthogonalSize=i.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),t.appendChild(this.el),this.sashContainer=ia(this.el,ha(".sash-container")),this.viewContainer=ha(".split-view-container"),this.scrollable=this._register(new Zy({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:t=>fc(Gh(this.el),t)})),this.scrollableElement=this._register(new hk(this.viewContainer,{vertical:this.orientation===0?(o=i.scrollbarVisibility)!==null&&o!==void 0?o:1:2,horizontal:this.orientation===1?(r=i.scrollbarVisibility)!==null&&r!==void 0?r:1:2},this.scrollable));const h=this._register(new gk(this.viewContainer,"scroll")).event;this._register(h((t=>{const i=this.scrollableElement.getScrollPosition(),e=Math.abs(this.viewContainer.scrollLeft-i.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,s=Math.abs(this.viewContainer.scrollTop-i.scrollTop)<=1?void 0:this.viewContainer.scrollTop;e===void 0&&s===void 0||this.scrollableElement.setScrollPosition({scrollLeft:e,scrollTop:s})}))),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll((t=>{t.scrollTopChanged&&(this.viewContainer.scrollTop=t.scrollTop),t.scrollLeftChanged&&(this.viewContainer.scrollLeft=t.scrollLeft)}))),ia(this.el,this.scrollableElement.getDomNode()),this.style(i.styles||VP),i.descriptor&&(this.size=i.descriptor.size,i.descriptor.views.forEach(((t,i)=>{const e=P(t.visible)||t.visible?t.size:{type:"invisible",cachedVisibleSize:t.size},s=t.view;this.doAddView(s,e,i,!0)})),this._contentSize=this.viewItems.reduce(((t,i)=>t+i.size),0),this.saveProportions())}style(t){t.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",t.separatorBorder.toString()))}addView(t,i,e=this.viewItems.length,s){this.doAddView(t,i,e,s)}layout(t,i){const e=Math.max(this.size,this._contentSize);if(this.size=t,this.layoutContext=i,this.proportions){let i=0;for(let e=0;e<this.viewItems.length;e++){const s=this.viewItems[e],n=this.proportions[e];typeof n=="number"?i+=n:t-=s.size}for(let e=0;e<this.viewItems.length;e++){const s=this.viewItems[e],n=this.proportions[e];typeof n=="number"&&i>0&&(s.size=rR(Math.round(n*t/i),s.minimumSize,s.maximumSize))}}else{const i=v(this.viewItems.length),s=i.filter((t=>this.viewItems[t].priority===1)),n=i.filter((t=>this.viewItems[t].priority===2));this.resize(this.viewItems.length-1,t-e,void 0,s,n)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map((t=>t.proportionalLayout&&t.visible?t.size/this._contentSize:void 0)))}onSashStart({sash:t,start:i,alt:e}){for(const t of this.viewItems)t.enabled=!1;const s=this.sashItems.findIndex((i=>i.sash===t)),n=Xi(rc(this.el.ownerDocument.body,"keydown",(t=>o(this.sashDragState.current,t.altKey))),rc(this.el.ownerDocument.body,"keyup",(()=>o(this.sashDragState.current,!1)))),o=(t,i)=>{const e=this.viewItems.map((t=>t.size));let o,r,h=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(i=!i),i)if(s===this.sashItems.length-1){const t=this.viewItems[s];h=(t.minimumSize-t.size)/2,c=(t.maximumSize-t.size)/2}else{const t=this.viewItems[s+1];h=(t.size-t.maximumSize)/2,c=(t.size-t.minimumSize)/2}if(!i){const t=v(s,-1),i=v(s+1,this.viewItems.length),n=t.reduce(((t,i)=>t+(this.viewItems[i].minimumSize-e[i])),0),h=t.reduce(((t,i)=>t+(this.viewItems[i].viewMaximumSize-e[i])),0),c=i.length===0?Number.POSITIVE_INFINITY:i.reduce(((t,i)=>t+(e[i]-this.viewItems[i].minimumSize)),0),a=i.length===0?Number.NEGATIVE_INFINITY:i.reduce(((t,i)=>t+(e[i]-this.viewItems[i].viewMaximumSize)),0),l=Math.max(n,a),u=Math.min(c,h),d=this.findFirstSnapIndex(t),f=this.findFirstSnapIndex(i);if(typeof d=="number"){const t=this.viewItems[d],i=Math.floor(t.viewMinimumSize/2);o={index:d,limitDelta:t.visible?l-i:l+i,size:t.size}}if(typeof f=="number"){const t=this.viewItems[f],i=Math.floor(t.viewMinimumSize/2);r={index:f,limitDelta:t.visible?u+i:u-i,size:t.size}}}this.sashDragState={start:t,current:t,index:s,sizes:e,minDelta:h,maxDelta:c,alt:i,snapBefore:o,snapAfter:r,disposable:n}};o(i,e)}onSashChange({current:t}){const{index:i,start:e,sizes:s,alt:n,minDelta:o,maxDelta:r,snapBefore:h,snapAfter:c}=this.sashDragState;this.sashDragState.current=t;const a=t-e,l=this.resize(i,a,s,void 0,void 0,o,r,h,c);if(n){const t=i===this.sashItems.length-1,e=this.viewItems.map((t=>t.size)),s=t?i:i+1,n=this.viewItems[s],o=n.size-n.maximumSize,r=n.size-n.minimumSize,h=t?i-1:i+1;this.resize(h,-l,e,void 0,void 0,o,r)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(t){this._onDidSashChange.fire(t),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(t,i){const e=this.viewItems.indexOf(t);e<0||e>=this.viewItems.length||(i=rR(i=typeof i=="number"?i:t.size,t.minimumSize,t.maximumSize),this.inverseAltBehavior&&e>0?(this.resize(e-1,Math.floor((t.size-i)/2)),this.distributeEmptySpace(),this.layoutViews()):(t.size=i,this.relayout([e],void 0)))}resizeView(t,i){if(!(t<0||t>=this.viewItems.length)){if(this.state!==$P.Idle)throw new Error("Cant modify splitview");this.state=$P.Busy;try{const e=v(this.viewItems.length).filter((i=>i!==t)),s=[...e.filter((t=>this.viewItems[t].priority===1)),t],n=e.filter((t=>this.viewItems[t].priority===2)),o=this.viewItems[t];i=rR(i=Math.round(i),o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=i,this.relayout(s,n)}finally{this.state=$P.Idle}}}distributeViewSizes(){const t=[];let i=0;for(const e of this.viewItems)e.maximumSize-e.minimumSize>0&&(t.push(e),i+=e.size);const e=Math.floor(i/t.length);for(const i of t)i.size=rR(e,i.minimumSize,i.maximumSize);const s=v(this.viewItems.length),n=s.filter((t=>this.viewItems[t].priority===1)),o=s.filter((t=>this.viewItems[t].priority===2));this.relayout(n,o)}getViewSize(t){return t<0||t>=this.viewItems.length?-1:this.viewItems[t].size}doAddView(t,i,e=this.viewItems.length,s){if(this.state!==$P.Idle)throw new Error("Cant modify splitview");this.state=$P.Busy;try{const n=ha(".split-view-view");e===this.viewItems.length?this.viewContainer.appendChild(n):this.viewContainer.insertBefore(n,this.viewContainer.children.item(e));const o=t.onDidChange((t=>this.onViewChange(c,t))),r=Xi(o,qi((()=>this.viewContainer.removeChild(n))));let h;typeof i=="number"?h=i:(i.type==="auto"&&(i=this.areViewsDistributed()?{type:"distribute"}:{type:"split",index:i.index}),h=i.type==="split"?this.getViewSize(i.index)/2:i.type==="invisible"?{cachedVisibleSize:i.cachedVisibleSize}:t.minimumSize);const c=this.orientation===0?new GP(n,t,h,r):new KP(n,t,h,r);if(this.viewItems.splice(e,0,c),this.viewItems.length>1){const t={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},i=this.orientation===0?new _P(this.sashContainer,{getHorizontalSashTop:t=>this.getSashPosition(t),getHorizontalSashWidth:this.getSashOrthogonalSize},{...t,orientation:1}):new _P(this.sashContainer,{getVerticalSashLeft:t=>this.getSashPosition(t),getVerticalSashHeight:this.getSashOrthogonalSize},{...t,orientation:0}),s=this.orientation===0?t=>({sash:i,start:t.startY,current:t.currentY,alt:t.altKey}):t=>({sash:i,start:t.startX,current:t.currentX,alt:t.altKey}),n=he.map(i.onDidStart,s)(this.onSashStart,this),o=he.map(i.onDidChange,s)(this.onSashChange,this),r=he.map(i.onDidEnd,(()=>this.sashItems.findIndex((t=>t.sash===i)))),h=r(this.onSashEnd,this),c=i.onDidReset((()=>{const t=this.sashItems.findIndex((t=>t.sash===i)),e=v(t,-1),s=v(t+1,this.viewItems.length),n=this.findFirstSnapIndex(e),o=this.findFirstSnapIndex(s);(typeof n!="number"||this.viewItems[n].visible)&&(typeof o!="number"||this.viewItems[o].visible)&&this._onDidSashReset.fire(t)})),a=Xi(n,o,h,c,i),l={sash:i,disposable:a};this.sashItems.splice(e-1,0,l)}let a;n.appendChild(t.element),typeof i!="number"&&i.type==="split"&&(a=[i.index]),s||this.relayout([e],a),s||typeof i=="number"||i.type!=="distribute"||this.distributeViewSizes()}finally{this.state=$P.Idle}}relayout(t,i){const e=this.viewItems.reduce(((t,i)=>t+i.size),0);this.resize(this.viewItems.length-1,this.size-e,void 0,t,i),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(t,i,e=this.viewItems.map((t=>t.size)),s,n,o=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,h,c){if(t<0||t>=this.viewItems.length)return 0;const a=v(t,-1),l=v(t+1,this.viewItems.length);if(n)for(const t of n)y(a,t),y(l,t);if(s)for(const t of s)k(a,t),k(l,t);const u=a.map((t=>this.viewItems[t])),d=a.map((t=>e[t])),f=l.map((t=>this.viewItems[t])),g=l.map((t=>e[t])),A=a.reduce(((t,i)=>t+(this.viewItems[i].minimumSize-e[i])),0),p=a.reduce(((t,i)=>t+(this.viewItems[i].maximumSize-e[i])),0),w=l.length===0?Number.POSITIVE_INFINITY:l.reduce(((t,i)=>t+(e[i]-this.viewItems[i].minimumSize)),0),m=l.length===0?Number.NEGATIVE_INFINITY:l.reduce(((t,i)=>t+(e[i]-this.viewItems[i].maximumSize)),0),b=Math.max(A,m,o),x=Math.min(w,p,r);let C=!1;if(h){const t=this.viewItems[h.index],e=i>=h.limitDelta;C=e!==t.visible,t.setVisible(e,h.size)}if(!C&&c){const t=this.viewItems[c.index],e=i<c.limitDelta;C=e!==t.visible,t.setVisible(e,c.size)}if(C)return this.resize(t,i,e,s,n,o,r);for(let t=0,e=i=rR(i,b,x);t<u.length;t++){const i=u[t],s=rR(d[t]+e,i.minimumSize,i.maximumSize);e-=s-d[t],i.size=s}for(let t=0,e=i;t<f.length;t++){const i=f[t],s=rR(g[t]-e,i.minimumSize,i.maximumSize);e+=s-g[t],i.size=s}return i}distributeEmptySpace(t){const i=this.viewItems.reduce(((t,i)=>t+i.size),0);let e=this.size-i;const s=v(this.viewItems.length-1,-1),n=s.filter((t=>this.viewItems[t].priority===1)),o=s.filter((t=>this.viewItems[t].priority===2));for(const t of o)y(s,t);for(const t of n)k(s,t);typeof t=="number"&&k(s,t);for(let t=0;e!==0&&t<s.length;t++){const i=this.viewItems[s[t]],n=rR(i.size+e,i.minimumSize,i.maximumSize);e-=n-i.size,i.size=n}}layoutViews(){this._contentSize=this.viewItems.reduce(((t,i)=>t+i.size),0);let t=0;for(const i of this.viewItems)i.layout(t,this.layoutContext),t+=i.size;this.sashItems.forEach((t=>t.sash.layout())),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let t=!1;const i=this.viewItems.map((i=>t=i.size-i.minimumSize>0||t));t=!1;const e=this.viewItems.map((i=>t=i.maximumSize-i.size>0||t)),s=[...this.viewItems].reverse();t=!1;const n=s.map((i=>t=i.size-i.minimumSize>0||t)).reverse();t=!1;const o=s.map((i=>t=i.maximumSize-i.size>0||t)).reverse();let r=0;for(let t=0;t<this.sashItems.length;t++){const{sash:s}=this.sashItems[t];r+=this.viewItems[t].size;const h=!(i[t]&&o[t+1]),c=!(e[t]&&n[t+1]);if(h&&c){const e=v(t,-1),o=v(t+1,this.viewItems.length),h=this.findFirstSnapIndex(e),c=this.findFirstSnapIndex(o),a=typeof h=="number"&&!this.viewItems[h].visible,l=typeof c=="number"&&!this.viewItems[c].visible;a&&n[t]&&(r>0||this.startSnappingEnabled)?s.state=1:l&&i[t]&&(r<this._contentSize||this.endSnappingEnabled)?s.state=2:s.state=0}else s.state=h&&!c?1:!h&&c?2:3}}getSashPosition(t){let i=0;for(let e=0;e<this.sashItems.length;e++)if(i+=this.viewItems[e].size,this.sashItems[e].sash===t)return i;return 0}findFirstSnapIndex(t){for(const i of t){const t=this.viewItems[i];if(t.visible&&t.snap)return i}for(const i of t){const t=this.viewItems[i];if(t.visible&&t.maximumSize-t.minimumSize>0)return;if(!t.visible&&t.snap)return i}}areViewsDistributed(){let t,i;for(const e of this.viewItems)if(t=t===void 0?e.size:Math.min(t,e.size),i=i===void 0?e.size:Math.max(i,e.size),i-t>2)return!1;return!0}dispose(){var t;(t=this.sashDragState)===null||t===void 0||t.disposable.dispose(),$i(this.viewItems),this.viewItems=[],this.sashItems.forEach((t=>t.disposable.dispose())),this.sashItems=[],super.dispose()}}class ZP{constructor(t,i,e){this.columns=t,this.getColumnSize=e,this.templateId=ZP.TemplateId,this.renderedTemplates=new Set;const s=new Map(i.map((t=>[t.templateId,t])));this.renderers=[];for(const i of t){const t=s.get(i.templateId);if(!t)throw new Error(`Table cell renderer for template id ${i.templateId} not found.`);this.renderers.push(t)}}renderTemplate(t){const i=ia(t,ha(".monaco-table-tr")),e=[],s=[];for(let t=0;t<this.columns.length;t++){const n=this.renderers[t],o=ia(i,ha(".monaco-table-td",{"data-col-index":t}));o.style.width=`${this.getColumnSize(t)}px`,e.push(o),s.push(n.renderTemplate(o))}const n={container:t,cellContainers:e,cellTemplateData:s};return this.renderedTemplates.add(n),n}renderElement(t,i,e,s){for(let n=0;n<this.columns.length;n++){const o=this.columns[n].project(t);this.renderers[n].renderElement(o,i,e.cellTemplateData[n],s)}}disposeElement(t,i,e,s){for(let n=0;n<this.columns.length;n++){const o=this.renderers[n];if(o.disposeElement){const r=this.columns[n].project(t);o.disposeElement(r,i,e.cellTemplateData[n],s)}}}disposeTemplate(t){for(let i=0;i<this.columns.length;i++)this.renderers[i].disposeTemplate(t.cellTemplateData[i]);nc(t.container),this.renderedTemplates.delete(t)}layoutColumn(t,i){for(const{cellContainers:e}of this.renderedTemplates)e[t].style.width=`${i}px`}}ZP.TemplateId="row";class tj extends te{get minimumSize(){var t;return(t=this.column.minimumWidth)!==null&&t!==void 0?t:120}get maximumSize(){var t;return(t=this.column.maximumWidth)!==null&&t!==void 0?t:Number.POSITIVE_INFINITY}get onDidChange(){var t;return(t=this.column.onDidChangeWidthConstraints)!==null&&t!==void 0?t:he.None}constructor(t,i){super(),this.column=t,this.index=i,this._onDidLayout=new de,this.onDidLayout=this._onDidLayout.event,this.element=ha(".monaco-table-th",{"data-col-index":i},t.label),t.tooltip&&this._register(fz(az("mouse"),this.element,t.tooltip))}layout(t){this._onDidLayout.fire([this.index,t])}}class ij{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(t){this.list.scrollTop=t}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(t,i,e,s,n,o){this.virtualDelegate=e,this.domId="table_id_"+ ++ij.InstanceCount,this.disposables=new Zi,this.cachedWidth=0,this.cachedHeight=0,this.domNode=ia(i,ha(`.monaco-table.${this.domId}`));const r=s.map(((t,i)=>this.disposables.add(new tj(t,i)))),h={size:r.reduce(((t,i)=>t+i.column.weight),0),views:r.map((t=>({size:t.column.weight,view:t})))};this.splitview=this.disposables.add(new qP(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:h})),this.splitview.el.style.height=`${e.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${e.headerRowHeight}px`;const c=new ZP(s,n,(t=>this.splitview.getViewSize(t)));var a;this.list=this.disposables.add(new YU(t,this.domNode,(a=e,{getHeight:t=>a.getHeight(t),getTemplateId:()=>ZP.TemplateId}),[c],o)),he.any(...r.map((t=>t.onDidLayout)))((([t,i])=>c.layoutColumn(t,i)),null,this.disposables),this.splitview.onDidSashReset((t=>{const i=s.reduce(((t,i)=>t+i.weight),0),e=s[t].weight/i*this.cachedWidth;this.splitview.resizeView(t,e)}),null,this.disposables),this.styleElement=Uc(this.domNode),this.style(OU)}updateOptions(t){this.list.updateOptions(t)}splice(t,i,e=[]){this.list.splice(t,i,e)}getHTMLElement(){return this.domNode}style(t){const i=[];i.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight+1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`),this.styleElement.textContent=i.join(`\n`),this.list.style(t)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}ij.InstanceCount=0;const ej=st(0,"Match Case"),sj=st(0,"Match Whole Word"),nj=st(0,"Use Regular Expression");class oj extends BP{constructor(t){var i;super({icon:Fs.caseSensitive,title:ej+t.appendTitle,isChecked:t.isChecked,hoverDelegate:(i=t.hoverDelegate)!==null&&i!==void 0?i:az("element"),inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionForeground:t.inputActiveOptionForeground,inputActiveOptionBackground:t.inputActiveOptionBackground})}}class rj extends BP{constructor(t){var i;super({icon:Fs.wholeWord,title:sj+t.appendTitle,isChecked:t.isChecked,hoverDelegate:(i=t.hoverDelegate)!==null&&i!==void 0?i:az("element"),inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionForeground:t.inputActiveOptionForeground,inputActiveOptionBackground:t.inputActiveOptionBackground})}}class hj extends BP{constructor(t){var i;super({icon:Fs.regex,title:nj+t.appendTitle,isChecked:t.isChecked,hoverDelegate:(i=t.hoverDelegate)!==null&&i!==void 0?i:az("element"),inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionForeground:t.inputActiveOptionForeground,inputActiveOptionBackground:t.inputActiveOptionBackground})}}class cj{constructor(t,i=0,e=t.length,s=i-1){this.items=t,this.start=i,this.end=e,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class aj{constructor(t=[],i=10){this._initialize(t),this._limit=i,this._onChange()}getHistory(){return this._elements}add(t){this._history.delete(t),this._history.add(t),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(t){return this._history.has(t)}_onChange(){this._reduceToLimit();const t=this._elements;this._navigator=new cj(t,0,t.length,t.length)}_reduceToLimit(){const t=this._elements;t.length>this._limit&&this._initialize(t.slice(t.length-this._limit))}_currentPosition(){const t=this._navigator.current();return t?this._elements.indexOf(t):-1}_initialize(t){this._history=new Set;for(const i of t)this._history.add(i)}get _elements(){const t=[];return this._history.forEach((i=>t.push(i))),t}}const lj=ha;let uj=class extends Yy{constructor(t,i,e){var s;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new de),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=i,this.options=e,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(s=this.options.tooltip)!==null&&s!==void 0?s:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=ia(t,lj(".monaco-inputbox.idle"));const n=this.options.flexibleHeight?"textarea":"input",o=ia(this.element,lj(".ibwrapper"));if(this.input=ia(o,lj(n+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,(()=>this.element.classList.add("synthetic-focus"))),this.onblur(this.input,(()=>this.element.classList.remove("synthetic-focus"))),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=ia(o,lj("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new rk(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),ia(t,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll((t=>this.input.scrollTop=t.scrollTop)));const i=this._register(new gk(t.ownerDocument,"selectionchange")),e=he.filter(i.event,(()=>{const i=t.ownerDocument.getSelection();return(i==null?void 0:i.anchorNode)===o}));this._register(e(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,(()=>this.onValueChange())),this.onblur(this.input,(()=>this.onBlur())),this.onfocus(this.input,(()=>this.onFocus())),this._register(this.ignoreGesture(this.input)),setTimeout((()=>this.updateMirror()),0),this.options.actions&&(this.actionbar=this._register(new RH(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(t){this.placeholder=t,this.input.setAttribute("placeholder",t)}setTooltip(t){this.tooltip=t,this.hover?this.hover.update(t):this.hover=this._register(fz(az("mouse"),this.input,t))}get inputElement(){return this.input}get value(){return this.input.value}set value(t){this.input.value!==t&&(this.input.value=t,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:Bc(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return Rc(this.input)}select(t=null){this.input.select(),t&&(this.input.setSelectionRange(t.start,t.end),t.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){var t;const i=this.input.selectionStart;return i===null?null:{start:i,end:(t=this.input.selectionEnd)!==null&&t!==void 0?t:i}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(t){this.input.style.width=`calc(100% - ${t}px)`,this.mirror&&(this.mirror.style.paddingRight=t+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const t=this.cachedContentHeight,i=this.cachedHeight,e=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:t,height:i}),this.scrollableElement.setScrollPosition({scrollTop:e})}showMessage(t,i){if(this.state==="open"&&Z(this.message,t))return;this.message=t,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(t.type));const e=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${ga(e.border,"transparent")}`,this.message.content&&(this.hasFocus()||i)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let t=null;return this.validation&&(t=this.validation(this.value),t?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(t)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),t==null?void 0:t.type}stylesForType(t){const i=this.options.inputBoxStyles;switch(t){case 1:return{border:i.inputValidationInfoBorder,background:i.inputValidationInfoBackground,foreground:i.inputValidationInfoForeground};case 2:return{border:i.inputValidationWarningBorder,background:i.inputValidationWarningBackground,foreground:i.inputValidationWarningForeground};default:return{border:i.inputValidationErrorBorder,background:i.inputValidationErrorBackground,foreground:i.inputValidationErrorForeground}}}classForType(t){switch(t){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let t;const i=()=>t.style.width=xc(this.element)+"px";let e;this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:e=>{var s,n;if(!this.message)return null;t=ia(e,lj(".monaco-inputbox-container")),i();const o={inline:!0,className:"monaco-inputbox-message"},r=this.message.formatContent?AT(this.message.content,o):function(t,i={}){const e=pT(i);return e.textContent=t,e}(this.message.content,o);r.classList.add(this.classForType(this.message.type));const h=this.stylesForType(this.message.type);return r.style.backgroundColor=(s=h.background)!==null&&s!==void 0?s:"",r.style.color=(n=h.foreground)!==null&&n!==void 0?n:"",r.style.border=h.border?`1px solid ${h.border}`:"",ia(t,r),null},onHide:()=>{this.state="closed"},layout:i}),e=this.message.type===3?st(0,"Error: {0}",this.message.content):this.message.type===2?st(0,"Warning: {0}",this.message.content):st(0,"Info: {0}",this.message.content),cw(e),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const t=this.value,i=t.charCodeAt(t.length-1)===10?" ":"";(t+i).replace(/\u000c/g,"")?this.mirror.textContent=t+i:this.mirror.innerText=" ",this.layout()}applyStyles(){var t,i,e;const s=this.options.inputBoxStyles,n=(t=s.inputBackground)!==null&&t!==void 0?t:"",o=(i=s.inputForeground)!==null&&i!==void 0?i:"",r=(e=s.inputBorder)!==null&&e!==void 0?e:"";this.element.style.backgroundColor=n,this.element.style.color=o,this.input.style.backgroundColor="inherit",this.input.style.color=o,this.element.style.border=`1px solid ${ga(r,"transparent")}`}layout(){if(!this.mirror)return;const t=this.cachedContentHeight;this.cachedContentHeight=Bc(this.mirror),t!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(t){const i=this.inputElement,e=i.selectionStart,s=i.selectionEnd,n=i.value;e!==null&&s!==null&&(this.value=n.substr(0,e)+t+n.substr(s),i.setSelectionRange(e+1,e+1),this.layout())}dispose(){var t;this._hideMessage(),this.message=null,(t=this.actionbar)===null||t===void 0||t.dispose(),super.dispose()}};class dj extends uj{constructor(t,i,e){const s=st(0," or {0} for history","⇅"),n=st(0," ({0} for history)","⇅");super(t,i,e),this._onDidFocus=this._register(new de),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new de),this.onDidBlur=this._onDidBlur.event,this.history=new aj(e.history,100);const o=()=>{if(e.showHistoryHint&&e.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(n)&&this.history.getHistory().length){const t=this.placeholder.endsWith(")")?s:n,i=this.placeholder+t;e.showPlaceholderOnFocus&&!Rc(this.input)?this.placeholder=i:this.setPlaceHolder(i)}};this.observer=new MutationObserver(((t,i)=>{t.forEach((t=>{t.target.textContent||o()}))})),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,(()=>o())),this.onblur(this.input,(()=>{const t=t=>{if(this.placeholder.endsWith(t)){const i=this.placeholder.slice(0,this.placeholder.length-t.length);return e.showPlaceholderOnFocus?this.placeholder=i:this.setPlaceHolder(i),!0}return!1};t(n)||t(s)}))}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(t){this.value&&(t||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let t=this.getNextValue();t&&(t=t===this.value?this.getNextValue():t),this.value=t??"",aw(this.value?this.value:st(0,"Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let t=this.getPreviousValue();t&&(t=t===this.value?this.getPreviousValue():t),t&&(this.value=t,aw(this.value))}setPlaceHolder(t){super.setPlaceHolder(t),this.setTooltip(t)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let t=this.history.current();return t||(t=this.history.last(),this.history.next()),t}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const fj=st(0,"input");class gj extends Yy{constructor(t,i,e){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new ie),this.additionalToggles=[],this._onDidOptionChange=this._register(new de),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new de),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new de),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new de),this._onKeyUp=this._register(new de),this._onCaseSensitiveKeyDown=this._register(new de),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new de),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=e.placeholder||"",this.validation=e.validation,this.label=e.label||fj,this.showCommonFindToggles=!!e.showCommonFindToggles;const s=e.appendCaseSensitiveLabel||"",n=e.appendWholeWordsLabel||"",o=e.appendRegexLabel||"",r=e.history||[],h=!!e.flexibleHeight,c=!!e.flexibleWidth,a=e.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new dj(this.domNode,i,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:e.showHistoryHint,flexibleHeight:h,flexibleWidth:c,flexibleMaxHeight:a,inputBoxStyles:e.inputBoxStyles}));const l=this._register(lz());if(this.showCommonFindToggles){this.regex=this._register(new hj({appendTitle:o,isChecked:!1,hoverDelegate:l,...e.toggleStyles})),this._register(this.regex.onChange((t=>{this._onDidOptionChange.fire(t),!t&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.regex.onKeyDown((t=>{this._onRegexKeyDown.fire(t)}))),this.wholeWords=this._register(new rj({appendTitle:n,isChecked:!1,hoverDelegate:l,...e.toggleStyles})),this._register(this.wholeWords.onChange((t=>{this._onDidOptionChange.fire(t),!t&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this.caseSensitive=this._register(new oj({appendTitle:s,isChecked:!1,hoverDelegate:l,...e.toggleStyles})),this._register(this.caseSensitive.onChange((t=>{this._onDidOptionChange.fire(t),!t&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.caseSensitive.onKeyDown((t=>{this._onCaseSensitiveKeyDown.fire(t)})));const t=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,(i=>{if(i.equals(15)||i.equals(17)||i.equals(9)){const e=t.indexOf(this.domNode.ownerDocument.activeElement);if(e>=0){let s=-1;i.equals(17)?s=(e+1)%t.length:i.equals(15)&&(s=e===0?t.length-1:e-1),i.equals(9)?(t[e].blur(),this.inputBox.focus()):s>=0&&t[s].focus(),qc(i,!0)}}}))}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(e==null?void 0:e.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),t==null||t.appendChild(this.domNode),this._register(rc(this.inputBox.inputElement,"compositionstart",(t=>{this.imeSessionInProgress=!0}))),this._register(rc(this.inputBox.inputElement,"compositionend",(t=>{this.imeSessionInProgress=!1,this._onInput.fire()}))),this.onkeydown(this.inputBox.inputElement,(t=>this._onKeyDown.fire(t))),this.onkeyup(this.inputBox.inputElement,(t=>this._onKeyUp.fire(t))),this.oninput(this.inputBox.inputElement,(t=>this._onInput.fire())),this.onmousedown(this.inputBox.inputElement,(t=>this._onMouseDown.fire(t)))}get onDidChange(){return this.inputBox.onDidChange}layout(t){this.inputBox.layout(),this.updateInputBoxPadding(t.collapsedFindWidget)}enable(){var t,i,e;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(t=this.regex)===null||t===void 0||t.enable(),(i=this.wholeWords)===null||i===void 0||i.enable(),(e=this.caseSensitive)===null||e===void 0||e.enable();for(const t of this.additionalToggles)t.enable()}disable(){var t,i,e;this.domNode.classList.add("disabled"),this.inputBox.disable(),(t=this.regex)===null||t===void 0||t.disable(),(i=this.wholeWords)===null||i===void 0||i.disable(),(e=this.caseSensitive)===null||e===void 0||e.disable();for(const t of this.additionalToggles)t.disable()}setFocusInputOnOptionClick(t){this.fixFocusOnOptionClickEnabled=t}setEnabled(t){t?this.enable():this.disable()}setAdditionalToggles(t){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new Zi;for(const i of t??[])this.additionalTogglesDisposables.value.add(i),this.controls.appendChild(i.domNode),this.additionalTogglesDisposables.value.add(i.onChange((t=>{this._onDidOptionChange.fire(t),!t&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()}))),this.additionalToggles.push(i);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(t=!1){var i,e,s,n,o,r;this.inputBox.paddingRight=t?0:((e=(i=this.caseSensitive)===null||i===void 0?void 0:i.width())!==null&&e!==void 0?e:0)+((n=(s=this.wholeWords)===null||s===void 0?void 0:s.width())!==null&&n!==void 0?n:0)+((r=(o=this.regex)===null||o===void 0?void 0:o.width())!==null&&r!==void 0?r:0)+this.additionalToggles.reduce(((t,i)=>t+i.width()),0)}getValue(){return this.inputBox.value}setValue(t){this.inputBox.value!==t&&(this.inputBox.value=t)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var t,i;return(i=(t=this.caseSensitive)===null||t===void 0?void 0:t.checked)!==null&&i!==void 0&&i}setCaseSensitive(t){this.caseSensitive&&(this.caseSensitive.checked=t)}getWholeWords(){var t,i;return(i=(t=this.wholeWords)===null||t===void 0?void 0:t.checked)!==null&&i!==void 0&&i}setWholeWords(t){this.wholeWords&&(this.wholeWords.checked=t)}getRegex(){var t,i;return(i=(t=this.regex)===null||t===void 0?void 0:t.checked)!==null&&i!==void 0&&i}setRegex(t){this.regex&&(this.regex.checked=t,this.validate())}focusOnCaseSensitive(){var t;(t=this.caseSensitive)===null||t===void 0||t.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(t){this.inputBox.showMessage(t)}clearMessage(){this.inputBox.hideMessage()}}var Aj,pj,wj,mj,vj;(function(t){t[t.Expanded=0]="Expanded",t[t.Collapsed=1]="Collapsed",t[t.PreserveOrExpanded=2]="PreserveOrExpanded",t[t.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(Aj||(Aj={})),function(t){t[t.Unknown=0]="Unknown",t[t.Twistie=1]="Twistie",t[t.Element=2]="Element",t[t.Filter=3]="Filter"}(pj||(pj={}));class bj extends Error{constructor(t,i){super(`TreeError [${t}] ${i}`)}}class yj{constructor(t){this.fn=t,this._map=new WeakMap}map(t){let i=this._map.get(t);return i||(i=this.fn(t),this._map.set(t,i)),i}}function kj(t){return typeof t=="object"&&"visibility"in t&&"data"in t}function xj(t){switch(t){case!0:return 1;case!1:return 0;default:return t}}function Cj(t){return typeof t.collapsible=="boolean"}class Ej{constructor(t,i,e,s={}){var n;this.user=t,this.list=i,this.rootRef=[],this.eventBufferer=new me,this._onDidChangeCollapseState=new de,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new de,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new de,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new mr(fr),this.collapseByDefault=s.collapseByDefault!==void 0&&s.collapseByDefault,this.allowNonCollapsibleParents=(n=s.allowNonCollapsibleParents)!==null&&n!==void 0&&n,this.filter=s.filter,this.autoExpandSingleChildren=s.autoExpandSingleChildren!==void 0&&s.autoExpandSingleChildren,this.root={parent:void 0,element:e,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(t,i,e=Wt.empty(),s={}){if(t.length===0)throw new bj(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,t,i,e,s):this.spliceSimple(t,i,e,s)}spliceSmart(t,i,e,s,n,o){var r;s===void 0&&(s=Wt.empty()),o===void 0&&(o=(r=n.diffDepth)!==null&&r!==void 0?r:0);const{parentNode:h}=this.getParentNodeWithListIndex(i);if(!h.lastDiffIds)return this.spliceSimple(i,e,s,n);const c=[...s],a=i[i.length-1],l=new Sf({getElements:()=>h.lastDiffIds},{getElements:()=>[...h.children.slice(0,a),...c,...h.children.slice(a+e)].map((i=>t.getId(i.element).toString()))}).ComputeDiff(!1);if(l.quitEarly)return h.lastDiffIds=void 0,this.spliceSimple(i,e,c,n);const u=i.slice(0,-1),d=(i,e,s)=>{if(o>0)for(let r=0;r<s;r++)i--,e--,this.spliceSmart(t,[...u,i,0],Number.MAX_SAFE_INTEGER,c[e].children,n,o-1)};let f=Math.min(h.children.length,a+e),g=c.length;for(const t of l.changes.sort(((t,i)=>i.originalStart-t.originalStart)))d(f,g,f-(t.originalStart+t.originalLength)),f=t.originalStart,g=t.modifiedStart-a,this.spliceSimple([...u,f],t.originalLength,Wt.slice(c,g,g+t.modifiedLength),n);d(f,g,f)}spliceSimple(t,i,e=Wt.empty(),{onDidCreateNode:s,onDidDeleteNode:n,diffIdentityProvider:o}){const{parentNode:r,listIndex:h,revealed:c,visible:a}=this.getParentNodeWithListIndex(t),l=[],u=Wt.map(e,(t=>this.createTreeNode(t,r,r.visible?1:0,c,l,s))),d=t[t.length-1];let f=0;for(let t=d;t>=0&&t<r.children.length;t--){const i=r.children[t];if(i.visible){f=i.visibleChildIndex;break}}const g=[];let A=0,p=0;for(const t of u)g.push(t),p+=t.renderNodeCount,t.visible&&(t.visibleChildIndex=f+A++);const w=E(r.children,d,i,g);o?r.lastDiffIds?E(r.lastDiffIds,d,i,g.map((t=>o.getId(t.element).toString()))):r.lastDiffIds=r.children.map((t=>o.getId(t.element).toString())):r.lastDiffIds=void 0;let m=0;for(const t of w)t.visible&&m++;if(m!==0)for(let t=d+g.length;t<r.children.length;t++){const i=r.children[t];i.visible&&(i.visibleChildIndex-=m)}if(r.visibleChildrenCount+=A-m,c&&a){const t=w.reduce(((t,i)=>t+(i.visible?i.renderNodeCount:0)),0);this._updateAncestorsRenderNodeCount(r,p-t),this.list.splice(h,t,l)}if(w.length>0&&n){const t=i=>{n(i),i.children.forEach(t)};w.forEach(t)}this._onDidSplice.fire({insertedNodes:g,deletedNodes:w});let v=r;for(;v;){if(v.visibility===2){this.refilterDelayer.trigger((()=>this.refilter()));break}v=v.parent}}rerender(t){if(t.length===0)throw new bj(this.user,"Invalid tree location");const{node:i,listIndex:e,revealed:s}=this.getTreeNodeWithListIndex(t);i.visible&&s&&this.list.splice(e,1,[i])}has(t){return this.hasTreeNode(t)}getListIndex(t){const{listIndex:i,visible:e,revealed:s}=this.getTreeNodeWithListIndex(t);return e&&s?i:-1}getListRenderCount(t){return this.getTreeNode(t).renderNodeCount}isCollapsible(t){return this.getTreeNode(t).collapsible}setCollapsible(t,i){const e=this.getTreeNode(t);i===void 0&&(i=!e.collapsible);const s={collapsible:i};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(t,s)))}isCollapsed(t){return this.getTreeNode(t).collapsed}setCollapsed(t,i,e){const s=this.getTreeNode(t);i===void 0&&(i=!s.collapsed);const n={collapsed:i,recursive:e||!1};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(t,n)))}_setCollapseState(t,i){const{node:e,listIndex:s,revealed:n}=this.getTreeNodeWithListIndex(t),o=this._setListNodeCollapseState(e,s,n,i);if(e!==this.root&&this.autoExpandSingleChildren&&o&&!Cj(i)&&e.collapsible&&!e.collapsed&&!i.recursive){let s=-1;for(let t=0;t<e.children.length;t++)if(e.children[t].visible){if(s>-1){s=-1;break}s=t}s>-1&&this._setCollapseState([...t,s],i)}return o}_setListNodeCollapseState(t,i,e,s){const n=this._setNodeCollapseState(t,s,!1);if(!e||!t.visible||!n)return n;const o=t.renderNodeCount,r=this.updateNodeAfterCollapseChange(t),h=o-(i===-1?0:1);return this.list.splice(i+1,h,r.slice(1)),n}_setNodeCollapseState(t,i,e){let s;if(t===this.root?s=!1:(Cj(i)?(s=t.collapsible!==i.collapsible,t.collapsible=i.collapsible):t.collapsible?(s=t.collapsed!==i.collapsed,t.collapsed=i.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:t,deep:e})),!Cj(i)&&i.recursive)for(const e of t.children)s=this._setNodeCollapseState(e,i,!0)||s;return s}expandTo(t){this.eventBufferer.bufferEvents((()=>{let i=this.getTreeNode(t);for(;i.parent;)i=i.parent,t=t.slice(0,t.length-1),i.collapsed&&this._setCollapseState(t,{collapsed:!1,recursive:!1})}))}refilter(){const t=this.root.renderNodeCount,i=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,t,i),this.refilterDelayer.cancel()}createTreeNode(t,i,e,s,n,o){const r={parent:i,element:t.element,children:[],depth:i.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof t.collapsible=="boolean"?t.collapsible:t.collapsed!==void 0,collapsed:t.collapsed===void 0?this.collapseByDefault:t.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},h=this._filterNode(r,e);r.visibility=h,s&&n.push(r);const c=t.children||Wt.empty(),a=s&&h!==0&&!r.collapsed;let l=0,u=1;for(const t of c){const i=this.createTreeNode(t,r,h,a,n,o);r.children.push(i),u+=i.renderNodeCount,i.visible&&(i.visibleChildIndex=l++)}return this.allowNonCollapsibleParents||(r.collapsible=r.collapsible||r.children.length>0),r.visibleChildrenCount=l,r.visible=h===2?l>0:h===1,r.visible?r.collapsed||(r.renderNodeCount=u):(r.renderNodeCount=0,s&&n.pop()),o==null||o(r),r}updateNodeAfterCollapseChange(t){const i=t.renderNodeCount,e=[];return this._updateNodeAfterCollapseChange(t,e),this._updateAncestorsRenderNodeCount(t.parent,e.length-i),e}_updateNodeAfterCollapseChange(t,i){if(t.visible===!1)return 0;if(i.push(t),t.renderNodeCount=1,!t.collapsed)for(const e of t.children)t.renderNodeCount+=this._updateNodeAfterCollapseChange(e,i);return this._onDidChangeRenderNodeCount.fire(t),t.renderNodeCount}updateNodeAfterFilterChange(t){const i=t.renderNodeCount,e=[];return this._updateNodeAfterFilterChange(t,t.visible?1:0,e),this._updateAncestorsRenderNodeCount(t.parent,e.length-i),e}_updateNodeAfterFilterChange(t,i,e,s=!0){let n;if(t!==this.root){if(n=this._filterNode(t,i),n===0)return t.visible=!1,t.renderNodeCount=0,!1;s&&e.push(t)}const o=e.length;t.renderNodeCount=t===this.root?0:1;let r=!1;if(t.collapsed&&n===0)t.visibleChildrenCount=0;else{let i=0;for(const o of t.children)r=this._updateNodeAfterFilterChange(o,n,e,s&&!t.collapsed)||r,o.visible&&(o.visibleChildIndex=i++);t.visibleChildrenCount=i}return t!==this.root&&(t.visible=n===2?r:n===1,t.visibility=n),t.visible?t.collapsed||(t.renderNodeCount+=e.length-o):(t.renderNodeCount=0,s&&e.pop()),this._onDidChangeRenderNodeCount.fire(t),t.visible}_updateAncestorsRenderNodeCount(t,i){if(i!==0)for(;t;)t.renderNodeCount+=i,this._onDidChangeRenderNodeCount.fire(t),t=t.parent}_filterNode(t,i){const e=this.filter?this.filter.filter(t.element,i):1;return typeof e=="boolean"?(t.filterData=void 0,e?1:0):kj(e)?(t.filterData=e.data,xj(e.visibility)):(t.filterData=void 0,xj(e))}hasTreeNode(t,i=this.root){if(!t||t.length===0)return!0;const[e,...s]=t;return!(e<0||e>i.children.length)&&this.hasTreeNode(s,i.children[e])}getTreeNode(t,i=this.root){if(!t||t.length===0)return i;const[e,...s]=t;if(e<0||e>i.children.length)throw new bj(this.user,"Invalid tree location");return this.getTreeNode(s,i.children[e])}getTreeNodeWithListIndex(t){if(t.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:i,listIndex:e,revealed:s,visible:n}=this.getParentNodeWithListIndex(t),o=t[t.length-1];if(o<0||o>i.children.length)throw new bj(this.user,"Invalid tree location");const r=i.children[o];return{node:r,listIndex:e,revealed:s,visible:n&&r.visible}}getParentNodeWithListIndex(t,i=this.root,e=0,s=!0,n=!0){const[o,...r]=t;if(o<0||o>i.children.length)throw new bj(this.user,"Invalid tree location");for(let t=0;t<o;t++)e+=i.children[t].renderNodeCount;return s=s&&!i.collapsed,n=n&&i.visible,r.length===0?{parentNode:i,listIndex:e,revealed:s,visible:n}:this.getParentNodeWithListIndex(r,i.children[o],e+1,s,n)}getNode(t=[]){return this.getTreeNode(t)}getNodeLocation(t){const i=[];let e=t;for(;e.parent;)i.push(e.parent.children.indexOf(e)),e=e.parent;return i.reverse()}getParentNodeLocation(t){return t.length===0?void 0:t.length===1?[]:function(t){if(t.length===0)throw new Error("Invalid tail call");return[t.slice(0,t.length-1),t[t.length-1]]}(t)[0]}getFirstElementChild(t){const i=this.getTreeNode(t);if(i.children.length!==0)return i.children[0].element}}class Bj extends xz{constructor(t){super(t.elements.map((t=>t.element))),this.data=t}}function Dj(t){return t instanceof xz?new Bj(t):t}class Mj{constructor(t,i){this.modelProvider=t,this.dnd=i,this.autoExpandDisposable=te.None,this.disposables=new Zi}getDragURI(t){return this.dnd.getDragURI(t.element)}getDragLabel(t,i){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(t.map((t=>t.element)),i)}onDragStart(t,i){var e,s;(s=(e=this.dnd).onDragStart)===null||s===void 0||s.call(e,Dj(t),i)}onDragOver(t,i,e,s,n,o=!0){const r=this.dnd.onDragOver(Dj(t),i&&i.element,e,s,n),h=this.autoExpandNode!==i;if(h&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=i),i===void 0)return r;if(h&&typeof r!="boolean"&&r.autoExpand&&(this.autoExpandDisposable=yr((()=>{const t=this.modelProvider(),e=t.getNodeLocation(i);t.isCollapsed(e)&&t.setCollapsed(e,!1),this.autoExpandNode=void 0}),500,this.disposables)),typeof r=="boolean"||!r.accept||r.bubble===void 0||r.feedback)return o?r:{accept:typeof r=="boolean"?r:r.accept,effect:typeof r=="boolean"?void 0:r.effect,feedback:[e]};if(r.bubble===1){const e=this.modelProvider(),o=e.getNodeLocation(i),r=e.getParentNodeLocation(o),h=e.getNode(r),c=r&&e.getListIndex(r);return this.onDragOver(t,h,c,s,n,!1)}const c=this.modelProvider(),a=c.getNodeLocation(i),l=c.getListIndex(a),u=c.getListRenderCount(a);return{...r,feedback:v(l,l+u)}}drop(t,i,e,s,n){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(Dj(t),i&&i.element,e,s,n)}onDragEnd(t){var i,e;(e=(i=this.dnd).onDragEnd)===null||e===void 0||e.call(i,t)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}class Sj{constructor(t){this.delegate=t}getHeight(t){return this.delegate.getHeight(t.element)}getTemplateId(t){return this.delegate.getTemplateId(t.element)}hasDynamicHeight(t){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(t.element)}setDynamicHeight(t,i){var e,s;(s=(e=this.delegate).setDynamicHeight)===null||s===void 0||s.call(e,t.element,i)}}(function(t){t.None="none",t.OnHover="onHover",t.Always="always"})(wj||(wj={}));class Fj{get elements(){return this._elements}constructor(t,i=[]){this._elements=i,this.disposables=new Zi,this.onDidChange=he.forEach(t,(t=>this._elements=t),this.disposables)}dispose(){this.disposables.dispose()}}class Ij{constructor(t,i,e,s,n,o={}){var r;this.renderer=t,this.modelProvider=i,this.activeNodes=s,this.renderedIndentGuides=n,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=Ij.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=te.None,this.disposables=new Zi,this.templateId=t.templateId,this.updateOptions(o),he.map(e,(t=>t.node))(this.onDidChangeNodeTwistieState,this,this.disposables),(r=t.onDidChangeTwistieState)===null||r===void 0||r.call(t,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(t={}){if(t.indent!==void 0){const i=rR(t.indent,0,40);if(i!==this.indent){this.indent=i;for(const[t,i]of this.renderedNodes)this.renderTreeElement(t,i)}}if(t.renderIndentGuides!==void 0){const i=t.renderIndentGuides!==wj.None;if(i!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=i;for(const[t,i]of this.renderedNodes)this._renderIndentGuides(t,i);if(this.indentGuidesDisposable.dispose(),i){const t=new Zi;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,t),this.indentGuidesDisposable=t,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}t.hideTwistiesOfChildlessElements!==void 0&&(this.hideTwistiesOfChildlessElements=t.hideTwistiesOfChildlessElements)}renderTemplate(t){const i=ia(t,ha(".monaco-tl-row")),e=ia(i,ha(".monaco-tl-indent")),s=ia(i,ha(".monaco-tl-twistie")),n=ia(i,ha(".monaco-tl-contents")),o=this.renderer.renderTemplate(n);return{container:t,indent:e,twistie:s,indentGuidesDisposable:te.None,templateData:o}}renderElement(t,i,e,s){this.renderedNodes.set(t,e),this.renderedElements.set(t.element,t),this.renderTreeElement(t,e),this.renderer.renderElement(t,i,e.templateData,s)}disposeElement(t,i,e,s){var n,o;e.indentGuidesDisposable.dispose(),(o=(n=this.renderer).disposeElement)===null||o===void 0||o.call(n,t,i,e.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(t),this.renderedElements.delete(t.element))}disposeTemplate(t){this.renderer.disposeTemplate(t.templateData)}onDidChangeTwistieState(t){const i=this.renderedElements.get(t);i&&this.onDidChangeNodeTwistieState(i)}onDidChangeNodeTwistieState(t){const i=this.renderedNodes.get(t);i&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(t,i))}renderTreeElement(t,i){const e=Ij.DefaultIndent+(t.depth-1)*this.indent;i.twistie.style.paddingLeft=`${e}px`,i.indent.style.width=e+this.indent-16+"px",t.collapsible?i.container.setAttribute("aria-expanded",String(!t.collapsed)):i.container.removeAttribute("aria-expanded"),i.twistie.classList.remove(...Ka.asClassNameArray(Fs.treeItemExpanded));let s=!1;this.renderer.renderTwistie&&(s=this.renderer.renderTwistie(t.element,i.twistie)),t.collapsible&&(!this.hideTwistiesOfChildlessElements||t.visibleChildrenCount>0)?(s||i.twistie.classList.add(...Ka.asClassNameArray(Fs.treeItemExpanded)),i.twistie.classList.add("collapsible"),i.twistie.classList.toggle("collapsed",t.collapsed)):i.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(t,i)}_renderIndentGuides(t,i){if(nc(i.indent),i.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const e=new Zi,s=this.modelProvider();for(;;){const n=s.getNodeLocation(t),o=s.getParentNodeLocation(n);if(!o)break;const r=s.getNode(o),h=ha(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(r)&&h.classList.add("active"),i.indent.childElementCount===0?i.indent.appendChild(h):i.indent.insertBefore(h,i.indent.firstElementChild),this.renderedIndentGuides.add(r,h),e.add(qi((()=>this.renderedIndentGuides.delete(r,h)))),t=r}i.indentGuidesDisposable=e}_onDidChangeActiveNodes(t){if(!this.shouldRenderIndentGuides)return;const i=new Set,e=this.modelProvider();t.forEach((t=>{const s=e.getNodeLocation(t);try{const n=e.getParentNodeLocation(s);t.collapsible&&t.children.length>0&&!t.collapsed?i.add(t):n&&i.add(e.getNode(n))}catch{}})),this.activeIndentNodes.forEach((t=>{i.has(t)||this.renderedIndentGuides.forEach(t,(t=>t.classList.remove("active")))})),i.forEach((t=>{this.activeIndentNodes.has(t)||this.renderedIndentGuides.forEach(t,(t=>t.classList.add("active")))})),this.activeIndentNodes=i}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),$i(this.disposables)}}Ij.DefaultIndent=8;class Lj{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(t,i,e){this.tree=t,this.keyboardNavigationLabelProvider=i,this._filter=e,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Zi,t.onWillRefilter(this.reset,this,this.disposables)}filter(t,i){let e=1;if(this._filter){const s=this._filter.filter(t,i);if(e=typeof s=="boolean"?s?1:0:kj(s)?xj(s.visibility):s,e===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:mN.Default,visibility:e};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t),n=Array.isArray(s)?s:[s];for(const t of n){const i=t&&t.toString();if(i===void 0)return{data:mN.Default,visibility:e};let s;if(this.tree.findMatchType===vj.Contiguous){const t=i.toLowerCase().indexOf(this._lowercasePattern);if(t>-1){s=[Number.MAX_SAFE_INTEGER,0];for(let i=this._lowercasePattern.length;i>0;i--)s.push(t+i-1)}}else s=bN(this._pattern,this._lowercasePattern,0,i,i.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(s)return this._matchCount++,n.length===1?{data:s,visibility:e}:{data:{label:i,score:s},visibility:e}}return this.tree.findMode===mj.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(t):2:{data:mN.Default,visibility:e}}reset(){this._totalCount=0,this._matchCount=0}dispose(){$i(this.disposables)}}(function(t){t[t.Highlight=0]="Highlight",t[t.Filter=1]="Filter"})(mj||(mj={})),function(t){t[t.Fuzzy=0]="Fuzzy",t[t.Contiguous=1]="Contiguous"}(vj||(vj={}));let Rj=class{get pattern(){return this._pattern}get mode(){return this._mode}set mode(t){t!==this._mode&&(this._mode=t,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(t))}get matchType(){return this._matchType}set matchType(t){t!==this._matchType&&(this._matchType=t,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(t))}constructor(t,i,e,s,n,o={}){var r,h;this.tree=t,this.view=e,this.filter=s,this.contextViewProvider=n,this.options=o,this._pattern="",this.width=0,this._onDidChangeMode=new de,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new de,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new de,this._onDidChangeOpenState=new de,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Zi,this.disposables=new Zi,this._mode=(r=t.options.defaultFindMode)!==null&&r!==void 0?r:mj.Highlight,this._matchType=(h=t.options.defaultFindMatchType)!==null&&h!==void 0?h:vj.Fuzzy,i.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(t={}){t.defaultFindMode!==void 0&&(this.mode=t.defaultFindMode),t.defaultFindMatchType!==void 0&&(this.matchType=t.defaultFindMatchType)}onDidSpliceModel(){this.widget&&this.pattern.length!==0&&(this.tree.refilter(),this.render())}render(){var t,i,e,s;const n=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&n?(t=this.tree.options.showNotFoundMessage)===null||t===void 0||t?(i=this.widget)===null||i===void 0||i.showMessage({type:2,content:st(0,"No elements found.")}):(e=this.widget)===null||e===void 0||e.showMessage({type:2}):(s=this.widget)===null||s===void 0||s.clearMessage()}shouldAllowFocus(t){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1||!mN.isDefault(t.filterData)}layout(t){var i;this.width=t,(i=this.widget)===null||i===void 0||i.layout(t)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function Tj(t,i){return t.position===i.position&&Nj(t,i)}function Nj(t,i){return t.node.element===i.node.element&&t.startIndex===i.startIndex&&t.height===i.height&&t.endIndex===i.endIndex}class Qj{constructor(t=[]){this.stickyNodes=t}get count(){return this.stickyNodes.length}equal(t){return h(this.stickyNodes,t.stickyNodes,Tj)}lastNodePartiallyVisible(){if(this.count===0)return!1;const t=this.stickyNodes[this.count-1];if(this.count===1)return t.position!==0;const i=this.stickyNodes[this.count-2];return i.position+i.height!==t.position}animationStateChanged(t){if(!h(this.stickyNodes,t.stickyNodes,Nj)||this.count===0)return!1;const i=this.stickyNodes[this.count-1],e=t.stickyNodes[t.count-1];return i.position!==e.position}}class Oj{constrainStickyScrollNodes(t,i,e){for(let s=0;s<t.length;s++){const n=t[s];if(n.position+n.height>e||s>=i)return t.slice(0,s)}return t}}let zj=class extends te{constructor(t,i,e,s,n,o={}){var r;super(),this.tree=t,this.model=i,this.view=e,this.treeDelegate=n,this.maxWidgetViewRatio=.4;const h=this.validateStickySettings(o);this.stickyScrollMaxItemCount=h.stickyScrollMaxItemCount,this.stickyScrollDelegate=(r=o.stickyScrollDelegate)!==null&&r!==void 0?r:new Oj,this._widget=this._register(new Uj(e.getScrollableElement(),e,t,s,n,o.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(e.onDidScroll((()=>this.update()))),this._register(e.onDidChangeContentHeight((()=>this.update()))),this._register(t.onDidChangeCollapseState((()=>this.update()))),this.update()}get height(){return this._widget.height}getNodeAtHeight(t){let i;if(i=t===0?this.view.firstVisibleIndex:this.view.indexAt(t+this.view.scrollTop),!(i<0||i>=this.view.length))return this.view.element(i)}update(){const t=this.getNodeAtHeight(0);if(!t||this.tree.scrollTop===0)return void this._widget.setState(void 0);const i=this.findStickyState(t);this._widget.setState(i)}findStickyState(t){const i=[];let e=t,s=0,n=this.getNextStickyNode(e,void 0,s);for(;n&&(i.push(n),s+=n.height,!(i.length<=this.stickyScrollMaxItemCount)||(e=this.getNextVisibleNode(n),e));)n=this.getNextStickyNode(e,n.node,s);const o=this.constrainStickyNodes(i);return o.length?new Qj(o):void 0}getNextVisibleNode(t){return this.getNodeAtHeight(t.position+t.height)}getNextStickyNode(t,i,e){const s=this.getAncestorUnderPrevious(t,i);if(s)return s===t&&(!this.nodeIsUncollapsedParent(t)||this.nodeTopAlignsWithStickyNodesBottom(t,e))?void 0:this.createStickyScrollNode(s,e)}nodeTopAlignsWithStickyNodesBottom(t,i){const e=this.getNodeIndex(t),s=this.view.getElementTop(e),n=i;return this.view.scrollTop===s-n}createStickyScrollNode(t,i){const e=this.treeDelegate.getHeight(t),{startIndex:s,endIndex:n}=this.getNodeRange(t);return{node:t,position:this.calculateStickyNodePosition(n,i,e),height:e,startIndex:s,endIndex:n}}getAncestorUnderPrevious(t,i=void 0){let e=t,s=this.getParentNode(e);for(;s;){if(s===i)return e;e=s,s=this.getParentNode(e)}if(i===void 0)return e}calculateStickyNodePosition(t,i,e){let s=this.view.getRelativeTop(t);if(s===null&&this.view.firstVisibleIndex===t&&t+1<this.view.length){const i=this.treeDelegate.getHeight(this.view.element(t)),e=this.view.getRelativeTop(t+1);s=e?e-i/this.view.renderHeight:null}if(s===null)return i;const n=this.view.element(t),o=this.treeDelegate.getHeight(n),r=s*this.view.renderHeight+o;return i+e>r&&i<=r?r-e:i}constrainStickyNodes(t){if(t.length===0)return[];const i=this.view.renderHeight*this.maxWidgetViewRatio,e=t[t.length-1];if(t.length<=this.stickyScrollMaxItemCount&&e.position+e.height<=i)return t;const s=this.stickyScrollDelegate.constrainStickyScrollNodes(t,this.stickyScrollMaxItemCount,i);if(!s.length)return[];const n=s[s.length-1];if(s.length>this.stickyScrollMaxItemCount||n.position+n.height>i)throw new Error("stickyScrollDelegate violates constraints");return s}getParentNode(t){const i=this.model.getNodeLocation(t),e=this.model.getParentNodeLocation(i);return e?this.model.getNode(e):void 0}nodeIsUncollapsedParent(t){const i=this.model.getNodeLocation(t);return this.model.getListRenderCount(i)>1}getNodeIndex(t){const i=this.model.getNodeLocation(t);return this.model.getListIndex(i)}getNodeRange(t){const i=this.model.getNodeLocation(t),e=this.model.getListIndex(i);if(e<0)throw new Error("Node not found in tree");return{startIndex:e,endIndex:e+this.model.getListRenderCount(i)-1}}nodePositionTopBelowWidget(t){const i=[];let e=this.getParentNode(t);for(;e;)i.push(e),e=this.getParentNode(e);let s=0;for(let t=0;t<i.length&&t<this.stickyScrollMaxItemCount;t++)s+=this.treeDelegate.getHeight(i[t]);return s}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(t={}){if(!t.stickyScrollMaxItemCount)return;const i=this.validateStickySettings(t);this.stickyScrollMaxItemCount!==i.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=i.stickyScrollMaxItemCount,this.update())}validateStickySettings(t){let i=7;return typeof t.stickyScrollMaxItemCount=="number"&&(i=Math.max(t.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:i}}},Uj=class{constructor(t,i,e,s,n,o){this.view=i,this.tree=e,this.treeRenderers=s,this.treeDelegate=n,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new Zi,this._rootDomNode=ha(".monaco-tree-sticky-container.empty"),t.appendChild(this._rootDomNode);const r=ha(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(r),this.stickyScrollFocus=new Hj(this._rootDomNode,i),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const t=this._previousState.stickyNodes[this._previousState.count-1];return t.position+t.height}setState(t){const i=!!this._previousState&&this._previousState.count>0,e=!!t&&t.count>0;if(!i&&!e||i&&e&&this._previousState.equal(t))return;if(i!==e&&this.setVisible(e),!e)return this._previousState=void 0,this._previousElements=[],void this._previousStateDisposables.clear();const s=t.stickyNodes[t.count-1];if(this._previousState&&t.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${s.position}px`;else{this._previousStateDisposables.clear();const i=Array(t.count);for(let e=t.count-1;e>=0;e--){const s=t.stickyNodes[e],{element:n,disposable:o}=this.createElement(s,e,t.count);i[e]=n,this._rootDomNode.appendChild(n),this._previousStateDisposables.add(o)}this.stickyScrollFocus.updateElements(i,t),this._previousElements=i}this._previousState=t,this._rootDomNode.style.height=`${s.position+s.height}px`}createElement(t,i,e){const s=t.startIndex,n=document.createElement("div");n.style.top=`${t.position}px`,this.tree.options.setRowHeight!==!1&&(n.style.height=`${t.height}px`),this.tree.options.setRowLineHeight!==!1&&(n.style.lineHeight=`${t.height}px`),n.classList.add("monaco-tree-sticky-row"),n.classList.add("monaco-list-row"),n.setAttribute("data-index",`${s}`),n.setAttribute("data-parity",s%2==0?"even":"odd"),n.setAttribute("id",this.view.getElementID(s));const o=this.setAccessibilityAttributes(n,t.node.element,i,e),r=this.treeDelegate.getTemplateId(t.node),h=this.treeRenderers.find((t=>t.templateId===r));if(!h)throw new Error(`No renderer found for template id ${r}`);let c=t.node;c===this.tree.getNode(this.tree.getNodeLocation(t.node))&&(c=new Proxy(t.node,{}));const a=h.renderTemplate(n);h.renderElement(c,t.startIndex,a,t.height);const l=qi((()=>{o.dispose(),h.disposeElement(c,t.startIndex,a,t.height),h.disposeTemplate(a),n.remove()}));return{element:n,disposable:l}}setAccessibilityAttributes(t,i,e,s){var n;if(!this.accessibilityProvider)return te.None;this.accessibilityProvider.getSetSize&&t.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(i,e,s))),this.accessibilityProvider.getPosInSet&&t.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(i,e))),this.accessibilityProvider.getRole&&t.setAttribute("role",(n=this.accessibilityProvider.getRole(i))!==null&&n!==void 0?n:"treeitem");const o=this.accessibilityProvider.getAriaLabel(i),r=o&&typeof o!="string"?o:nU(o),h=Zz((i=>{const e=i.readObservable(r);e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}));typeof o=="string"||o&&t.setAttribute("aria-label",o.get());const c=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(i);return typeof c=="number"&&t.setAttribute("aria-level",`${c}`),t.setAttribute("aria-selected",String(!1)),h}setVisible(t){this._rootDomNode.classList.toggle("empty",!t),t||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}};class Hj extends te{get domHasFocus(){return this._domHasFocus}set domHasFocus(t){t!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(t),this._domHasFocus=t)}constructor(t,i){super(),this.container=t,this.view=i,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new de,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new de,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this.container.addEventListener("focus",(()=>this.onFocus())),this.container.addEventListener("blur",(()=>this.onBlur())),this._register(this.view.onDidFocus((()=>this.toggleStickyScrollFocused(!1)))),this._register(this.view.onKeyDown((t=>this.onKeyDown(t)))),this._register(this.view.onMouseDown((t=>this.onMouseDown(t)))),this._register(this.view.onContextMenu((t=>this.handleContextMenu(t))))}handleContextMenu(t){const i=t.browserEvent.target;if(!CU(i)&&!xU(i))return void(this.focusedLast()&&this.view.domFocus());if(!Kc(t.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const i=this.state.stickyNodes.findIndex((i=>{var e;return i.node.element===((e=t.element)===null||e===void 0?void 0:e.element)}));if(i===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");return this.container.focus(),void this.setFocus(i)}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const e=this.state.stickyNodes[this.focusedIndex].node.element,s=this.elements[this.focusedIndex];this._onContextMenu.fire({element:e,anchor:s,browserEvent:t.browserEvent,isStickyScroll:!0})}onKeyDown(t){if(this.domHasFocus&&this.state){if(t.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),t.preventDefault(),t.stopPropagation();else if(t.key==="ArrowDown"||t.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);t.preventDefault(),t.stopPropagation()}}}onMouseDown(t){const i=t.browserEvent.target;(CU(i)||xU(i))&&(t.browserEvent.preventDefault(),t.browserEvent.stopPropagation())}updateElements(t,i){if(i&&i.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(i&&i.count!==t.length)throw new Error("Sticky scroll focus received illigel state");const e=this.focusedIndex;if(this.removeFocus(),this.elements=t,this.state=i,i){const t=rR(e,0,i.count-1);this.setFocus(t)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=i?0:-1}setFocusedElement(t){const i=this.state;if(!i)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(t),!(t<i.count-1)&&i.lastNodePartiallyVisible()){const e=i.stickyNodes[t];this.scrollNodeUnderWidget(e.endIndex+1,i)}}scrollNodeUnderWidget(t,i){const e=i.stickyNodes[i.count-1],s=i.count>1?i.stickyNodes[i.count-2]:void 0,n=this.view.getElementTop(t),o=s?s.position+s.height+e.height:e.height;this.view.scrollTop=n-o}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return!!this.state&&this.view.getHTMLElement().classList.contains("sticky-scroll-focused")}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(t){if(0>t)throw new Error("addFocus() can not remove focus");if(!this.state&&t>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&t>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const i=this.focusedIndex;i>=0&&this.toggleElementFocus(this.elements[i],!1),t>=0&&this.toggleElementFocus(this.elements[t],!0),this.focusedIndex=t}toggleElementFocus(t,i){this.toggleElementActiveFocus(t,i&&this.domHasFocus),this.toggleElementPassiveFocus(t,i)}toggleCurrentElementActiveFocus(t){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],t)}toggleElementActiveFocus(t,i){t.classList.toggle("focused",i)}toggleElementPassiveFocus(t,i){t.classList.toggle("passive-focused",i)}toggleStickyScrollFocused(t){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",t)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function Pj(t){let i=pj.Unknown;return Mc(t.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?i=pj.Twistie:Mc(t.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?i=pj.Element:Mc(t.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(i=pj.Filter),{browserEvent:t.browserEvent,element:t.element?t.element.element:null,target:i}}function jj(t){const i=CU(t.browserEvent.target);return{element:t.element?t.element.element:null,browserEvent:t.browserEvent,anchor:t.anchor,isStickyScroll:i}}function Wj(t,i){i(t),t.children.forEach((t=>Wj(t,i)))}class Yj{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(t,i){this.getFirstViewElementWithTrait=t,this.identityProvider=i,this.nodes=[],this._onDidChange=new de,this.onDidChange=this._onDidChange.event}set(t,i){!(i!=null&&i.__forceEvent)&&h(this.nodes,t)||this._set(t,!1,i)}_set(t,i,e){if(this.nodes=[...t],this.elements=void 0,this._nodeSet=void 0,!i){const t=this;this._onDidChange.fire({get elements(){return t.get()},browserEvent:e})}}get(){return this.elements||(this.elements=this.nodes.map((t=>t.element))),[...this.elements]}getNodes(){return this.nodes}has(t){return this.nodeSet.has(t)}onDidModelSplice({insertedNodes:t,deletedNodes:i}){if(!this.identityProvider){const t=this.createNodeSet(),e=i=>t.delete(i);return i.forEach((t=>Wj(t,e))),void this.set([...t.values()])}const e=new Set,s=t=>e.add(this.identityProvider.getId(t.element).toString());i.forEach((t=>Wj(t,s)));const n=new Map,o=t=>n.set(this.identityProvider.getId(t.element).toString(),t);t.forEach((t=>Wj(t,o)));const r=[];for(const t of this.nodes){const i=this.identityProvider.getId(t.element).toString();if(e.has(i)){const t=n.get(i);t&&t.visible&&r.push(t)}else r.push(t)}if(this.nodes.length>0&&r.length===0){const t=this.getFirstViewElementWithTrait();t&&r.push(t)}this._set(r,!0)}createNodeSet(){const t=new Set;for(const i of this.nodes)t.add(i);return t}}class _j extends NU{constructor(t,i,e){super(t),this.tree=i,this.stickyScrollProvider=e}onViewPointer(t){if(EU(t.browserEvent.target)||bU(t.browserEvent.target)||kU(t.browserEvent.target)||t.browserEvent.isHandledByList)return;const i=t.element;if(!i)return super.onViewPointer(t);if(this.isSelectionRangeChangeEvent(t)||this.isSelectionSingleChangeEvent(t))return super.onViewPointer(t);const e=t.browserEvent.target,s=e.classList.contains("monaco-tl-twistie")||e.classList.contains("monaco-icon-label")&&e.classList.contains("folder-icon")&&t.browserEvent.offsetX<16,n=xU(t.browserEvent.target);let o=!1;if(o=!!n||(typeof this.tree.expandOnlyOnTwistieClick=="function"?this.tree.expandOnlyOnTwistieClick(i.element):!!this.tree.expandOnlyOnTwistieClick),n)this.handleStickyScrollMouseEvent(t,i);else{if(o&&!s&&t.browserEvent.detail!==2)return super.onViewPointer(t);if(!this.tree.expandOnDoubleClick&&t.browserEvent.detail===2)return super.onViewPointer(t)}if(i.collapsible&&(!n||s)){const e=this.tree.getNodeLocation(i),n=t.browserEvent.altKey;if(this.tree.setFocus([e]),this.tree.toggleCollapsed(e,n),o&&s)return void(t.browserEvent.isHandledByList=!0)}n||super.onViewPointer(t)}handleStickyScrollMouseEvent(t,i){if(function(t){return yU(t,"monaco-custom-toggle")}(t.browserEvent.target)||function(t){return yU(t,"action-item")}(t.browserEvent.target))return;const e=this.stickyScrollProvider();if(!e)throw new Error("Sticky scroll controller not found");const s=this.list.indexOf(i),n=this.list.getElementTop(s),o=e.nodePositionTopBelowWidget(i);this.tree.scrollTop=n-o,this.list.domFocus(),this.list.setFocus([s]),this.list.setSelection([s])}onDoubleClick(t){!t.browserEvent.target.classList.contains("monaco-tl-twistie")&&this.tree.expandOnDoubleClick&&(t.browserEvent.isHandledByList||super.onDoubleClick(t))}onMouseDown(t){const i=t.browserEvent.target;CU(i)||xU(i)||super.onMouseDown(t)}onContextMenu(t){const i=t.browserEvent.target;CU(i)||xU(i)||super.onContextMenu(t)}}class Vj extends YU{constructor(t,i,e,s,n,o,r,h){super(t,i,e,s,h),this.focusTrait=n,this.selectionTrait=o,this.anchorTrait=r}createMouseController(t){return new _j(this,t.tree,t.stickyScrollProvider)}splice(t,i,e=[]){if(super.splice(t,i,e),e.length===0)return;const s=[],n=[];let o;e.forEach(((i,e)=>{this.focusTrait.has(i)&&s.push(t+e),this.selectionTrait.has(i)&&n.push(t+e),this.anchorTrait.has(i)&&(o=t+e)})),s.length>0&&super.setFocus(w([...super.getFocus(),...s])),n.length>0&&super.setSelection(w([...super.getSelection(),...n])),typeof o=="number"&&super.setAnchor(o)}setFocus(t,i,e=!1){super.setFocus(t,i),e||this.focusTrait.set(t.map((t=>this.element(t))),i)}setSelection(t,i,e=!1){super.setSelection(t,i),e||this.selectionTrait.set(t.map((t=>this.element(t))),i)}setAnchor(t,i=!1){super.setAnchor(t),i||(t===void 0?this.anchorTrait.set([]):this.anchorTrait.set([this.element(t)]))}}class Jj{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return he.filter(he.map(this.view.onMouseDblClick,Pj),(t=>t.target!==pj.Filter))}get onMouseOver(){return he.map(this.view.onMouseOver,Pj)}get onMouseOut(){return he.map(this.view.onMouseOut,Pj)}get onContextMenu(){var t,i;return he.any(he.filter(he.map(this.view.onContextMenu,jj),(t=>!t.isStickyScroll)),(i=(t=this.stickyScrollController)===null||t===void 0?void 0:t.onContextMenu)!==null&&i!==void 0?i:he.None)}get onPointer(){return he.map(this.view.onPointer,Pj)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return he.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var t,i;return(i=(t=this.findController)===null||t===void 0?void 0:t.mode)!==null&&i!==void 0?i:mj.Highlight}set findMode(t){this.findController&&(this.findController.mode=t)}get findMatchType(){var t,i;return(i=(t=this.findController)===null||t===void 0?void 0:t.matchType)!==null&&i!==void 0?i:vj.Fuzzy}set findMatchType(t){this.findController&&(this.findController.matchType=t)}get expandOnDoubleClick(){return this._options.expandOnDoubleClick===void 0||this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return this._options.expandOnlyOnTwistieClick===void 0||this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(t,i,e,s,n={}){var o;this._user=t,this._options=n,this.eventBufferer=new me,this.onDidChangeFindOpenState=he.None,this.onDidChangeStickyScrollFocused=he.None,this.disposables=new Zi,this._onWillRefilter=new de,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new de,this.treeDelegate=new Sj(e);const r=new ve,h=new ve,c=this.disposables.add(new Fj(h.event)),a=new Xf;this.renderers=s.map((t=>new Ij(t,(()=>this.model),r.event,c,a,n)));for(const t of this.renderers)this.disposables.add(t);let l;var u,d;n.keyboardNavigationLabelProvider&&(l=new Lj(this,n.keyboardNavigationLabelProvider,n.filter),n={...n,filter:l},this.disposables.add(l)),this.focus=new Yj((()=>this.view.getFocusedElements()[0]),n.identityProvider),this.selection=new Yj((()=>this.view.getSelectedElements()[0]),n.identityProvider),this.anchor=new Yj((()=>this.view.getAnchorElement()),n.identityProvider),this.view=new Vj(t,i,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...(u=()=>this.model,d=n,d&&{...d,identityProvider:d.identityProvider&&{getId:t=>d.identityProvider.getId(t.element)},dnd:d.dnd&&new Mj(u,d.dnd),multipleSelectionController:d.multipleSelectionController&&{isSelectionSingleChangeEvent:t=>d.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element}),isSelectionRangeChangeEvent:t=>d.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})},accessibilityProvider:d.accessibilityProvider&&{...d.accessibilityProvider,getSetSize(t){const i=u(),e=i.getNodeLocation(t),s=i.getParentNodeLocation(e);return i.getNode(s).visibleChildrenCount},getPosInSet:t=>t.visibleChildIndex+1,isChecked:d.accessibilityProvider&&d.accessibilityProvider.isChecked?t=>d.accessibilityProvider.isChecked(t.element):void 0,getRole:d.accessibilityProvider&&d.accessibilityProvider.getRole?t=>d.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel:t=>d.accessibilityProvider.getAriaLabel(t.element),getWidgetAriaLabel:()=>d.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:d.accessibilityProvider&&d.accessibilityProvider.getWidgetRole?()=>d.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:d.accessibilityProvider&&d.accessibilityProvider.getAriaLevel?t=>d.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:d.accessibilityProvider.getActiveDescendantId&&(t=>d.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:d.keyboardNavigationLabelProvider&&{...d.keyboardNavigationLabelProvider,getKeyboardNavigationLabel:t=>d.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(t,this.view,n),r.input=this.model.onDidChangeCollapseState;const f=he.forEach(this.model.onDidSplice,(t=>{this.eventBufferer.bufferEvents((()=>{this.focus.onDidModelSplice(t),this.selection.onDidModelSplice(t)}))}),this.disposables);f((()=>null),null,this.disposables);const g=this.disposables.add(new de),A=this.disposables.add(new mr(0));if(this.disposables.add(he.any(f,this.focus.onDidChange,this.selection.onDidChange)((()=>{A.trigger((()=>{const t=new Set;for(const i of this.focus.getNodes())t.add(i);for(const i of this.selection.getNodes())t.add(i);g.fire([...t.values()])}))}))),h.input=g.event,n.keyboardSupport!==!1){const t=he.chain(this.view.onKeyDown,(t=>t.filter((t=>!bU(t.target))).map((t=>new hr(t)))));he.chain(t,(t=>t.filter((t=>t.keyCode===15))))(this.onLeftArrow,this,this.disposables),he.chain(t,(t=>t.filter((t=>t.keyCode===17))))(this.onRightArrow,this,this.disposables),he.chain(t,(t=>t.filter((t=>t.keyCode===10))))(this.onSpace,this,this.disposables)}if(((o=n.findWidgetEnabled)===null||o===void 0||o)&&n.keyboardNavigationLabelProvider&&n.contextViewProvider){const t=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new Rj(this,this.model,this.view,l,n.contextViewProvider,t),this.focusNavigationFilter=t=>this.findController.shouldAllowFocus(t),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=he.None,this.onDidChangeFindMatchType=he.None;n.enableStickyScroll&&(this.stickyScrollController=new zj(this,this.model,this.view,this.renderers,this.treeDelegate,n),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=Uc(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===wj.Always)}updateOptions(t={}){var i;this._options={...this._options,...t};for(const i of this.renderers)i.updateOptions(t);this.view.updateOptions(this._options),(i=this.findController)===null||i===void 0||i.updateOptions(t),this.updateStickyScroll(t),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===wj.Always)}get options(){return this._options}updateStickyScroll(t){var i;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new zj(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=he.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(i=this.stickyScrollController)===null||i===void 0||i.updateOptions(t)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(t){this.view.scrollTop=t}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(t){this.view.ariaLabel=t}domFocus(){var t;!((t=this.stickyScrollController)===null||t===void 0)&&t.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(t,i){var e;this.view.layout(t,i),z(i)&&((e=this.findController)===null||e===void 0||e.layout(i))}style(t){var i;const e=`.${this.view.domId}`,s=[];t.treeIndentGuidesStroke&&(s.push(`.monaco-list${e}:hover .monaco-tl-indent > .indent-guide, .monaco-list${e}.always .monaco-tl-indent > .indent-guide  { border-color: ${t.treeInactiveIndentGuidesStroke}; }`),s.push(`.monaco-list${e} .monaco-tl-indent > .indent-guide.active { border-color: ${t.treeIndentGuidesStroke}; }`)),t.listBackground&&(s.push(`.monaco-list${e} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${t.listBackground}; }`),s.push(`.monaco-list${e} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${t.listBackground}; }`)),t.listFocusForeground&&(s.push(`.monaco-list${e}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${t.listFocusForeground}; }`),s.push(`.monaco-list${e}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const n=ga(t.listFocusAndSelectionOutline,ga(t.listSelectionOutline,(i=t.listFocusOutline)!==null&&i!==void 0?i:""));n&&(s.push(`.monaco-list${e}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${n}; outline-offset: -1px;}`),s.push(`.monaco-list${e}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),t.listFocusOutline&&(s.push(`.monaco-list${e}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${t.listFocusOutline}; outline-offset: -1px; }`),s.push(`.monaco-list${e}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),s.push(`.monaco-workbench.context-menu-visible .monaco-list${e}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${t.listFocusOutline}; outline-offset: -1px; }`),s.push(`.monaco-workbench.context-menu-visible .monaco-list${e}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),s.push(`.monaco-workbench.context-menu-visible .monaco-list${e}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=s.join(`\n`),this.view.style(t)}getParentElement(t){const i=this.model.getParentNodeLocation(t);return this.model.getNode(i).element}getFirstElementChild(t){return this.model.getFirstElementChild(t)}getNode(t){return this.model.getNode(t)}getNodeLocation(t){return this.model.getNodeLocation(t)}collapse(t,i=!1){return this.model.setCollapsed(t,!0,i)}expand(t,i=!1){return this.model.setCollapsed(t,!1,i)}toggleCollapsed(t,i=!1){return this.model.setCollapsed(t,void 0,i)}isCollapsible(t){return this.model.isCollapsible(t)}setCollapsible(t,i){return this.model.setCollapsible(t,i)}isCollapsed(t){return this.model.isCollapsed(t)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(t,i){this.eventBufferer.bufferEvents((()=>{const e=t.map((t=>this.model.getNode(t)));this.selection.set(e,i);const s=t.map((t=>this.model.getListIndex(t))).filter((t=>t>-1));this.view.setSelection(s,i,!0)}))}getSelection(){return this.selection.get()}setFocus(t,i){this.eventBufferer.bufferEvents((()=>{const e=t.map((t=>this.model.getNode(t)));this.focus.set(e,i);const s=t.map((t=>this.model.getListIndex(t))).filter((t=>t>-1));this.view.setFocus(s,i,!0)}))}focusNext(t=1,i=!1,e,s=(Kc(e)&&e.altKey?void 0:this.focusNavigationFilter)){this.view.focusNext(t,i,e,s)}focusPrevious(t=1,i=!1,e,s=(Kc(e)&&e.altKey?void 0:this.focusNavigationFilter)){this.view.focusPrevious(t,i,e,s)}focusNextPage(t,i=(Kc(t)&&t.altKey?void 0:this.focusNavigationFilter)){return this.view.focusNextPage(t,i)}focusPreviousPage(t,i=(Kc(t)&&t.altKey?void 0:this.focusNavigationFilter)){return this.view.focusPreviousPage(t,i,(()=>{var t,i;return(i=(t=this.stickyScrollController)===null||t===void 0?void 0:t.height)!==null&&i!==void 0?i:0}))}focusFirst(t,i=(Kc(t)&&t.altKey?void 0:this.focusNavigationFilter)){this.view.focusFirst(t,i)}getFocus(){return this.focus.get()}reveal(t,i){this.model.expandTo(t);const e=this.model.getListIndex(t);if(e!==-1)if(this.stickyScrollController){const s=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(t));this.view.reveal(e,i,s)}else this.view.reveal(e,i)}onLeftArrow(t){t.preventDefault(),t.stopPropagation();const i=this.view.getFocusedElements();if(i.length===0)return;const e=i[0],s=this.model.getNodeLocation(e);if(!this.model.setCollapsed(s,!0)){const t=this.model.getParentNodeLocation(s);if(!t)return;const i=this.model.getListIndex(t);this.view.reveal(i),this.view.setFocus([i])}}onRightArrow(t){t.preventDefault(),t.stopPropagation();const i=this.view.getFocusedElements();if(i.length===0)return;const e=i[0],s=this.model.getNodeLocation(e);if(!this.model.setCollapsed(s,!1)){if(!e.children.some((t=>t.visible)))return;const[t]=this.view.getFocus(),i=t+1;this.view.reveal(i),this.view.setFocus([i])}}onSpace(t){t.preventDefault(),t.stopPropagation();const i=this.view.getFocusedElements();if(i.length===0)return;const e=i[0],s=this.model.getNodeLocation(e),n=t.browserEvent.altKey;this.model.setCollapsed(s,void 0,n)}dispose(){var t;$i(this.disposables),(t=this.stickyScrollController)===null||t===void 0||t.dispose(),this.view.dispose()}}class Gj{constructor(t,i,e={}){this.user=t,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new Ej(t,i,null,e),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,e.sorter&&(this.sorter={compare:(t,i)=>e.sorter.compare(t.element,i.element)}),this.identityProvider=e.identityProvider}setChildren(t,i=Wt.empty(),e={}){const s=this.getElementLocation(t);this._setChildren(s,this.preserveCollapseState(i),e)}_setChildren(t,i=Wt.empty(),e){const s=new Set,n=new Set;this.model.splice([...t,0],Number.MAX_VALUE,i,{...e,onDidCreateNode:t=>{var i;if(t.element===null)return;const o=t;if(s.add(o.element),this.nodes.set(o.element,o),this.identityProvider){const t=this.identityProvider.getId(o.element).toString();n.add(t),this.nodesByIdentity.set(t,o)}(i=e.onDidCreateNode)===null||i===void 0||i.call(e,o)},onDidDeleteNode:t=>{var i;if(t.element===null)return;const o=t;if(s.has(o.element)||this.nodes.delete(o.element),this.identityProvider){const t=this.identityProvider.getId(o.element).toString();n.has(t)||this.nodesByIdentity.delete(t)}(i=e.onDidDeleteNode)===null||i===void 0||i.call(e,o)}})}preserveCollapseState(t=Wt.empty()){return this.sorter&&(t=[...t].sort(this.sorter.compare.bind(this.sorter))),Wt.map(t,(t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const e=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(e)}if(!i){let i;return i=t.collapsed===void 0?void 0:t.collapsed===Aj.Collapsed||t.collapsed===Aj.PreserveOrCollapsed||t.collapsed!==Aj.Expanded&&t.collapsed!==Aj.PreserveOrExpanded&&!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:i}}const e=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let s;return s=t.collapsed===void 0||t.collapsed===Aj.PreserveOrCollapsed||t.collapsed===Aj.PreserveOrExpanded?i.collapsed:t.collapsed===Aj.Collapsed||t.collapsed!==Aj.Expanded&&!!t.collapsed,{...t,collapsible:e,collapsed:s,children:this.preserveCollapseState(t.children)}}))}rerender(t){const i=this.getElementLocation(t);this.model.rerender(i)}getFirstElementChild(t=null){const i=this.getElementLocation(t);return this.model.getFirstElementChild(i)}has(t){return this.nodes.has(t)}getListIndex(t){const i=this.getElementLocation(t);return this.model.getListIndex(i)}getListRenderCount(t){const i=this.getElementLocation(t);return this.model.getListRenderCount(i)}isCollapsible(t){const i=this.getElementLocation(t);return this.model.isCollapsible(i)}setCollapsible(t,i){const e=this.getElementLocation(t);return this.model.setCollapsible(e,i)}isCollapsed(t){const i=this.getElementLocation(t);return this.model.isCollapsed(i)}setCollapsed(t,i,e){const s=this.getElementLocation(t);return this.model.setCollapsed(s,i,e)}expandTo(t){const i=this.getElementLocation(t);this.model.expandTo(i)}refilter(){this.model.refilter()}getNode(t=null){if(t===null)return this.model.getNode(this.model.rootRef);const i=this.nodes.get(t);if(!i)throw new bj(this.user,`Tree element not found: ${t}`);return i}getNodeLocation(t){return t.element}getParentNodeLocation(t){if(t===null)throw new bj(this.user,"Invalid getParentNodeLocation call");const i=this.nodes.get(t);if(!i)throw new bj(this.user,`Tree element not found: ${t}`);const e=this.model.getNodeLocation(i),s=this.model.getParentNodeLocation(e);return this.model.getNode(s).element}getElementLocation(t){if(t===null)return[];const i=this.nodes.get(t);if(!i)throw new bj(this.user,`Tree element not found: ${t}`);return this.model.getNodeLocation(i)}}function Kj(t){return{element:{elements:[t.element],incompressible:t.incompressible||!1},children:Wt.map(Wt.from(t.children),Kj),collapsible:t.collapsible,collapsed:t.collapsed}}function $j(t){const i=[t.element],e=t.incompressible||!1;let s,n;for(;[n,s]=Wt.consume(Wt.from(t.children),2),n.length===1&&!n[0].incompressible;)t=n[0],i.push(t.element);return{element:{elements:i,incompressible:e},children:Wt.map(Wt.concat(n,s),$j),collapsible:t.collapsible,collapsed:t.collapsed}}function Xj(t,i=0){let e;return e=i<t.element.elements.length-1?[Xj(t,i+1)]:Wt.map(Wt.from(t.children),(t=>Xj(t,0))),i===0&&t.element.incompressible?{element:t.element.elements[i],children:e,incompressible:!0,collapsible:t.collapsible,collapsed:t.collapsed}:{element:t.element.elements[i],children:e,collapsible:t.collapsible,collapsed:t.collapsed}}function qj(t){return Xj(t,0)}function Zj(t,i,e){return t.element===i?{...t,children:e}:{...t,children:Wt.map(Wt.from(t.children),(t=>Zj(t,i,e)))}}class tW{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(t,i,e={}){this.user=t,this.rootRef=null,this.nodes=new Map,this.model=new Gj(t,i,e),this.enabled=e.compressionEnabled===void 0||e.compressionEnabled,this.identityProvider=e.identityProvider}setChildren(t,i=Wt.empty(),e){const s=e.diffIdentityProvider&&(n=e.diffIdentityProvider,{getId:t=>t.elements.map((t=>n.getId(t).toString())).join("\0")});var n;if(t===null){const t=Wt.map(i,this.enabled?$j:Kj);return void this._setChildren(null,t,{diffIdentityProvider:s,diffDepth:1/0})}const o=this.nodes.get(t);if(!o)throw new bj(this.user,"Unknown compressed tree node");const r=this.model.getNode(o),c=this.model.getParentNodeLocation(o),a=this.model.getNode(c),l=Zj(qj(r),t,i),u=(this.enabled?$j:Kj)(l),d=e.diffIdentityProvider?(t,i)=>e.diffIdentityProvider.getId(t)===e.diffIdentityProvider.getId(i):void 0;if(h(u.element.elements,r.element.elements,d))return void this._setChildren(o,u.children||Wt.empty(),{diffIdentityProvider:s,diffDepth:1});const f=a.children.map((t=>t===r?u:t));this._setChildren(a.element,f,{diffIdentityProvider:s,diffDepth:r.depth-a.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(t){if(t===this.enabled)return;this.enabled=t;const i=this.model.getNode().children,e=Wt.map(i,qj),s=Wt.map(e,t?$j:Kj);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(t,i,e){const s=new Set;this.model.setChildren(t,i,{...e,onDidCreateNode:t=>{for(const i of t.element.elements)s.add(i),this.nodes.set(i,t.element)},onDidDeleteNode:t=>{for(const i of t.element.elements)s.has(i)||this.nodes.delete(i)}})}has(t){return this.nodes.has(t)}getListIndex(t){const i=this.getCompressedNode(t);return this.model.getListIndex(i)}getListRenderCount(t){const i=this.getCompressedNode(t);return this.model.getListRenderCount(i)}getNode(t){if(t===void 0)return this.model.getNode();const i=this.getCompressedNode(t);return this.model.getNode(i)}getNodeLocation(t){const i=this.model.getNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getParentNodeLocation(t){const i=this.getCompressedNode(t),e=this.model.getParentNodeLocation(i);return e===null?null:e.elements[e.elements.length-1]}getFirstElementChild(t){const i=this.getCompressedNode(t);return this.model.getFirstElementChild(i)}isCollapsible(t){const i=this.getCompressedNode(t);return this.model.isCollapsible(i)}setCollapsible(t,i){const e=this.getCompressedNode(t);return this.model.setCollapsible(e,i)}isCollapsed(t){const i=this.getCompressedNode(t);return this.model.isCollapsed(i)}setCollapsed(t,i,e){const s=this.getCompressedNode(t);return this.model.setCollapsed(s,i,e)}expandTo(t){const i=this.getCompressedNode(t);this.model.expandTo(i)}rerender(t){const i=this.getCompressedNode(t);this.model.rerender(i)}refilter(){this.model.refilter()}getCompressedNode(t){if(t===null)return null;const i=this.nodes.get(t);if(!i)throw new bj(this.user,`Tree element not found: ${t}`);return i}}const iW=t=>t[t.length-1];class eW{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map((t=>new eW(this.unwrapper,t)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(t,i){this.unwrapper=t,this.node=i}}class sW{get onDidSplice(){return he.map(this.model.onDidSplice,(({insertedNodes:t,deletedNodes:i})=>({insertedNodes:t.map((t=>this.nodeMapper.map(t))),deletedNodes:i.map((t=>this.nodeMapper.map(t)))})))}get onDidChangeCollapseState(){return he.map(this.model.onDidChangeCollapseState,(({node:t,deep:i})=>({node:this.nodeMapper.map(t),deep:i})))}get onDidChangeRenderNodeCount(){return he.map(this.model.onDidChangeRenderNodeCount,(t=>this.nodeMapper.map(t)))}constructor(t,i,e={}){this.rootRef=null,this.elementMapper=e.elementMapper||iW;const s=t=>this.elementMapper(t.elements);this.nodeMapper=new yj((t=>new eW(s,t))),this.model=new tW(t,function(t,i){return{splice(e,s,n){i.splice(e,s,n.map((i=>t.map(i))))},updateElementHeight(t,e){i.updateElementHeight(t,e)}}}(this.nodeMapper,i),function(t,i){return{...i,identityProvider:i.identityProvider&&{getId:e=>i.identityProvider.getId(t(e))},sorter:i.sorter&&{compare:(t,e)=>i.sorter.compare(t.elements[0],e.elements[0])},filter:i.filter&&{filter:(e,s)=>i.filter.filter(t(e),s)}}}(s,e))}setChildren(t,i=Wt.empty(),e={}){this.model.setChildren(t,i,e)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(t){this.model.setCompressionEnabled(t)}has(t){return this.model.has(t)}getListIndex(t){return this.model.getListIndex(t)}getListRenderCount(t){return this.model.getListRenderCount(t)}getNode(t){return this.nodeMapper.map(this.model.getNode(t))}getNodeLocation(t){return t.element}getParentNodeLocation(t){return this.model.getParentNodeLocation(t)}getFirstElementChild(t){const i=this.model.getFirstElementChild(t);return i==null?i:this.elementMapper(i.elements)}isCollapsible(t){return this.model.isCollapsible(t)}setCollapsible(t,i){return this.model.setCollapsible(t,i)}isCollapsed(t){return this.model.isCollapsed(t)}setCollapsed(t,i,e){return this.model.setCollapsed(t,i,e)}expandTo(t){return this.model.expandTo(t)}rerender(t){return this.model.rerender(t)}refilter(){return this.model.refilter()}getCompressedTreeNode(t=null){return this.model.getNode(t)}}var nW=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};class oW extends Jj{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(t,i,e,s,n={}){super(t,i,e,s,n),this.user=t}setChildren(t,i=Wt.empty(),e){this.model.setChildren(t,i,e)}rerender(t){t!==void 0?this.model.rerender(t):this.view.rerender()}hasElement(t){return this.model.has(t)}createModel(t,i,e){return new Gj(t,i,e)}}class rW{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(t,i,e){this._compressedTreeNodeProvider=t,this.stickyScrollDelegate=i,this.renderer=e,this.templateId=e.templateId,e.onDidChangeTwistieState&&(this.onDidChangeTwistieState=e.onDidChangeTwistieState)}renderTemplate(t){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(t)}}renderElement(t,i,e,s){let n=this.stickyScrollDelegate.getCompressedNode(t);n||(n=this.compressedTreeNodeProvider.getCompressedTreeNode(t.element)),n.element.elements.length===1?(e.compressedTreeNode=void 0,this.renderer.renderElement(t,i,e.data,s)):(e.compressedTreeNode=n,this.renderer.renderCompressedElements(n,i,e.data,s))}disposeElement(t,i,e,s){var n,o,r,h;e.compressedTreeNode?(o=(n=this.renderer).disposeCompressedElements)===null||o===void 0||o.call(n,e.compressedTreeNode,i,e.data,s):(h=(r=this.renderer).disposeElement)===null||h===void 0||h.call(r,t,i,e.data,s)}disposeTemplate(t){this.renderer.disposeTemplate(t.data)}renderTwistie(t,i){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(t,i)}}nW([Hy],rW.prototype,"compressedTreeNodeProvider",null);class hW{constructor(t){this.modelProvider=t,this.compressedStickyNodes=new Map}getCompressedNode(t){return this.compressedStickyNodes.get(t)}constrainStickyScrollNodes(t,i,e){if(this.compressedStickyNodes.clear(),t.length===0)return[];for(let s=0;s<t.length;s++){const n=t[s],o=n.position+n.height;if(s+1<t.length&&o+t[s+1].height>e||s>=i-1&&i<t.length){const i=t.slice(0,s),e=t.slice(s);return[...i,this.compressStickyNodes(e)]}}return t}compressStickyNodes(t){if(t.length===0)throw new Error("Can't compress empty sticky nodes");if(!this.modelProvider().isCompressionEnabled())return t[0];const i=[];for(const e of t){const t=this.modelProvider().getCompressedTreeNode(e.node.element);if(t.element){if(t.element.incompressible)break;i.push(...t.element.elements)}}if(i.length<2)return t[0];const e=t[t.length-1],s={elements:i,incompressible:!1},n={...e.node,children:[],element:s},o=new Proxy(t[0].node,{}),r={node:o,startIndex:t[0].startIndex,endIndex:e.endIndex,position:t[0].position,height:t[0].height};return this.compressedStickyNodes.set(o,n),r}}function cW(t,i){return i&&{...i,keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(e){let s;try{s=t().getCompressedTreeNode(e)}catch{return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e)}return s.element.elements.length===1?i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e):i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(s.element.elements)}}}}class aW extends oW{constructor(t,i,e,s,n={}){const o=()=>this,r=new hW((()=>this.model));super(t,i,e,s.map((t=>new rW(o,r,t))),{...cW(o,n),stickyScrollDelegate:r})}setChildren(t,i=Wt.empty(),e){this.model.setChildren(t,i,e)}createModel(t,i,e){return new sW(t,i,e)}updateOptions(t={}){super.updateOptions(t),t.compressionEnabled!==void 0&&this.model.setCompressionEnabled(t.compressionEnabled)}getCompressedTreeNode(t=null){return this.model.getCompressedTreeNode(t)}}function lW(t){return{...t,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function uW(t,i){return!!i.parent&&(i.parent===t||uW(t,i.parent))}class dW{get element(){return this.node.element.element}get children(){return this.node.children.map((t=>new dW(t)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(t){this.node=t}}class fW{constructor(t,i,e){this.renderer=t,this.nodeMapper=i,this.onDidChangeTwistieState=e,this.renderedNodes=new Map,this.templateId=t.templateId}renderTemplate(t){return{templateData:this.renderer.renderTemplate(t)}}renderElement(t,i,e,s){this.renderer.renderElement(this.nodeMapper.map(t),i,e.templateData,s)}renderTwistie(t,i){return t.slow?(i.classList.add(...Ka.asClassNameArray(Fs.treeItemLoading)),!0):(i.classList.remove(...Ka.asClassNameArray(Fs.treeItemLoading)),!1)}disposeElement(t,i,e,s){var n,o;(o=(n=this.renderer).disposeElement)===null||o===void 0||o.call(n,this.nodeMapper.map(t),i,e.templateData,s)}disposeTemplate(t){this.renderer.disposeTemplate(t.templateData)}dispose(){this.renderedNodes.clear()}}function gW(t){return{browserEvent:t.browserEvent,elements:t.elements.map((t=>t.element))}}function AW(t){return{browserEvent:t.browserEvent,element:t.element&&t.element.element,target:t.target}}class pW extends xz{constructor(t){super(t.elements.map((t=>t.element))),this.data=t}}function wW(t){return t instanceof xz?new pW(t):t}class mW{constructor(t){this.dnd=t}getDragURI(t){return this.dnd.getDragURI(t.element)}getDragLabel(t,i){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(t.map((t=>t.element)),i)}onDragStart(t,i){var e,s;(s=(e=this.dnd).onDragStart)===null||s===void 0||s.call(e,wW(t),i)}onDragOver(t,i,e,s,n,o=!0){return this.dnd.onDragOver(wW(t),i&&i.element,e,s,n)}drop(t,i,e,s,n){this.dnd.drop(wW(t),i&&i.element,e,s,n)}onDragEnd(t){var i,e;(e=(i=this.dnd).onDragEnd)===null||e===void 0||e.call(i,t)}dispose(){this.dnd.dispose()}}function vW(t){return t&&{...t,collapseByDefault:!0,identityProvider:t.identityProvider&&{getId:i=>t.identityProvider.getId(i.element)},dnd:t.dnd&&new mW(t.dnd),multipleSelectionController:t.multipleSelectionController&&{isSelectionSingleChangeEvent:i=>t.multipleSelectionController.isSelectionSingleChangeEvent({...i,element:i.element}),isSelectionRangeChangeEvent:i=>t.multipleSelectionController.isSelectionRangeChangeEvent({...i,element:i.element})},accessibilityProvider:t.accessibilityProvider&&{...t.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:t.accessibilityProvider.getRole?i=>t.accessibilityProvider.getRole(i.element):()=>"treeitem",isChecked:t.accessibilityProvider.isChecked?i=>{var e;return!!(!((e=t.accessibilityProvider)===null||e===void 0)&&e.isChecked(i.element))}:void 0,getAriaLabel:i=>t.accessibilityProvider.getAriaLabel(i.element),getWidgetAriaLabel:()=>t.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:t.accessibilityProvider.getWidgetRole?()=>t.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:t.accessibilityProvider.getAriaLevel&&(i=>t.accessibilityProvider.getAriaLevel(i.element)),getActiveDescendantId:t.accessibilityProvider.getActiveDescendantId&&(i=>t.accessibilityProvider.getActiveDescendantId(i.element))},filter:t.filter&&{filter:(i,e)=>t.filter.filter(i.element,e)},keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{...t.keyboardNavigationLabelProvider,getKeyboardNavigationLabel:i=>t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i.element)},sorter:void 0,expandOnlyOnTwistieClick:t.expandOnlyOnTwistieClick===void 0?void 0:typeof t.expandOnlyOnTwistieClick!="function"?t.expandOnlyOnTwistieClick:i=>t.expandOnlyOnTwistieClick(i.element),defaultFindVisibility:i=>i.hasChildren&&i.stale?1:typeof t.defaultFindVisibility=="number"?t.defaultFindVisibility:t.defaultFindVisibility===void 0?2:t.defaultFindVisibility(i.element)}}function bW(t,i){i(t),t.children.forEach((t=>bW(t,i)))}class yW{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return he.map(this.tree.onDidChangeFocus,gW)}get onDidChangeSelection(){return he.map(this.tree.onDidChangeSelection,gW)}get onMouseDblClick(){return he.map(this.tree.onMouseDblClick,AW)}get onPointer(){return he.map(this.tree.onPointer,AW)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(t,i,e,s,n,o={}){this.user=t,this.dataSource=n,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new de,this._onDidChangeNodeSlowState=new de,this.nodeMapper=new yj((t=>new dW(t))),this.disposables=new Zi,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=o.autoExpandSingleChildren!==void 0&&o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=t=>o.collapseByDefault?o.collapseByDefault(t)?Aj.PreserveOrCollapsed:Aj.PreserveOrExpanded:void 0,this.tree=this.createTree(t,i,e,s,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=lW({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(t,i,e,s,n){const o=new Sj(e),r=s.map((t=>new fW(t,this.nodeMapper,this._onDidChangeNodeSlowState.event))),h=vW(n)||{};return new oW(t,i,o,r,h)}updateOptions(t={}){this.tree.updateOptions(t)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(t){this.tree.scrollTop=t}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(t,i){this.tree.layout(t,i)}style(t){this.tree.style(t)}getInput(){return this.root.element}async setInput(t,i){this.refreshPromises.forEach((t=>t.cancel())),this.refreshPromises.clear(),this.root.element=t;const e=i&&{viewState:i,focus:[],selection:[]};await this._updateChildren(t,!0,!1,e),e&&(this.tree.setFocus(e.focus),this.tree.setSelection(e.selection)),i&&typeof i.scrollTop=="number"&&(this.scrollTop=i.scrollTop)}async _updateChildren(t=this.root.element,i=!0,e=!1,s,n){if(this.root.element===void 0)throw new bj(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await he.toPromise(this._onDidRender.event));const o=this.getDataNode(t);if(await this.refreshAndRenderNode(o,i,s,n),e)try{this.tree.rerender(o)}catch{}}rerender(t){if(t===void 0||t===this.root.element)return void this.tree.rerender();const i=this.getDataNode(t);this.tree.rerender(i)}getNode(t=this.root.element){const i=this.getDataNode(t),e=this.tree.getNode(i===this.root?null:i);return this.nodeMapper.map(e)}collapse(t,i=!1){const e=this.getDataNode(t);return this.tree.collapse(e===this.root?null:e,i)}async expand(t,i=!1){if(this.root.element===void 0)throw new bj(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await he.toPromise(this._onDidRender.event));const e=this.getDataNode(t);if(this.tree.hasElement(e)&&!this.tree.isCollapsible(e)||(e.refreshPromise&&(await this.root.refreshPromise,await he.toPromise(this._onDidRender.event)),e!==this.root&&!e.refreshPromise&&!this.tree.isCollapsed(e)))return!1;const s=this.tree.expand(e===this.root?null:e,i);return e.refreshPromise&&(await this.root.refreshPromise,await he.toPromise(this._onDidRender.event)),s}setSelection(t,i){const e=t.map((t=>this.getDataNode(t)));this.tree.setSelection(e,i)}getSelection(){return this.tree.getSelection().map((t=>t.element))}setFocus(t,i){const e=t.map((t=>this.getDataNode(t)));this.tree.setFocus(e,i)}getFocus(){return this.tree.getFocus().map((t=>t.element))}reveal(t,i){this.tree.reveal(this.getDataNode(t),i)}getParentElement(t){const i=this.tree.getParentElement(this.getDataNode(t));return i&&i.element}getFirstElementChild(t=this.root.element){const i=this.getDataNode(t),e=this.tree.getFirstElementChild(i===this.root?null:i);return e&&e.element}getDataNode(t){const i=this.nodes.get(t===this.root.element?null:t);if(!i)throw new bj(this.user,`Data tree node not found: ${t}`);return i}async refreshAndRenderNode(t,i,e,s){await this.refreshNode(t,i,e),this.disposables.isDisposed||this.render(t,e,s)}async refreshNode(t,i,e){let s;return this.subTreeRefreshPromises.forEach(((n,o)=>{!s&&function(t,i){return t===i||uW(t,i)||uW(i,t)}(o,t)&&(s=n.then((()=>this.refreshNode(t,i,e))))})),s||(t!==this.root&&this.tree.getNode(t).collapsed?(t.hasChildren=!!this.dataSource.hasChildren(t.element),t.stale=!0,void this.setChildren(t,[],i,e)):this.doRefreshSubTree(t,i,e))}async doRefreshSubTree(t,i,e){let s;t.refreshPromise=new Promise((t=>s=t)),this.subTreeRefreshPromises.set(t,t.refreshPromise),t.refreshPromise.finally((()=>{t.refreshPromise=void 0,this.subTreeRefreshPromises.delete(t)}));try{const s=await this.doRefreshNode(t,i,e);t.stale=!1,await Ir.settled(s.map((t=>this.doRefreshSubTree(t,i,e))))}finally{s()}}async doRefreshNode(t,i,e){let s;if(t.hasChildren=!!this.dataSource.hasChildren(t.element),t.hasChildren){const i=this.doGetChildren(t);if(U(i))s=Promise.resolve(i);else{const e=br(800);e.then((()=>{t.slow=!0,this._onDidChangeNodeSlowState.fire(t)}),(t=>null)),s=i.finally((()=>e.cancel()))}}else s=Promise.resolve(Wt.empty());try{const n=await s;return this.setChildren(t,n,i,e)}catch(i){if(t!==this.root&&this.tree.hasElement(t)&&this.tree.collapse(t),Pi(i))return[];throw i}finally{t.slow&&(t.slow=!1,this._onDidChangeNodeSlowState.fire(t))}}doGetChildren(t){let i=this.refreshPromises.get(t);if(i)return i;const e=this.dataSource.getChildren(t.element);return U(e)?this.processChildren(e):(i=Ar((async()=>this.processChildren(await e))),this.refreshPromises.set(t,i),i.finally((()=>{this.refreshPromises.delete(t)})))}_onDidChangeCollapseState({node:t,deep:i}){t.element!==null&&!t.collapsed&&t.element.stale&&(i?this.collapse(t.element.element):this.refreshAndRenderNode(t.element,!1).catch(Oi))}setChildren(t,i,e,s){const n=[...i];if(t.children.length===0&&n.length===0)return[];const o=new Map,r=new Map;for(const i of t.children)o.set(i.element,i),this.identityProvider&&r.set(i.id,{node:i,collapsed:this.tree.hasElement(i)&&this.tree.isCollapsed(i)});const h=[],c=n.map((i=>{const n=!!this.dataSource.hasChildren(i);if(!this.identityProvider){const e=lW({element:i,parent:t,hasChildren:n,defaultCollapseState:this.getDefaultCollapseState(i)});return n&&e.defaultCollapseState===Aj.PreserveOrExpanded&&h.push(e),e}const c=this.identityProvider.getId(i).toString(),a=r.get(c);if(a){const t=a.node;return o.delete(t.element),this.nodes.delete(t.element),this.nodes.set(i,t),t.element=i,t.hasChildren=n,e?a.collapsed?(t.children.forEach((t=>bW(t,(t=>this.nodes.delete(t.element))))),t.children.splice(0,t.children.length),t.stale=!0):h.push(t):n&&!a.collapsed&&h.push(t),t}const l=lW({element:i,parent:t,id:c,hasChildren:n,defaultCollapseState:this.getDefaultCollapseState(i)});return s&&s.viewState.focus&&s.viewState.focus.indexOf(c)>-1&&s.focus.push(l),s&&s.viewState.selection&&s.viewState.selection.indexOf(c)>-1&&s.selection.push(l),(s&&s.viewState.expanded&&s.viewState.expanded.indexOf(c)>-1||n&&l.defaultCollapseState===Aj.PreserveOrExpanded)&&h.push(l),l}));for(const t of o.values())bW(t,(t=>this.nodes.delete(t.element)));for(const t of c)this.nodes.set(t.element,t);return t.children.splice(0,t.children.length,...c),t!==this.root&&this.autoExpandSingleChildren&&c.length===1&&h.length===0&&(c[0].forceExpanded=!0,h.push(c[0])),h}render(t,i,e){const s=t.children.map((t=>this.asTreeElement(t,i))),n=e&&{...e,diffIdentityProvider:e.diffIdentityProvider&&{getId:t=>e.diffIdentityProvider.getId(t.element)}};this.tree.setChildren(t===this.root?null:t,s,n),t!==this.root&&this.tree.setCollapsible(t,t.hasChildren),this._onDidRender.fire()}asTreeElement(t,i){if(t.stale)return{element:t,collapsible:t.hasChildren,collapsed:!0};let e;return i&&i.viewState.expanded&&t.id&&i.viewState.expanded.indexOf(t.id)>-1?e=!1:t.forceExpanded?(e=!1,t.forceExpanded=!1):e=t.defaultCollapseState,{element:t,children:t.hasChildren?Wt.map(t.children,(t=>this.asTreeElement(t,i))):[],collapsible:t.hasChildren,collapsed:e}}processChildren(t){return this.sorter&&(t=[...t].sort(this.sorter.compare.bind(this.sorter))),t}dispose(){this.disposables.dispose(),this.tree.dispose()}}class kW{get element(){return{elements:this.node.element.elements.map((t=>t.element)),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map((t=>new kW(t)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(t){this.node=t}}class xW{constructor(t,i,e,s){this.renderer=t,this.nodeMapper=i,this.compressibleNodeMapperProvider=e,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=t.templateId}renderTemplate(t){return{templateData:this.renderer.renderTemplate(t)}}renderElement(t,i,e,s){this.renderer.renderElement(this.nodeMapper.map(t),i,e.templateData,s)}renderCompressedElements(t,i,e,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(t),i,e.templateData,s)}renderTwistie(t,i){return t.slow?(i.classList.add(...Ka.asClassNameArray(Fs.treeItemLoading)),!0):(i.classList.remove(...Ka.asClassNameArray(Fs.treeItemLoading)),!1)}disposeElement(t,i,e,s){var n,o;(o=(n=this.renderer).disposeElement)===null||o===void 0||o.call(n,this.nodeMapper.map(t),i,e.templateData,s)}disposeCompressedElements(t,i,e,s){var n,o;(o=(n=this.renderer).disposeCompressedElements)===null||o===void 0||o.call(n,this.compressibleNodeMapperProvider().map(t),i,e.templateData,s)}disposeTemplate(t){this.renderer.disposeTemplate(t.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=$i(this.disposables)}}class CW extends yW{constructor(t,i,e,s,n,o,r={}){super(t,i,e,n,o,r),this.compressionDelegate=s,this.compressibleNodeMapper=new yj((t=>new kW(t))),this.filter=r.filter}createTree(t,i,e,s,n){const o=new Sj(e),r=s.map((t=>new xW(t,this.nodeMapper,(()=>this.compressibleNodeMapper),this._onDidChangeNodeSlowState.event))),h=function(t){const i=t&&vW(t);return i&&{...i,keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&{...i.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel:i=>t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.map((t=>t.element)))}}}(n)||{};return new aW(t,i,o,r,h)}asTreeElement(t,i){return{incompressible:this.compressionDelegate.isIncompressible(t.element),...super.asTreeElement(t,i)}}updateOptions(t={}){this.tree.updateOptions(t)}render(t,i,e){if(!this.identityProvider)return super.render(t,i);const s=t=>this.identityProvider.getId(t).toString(),n=t=>{const i=new Set;for(const e of t){const t=this.tree.getCompressedTreeNode(e===this.root?null:e);if(t.element)for(const e of t.element.elements)i.add(s(e.element))}return i},o=n(this.tree.getSelection()),r=n(this.tree.getFocus());super.render(t,i,e);const h=this.getSelection();let c=!1;const a=this.getFocus();let l=!1;const u=t=>{const i=t.element;if(i)for(let t=0;t<i.elements.length;t++){const e=s(i.elements[t].element),n=i.elements[i.elements.length-1].element;o.has(e)&&h.indexOf(n)===-1&&(h.push(n),c=!0),r.has(e)&&a.indexOf(n)===-1&&(a.push(n),l=!0)}t.children.forEach(u)};u(this.tree.getCompressedTreeNode(t===this.root?null:t)),c&&this.setSelection(h),l&&this.setFocus(a)}processChildren(t){return this.filter&&(t=Wt.filter(t,(t=>{const i=this.filter.filter(t,1),e=typeof(s=i)=="boolean"?s?1:0:kj(s)?xj(s.visibility):xj(s);var s;if(e===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return e===1}))),super.processChildren(t)}}class EW extends Jj{constructor(t,i,e,s,n,o={}){super(t,i,e,s,o),this.user=t,this.dataSource=n,this.identityProvider=o.identityProvider}createModel(t,i,e){return new Gj(t,i,e)}}new Tl("isMac",kt,st(0,"Whether the operating system is macOS")),new Tl("isLinux",xt,st(0,"Whether the operating system is Linux"));const BW=new Tl("isWindows",yt,st(0,"Whether the operating system is Windows")),DW=new Tl("isWeb",Et,st(0,"Whether the platform is a web browser"));new Tl("isMacNative",kt&&!Et,st(0,"Whether the operating system is macOS on a non-browser platform")),new Tl("isIOS",Dt,st(0,"Whether the operating system is iOS")),new Tl("isMobile",Mt,st(0,"Whether the platform is a mobile web browser")),new Tl("isDevelopment",!1,!0),new Tl("productQualityType","",st(0,"Quality type of VS Code"));const MW="inputFocus",SW=new Tl(MW,!1,st(0,"Whether keyboard focus is inside an input box"));var FW=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},IW=function(t,i){return function(e,s){i(e,s,t)}};const LW=za("listService"),RW=new Tl("listScrollAtBoundary","none");gl.or(RW.isEqualTo("top"),RW.isEqualTo("both")),gl.or(RW.isEqualTo("bottom"),RW.isEqualTo("both"));const TW=new Tl("listFocus",!0),NW=new Tl("treestickyScrollFocused",!1),QW=new Tl("listSupportsMultiselect",!0),OW=gl.and(TW,gl.not(MW),NW.negate()),zW=new Tl("listHasSelectionOrFocus",!1),UW=new Tl("listDoubleSelection",!1),HW=new Tl("listMultiSelection",!1),PW=new Tl("listSelectionNavigation",!1),jW=new Tl("listSupportsFind",!0),WW=new Tl("treeElementCanCollapse",!1),YW=new Tl("treeElementHasParent",!1),_W=new Tl("treeElementCanExpand",!1),VW=new Tl("treeElementHasChild",!1),JW=new Tl("treeFindOpen",!1),GW="listTypeNavigationMode",KW="listAutomaticKeyboardNavigation";function $W(t,i){const e=t.createScoped(i.getHTMLElement());return TW.bindTo(e),e}function XW(t,i){const e=RW.bindTo(t),s=()=>{const t=i.scrollTop===0,s=i.scrollHeight-i.renderHeight-i.scrollTop<1;t&&s?e.set("both"):t?e.set("top"):s?e.set("bottom"):e.set("none")};return s(),i.onDidScroll(s)}const qW="workbench.list.multiSelectModifier",ZW="workbench.list.openMode",tY="workbench.list.horizontalScrolling",iY="workbench.list.defaultFindMode",eY="workbench.list.typeNavigationMode",sY="workbench.list.keyboardNavigation",nY="workbench.list.scrollByPage",oY="workbench.list.defaultFindMatchType",rY="workbench.tree.indent",hY="workbench.tree.renderIndentGuides",cY="workbench.list.smoothScrolling",aY="workbench.list.mouseWheelScrollSensitivity",lY="workbench.list.fastScrollSensitivity",uY="workbench.tree.expandMode",dY="workbench.tree.enableStickyScroll",fY="workbench.tree.stickyScrollMaxItemCount";function gY(t){return t.getValue(qW)==="alt"}class AY extends te{constructor(t){super(),this.configurationService=t,this.useAltAsMultipleSelectionModifier=gY(t),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((t=>{t.affectsConfiguration(qW)&&(this.useAltAsMultipleSelectionModifier=gY(this.configurationService))})))}isSelectionSingleChangeEvent(t){return this.useAltAsMultipleSelectionModifier?t.browserEvent.altKey:LU(t)}isSelectionRangeChangeEvent(t){return RU(t)}}function pY(t,i){var e;const s=t.get(Id),n=t.get(Hx),o=new Zi;return[{...i,keyboardNavigationDelegate:{mightProducePrintableCharacter:t=>n.mightProducePrintableCharacter(t)},smoothScrolling:!!s.getValue(cY),mouseWheelScrollSensitivity:s.getValue(aY),fastScrollSensitivity:s.getValue(lY),multipleSelectionController:(e=i.multipleSelectionController)!==null&&e!==void 0?e:o.add(new AY(s)),keyboardNavigationEventFilter:CY(n),scrollByPage:!!s.getValue(nY)},o]}let wY=class extends YU{constructor(t,i,e,s,n,o,r,h,c){const a=n.horizontalScrolling!==void 0?n.horizontalScrolling:!!h.getValue(tY),[l,u]=c.invokeFunction(pY,n);super(t,i,e,s,{keyboardSupport:!1,...l,horizontalScrolling:a}),this.disposables.add(u),this.contextKeyService=$W(o,this),this.disposables.add(XW(this.contextKeyService,this)),this.listSupportsMultiSelect=QW.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(n.multipleSelectionSupport!==!1),PW.bindTo(this.contextKeyService).set(!!n.selectionNavigation),this.listHasSelectionOrFocus=zW.bindTo(this.contextKeyService),this.listDoubleSelection=UW.bindTo(this.contextKeyService),this.listMultiSelection=HW.bindTo(this.contextKeyService),this.horizontalScrolling=n.horizontalScrolling,this._useAltAsMultipleSelectionModifier=gY(h),this.disposables.add(this.contextKeyService),this.disposables.add(r.register(this)),this.updateStyles(n.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const t=this.getSelection(),i=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(t.length>0||i.length>0),this.listMultiSelection.set(t.length>1),this.listDoubleSelection.set(t.length===2)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const t=this.getSelection(),i=this.getFocus();this.listHasSelectionOrFocus.set(t.length>0||i.length>0)}))),this.disposables.add(h.onDidChangeConfiguration((t=>{t.affectsConfiguration(qW)&&(this._useAltAsMultipleSelectionModifier=gY(h));let i={};if(t.affectsConfiguration(tY)&&this.horizontalScrolling===void 0){const t=!!h.getValue(tY);i={...i,horizontalScrolling:t}}if(t.affectsConfiguration(nY)){const t=!!h.getValue(nY);i={...i,scrollByPage:t}}if(t.affectsConfiguration(cY)){const t=!!h.getValue(cY);i={...i,smoothScrolling:t}}if(t.affectsConfiguration(aY)){const t=h.getValue(aY);i={...i,mouseWheelScrollSensitivity:t}}if(t.affectsConfiguration(lY)){const t=h.getValue(lY);i={...i,fastScrollSensitivity:t}}Object.keys(i).length>0&&this.updateOptions(i)}))),this.navigator=new yY(this,{configurationService:h,...n}),this.disposables.add(this.navigator)}updateOptions(t){super.updateOptions(t),t.overrideStyles!==void 0&&this.updateStyles(t.overrideStyles),t.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!t.multipleSelectionSupport)}updateStyles(t){this.style(t?vH(t):mH)}};wY=FW([IW(5,Nl),IW(6,LW),IW(7,Id),IW(8,Oa)],wY);let mY=class extends QP{constructor(t,i,e,s,n,o,r,h,c){const a=n.horizontalScrolling!==void 0?n.horizontalScrolling:!!h.getValue(tY),[l,u]=c.invokeFunction(pY,n);super(t,i,e,s,{keyboardSupport:!1,...l,horizontalScrolling:a}),this.disposables=new Zi,this.disposables.add(u),this.contextKeyService=$W(o,this),this.disposables.add(XW(this.contextKeyService,this.widget)),this.horizontalScrolling=n.horizontalScrolling,this.listSupportsMultiSelect=QW.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(n.multipleSelectionSupport!==!1),PW.bindTo(this.contextKeyService).set(!!n.selectionNavigation),this._useAltAsMultipleSelectionModifier=gY(h),this.disposables.add(this.contextKeyService),this.disposables.add(r.register(this)),this.updateStyles(n.overrideStyles),this.disposables.add(h.onDidChangeConfiguration((t=>{t.affectsConfiguration(qW)&&(this._useAltAsMultipleSelectionModifier=gY(h));let i={};if(t.affectsConfiguration(tY)&&this.horizontalScrolling===void 0){const t=!!h.getValue(tY);i={...i,horizontalScrolling:t}}if(t.affectsConfiguration(nY)){const t=!!h.getValue(nY);i={...i,scrollByPage:t}}if(t.affectsConfiguration(cY)){const t=!!h.getValue(cY);i={...i,smoothScrolling:t}}if(t.affectsConfiguration(aY)){const t=h.getValue(aY);i={...i,mouseWheelScrollSensitivity:t}}if(t.affectsConfiguration(lY)){const t=h.getValue(lY);i={...i,fastScrollSensitivity:t}}Object.keys(i).length>0&&this.updateOptions(i)}))),this.navigator=new yY(this,{configurationService:h,...n}),this.disposables.add(this.navigator)}updateOptions(t){super.updateOptions(t),t.overrideStyles!==void 0&&this.updateStyles(t.overrideStyles),t.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!t.multipleSelectionSupport)}updateStyles(t){this.style(t?vH(t):mH)}dispose(){this.disposables.dispose(),super.dispose()}};mY=FW([IW(5,Nl),IW(6,LW),IW(7,Id),IW(8,Oa)],mY);let vY=class extends ij{constructor(t,i,e,s,n,o,r,h,c,a){const l=o.horizontalScrolling!==void 0?o.horizontalScrolling:!!c.getValue(tY),[u,d]=a.invokeFunction(pY,o);super(t,i,e,s,n,{keyboardSupport:!1,...u,horizontalScrolling:l}),this.disposables.add(d),this.contextKeyService=$W(r,this),this.disposables.add(XW(this.contextKeyService,this)),this.listSupportsMultiSelect=QW.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),PW.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=zW.bindTo(this.contextKeyService),this.listDoubleSelection=UW.bindTo(this.contextKeyService),this.listMultiSelection=HW.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=gY(c),this.disposables.add(this.contextKeyService),this.disposables.add(h.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const t=this.getSelection(),i=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(t.length>0||i.length>0),this.listMultiSelection.set(t.length>1),this.listDoubleSelection.set(t.length===2)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const t=this.getSelection(),i=this.getFocus();this.listHasSelectionOrFocus.set(t.length>0||i.length>0)}))),this.disposables.add(c.onDidChangeConfiguration((t=>{t.affectsConfiguration(qW)&&(this._useAltAsMultipleSelectionModifier=gY(c));let i={};if(t.affectsConfiguration(tY)&&this.horizontalScrolling===void 0){const t=!!c.getValue(tY);i={...i,horizontalScrolling:t}}if(t.affectsConfiguration(nY)){const t=!!c.getValue(nY);i={...i,scrollByPage:t}}if(t.affectsConfiguration(cY)){const t=!!c.getValue(cY);i={...i,smoothScrolling:t}}if(t.affectsConfiguration(aY)){const t=c.getValue(aY);i={...i,mouseWheelScrollSensitivity:t}}if(t.affectsConfiguration(lY)){const t=c.getValue(lY);i={...i,fastScrollSensitivity:t}}Object.keys(i).length>0&&this.updateOptions(i)}))),this.navigator=new kY(this,{configurationService:c,...o}),this.disposables.add(this.navigator)}updateOptions(t){super.updateOptions(t),t.overrideStyles!==void 0&&this.updateStyles(t.overrideStyles),t.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!t.multipleSelectionSupport)}updateStyles(t){this.style(t?vH(t):mH)}dispose(){this.disposables.dispose(),super.dispose()}};vY=FW([IW(6,Nl),IW(7,LW),IW(8,Id),IW(9,Oa)],vY);class bY extends te{constructor(t,i){var e;super(),this.widget=t,this._onDidOpen=this._register(new de),this.onDidOpen=this._onDidOpen.event,this._register(he.filter(this.widget.onDidChangeSelection,(t=>Kc(t.browserEvent)))((t=>this.onSelectionFromKeyboard(t)))),this._register(this.widget.onPointer((t=>this.onPointer(t.element,t.browserEvent)))),this._register(this.widget.onMouseDblClick((t=>this.onMouseDblClick(t.element,t.browserEvent)))),typeof(i==null?void 0:i.openOnSingleClick)!="boolean"&&(i!=null&&i.configurationService)?(this.openOnSingleClick=(i==null?void 0:i.configurationService.getValue(ZW))!=="doubleClick",this._register(i==null?void 0:i.configurationService.onDidChangeConfiguration((t=>{t.affectsConfiguration(ZW)&&(this.openOnSingleClick=(i==null?void 0:i.configurationService.getValue(ZW))!=="doubleClick")})))):this.openOnSingleClick=(e=i==null?void 0:i.openOnSingleClick)===null||e===void 0||e}onSelectionFromKeyboard(t){if(t.elements.length!==1)return;const i=t.browserEvent,e=typeof i.preserveFocus!="boolean"||i.preserveFocus,s=typeof i.pinned=="boolean"?i.pinned:!e;this._open(this.getSelectedElement(),e,s,!1,t.browserEvent)}onPointer(t,i){if(!this.openOnSingleClick||i.detail===2)return;const e=i.button===1,s=i.ctrlKey||i.metaKey||i.altKey;this._open(t,!0,e,s,i)}onMouseDblClick(t,i){if(!i)return;const e=i.target;if(e.classList.contains("monaco-tl-twistie")||e.classList.contains("monaco-icon-label")&&e.classList.contains("folder-icon")&&i.offsetX<16)return;const s=i.ctrlKey||i.metaKey||i.altKey;this._open(t,!1,!0,s,i)}_open(t,i,e,s,n){t&&this._onDidOpen.fire({editorOptions:{preserveFocus:i,pinned:e,revealIfVisible:!0},sideBySide:s,element:t,browserEvent:n})}}class yY extends bY{constructor(t,i){super(t,i),this.widget=t}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class kY extends bY{constructor(t,i){super(t,i)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class xY extends bY{constructor(t,i){super(t,i)}getSelectedElement(){var t;return(t=this.widget.getSelection()[0])!==null&&t!==void 0?t:void 0}}function CY(t){let i=!1;return e=>{if(e.toKeyCodeChord().isModifierKey())return!1;if(i)return i=!1,!1;const s=t.softDispatch(e,e.target);return s.kind===1?(i=!0,!1):(i=!1,s.kind===0)}}let EY=class extends oW{constructor(t,i,e,s,n,o,r,h,c){const{options:a,getTypeNavigationMode:l,disposable:u}=o.invokeFunction(LY,n);super(t,i,e,s,a),this.disposables.add(u),this.internals=new RY(this,n,l,n.overrideStyles,r,h,c),this.disposables.add(this.internals)}updateOptions(t){super.updateOptions(t),this.internals.updateOptions(t)}};EY=FW([IW(5,Oa),IW(6,Nl),IW(7,LW),IW(8,Id)],EY);let BY=class extends aW{constructor(t,i,e,s,n,o,r,h,c){const{options:a,getTypeNavigationMode:l,disposable:u}=o.invokeFunction(LY,n);super(t,i,e,s,a),this.disposables.add(u),this.internals=new RY(this,n,l,n.overrideStyles,r,h,c),this.disposables.add(this.internals)}updateOptions(t={}){super.updateOptions(t),t.overrideStyles&&this.internals.updateStyleOverrides(t.overrideStyles),this.internals.updateOptions(t)}};BY=FW([IW(5,Oa),IW(6,Nl),IW(7,LW),IW(8,Id)],BY);let DY=class extends EW{constructor(t,i,e,s,n,o,r,h,c,a){const{options:l,getTypeNavigationMode:u,disposable:d}=r.invokeFunction(LY,o);super(t,i,e,s,n,l),this.disposables.add(d),this.internals=new RY(this,o,u,o.overrideStyles,h,c,a),this.disposables.add(this.internals)}updateOptions(t={}){super.updateOptions(t),t.overrideStyles!==void 0&&this.internals.updateStyleOverrides(t.overrideStyles),this.internals.updateOptions(t)}};DY=FW([IW(6,Oa),IW(7,Nl),IW(8,LW),IW(9,Id)],DY);let MY=class extends yW{get onDidOpen(){return this.internals.onDidOpen}constructor(t,i,e,s,n,o,r,h,c,a){const{options:l,getTypeNavigationMode:u,disposable:d}=r.invokeFunction(LY,o);super(t,i,e,s,n,l),this.disposables.add(d),this.internals=new RY(this,o,u,o.overrideStyles,h,c,a),this.disposables.add(this.internals)}updateOptions(t={}){super.updateOptions(t),t.overrideStyles&&this.internals.updateStyleOverrides(t.overrideStyles),this.internals.updateOptions(t)}};MY=FW([IW(6,Oa),IW(7,Nl),IW(8,LW),IW(9,Id)],MY);let SY=class extends CW{constructor(t,i,e,s,n,o,r,h,c,a,l){const{options:u,getTypeNavigationMode:d,disposable:f}=h.invokeFunction(LY,r);super(t,i,e,s,n,o,u),this.disposables.add(f),this.internals=new RY(this,r,d,r.overrideStyles,c,a,l),this.disposables.add(this.internals)}updateOptions(t){super.updateOptions(t),this.internals.updateOptions(t)}};function FY(t){const i=t.getValue(iY);if(i==="highlight")return mj.Highlight;if(i==="filter")return mj.Filter;const e=t.getValue(sY);return e==="simple"||e==="highlight"?mj.Highlight:e==="filter"?mj.Filter:void 0}function IY(t){const i=t.getValue(oY);return i==="fuzzy"?vj.Fuzzy:i==="contiguous"?vj.Contiguous:void 0}function LY(t,i){var e;const s=t.get(Id),n=t.get(cT),o=t.get(Nl),r=t.get(Oa),h=i.horizontalScrolling!==void 0?i.horizontalScrolling:!!s.getValue(tY),[c,a]=r.invokeFunction(pY,i),l=i.paddingBottom,u=i.renderIndentGuides!==void 0?i.renderIndentGuides:s.getValue(hY);return{getTypeNavigationMode:()=>{const t=o.getContextKeyValue(GW);if(t==="automatic")return DU.Automatic;if(t==="trigger"||o.getContextKeyValue(KW)===!1)return DU.Trigger;const i=s.getValue(eY);return i==="automatic"?DU.Automatic:i==="trigger"?DU.Trigger:void 0},disposable:a,options:{keyboardSupport:!1,...c,indent:typeof s.getValue(rY)=="number"?s.getValue(rY):void 0,renderIndentGuides:u,smoothScrolling:!!s.getValue(cY),defaultFindMode:FY(s),defaultFindMatchType:IY(s),horizontalScrolling:h,scrollByPage:!!s.getValue(nY),paddingBottom:l,hideTwistiesOfChildlessElements:i.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(e=i.expandOnlyOnTwistieClick)!==null&&e!==void 0?e:s.getValue(uY)==="doubleClick",contextViewProvider:n,findWidgetStyles:pH,enableStickyScroll:!!s.getValue(dY),stickyScrollMaxItemCount:Number(s.getValue(fY))}}}SY=FW([IW(7,Oa),IW(8,Nl),IW(9,LW),IW(10,Id)],SY);let RY=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(t,i,e,s,n,o,r){var h;this.tree=t,this.disposables=[],this.contextKeyService=$W(n,t),this.disposables.push(XW(this.contextKeyService,t)),this.listSupportsMultiSelect=QW.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(i.multipleSelectionSupport!==!1),PW.bindTo(this.contextKeyService).set(!!i.selectionNavigation),this.listSupportFindWidget=jW.bindTo(this.contextKeyService),this.listSupportFindWidget.set((h=i.findWidgetEnabled)===null||h===void 0||h),this.hasSelectionOrFocus=zW.bindTo(this.contextKeyService),this.hasDoubleSelection=UW.bindTo(this.contextKeyService),this.hasMultiSelection=HW.bindTo(this.contextKeyService),this.treeElementCanCollapse=WW.bindTo(this.contextKeyService),this.treeElementHasParent=YW.bindTo(this.contextKeyService),this.treeElementCanExpand=_W.bindTo(this.contextKeyService),this.treeElementHasChild=VW.bindTo(this.contextKeyService),this.treeFindOpen=JW.bindTo(this.contextKeyService),this.treeStickyScrollFocused=NW.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=gY(r),this.updateStyleOverrides(s);const c=()=>{const i=t.getFocus()[0];if(!i)return;const e=t.getNode(i);this.treeElementCanCollapse.set(e.collapsible&&!e.collapsed),this.treeElementHasParent.set(!!t.getParentElement(i)),this.treeElementCanExpand.set(e.collapsible&&e.collapsed),this.treeElementHasChild.set(!!t.getFirstElementChild(i))},a=new Set;a.add(GW),a.add(KW),this.disposables.push(this.contextKeyService,o.register(t),t.onDidChangeSelection((()=>{const i=t.getSelection(),e=t.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.hasSelectionOrFocus.set(i.length>0||e.length>0),this.hasMultiSelection.set(i.length>1),this.hasDoubleSelection.set(i.length===2)}))})),t.onDidChangeFocus((()=>{const i=t.getSelection(),e=t.getFocus();this.hasSelectionOrFocus.set(i.length>0||e.length>0),c()})),t.onDidChangeCollapseState(c),t.onDidChangeModel(c),t.onDidChangeFindOpenState((t=>this.treeFindOpen.set(t))),t.onDidChangeStickyScrollFocused((t=>this.treeStickyScrollFocused.set(t))),r.onDidChangeConfiguration((s=>{let n={};if(s.affectsConfiguration(qW)&&(this._useAltAsMultipleSelectionModifier=gY(r)),s.affectsConfiguration(rY)){const t=r.getValue(rY);n={...n,indent:t}}if(s.affectsConfiguration(hY)&&i.renderIndentGuides===void 0){const t=r.getValue(hY);n={...n,renderIndentGuides:t}}if(s.affectsConfiguration(cY)){const t=!!r.getValue(cY);n={...n,smoothScrolling:t}}if(s.affectsConfiguration(iY)||s.affectsConfiguration(sY)){const t=FY(r);n={...n,defaultFindMode:t}}if(s.affectsConfiguration(eY)||s.affectsConfiguration(sY)){const t=e();n={...n,typeNavigationMode:t}}if(s.affectsConfiguration(oY)){const t=IY(r);n={...n,defaultFindMatchType:t}}if(s.affectsConfiguration(tY)&&i.horizontalScrolling===void 0){const t=!!r.getValue(tY);n={...n,horizontalScrolling:t}}if(s.affectsConfiguration(nY)){const t=!!r.getValue(nY);n={...n,scrollByPage:t}}if(s.affectsConfiguration(uY)&&i.expandOnlyOnTwistieClick===void 0&&(n={...n,expandOnlyOnTwistieClick:r.getValue(uY)==="doubleClick"}),s.affectsConfiguration(dY)){const t=r.getValue(dY);n={...n,enableStickyScroll:t}}if(s.affectsConfiguration(fY)){const t=Math.max(1,r.getValue(fY));n={...n,stickyScrollMaxItemCount:t}}if(s.affectsConfiguration(aY)){const t=r.getValue(aY);n={...n,mouseWheelScrollSensitivity:t}}if(s.affectsConfiguration(lY)){const t=r.getValue(lY);n={...n,fastScrollSensitivity:t}}Object.keys(n).length>0&&t.updateOptions(n)})),this.contextKeyService.onDidChangeContext((i=>{i.affectsSome(a)&&t.updateOptions({typeNavigationMode:e()})}))),this.navigator=new xY(t,{configurationService:r,...i}),this.disposables.push(this.navigator)}updateOptions(t){t.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!t.multipleSelectionSupport)}updateStyleOverrides(t){this.tree.style(t?vH(t):mH)}dispose(){this.disposables=$i(this.disposables)}};RY=FW([IW(4,Nl),IW(5,LW),IW(6,Id)],RY);Vl.as(_d).registerConfiguration({id:"workbench",order:7,title:st(0,"Workbench"),type:"object",properties:{[qW]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[st(0,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),st(0,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:st(0,"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[ZW]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:st(0,"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[tY]:{type:"boolean",default:!1,description:st(0,"Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[nY]:{type:"boolean",default:!1,description:st(0,"Controls whether clicks in the scrollbar scroll page by page.")},[rY]:{type:"number",default:8,minimum:4,maximum:40,description:st(0,"Controls tree indentation in pixels.")},[hY]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:st(0,"Controls whether the tree should render indent guides.")},[cY]:{type:"boolean",default:!1,description:st(0,"Controls whether lists and trees have smooth scrolling.")},[aY]:{type:"number",default:1,markdownDescription:st(0,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[lY]:{type:"number",default:5,markdownDescription:st(0,"Scrolling speed multiplier when pressing `Alt`.")},[iY]:{type:"string",enum:["highlight","filter"],enumDescriptions:[st(0,"Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),st(0,"Filter elements when searching.")],default:"highlight",description:st(0,"Controls the default find mode for lists and trees in the workbench.")},[sY]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[st(0,"Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),st(0,"Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),st(0,"Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:st(0,"Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:st(0,"Please use 'workbench.list.defaultFindMode' and\t'workbench.list.typeNavigationMode' instead.")},[oY]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[st(0,"Use fuzzy matching when searching."),st(0,"Use contiguous matching when searching.")],default:"fuzzy",description:st(0,"Controls the type of matching used when searching lists and trees in the workbench.")},[uY]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:st(0,"Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[dY]:{type:"boolean",default:!0,description:st(0,"Controls whether sticky scrolling is enabled in trees.")},[fY]:{type:"number",minimum:1,default:7,markdownDescription:st(0,"Controls the number of sticky elements displayed in the tree when `#workbench.tree.enableStickyScroll#` is enabled.")},[eY]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:st(0,"Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class TY extends te{constructor(t,i){var e;super(),this.options=i,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(e=i==null?void 0:i.supportIcons)!==null&&e!==void 0&&e,this.domNode=ia(t,ha("span.monaco-highlighted-label"))}get element(){return this.domNode}set(t,i=[],e="",s){t||(t=""),s&&(t=TY.escapeNewLines(t,i)),this.didEverRender&&this.text===t&&this.title===e&&Z(this.highlights,i)||(this.text=t,this.title=e,this.highlights=i,this.render())}render(){var t,i,e,s;const n=[];let o=0;for(const t of this.highlights){if(t.end===t.start)continue;if(o<t.start){const i=this.text.substring(o,t.start);this.supportIcons?n.push(...kT(i)):n.push(i),o=t.start}const i=this.text.substring(o,t.end),e=ha("span.highlight",void 0,...this.supportIcons?kT(i):[i]);t.extraClasses&&e.classList.add(...t.extraClasses),n.push(e),o=t.end}if(o<this.text.length){const t=this.text.substring(o);this.supportIcons?n.push(...kT(t)):n.push(t)}if(sa(this.domNode,...n),(i=(t=this.options)===null||t===void 0?void 0:t.hoverDelegate)===null||i===void 0?void 0:i.showNativeHover)this.domNode.title=this.title;else if(this.customHover||this.title==="")this.customHover&&this.customHover.update(this.title);else{const t=(s=(e=this.options)===null||e===void 0?void 0:e.hoverDelegate)!==null&&s!==void 0?s:az("mouse");this.customHover=this._register(fz(t,this.domNode,this.title))}this.didEverRender=!0}static escapeNewLines(t,i){let e=0,s=0;return t.replace(/\r\n|\r|\n/g,((t,n)=>{s=t===`\r\n`?-1:0,n+=e;for(const t of i)t.end<=n||(t.start>=n&&(t.start+=s),t.end>=n&&(t.end+=s));return e+=s,"⏎"}))}}class NY{constructor(t){this._element=t}get element(){return this._element}set textContent(t){this.disposed||t===this._textContent||(this._textContent=t,this._element.textContent=t)}set className(t){this.disposed||t===this._className||(this._className=t,this._element.className=t)}set empty(t){this.disposed||t===this._empty||(this._empty=t,this._element.style.marginLeft=t?"0":"")}dispose(){this.disposed=!0}}class QY extends te{constructor(t,i){var e;super(),this.customHovers=new Map,this.creationOptions=i,this.domNode=this._register(new NY(ia(t,ha(".monaco-icon-label")))),this.labelContainer=ia(this.domNode.element,ha(".monaco-icon-label-container")),this.nameContainer=ia(this.labelContainer,ha("span.monaco-icon-name-container")),i!=null&&i.supportHighlights||i!=null&&i.supportIcons?this.nameNode=this._register(new zY(this.nameContainer,!!i.supportIcons)):this.nameNode=new OY(this.nameContainer),this.hoverDelegate=(e=i==null?void 0:i.hoverDelegate)!==null&&e!==void 0?e:az("mouse")}get element(){return this.domNode.element}setLabel(t,i,e){var s;const n=["monaco-icon-label"],o=["monaco-icon-label-container"];let r="";if(e&&(e.extraClasses&&n.push(...e.extraClasses),e.italic&&n.push("italic"),e.strikethrough&&n.push("strikethrough"),e.disabledCommand&&o.push("disabled"),e.title&&(typeof e.title=="string"?r+=e.title:r+=t)),this.domNode.className=n.join(" "),this.domNode.element.setAttribute("aria-label",r),this.labelContainer.className=o.join(" "),this.setupHover(e!=null&&e.descriptionTitle?this.labelContainer:this.element,e==null?void 0:e.title),this.nameNode.setLabel(t,e),i||this.descriptionNode){const t=this.getOrCreateDescriptionNode();t instanceof TY?(t.set(i||"",e?e.descriptionMatches:void 0,void 0,e==null?void 0:e.labelEscapeNewLines),this.setupHover(t.element,e==null?void 0:e.descriptionTitle)):(t.textContent=i&&(e!=null&&e.labelEscapeNewLines)?TY.escapeNewLines(i,[]):i||"",this.setupHover(t.element,(e==null?void 0:e.descriptionTitle)||""),t.empty=!i)}(e!=null&&e.suffix||this.suffixNode)&&(this.getOrCreateSuffixNode().textContent=(s=e==null?void 0:e.suffix)!==null&&s!==void 0?s:"")}setupHover(t,i){const e=this.customHovers.get(t);if(e&&(e.dispose(),this.customHovers.delete(t)),i)if(this.hoverDelegate.showNativeHover)(function(t,i){N(i)?t.title=SN(i):i!=null&&i.markdownNotSupportedFallback?t.title=i.markdownNotSupportedFallback:t.removeAttribute("title")})(t,i);else{const e=fz(this.hoverDelegate,t,i);e&&this.customHovers.set(t,e)}else t.removeAttribute("title")}dispose(){super.dispose();for(const t of this.customHovers.values())t.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new NY((t=this.nameContainer,i=ha("span.monaco-icon-suffix-container"),t.after(i),i)));this.suffixNode=this._register(new NY(ia(e.element,ha("span.label-suffix"))))}var t,i;return this.suffixNode}getOrCreateDescriptionNode(){var t;if(!this.descriptionNode){const i=this._register(new NY(ia(this.labelContainer,ha("span.monaco-icon-description-container"))));!((t=this.creationOptions)===null||t===void 0)&&t.supportDescriptionHighlights?this.descriptionNode=this._register(new TY(ia(i.element,ha("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new NY(ia(i.element,ha("span.label-description"))))}return this.descriptionNode}}class OY{constructor(t){this.container=t,this.label=void 0,this.singleLabel=void 0}setLabel(t,i){if(this.label!==t||!Z(this.options,i))if(this.label=t,this.options=i,typeof t=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=ia(this.container,ha("a.label-name",{id:i==null?void 0:i.domId}))),this.singleLabel.textContent=t;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let e=0;e<t.length;e++){const s=t[e],n=(i==null?void 0:i.domId)&&`${i==null?void 0:i.domId}_${e}`;ia(this.container,ha("a.label-name",{id:n,"data-icon-label-count":t.length,"data-icon-label-index":e,role:"treeitem"},s)),e<t.length-1&&ia(this.container,ha("span.label-separator",void 0,(i==null?void 0:i.separator)||"/"))}}}}class zY extends te{constructor(t,i){super(),this.container=t,this.supportIcons=i,this.label=void 0,this.singleLabel=void 0}setLabel(t,i){if(this.label!==t||!Z(this.options,i))if(this.label=t,this.options=i,typeof t=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new TY(ia(this.container,ha("a.label-name",{id:i==null?void 0:i.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(t,i==null?void 0:i.matches,void 0,i==null?void 0:i.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const e=(i==null?void 0:i.separator)||"/",s=function(t,i,e){if(!e)return;let s=0;return t.map((t=>{const n={start:s,end:s+t.length},o=e.map((t=>EQ.intersect(n,t))).filter((t=>!EQ.isEmpty(t))).map((({start:t,end:i})=>({start:t-s,end:i-s})));return s=n.end+i.length,o}))}(t,e,i==null?void 0:i.matches);for(let n=0;n<t.length;n++){const o=t[n],r=s?s[n]:void 0,h=ha("a.label-name",{id:(i==null?void 0:i.domId)&&`${i==null?void 0:i.domId}_${n}`,"data-icon-label-count":t.length,"data-icon-label-index":n,role:"treeitem"});this._register(new TY(ia(this.container,h),{supportIcons:this.supportIcons})).set(o,r,void 0,i==null?void 0:i.labelEscapeNewLines),n<t.length-1&&ia(h,ha("span.label-separator",void 0,e))}}}}const UY=ha,HY={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class PY extends te{constructor(t,i,e){super(),this.os=i,this.keyElements=new Set,this.options=e||Object.create(null);const s=this.options.keybindingLabelForeground;this.domNode=ia(t,UY(".monaco-keybinding")),s&&(this.domNode.style.color=s),this.hover=this._register(fz(az("mouse"),this.domNode,"")),this.didEverRender=!1,t.appendChild(this.domNode)}get element(){return this.domNode}set(t,i){this.didEverRender&&this.keybinding===t&&PY.areSame(this.matches,i)||(this.keybinding=t,this.matches=i,this.render())}render(){var t;if(this.clear(),this.keybinding){const i=this.keybinding.getChords();i[0]&&this.renderChord(this.domNode,i[0],this.matches?this.matches.firstPart:null);for(let t=1;t<i.length;t++)ia(this.domNode,UY("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,i[t],this.matches?this.matches.chordPart:null);const e=(t=this.options.disableTitle)!==null&&t!==void 0&&t?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(e),this.domNode.setAttribute("aria-label",e||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){nc(this.domNode),this.keyElements.clear()}renderChord(t,i,e){const s=fO.modifierLabels[this.os];i.ctrlKey&&this.renderKey(t,s.ctrlKey,!!(e!=null&&e.ctrlKey),s.separator),i.shiftKey&&this.renderKey(t,s.shiftKey,!!(e!=null&&e.shiftKey),s.separator),i.altKey&&this.renderKey(t,s.altKey,!!(e!=null&&e.altKey),s.separator),i.metaKey&&this.renderKey(t,s.metaKey,!!(e!=null&&e.metaKey),s.separator);const n=i.keyLabel;n&&this.renderKey(t,n,!!(e!=null&&e.keyCode),"")}renderKey(t,i,e,s){ia(t,this.createKeyElement(i,e?".highlight":"")),s&&ia(t,UY("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(t){ia(t,this.createKeyElement(st(0,"Unbound")))}createKeyElement(t,i=""){const e=UY("span.monaco-keybinding-key"+i,void 0,t);return this.keyElements.add(e),this.options.keybindingLabelBackground&&(e.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(e.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(e.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(e.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),e}static areSame(t,i){return t===i||!t&&!i||!!t&&!!i&&Z(t.firstPart,i.firstPart)&&Z(t.chordPart,i.chordPart)}}const jY=new _n((()=>{const t=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:t,collatorIsNumeric:t.resolvedOptions().numeric}}));function WY(t,i,e){const s=t.toLowerCase(),n=i.toLowerCase(),o=function(t,i,e){const s=t.toLowerCase(),n=i.toLowerCase(),o=s.startsWith(e),r=n.startsWith(e);if(o!==r)return o?-1:1;if(o&&r){if(s.length<n.length)return-1;if(s.length>n.length)return 1}return 0}(t,i,e);if(o)return o;const r=s.endsWith(e);if(r!==n.endsWith(e))return r?-1:1;const h=function(t,i,e=!1){const s=t||"",n=i||"",o=jY.value.collator.compare(s,n);return jY.value.collatorIsNumeric&&o===0&&s!==n?s<n?-1:1:o}(s,n);return h!==0?h:s.localeCompare(n)}var YY,_Y=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},VY=function(t,i){return function(e,s){i(e,s,t)}};const JY=ha;var GY,KY;(function(t){t[t.First=1]="First",t[t.Second=2]="Second",t[t.Last=3]="Last",t[t.Next=4]="Next",t[t.Previous=5]="Previous",t[t.NextPage=6]="NextPage",t[t.PreviousPage=7]="PreviousPage",t[t.NextSeparator=8]="NextSeparator",t[t.PreviousSeparator=9]="PreviousSeparator"})(GY||(GY={}));class $Y{constructor(t,i,e){this.index=t,this.hasCheckbox=i,this._hidden=!1,this._init=new _n((()=>{var t;const i=(t=e.label)!==null&&t!==void 0?t:"",s=IN(i).text.trim(),n=e.ariaLabel||[i,this.saneDescription,this.saneDetail].map((t=>function(t){return t?t.replace(/\$\((.*?)\)/g,((t,i)=>` ${i} `)).trim():""}(t))).filter((t=>!!t)).join(", ");return{saneLabel:i,saneSortLabel:s,saneAriaLabel:n}})),this._saneDescription=e.description,this._saneTooltip=e.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(t){this._element=t}get hidden(){return this._hidden}set hidden(t){this._hidden=t}get saneDescription(){return this._saneDescription}set saneDescription(t){this._saneDescription=t}get saneDetail(){return this._saneDetail}set saneDetail(t){this._saneDetail=t}get saneTooltip(){return this._saneTooltip}set saneTooltip(t){this._saneTooltip=t}get labelHighlights(){return this._labelHighlights}set labelHighlights(t){this._labelHighlights=t}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(t){this._descriptionHighlights=t}get detailHighlights(){return this._detailHighlights}set detailHighlights(t){this._detailHighlights=t}}class XY extends $Y{constructor(t,i,e,s,n,o){var r,h,c;super(t,i,n),this.fireButtonTriggered=e,this._onChecked=s,this.item=n,this._separator=o,this._checked=!1,this.onChecked=i?he.map(he.filter(this._onChecked.event,(t=>t.element===this)),(t=>t.checked)):he.None,this._saneDetail=n.detail,this._labelHighlights=(r=n.highlights)===null||r===void 0?void 0:r.label,this._descriptionHighlights=(h=n.highlights)===null||h===void 0?void 0:h.description,this._detailHighlights=(c=n.highlights)===null||c===void 0?void 0:c.detail}get separator(){return this._separator}set separator(t){this._separator=t}get checked(){return this._checked}set checked(t){t!==this._checked&&(this._checked=t,this._onChecked.fire({element:this,checked:t}))}get checkboxDisabled(){return!!this.item.disabled}}(function(t){t[t.NONE=0]="NONE",t[t.MOUSE_HOVER=1]="MOUSE_HOVER",t[t.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(KY||(KY={}));class qY extends $Y{constructor(t,i,e){super(t,!1,e),this.fireSeparatorButtonTriggered=i,this.separator=e,this.children=new Array,this.focusInsideSeparator=KY.NONE}}class ZY{getHeight(t){return t instanceof qY?30:t.saneDetail?44:22}getTemplateId(t){return t instanceof XY?e_.ID:s_.ID}}class t_{getWidgetAriaLabel(){return st(0,"Quick Input")}getAriaLabel(t){var i;return!((i=t.separator)===null||i===void 0)&&i.label?`${t.saneAriaLabel}, ${t.separator.label}`:t.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(t){return t.hasCheckbox?"checkbox":"option"}isChecked(t){if(t.hasCheckbox&&t instanceof XY)return{value:t.checked,onDidChange:t.onChecked}}}class i_{constructor(t){this.hoverDelegate=t}renderTemplate(t){const i=Object.create(null);i.toDisposeElement=new Zi,i.toDisposeTemplate=new Zi,i.entry=ia(t,JY(".quick-input-list-entry"));const e=ia(i.entry,JY("label.quick-input-list-label"));i.toDisposeTemplate.add(cc(e,$c.CLICK,(t=>{i.checkbox.offsetParent||t.preventDefault()}))),i.checkbox=ia(e,JY("input.quick-input-list-checkbox")),i.checkbox.type="checkbox";const s=ia(e,JY(".quick-input-list-rows")),n=ia(s,JY(".quick-input-list-row")),o=ia(s,JY(".quick-input-list-row"));i.label=new QY(n,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),i.toDisposeTemplate.add(i.label),i.icon=ea(i.label.element,JY(".quick-input-list-icon"));const r=ia(n,JY(".quick-input-list-entry-keybinding"));i.keybinding=new PY(r,Rt),i.toDisposeTemplate.add(i.keybinding);const h=ia(o,JY(".quick-input-list-label-meta"));return i.detail=new QY(h,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),i.toDisposeTemplate.add(i.detail),i.separator=ia(i.entry,JY(".quick-input-list-separator")),i.actionBar=new RH(i.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),i.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),i.toDisposeTemplate.add(i.actionBar),i}disposeTemplate(t){t.toDisposeElement.dispose(),t.toDisposeTemplate.dispose()}disposeElement(t,i,e){e.toDisposeElement.clear(),e.actionBar.clear()}}let e_=YY=class extends i_{constructor(t,i){super(t),this.themeService=i,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return YY.ID}renderTemplate(t){const i=super.renderTemplate(t);return i.toDisposeTemplate.add(cc(i.checkbox,$c.CHANGE,(t=>{i.element.checked=i.checkbox.checked}))),i}renderElement(t,i,e){var s,n,o;const r=t.element;e.element=r,r.element=(s=e.entry)!==null&&s!==void 0?s:void 0;const h=r.item;e.checkbox.checked=r.checked,e.toDisposeElement.add(r.onChecked((t=>e.checkbox.checked=t))),e.checkbox.disabled=r.checkboxDisabled;const{labelHighlights:c,descriptionHighlights:a,detailHighlights:l}=r;if(h.iconPath){const t=fy(this.themeService.getColorTheme().type)?h.iconPath.dark:(n=h.iconPath.light)!==null&&n!==void 0?n:h.iconPath.dark,i=fs.revive(t);e.icon.className="quick-input-list-icon",e.icon.style.backgroundImage=da(i)}else e.icon.style.backgroundImage="",e.icon.className=h.iconClass?`quick-input-list-icon ${h.iconClass}`:"";let u;!r.saneTooltip&&r.saneDescription&&(u={markdown:{value:r.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDescription});const d={matches:c||[],descriptionTitle:u,descriptionMatches:a||[],labelEscapeNewLines:!0};if(d.extraClasses=h.iconClasses,d.italic=h.italic,d.strikethrough=h.strikethrough,e.entry.classList.remove("quick-input-list-separator-as-item"),e.label.setLabel(r.saneLabel,r.saneDescription,d),e.keybinding.set(h.keybinding),r.saneDetail){let t;r.saneTooltip||(t={markdown:{value:r.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDetail}),e.detail.element.style.display="",e.detail.setLabel(r.saneDetail,void 0,{matches:l,title:t,labelEscapeNewLines:!0})}else e.detail.element.style.display="none";!((o=r.separator)===null||o===void 0)&&o.label?(e.separator.textContent=r.separator.label,e.separator.style.display="",this.addItemWithSeparator(r)):e.separator.style.display="none",e.entry.classList.toggle("quick-input-list-separator-border",!!r.separator);const f=h.buttons;f&&f.length?(e.actionBar.push(f.map(((t,i)=>LP(t,`id-${i}`,(()=>r.fireButtonTriggered({button:t,item:r.item}))))),{icon:!0,label:!1}),e.entry.classList.add("has-actions")):e.entry.classList.remove("has-actions")}disposeElement(t,i,e){this.removeItemWithSeparator(t.element),super.disposeElement(t,i,e)}isItemWithSeparatorVisible(t){return this._itemsWithSeparatorsFrequency.has(t)}addItemWithSeparator(t){this._itemsWithSeparatorsFrequency.set(t,(this._itemsWithSeparatorsFrequency.get(t)||0)+1)}removeItemWithSeparator(t){const i=this._itemsWithSeparatorsFrequency.get(t)||0;i>1?this._itemsWithSeparatorsFrequency.set(t,i-1):this._itemsWithSeparatorsFrequency.delete(t)}};e_.ID="quickpickitem",e_=YY=_Y([VY(1,Fk)],e_);class s_ extends i_{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return s_.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(t){return this._visibleSeparatorsFrequency.has(t)}renderElement(t,i,e){var s;const n=t.element;e.element=n,n.element=(s=e.entry)!==null&&s!==void 0?s:void 0,n.element.classList.toggle("focus-inside",!!n.focusInsideSeparator);const o=n.separator,{labelHighlights:r,descriptionHighlights:h,detailHighlights:c}=n;let a;e.icon.style.backgroundImage="",e.icon.className="",!n.saneTooltip&&n.saneDescription&&(a={markdown:{value:n.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDescription});const l={matches:r||[],descriptionTitle:a,descriptionMatches:h||[],labelEscapeNewLines:!0};if(e.entry.classList.add("quick-input-list-separator-as-item"),e.label.setLabel(n.saneLabel,n.saneDescription,l),n.saneDetail){let t;n.saneTooltip||(t={markdown:{value:n.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDetail}),e.detail.element.style.display="",e.detail.setLabel(n.saneDetail,void 0,{matches:c,title:t,labelEscapeNewLines:!0})}else e.detail.element.style.display="none";e.separator.style.display="none",e.entry.classList.add("quick-input-list-separator-border");const u=o.buttons;u&&u.length?(e.actionBar.push(u.map(((t,i)=>LP(t,`id-${i}`,(()=>n.fireSeparatorButtonTriggered({button:t,separator:n.separator}))))),{icon:!0,label:!1}),e.entry.classList.add("has-actions")):e.entry.classList.remove("has-actions"),this.addSeparator(n)}disposeElement(t,i,e){var s;this.removeSeparator(t.element),this.isSeparatorVisible(t.element)||(s=t.element.element)===null||s===void 0||s.classList.remove("focus-inside"),super.disposeElement(t,i,e)}addSeparator(t){this._visibleSeparatorsFrequency.set(t,(this._visibleSeparatorsFrequency.get(t)||0)+1)}removeSeparator(t){const i=this._visibleSeparatorsFrequency.get(t)||0;i>1?this._visibleSeparatorsFrequency.set(t,i-1):this._visibleSeparatorsFrequency.delete(t)}}s_.ID="quickpickseparator";let n_=class extends te{constructor(t,i,e,s,n){super(),this.parent=t,this.hoverDelegate=i,this.linkOpenerDelegate=e,this._onKeyDown=new de,this.onKeyDown=this._onKeyDown.event,this._onLeave=new de,this.onLeave=this._onLeave.event,this._onChangedAllVisibleChecked=new de,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new de,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new de,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new de,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new de,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new de,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._onTriggerEmptySelectionOrFocus=new de,this._elementChecked=new de,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new Zi),this._shouldFireCheckedEvents=!0,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._container=ia(this.parent,JY(".quick-input-list")),this._separatorRenderer=new s_(i),this._itemRenderer=n.createInstance(e_,i),this._tree=this._register(n.createInstance(EY,"QuickInput",this._container,new ZY,[this._itemRenderer,this._separatorRenderer],{accessibilityProvider:new t_,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:wj.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,identityProvider:{getId:t=>{var i,e,s,n,o,r,h,c;return(c=(r=(n=(e=(i=t.item)===null||i===void 0?void 0:i.id)!==null&&e!==void 0?e:(s=t.item)===null||s===void 0?void 0:s.label)!==null&&n!==void 0?n:(o=t.separator)===null||o===void 0?void 0:o.id)!==null&&r!==void 0?r:(h=t.separator)===null||h===void 0?void 0:h.label)!==null&&c!==void 0?c:""}},alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=s,this._registerListeners()}get onDidChangeFocus(){return he.map(he.any(this._tree.onDidChangeFocus,this._onTriggerEmptySelectionOrFocus.event),(t=>t.elements.filter((t=>t instanceof XY)).map((t=>t.item))))}get onDidChangeSelection(){return he.map(he.any(this._tree.onDidChangeSelection,this._onTriggerEmptySelectionOrFocus.event),(t=>({items:t.elements.filter((t=>t instanceof XY)).map((t=>t.item)),event:t.browserEvent})))}get scrollTop(){return this._tree.scrollTop}set scrollTop(t){this._tree.scrollTop=t}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(t){this._tree.ariaLabel=t??""}set enabled(t){this._tree.getHTMLElement().style.pointerEvents=t?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(t){this._matchOnDescription=t}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(t){this._matchOnDetail=t}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(t){this._matchOnLabel=t}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(t){this._matchOnLabelMode=t}get sortByLabel(){return this._sortByLabel}set sortByLabel(t){this._sortByLabel=t}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown((t=>{const i=new hr(t);switch(i.keyCode){case 10:this.toggleCheckbox();break;case 31:(kt?t.metaKey:t.ctrlKey)&&this._tree.setFocus(this._itemElements);break;case 16:{const t=this._tree.getFocus();t.length===1&&t[0]===this._itemElements[0]&&this._onLeave.fire();break}case 18:{const t=this._tree.getFocus();t.length===1&&t[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}}this._onKeyDown.fire(i)})))}_registerOnContainerClick(){this._register(rc(this._container,$c.CLICK,(t=>{(t.x||t.y)&&this._onLeave.fire()})))}_registerOnMouseMiddleClick(){this._register(rc(this._container,$c.AUXCLICK,(t=>{t.button===1&&this._onLeave.fire()})))}_registerOnElementChecked(){this._register(this._elementChecked.event((t=>this._fireCheckedEvents())))}_registerOnContextMenu(){this._register(this._tree.onContextMenu((t=>{t.element&&(t.browserEvent.preventDefault(),this._tree.setSelection([t.element]))})))}_registerHoverListeners(){const t=this._register(new vr(this.hoverDelegate.delay));this._register(this._tree.onMouseOver((async i=>{var e;if(i.browserEvent.target instanceof HTMLAnchorElement)t.cancel();else if(i.browserEvent.relatedTarget instanceof HTMLAnchorElement||!Dc(i.browserEvent.relatedTarget,(e=i.element)===null||e===void 0?void 0:e.element))try{await t.trigger((async()=>{i.element instanceof XY&&this.showHover(i.element)}))}catch(t){if(!Pi(t))throw t}}))),this._register(this._tree.onMouseOut((i=>{var e;Dc(i.browserEvent.relatedTarget,(e=i.element)===null||e===void 0?void 0:e.element)||t.cancel()})))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus((t=>{const i=t.elements[0]?this._tree.getParentElement(t.elements[0]):null;for(const t of this._separatorRenderer.visibleSeparators){const e=t===i;!!(t.focusInsideSeparator&KY.ACTIVE_ITEM)!==e&&(e?t.focusInsideSeparator|=KY.ACTIVE_ITEM:t.focusInsideSeparator&=~KY.ACTIVE_ITEM,this._tree.rerender(t))}}))),this._register(this._tree.onMouseOver((t=>{const i=t.element?this._tree.getParentElement(t.element):null;for(const t of this._separatorRenderer.visibleSeparators)t===i&&(t.focusInsideSeparator&KY.MOUSE_HOVER||(t.focusInsideSeparator|=KY.MOUSE_HOVER,this._tree.rerender(t)))}))),this._register(this._tree.onMouseOut((t=>{const i=t.element?this._tree.getParentElement(t.element):null;for(const t of this._separatorRenderer.visibleSeparators)t===i&&t.focusInsideSeparator&KY.MOUSE_HOVER&&(t.focusInsideSeparator&=~KY.MOUSE_HOVER,this._tree.rerender(t))})))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection((t=>{const i=t.elements.filter((t=>t instanceof XY));i.length!==t.elements.length&&(t.elements.length===1&&t.elements[0]instanceof qY&&(this._tree.setFocus([t.elements[0].children[0]]),this._tree.reveal(t.elements[0],0)),this._tree.setSelection(i))})))}getAllVisibleChecked(){return this._allVisibleChecked(this._itemElements,!1)}getCheckedCount(){return this._itemElements.filter((t=>t.checked)).length}getVisibleCount(){return this._itemElements.filter((t=>!t.hidden)).length}setAllVisibleChecked(t){try{this._shouldFireCheckedEvents=!1,this._itemElements.forEach((i=>{i.hidden||i.checkboxDisabled||(i.checked=t)}))}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}setElements(t){this._elementDisposable.clear(),this._inputElements=t;const i=this.parent.classList.contains("show-checkboxes");let e;this._itemElements=new Array,this._elementTree=t.reduce(((s,n,o)=>{let r;if(n.type==="separator"){if(!n.buttons)return s;e=new qY(o,(t=>this.fireSeparatorButtonTriggered(t)),n),r=e}else{const h=o>0?t[o-1]:void 0;let c;h&&h.type==="separator"&&!h.buttons&&(e=void 0,c=h);const a=new XY(o,i,(t=>this.fireButtonTriggered(t)),this._elementChecked,n,c);if(this._itemElements.push(a),e)return e.children.push(a),s;r=a}return s.push(r),s}),new Array);const s=new Array;let n=0;for(const t of this._elementTree)t instanceof qY?(s.push({element:t,collapsible:!1,collapsed:!1,children:t.children.map((t=>({element:t,collapsible:!1,collapsed:!1})))}),n+=t.children.length+1):(s.push({element:t,collapsible:!1,collapsed:!1}),n++);this._tree.setChildren(null,s),this._onChangedVisibleCount.fire(n)}setFocusedElements(t){const i=t.map((t=>this._itemElements.find((i=>i.item===t)))).filter((t=>!!t));if(this._tree.setFocus(i),t.length>0){const t=this._tree.getFocus()[0];t&&this._tree.reveal(t)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(t){const i=t.map((t=>this._itemElements.find((i=>i.item===t)))).filter((t=>!!t));this._tree.setSelection(i)}getCheckedElements(){return this._itemElements.filter((t=>t.checked)).map((t=>t.item))}setCheckedElements(t){try{this._shouldFireCheckedEvents=!1;const i=new Set;for(const e of t)i.add(e);for(const t of this._itemElements)t.checked=i.has(t.item)}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}focus(t){var i;if(this._itemElements.length)switch(t===GY.Second&&this._itemElements.length<2&&(t=GY.First),t){case GY.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,(t=>t.element instanceof XY));break;case GY.Second:this._tree.scrollTop=0,this._tree.setFocus([this._itemElements[1]]);break;case GY.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.setFocus([this._itemElements[this._itemElements.length-1]]);break;case GY.Next:this._tree.focusNext(void 0,!0,void 0,(t=>t.element instanceof XY&&(this._tree.reveal(t.element),!0)));break;case GY.Previous:this._tree.focusPrevious(void 0,!0,void 0,(t=>{if(!(t.element instanceof XY))return!1;const i=this._tree.getParentElement(t.element);return i===null||i.children[0]!==t.element?this._tree.reveal(t.element):this._tree.reveal(i),!0}));break;case GY.NextPage:this._tree.focusNextPage(void 0,(t=>t.element instanceof XY&&(this._tree.reveal(t.element),!0)));break;case GY.PreviousPage:this._tree.focusPreviousPage(void 0,(t=>{if(!(t.element instanceof XY))return!1;const i=this._tree.getParentElement(t.element);return i===null||i.children[0]!==t.element?this._tree.reveal(t.element):this._tree.reveal(i),!0}));break;case GY.NextSeparator:{let t=!1;const i=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,(i=>{if(t)return!0;if(i.element instanceof qY)t=!0,this._separatorRenderer.isSeparatorVisible(i.element)?this._tree.reveal(i.element.children[0]):this._tree.reveal(i.element,0);else if(i.element instanceof XY){if(i.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(i.element)?this._tree.reveal(i.element):this._tree.reveal(i.element,0),!0;if(i.element===this._elementTree[0])return this._tree.reveal(i.element,0),!0}return!1})),i===this._tree.getFocus()[0]&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.setFocus([this._itemElements[this._itemElements.length-1]]));break}case GY.PreviousSeparator:{let t,e=!!(!((i=this._tree.getFocus()[0])===null||i===void 0)&&i.separator);this._tree.focusPrevious(void 0,!0,void 0,(i=>{if(i.element instanceof qY)e?t||(this._separatorRenderer.isSeparatorVisible(i.element)?this._tree.reveal(i.element):this._tree.reveal(i.element,0),t=i.element.children[0]):e=!0;else if(i.element instanceof XY&&!t){if(i.element.separator)this._itemRenderer.isItemWithSeparatorVisible(i.element)?this._tree.reveal(i.element):this._tree.reveal(i.element,0),t=i.element;else if(i.element===this._elementTree[0])return this._tree.reveal(i.element,0),!0}return!1})),t&&this._tree.setFocus([t]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(t){this._tree.getHTMLElement().style.maxHeight=t?44*Math.floor(t/44)+6+"px":"",this._tree.layout()}filter(t){if(!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const i=t;if((t=t.trim())&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail)){let e;this._elementTree.forEach((s=>{var n,o,r,h;let c;c=this.matchOnLabelMode==="fuzzy"?this.matchOnLabel&&(n=LN(t,IN(s.saneLabel)))!==null&&n!==void 0?n:void 0:this.matchOnLabel&&(o=function(t,i){const{text:e,iconOffsets:s}=i;if(!s||s.length===0)return o_(t,e);const n=Zn(e," "),o=e.length-n.length,r=o_(t,n);if(r)for(const t of r){const i=s[t.start+o]+o;t.start+=i,t.end+=i}return r}(i,IN(s.saneLabel)))!==null&&o!==void 0?o:void 0;const a=this.matchOnDescription&&(r=LN(t,IN(s.saneDescription||"")))!==null&&r!==void 0?r:void 0,l=this.matchOnDetail&&(h=LN(t,IN(s.saneDetail||"")))!==null&&h!==void 0?h:void 0;if(c||a||l?(s.labelHighlights=c,s.descriptionHighlights=a,s.detailHighlights=l,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=!s.item||!s.item.alwaysShow),s.item?s.separator=void 0:s.separator&&(s.hidden=!0),!this.sortByLabel){const t=s.index&&this._inputElements[s.index-1];e=t&&t.type==="separator"?t:e,e&&!s.hidden&&(s.separator=e,e=void 0)}}))}else this._itemElements.forEach((t=>{t.labelHighlights=void 0,t.descriptionHighlights=void 0,t.detailHighlights=void 0,t.hidden=!1;const i=t.index&&this._inputElements[t.index-1];t.item&&(t.separator=i&&i.type==="separator"&&!i.buttons?i:void 0)}));const e=this._elementTree.filter((t=>!t.hidden));if(this.sortByLabel&&t){const i=t.toLowerCase();e.sort(((t,e)=>function(t,i,e){const s=t.labelHighlights||[],n=i.labelHighlights||[];return s.length&&!n.length?-1:!s.length&&n.length?1:s.length===0&&n.length===0?0:WY(t.saneSortLabel,i.saneSortLabel,e)}(t,e,i)))}let s;const n=e.reduce(((t,i,e)=>(i instanceof XY?s?s.children.push(i):t.push(i):i instanceof qY&&(i.children=[],s=i,t.push(i)),t)),new Array),o=new Array;for(const t of n)t instanceof qY?o.push({element:t,collapsible:!1,collapsed:!1,children:t.children.map((t=>({element:t,collapsible:!1,collapsed:!1})))}):o.push({element:t,collapsible:!1,collapsed:!1});const r=this._tree.getFocus().length;return this._tree.setChildren(null,o),r>0&&o.length===0&&this._onTriggerEmptySelectionOrFocus.fire({elements:[]}),this._tree.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(e.length),!0}toggleCheckbox(){try{this._shouldFireCheckedEvents=!1;const t=this._tree.getFocus().filter((t=>t instanceof XY)),i=this._allVisibleChecked(t);for(const e of t)e.checkboxDisabled||(e.checked=!i)}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}display(t){this._container.style.display=t?"":"none"}isDisplayed(){return this._container.style.display!=="none"}style(t){this._tree.style(t)}toggleHover(){const t=this._tree.getFocus()[0];if(!(t!=null&&t.saneTooltip&&t instanceof XY))return;if(this._lastHover&&!this._lastHover.isDisposed)return void this._lastHover.dispose();this.showHover(t);const i=new Zi;i.add(this._tree.onDidChangeFocus((t=>{t.elements[0]instanceof XY&&this.showHover(t.elements[0])}))),this._lastHover&&i.add(this._lastHover),this._elementDisposable.add(i)}_allVisibleChecked(t,i=!0){for(let e=0,s=t.length;e<s;e++){const s=t[e];if(!s.hidden){if(!s.checked)return!1;i=!0}}return i}_fireCheckedEvents(){this._shouldFireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(t){this._onButtonTriggered.fire(t)}fireSeparatorButtonTriggered(t){this._onSeparatorButtonTriggered.fire(t)}showHover(t){var i,e,s;this._lastHover&&!this._lastHover.isDisposed&&((e=(i=this.hoverDelegate).onDidHideHover)===null||e===void 0||e.call(i),(s=this._lastHover)===null||s===void 0||s.dispose()),t.element&&t.saneTooltip&&(this._lastHover=this.hoverDelegate.showHover({content:t.saneTooltip,target:t.element,linkHandler:t=>{this.linkOpenerDelegate(t)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};function o_(t,i){const e=i.toLowerCase().indexOf(t.toLowerCase());return e!==-1?[{start:e,end:e+t.length}]:null}_Y([Hy],n_.prototype,"onDidChangeFocus",null),_Y([Hy],n_.prototype,"onDidChangeSelection",null),n_=_Y([VY(4,Oa)],n_);var r_=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},h_=function(t,i){return function(e,s){i(e,s,t)}};const c_={iconClass:Ka.asClassName(Fs.quickInputBack),tooltip:st(0,"Back"),handle:-1};class a_ extends te{constructor(t){super(),this.ui=t,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=a_.noPromptMessage,this._severity=AL.Ignore,this.onDidTriggerButtonEmitter=this._register(new de),this.onDidHideEmitter=this._register(new de),this.onWillHideEmitter=this._register(new de),this.onDisposeEmitter=this._register(new de),this.visibleDisposables=this._register(new Zi),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(t){this._title=t,this.update()}get description(){return this._description}set description(t){this._description=t,this.update()}get step(){return this._steps}set step(t){this._steps=t,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(t){this._totalSteps=t,this.update()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this.update()}get contextKey(){return this._contextKey}set contextKey(t){this._contextKey=t,this.update()}get busy(){return this._busy}set busy(t){this._busy=t,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(t){const i=this._ignoreFocusOut!==t&&!Dt;this._ignoreFocusOut=t&&!Dt,i&&this.update()}get buttons(){return this._buttons}set buttons(t){this._buttons=t,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(t){this._toggles=t??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(t){this._validationMessage=t,this.update()}get severity(){return this._severity}set severity(t){this._severity=t,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton((t=>{this.buttons.indexOf(t)!==-1&&this.onDidTriggerButtonEmitter.fire(t)}))),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(t=bP.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:t})}willHide(t=bP.Other){this.onWillHideEmitter.fire({reason:t})}update(){var t,i;if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:e||this.ui.title.innerHTML==="&nbsp;"||(this.ui.title.innerText=" ");const s=this.getDescription();if(this.ui.description1.textContent!==s&&(this.ui.description1.textContent=s),this.ui.description2.textContent!==s&&(this.ui.description2.textContent=s),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?sa(this.ui.widget,this._widget):sa(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new xr,this.busyDelay.setIfNotSet((()=>{this.visible&&this.ui.progressBar.infinite()}),800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const t=this.buttons.filter((t=>t===c_)).map(((t,i)=>LP(t,`id-${i}`,(async()=>this.onDidTriggerButtonEmitter.fire(t)))));this.ui.leftActionBar.push(t,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const i=this.buttons.filter((t=>t!==c_)).map(((t,i)=>LP(t,`id-${i}`,(async()=>this.onDidTriggerButtonEmitter.fire(t)))));this.ui.rightActionBar.push(i,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const e=(i=(t=this.toggles)===null||t===void 0?void 0:t.filter((t=>t instanceof BP)))!==null&&i!==void 0?i:[];this.ui.inputBox.toggles=e}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,sa(this.ui.message),RP(n,this.ui.message,{callback:t=>{this.ui.linkOpenerDelegate(t)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?st(0,"{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(t){if(this.ui.inputBox.showDecoration(t),t!==AL.Ignore){const i=this.ui.inputBox.stylesForType(t);this.ui.message.style.color=i.foreground?`${i.foreground}`:"",this.ui.message.style.backgroundColor=i.background?`${i.background}`:"",this.ui.message.style.border=i.border?`1px solid ${i.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}a_.noPromptMessage=st(0,"Press 'Enter' to confirm your input or 'Escape' to cancel");class l_ extends a_{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new de),this.onWillAcceptEmitter=this._register(new de),this.onDidAcceptEmitter=this._register(new de),this.onDidCustomEmitter=this._register(new de),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=yP.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new de),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new de),this.onDidTriggerItemButtonEmitter=this._register(new de),this.onDidTriggerSeparatorButtonEmitter=this._register(new de),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=t=>t,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(t){this._quickNavigate=t,this.update()}get value(){return this._value}set value(t){this.doSetValue(t)}doSetValue(t,i){this._value!==t&&(this._value=t,i||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(t){this._ariaLabel=t,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(t){this.ui.list.scrollTop=t}set items(t){this._items=t,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(t){this._canSelectMany=t,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(t){this._canAcceptInBackground=t}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(t){this._matchOnDescription=t,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(t){this._matchOnDetail=t,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(t){this._matchOnLabel=t,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(t){this._matchOnLabelMode=t,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(t){this._sortByLabel=t,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(t){this._keepScrollPosition=t}get itemActivation(){return this._itemActivation}set itemActivation(t){this._itemActivation=t}get activeItems(){return this._activeItems}set activeItems(t){this._activeItems=t,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(t){this._selectedItems=t,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?vP:this.ui.keyMods}get valueSelection(){const t=this.ui.inputBox.getSelection();if(t)return[t.start,t.end]}set valueSelection(t){this._valueSelection=t,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(t){this._customButton=t,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(t){this._customButtonLabel=t,this.update()}get customHover(){return this._customButtonHover}set customHover(t){this._customButtonHover=t,this.update()}get ok(){return this._ok}set ok(t){this._ok=t,this.update()}get hideInput(){return!!this._hideInput}set hideInput(t){this._hideInput=t,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(GY.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((t=>{this.doSetValue(t,!0)}))),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown((t=>{switch(t.keyCode){case 18:(kt?t.metaKey:t.altKey)?this.ui.list.focus(GY.NextSeparator):this.ui.list.focus(GY.Next),this.canSelectMany&&this.ui.list.domFocus(),qc(t,!0);break;case 16:(kt?t.metaKey:t.altKey)?this.ui.list.focus(GY.PreviousSeparator):this.ui.list.focus(GY.Previous),this.canSelectMany&&this.ui.list.domFocus(),qc(t,!0);break;case 12:this.ui.list.focus(GY.NextPage),this.canSelectMany&&this.ui.list.domFocus(),qc(t,!0);break;case 11:this.ui.list.focus(GY.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),qc(t,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey||(this.ui.list.focus(GY.First),qc(t,!0));break;case 13:!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey||(this.ui.list.focus(GY.Last),qc(t,!0))}}))),this.visibleDisposables.add(this.ui.onDidAccept((()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)}))),this.visibleDisposables.add(this.ui.onDidCustom((()=>{this.onDidCustomEmitter.fire()}))),this.visibleDisposables.add(this.ui.list.onDidChangeFocus((t=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&h(t,this._activeItems,((t,i)=>t===i))||(this._activeItems=t,this.onDidChangeActiveEmitter.fire(t))}))),this.visibleDisposables.add(this.ui.list.onDidChangeSelection((({items:t,event:i})=>{this.canSelectMany?t.length&&this.ui.list.setSelectedElements([]):this.selectedItemsToConfirm!==this._selectedItems&&h(t,this._selectedItems,((t,i)=>t===i))||(this._selectedItems=t,this.onDidChangeSelectionEmitter.fire(t),t.length&&this.handleAccept(Gc(i)&&i.button===1))}))),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements((t=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&h(t,this._selectedItems,((t,i)=>t===i))||(this._selectedItems=t,this.onDidChangeSelectionEmitter.fire(t)))}))),this.visibleDisposables.add(this.ui.list.onButtonTriggered((t=>this.onDidTriggerItemButtonEmitter.fire(t)))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered((t=>this.onDidTriggerSeparatorButtonEmitter.fire(t)))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(t){let i=!1;this.onWillAcceptEmitter.fire({veto:()=>i=!0}),i||this.onDidAcceptEmitter.fire({inBackground:t})}registerQuickNavigation(){return rc(this.ui.container,$c.KEY_UP,(t=>{if(this.canSelectMany||!this._quickNavigate)return;const i=new hr(t),e=i.keyCode;this._quickNavigate.keybindings.some((t=>{const s=t.getChords();return!(s.length>1)&&(s[0].shiftKey&&e===4?!(i.ctrlKey||i.altKey||i.metaKey):!(!s[0].altKey||e!==6)||!(!s[0].ctrlKey||e!==5)||!(!s[0].metaKey||e!==57))}))&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)}))}update(){if(!this.visible)return;const t=this.keepScrollPosition?this.scrollTop:0,i=!!this.description,e={title:!!this.title||!!this.step||!!this.buttons.length,description:i,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||i,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;if(!s&&e.inputBox&&(s=this.placeholder||l_.DEFAULT_ARIA_LABEL,this.title&&(s+=` - ${this.title}`)),this.ui.list.ariaLabel!==s&&(this.ui.list.ariaLabel=s??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated){this.itemsUpdated=!1;const t=this._activeItems;switch(this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case yP.NONE:t.length>0&&(this._activeItems=[],this.onDidChangeActiveEmitter.fire(this._activeItems)),this._itemActivation=yP.FIRST;break;case yP.SECOND:this.ui.list.focus(GY.Second),this._itemActivation=yP.FIRST;break;case yP.LAST:this.ui.list.focus(GY.Last),this._itemActivation=yP.FIRST;break;default:this.trySelectFirst()}}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",e.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(GY.First)),this.keepScrollPosition&&(this.scrollTop=t)}}l_.DEFAULT_ARIA_LABEL=st(0,"Type to narrow down results.");class u_ extends a_{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new de),this.onDidAcceptEmitter=this._register(new de),this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(t){this._value=t||"",this.update()}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.update()}get password(){return this._password}set password(t){this._password=t,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((t=>{t!==this.value&&(this._value=t,this.onDidValueChangeEmitter.fire(t))}))),this.visibleDisposables.add(this.ui.onDidAccept((()=>this.onDidAcceptEmitter.fire()))),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const t={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(t),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}let d_=class extends hT{constructor(t,i){super("element",!1,(t=>this.getOverrideOptions(t)),t,i)}getOverrideOptions(t){var i;return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:(t.content instanceof HTMLElement?(i=t.content.textContent)!==null&&i!==void 0?i:"":typeof t.content=="string"?t.content:t.content.value).includes(`\n`),skipFadeInAnimation:!0}}}};d_=r_([h_(0,Id),h_(1,rT)],d_),CA.white.toString(),CA.white.toString();class f_ extends te{get onDidClick(){return this._onDidClick.event}constructor(t,i){super(),this._label="",this._onDidClick=this._register(new de),this._onDidEscape=this._register(new de),this.options=i,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!i.secondary);const e=i.secondary?i.buttonSecondaryBackground:i.buttonBackground,s=i.secondary?i.buttonSecondaryForeground:i.buttonForeground;this._element.style.color=s||"",this._element.style.backgroundColor=e||"",i.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof i.title=="string"&&this.setTitle(i.title),typeof i.ariaLabel=="string"&&this._element.setAttribute("aria-label",i.ariaLabel),t.appendChild(this._element),this._register(Wy.addTarget(this._element)),[$c.CLICK,Py.Tap].forEach((t=>{this._register(rc(this._element,t,(t=>{this.enabled?this._onDidClick.fire(t):qc(t)})))})),this._register(rc(this._element,$c.KEY_DOWN,(t=>{const i=new hr(t);let e=!1;this.enabled&&(i.equals(3)||i.equals(10))?(this._onDidClick.fire(t),e=!0):i.equals(9)&&(this._onDidEscape.fire(t),this._element.blur(),e=!0),e&&qc(i,!0)}))),this._register(rc(this._element,$c.MOUSE_OVER,(t=>{this._element.classList.contains("disabled")||this.updateBackground(!0)}))),this._register(rc(this._element,$c.MOUSE_OUT,(t=>{this.updateBackground(!1)}))),this.focusTracker=this._register(ta(this._element)),this._register(this.focusTracker.onDidFocus((()=>{this.enabled&&this.updateBackground(!0)}))),this._register(this.focusTracker.onDidBlur((()=>{this.enabled&&this.updateBackground(!1)})))}dispose(){super.dispose(),this._element.remove()}getContentElements(t){const i=[];for(let e of kT(t))if(typeof e=="string"){if(e=e.trim(),e==="")continue;const t=document.createElement("span");t.textContent=e,i.push(t)}else i.push(e);return i}updateBackground(t){let i;i=this.options.secondary?t?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t?this.options.buttonHoverBackground:this.options.buttonBackground,i&&(this._element.style.backgroundColor=i)}get element(){return this._element}set label(t){var i,e,s;if(this._label===t||NN(this._label)&&NN(t)&&((e=this._label)===(s=t)||e&&s&&e.value===s.value&&e.isTrusted===s.isTrusted&&e.supportThemeIcons===s.supportThemeIcons&&e.supportHtml===s.supportHtml&&(e.baseUri===s.baseUri||e.baseUri&&s.baseUri&&CM(fs.from(e.baseUri),fs.from(s.baseUri)))))return;this._element.classList.add("monaco-text-button");const n=this.options.supportShortLabel?this._labelElement:this._element;if(NN(t)){const e=VN(t,{inline:!0});e.dispose();const s=(i=e.element.querySelector("p"))===null||i===void 0?void 0:i.innerHTML;if(s){const t=Sh(s,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});n.innerHTML=t}else sa(n)}else this.options.supportIcons?sa(n,...this.getContentElements(t)):n.textContent=t;let o="";typeof this.options.title=="string"?o=this.options.title:this.options.title&&(o=XN(t)),this.setTitle(o),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",o),this._label=t}get label(){return this._label}set icon(t){this._element.classList.add(...Ka.asClassNameArray(t))}set enabled(t){t?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(t){var i;this._hover||t===""?this._hover&&this._hover.update(t):this._hover=this._register(fz((i=this.options.hoverDelegate)!==null&&i!==void 0?i:az("mouse"),this._element,t))}}class g_{constructor(t,i,e){this.options=i,this.styles=e,this.count=0,this.element=ia(t,ha(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(t){this.count=t,this.render()}setTitleFormat(t){this.titleFormat=t,this.render()}render(){var t,i;this.element.textContent=Kn(this.countFormat,this.count),this.element.title=Kn(this.titleFormat,this.count),this.element.style.backgroundColor=(t=this.styles.badgeBackground)!==null&&t!==void 0?t:"",this.element.style.color=(i=this.styles.badgeForeground)!==null&&i!==void 0?i:"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const A_="done",p_="active",w_="infinite",m_="infinite-long-running",v_="discrete";class b_ extends te{constructor(t,i){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new Er((()=>ca(this.element)),0)),this.longRunningScheduler=this._register(new Er((()=>this.infiniteLongRunning()),b_.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(t,i)}create(t,i){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),t.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(i==null?void 0:i.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(p_,w_,m_,v_),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(t){return this.element.classList.add(A_),this.element.classList.contains(w_)?(this.bit.style.opacity="0",t?setTimeout((()=>this.off()),200):this.off()):(this.bit.style.width="inherit",t?setTimeout((()=>this.off()),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(v_,A_,m_),this.element.classList.add(p_,w_),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(m_)}getContainer(){return this.element}}b_.LONG_RUNNING_INFINITE_THRESHOLD=1e4;const y_=ha;class k_ extends te{constructor(t,i,e){super(),this.parent=t,this.onKeyDown=t=>cc(this.findInput.inputBox.inputElement,$c.KEY_DOWN,t),this.onDidChange=t=>this.findInput.onDidChange(t),this.container=ia(this.parent,y_(".quick-input-box")),this.findInput=this._register(new gj(this.container,void 0,{label:"",inputBoxStyles:i,toggleStyles:e}));const s=this.findInput.inputBox.inputElement;s.role="combobox",s.ariaHasPopup="menu",s.ariaAutoComplete="list",s.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(t){this.findInput.setValue(t)}select(t=null){this.findInput.inputBox.select(t)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(t){this.findInput.inputBox.setPlaceHolder(t)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(t){this.findInput.inputBox.inputElement.type=t?"password":"text"}set enabled(t){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!t)}set toggles(t){this.findInput.setAdditionalToggles(t)}setAttribute(t,i){this.findInput.inputBox.inputElement.setAttribute(t,i)}showDecoration(t){t===AL.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:t===AL.Info?1:t===AL.Warning?2:3,content:""})}stylesForType(t){return this.findInput.inputBox.stylesForType(t===AL.Info?1:t===AL.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}var x_,C_=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},E_=function(t,i){return function(e,s){i(e,s,t)}};const B_=ha;let D_=x_=class extends te{get container(){return this._container}constructor(t,i,e){super(),this.options=t,this.layoutService=i,this.instantiationService=e,this.enabled=!0,this.onDidAcceptEmitter=this._register(new de),this.onDidCustomEmitter=this._register(new de),this.onDidTriggerButtonEmitter=this._register(new de),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new de),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new de),this.onHide=this.onHideEmitter.event,this.idPrefix=t.idPrefix,this._container=t.container,this.styles=t.styles,this._register(he.runAndSubscribe(ic,(({window:t,disposables:i})=>this.registerKeyModsListeners(t,i)),{window:Wn,disposables:this._store})),this._register(ec((t=>{this.ui&&Gh(this.ui.container)===t&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))})))}registerKeyModsListeners(t,i){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};for(const s of[$c.KEY_DOWN,$c.KEY_UP,$c.MOUSE_DOWN])i.add(rc(t,s,e,!0))}getUI(t){if(this.ui)return t&&Gh(this._container)!==Gh(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const i=ia(this._container,B_(".quick-input-widget.show-file-icons"));i.tabIndex=-1,i.style.display="none";const e=Uc(i),s=ia(i,B_(".quick-input-titlebar")),n=this._register(new RH(s,{hoverDelegate:this.options.hoverDelegate}));n.domNode.classList.add("quick-input-left-action-bar");const o=ia(s,B_(".quick-input-title")),r=this._register(new RH(s,{hoverDelegate:this.options.hoverDelegate}));r.domNode.classList.add("quick-input-right-action-bar");const h=ia(i,B_(".quick-input-header")),c=ia(h,B_("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",st(0,"Toggle all checkboxes")),this._register(cc(c,$c.CHANGE,(t=>{const i=c.checked;B.setAllVisibleChecked(i)}))),this._register(rc(c,$c.CLICK,(t=>{(t.x||t.y)&&d.setFocus()})));const a=ia(h,B_(".quick-input-description")),l=ia(h,B_(".quick-input-and-message")),u=ia(l,B_(".quick-input-filter")),d=this._register(new k_(u,this.styles.inputBox,this.styles.toggle));d.setAttribute("aria-describedby",`${this.idPrefix}message`);const f=ia(u,B_(".quick-input-visible-count"));f.setAttribute("aria-live","polite"),f.setAttribute("aria-atomic","true");const g=new g_(f,{countFormat:st(0,"{0} Results")},this.styles.countBadge),A=ia(u,B_(".quick-input-count"));A.setAttribute("aria-live","polite");const p=new g_(A,{countFormat:st(0,"{0} Selected")},this.styles.countBadge),w=ia(h,B_(".quick-input-action")),m=this._register(new f_(w,this.styles.button));m.label=st(0,"OK"),this._register(m.onDidClick((t=>{this.onDidAcceptEmitter.fire()})));const v=ia(h,B_(".quick-input-action")),b=this._register(new f_(v,{...this.styles.button,supportIcons:!0}));b.label=st(0,"Custom"),this._register(b.onDidClick((t=>{this.onDidCustomEmitter.fire()})));const y=ia(l,B_(`#${this.idPrefix}message.quick-input-message`)),k=this._register(new b_(i,this.styles.progressBar));k.getContainer().classList.add("quick-input-progress");const x=ia(i,B_(".quick-input-html-widget"));x.tabIndex=-1;const C=ia(i,B_(".quick-input-description")),E=this.idPrefix+"list",B=this._register(this.instantiationService.createInstance(n_,i,this.options.hoverDelegate,this.options.linkOpenerDelegate,E));d.setAttribute("aria-controls",E),this._register(B.onDidChangeFocus((()=>{var t;d.setAttribute("aria-activedescendant",(t=B.getActiveDescendant())!==null&&t!==void 0?t:"")}))),this._register(B.onChangedAllVisibleChecked((t=>{c.checked=t}))),this._register(B.onChangedVisibleCount((t=>{g.setCount(t)}))),this._register(B.onChangedCheckedCount((t=>{p.setCount(t)}))),this._register(B.onLeave((()=>{setTimeout((()=>{this.controller&&(d.setFocus(),this.controller instanceof l_&&this.controller.canSelectMany&&B.clearFocus())}),0)})));const D=ta(i);return this._register(D),this._register(rc(i,$c.FOCUS,(t=>{Dc(t.relatedTarget,i)||(this.previousFocusElement=t.relatedTarget instanceof HTMLElement?t.relatedTarget:void 0)}),!0)),this._register(D.onDidBlur((()=>{this.getUI().ignoreFocusOut||this.options.ignoreFocusOut()||this.hide(bP.Blur),this.previousFocusElement=void 0}))),this._register(rc(i,$c.FOCUS,(t=>{d.setFocus()}))),this._register(cc(i,$c.KEY_DOWN,(t=>{if(!Dc(t.target,x))switch(t.keyCode){case 3:qc(t,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:qc(t,!0),this.hide(bP.Gesture);break;case 2:if(!t.altKey&&!t.ctrlKey&&!t.metaKey){const e=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(i.classList.contains("show-checkboxes")?e.push("input"):e.push("input[type=text]"),this.getUI().list.isDisplayed()&&e.push(".monaco-list"),this.getUI().message&&e.push(".quick-input-message a"),this.getUI().widget){if(Dc(t.target,this.getUI().widget))break;e.push(".quick-input-html-widget")}const s=i.querySelectorAll(e.join(", "));t.shiftKey&&t.target===s[0]?(qc(t,!0),B.clearFocus()):!t.shiftKey&&Dc(t.target,s[s.length-1])&&(qc(t,!0),s[0].focus())}break;case 10:t.ctrlKey&&(qc(t,!0),this.getUI().list.toggleHover())}}))),this.ui={container:i,styleSheet:e,leftActionBar:n,titleBar:s,title:o,description1:C,description2:a,widget:x,rightActionBar:r,checkAll:c,inputContainer:l,filterContainer:u,inputBox:d,visibleCountContainer:f,visibleCount:g,countContainer:A,count:p,okContainer:w,ok:m,message:y,customButtonContainer:v,customButton:b,list:B,progressBar:k,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:t=>this.show(t),hide:()=>this.hide(),setVisibilities:t=>this.setVisibilities(t),setEnabled:t=>this.setEnabled(t),setContextKey:t=>this.options.setContextKey(t),linkOpenerDelegate:t=>this.options.linkOpenerDelegate(t)},this.updateStyles(),this.ui}reparentUI(t){this.ui&&(this._container=t,ia(this._container,this.ui.container))}pick(t,i={},e=ye.None){return new Promise(((s,n)=>{let o=t=>{var e;o=s,(e=i.onKeyMods)===null||e===void 0||e.call(i,r.keyMods),s(t)};if(e.isCancellationRequested)return void o(void 0);const r=this.createQuickPick();let h;const c=[r,r.onDidAccept((()=>{if(r.canSelectMany)o(r.selectedItems.slice()),r.hide();else{const t=r.activeItems[0];t&&(o(t),r.hide())}})),r.onDidChangeActive((t=>{const e=t[0];e&&i.onDidFocus&&i.onDidFocus(e)})),r.onDidChangeSelection((t=>{if(!r.canSelectMany){const i=t[0];i&&(o(i),r.hide())}})),r.onDidTriggerItemButton((t=>i.onDidTriggerItemButton&&i.onDidTriggerItemButton({...t,removeItem:()=>{const i=r.items.indexOf(t.item);if(i!==-1){const t=r.items.slice(),e=t.splice(i,1),s=r.activeItems.filter((t=>t!==e[0])),n=r.keepScrollPosition;r.keepScrollPosition=!0,r.items=t,s&&(r.activeItems=s),r.keepScrollPosition=n}}}))),r.onDidTriggerSeparatorButton((t=>{var e;return(e=i.onDidTriggerSeparatorButton)===null||e===void 0?void 0:e.call(i,t)})),r.onDidChangeValue((t=>{!h||t||r.activeItems.length===1&&r.activeItems[0]===h||(r.activeItems=[h])})),e.onCancellationRequested((()=>{r.hide()})),r.onDidHide((()=>{$i(c),o(void 0)}))];r.title=i.title,r.canSelectMany=!!i.canPickMany,r.placeholder=i.placeHolder,r.ignoreFocusOut=!!i.ignoreFocusLost,r.matchOnDescription=!!i.matchOnDescription,r.matchOnDetail=!!i.matchOnDetail,r.matchOnLabel=i.matchOnLabel===void 0||i.matchOnLabel,r.quickNavigate=i.quickNavigate,r.hideInput=!!i.hideInput,r.contextKey=i.contextKey,r.busy=!0,Promise.all([t,i.activeItem]).then((([t,i])=>{h=i,r.busy=!1,r.items=t,r.canSelectMany&&(r.selectedItems=t.filter((t=>t.type!=="separator"&&t.picked))),h&&(r.activeItems=[h])})),r.show(),Promise.resolve(t).then(void 0,(t=>{n(t),r.hide()}))}))}createQuickPick(){const t=this.getUI(!0);return new l_(t)}createInputBox(){const t=this.getUI(!0);return new u_(t)}show(t){const i=this.getUI(!0);this.onShowEmitter.fire();const e=this.controller;this.controller=t,e==null||e.didHide(),this.setEnabled(!0),i.leftActionBar.clear(),i.title.textContent="",i.description1.textContent="",i.description2.textContent="",sa(i.widget),i.rightActionBar.clear(),i.checkAll.checked=!1,i.inputBox.placeholder="",i.inputBox.password=!1,i.inputBox.showDecoration(AL.Ignore),i.visibleCount.setCount(0),i.count.setCount(0),sa(i.message),i.progressBar.stop(),i.list.setElements([]),i.list.matchOnDescription=!1,i.list.matchOnDetail=!1,i.list.matchOnLabel=!0,i.list.sortByLabel=!0,i.ignoreFocusOut=!1,i.inputBox.toggles=void 0;const s=this.options.backKeybindingLabel();c_.tooltip=s?st(0,"Back ({0})",s):st(0,"Back"),i.container.style.display="",this.updateLayout(),i.inputBox.setFocus()}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(t){const i=this.getUI();i.title.style.display=t.title?"":"none",i.description1.style.display=t.description&&(t.inputBox||t.checkAll)?"":"none",i.description2.style.display=!t.description||t.inputBox||t.checkAll?"none":"",i.checkAll.style.display=t.checkAll?"":"none",i.inputContainer.style.display=t.inputBox?"":"none",i.filterContainer.style.display=t.inputBox?"":"none",i.visibleCountContainer.style.display=t.visibleCount?"":"none",i.countContainer.style.display=t.count?"":"none",i.okContainer.style.display=t.ok?"":"none",i.customButtonContainer.style.display=t.customButton?"":"none",i.message.style.display=t.message?"":"none",i.progressBar.getContainer().style.display=t.progressBar?"":"none",i.list.display(!!t.list),i.container.classList.toggle("show-checkboxes",!!t.checkBox),i.container.classList.toggle("hidden-input",!t.inputBox&&!t.description),this.updateLayout()}setEnabled(t){if(t!==this.enabled){this.enabled=t;for(const i of this.getUI().leftActionBar.viewItems)i.action.enabled=t;for(const i of this.getUI().rightActionBar.viewItems)i.action.enabled=t;this.getUI().checkAll.disabled=!t,this.getUI().inputBox.enabled=t,this.getUI().ok.enabled=t,this.getUI().list.enabled=t}}hide(t){var i,e;const s=this.controller;if(!s)return;s.willHide(t);const n=(i=this.ui)===null||i===void 0?void 0:i.container,o=n&&!Tc(n);if(this.controller=null,this.onHideEmitter.fire(),n&&(n.style.display="none"),!o){let t=this.previousFocusElement;for(;t&&!t.offsetParent;)t=(e=t.parentElement)!==null&&e!==void 0?e:void 0;t!=null&&t.offsetParent?(t.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}s.didHide(t)}layout(t,i){this.dimension=t,this.titleBarOffset=i,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const t=this.ui.container.style,i=Math.min(.62*this.dimension.width,x_.MAX_WIDTH);t.width=i+"px",t.marginLeft="-"+i/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}}applyStyles(t){this.styles=t,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:t,quickInputBackground:i,quickInputForeground:e,widgetBorder:s,widgetShadow:n}=this.styles.widget;this.ui.titleBar.style.backgroundColor=t??"",this.ui.container.style.backgroundColor=i??"",this.ui.container.style.color=e??"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=n?`0 0 8px 2px ${n}`:"",this.ui.list.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const r=o.join(`\n`);r!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=r)}}};D_.MAX_WIDTH=600,D_=x_=C_([E_(1,PL),E_(2,Oa)],D_);var M_=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},S_=function(t,i){return function(e,s){i(e,s,t)}};let F_=class extends Qk{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(EP))),this._quickAccess}constructor(t,i,e,s,n){super(e),this.instantiationService=t,this.contextKeyService=i,this.layoutService=s,this.configurationService=n,this._onShow=this._register(new de),this._onHide=this._register(new de),this.contexts=new Map}createController(t=this.layoutService,i){const e={idPrefix:"quickInput_",container:t.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:t=>this.setContextKey(t),linkOpenerDelegate:t=>{this.instantiationService.invokeFunction((i=>{i.get(gT).open(t,{allowCommands:!0,fromUserGesture:!0})}))},returnFocus:()=>t.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(d_))},s=this._register(this.instantiationService.createInstance(D_,{...e,...i}));return s.layout(t.activeContainerDimension,t.activeContainerOffset.quickPickTop),this._register(t.onDidLayoutActiveContainer((i=>{Gh(t.activeContainer)===Gh(s.container)&&s.layout(i,t.activeContainerOffset.quickPickTop)}))),this._register(t.onDidChangeActiveContainer((()=>{s.isVisible()||s.layout(t.activeContainerDimension,t.activeContainerOffset.quickPickTop)}))),this._register(s.onShow((()=>{this.resetContextKeys(),this._onShow.fire()}))),this._register(s.onHide((()=>{this.resetContextKeys(),this._onHide.fire()}))),s}setContextKey(t){let i;t&&(i=this.contexts.get(t),i||(i=new Tl(t,!1).bindTo(this.contextKeyService),this.contexts.set(t,i))),i&&i.get()||(this.resetContextKeys(),i==null||i.set(!0))}resetContextKeys(){this.contexts.forEach((t=>{t.get()&&t.reset()}))}pick(t,i={},e=ye.None){return this.controller.pick(t,i,e)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:Tw(Lb),quickInputForeground:Tw(Rb),quickInputTitleBackground:Tw(Tb),widgetBorder:Tw(Wm),widgetShadow:Tw(jm)},inputBox:AH,toggle:gH,countBadge:wH,button:dH,progressBar:fH,keybindingLabel:uH,list:vH({listBackground:Lb,listFocusBackground:Hb,listFocusForeground:zb,listInactiveFocusForeground:zb,listInactiveSelectionIconForeground:Ub,listInactiveFocusBackground:Hb,listFocusOutline:Xw,listInactiveFocusOutline:Xw}),pickerGroup:{pickerGroupBorder:Tw(Qb),pickerGroupForeground:Tw(Nb)}}}};F_=M_([S_(0,Oa),S_(1,Nl),S_(2,Fk),S_(3,PL),S_(4,Id)],F_);var I_=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},L_=function(t,i){return function(e,s){i(e,s,t)}};let R_=class extends F_{constructor(t,i,e,s,n,o){super(i,e,s,new _L(t.getContainerDomNode(),n),o),this.host=void 0;const r=N_.get(t);if(r){const i=r.widget;this.host={_serviceBrand:void 0,get mainContainer(){return i.getDomNode()},getContainer:()=>i.getDomNode(),whenContainerStylesLoaded(){},get containers(){return[i.getDomNode()]},get activeContainer(){return i.getDomNode()},get mainContainerDimension(){return t.getLayoutInfo()},get activeContainerDimension(){return t.getLayoutInfo()},get onDidLayoutMainContainer(){return t.onDidLayoutChange},get onDidLayoutActiveContainer(){return t.onDidLayoutChange},get onDidLayoutContainer(){return he.map(t.onDidLayoutChange,(t=>({container:i.getDomNode(),dimension:t})))},get onDidChangeActiveContainer(){return he.None},get onDidAddContainer(){return he.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>t.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};R_=I_([L_(1,Oa),L_(2,Nl),L_(3,Fk),L_(4,Ua),L_(5,Id)],R_);let T_=class{get activeService(){const t=this.codeEditorService.getFocusedCodeEditor();if(!t)throw new Error("Quick input service needs a focused editor to work.");let i=this.mapEditorToService.get(t);if(!i){const e=i=this.instantiationService.createInstance(R_,t);this.mapEditorToService.set(t,i),Gi(t.onDidDispose)((()=>{e.dispose(),this.mapEditorToService.delete(t)}))}return i}get quickAccess(){return this.activeService.quickAccess}constructor(t,i){this.instantiationService=t,this.codeEditorService=i,this.mapEditorToService=new Map}pick(t,i={},e=ye.None){return this.activeService.pick(t,i,e)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}};T_=I_([L_(0,Oa),L_(1,Ua)],T_);class N_{static get(t){return t.getContribution(N_.ID)}constructor(t){this.editor=t,this.widget=new Q_(this.editor)}dispose(){this.widget.dispose()}}N_.ID="editor.controller.quickInput";class Q_{constructor(t){this.codeEditor=t,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return Q_.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}Q_.ID="editor.contrib.quickInputWidget",Bu(N_.ID,N_,4);class O_{constructor(t,i,e,s,n){this._parsedThemeRuleBrand=void 0,this.token=t,this.index=i,this.fontStyle=e,this.foreground=s,this.background=n}}const z_=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class U_{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(t){if(t===null)return 0;const i=t.match(z_);if(!i)throw new Error("Illegal value for token color: "+t);t=i[1].toUpperCase();let e=this._color2id.get(t);return e||(e=++this._lastColorId,this._color2id.set(t,e),this._id2color[e]=CA.fromHex("#"+t),e)}getColorMap(){return this._id2color.slice(0)}}class H_{static createFromRawTokenTheme(t,i){return this.createFromParsedTokenTheme(function(t){if(!t||!Array.isArray(t))return[];const i=[];let e=0;for(let s=0,n=t.length;s<n;s++){const n=t[s];let o=-1;if(typeof n.fontStyle=="string"){o=0;const t=n.fontStyle.split(" ");for(let i=0,e=t.length;i<e;i++)switch(t[i]){case"italic":o|=1;break;case"bold":o|=2;break;case"underline":o|=4;break;case"strikethrough":o|=8}}let r=null;typeof n.foreground=="string"&&(r=n.foreground);let h=null;typeof n.background=="string"&&(h=n.background),i[e++]=new O_(n.token||"",s,o,r,h)}return i}(t),i)}static createFromParsedTokenTheme(t,i){return function(t,i){t.sort(((t,i)=>{const e=function(t,i){return t<i?-1:t>i?1:0}(t.token,i.token);return e!==0?e:t.index-i.index}));let e=0,s="000000",n="ffffff";for(;t.length>=1&&t[0].token==="";){const i=t.shift();i.fontStyle!==-1&&(e=i.fontStyle),i.foreground!==null&&(s=i.foreground),i.background!==null&&(n=i.background)}const o=new U_;for(const t of i)o.getId(t);const r=o.getId(s),h=o.getId(n),c=new j_(e,r,h),a=new W_(c);for(let i=0,e=t.length;i<e;i++){const e=t[i];a.insert(e.token,e.fontStyle,o.getId(e.foreground),o.getId(e.background))}return new H_(o,a)}(t,i)}constructor(t,i){this._colorMap=t,this._root=i,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(t){return this._root.match(t)}match(t,i){let e=this._cache.get(i);if(e===void 0){const t=this._match(i),s=function(t){const i=t.match(P_);if(!i)return 0;switch(i[1]){case"comment":return 1;case"string":return 2;case"regex":case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}(i);e=(t.metadata|s<<8)>>>0,this._cache.set(i,e)}return(e|t)>>>0}}const P_=/\b(comment|string|regex|regexp)\b/;class j_{constructor(t,i,e){this._themeTrieElementRuleBrand=void 0,this._fontStyle=t,this._foreground=i,this._background=e,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new j_(this._fontStyle,this._foreground,this._background)}acceptOverwrite(t,i,e){t!==-1&&(this._fontStyle=t),i!==0&&(this._foreground=i),e!==0&&(this._background=e),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class W_{constructor(t){this._themeTrieElementBrand=void 0,this._mainRule=t,this._children=new Map}match(t){if(t==="")return this._mainRule;const i=t.indexOf(".");let e,s;i===-1?(e=t,s=""):(e=t.substring(0,i),s=t.substring(i+1));const n=this._children.get(e);return n!==void 0?n.match(s):this._mainRule}insert(t,i,e,s){if(t==="")return void this._mainRule.acceptOverwrite(i,e,s);const n=t.indexOf(".");let o,r;n===-1?(o=t,r=""):(o=t.substring(0,n),r=t.substring(n+1));let h=this._children.get(o);h===void 0&&(h=new W_(this._mainRule.clone()),this._children.set(o,h)),h.insert(r,i,e,s)}}const Y_={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[rm]:"#FFFFFE",[hm]:"#000000",[km]:"#E5EBF1",[Kk]:"#D3D3D3",[ix]:"#939393",[xm]:"#ADD6FF4D"}},__={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[rm]:"#1E1E1E",[hm]:"#D4D4D4",[km]:"#3A3D41",[Kk]:"#404040",[ix]:"#707070",[xm]:"#ADD6FF26"}},V_={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[rm]:"#000000",[hm]:"#FFFFFF",[Kk]:"#FFFFFF",[ix]:"#FFFFFF"}},J_={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[rm]:"#FFFFFF",[hm]:"#292929",[Kk]:"#292929",[ix]:"#292929"}};var G_,K_;(function(t){t.getDefinition=function(t,i){let e=t.defaults;for(;Ka.isThemeIcon(e);){const t=$_.getIcon(e.id);if(!t)return;e=t.defaults}return e}})(G_||(G_={})),function(t){t.toJSONObject=function(t){return{weight:t.weight,style:t.style,src:t.src.map((t=>({format:t.format,location:t.location.toString()})))}},t.fromJSONObject=function(t){const i=t=>N(t)?t:void 0;if(t&&Array.isArray(t.src)&&t.src.every((t=>N(t.format)&&N(t.location))))return{weight:i(t.weight),style:i(t.style),src:t.src.map((t=>({format:t.format,location:fs.parse(t.location)})))}}}(K_||(K_={}));const $_=new class{constructor(){this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:st(0,"The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:st(0,"The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Ka.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(t,i,e,s){const n=this.iconsById[t];if(n){if(e&&!n.description){n.description=e,this.iconSchema.properties[t].markdownDescription=`${e} $(${t})`;const i=this.iconReferenceSchema.enum.indexOf(t);i!==-1&&(this.iconReferenceSchema.enumDescriptions[i]=e),this._onDidChange.fire()}return n}const o={id:t,description:e,defaults:i,deprecationMessage:s};this.iconsById[t]=o;const r={$ref:"#/definitions/icons"};return s&&(r.deprecationMessage=s),e&&(r.markdownDescription=`${e}: $(${t})`),this.iconSchema.properties[t]=r,this.iconReferenceSchema.enum.push(t),this.iconReferenceSchema.enumDescriptions.push(e||""),this._onDidChange.fire(),{id:t}}getIcons(){return Object.keys(this.iconsById).map((t=>this.iconsById[t]))}getIcon(t){return this.iconsById[t]}getIconSchema(){return this.iconSchema}toString(){const t=(t,i)=>t.id.localeCompare(i.id),i=t=>{for(;Ka.isThemeIcon(t.defaults);)t=this.iconsById[t.defaults.id];return`codicon codicon-${t?t.id:""}`},e=[];e.push("| preview     | identifier                        | default codicon ID                | description"),e.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map((t=>this.iconsById[t]));for(const n of s.filter((t=>!!t.description)).sort(t))e.push(`|<i class="${i(n)}"></i>|${n.id}|${Ka.isThemeIcon(n.defaults)?n.defaults.id:n.id}|${n.description||""}|`);e.push("| preview     | identifier                        "),e.push("| ----------- | --------------------------------- |");for(const n of s.filter((t=>!Ka.isThemeIcon(t.defaults))).sort(t))e.push(`|<i class="${i(n)}"></i>|${n.id}|`);return e.join(`\n`)}};function X_(t,i,e,s){return $_.registerIcon(t,i,e,s)}function q_(){return $_}Vl.add("base.contributions.icons",$_),function(){const t=Ss();for(const i in t){const e="\\"+t[i].toString(16);$_.registerIcon(i,{fontCharacter:e})}}();const Z_="vscode://schemas/icons",tV=Vl.as(Wd);tV.registerSchema(Z_,$_.getIconSchema());const iV=new Er((()=>tV.notifySchemaChanged(Z_)),200);$_.onDidChange((()=>{iV.isScheduled()||iV.schedule()}));const eV=X_("widget-close",Fs.close,st(0,"Icon for the close action in widgets."));X_("goto-previous-location",Fs.arrowUp,st(0,"Icon for goto previous editor location.")),X_("goto-next-location",Fs.arrowDown,st(0,"Icon for goto next editor location.")),Ka.modify(Fs.sync,"spin"),Ka.modify(Fs.loading,"spin");class sV{getIcon(t){const i=q_();let e=t.defaults;for(;Ka.isThemeIcon(e);){const t=i.getIcon(e.id);if(!t)return;e=t.defaults}return e}}const nV="vs",oV="vs-dark",rV="hc-black",hV="hc-light",cV=Vl.as(Nw),aV=Vl.as(Rk);class lV{constructor(t,i){this.semanticHighlighting=!1,this.themeData=i;const e=i.base;t.length>0?(uV(t)?this.id=t:this.id=e+" "+t,this.themeName=t):(this.id=e,this.themeName=e),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const t=new Map;for(const i in this.themeData.colors)t.set(i,CA.fromHex(this.themeData.colors[i]));if(this.themeData.inherit){const i=dV(this.themeData.base);for(const e in i.colors)t.has(e)||t.set(e,CA.fromHex(i.colors[e]))}this.colors=t}return this.colors}getColor(t,i){return this.getColors().get(t)||(i!==!1?this.getDefault(t):void 0)}getDefault(t){let i=this.defaultColors[t];return i||(i=cV.resolveDefaultColor(t,this),this.defaultColors[t]=i,i)}defines(t){return this.getColors().has(t)}get type(){switch(this.base){case nV:return uy.LIGHT;case rV:return uy.HIGH_CONTRAST_DARK;case hV:return uy.HIGH_CONTRAST_LIGHT;default:return uy.DARK}}get tokenTheme(){if(!this._tokenTheme){let t=[],i=[];if(this.themeData.inherit){const e=dV(this.themeData.base);t=e.rules,e.encodedTokensColors&&(i=e.encodedTokensColors)}const e=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(e||s){const i={token:""};e&&(i.foreground=e),s&&(i.background=s),t.push(i)}t=t.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(i=this.themeData.encodedTokensColors),this._tokenTheme=H_.createFromRawTokenTheme(t,i)}return this._tokenTheme}getTokenStyleMetadata(t,i,e){const s=this.tokenTheme._match([t].concat(i).join(".")).metadata,n=op.getForeground(s),o=op.getFontStyle(s);return{foreground:n,italic:!!(1&o),bold:!!(2&o),underline:!!(4&o),strikethrough:!!(8&o)}}}function uV(t){return t===nV||t===oV||t===rV||t===hV}function dV(t){switch(t){case nV:return Y_;case oV:return __;case rV:return V_;case hV:return J_}}function fV(t){const i=dV(t);return new lV(t,i)}const gV=za("themeService");var AV=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},pV=function(t,i){return function(e,s){i(e,s,t)}};let wV=class extends te{constructor(t,i,e){super(),this._contextKeyService=t,this._layoutService=i,this._configurationService=e,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new de,this._onDidChangeReducedMotion=new de,this._accessibilityModeEnabledContext=kw.bindTo(this._contextKeyService);const s=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration((t=>{t.affectsConfiguration("editor.accessibilitySupport")&&(s(),this._onDidChangeScreenReaderOptimized.fire()),t.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())}))),s(),this._register(this.onDidChangeScreenReaderOptimized((()=>s())));const n=Wn.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=n.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(n)}initReducedMotionListeners(t){this._register(rc(t,"change",(()=>{this._systemMotionReduced=t.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()})));const i=()=>{const t=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",t),this._layoutService.mainContainer.classList.toggle("enable-motion",!t)};i(),this._register(this.onDidChangeReducedMotion((()=>i())))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const t=this._configurationService.getValue("editor.accessibilitySupport");return t==="on"||t==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const t=this._configMotionReduced;return t==="on"||t==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};wV=AV([pV(0,Nl),pV(1,PL),pV(2,Id)],wV);var mV,vV,bV=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},yV=function(t,i){return function(e,s){i(e,s,t)}};let kV=class{constructor(t,i){this._commandService=t,this._hiddenStates=new xV(i)}createMenu(t,i,e){return new EV(t,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...e},this._commandService,i)}resetHiddenStates(t){this._hiddenStates.reset(t)}};kV=bV([yV(0,$a),yV(1,cH)],kV);let xV=mV=class{constructor(t){this._storageService=t,this._disposables=new Zi,this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const i=t.get(mV._key,0,"{}");this._data=JSON.parse(i)}catch{this._data=Object.create(null)}this._disposables.add(t.onDidChangeValue(0,mV._key,this._disposables)((()=>{if(!this._ignoreChangeEvent)try{const i=t.get(mV._key,0,"{}");this._data=JSON.parse(i)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()})))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(t,i){var e;return(e=this._hiddenByDefaultCache.get(`${t.id}/${i}`))!==null&&e!==void 0&&e}setDefaultState(t,i,e){this._hiddenByDefaultCache.set(`${t.id}/${i}`,e)}isHidden(t,i){var e,s;const n=this._isHiddenByDefault(t,i),o=(s=(e=this._data[t.id])===null||e===void 0?void 0:e.includes(i))!==null&&s!==void 0&&s;return n?!o:o}updateHidden(t,i,e){this._isHiddenByDefault(t,i)&&(e=!e);const s=this._data[t.id];if(e)s?s.indexOf(i)<0&&s.push(i):this._data[t.id]=[i];else if(s){const e=s.indexOf(i);e>=0&&function(t,i){const e=t.length-1;i<e&&(t[i]=t[e]),t.pop()}(s,e),s.length===0&&delete this._data[t.id]}this._persist()}reset(t){if(t===void 0)this._data=Object.create(null),this._persist();else{for(const{id:i}of t)this._data[i]&&delete this._data[i];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const t=JSON.stringify(this._data);this._storageService.store(mV._key,t,0,0)}finally{this._ignoreChangeEvent=!1}}};xV._key="menu.hiddenCommands",xV=mV=bV([yV(0,cH)],xV);let CV=vV=class{constructor(t,i,e,s,n){this._id=t,this._hiddenStates=i,this._collectContextKeysForSubmenus=e,this._commandService=s,this._contextKeyService=n,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const t=su.getMenuItems(this._id);let i;t.sort(vV._compareMenuItems);for(const e of t){const t=e.group||"";i&&i[0]===t||(i=[t,[]],this._menuGroups.push(i)),i[1].push(e),this._collectContextKeys(e)}}_collectContextKeys(t){if(vV._fillInKbExprKeys(t.when,this._structureContextKeys),Zl(t)){if(t.command.precondition&&vV._fillInKbExprKeys(t.command.precondition,this._preconditionContextKeys),t.command.toggled){const i=t.command.toggled.condition||t.command.toggled;vV._fillInKbExprKeys(i,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&su.getMenuItems(t.submenu).forEach(this._collectContextKeys,this)}createActionGroups(t){const i=[];for(const e of this._menuGroups){const[s,n]=e,o=[];for(const i of n)if(this._contextKeyService.contextMatchesRules(i.when)){const e=Zl(i);e&&this._hiddenStates.setDefaultState(this._id,i.command.id,!!i.isHiddenByDefault);const s=BV(this._id,e?i.command:i,this._hiddenStates);if(e)o.push(new ou(i.command,i.alt,t,s,this._contextKeyService,this._commandService));else{const e=new vV(i.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._contextKeyService).createActionGroups(t),n=Ya.join(...e.map((t=>t[1])));n.length>0&&o.push(new nu(i,s,n))}}o.length>0&&i.push([s,o])}return i}static _fillInKbExprKeys(t,i){if(t)for(const e of t.keys())i.add(e)}static _compareMenuItems(t,i){const e=t.group,s=i.group;if(e!==s){if(!e)return 1;if(!s||e==="navigation")return-1;if(s==="navigation")return 1;const t=e.localeCompare(s);if(t!==0)return t}const n=t.order||0,o=i.order||0;return n<o?-1:n>o?1:vV._compareTitles(Zl(t)?t.command.title:t.title,Zl(i)?i.command.title:i.title)}static _compareTitles(t,i){const e=typeof t=="string"?t:t.original,s=typeof i=="string"?i:i.original;return e.localeCompare(s)}};CV=vV=bV([yV(3,$a),yV(4,Nl)],CV);let EV=class{constructor(t,i,e,s,n){this._disposables=new Zi,this._menuInfo=new CV(t,i,e.emitEventsForSubmenuChanges,s,n);const o=new Er((()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})}),e.eventDebounceDelay);this._disposables.add(o),this._disposables.add(su.onDidChangeMenu((i=>{i.has(t)&&o.schedule()})));const r=this._disposables.add(new Zi);this._onDidChange=new Ae({onWillAddFirstListener:()=>{r.add(n.onDidChangeContext((t=>{const i=t.affectsSome(this._menuInfo.structureContextKeys),e=t.affectsSome(this._menuInfo.preconditionContextKeys),s=t.affectsSome(this._menuInfo.toggledContextKeys);(i||e||s)&&this._onDidChange.fire({menu:this,isStructuralChange:i,isEnablementChange:e,isToggleChange:s})}))),r.add(i.onDidChange((t=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})})))},onDidRemoveLastListener:r.clear.bind(r),delay:e.eventDebounceDelay,merge:t=>{let i=!1,e=!1,s=!1;for(const n of t)if(i=i||n.isStructuralChange,e=e||n.isEnablementChange,s=s||n.isToggleChange,i&&e&&s)break;return{menu:this,isStructuralChange:i,isEnablementChange:e,isToggleChange:s}}}),this.onDidChange=this._onDidChange.event}getActions(t){return this._menuInfo.createActionGroups(t)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};function BV(t,i,e){const s=i.submenu!==void 0?i.submenu.id:i.id,n=typeof i.title=="string"?i.title:i.title.value,o=Ja({id:`hide/${t.id}/${s}`,label:st(0,"Hide '{0}'",n),run(){e.updateHidden(t,s,!0)}}),r=Ja({id:`toggle/${t.id}/${s}`,label:n,get checked(){return!e.isHidden(t,s)},run(){e.updateHidden(t,s,!!this.checked)}});return{hide:o,toggle:r,get isHidden(){return!r.checked}}}EV=bV([yV(3,$a),yV(4,Nl)],EV);var DV,MV=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},SV=function(t,i){return function(e,s){i(e,s,t)}};let FV=DV=class extends te{constructor(t,i){super(),this.layoutService=t,this.logService=i,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(Ko||$o)&&this.installWebKitWriteTextWorkaround(),this._register(he.runAndSubscribe(ic,(({window:t,disposables:i})=>{i.add(rc(t.document,"copy",(()=>this.clearResources())))}),{window:Wn,disposables:this._store}))}installWebKitWriteTextWorkaround(){const t=()=>{const t=new Fr;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch((async i=>{i instanceof Error&&i.name==="NotAllowedError"&&t.isRejected||this.logService.error(i)}))};this._register(he.runAndSubscribe(this.layoutService.onDidAddContainer,(({container:i,disposables:e})=>{e.add(rc(i,"click",t)),e.add(rc(i,"keydown",t))}),{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(t,i){if(this.writeResources([]),i)this.mapTextToType.set(i,t);else{if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(t);try{return await navigator.clipboard.writeText(t)}catch(t){console.error(t)}this.fallbackWriteText(t)}}fallbackWriteText(t){const i=Nc(),e=i.activeElement,s=i.body.appendChild(ha("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=t,s.focus(),s.select(),i.execCommand("copy"),e instanceof HTMLElement&&e.focus(),i.body.removeChild(s)}async readText(t){if(t)return this.mapTextToType.get(t)||"";try{return await navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(t){this.findText=t}async writeResources(t){t.length===0?this.clearResources():(this.resources=t,this.resourcesStateHash=await this.computeResourcesStateHash())}async readResources(){const t=await this.computeResourcesStateHash();return this.resourcesStateHash!==t&&this.clearResources(),this.resources}async computeResourcesStateHash(){if(this.resources.length!==0)return Uh((await this.readText()).substring(0,DV.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearResources(){this.resources=[],this.resourcesStateHash=void 0}};FV.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,FV=DV=MV([SV(0,PL),SV(1,au)],FV);const IV=za("clipboardService");var LV=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},RV=function(t,i){return function(e,s){i(e,s,t)}};const TV="data-keybinding-context";let NV=class{constructor(t,i){this._id=t,this._parent=i,this._value=Object.create(null),this._value._contextId=t}get value(){return{...this._value}}setValue(t,i){return this._value[t]!==i&&(this._value[t]=i,!0)}removeValue(t){return t in this._value&&(delete this._value[t],!0)}getValue(t){const i=this._value[t];return i===void 0&&this._parent?this._parent.getValue(t):i}};class QV extends NV{constructor(){super(-1,null)}setValue(t,i){return!1}removeValue(t){return!1}getValue(t){}}QV.INSTANCE=new QV;class OV extends NV{constructor(t,i,e){super(t,null),this._configurationService=i,this._values=SO.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration((t=>{if(t.source===7){const t=Array.from(this._values,(([t])=>t));this._values.clear(),e.fire(new HV(t))}else{const i=[];for(const e of t.affectedKeys){const t=`config.${e}`,s=this._values.findSuperstr(t);s!==void 0&&(i.push(...Wt.map(s,(([t])=>t))),this._values.deleteSuperstr(t)),this._values.has(t)&&(i.push(t),this._values.delete(t))}e.fire(new HV(i))}}))}dispose(){this._listener.dispose()}getValue(t){if(t.indexOf(OV._keyPrefix)!==0)return super.getValue(t);if(this._values.has(t))return this._values.get(t);const i=t.substr(OV._keyPrefix.length),e=this._configurationService.getValue(i);let s;switch(typeof e){case"number":case"boolean":case"string":s=e;break;default:s=Array.isArray(e)?JSON.stringify(e):e}return this._values.set(t,s),s}setValue(t,i){return super.setValue(t,i)}removeValue(t){return super.removeValue(t)}}OV._keyPrefix="config.";class zV{constructor(t,i,e){this._service=t,this._key=i,this._defaultValue=e,this.reset()}set(t){this._service.setContext(this._key,t)}reset(){this._defaultValue===void 0?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class UV{constructor(t){this.key=t}affectsSome(t){return t.has(this.key)}allKeysContainedIn(t){return this.affectsSome(t)}}class HV{constructor(t){this.keys=t}affectsSome(t){for(const i of this.keys)if(t.has(i))return!0;return!1}allKeysContainedIn(t){return this.keys.every((i=>t.has(i)))}}class PV{constructor(t){this.events=t}affectsSome(t){for(const i of this.events)if(i.affectsSome(t))return!0;return!1}allKeysContainedIn(t){return this.events.every((i=>i.allKeysContainedIn(t)))}}class jV extends te{constructor(t){super(),this._onDidChangeContext=this._register(new ge({merge:t=>new PV(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=t}createKey(t,i){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new zV(this,t,i)}bufferChangeEvents(t){this._onDidChangeContext.pause();try{t()}finally{this._onDidChangeContext.resume()}}createScoped(t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new YV(this,t)}contextMatchesRules(t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const i=this.getContextValuesContainer(this._myContextId);return!t||t.evaluate(i)}getContextKeyValue(t){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(t)}setContext(t,i){if(this._isDisposed)return;const e=this.getContextValuesContainer(this._myContextId);e&&e.setValue(t,i)&&this._onDidChangeContext.fire(new UV(t))}removeContext(t){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(t)&&this._onDidChangeContext.fire(new UV(t))}getContext(t){return this._isDisposed?QV.INSTANCE:this.getContextValuesContainer(function(t){for(;t;){if(t.hasAttribute(TV)){const i=t.getAttribute(TV);return i?parseInt(i,10):NaN}t=t.parentElement}return 0}(t))}dispose(){super.dispose(),this._isDisposed=!0}}let WV=class extends jV{constructor(t){super(0),this._contexts=new Map,this._lastContextId=0;const i=this._register(new OV(this._myContextId,t,this._onDidChangeContext));this._contexts.set(this._myContextId,i)}getContextValuesContainer(t){return this._isDisposed?QV.INSTANCE:this._contexts.get(t)||QV.INSTANCE}createChildContext(t=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const i=++this._lastContextId;return this._contexts.set(i,new NV(i,this.getContextValuesContainer(t))),i}disposeContext(t){this._isDisposed||this._contexts.delete(t)}};WV=LV([RV(0,Id)],WV);class YV extends jV{constructor(t,i){if(super(t.createChildContext()),this._parentChangeListener=this._register(new ie),this._parent=t,this._updateParentChangeListener(),this._domNode=i,this._domNode.hasAttribute(TV)){let t="";this._domNode.classList&&(t=Array.from(this._domNode.classList.values()).join(", ")),console.error("Element already has context attribute"+(t?": "+t:""))}this._domNode.setAttribute(TV,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext((t=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;var e;e=i,t.allKeysContainedIn(new Set(Object.keys(e)))||this._onDidChangeContext.fire(t)}))}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(TV),super.dispose())}getContextValuesContainer(t){return this._isDisposed?QV.INSTANCE:this._parent.getContextValuesContainer(t)}createChildContext(t=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(t)}disposeContext(t){this._isDisposed||this._parent.disposeContext(t)}}Xa.registerCommand("_setContext",(function(t,i,e){t.get(Nl).createKey(String(i),function(t){return $(t,(t=>typeof t=="object"&&t.$mid===1?fs.revive(t).toString():t instanceof fs?t.toString():void 0))}(e))})),Xa.registerCommand({id:"getContextKeyInfo",handler:()=>[...Tl.all()].sort(((t,i)=>t.key.localeCompare(i.key))),metadata:{description:st(0,"A command that returns information about context keys"),args:[]}}),Xa.registerCommand("_generateContextKeyInfo",(function(){const t=[],i=new Set;for(const e of Tl.all())i.has(e.key)||(i.add(e.key),t.push(e));t.sort(((t,i)=>t.key.localeCompare(i.key))),console.log(JSON.stringify(t,void 0,2))}));let _V=class{constructor(t,i){this.key=t,this.data=i,this.incoming=new Map,this.outgoing=new Map}};class VV{constructor(t){this._hashFn=t,this._nodes=new Map}roots(){const t=[];for(const i of this._nodes.values())i.outgoing.size===0&&t.push(i);return t}insertEdge(t,i){const e=this.lookupOrInsertNode(t),s=this.lookupOrInsertNode(i);e.outgoing.set(s.key,s),s.incoming.set(e.key,e)}removeNode(t){const i=this._hashFn(t);this._nodes.delete(i);for(const t of this._nodes.values())t.outgoing.delete(i),t.incoming.delete(i)}lookupOrInsertNode(t){const i=this._hashFn(t);let e=this._nodes.get(i);return e||(e=new _V(i,t),this._nodes.set(i,e)),e}isEmpty(){return this._nodes.size===0}toString(){const t=[];for(const[i,e]of this._nodes)t.push(`${i}\n\t(-> incoming)[${[...e.incoming.keys()].join(", ")}]\n\t(outgoing ->)[${[...e.outgoing.keys()].join(",")}]\n`);return t.join(`\n`)}findCycleSlow(){for(const[t,i]of this._nodes){const e=new Set([t]),s=this._findCycle(i,e);if(s)return s}}_findCycle(t,i){for(const[e,s]of t.outgoing){if(i.has(e))return[...i,e].join(" -> ");i.add(e);const t=this._findCycle(s,i);if(t)return t;i.delete(e)}}}class JV extends Error{constructor(t){var i;super("cyclic dependency between services"),this.message=(i=t.findCycleSlow())!==null&&i!==void 0?i:`UNABLE to detect cycle, dumping graph: \n${t.toString()}`}}class GV{constructor(t=new fL,i=!1,e,s=!1){var n;this._services=t,this._strict=i,this._parent=e,this._enableTracing=s,this._activeInstantiations=new Set,this._services.set(Oa,this),this._globalGraph=s?(n=e==null?void 0:e._globalGraph)!==null&&n!==void 0?n:new VV((t=>t)):void 0}createChild(t){return new GV(t,this._strict,this,this._enableTracing)}invokeFunction(t,...i){const e=KV.traceInvocation(this._enableTracing,t);let s=!1;try{return t({get:t=>{if(s)throw Yi("service accessor is only valid during the invocation of its target method");const i=this._getOrCreateServiceInstance(t,e);if(!i)throw new Error(`[invokeFunction] unknown service '${t}'`);return i}},...i)}finally{s=!0,e.stop()}}createInstance(t,...i){let e,s;return t instanceof zd?(e=KV.traceCreation(this._enableTracing,t.ctor),s=this._createInstance(t.ctor,t.staticArguments.concat(i),e)):(e=KV.traceCreation(this._enableTracing,t),s=this._createInstance(t,i,e)),e.stop(),s}_createInstance(t,i=[],e){const s=Qa.getServiceDependencies(t).sort(((t,i)=>t.index-i.index)),n=[];for(const i of s){const s=this._getOrCreateServiceInstance(i.id,e);s||this._throwIfStrict(`[createInstance] ${t.name} depends on UNKNOWN service ${i.id}.`,!1),n.push(s)}const o=s.length>0?s[0].index:i.length;if(i.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${i.length} static arguments`);const e=o-i.length;i=e>0?i.concat(new Array(e)):i.slice(0,o)}return Reflect.construct(t,i.concat(n))}_setServiceInstance(t,i){if(this._services.get(t)instanceof zd)this._services.set(t,i);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(t,i)}}_getServiceInstanceOrDescriptor(t){const i=this._services.get(t);return!i&&this._parent?this._parent._getServiceInstanceOrDescriptor(t):i}_getOrCreateServiceInstance(t,i){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(t));const e=this._getServiceInstanceOrDescriptor(t);return e instanceof zd?this._safeCreateAndCacheServiceInstance(t,e,i.branch(t,!0)):(i.branch(t,!1),e)}_safeCreateAndCacheServiceInstance(t,i,e){if(this._activeInstantiations.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this._activeInstantiations.add(t);try{return this._createAndCacheServiceInstance(t,i,e)}finally{this._activeInstantiations.delete(t)}}_createAndCacheServiceInstance(t,i,e){var s;const n=new VV((t=>t.id.toString()));let o=0;const r=[{id:t,desc:i,_trace:e}];for(;r.length;){const i=r.pop();if(n.lookupOrInsertNode(i),o++>1e3)throw new JV(n);for(const e of Qa.getServiceDependencies(i.desc.ctor)){const o=this._getServiceInstanceOrDescriptor(e.id);if(o||this._throwIfStrict(`[createInstance] ${t} depends on ${e.id} which is NOT registered.`,!0),(s=this._globalGraph)===null||s===void 0||s.insertEdge(String(i.id),String(e.id)),o instanceof zd){const t={id:e.id,desc:o,_trace:i._trace.branch(e.id,!0)};n.insertEdge(i,t),r.push(t)}}}for(;;){const t=n.roots();if(t.length===0){if(!n.isEmpty())throw new JV(n);break}for(const{data:i}of t){if(this._getServiceInstanceOrDescriptor(i.id)instanceof zd){const t=this._createServiceInstanceWithOwner(i.id,i.desc.ctor,i.desc.staticArguments,i.desc.supportsDelayedInstantiation,i._trace);this._setServiceInstance(i.id,t)}n.removeNode(i)}}return this._getServiceInstanceOrDescriptor(t)}_createServiceInstanceWithOwner(t,i,e=[],s,n){if(this._services.get(t)instanceof zd)return this._createServiceInstance(t,i,e,s,n);if(this._parent)return this._parent._createServiceInstanceWithOwner(t,i,e,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${i.name}`)}_createServiceInstance(t,i,e=[],s,n){if(s){const s=new GV(void 0,this._strict,this,this._enableTracing);s._globalGraphImplicitDependency=String(t);const o=new Map,r=new Sr((()=>{const t=s._createInstance(i,e,n);for(const[i,e]of o){const s=t[i];if(typeof s=="function")for(const i of e)i.disposable=s.apply(t,i.listener)}return o.clear(),t}));return new Proxy(Object.create(null),{get(t,i){if(!r.isInitialized&&typeof i=="string"&&(i.startsWith("onDid")||i.startsWith("onWill"))){let t=o.get(i);return t||(t=new _t,o.set(i,t)),(e,s,n)=>{if(r.isInitialized)return r.value[i](e,s,n);{const i={listener:[e,s,n],disposable:void 0},o=t.push(i);return qi((()=>{var t;o(),(t=i.disposable)===null||t===void 0||t.dispose()}))}}}if(i in t)return t[i];const e=r.value;let s=e[i];return typeof s!="function"||(s=s.bind(e),t[i]=s),s},set:(t,i,e)=>(r.value[i]=e,!0),getPrototypeOf:t=>i.prototype})}return this._createInstance(i,e,n)}_throwIfStrict(t,i){if(i&&console.warn(t),this._strict)throw new Error(t)}}class KV{static traceInvocation(t,i){return t?new KV(2,i.name||(new Error).stack.split(`\n`).slice(3,4).join(`\n`)):KV._None}static traceCreation(t,i){return t?new KV(1,i.name):KV._None}constructor(t,i){this.type=t,this.name=i,this._start=Date.now(),this._dep=[]}branch(t,i){const e=new KV(3,t.toString());return this._dep.push([t,i,e]),e}stop(){const t=Date.now()-this._start;KV._totals+=t;let i=!1;const e=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${function t(e,s){const n=[],o=new Array(e+1).join("\t");for(const[r,h,c]of s._dep)if(h&&c){i=!0,n.push(`${o}CREATES -> ${r}`);const s=t(e+1,c);s&&n.push(s)}else n.push(`${o}uses -> ${r}`);return n.join(`\n`)}(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${KV._totals.toFixed(2)}ms)`];(t>2||i)&&KV.all.add(e.join(`\n`))}}KV.all=new Set,KV._None=new class extends KV{constructor(){super(0,null)}stop(){}branch(){return this}},KV._totals=0;const $V=new Set([Lh.inMemory,Lh.vscodeSourceControl,Lh.walkThrough,Lh.walkThroughSnippet,Lh.vscodeChatCodeBlock]);class XV{constructor(){this._byResource=new Jf,this._byOwner=new Map}set(t,i,e){let s=this._byResource.get(t);s||(s=new Map,this._byResource.set(t,s)),s.set(i,e);let n=this._byOwner.get(i);n||(n=new Jf,this._byOwner.set(i,n)),n.set(t,e)}get(t,i){const e=this._byResource.get(t);return e==null?void 0:e.get(i)}delete(t,i){let e=!1,s=!1;const n=this._byResource.get(t);n&&(e=n.delete(i));const o=this._byOwner.get(i);if(o&&(s=o.delete(t)),e!==s)throw new Error("illegal state");return e&&s}values(t){var i,e,s,n;return typeof t=="string"?(e=(i=this._byOwner.get(t))===null||i===void 0?void 0:i.values())!==null&&e!==void 0?e:Wt.empty():fs.isUri(t)?(n=(s=this._byResource.get(t))===null||s===void 0?void 0:s.values())!==null&&n!==void 0?n:Wt.empty():Wt.map(Wt.concat(...this._byOwner.values()),(t=>t[1]))}}class qV{constructor(t){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Jf,this._service=t,this._subscription=t.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(t){for(const i of t){const t=this._data.get(i);t&&this._substract(t);const e=this._resourceStats(i);this._add(e),this._data.set(i,e)}}_resourceStats(t){const i={errors:0,warnings:0,infos:0,unknowns:0};if($V.has(t.scheme))return i;for(const{severity:e}of this._service.read({resource:t}))e===iP.Error?i.errors+=1:e===iP.Warning?i.warnings+=1:e===iP.Info?i.infos+=1:i.unknowns+=1;return i}_substract(t){this.errors-=t.errors,this.warnings-=t.warnings,this.infos-=t.infos,this.unknowns-=t.unknowns}_add(t){this.errors+=t.errors,this.warnings+=t.warnings,this.infos+=t.infos,this.unknowns+=t.unknowns}}class ZV{constructor(){this._onMarkerChanged=new Ae({delay:0,merge:ZV._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new XV,this._stats=new qV(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(t,i){for(const e of i||[])this.changeOne(t,e,[])}changeOne(t,i,e){if(A(e))this._data.delete(i,t)&&this._onMarkerChanged.fire([i]);else{const s=[];for(const n of e){const e=ZV._toMarker(t,i,n);e&&s.push(e)}this._data.set(i,t,s),this._onMarkerChanged.fire([i])}}static _toMarker(t,i,e){let{code:s,severity:n,message:o,source:r,startLineNumber:h,startColumn:c,endLineNumber:a,endColumn:l,relatedInformation:u,tags:d}=e;if(o)return h=h>0?h:1,c=c>0?c:1,a=a>=h?a:h,l=l>0?l:c,{resource:i,owner:t,code:s,severity:n,message:o,source:r,startLineNumber:h,startColumn:c,endLineNumber:a,endColumn:l,relatedInformation:u,tags:d}}changeAll(t,i){const e=[],s=this._data.values(t);if(s)for(const i of s){const s=Wt.first(i);s&&(e.push(s.resource),this._data.delete(s.resource,t))}if(p(i)){const s=new Jf;for(const{resource:n,marker:o}of i){const i=ZV._toMarker(t,n,o);if(!i)continue;const r=s.get(n);r?r.push(i):(s.set(n,[i]),e.push(n))}for(const[i,e]of s)this._data.set(i,t,e)}e.length>0&&this._onMarkerChanged.fire(e)}read(t=Object.create(null)){let{owner:i,resource:e,severities:s,take:n}=t;if((!n||n<0)&&(n=-1),i&&e){const t=this._data.get(e,i);if(t){const i=[];for(const e of t)if(ZV._accept(e,s)){const t=i.push(e);if(n>0&&t===n)break}return i}return[]}if(i||e){const t=this._data.values(e??i),o=[];for(const i of t)for(const t of i)if(ZV._accept(t,s)){const i=o.push(t);if(n>0&&i===n)return o}return o}{const t=[];for(const i of this._data.values())for(const e of i)if(ZV._accept(e,s)){const i=t.push(e);if(n>0&&i===n)return t}return t}}static _accept(t,i){return i===void 0||(i&t.severity)===t.severity}static _merge(t){const i=new Jf;for(const e of t)for(const t of e)i.set(t,!0);return Array.from(i.keys())}}class tJ extends te{constructor(){super(...arguments),this._configurationModel=new XQ}get configurationModel(){return this._configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=new XQ;const t=Vl.as(_d).getConfigurationProperties();this.updateConfigurationModel(Object.keys(t),t)}updateConfigurationModel(t,i){const e=this.getConfigurationDefaultOverrides();for(const s of t){const t=e[s],n=i[s];t!==void 0?this._configurationModel.addValue(s,t):n?this._configurationModel.addValue(s,n.default):this._configurationModel.removeValue(s)}}}const iJ=za("accessibilitySignalService");class eJ{static register(t){return new eJ(t.fileName)}constructor(t){this.fileName=t}}eJ.error=eJ.register({fileName:"error.mp3"}),eJ.warning=eJ.register({fileName:"warning.mp3"}),eJ.foldedArea=eJ.register({fileName:"foldedAreas.mp3"}),eJ.break=eJ.register({fileName:"break.mp3"}),eJ.quickFixes=eJ.register({fileName:"quickFixes.mp3"}),eJ.taskCompleted=eJ.register({fileName:"taskCompleted.mp3"}),eJ.taskFailed=eJ.register({fileName:"taskFailed.mp3"}),eJ.terminalBell=eJ.register({fileName:"terminalBell.mp3"}),eJ.diffLineInserted=eJ.register({fileName:"diffLineInserted.mp3"}),eJ.diffLineDeleted=eJ.register({fileName:"diffLineDeleted.mp3"}),eJ.diffLineModified=eJ.register({fileName:"diffLineModified.mp3"}),eJ.chatRequestSent=eJ.register({fileName:"chatRequestSent.mp3"}),eJ.chatResponsePending=eJ.register({fileName:"chatResponsePending.mp3"}),eJ.chatResponseReceived1=eJ.register({fileName:"chatResponseReceived1.mp3"}),eJ.chatResponseReceived2=eJ.register({fileName:"chatResponseReceived2.mp3"}),eJ.chatResponseReceived3=eJ.register({fileName:"chatResponseReceived3.mp3"}),eJ.chatResponseReceived4=eJ.register({fileName:"chatResponseReceived4.mp3"}),eJ.clear=eJ.register({fileName:"clear.mp3"}),eJ.save=eJ.register({fileName:"save.mp3"}),eJ.format=eJ.register({fileName:"format.mp3"}),eJ.voiceRecordingStarted=eJ.register({fileName:"voiceRecordingStarted.mp3"}),eJ.voiceRecordingStopped=eJ.register({fileName:"voiceRecordingStopped.mp3"});class sJ{constructor(t){this.randomOneOf=t}}class nJ{static register(t){const i=new sJ("randomOneOf"in t.sound?t.sound.randomOneOf:[t.sound]),e=new nJ(i,t.name,t.legacySoundSettingsKey,t.settingsKey,t.legacyAnnouncementSettingsKey,t.announcementMessage);return nJ._signals.add(e),e}constructor(t,i,e,s,n,o){this.sound=t,this.name=i,this.legacySoundSettingsKey=e,this.settingsKey=s,this.legacyAnnouncementSettingsKey=n,this.announcementMessage=o}}nJ._signals=new Set,nJ.error=nJ.register({name:st(0,"Error on Line"),sound:eJ.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:st(0,"Error"),settingsKey:"accessibility.signals.lineHasError"}),nJ.warning=nJ.register({name:st(0,"Warning on Line"),sound:eJ.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:st(0,"Warning"),settingsKey:"accessibility.signals.lineHasWarning"}),nJ.foldedArea=nJ.register({name:st(0,"Folded Area on Line"),sound:eJ.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:st(0,"Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),nJ.break=nJ.register({name:st(0,"Breakpoint on Line"),sound:eJ.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:st(0,"Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),nJ.inlineSuggestion=nJ.register({name:st(0,"Inline Suggestion on Line"),sound:eJ.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),nJ.terminalQuickFix=nJ.register({name:st(0,"Terminal Quick Fix"),sound:eJ.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:st(0,"Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),nJ.onDebugBreak=nJ.register({name:st(0,"Debugger Stopped on Breakpoint"),sound:eJ.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:st(0,"Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),nJ.noInlayHints=nJ.register({name:st(0,"No Inlay Hints on Line"),sound:eJ.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:st(0,"No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),nJ.taskCompleted=nJ.register({name:st(0,"Task Completed"),sound:eJ.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:st(0,"Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),nJ.taskFailed=nJ.register({name:st(0,"Task Failed"),sound:eJ.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:st(0,"Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),nJ.terminalCommandFailed=nJ.register({name:st(0,"Terminal Command Failed"),sound:eJ.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:st(0,"Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),nJ.terminalBell=nJ.register({name:st(0,"Terminal Bell"),sound:eJ.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:st(0,"Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),nJ.notebookCellCompleted=nJ.register({name:st(0,"Notebook Cell Completed"),sound:eJ.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:st(0,"Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),nJ.notebookCellFailed=nJ.register({name:st(0,"Notebook Cell Failed"),sound:eJ.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:st(0,"Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),nJ.diffLineInserted=nJ.register({name:st(0,"Diff Line Inserted"),sound:eJ.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),nJ.diffLineDeleted=nJ.register({name:st(0,"Diff Line Deleted"),sound:eJ.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),nJ.diffLineModified=nJ.register({name:st(0,"Diff Line Modified"),sound:eJ.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),nJ.chatRequestSent=nJ.register({name:st(0,"Chat Request Sent"),sound:eJ.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:st(0,"Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),nJ.chatResponseReceived=nJ.register({name:st(0,"Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[eJ.chatResponseReceived1,eJ.chatResponseReceived2,eJ.chatResponseReceived3,eJ.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),nJ.chatResponsePending=nJ.register({name:st(0,"Chat Response Pending"),sound:eJ.chatResponsePending,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.chatResponsePending",announcementMessage:st(0,"Chat Response Pending"),settingsKey:"accessibility.signals.chatResponsePending"}),nJ.clear=nJ.register({name:st(0,"Clear"),sound:eJ.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:st(0,"Clear"),settingsKey:"accessibility.signals.clear"}),nJ.save=nJ.register({name:st(0,"Save"),sound:eJ.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:st(0,"Save"),settingsKey:"accessibility.signals.save"}),nJ.format=nJ.register({name:st(0,"Format"),sound:eJ.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:st(0,"Format"),settingsKey:"accessibility.signals.format"}),nJ.voiceRecordingStarted=nJ.register({name:st(0,"Voice Recording Started"),sound:eJ.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),nJ.voiceRecordingStopped=nJ.register({name:st(0,"Voice Recording Stopped"),sound:eJ.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});class oJ extends te{constructor(t,i=[]){super(),this.logger=new gu([t,...i]),this._register(t.onDidChangeLogLevel((t=>this.setLevel(t))))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(t){this.logger.setLevel(t)}getLevel(){return this.logger.getLevel()}trace(t,...i){this.logger.trace(t,...i)}debug(t,...i){this.logger.debug(t,...i)}info(t,...i){this.logger.info(t,...i)}warn(t,...i){this.logger.warn(t,...i)}error(t,...i){this.logger.error(t,...i)}}const rJ=[];function hJ(t){rJ.push(t)}function cJ(){return rJ.slice(0)}var aJ=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},lJ=function(t,i){return function(e,s){i(e,s,t)}};class uJ{constructor(t){this.disposed=!1,this.model=t,this._onWillDispose=new de}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let dJ=class{constructor(t){this.modelService=t}createModelReference(t){const i=this.modelService.getModel(t);return i?Promise.resolve(new se(new uJ(i))):Promise.reject(new Error("Model not found"))}};dJ=aJ([lJ(0,Ha)],dJ);class fJ{show(){return fJ.NULL_PROGRESS_RUNNER}async showWhile(t,i){await t}}fJ.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class gJ{info(t){return this.notify({severity:AL.Info,message:t})}warn(t){return this.notify({severity:AL.Warning,message:t})}error(t){return this.notify({severity:AL.Error,message:t})}notify(t){switch(t.severity){case AL.Error:console.error(t.message);break;case AL.Warning:console.warn(t.message);break;default:console.log(t.message)}return gJ.NO_OP}prompt(t,i,e,s){return gJ.NO_OP}status(t,i){return te.None}}gJ.NO_OP=new class{};let AJ=class{constructor(t){this._onWillExecuteCommand=new de,this._onDidExecuteCommand=new de,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=t}executeCommand(t,...i){const e=Xa.getCommand(t);if(!e)return Promise.reject(new Error(`command '${t}' not found`));try{this._onWillExecuteCommand.fire({commandId:t,args:i});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[e.handler,...i]);return this._onDidExecuteCommand.fire({commandId:t,args:i}),Promise.resolve(s)}catch(t){return Promise.reject(t)}}};AJ=aJ([lJ(0,Oa)],AJ);let pJ=class extends cO{constructor(t,i,e,s,n,o){super(t,i,e,s,n),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const r=t=>{const i=new Zi;i.add(rc(t,$c.KEY_DOWN,(t=>{const i=new hr(t);this._dispatch(i,i.target)&&(i.preventDefault(),i.stopPropagation())}))),i.add(rc(t,$c.KEY_UP,(t=>{const i=new hr(t);this._singleModifierDispatch(i,i.target)&&i.preventDefault()}))),this._domNodeListeners.push(new wJ(t,i))},h=t=>{for(let i=0;i<this._domNodeListeners.length;i++){const e=this._domNodeListeners[i];e.domNode===t&&(this._domNodeListeners.splice(i,1),e.dispose())}},c=t=>{t.getOption(61)||r(t.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove((t=>{t.getOption(61)||h(t.getContainerDomNode())}))),o.listCodeEditors().forEach(c);const a=t=>{r(t.getContainerDomNode())};this._register(o.onDiffEditorAdd(a)),this._register(o.onDiffEditorRemove((t=>{h(t.getContainerDomNode())}))),o.listDiffEditors().forEach(a)}addDynamicKeybinding(t,i,e,s){return Xi(Xa.registerCommand(t,e),this.addDynamicKeybindings([{keybinding:i,command:t,when:s}]))}addDynamicKeybindings(t){const i=t.map((t=>{var i;return{keybinding:Zo(t.keybinding,Rt),command:(i=t.command)!==null&&i!==void 0?i:null,commandArgs:t.commandArgs,when:t.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(i),this.updateResolver(),qi((()=>{for(let t=0;t<this._dynamicKeybindings.length;t++)if(this._dynamicKeybindings[t]===i[0])return this._dynamicKeybindings.splice(t,i.length),void this.updateResolver()}))}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const t=this._toNormalizedKeybindingItems(Gl.getDefaultKeybindings(),!0),i=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new nO(t,i,(t=>this._log(t)))}return this._cachedResolver}_documentHasFocus(){return Wn.document.hasFocus()}_toNormalizedKeybindingItems(t,i){const e=[];let s=0;for(const n of t){const t=n.when||void 0,o=n.keybinding;if(o){const r=vO.resolveKeybinding(o,Rt);for(const o of r)e[s++]=new lO(o,n.command,n.commandArgs,t,i,null,!1)}else e[s++]=new lO(void 0,n.command,n.commandArgs,t,i,null,!1)}return e}resolveKeyboardEvent(t){const i=new ir(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,t.keyCode);return new vO([i],Rt)}};pJ=aJ([lJ(0,Nl),lJ(1,$a),lJ(2,cu),lJ(3,wL),lJ(4,au),lJ(5,Ua)],pJ);class wJ extends te{constructor(t,i){super(),this.domNode=t,this._register(i)}}function mJ(t){return t&&typeof t=="object"&&(!t.overrideIdentifier||typeof t.overrideIdentifier=="string")&&(!t.resource||t.resource instanceof fs)}class vJ{constructor(){this._onDidChangeConfiguration=new de,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new tJ;this._configuration=new tO(t.reload(),new XQ,new XQ,new XQ),t.dispose()}getValue(t,i){const e=typeof t=="string"?t:void 0,s=mJ(t)?t:mJ(i)?i:{};return this._configuration.getValue(e,s,void 0)}updateValues(t){const i={data:this._configuration.toData()},e=[];for(const i of t){const[t,s]=i;this.getValue(t)!==s&&(this._configuration.updateValue(t,s),e.push(t))}if(e.length>0){const t=new iO({keys:e,overrides:[]},i,this._configuration);t.source=8,this._onDidChangeConfiguration.fire(t)}return Promise.resolve()}updateValue(t,i,e,s){return this.updateValues([[t,i]])}inspect(t,i={}){return this._configuration.inspect(t,i,void 0)}}let bJ=class{constructor(t,i,e){this.configurationService=t,this.modelService=i,this.languageService=e,this._onDidChangeConfiguration=new de,this.configurationService.onDidChangeConfiguration((t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(i,e)=>t.affectsConfiguration(e)})}))}getValue(t,i,e){const s=Cs.isIPosition(i)?i:null,n=s?typeof e=="string"?e:void 0:typeof i=="string"?i:void 0,o=t?this.getLanguage(t,s):void 0;return n===void 0?this.configurationService.getValue({resource:t,overrideIdentifier:o}):this.configurationService.getValue(n,{resource:t,overrideIdentifier:o})}getLanguage(t,i){const e=this.modelService.getModel(t);return e?i?e.getLanguageIdAtPosition(i.lineNumber,i.column):e.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(t)}};bJ=aJ([lJ(0,Id),lJ(1,Ha),lJ(2,Od)],bJ);let yJ=class{constructor(t){this.configurationService=t}getEOL(t,i){const e=this.configurationService.getValue("files.eol",{overrideIdentifier:i,resource:t});return e&&typeof e=="string"&&e!=="auto"?e:xt||kt?`\n`:`\r\n`}};yJ=aJ([lJ(0,Id)],yJ);class kJ{constructor(){const t=fs.from({scheme:kJ.SCHEME,authority:"model",path:"/"});this.workspace={id:OO,folders:[new NO({uri:t,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(t){return t&&t.scheme===kJ.SCHEME?this.workspace.folders[0]:null}}function xJ(t,i,e){if(!i||!(t instanceof vJ))return;const s=[];Object.keys(i).forEach((t=>{(function(t){return GQ()[`editor.${t}`]||!1})(t)&&s.push([`editor.${t}`,i[t]]),e&&function(t){return GQ()[`diffEditor.${t}`]||!1}(t)&&s.push([`diffEditor.${t}`,i[t]])})),s.length>0&&t.updateValues(s)}kJ.SCHEME="inmemory";let CJ=class{constructor(t){this._modelService=t}hasPreviewHandler(){return!1}async apply(t,i){const e=Array.isArray(t)?t:HQ.convert(t),s=new Map;for(const t of e){if(!(t instanceof PQ))throw new Error("bad edit - only text edits are supported");const i=this._modelService.getModel(t.resource);if(!i)throw new Error("bad edit - model not found");if(typeof t.versionId=="number"&&i.getVersionId()!==t.versionId)throw new Error("bad state - model changed in the meantime");let e=s.get(i);e||(e=[],s.set(i,e)),e.push(KQ.replaceMove(Es.lift(t.textEdit.range),t.textEdit.text))}let n=0,o=0;for(const[t,i]of s)t.pushStackElement(),t.pushEditOperations([],i,(()=>[])),t.pushStackElement(),o+=1,n+=i.length;return{ariaSummary:Kn(_O.bulkEditServiceSummary,n,o),isApplied:n>0}}};CJ=aJ([lJ(0,Ha)],CJ);let EJ=class extends RQ{constructor(t,i){super(t),this._codeEditorService=i}showContextView(t,i,e){if(!i){const t=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();t&&(i=t.getContainerDomNode())}return super.showContextView(t,i,e)}};EJ=aJ([lJ(0,PL),lJ(1,Ua)],EJ);let BJ=class extends VH{constructor(t,i,e,s,n,o){super(t,i,e,s,n,o),this.configure({blockMouse:!1})}};BJ=aJ([lJ(0,cu),lJ(1,wL),lJ(2,cT),lJ(3,Hx),lJ(4,iu),lJ(5,Nl)],BJ);var DJ;Hd(Id,vJ,0),Hd(HA,bJ,0),Hd(PA,yJ,0),Hd(FO,kJ,0),Hd(bO,class{getUriLabel(t,i){return t.scheme==="file"?t.fsPath:t.path}getUriBasenameLabel(t){return BM(t)}},0),Hd(cu,class{publicLog2(){}},0),Hd(VL,class{async confirm(t){return{confirmed:this.doConfirm(t.message,t.detail),checkboxChecked:!1}}doConfirm(t,i){let e=t;return i&&(e=e+`\n\n`+i),Wn.confirm(e)}async prompt(t){var i,e;let s;if(this.doConfirm(t.message,t.detail)){const n=[...(i=t.buttons)!==null&&i!==void 0?i:[]];t.cancelButton&&typeof t.cancelButton!="string"&&typeof t.cancelButton!="boolean"&&n.push(t.cancelButton),s=await((e=n[0])===null||e===void 0?void 0:e.run({checkboxChecked:!1}))}return{result:s}}async error(t,i){await this.prompt({type:AL.Error,message:t,detail:i})}},0),Hd(aR,class{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}},0),Hd(wL,gJ,0),Hd(sP,ZV,0),Hd(Od,class extends sz{constructor(){super()}},0),Hd(gV,class extends te{constructor(){super(),this._onColorThemeChange=this._register(new de),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new de),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new sV,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(nV,fV(nV)),this._knownThemes.set(oV,fV(oV)),this._knownThemes.set(rV,fV(rV)),this._knownThemes.set(hV,fV(hV));const t=this._register(function(t){const i=new Zi,e=i.add(new de),s=q_();return i.add(s.onDidChange((()=>e.fire()))),t&&i.add(t.onDidProductIconThemeChange((()=>e.fire()))),{dispose:()=>i.dispose(),onDidChange:e.event,getCSS(){const i=t?t.getProductIconTheme():new sV,e={},n=t=>{const s=i.getIcon(t);if(!s)return;const n=s.font;return n?(e[n.id]=n.definition,`.codicon-${t.id}:before { content: '${s.fontCharacter}'; font-family: ${fa(n.id)}; }`):`.codicon-${t.id}:before { content: '${s.fontCharacter}'; }`},o=[];for(const t of s.getIcons()){const i=n(t);i&&o.push(i)}for(const t in e){const i=e[t],s=i.weight?`font-weight: ${i.weight};`:"",n=i.style?`font-style: ${i.style};`:"",r=i.src.map((t=>`${da(t.location)} format('${t.format}')`)).join(", ");o.push(`@font-face { src: ${r}; font-family: ${fa(t)};${s}${n} font-display: block; }`)}return o.join(`\n`)}}}(this));this._codiconCSS=t.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(nV),this._onOSSchemeChanged(),this._register(t.onDidChange((()=>{this._codiconCSS=t.getCSS(),this._updateCSS()}))),Yo(Wn,"(forced-colors: active)",(()=>{this._onOSSchemeChanged()}))}registerEditorContainer(t){return Fc(t)?this._registerShadowDomContainer(t):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Uc(void 0,(t=>{t.className="monaco-colors",t.textContent=this._allCSS})),this._styleElements.push(this._globalStyleElement)),te.None}_registerShadowDomContainer(t){const i=Uc(t,(t=>{t.className="monaco-colors",t.textContent=this._allCSS}));return this._styleElements.push(i),{dispose:()=>{for(let t=0;t<this._styleElements.length;t++)if(this._styleElements[t]===i)return void this._styleElements.splice(t,1)}}}defineTheme(t,i){if(!/^[a-z0-9\-]+$/i.test(t))throw new Error("Illegal theme name!");if(!uV(i.base)&&!uV(t))throw new Error("Illegal theme base!");this._knownThemes.set(t,new lV(t,i)),uV(t)&&this._knownThemes.forEach((i=>{i.base===t&&i.notifyBaseUpdated()})),this._theme.themeName===t&&this.setTheme(t)}getColorTheme(){return this._theme}setColorMapOverride(t){this._colorMapOverride=t,this._updateThemeOrColorMap()}setTheme(t){let i;i=this._knownThemes.has(t)?this._knownThemes.get(t):this._knownThemes.get(nV),this._updateActualTheme(i)}_updateActualTheme(t){t&&this._theme!==t&&(this._theme=t,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const t=Wn.matchMedia("(forced-colors: active)").matches;if(t!==dy(this._theme.type)){let i;i=fy(this._theme.type)?t?rV:oV:t?hV:nV,this._updateActualTheme(this._knownThemes.get(i))}}}setAutoDetectHighContrast(t){this._autoDetectHighContrast=t,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const t=[],i={},e={addRule:e=>{i[e]||(t.push(e),i[e]=!0)}};aV.getThemingParticipants().forEach((t=>t(this._theme,e,this._environment)));const s=[];for(const t of cV.getColors()){const i=this._theme.getColor(t.id,!0);i&&s.push(`${Rw(t.id)}: ${i.toString()};`)}e.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${s.join(`\n`)} }`);const n=this._colorMapOverride||this._theme.tokenTheme.getColorMap();e.addRule(function(t){const i=[];for(let e=1,s=t.length;e<s;e++){const s=t[e];i[e]=`.mtk${e} { color: ${s}; }`}return i.push(".mtki { font-style: italic; }"),i.push(".mtkb { font-weight: bold; }"),i.push(".mtku { text-decoration: underline; text-underline-position: under; }"),i.push(".mtks { text-decoration: line-through; }"),i.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),i.join(`\n`)}(n)),this._themeCSS=t.join(`\n`),this._updateCSS(),Gs.setColorMap(n),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._styleElements.forEach((t=>t.textContent=this._allCSS))}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}},0),Hd(au,class extends oJ{constructor(){super(new fu)}},0),Hd(Ha,AP,0),Hd(uw,rP,0),Hd(Nl,WV,0),Hd(yO,class{withProgress(t,i,e){return i({report:()=>{}})}},0),Hd(xO,fJ,0),Hd(cH,class extends lH{constructor(){super(),this.applicationStorage=this._register(new oH(new rH,{hint:sH.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new oH(new rH,{hint:sH.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new oH(new rH,{hint:sH.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage((t=>this.emitDidChangeValue(1,t)))),this._register(this.profileStorage.onDidChangeStorage((t=>this.emitDidChangeValue(0,t)))),this._register(this.applicationStorage.onDidChangeStorage((t=>this.emitDidChangeValue(-1,t))))}getStorage(t){switch(t){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}},0),Hd(tP,JA,0),Hd(UQ,CJ,0),Hd(VO,class{constructor(){this._neverEmitter=new de,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}},0),Hd(Pa,dJ,0),Hd(yw,wV,0),Hd(LW,class{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new Zi,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(t){var i,e;t!==this._lastFocusedWidget&&((i=this._lastFocusedWidget)===null||i===void 0||i.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=t,(e=this._lastFocusedWidget)===null||e===void 0||e.getHTMLElement().classList.add("last-focused"))}register(t,i){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new QU(Uc(),"").style(mH)),this.lists.some((i=>i.widget===t)))throw new Error("Cannot register the same widget multiple times");const e={widget:t,extraContextKeys:i};return this.lists.push(e),Rc(t.getHTMLElement())&&this.setLastFocusedList(t),Xi(t.onDidFocus((()=>this.setLastFocusedList(t))),qi((()=>this.lists.splice(this.lists.indexOf(e),1))),t.onDidDispose((()=>{this.lists=this.lists.filter((t=>t!==e)),this._lastFocusedWidget===t&&this.setLastFocusedList(void 0)})))}dispose(){this.disposables.dispose()}},0),Hd($a,AJ,0),Hd(Hx,pJ,0),Hd(kP,T_,0),Hd(cT,EJ,0),Hd(gT,ZH,0),Hd(IV,FV,0),Hd(aT,BJ,0),Hd(iu,kV,0),Hd(iJ,class{async playSignal(t,i){}},0),function(t){const i=new fL;for(const[t,e]of Pd())i.set(t,e);const e=new GV(i,!0);i.set(Oa,e),t.get=function(t){s||o({});const n=i.get(t);if(!n)throw new Error("Missing service "+t);return n instanceof zd?e.invokeFunction((i=>i.get(t))):n};let s=!1;const n=new de;function o(t){if(s)return e;s=!0;for(const[t,e]of Pd())i.get(t)||i.set(t,e);for(const e in t)if(t.hasOwnProperty(e)){const s=za(e);i.get(s)instanceof zd&&i.set(s,t[e])}const o=cJ();for(const t of o)try{e.createInstance(t)}catch(t){Oi(t)}return n.fire(),e}t.initialize=o,t.withServices=function(t){if(s)return t();const i=new Zi,e=i.add(n.event((()=>{e.dispose(),i.add(t())})));return i}}(DJ||(DJ={}));class MJ{static capture(t){if(t.getScrollTop()===0||t.hasPendingScrollAnimation())return new MJ(t.getScrollTop(),t.getContentHeight(),null,0,null);let i=null,e=0;const s=t.getVisibleRanges();if(s.length>0){i=s[0].getStartPosition();const n=t.getTopForPosition(i.lineNumber,i.column);e=t.getScrollTop()-n}return new MJ(t.getScrollTop(),t.getContentHeight(),i,e,t.getPosition())}constructor(t,i,e,s,n){this._initialScrollTop=t,this._initialContentHeight=i,this._visiblePosition=e,this._visiblePositionScrollDelta=s,this._cursorPosition=n}restore(t){if((this._initialContentHeight!==t.getContentHeight()||this._initialScrollTop!==t.getScrollTop())&&this._visiblePosition){const i=t.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);t.setScrollTop(i+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(t){if(this._initialContentHeight===t.getContentHeight()&&this._initialScrollTop===t.getScrollTop())return;const i=t.getPosition();if(!this._cursorPosition||!i)return;const e=t.getTopForLineNumber(i.lineNumber)-t.getTopForLineNumber(this._cursorPosition.lineNumber);t.setScrollTop(t.getScrollTop()+e)}}function SJ(){return Oe&&!!Oe.VSCODE_DEV}function FJ(t){if(SJ()){const i=function(){IJ||(IJ=new Set);const t=globalThis;return t.$hotReload_applyNewExports||(t.$hotReload_applyNewExports=t=>{const i={config:{mode:void 0},...t};for(const t of IJ){const e=t(i);if(e)return e}}),IJ}();return i.add(t),{dispose(){i.delete(t)}}}return{dispose(){}}}let IJ;function LJ(t,i){const e=new Zi,s=t.createDecorationsCollection();return e.add(tU({debugName:()=>`Apply decorations from ${i.debugName}`},(t=>{const e=i.read(t);s.set(e)}))),e.add({dispose:()=>{s.clear()}}),e}function RJ(t,i){return t.appendChild(i),qi((()=>{t.removeChild(i)}))}SJ()&&FJ((({oldExports:t,newSrc:i,config:e})=>{if(e.mode==="patch-prototype")return i=>{var e,s;for(const n in i){const o=i[n];if(console.log(`[hot-reload] Patching prototype methods of '${n}'`,{exportedItem:o}),typeof o=="function"&&o.prototype){const r=t[n];if(r){for(const t of Object.getOwnPropertyNames(o.prototype)){const i=Object.getOwnPropertyDescriptor(o.prototype,t),h=Object.getOwnPropertyDescriptor(r.prototype,t);((e=i==null?void 0:i.value)===null||e===void 0?void 0:e.toString())!==((s=h==null?void 0:h.value)===null||s===void 0?void 0:s.toString())&&console.log(`[hot-reload] Patching prototype method '${n}.${t}'`),Object.defineProperty(r.prototype,t,i)}i[n]=r}}}return!0}}));class TJ extends te{get width(){return this._width}get height(){return this._height}constructor(t,i){super(),this.elementSizeObserver=this._register(new Aw(t,i)),this._width=Wz(this,this.elementSizeObserver.getWidth()),this._height=Wz(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange((t=>Uz((t=>{this._width.set(this.elementSizeObserver.getWidth(),t),this._height.set(this.elementSizeObserver.getHeight(),t)})))))}observe(t){this.elementSizeObserver.observe(t)}setAutomaticLayout(t){t?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function NJ(t,i,e){let s=i.get(),n=s,o=s;const r=Wz("animatedValue",s);let h=-1,c;function a(){const i=Date.now()-h;var e,l,u,d;o=Math.floor((l=n,u=s-n,(e=i)===(d=300)?l+u:u*(1-Math.pow(2,-10*e/d))+l)),i<300?c=t.requestAnimationFrame(a):o=s,r.set(o,void 0)}return e.add(iU({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(t,e)=>(t.didChange(i)&&(e.animate=e.animate||t.change),!0)},((e,r)=>{c!==void 0&&(t.cancelAnimationFrame(c),c=void 0),n=o,s=i.read(e),h=Date.now()-(r.animate?0:300),a()}))),r}class QJ extends te{constructor(t,i,e){super(),this._register(new zJ(t,e)),this._register(UJ(e,{height:i.actualHeight,top:i.actualTop}))}}class OJ{get afterLineNumber(){return this._afterLineNumber.get()}constructor(t,i){this._afterLineNumber=t,this.heightInPx=i,this.domNode=document.createElement("div"),this._actualTop=Wz(this,void 0),this._actualHeight=Wz(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=t=>{this._actualTop.set(t,void 0)},this.onComputedHeight=t=>{this._actualHeight.set(t,void 0)}}}class zJ{constructor(t,i){this._editor=t,this._domElement=i,this._overlayWidgetId="managedOverlayWidget-"+zJ._counter++,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}function UJ(t,i){return Zz((e=>{for(let[s,n]of Object.entries(i))n&&typeof n=="object"&&"read"in n&&(n=n.read(e)),typeof n=="number"&&(n=`${n}px`),s=s.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase())),t.style[s]=n}))}function HJ(t,i){return function(t,i){SJ()&&cU("reload",(i=>FJ((({oldExports:e})=>{if([...Object.values(e)].some((i=>t.includes(i))))return t=>(i(void 0),!0)})))).read(i)}([t],i),t}function PJ(t,i,e,s){const n=new Zi,o=[];return n.add(eU(((n,r)=>{const h=i.read(n),c=new Map,a=new Map;e&&e(!0),t.changeViewZones((t=>{for(const i of o)t.removeZone(i),s==null||s.delete(i);o.length=0;for(const i of h){const e=t.addZone(i);i.setZoneId&&i.setZoneId(e),o.push(e),s==null||s.add(e),c.set(i,e)}})),e&&e(!1),r.add(iU({createEmptyChangeSummary:()=>({zoneIds:[]}),handleChange(t,i){const e=a.get(t.changedObservable);return e!==void 0&&i.zoneIds.push(e),!0}},((i,s)=>{for(const t of h)t.onChange&&(a.set(t.onChange,c.get(t)),t.onChange.read(i));e&&e(!0),t.changeViewZones((t=>{for(const i of s.zoneIds)t.layoutZone(i)})),e&&e(!1)})))}))),n.add({dispose(){e&&e(!0),t.changeViewZones((t=>{for(const i of o)t.removeZone(i)})),s==null||s.clear(),e&&e(!1)}}),n}zJ._counter=0;class jJ extends xe{dispose(){super.dispose(!0)}}function WJ(t,i){const e=xg(i,(i=>i.original.startLineNumber<=t.lineNumber));if(!e)return Es.fromPositions(t);if(e.original.endLineNumberExclusive<=t.lineNumber){const i=t.lineNumber-e.original.endLineNumberExclusive+e.modified.endLineNumberExclusive;return Es.fromPositions(new Cs(i,t.column))}if(!e.innerChanges)return Es.fromPositions(new Cs(e.modified.startLineNumber,1));const s=xg(e.innerChanges,(i=>i.originalRange.getStartPosition().isBeforeOrEqual(t)));if(!s){const i=t.lineNumber-e.original.startLineNumber+e.modified.startLineNumber;return Es.fromPositions(new Cs(i,t.column))}if(s.originalRange.containsPosition(t))return s.modifiedRange;{const i=(n=s.originalRange.getEndPosition(),o=t,n.lineNumber===o.lineNumber?new oD(0,o.column-n.column):new oD(o.lineNumber-n.lineNumber,o.column-1));return Es.fromPositions(i.addToPosition(s.modifiedRange.getEndPosition()))}var n,o}function YJ(t,i,e){const s=t.bindTo(i);return tU({debugName:()=>`Set Context Key "${t.key}"`},(t=>{s.set(e(t))}))}var _J=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},VJ=function(t,i){return function(e,s){i(e,s,t)}};const JJ=X_("diff-review-insert",Fs.add,st(0,"Icon for 'Insert' in accessible diff viewer.")),GJ=X_("diff-review-remove",Fs.remove,st(0,"Icon for 'Remove' in accessible diff viewer.")),KJ=X_("diff-review-close",Fs.close,st(0,"Icon for 'Close' in accessible diff viewer."));let $J=class extends te{constructor(t,i,e,s,n,o,r,h,c){super(),this._parentNode=t,this._visible=i,this._setVisible=e,this._canClose=s,this._width=n,this._height=o,this._diffs=r,this._models=h,this._instantiationService=c,this._state=$z(this,((t,i)=>{const e=this._visible.read(t);if(this._parentNode.style.visibility=e?"visible":"hidden",!e)return null;const s=i.add(this._instantiationService.createInstance(XJ,this._diffs,this._models,this._setVisible,this._canClose));return{model:s,view:i.add(this._instantiationService.createInstance(oG,this._parentNode,s,this._width,this._height,this._models))}})).recomputeInitiallyAndOnChange(this._store)}next(){Uz((t=>{const i=this._visible.get();this._setVisible(!0,t),i&&this._state.get().model.nextGroup(t)}))}prev(){Uz((t=>{this._setVisible(!0,t),this._state.get().model.previousGroup(t)}))}close(){Uz((t=>{this._setVisible(!1,t)}))}};$J._ttPolicy=Yu("diffReview",{createHTML:t=>t}),$J=_J([VJ(8,Oa)],$J);let XJ=class extends te{constructor(t,i,e,s,n){super(),this._diffs=t,this._models=i,this._setVisible=e,this.canClose=s,this._accessibilitySignalService=n,this._groups=Wz(this,[]),this._currentGroupIdx=Wz(this,0),this._currentElementIdx=Wz(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map(((t,i)=>this._groups.read(i)[t])),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map(((t,i)=>{var e;return(e=this.currentGroup.read(i))===null||e===void 0?void 0:e.lines[t]})),this._register(Zz((t=>{const i=this._diffs.read(t);if(!i)return void this._groups.set([],void 0);const e=function(t,i,e){const s=[];for(const n of u(t,((t,i)=>i.modified.startLineNumber-t.modified.endLineNumberExclusive<2*qJ))){const t=[];t.push(new iG);const o=new Fg(Math.max(1,n[0].original.startLineNumber-qJ),Math.min(n[n.length-1].original.endLineNumberExclusive+qJ,i+1)),r=new Fg(Math.max(1,n[0].modified.startLineNumber-qJ),Math.min(n[n.length-1].modified.endLineNumberExclusive+qJ,e+1));d(n,((i,e)=>{const s=new Fg(i?i.original.endLineNumberExclusive:o.startLineNumber,e?e.original.startLineNumber:o.endLineNumberExclusive),n=new Fg(i?i.modified.endLineNumberExclusive:r.startLineNumber,e?e.modified.startLineNumber:r.endLineNumberExclusive);s.forEach((i=>{t.push(new nG(i,n.startLineNumber+(i-s.startLineNumber)))})),e&&(e.original.forEach((i=>{t.push(new eG(e,i))})),e.modified.forEach((i=>{t.push(new sG(e,i))})))}));const h=n[0].modified.join(n[n.length-1].modified),c=n[0].original.join(n[n.length-1].original);s.push(new tG(new Lg(h,c),t))}return s}(i,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());Uz((t=>{const i=this._models.getModifiedPosition();if(i){const s=e.findIndex((t=>(i==null?void 0:i.lineNumber)<t.range.modified.endLineNumberExclusive));s!==-1&&this._currentGroupIdx.set(s,t)}this._groups.set(e,t)}))}))),this._register(Zz((t=>{const i=this.currentElement.read(t);(i==null?void 0:i.type)===ZJ.Deleted?this._accessibilitySignalService.playSignal(nJ.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(i==null?void 0:i.type)===ZJ.Added&&this._accessibilitySignalService.playSignal(nJ.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})}))),this._register(Zz((t=>{var i;const e=this.currentElement.read(t);if(e&&e.type!==ZJ.Header){const t=(i=e.modifiedLineNumber)!==null&&i!==void 0?i:e.diff.modified.startLineNumber;this._models.modifiedSetSelection(Es.fromPositions(new Cs(t,1)))}})))}_goToGroupDelta(t,i){const e=this.groups.get();!e||e.length<=1||Pz(i,(i=>{this._currentGroupIdx.set(yg.ofLength(e.length).clipCyclic(this._currentGroupIdx.get()+t),i),this._currentElementIdx.set(0,i)}))}nextGroup(t){this._goToGroupDelta(1,t)}previousGroup(t){this._goToGroupDelta(-1,t)}_goToLineDelta(t){const i=this.currentGroup.get();!i||i.lines.length<=1||Uz((e=>{this._currentElementIdx.set(yg.ofLength(i.lines.length).clip(this._currentElementIdx.get()+t),e)}))}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(t){const i=this.currentGroup.get();if(!i)return;const e=i.lines.indexOf(t);e!==-1&&Uz((t=>{this._currentElementIdx.set(e,t)}))}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const t=this.currentElement.get();t&&(t.type===ZJ.Deleted?this._models.originalReveal(Es.fromPositions(new Cs(t.originalLineNumber,1))):this._models.modifiedReveal(t.type!==ZJ.Header?Es.fromPositions(new Cs(t.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};XJ=_J([VJ(4,iJ)],XJ);const qJ=3;var ZJ;(function(t){t[t.Header=0]="Header",t[t.Unchanged=1]="Unchanged",t[t.Deleted=2]="Deleted",t[t.Added=3]="Added"})(ZJ||(ZJ={}));class tG{constructor(t,i){this.range=t,this.lines=i}}class iG{constructor(){this.type=ZJ.Header}}class eG{constructor(t,i){this.diff=t,this.originalLineNumber=i,this.type=ZJ.Deleted,this.modifiedLineNumber=void 0}}class sG{constructor(t,i){this.diff=t,this.modifiedLineNumber=i,this.type=ZJ.Added,this.originalLineNumber=void 0}}class nG{constructor(t,i){this.originalLineNumber=t,this.modifiedLineNumber=i,this.type=ZJ.Unchanged}}let oG=class extends te{constructor(t,i,e,s,n,o){super(),this._element=t,this._model=i,this._width=e,this._height=s,this._models=n,this._languageService=o,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const r=document.createElement("div");r.className="diff-review-actions",this._actionBar=this._register(new RH(r)),this._register(Zz((t=>{this._actionBar.clear(),this._model.canClose.read(t)&&this._actionBar.push(new ja("diffreview.close",st(0,"Close"),"close-diff-review "+Ka.asClassName(KJ),!0,(async()=>i.close())),{label:!1,icon:!0})}))),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new ck(this._content,{})),sa(this.domNode,this._scrollbar.getDomNode(),r),this._register(Zz((t=>{this._height.read(t),this._width.read(t),this._scrollbar.scanDomNode()}))),this._register(qi((()=>{sa(this.domNode)}))),this._register(UJ(this.domNode,{width:this._width,height:this._height})),this._register(UJ(this._content,{width:this._width,height:this._height})),this._register(eU(((t,i)=>{this._model.currentGroup.read(t),this._render(i)}))),this._register(cc(this.domNode,"keydown",(t=>{(t.equals(18)||t.equals(2066)||t.equals(530))&&(t.preventDefault(),this._model.goToNextLine()),(t.equals(16)||t.equals(2064)||t.equals(528))&&(t.preventDefault(),this._model.goToPreviousLine()),(t.equals(9)||t.equals(2057)||t.equals(521)||t.equals(1033))&&(t.preventDefault(),this._model.close()),(t.equals(10)||t.equals(3))&&(t.preventDefault(),this._model.revealCurrentElementInEditor())})))}_render(t){const i=this._models.getOriginalOptions(),e=this._models.getModifiedOptions(),s=document.createElement("div");s.className="diff-review-table",s.setAttribute("role","list"),s.setAttribute("aria-label",st(0,"Accessible Diff Viewer. Use arrow up and down to navigate.")),Da(s,e.get(50)),sa(this._content,s);const n=this._models.getOriginalModel(),o=this._models.getModifiedModel();if(!n||!o)return;const r=n.getOptions(),h=o.getOptions(),c=e.get(67),a=this._model.currentGroup.get();for(const l of(a==null?void 0:a.lines)||[]){if(!a)break;let u;if(l.type===ZJ.Header){const t=document.createElement("div");t.className="diff-review-row",t.setAttribute("role","listitem");const i=a.range,e=this._model.currentGroupIndex.get(),s=this._model.groups.get().length,n=t=>t===0?st(0,"no lines changed"):t===1?st(0,"1 line changed"):st(0,"{0} lines changed",t),o=n(i.original.length),r=n(i.modified.length);t.setAttribute("aria-label",st(0,"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",e+1,s,i.original.startLineNumber,o,i.modified.startLineNumber,r));const h=document.createElement("div");h.className="diff-review-cell diff-review-summary",h.appendChild(document.createTextNode(`${e+1}/${s}: @@ -${i.original.startLineNumber},${i.original.length} +${i.modified.startLineNumber},${i.modified.length} @@`)),t.appendChild(h),u=t}else u=this._createRow(l,c,this._width.get(),i,n,r,e,o,h);s.appendChild(u);const d=Gz((t=>this._model.currentElement.read(t)===l));t.add(Zz((t=>{const i=d.read(t);u.tabIndex=i?0:-1,i&&u.focus()}))),t.add(rc(u,"focus",(()=>{this._model.goToLine(l)})))}this._scrollbar.scanDomNode()}_createRow(t,i,e,s,n,o,r,h,c){const a=s.get(145),l=a.glyphMarginWidth+a.lineNumbersWidth,u=r.get(145),d=10+u.glyphMarginWidth+u.lineNumbersWidth;let f="diff-review-row",g="",A=null;switch(t.type){case ZJ.Added:f="diff-review-row line-insert",g=" char-insert",A=JJ;break;case ZJ.Deleted:f="diff-review-row line-delete",g=" char-delete",A=GJ}const p=document.createElement("div");p.style.minWidth=e+"px",p.className=f,p.setAttribute("role","listitem"),p.ariaLevel="";const w=document.createElement("div");w.className="diff-review-cell",w.style.height=`${i}px`,p.appendChild(w);const m=document.createElement("span");m.style.width=l+"px",m.style.minWidth=l+"px",m.className="diff-review-line-number"+g,t.originalLineNumber!==void 0?m.appendChild(document.createTextNode(String(t.originalLineNumber))):m.innerText=" ",w.appendChild(m);const v=document.createElement("span");v.style.width=d+"px",v.style.minWidth=d+"px",v.style.paddingRight="10px",v.className="diff-review-line-number"+g,t.modifiedLineNumber!==void 0?v.appendChild(document.createTextNode(String(t.modifiedLineNumber))):v.innerText=" ",w.appendChild(v);const b=document.createElement("span");if(b.className="diff-review-spacer",A){const t=document.createElement("span");t.className=Ka.asClassName(A),t.innerText="  ",b.appendChild(t)}else b.innerText="  ";let y;if(w.appendChild(b),t.modifiedLineNumber!==void 0){let i=this._getLineHtml(h,r,c.tabSize,t.modifiedLineNumber,this._languageService.languageIdCodec);$J._ttPolicy&&(i=$J._ttPolicy.createHTML(i)),w.insertAdjacentHTML("beforeend",i),y=h.getLineContent(t.modifiedLineNumber)}else{let i=this._getLineHtml(n,s,o.tabSize,t.originalLineNumber,this._languageService.languageIdCodec);$J._ttPolicy&&(i=$J._ttPolicy.createHTML(i)),w.insertAdjacentHTML("beforeend",i),y=n.getLineContent(t.originalLineNumber)}y.length===0&&(y=st(0,"blank"));let k="";switch(t.type){case ZJ.Unchanged:k=t.originalLineNumber===t.modifiedLineNumber?st(0,"{0} unchanged line {1}",y,t.originalLineNumber):st(0,"{0} original line {1} modified line {2}",y,t.originalLineNumber,t.modifiedLineNumber);break;case ZJ.Added:k=st(0,"+ {0} modified line {1}",y,t.modifiedLineNumber);break;case ZJ.Deleted:k=st(0,"- {0} original line {1}",y,t.originalLineNumber)}return p.setAttribute("aria-label",k),p}_getLineHtml(t,i,e,s,n){const o=t.getLineContent(s),r=i.get(50),h=rp.createEmpty(o,n),c=Dp.isBasicASCII(o,t.mightContainNonBasicASCII()),a=Dp.containsRTL(o,c,t.mightContainRTL());return bp(new gp(r.isMonospace&&!i.get(33),r.canUseHalfwidthRightwardsArrow,o,!1,c,a,0,h,[],e,0,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,i.get(117),i.get(99),i.get(94),i.get(51)!==wi.OFF,null)).html}};oG=_J([VJ(5,Od)],oG);class rG{constructor(t){this.editors=t}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(t){this.editors.original.revealRange(t),this.editors.original.setSelection(t),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(t){t&&(this.editors.modified.revealRange(t),this.editors.modified.setSelection(t)),this.editors.modified.focus()}modifiedSetSelection(t){this.editors.modified.setSelection(t)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){var t;return(t=this.editors.modified.getPosition())!==null&&t!==void 0?t:void 0}}class hG extends te{constructor(t,i,e,s,n){super(),this._rootElement=t,this._diffModel=i,this._originalEditorLayoutInfo=e,this._modifiedEditorLayoutInfo=s,this._editors=n,this._originalScrollTop=rU(this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=rU(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._viewZonesChanged=cU("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=Wz(this,0),this._modifiedViewZonesChangedSignal=cU("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=cU("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=$z(this,((t,i)=>{var e;this._element.replaceChildren();const s=this._diffModel.read(t),n=(e=s==null?void 0:s.diff.read(t))===null||e===void 0?void 0:e.movedTexts;if(!n||n.length===0)return void this.width.set(0,void 0);this._viewZonesChanged.read(t);const o=this._originalEditorLayoutInfo.read(t),r=this._modifiedEditorLayoutInfo.read(t);if(!o||!r)return void this.width.set(0,void 0);this._modifiedViewZonesChangedSignal.read(t),this._originalViewZonesChangedSignal.read(t);const h=n.map((i=>{function e(t,i){return(i.getTopForLineNumber(t.startLineNumber,!0)+i.getTopForLineNumber(t.endLineNumberExclusive,!0))/2}const s=e(i.lineRangeMapping.original,this._editors.original),n=this._originalScrollTop.read(t),o=e(i.lineRangeMapping.modified,this._editors.modified),r=s-n,h=o-this._modifiedScrollTop.read(t),c=Math.min(s,o),a=Math.max(s,o);return{range:new yg(c,a),from:r,to:h,fromWithoutScroll:s,toWithoutScroll:o,move:i}}));h.sort(function(...t){return(i,e)=>{for(const s of t){const t=s(i,e);if(!D.isNeitherLessOrGreaterThan(t))return t}return D.neitherLessOrGreaterThan}}(M((t=>t.fromWithoutScroll>t.toWithoutScroll),F),M((t=>t.fromWithoutScroll>t.toWithoutScroll?t.fromWithoutScroll:-t.toWithoutScroll),S)));const c=cG.compute(h.map((t=>t.range))),a=o.verticalScrollbarWidth,l=10*(c.getTrackCount()-1)+20,u=a+l+(r.contentLeft-hG.movedCodeBlockPadding);let d=0;for(const t of h){const e=a+10+10*c.getTrack(d),n=15,o=15,h=u,l=r.glyphMarginWidth+r.lineNumbersWidth,f=18,g=document.createElementNS("http://www.w3.org/2000/svg","rect");g.classList.add("arrow-rectangle"),g.setAttribute("x",""+(h-l)),g.setAttribute("y",""+(t.to-f/2)),g.setAttribute("width",`${l}`),g.setAttribute("height",`${f}`),this._element.appendChild(g);const A=document.createElementNS("http://www.w3.org/2000/svg","g"),p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",`M 0 ${t.from} L ${e} ${t.from} L ${e} ${t.to} L ${h-o} ${t.to}`),p.setAttribute("fill","none"),A.appendChild(p);const w=document.createElementNS("http://www.w3.org/2000/svg","polygon");w.classList.add("arrow"),i.add(Zz((i=>{p.classList.toggle("currentMove",t.move===s.activeMovedText.read(i)),w.classList.toggle("currentMove",t.move===s.activeMovedText.read(i))}))),w.setAttribute("points",`${h-o},${t.to-n/2} ${h},${t.to} ${h-o},${t.to+n/2}`),A.appendChild(w),this._element.appendChild(A),d++}this.width.set(l,void 0)})),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(qi((()=>this._element.remove()))),this._register(Zz((t=>{const i=this._originalEditorLayoutInfo.read(t),e=this._modifiedEditorLayoutInfo.read(t);i&&e&&(this._element.style.left=i.width-i.verticalScrollbarWidth+"px",this._element.style.height=`${i.height}px`,this._element.style.width=`${i.verticalScrollbarWidth+i.contentLeft-hG.movedCodeBlockPadding+this.width.read(t)}px`)}))),this._register(dU(this._state));const o=Gz((t=>{const i=this._diffModel.read(t),e=i==null?void 0:i.diff.read(t);return e?e.movedTexts.map((t=>({move:t,original:new OJ(nU(t.lineRangeMapping.original.startLineNumber-1),18),modified:new OJ(nU(t.lineRangeMapping.modified.startLineNumber-1),18)}))):[]}));this._register(PJ(this._editors.original,o.map((t=>t.map((t=>t.original)))))),this._register(PJ(this._editors.modified,o.map((t=>t.map((t=>t.modified)))))),this._register(eU(((t,i)=>{const e=o.read(t);for(const t of e)i.add(new aG(this._editors.original,t.original,t.move,"original",this._diffModel.get())),i.add(new aG(this._editors.modified,t.modified,t.move,"modified",this._diffModel.get()))})));const r=cU("original.onDidFocusEditorWidget",(t=>this._editors.original.onDidFocusEditorWidget((()=>setTimeout((()=>t(void 0)),0))))),h=cU("modified.onDidFocusEditorWidget",(t=>this._editors.modified.onDidFocusEditorWidget((()=>setTimeout((()=>t(void 0)),0)))));let c="modified";this._register(iU({createEmptyChangeSummary:()=>{},handleChange:(t,i)=>(t.didChange(r)&&(c="original"),t.didChange(h)&&(c="modified"),!0)},(t=>{r.read(t),h.read(t);const i=this._diffModel.read(t);if(!i)return;const e=i.diff.read(t);let s;if(e&&c==="original"){const i=this._editors.originalCursor.read(t);i&&(s=e.movedTexts.find((t=>t.lineRangeMapping.original.contains(i.lineNumber))))}if(e&&c==="modified"){const i=this._editors.modifiedCursor.read(t);i&&(s=e.movedTexts.find((t=>t.lineRangeMapping.modified.contains(i.lineNumber))))}s!==i.movedTextToCompare.get()&&i.movedTextToCompare.set(void 0,void 0),i.setActiveMovedText(s)})))}}hG.movedCodeBlockPadding=4;class cG{static compute(t){const i=[],e=[];for(const s of t){let t=i.findIndex((t=>!t.intersectsStrict(s)));t===-1&&(i.length>=6?t=Sg(i,M((t=>t.intersectWithRangeLength(s)),S)):(t=i.length,i.push(new kg))),i[t].addRange(s),e.push(t)}return new cG(i.length,e)}constructor(t,i){this._trackCount=t,this.trackPerLineIdx=i}getTrack(t){return this.trackPerLineIdx[t]}getTrackCount(){return this._trackCount}}class aG extends QJ{constructor(t,i,e,s,n){const o=va("div.diff-hidden-lines-widget");super(t,i,o.root),this._editor=t,this._move=e,this._kind=s,this._diffModel=n,this._nodes=va("div.diff-moved-code-block",{style:{marginRight:"4px"}},[va("div.text-content@textContent"),va("div.action-bar@actionBar")]),o.root.appendChild(this._nodes.root);const r=rU(this._editor.onDidLayoutChange,(()=>this._editor.getLayoutInfo()));let h;this._register(UJ(this._nodes.root,{paddingRight:r.map((t=>t.verticalScrollbarWidth))})),h=e.changes.length>0?this._kind==="original"?st(0,"Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):st(0,"Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):this._kind==="original"?st(0,"Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):st(0,"Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new RH(this._nodes.actionBar,{highlightToggledItems:!0})),a=new ja("",h,"",!1);c.push(a,{icon:!1,label:!0});const l=new ja("","Compare",Ka.asClassName(Fs.compareChanges),!0,(()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===e?void 0:this._move,void 0)}));this._register(Zz((t=>{const i=this._diffModel.movedTextToCompare.read(t)===e;l.checked=i}))),c.push(l,{icon:!1,label:!0})}}Ow("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},st(0,"The border color for text that got moved in the diff editor.")),Ow("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},st(0,"The active border color for text that got moved in the diff editor.")),Ow("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},st(0,"The color of the shadow around unchanged region widgets."));const lG=X_("diff-insert",Fs.add,st(0,"Line decoration for inserts in the diff editor.")),uG=X_("diff-remove",Fs.remove,st(0,"Line decoration for removals in the diff editor.")),dG=DF.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+Ka.asClassName(lG),marginClassName:"gutter-insert"}),fG=DF.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+Ka.asClassName(uG),marginClassName:"gutter-delete"}),gG=DF.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),AG=DF.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),pG=DF.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),wG=DF.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),mG=DF.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),vG=DF.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),bG=DF.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),yG=DF.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});class kG extends te{constructor(t,i,e,s){super(),this._editors=t,this._diffModel=i,this._options=e,this._decorations=Gz(this,(t=>{var i;const e=(i=this._diffModel.read(t))===null||i===void 0?void 0:i.diff.read(t);if(!e)return null;const s=this._diffModel.read(t).movedTextToCompare.read(t),n=this._options.renderIndicators.read(t),o=this._options.showEmptyDecorations.read(t),r=[],h=[];if(!s)for(const t of e.mappings)if(t.lineRangeMapping.original.isEmpty||r.push({range:t.lineRangeMapping.original.toInclusiveRange(),options:n?fG:AG}),t.lineRangeMapping.modified.isEmpty||h.push({range:t.lineRangeMapping.modified.toInclusiveRange(),options:n?dG:gG}),t.lineRangeMapping.modified.isEmpty||t.lineRangeMapping.original.isEmpty)t.lineRangeMapping.original.isEmpty||r.push({range:t.lineRangeMapping.original.toInclusiveRange(),options:bG}),t.lineRangeMapping.modified.isEmpty||h.push({range:t.lineRangeMapping.modified.toInclusiveRange(),options:wG});else for(const i of t.lineRangeMapping.innerChanges||[])t.lineRangeMapping.original.contains(i.originalRange.startLineNumber)&&r.push({range:i.originalRange,options:i.originalRange.isEmpty()&&o?yG:vG}),t.lineRangeMapping.modified.contains(i.modifiedRange.startLineNumber)&&h.push({range:i.modifiedRange,options:i.modifiedRange.isEmpty()&&o?mG:pG});if(s)for(const t of s.changes){const i=t.original.toInclusiveRange();i&&r.push({range:i,options:n?fG:AG});const e=t.modified.toInclusiveRange();e&&h.push({range:e,options:n?dG:gG});for(const i of t.innerChanges||[])r.push({range:i.originalRange,options:vG}),h.push({range:i.modifiedRange,options:pG})}const c=this._diffModel.read(t).activeMovedText.read(t);for(const t of e.movedTexts)r.push({range:t.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(t===c?" currentMove":""),blockPadding:[hG.movedCodeBlockPadding,0,hG.movedCodeBlockPadding,hG.movedCodeBlockPadding]}}),h.push({range:t.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(t===c?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:r,modifiedDecorations:h}})),this._register(LJ(this._editors.original,this._decorations.map((t=>(t==null?void 0:t.originalDecorations)||[])))),this._register(LJ(this._editors.modified,this._decorations.map((t=>(t==null?void 0:t.modifiedDecorations)||[]))))}}class xG extends te{constructor(t,i,e,s){super(),this._options=t,this._domNode=i,this._dimensions=e,this._sashes=s,this._sashRatio=Wz(this,void 0),this.sashLeft=Gz(this,(t=>{var i;const e=(i=this._sashRatio.read(t))!==null&&i!==void 0?i:this._options.splitViewDefaultRatio.read(t);return this._computeSashLeft(e,t)})),this._sash=this._register(new _P(this._domNode,{getVerticalSashTop:t=>0,getVerticalSashLeft:t=>this.sashLeft.get(),getVerticalSashHeight:t=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart((()=>{this._startSashPosition=this.sashLeft.get()}))),this._register(this._sash.onDidChange((t=>{const i=this._dimensions.width.get(),e=this._computeSashLeft((this._startSashPosition+(t.currentX-t.startX))/i,void 0);this._sashRatio.set(e/i,void 0)}))),this._register(this._sash.onDidEnd((()=>this._sash.layout()))),this._register(this._sash.onDidReset((()=>this._sashRatio.set(void 0,void 0)))),this._register(Zz((t=>{const i=this._sashes.read(t);i&&(this._sash.orthogonalEndSash=i.bottom)}))),this._register(Zz((t=>{const i=this._options.enableSplitViewResizing.read(t);this._sash.state=i?3:0,this.sashLeft.read(t),this._dimensions.height.read(t),this._sash.layout()})))}_computeSashLeft(t,i){const e=this._dimensions.width.read(i),s=Math.floor(this._options.splitViewDefaultRatio.read(i)*e),n=this._options.enableSplitViewResizing.read(i)?Math.floor(t*e):s,o=100;return e<=200?s:n<o?o:n>e-o?e-o:n}}var CG,EG=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},BG=function(t,i){return function(e,s){i(e,s,t)}};const DG=za("diffProviderFactoryService");let MG=class{constructor(t){this.instantiationService=t}createDiffProvider(t){return this.instantiationService.createInstance(SG,t)}};MG=EG([BG(0,Oa)],MG),Hd(DG,MG,1);let SG=CG=class{constructor(t,i,e){this.editorWorkerService=i,this.telemetryService=e,this.onDidChangeEventEmitter=new de,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(t)}dispose(){var t;(t=this.diffAlgorithmOnDidChangeSubscription)===null||t===void 0||t.dispose()}async computeDiff(t,i,e,s){var n,o;if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(t,i,e,s);if(t.getLineCount()===1&&t.getLineMaxColumn(1)===1)return i.getLineCount()===1&&i.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new Rg(new Fg(1,2),new Fg(1,i.getLineCount()+1),[new Tg(t.getFullModelRange(),i.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const r=JSON.stringify([t.uri.toString(),i.uri.toString()]),h=JSON.stringify([t.id,i.id,t.getAlternativeVersionId(),i.getAlternativeVersionId(),JSON.stringify(e)]),c=CG.diffCache.get(r);if(c&&c.context===h)return c.result;const a=re.create(),l=await this.editorWorkerService.computeDiff(t.uri,i.uri,e,this.diffAlgorithm),u=a.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:u,timedOut:(n=l==null?void 0:l.quitEarly)===null||n===void 0||n,detectedMoves:e.computeMoves?(o=l==null?void 0:l.moves.length)!==null&&o!==void 0?o:0:-1}),s.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!l)throw new Error("no diff result available");return CG.diffCache.size>10&&CG.diffCache.delete(CG.diffCache.keys().next().value),CG.diffCache.set(r,{result:l,context:h}),l}setOptions(t){var i;let e=!1;t.diffAlgorithm&&this.diffAlgorithm!==t.diffAlgorithm&&((i=this.diffAlgorithmOnDidChangeSubscription)===null||i===void 0||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=t.diffAlgorithm,typeof t.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=t.diffAlgorithm.onDidChange((()=>this.onDidChangeEventEmitter.fire()))),e=!0),e&&this.onDidChangeEventEmitter.fire()}};SG.diffCache=new Map,SG=CG=EG([BG(1,tP),BG(2,cu)],SG);var FG=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},IG=function(t,i){return function(e,s){i(e,s,t)}};let LG=class extends te{setActiveMovedText(t){this._activeMovedText.set(t,void 0)}constructor(t,i,e){super(),this.model=t,this._options=i,this._diffProviderFactoryService=e,this._isDiffUpToDate=Wz(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=Wz(this,void 0),this.diff=this._diff,this._unchangedRegions=Wz(this,void 0),this.unchangedRegions=Gz(this,(t=>{var i,e;return this._options.hideUnchangedRegions.read(t)?(e=(i=this._unchangedRegions.read(t))===null||i===void 0?void 0:i.regions)!==null&&e!==void 0?e:[]:(Uz((t=>{var i;for(const e of((i=this._unchangedRegions.get())===null||i===void 0?void 0:i.regions)||[])e.collapseAll(t)})),[])})),this.movedTextToCompare=Wz(this,void 0),this._activeMovedText=Wz(this,void 0),this._hoveredMovedText=Wz(this,void 0),this.activeMovedText=Gz(this,(t=>{var i,e;return(e=(i=this.movedTextToCompare.read(t))!==null&&i!==void 0?i:this._hoveredMovedText.read(t))!==null&&e!==void 0?e:this._activeMovedText.read(t)})),this._cancellationTokenSource=new xe,this._diffProvider=Gz(this,(t=>{const i=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(t)});return{diffProvider:i,onChangeSignal:cU("onDidChange",i.onDidChange)}})),this._register(qi((()=>this._cancellationTokenSource.cancel())));const s=lU("contentChangedSignal"),n=this._register(new Er((()=>s.trigger(void 0)),200));this._register(Zz((i=>{const e=this._unchangedRegions.read(i);if(!e||e.regions.some((t=>t.isDragged.read(i))))return;const s=e.originalDecorationIds.map((i=>t.original.getDecorationRange(i))).map((t=>t?Fg.fromRangeInclusive(t):void 0)),n=e.modifiedDecorationIds.map((i=>t.modified.getDecorationRange(i))).map((t=>t?Fg.fromRangeInclusive(t):void 0)),o=e.regions.map(((t,e)=>s[e]&&n[e]?new NG(s[e].startLineNumber,n[e].startLineNumber,s[e].length,t.visibleLineCountTop.read(i),t.visibleLineCountBottom.read(i)):void 0)).filter(j),r=[];let h=!1;for(const t of u(o,((t,e)=>t.getHiddenModifiedRange(i).endLineNumberExclusive===e.getHiddenModifiedRange(i).startLineNumber)))if(t.length>1){h=!0;const i=t.reduce(((t,i)=>t+i.lineCount),0),e=new NG(t[0].originalLineNumber,t[0].modifiedLineNumber,i,t[0].visibleLineCountTop.get(),t[t.length-1].visibleLineCountBottom.get());r.push(e)}else r.push(t[0]);if(h){const i=t.original.deltaDecorations(e.originalDecorationIds,r.map((t=>({range:t.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})))),s=t.modified.deltaDecorations(e.modifiedDecorationIds,r.map((t=>({range:t.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))));Uz((t=>{this._unchangedRegions.set({regions:r,originalDecorationIds:i,modifiedDecorationIds:s},t)}))}})));const o=(i,e,s)=>{const n=NG.fromDiffs(i.changes,t.original.getLineCount(),t.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(s),this._options.hideUnchangedRegionsContextLineCount.read(s));let o;const r=this._unchangedRegions.get();if(r){const i=r.originalDecorationIds.map((i=>t.original.getDecorationRange(i))).map((t=>t?Fg.fromRangeInclusive(t):void 0)),e=r.modifiedDecorationIds.map((i=>t.modified.getDecorationRange(i))).map((t=>t?Fg.fromRangeInclusive(t):void 0));let n=function(t,i){let e;return t.filter((t=>{const s=i(t,e);return e=t,s}))}(r.regions.map(((t,s)=>{if(!i[s]||!e[s])return;const n=i[s].length;return new NG(i[s].startLineNumber,e[s].startLineNumber,n,Math.min(t.visibleLineCountTop.get(),n),Math.min(t.visibleLineCountBottom.get(),n-t.visibleLineCountTop.get()))})).filter(j),((t,i)=>!i||t.modifiedLineNumber>=i.modifiedLineNumber+i.lineCount&&t.originalLineNumber>=i.originalLineNumber+i.lineCount)).map((t=>new Lg(t.getHiddenOriginalRange(s),t.getHiddenModifiedRange(s))));n=Lg.clip(n,Fg.ofLength(1,t.original.getLineCount()),Fg.ofLength(1,t.modified.getLineCount())),o=Lg.inverse(n,t.original.getLineCount(),t.modified.getLineCount())}const h=[];if(o)for(const t of n){const i=o.filter((i=>i.original.intersectsStrict(t.originalUnchangedRange)&&i.modified.intersectsStrict(t.modifiedUnchangedRange)));h.push(...t.setVisibleRanges(i,e))}else h.push(...n);const c=t.original.deltaDecorations((r==null?void 0:r.originalDecorationIds)||[],h.map((t=>({range:t.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})))),a=t.modified.deltaDecorations((r==null?void 0:r.modifiedDecorationIds)||[],h.map((t=>({range:t.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))));this._unchangedRegions.set({regions:h,originalDecorationIds:c,modifiedDecorationIds:a},e)};this._register(t.modified.onDidChangeContent((t=>{if(this._diff.get()){bD.fromModelContentChanges(t.changes)}this._isDiffUpToDate.set(!1,void 0),n.schedule()}))),this._register(t.original.onDidChangeContent((t=>{if(this._diff.get()){bD.fromModelContentChanges(t.changes)}this._isDiffUpToDate.set(!1,void 0),n.schedule()}))),this._register(eU((async(i,e)=>{var r,h;this._options.hideUnchangedRegionsMinimumLineCount.read(i),this._options.hideUnchangedRegionsContextLineCount.read(i),n.cancel(),s.read(i);const c=this._diffProvider.read(i);c.onChangeSignal.read(i),HJ(pA,i),HJ(uA,i),this._isDiffUpToDate.set(!1,void 0);let a=[];e.add(t.original.onDidChangeContent((t=>{const i=bD.fromModelContentChanges(t.changes);a=ZD(a,i)})));let l=[];e.add(t.modified.onDidChangeContent((t=>{const i=bD.fromModelContentChanges(t.changes);l=ZD(l,i)})));let u=await c.diffProvider.computeDiff(t.original,t.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(i),maxComputationTimeMs:this._options.maxComputationTimeMs.read(i),computeMoves:this._options.showMoves.read(i)},this._cancellationTokenSource.token);var d,f,g;this._cancellationTokenSource.token.isCancellationRequested||(d=u,f=t.original,g=t.modified,u={changes:d.changes.map((t=>new Rg(t.original,t.modified,t.innerChanges?t.innerChanges.map((t=>function(t,i,e){let s=t.originalRange,n=t.modifiedRange;return(s.endColumn!==1||n.endColumn!==1)&&s.endColumn===i.getLineMaxColumn(s.endLineNumber)&&n.endColumn===e.getLineMaxColumn(n.endLineNumber)&&s.endLineNumber<i.getLineCount()&&n.endLineNumber<e.getLineCount()&&(s=s.setEndPosition(s.endLineNumber+1,1),n=n.setEndPosition(n.endLineNumber+1,1)),new Tg(s,n)}(t,f,g))):void 0))),moves:d.moves,identical:d.identical,quitEarly:d.quitEarly},u=(r=void 0)!==null&&r!==void 0?r:u,u=(h=void 0)!==null&&h!==void 0?h:u,Uz((t=>{o(u,t),this._lastDiff=u;const i=RG.fromDiffResult(u);this._diff.set(i,t),this._isDiffUpToDate.set(!0,t);const e=this.movedTextToCompare.get();this.movedTextToCompare.set(e?this._lastDiff.moves.find((t=>t.lineRangeMapping.modified.intersect(e.lineRangeMapping.modified))):void 0,t)})))})))}ensureModifiedLineIsVisible(t,i,e){var s,n;if(((s=this.diff.get())===null||s===void 0?void 0:s.mappings.length)===0)return;const o=((n=this._unchangedRegions.get())===null||n===void 0?void 0:n.regions)||[];for(const s of o)if(s.getHiddenModifiedRange(void 0).contains(t))return void s.showModifiedLine(t,i,e)}ensureOriginalLineIsVisible(t,i,e){var s,n;if(((s=this.diff.get())===null||s===void 0?void 0:s.mappings.length)===0)return;const o=((n=this._unchangedRegions.get())===null||n===void 0?void 0:n.regions)||[];for(const s of o)if(s.getHiddenOriginalRange(void 0).contains(t))return void s.showOriginalLine(t,i,e)}async waitForDiff(){var t,i,e;await(t=this.isDiffUpToDate,i=t=>t,new Promise(((s,n)=>{let o=!0,r=!1;const h=t.map((t=>({isFinished:i(t),error:!!e,state:t}))),c=Zz((t=>{const{isFinished:i,error:e,state:a}=h.read(t);(i||e)&&(o?r=!0:c.dispose(),e?n(e===!0?a:e):s(a))}));o=!1,r&&c.dispose()})))}serializeState(){const t=this._unchangedRegions.get();return{collapsedRegions:t==null?void 0:t.regions.map((t=>({range:t.getHiddenModifiedRange(void 0).serialize()})))}}restoreSerializedState(t){var i;const e=(i=t.collapsedRegions)===null||i===void 0?void 0:i.map((t=>Fg.deserialize(t.range))),s=this._unchangedRegions.get();s&&e&&Uz((t=>{for(const i of s.regions)for(const s of e)if(i.modifiedUnchangedRange.intersect(s)){i.setHiddenModifiedRange(s,t);break}}))}};LG=FG([IG(2,DG)],LG);class RG{static fromDiffResult(t){return new RG(t.changes.map((t=>new TG(t))),t.moves||[],t.identical,t.quitEarly)}constructor(t,i,e,s){this.mappings=t,this.movedTexts=i,this.identical=e,this.quitEarly=s}}class TG{constructor(t){this.lineRangeMapping=t}}class NG{static fromDiffs(t,i,e,s,n){const o=Rg.inverse(t,i,e),r=[];for(const t of o){let o=t.original.startLineNumber,h=t.modified.startLineNumber,c=t.original.length;const a=o===1&&h===1,l=o+c===i+1&&h+c===e+1;(a||l)&&c>=n+s?(a&&!l&&(c-=n),l&&!a&&(o+=n,h+=n,c-=n),r.push(new NG(o,h,c,0,0))):c>=2*n+s&&(o+=n,h+=n,c-=2*n,r.push(new NG(o,h,c,0,0)))}return r}get originalUnchangedRange(){return Fg.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return Fg.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(t,i,e,s,n){this.originalLineNumber=t,this.modifiedLineNumber=i,this.lineCount=e,this._visibleLineCountTop=Wz(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=Wz(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=Gz(this,(t=>this.visibleLineCountTop.read(t)+this.visibleLineCountBottom.read(t)===this.lineCount&&!this.isDragged.read(t))),this.isDragged=Wz(this,void 0);const o=Math.max(Math.min(s,this.lineCount),0),r=Math.max(Math.min(n,this.lineCount-s),0);Wl(s===o),Wl(n===r),this._visibleLineCountTop.set(o,void 0),this._visibleLineCountBottom.set(r,void 0)}setVisibleRanges(t,i){const e=[],s=new Ig(t.map((t=>t.modified))).subtractFrom(this.modifiedUnchangedRange);let n=this.originalLineNumber,o=this.modifiedLineNumber;const r=this.modifiedLineNumber+this.lineCount;if(s.ranges.length===0)this.showAll(i),e.push(this);else{let t=0;for(const h of s.ranges){const c=t===s.ranges.length-1;t++;const a=(c?r:h.endLineNumberExclusive)-o,l=new NG(n,o,a,0,0);l.setHiddenModifiedRange(h,i),e.push(l),n=l.originalUnchangedRange.endLineNumberExclusive,o=l.modifiedUnchangedRange.endLineNumberExclusive}}return e}shouldHideControls(t){return this._shouldHideControls.read(t)}getHiddenOriginalRange(t){return Fg.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(t),this.lineCount-this._visibleLineCountTop.read(t)-this._visibleLineCountBottom.read(t))}getHiddenModifiedRange(t){return Fg.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(t),this.lineCount-this._visibleLineCountTop.read(t)-this._visibleLineCountBottom.read(t))}setHiddenModifiedRange(t,i){const e=t.startLineNumber-this.modifiedLineNumber,s=this.modifiedLineNumber+this.lineCount-t.endLineNumberExclusive;this.setState(e,s,i)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(t=10,i){const e=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+t,e),i)}showMoreBelow(t=10,i){const e=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+t,e),i)}showAll(t){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),t)}showModifiedLine(t,i,e){const s=t+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),n=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-t;i===0&&s<n||i===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+s,e):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+n,e)}showOriginalLine(t,i,e){const s=t-this.originalLineNumber,n=this.originalLineNumber+this.lineCount-t;i===0&&s<n||i===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+n-s,this.getMaxVisibleLineCountTop()),e):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+s-n,this.getMaxVisibleLineCountBottom()),e)}collapseAll(t){this._visibleLineCountTop.set(0,t),this._visibleLineCountBottom.set(0,t)}setState(t,i,e){t=Math.max(Math.min(t,this.lineCount),0),i=Math.max(Math.min(i,this.lineCount-t),0),this._visibleLineCountTop.set(t,e),this._visibleLineCountBottom.set(i,e)}}class QG extends te{get visibility(){return this._visibility}set visibility(t){this._visibility!==t&&(this._visibility=t,this._diffActions.style.visibility=t?"visible":"hidden")}constructor(t,i,e,s,n,o,r,h,c){super(),this._getViewZoneId=t,this._marginDomNode=i,this._modifiedEditor=e,this._diff=s,this._editor=n,this._viewLineCounts=o,this._originalTextModel=r,this._contextMenuService=h,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Ka.asClassName(Fs.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);let l=0;const u=e.getOption(127)&&!Dt,d=(t,i)=>{var n;this._contextMenuService.showContextMenu({domForShadowRoot:u&&(n=e.getDomNode())!==null&&n!==void 0?n:void 0,getAnchor:()=>({x:t,y:i}),getActions:()=>{const t=[],i=s.modified.isEmpty;return t.push(new ja("diff.clipboard.copyDeletedContent",i?s.original.length>1?st(0,"Copy deleted lines"):st(0,"Copy deleted line"):s.original.length>1?st(0,"Copy changed lines"):st(0,"Copy changed line"),void 0,!0,(async()=>{const t=this._originalTextModel.getValueInRange(s.original.toExclusiveRange());await this._clipboardService.writeText(t)}))),s.original.length>1&&t.push(new ja("diff.clipboard.copyDeletedLineContent",st(0,i?"Copy deleted line ({0})":"Copy changed line ({0})",s.original.startLineNumber+l),void 0,!0,(async()=>{let t=this._originalTextModel.getLineContent(s.original.startLineNumber+l);t===""&&(t=this._originalTextModel.getEndOfLineSequence()===0?`\n`:`\r\n`),await this._clipboardService.writeText(t)}))),e.getOption(91)||t.push(new ja("diff.inline.revertChange",st(0,"Revert this change"),void 0,!0,(async()=>{this._editor.revert(this._diff)}))),t},autoSelectFirstItem:!0})};this._register(cc(this._diffActions,"mousedown",(t=>{if(!t.leftButton)return;const{top:i,height:e}=yc(this._diffActions),s=Math.floor(a/3);t.preventDefault(),d(t.posx,i+e+s)}))),this._register(e.onMouseMove((t=>{t.target.type!==8&&t.target.type!==5||t.target.detail.viewZoneId!==this._getViewZoneId()?this.visibility=!1:(l=this._updateLightBulbPosition(this._marginDomNode,t.event.browserEvent.y,a),this.visibility=!0)}))),this._register(e.onMouseDown((t=>{t.event.leftButton&&(t.target.type===8||t.target.type===5)&&t.target.detail.viewZoneId===this._getViewZoneId()&&(t.event.preventDefault(),l=this._updateLightBulbPosition(this._marginDomNode,t.event.browserEvent.y,a),d(t.event.posx,t.event.posy+a))})))}_updateLightBulbPosition(t,i,e){const{top:s}=yc(t),n=i-s,o=Math.floor(n/e),r=o*e;if(this._diffActions.style.top=`${r}px`,this._viewLineCounts){let t=0;for(let i=0;i<this._viewLineCounts.length;i++)if(t+=this._viewLineCounts[i],o<t)return i}return o}}const OG=Yu("diffEditorWidget",{createHTML:t=>t});function zG(t,i,e,s){Da(s,i.fontInfo);const n=e.length>0,o=new wd(1e4);let r=0,h=0;const c=[];for(let s=0;s<t.lineTokens.length;s++){const a=s+1,l=t.lineTokens[s],u=t.lineBreakData[s],d=cp.filter(e,a,1,Number.MAX_SAFE_INTEGER);if(u){let e=0;for(const s of u.breakOffsets){const c=l.sliceAndInflate(e,s,0);r=Math.max(r,PG(h,c,cp.extractWrapped(d,e,s),n,t.mightContainNonBasicASCII,t.mightContainRTL,i,o)),h++,e=s}c.push(u.breakOffsets.length)}else c.push(1),r=Math.max(r,PG(h,l,d,n,t.mightContainNonBasicASCII,t.mightContainRTL,i,o)),h++}r+=i.scrollBeyondLastColumn;const a=o.build(),l=OG?OG.createHTML(a):a;return s.innerHTML=l,{heightInLines:h,minWidthInPx:r*i.typicalHalfwidthCharacterWidth,viewLineCounts:c}}class UG{constructor(t,i,e,s){this.lineTokens=t,this.lineBreakData=i,this.mightContainNonBasicASCII=e,this.mightContainRTL=s}}class HG{static fromEditor(t){var i;const e=t.getOptions(),s=e.get(50),n=e.get(145);return new HG(((i=t.getModel())===null||i===void 0?void 0:i.getOptions().tabSize)||0,s,e.get(33),s.typicalHalfwidthCharacterWidth,e.get(104),e.get(67),n.decorationsWidth,e.get(117),e.get(99),e.get(94),e.get(51))}constructor(t,i,e,s,n,o,r,h,c,a,l){this.tabSize=t,this.fontInfo=i,this.disableMonospaceOptimizations=e,this.typicalHalfwidthCharacterWidth=s,this.scrollBeyondLastColumn=n,this.lineHeight=o,this.lineDecorationsWidth=r,this.stopRenderingLineAfter=h,this.renderWhitespace=c,this.renderControlCharacters=a,this.fontLigatures=l}}function PG(t,i,e,s,n,o,r,h){h.appendString('<div class="view-line'),s||h.appendString(" char-delete"),h.appendString('" style="top:'),h.appendString(String(t*r.lineHeight)),h.appendString('px;width:1000000px;">');const c=i.getLineContent(),a=Dp.isBasicASCII(c,n),l=Dp.containsRTL(c,a,o),u=mp(new gp(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,c,!1,a,l,0,i,e,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==wi.OFF,null),h);return h.appendString("</div>"),u.characterMapping.getHorizontalOffset(u.characterMapping.length)}var jG=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},WG=function(t,i){return function(e,s){i(e,s,t)}};let YG=class extends te{constructor(t,i,e,s,n,o,r,h,c,a){super(),this._targetWindow=t,this._editors=i,this._diffModel=e,this._options=s,this._diffEditorWidget=n,this._canIgnoreViewZoneUpdateEvent=o,this._origViewZonesToIgnore=r,this._modViewZonesToIgnore=h,this._clipboardService=c,this._contextMenuService=a,this._originalTopPadding=Wz(this,0),this._originalScrollOffset=Wz(this,0),this._originalScrollOffsetAnimated=NJ(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=Wz(this,0),this._modifiedScrollOffset=Wz(this,0),this._modifiedScrollOffsetAnimated=NJ(this._targetWindow,this._modifiedScrollOffset,this._store);const l=Wz("invalidateAlignmentsState",0),u=this._register(new Er((()=>{l.set(l.get()+1,void 0)}),0));this._register(this._editors.original.onDidChangeViewZones((t=>{this._canIgnoreViewZoneUpdateEvent()||u.schedule()}))),this._register(this._editors.modified.onDidChangeViewZones((t=>{this._canIgnoreViewZoneUpdateEvent()||u.schedule()}))),this._register(this._editors.original.onDidChangeConfiguration((t=>{(t.hasChanged(146)||t.hasChanged(67))&&u.schedule()}))),this._register(this._editors.modified.onDidChangeConfiguration((t=>{(t.hasChanged(146)||t.hasChanged(67))&&u.schedule()})));const d=this._diffModel.map((t=>t?rU(t.model.original.onDidChangeTokens,(()=>t.model.original.tokenization.backgroundTokenizationState===2)):void 0)).map(((t,i)=>t==null?void 0:t.read(i))),f=Gz((t=>{const i=this._diffModel.read(t),e=i==null?void 0:i.diff.read(t);if(!i||!e)return null;l.read(t);const s=this._options.renderSideBySide.read(t);return _G(this._editors.original,this._editors.modified,e.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,s)})),g=Gz((t=>{var i;const e=(i=this._diffModel.read(t))===null||i===void 0?void 0:i.movedTextToCompare.read(t);if(!e)return null;l.read(t);const s=e.changes.map((t=>new TG(t)));return _G(this._editors.original,this._editors.modified,s,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)}));function A(){const t=document.createElement("div");return t.className="diagonal-fill",t}const p=this._register(new Zi);this.viewZones=$z(this,((t,i)=>{var e,s,o,r,h,c,a,l;p.clear();const u=f.read(t)||[],w=[],m=[],v=this._modifiedTopPadding.read(t);v>0&&m.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:v,showInHiddenAreas:!0,suppressMouseDown:!0});const b=this._originalTopPadding.read(t);b>0&&w.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:b,showInHiddenAreas:!0,suppressMouseDown:!0});const y=this._options.renderSideBySide.read(t),k=y||(e=this._editors.modified._getViewModel())===null||e===void 0?void 0:e.createLineBreaksComputer();if(k){const t=this._editors.original.getModel();for(const i of u)if(i.diff)for(let e=i.originalRange.startLineNumber;e<i.originalRange.endLineNumberExclusive;e++){if(e>t.getLineCount())return{orig:w,mod:m};k==null||k.addRequest(t.getLineContent(e),null,null)}}const x=(s=k==null?void 0:k.finalize())!==null&&s!==void 0?s:[];let C=0;const E=this._editors.modified.getOption(67),B=(o=this._diffModel.read(t))===null||o===void 0?void 0:o.movedTextToCompare.read(t),D=(h=(r=this._editors.original.getModel())===null||r===void 0?void 0:r.mightContainNonBasicASCII())!==null&&h!==void 0&&h,M=(a=(c=this._editors.original.getModel())===null||c===void 0?void 0:c.mightContainRTL())!==null&&a!==void 0&&a,S=HG.fromEditor(this._editors.modified);for(const e of u)if(e.diff&&!y){if(!e.originalRange.isEmpty){d.read(t);const i=document.createElement("div");i.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const s=this._editors.original.getModel();if(e.originalRange.endLineNumberExclusive-1>s.getLineCount())return{orig:w,mod:m};const n=new UG(e.originalRange.mapToLineArray((t=>s.tokenization.getLineTokens(t))),e.originalRange.mapToLineArray((t=>x[C++])),D,M),o=[];for(const t of e.diff.innerChanges||[])o.push(new Mp(t.originalRange.delta(-(e.diff.original.startLineNumber-1)),vG.className,0));const r=zG(n,S,o,i),h=document.createElement("div");if(h.className="inline-deleted-margin-view-zone",Da(h,S.fontInfo),this._options.renderIndicators.read(t))for(let t=0;t<r.heightInLines;t++){const i=document.createElement("div");i.className=`delete-sign ${Ka.asClassName(uG)}`,i.setAttribute("style",`position:absolute;top:${t*E}px;width:${S.lineDecorationsWidth}px;height:${E}px;right:0;`),h.appendChild(i)}let c;p.add(new QG((()=>_(c)),h,this._editors.modified,e.diff,this._diffEditorWidget,r.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let t=0;t<r.viewLineCounts.length;t++){const i=r.viewLineCounts[t];i>1&&w.push({afterLineNumber:e.originalRange.startLineNumber+t,domNode:A(),heightInPx:(i-1)*E,showInHiddenAreas:!0,suppressMouseDown:!0})}m.push({afterLineNumber:e.modifiedRange.startLineNumber-1,domNode:i,heightInPx:r.heightInLines*E,minWidthInPx:r.minWidthInPx,marginDomNode:h,setZoneId(t){c=t},showInHiddenAreas:!0,suppressMouseDown:!0})}const i=document.createElement("div");i.className="gutter-delete",w.push({afterLineNumber:e.originalRange.endLineNumberExclusive-1,domNode:A(),heightInPx:e.modifiedHeightInPx,marginDomNode:i,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const s=e.modifiedHeightInPx-e.originalHeightInPx;if(s>0){if(B!=null&&B.lineRangeMapping.original.delta(-1).deltaLength(2).contains(e.originalRange.endLineNumberExclusive-1))continue;w.push({afterLineNumber:e.originalRange.endLineNumberExclusive-1,domNode:A(),heightInPx:s,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let o=function(){const t=document.createElement("div");return t.className="arrow-revert-change "+Ka.asClassName(Fs.arrowRight),i.add(rc(t,"mousedown",(t=>t.stopPropagation()))),i.add(rc(t,"click",(t=>{t.stopPropagation(),n.revert(e.diff)}))),ha("div",{},t)};if(B!=null&&B.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(e.modifiedRange.endLineNumberExclusive-1))continue;let r;e.diff&&e.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(t)&&(r=o()),m.push({afterLineNumber:e.modifiedRange.endLineNumberExclusive-1,domNode:A(),heightInPx:-s,marginDomNode:r,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const i of(l=g.read(t))!==null&&l!==void 0?l:[]){if(!(B!=null&&B.lineRangeMapping.original.intersect(i.originalRange))||!(B!=null&&B.lineRangeMapping.modified.intersect(i.modifiedRange)))continue;const t=i.modifiedHeightInPx-i.originalHeightInPx;t>0?w.push({afterLineNumber:i.originalRange.endLineNumberExclusive-1,domNode:A(),heightInPx:t,showInHiddenAreas:!0,suppressMouseDown:!0}):m.push({afterLineNumber:i.modifiedRange.endLineNumberExclusive-1,domNode:A(),heightInPx:-t,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:w,mod:m}}));let w=!1;this._register(this._editors.original.onDidScrollChange((t=>{t.scrollLeftChanged&&!w&&(w=!0,this._editors.modified.setScrollLeft(t.scrollLeft),w=!1)}))),this._register(this._editors.modified.onDidScrollChange((t=>{t.scrollLeftChanged&&!w&&(w=!0,this._editors.original.setScrollLeft(t.scrollLeft),w=!1)}))),this._originalScrollTop=rU(this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=rU(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._register(Zz((t=>{const i=this._originalScrollTop.read(t)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(t))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(t));i!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(i,1)}))),this._register(Zz((t=>{const i=this._modifiedScrollTop.read(t)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(t))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(t));i!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(i,1)}))),this._register(Zz((t=>{var i;const e=(i=this._diffModel.read(t))===null||i===void 0?void 0:i.movedTextToCompare.read(t);let s=0;if(e){const t=this._editors.original.getTopForLineNumber(e.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();s=this._editors.modified.getTopForLineNumber(e.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-t}s>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(s,void 0)):s<0?(this._modifiedTopPadding.set(-s,void 0),this._originalTopPadding.set(0,void 0)):setTimeout((()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)}),400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-s,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+s,void 0,!0)})))}};function _G(t,i,e,s,n,o){const r=new L(VG(t,s)),h=new L(VG(i,n)),c=t.getOption(67),a=i.getOption(67),l=[];let u=0,d=0;function f(t,i){for(;;){let e=r.peek(),s=h.peek();if(e&&e.lineNumber>=t&&(e=void 0),s&&s.lineNumber>=i&&(s=void 0),!e&&!s)break;const n=e?e.lineNumber-u:Number.MAX_VALUE,o=s?s.lineNumber-d:Number.MAX_VALUE;n<o?(r.dequeue(),s={lineNumber:e.lineNumber-u+d,heightInPx:0}):n>o?(h.dequeue(),e={lineNumber:s.lineNumber-d+u,heightInPx:0}):(r.dequeue(),h.dequeue()),l.push({originalRange:Fg.ofLength(e.lineNumber,1),modifiedRange:Fg.ofLength(s.lineNumber,1),originalHeightInPx:c+e.heightInPx,modifiedHeightInPx:a+s.heightInPx,diff:void 0})}}for(const i of e){let e=function(t,e){var s,o,u,d;if(t<A||e<g)return;if(n)n=!1;else if(t===A||e===g)return;const f=new Fg(A,t),p=new Fg(g,e);if(f.isEmpty&&p.isEmpty)return;const w=(o=(s=r.takeWhile((i=>i.lineNumber<t)))===null||s===void 0?void 0:s.reduce(((t,i)=>t+i.heightInPx),0))!==null&&o!==void 0?o:0,m=(d=(u=h.takeWhile((t=>t.lineNumber<e)))===null||u===void 0?void 0:u.reduce(((t,i)=>t+i.heightInPx),0))!==null&&d!==void 0?d:0;l.push({originalRange:f,modifiedRange:p,originalHeightInPx:f.length*c+w,modifiedHeightInPx:p.length*a+m,diff:i.lineRangeMapping}),A=t,g=e};const s=i.lineRangeMapping;f(s.original.startLineNumber,s.modified.startLineNumber);let n=!0,g=s.modified.startLineNumber,A=s.original.startLineNumber;if(o)for(const i of s.innerChanges||[]){i.originalRange.startColumn>1&&i.modifiedRange.startColumn>1&&e(i.originalRange.startLineNumber,i.modifiedRange.startLineNumber);const s=t.getModel(),n=i.originalRange.endLineNumber<=s.getLineCount()?s.getLineMaxColumn(i.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;i.originalRange.endColumn<n&&e(i.originalRange.endLineNumber,i.modifiedRange.endLineNumber)}e(s.original.endLineNumberExclusive,s.modified.endLineNumberExclusive),u=s.original.endLineNumberExclusive,d=s.modified.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),l}function VG(t,i){const e=[],s=[],n=t.getOption(146).wrappingColumn!==-1,o=t._getViewModel().coordinatesConverter,r=t.getOption(67);if(n)for(let i=1;i<=t.getModel().getLineCount();i++){const t=o.getModelLineViewLineCount(i);t>1&&s.push({lineNumber:i,heightInPx:r*(t-1)})}for(const s of t.getWhitespaces()){if(i.has(s.id))continue;const t=s.afterLineNumber===0?0:o.convertViewPositionToModelPosition(new Cs(s.afterLineNumber,1)).lineNumber;e.push({lineNumber:t,heightInPx:s.height})}return function(t,i,e,s){if(t.length===0)return i;if(i.length===0)return t;const n=[];let o=0,r=0;for(;o<t.length&&r<i.length;){const h=t[o],c=i[r],a=e(h),l=e(c);a<l?(n.push(h),o++):a>l?(n.push(c),r++):(n.push(s(h,c)),o++,r++)}for(;o<t.length;)n.push(t[o]),o++;for(;r<i.length;)n.push(i[r]),r++;return n}(e,s,(t=>t.lineNumber),((t,i)=>({lineNumber:t.lineNumber,heightInPx:t.heightInPx+i.heightInPx})))}YG=jG([WG(8,IV),WG(9,aT)],YG);var JG,GG=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},KG=function(t,i){return function(e,s){i(e,s,t)}};let $G=JG=class extends te{static setBreadcrumbsSourceFactory(t){this._breadcrumbsSourceFactory.set(t,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(t,i,e,s){super(),this._editors=t,this._diffModel=i,this._options=e,this._instantiationService=s,this._modifiedOutlineSource=Xz(this,(t=>{const i=this._editors.modifiedModel.read(t),e=JG._breadcrumbsSourceFactory.read(t);return i&&e?e(i,this._instantiationService):void 0})),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition((t=>{if(t.reason===1)return;const i=this._diffModel.get();Uz((t=>{for(const e of this._editors.original.getSelections()||[])i==null||i.ensureOriginalLineIsVisible(e.getStartPosition().lineNumber,0,t),i==null||i.ensureOriginalLineIsVisible(e.getEndPosition().lineNumber,0,t)}))}))),this._register(this._editors.modified.onDidChangeCursorPosition((t=>{if(t.reason===1)return;const i=this._diffModel.get();Uz((t=>{for(const e of this._editors.modified.getSelections()||[])i==null||i.ensureModifiedLineIsVisible(e.getStartPosition().lineNumber,0,t),i==null||i.ensureModifiedLineIsVisible(e.getEndPosition().lineNumber,0,t)}))})));const n=this._diffModel.map(((t,i)=>{var e,s;const n=(e=t==null?void 0:t.unchangedRegions.read(i))!==null&&e!==void 0?e:[];return n.length===1&&n[0].modifiedLineNumber===1&&n[0].lineCount===((s=this._editors.modifiedModel.read(i))===null||s===void 0?void 0:s.getLineCount())?[]:n}));this.viewZones=$z(this,((t,i)=>{const e=this._modifiedOutlineSource.read(t);if(!e)return{origViewZones:[],modViewZones:[]};const s=[],o=[],r=this._options.renderSideBySide.read(t),h=n.read(t);for(const n of h)if(!n.shouldHideControls(t)){{const t=Gz(this,(t=>n.getHiddenOriginalRange(t).startLineNumber-1)),o=new OJ(t,24);s.push(o),i.add(new XG(this._editors.original,o,n,n.originalUnchangedRange,!r,e,(t=>this._diffModel.get().ensureModifiedLineIsVisible(t,2,void 0)),this._options))}{const t=Gz(this,(t=>n.getHiddenModifiedRange(t).startLineNumber-1)),s=new OJ(t,24);o.push(s),i.add(new XG(this._editors.modified,s,n,n.modifiedUnchangedRange,!1,e,(t=>this._diffModel.get().ensureModifiedLineIsVisible(t,2,void 0)),this._options))}}return{origViewZones:s,modViewZones:o}}));const o={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},r={description:"Fold Unchanged",glyphMarginHoverMessage:new RN(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(st(0,"Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+Ka.asClassName(Fs.fold),zIndex:10001};this._register(LJ(this._editors.original,Gz(this,(t=>{const i=n.read(t),e=i.map((t=>({range:t.originalUnchangedRange.toInclusiveRange(),options:o})));for(const s of i)s.shouldHideControls(t)&&e.push({range:Es.fromPositions(new Cs(s.originalLineNumber,1)),options:r});return e})))),this._register(LJ(this._editors.modified,Gz(this,(t=>{const i=n.read(t),e=i.map((t=>({range:t.modifiedUnchangedRange.toInclusiveRange(),options:o})));for(const s of i)s.shouldHideControls(t)&&e.push({range:Fg.ofLength(s.modifiedLineNumber,1).toInclusiveRange(),options:r});return e})))),this._register(Zz((t=>{const i=n.read(t);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(i.map((i=>i.getHiddenOriginalRange(t).toInclusiveRange())).filter(j)),this._editors.modified.setHiddenAreas(i.map((i=>i.getHiddenModifiedRange(t).toInclusiveRange())).filter(j))}finally{this._isUpdatingHiddenAreas=!1}}))),this._register(this._editors.modified.onMouseUp((t=>{var i;if(!t.event.rightButton&&t.target.position&&(!((i=t.target.element)===null||i===void 0)&&i.className.includes("fold-unchanged"))){const i=t.target.position.lineNumber,e=this._diffModel.get();if(!e)return;const s=e.unchangedRegions.get().find((t=>t.modifiedUnchangedRange.includes(i)));if(!s)return;s.collapseAll(void 0),t.event.stopPropagation(),t.event.preventDefault()}}))),this._register(this._editors.original.onMouseUp((t=>{var i;if(!t.event.rightButton&&t.target.position&&(!((i=t.target.element)===null||i===void 0)&&i.className.includes("fold-unchanged"))){const i=t.target.position.lineNumber,e=this._diffModel.get();if(!e)return;const s=e.unchangedRegions.get().find((t=>t.originalUnchangedRange.includes(i)));if(!s)return;s.collapseAll(void 0),t.event.stopPropagation(),t.event.preventDefault()}})))}};$G._breadcrumbsSourceFactory=Wz("breadcrumbsSourceFactory",void 0),$G=JG=GG([KG(3,Oa)],$G);class XG extends QJ{constructor(t,i,e,s,n,o,r,h){const c=va("div.diff-hidden-lines-widget");super(t,i,c.root),this._editor=t,this._unchangedRegion=e,this._unchangedRegionRange=s,this._hide=n,this._modifiedOutlineSource=o,this._revealModifiedHiddenLine=r,this._options=h,this._nodes=va("div.diff-hidden-lines",[va("div.top@top",{title:st(0,"Click or drag to show more above")}),va("div.center@content",{style:{display:"flex"}},[va("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[ha("a",{title:st(0,"Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...kT("$(unfold)"))]),va("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),va("div.bottom@bottom",{title:st(0,"Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root);const a=rU(this._editor.onDidLayoutChange,(()=>this._editor.getLayoutInfo()));this._hide?sa(this._nodes.first):this._register(UJ(this._nodes.first,{width:a.map((t=>t.contentLeft))})),this._register(Zz((t=>{const i=this._unchangedRegion.visibleLineCountTop.read(t)+this._unchangedRegion.visibleLineCountBottom.read(t)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!i),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(t)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(t)>0),this._nodes.top.classList.toggle("canMoveBottom",!i);const e=this._unchangedRegion.isDragged.read(t),s=this._editor.getDomNode();s&&(s.classList.toggle("draggingUnchangedRegion",!!e),e==="top"?(s.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(t)>0),s.classList.toggle("canMoveBottom",!i)):e==="bottom"?(s.classList.toggle("canMoveTop",!i),s.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(t)>0)):(s.classList.toggle("canMoveTop",!1),s.classList.toggle("canMoveBottom",!1)))})));const l=this._editor;this._register(rc(this._nodes.top,"mousedown",(t=>{if(t.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),t.preventDefault();const i=t.clientY;let e=!1;const s=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const n=Gh(this._nodes.top),o=rc(n,"mousemove",(t=>{const n=t.clientY-i;e=e||Math.abs(n)>2;const o=Math.round(n/l.getOption(67)),r=Math.max(0,Math.min(s+o,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(r,void 0)})),r=rc(n,"mouseup",(t=>{e||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),o.dispose(),r.dispose()}))}))),this._register(rc(this._nodes.bottom,"mousedown",(t=>{if(t.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),t.preventDefault();const i=t.clientY;let e=!1;const s=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const n=Gh(this._nodes.bottom),o=rc(n,"mousemove",(t=>{const n=t.clientY-i;e=e||Math.abs(n)>2;const o=Math.round(n/l.getOption(67)),r=Math.max(0,Math.min(s-o,this._unchangedRegion.getMaxVisibleLineCountBottom())),h=this._unchangedRegionRange.endLineNumberExclusive>l.getModel().getLineCount()?l.getContentHeight():l.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(r,void 0);const c=this._unchangedRegionRange.endLineNumberExclusive>l.getModel().getLineCount()?l.getContentHeight():l.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);l.setScrollTop(l.getScrollTop()+(c-h))})),r=rc(n,"mouseup",(t=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!e){const t=l.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const i=l.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);l.setScrollTop(l.getScrollTop()+(i-t))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),o.dispose(),r.dispose()}))}))),this._register(Zz((t=>{const i=[];if(!this._hide){const s=st(0,"{0} hidden lines",e.getHiddenModifiedRange(t).length),n=ha("span",{title:st(0,"Double click to unfold")},s);n.addEventListener("dblclick",(t=>{t.button===0&&(t.preventDefault(),this._unchangedRegion.showAll(void 0))})),i.push(n);const o=this._unchangedRegion.getHiddenModifiedRange(t),r=this._modifiedOutlineSource.getBreadcrumbItems(o,t);if(r.length>0){i.push(ha("span",void 0,"  |  "));for(let t=0;t<r.length;t++){const e=r[t],s=va("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[xT(js.toIcon(e.kind))," ",e.name,...t===r.length-1?[]:[xT(Fs.chevronRight)]]).root;i.push(s),s.onclick=()=>{this._revealModifiedHiddenLine(e.startLineNumber)}}}}sa(this._nodes.others,...i)})))}}var qG,ZG=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},tK=function(t,i){return function(e,s){i(e,s,t)}};let iK=qG=class extends te{constructor(t,i,e,s,n,o,r){super(),this._editors=t,this._rootElement=i,this._diffModel=e,this._rootWidth=s,this._rootHeight=n,this._modifiedEditorLayoutInfo=o,this._themeService=r,this.width=qG.ENTIRE_DIFF_OVERVIEW_WIDTH;const h=rU(this._themeService.onDidColorThemeChange,(()=>this._themeService.getColorTheme())),c=Gz((t=>{const i=h.read(t);return{insertColor:i.getColor(Hm)||(i.getColor(zm)||Qm).transparent(2),removeColor:i.getColor(Pm)||(i.getColor(Um)||Om).transparent(2)}})),a=Ba(document.createElement("div"));a.setClassName("diffViewport"),a.setPosition("absolute");const l=va("div.diffOverview",{style:{position:"absolute",top:"0px",width:qG.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(RJ(l,a.domNode)),this._register(cc(l,$c.POINTER_DOWN,(t=>{this._editors.modified.delegateVerticalScrollbarPointerDown(t)}))),this._register(rc(l,$c.MOUSE_WHEEL,(t=>{this._editors.modified.delegateScrollFromMouseWheelEvent(t)}),{passive:!1})),this._register(RJ(this._rootElement,l)),this._register(eU(((t,i)=>{const e=this._diffModel.read(t),s=this._editors.original.createOverviewRuler("original diffOverviewRuler");s&&(i.add(s),i.add(RJ(l,s.getDomNode())));const n=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(n&&(i.add(n),i.add(RJ(l,n.getDomNode()))),!s||!n)return;const o=cU("viewZoneChanged",this._editors.original.onDidChangeViewZones),r=cU("viewZoneChanged",this._editors.modified.onDidChangeViewZones),h=cU("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),u=cU("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);i.add(Zz((t=>{var i;o.read(t),r.read(t),h.read(t),u.read(t);const a=c.read(t),l=(i=e==null?void 0:e.diff.read(t))===null||i===void 0?void 0:i.mappings;function d(t,i,e){const s=e._getViewModel();return s?t.filter((t=>t.length>0)).map((t=>{const e=s.coordinatesConverter.convertModelPositionToViewPosition(new Cs(t.startLineNumber,1)),n=s.coordinatesConverter.convertModelPositionToViewPosition(new Cs(t.endLineNumberExclusive,1)),o=n.lineNumber-e.lineNumber;return new hB(e.lineNumber,n.lineNumber,o,i.toString())})):[]}const f=d((l||[]).map((t=>t.lineRangeMapping.original)),a.removeColor,this._editors.original),g=d((l||[]).map((t=>t.lineRangeMapping.modified)),a.insertColor,this._editors.modified);s==null||s.setZones(f),n==null||n.setZones(g)}))),i.add(Zz((t=>{const i=this._rootHeight.read(t),e=this._rootWidth.read(t),o=this._modifiedEditorLayoutInfo.read(t);if(o){const e=qG.ENTIRE_DIFF_OVERVIEW_WIDTH-2*qG.ONE_OVERVIEW_WIDTH;s.setLayout({top:0,height:i,right:e+qG.ONE_OVERVIEW_WIDTH,width:qG.ONE_OVERVIEW_WIDTH}),n.setLayout({top:0,height:i,right:0,width:qG.ONE_OVERVIEW_WIDTH});const r=this._editors.modifiedScrollTop.read(t),h=this._editors.modifiedScrollHeight.read(t),c=this._editors.modified.getOption(103),l=new Ky(c.verticalHasArrows?c.arrowSize:0,c.verticalScrollbarSize,0,o.height,h,r);a.setTop(l.getSliderPosition()),a.setHeight(l.getSliderSize())}else a.setTop(0),a.setHeight(0);l.style.height=i+"px",l.style.left=e-qG.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",a.setWidth(qG.ENTIRE_DIFF_OVERVIEW_WIDTH)})))})))}};iK.ONE_OVERVIEW_WIDTH=15,iK.ENTIRE_DIFF_OVERVIEW_WIDTH=2*qG.ONE_OVERVIEW_WIDTH,iK=qG=ZG([tK(6,Fk)],iK);const eK=[];class sK extends te{constructor(t,i,e,s){super(),this._editors=t,this._diffModel=i,this._options=e,this._widget=s,this._selectedDiffs=Gz(this,(t=>{const i=this._diffModel.read(t),e=i==null?void 0:i.diff.read(t);if(!e)return eK;const s=this._editors.modifiedSelections.read(t);if(s.every((t=>t.isEmpty())))return eK;const n=new Ig(s.map((t=>Fg.fromRangeInclusive(t)))),o=e.mappings.filter((t=>t.lineRangeMapping.innerChanges&&n.intersects(t.lineRangeMapping.modified))).map((t=>({mapping:t,rangeMappings:t.lineRangeMapping.innerChanges.filter((t=>s.some((i=>Es.areIntersecting(t.modifiedRange,i)))))})));return o.length===0||o.every((t=>t.rangeMappings.length===0))?eK:o})),this._register(eU(((t,i)=>{if(!this._options.shouldRenderOldRevertArrows.read(t))return;const e=this._diffModel.read(t),s=e==null?void 0:e.diff.read(t);if(!e||!s||e.movedTextToCompare.read(t))return;const n=[],o=this._selectedDiffs.read(t),r=new Set(o.map((t=>t.mapping)));if(o.length>0){const e=this._editors.modifiedSelections.read(t),s=i.add(new nK(e[e.length-1].positionLineNumber,this._widget,o.flatMap((t=>t.rangeMappings)),!0));this._editors.modified.addGlyphMarginWidget(s),n.push(s)}for(const t of s.mappings)if(!r.has(t)&&!t.lineRangeMapping.modified.isEmpty&&t.lineRangeMapping.innerChanges){const e=i.add(new nK(t.lineRangeMapping.modified.startLineNumber,this._widget,t.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(e),n.push(e)}i.add(qi((()=>{for(const t of n)this._editors.modified.removeGlyphMarginWidget(t)})))})))}}class nK extends te{getId(){return this._id}constructor(t,i,e,s){super(),this._lineNumber=t,this._widget=i,this._diffs=e,this._revertSelection=s,this._id="revertButton"+nK.counter++,this._domNode=va("div.revertButton",{title:this._revertSelection?st(0,"Revert Selected Changes"):st(0,"Revert Change")},[xT(Fs.arrowRight)]).root,this._register(rc(this._domNode,$c.MOUSE_DOWN,(t=>{t.button!==2&&(t.stopPropagation(),t.preventDefault())}))),this._register(rc(this._domNode,$c.MOUSE_UP,(t=>{t.stopPropagation(),t.preventDefault()}))),this._register(rc(this._domNode,$c.CLICK,(t=>{this._diffs instanceof Lg?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),t.stopPropagation(),t.preventDefault()})))}getDomNode(){return this._domNode}getPosition(){return{lane:eg.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}}nK.counter=0;var oK=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},rK=function(t,i){return function(e,s){i(e,s,t)}};let hK=class extends te{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(t,i,e,s,n,o,r){super(),this.originalEditorElement=t,this.modifiedEditorElement=i,this._options=e,this._argCodeEditorWidgetOptions=s,this._createInnerEditor=n,this._instantiationService=o,this._keybindingService=r,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new de),this.modifiedScrollTop=rU(this.modified.onDidScrollChange,(()=>this.modified.getScrollTop())),this.modifiedScrollHeight=rU(this.modified.onDidScrollChange,(()=>this.modified.getScrollHeight())),this.modifiedModel=rU(this.modified.onDidChangeModel,(()=>this.modified.getModel())),this.modifiedSelections=rU(this.modified.onDidChangeCursorSelection,(()=>{var t;return(t=this.modified.getSelections())!==null&&t!==void 0?t:[]})),this.modifiedCursor=Kz({owner:this,equalityComparer:Cs.equals},(t=>{var i,e;return(e=(i=this.modifiedSelections.read(t)[0])===null||i===void 0?void 0:i.getPosition())!==null&&e!==void 0?e:new Cs(1,1)})),this.originalCursor=rU(this.original.onDidChangeCursorPosition,(()=>{var t;return(t=this.original.getPosition())!==null&&t!==void 0?t:new Cs(1,1)})),this._argCodeEditorWidgetOptions=null,this._register(iU({createEmptyChangeSummary:()=>({}),handleChange:(t,i)=>(t.didChange(e.editorOptions)&&Object.assign(i,t.change.changedOptions),!0)},((t,i)=>{e.editorOptions.read(t),this._options.renderSideBySide.read(t),this.modified.updateOptions(this._adjustOptionsForRightHandSide(t,i)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(t,i))})))}_createLeftHandSideEditor(t,i){const e=this._adjustOptionsForLeftHandSide(void 0,t),s=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,e,i);return s.setContextValue("isInDiffLeftEditor",!0),s}_createRightHandSideEditor(t,i){const e=this._adjustOptionsForRightHandSide(void 0,t),s=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,e,i);return s.setContextValue("isInDiffRightEditor",!0),s}_constructInnerEditor(t,i,e,s){const n=this._createInnerEditor(t,i,e,s);return this._register(n.onDidContentSizeChange((t=>{const i=this.original.getContentWidth()+this.modified.getContentWidth()+iK.ENTIRE_DIFF_OVERVIEW_WIDTH,e=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:e,contentWidth:i,contentHeightChanged:t.contentHeightChanged,contentWidthChanged:t.contentWidthChanged})}))),n}_adjustOptionsForLeftHandSide(t,i){const e=this._adjustOptionsForSubEditor(i);return this._options.renderSideBySide.get()?(e.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},e.wordWrapOverride1=this._options.diffWordWrap.get()):(e.wordWrapOverride1="off",e.wordWrapOverride2="off",e.stickyScroll={enabled:!1},e.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),e.glyphMargin=this._options.renderSideBySide.get(),i.originalAriaLabel&&(e.ariaLabel=i.originalAriaLabel),e.ariaLabel=this._updateAriaLabel(e.ariaLabel),e.readOnly=!this._options.originalEditable.get(),e.dropIntoEditor={enabled:!e.readOnly},e.extraEditorClassName="original-in-monaco-diff-editor",e}_adjustOptionsForRightHandSide(t,i){const e=this._adjustOptionsForSubEditor(i);return i.modifiedAriaLabel&&(e.ariaLabel=i.modifiedAriaLabel),e.ariaLabel=this._updateAriaLabel(e.ariaLabel),e.wordWrapOverride1=this._options.diffWordWrap.get(),e.revealHorizontalRightPadding=Ni.revealHorizontalRightPadding.defaultValue+iK.ENTIRE_DIFF_OVERVIEW_WIDTH,e.scrollbar.verticalHasArrows=!1,e.extraEditorClassName="modified-in-monaco-diff-editor",e}_adjustOptionsForSubEditor(t){const i={...t,dimension:{height:0,width:0}};return i.inDiffEditor=!0,i.automaticLayout=!1,i.scrollbar={...i.scrollbar||{}},i.folding=!1,i.codeLens=this._options.diffCodeLens.get(),i.fixedOverflowWidgets=!0,i.minimap={...i.minimap||{}},i.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?i.stickyScroll={enabled:!1}:i.stickyScroll=this._options.editorOptions.get().stickyScroll,i}_updateAriaLabel(t){var i;t||(t="");const e=st(0," use {0} to open the accessibility help.",(i=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))===null||i===void 0?void 0:i.getAriaLabel());return this._options.accessibilityVerbose.get()?t+e:t?t.replaceAll(e,""):""}};hK=oK([rK(5,Oa),rK(6,Hx)],hK);class cK extends te{constructor(){super(...arguments),this._id=++cK.idCounter,this._onDidDispose=this._register(new de),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(t){return this._targetEditor.getVisibleColumnFromPosition(t)}getPosition(){return this._targetEditor.getPosition()}setPosition(t,i="api"){this._targetEditor.setPosition(t,i)}revealLine(t,i=0){this._targetEditor.revealLine(t,i)}revealLineInCenter(t,i=0){this._targetEditor.revealLineInCenter(t,i)}revealLineInCenterIfOutsideViewport(t,i=0){this._targetEditor.revealLineInCenterIfOutsideViewport(t,i)}revealLineNearTop(t,i=0){this._targetEditor.revealLineNearTop(t,i)}revealPosition(t,i=0){this._targetEditor.revealPosition(t,i)}revealPositionInCenter(t,i=0){this._targetEditor.revealPositionInCenter(t,i)}revealPositionInCenterIfOutsideViewport(t,i=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(t,i)}revealPositionNearTop(t,i=0){this._targetEditor.revealPositionNearTop(t,i)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(t,i="api"){this._targetEditor.setSelection(t,i)}setSelections(t,i="api"){this._targetEditor.setSelections(t,i)}revealLines(t,i,e=0){this._targetEditor.revealLines(t,i,e)}revealLinesInCenter(t,i,e=0){this._targetEditor.revealLinesInCenter(t,i,e)}revealLinesInCenterIfOutsideViewport(t,i,e=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(t,i,e)}revealLinesNearTop(t,i,e=0){this._targetEditor.revealLinesNearTop(t,i,e)}revealRange(t,i=0,e=!1,s=!0){this._targetEditor.revealRange(t,i,e,s)}revealRangeInCenter(t,i=0){this._targetEditor.revealRangeInCenter(t,i)}revealRangeInCenterIfOutsideViewport(t,i=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(t,i)}revealRangeNearTop(t,i=0){this._targetEditor.revealRangeNearTop(t,i)}revealRangeNearTopIfOutsideViewport(t,i=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(t,i)}revealRangeAtTop(t,i=0){this._targetEditor.revealRangeAtTop(t,i)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(t,i,e){this._targetEditor.trigger(t,i,e)}createDecorationsCollection(t){return this._targetEditor.createDecorationsCollection(t)}changeDecorations(t){return this._targetEditor.changeDecorations(t)}}cK.idCounter=0;var aK=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},lK=function(t,i){return function(e,s){i(e,s,t)}};let uK=class{get editorOptions(){return this._options}constructor(t,i){this._accessibilityService=i,this._diffEditorWidth=Wz(this,0),this._screenReaderMode=rU(this._accessibilityService.onDidChangeScreenReaderOptimized,(()=>this._accessibilityService.isScreenReaderOptimized())),this.couldShowInlineViewBecauseOfSize=Gz(this,(t=>this._options.read(t).renderSideBySide&&this._diffEditorWidth.read(t)<=this._options.read(t).renderSideBySideInlineBreakpoint)),this.renderOverviewRuler=Gz(this,(t=>this._options.read(t).renderOverviewRuler)),this.renderSideBySide=Gz(this,(t=>this._options.read(t).renderSideBySide&&!(this._options.read(t).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(t)&&!this._screenReaderMode.read(t)))),this.readOnly=Gz(this,(t=>this._options.read(t).readOnly)),this.shouldRenderOldRevertArrows=Gz(this,(t=>!!this._options.read(t).renderMarginRevertIcon&&!!this.renderSideBySide.read(t)&&!this.readOnly.read(t)&&!this.shouldRenderGutterMenu.read(t))),this.shouldRenderGutterMenu=Gz(this,(t=>this._options.read(t).renderGutterMenu)),this.renderIndicators=Gz(this,(t=>this._options.read(t).renderIndicators)),this.enableSplitViewResizing=Gz(this,(t=>this._options.read(t).enableSplitViewResizing)),this.splitViewDefaultRatio=Gz(this,(t=>this._options.read(t).splitViewDefaultRatio)),this.ignoreTrimWhitespace=Gz(this,(t=>this._options.read(t).ignoreTrimWhitespace)),this.maxComputationTimeMs=Gz(this,(t=>this._options.read(t).maxComputationTime)),this.showMoves=Gz(this,(t=>this._options.read(t).experimental.showMoves&&this.renderSideBySide.read(t))),this.isInEmbeddedEditor=Gz(this,(t=>this._options.read(t).isInEmbeddedEditor)),this.diffWordWrap=Gz(this,(t=>this._options.read(t).diffWordWrap)),this.originalEditable=Gz(this,(t=>this._options.read(t).originalEditable)),this.diffCodeLens=Gz(this,(t=>this._options.read(t).diffCodeLens)),this.accessibilityVerbose=Gz(this,(t=>this._options.read(t).accessibilityVerbose)),this.diffAlgorithm=Gz(this,(t=>this._options.read(t).diffAlgorithm)),this.showEmptyDecorations=Gz(this,(t=>this._options.read(t).experimental.showEmptyDecorations)),this.onlyShowAccessibleDiffViewer=Gz(this,(t=>this._options.read(t).onlyShowAccessibleDiffViewer)),this.hideUnchangedRegions=Gz(this,(t=>this._options.read(t).hideUnchangedRegions.enabled)),this.hideUnchangedRegionsRevealLineCount=Gz(this,(t=>this._options.read(t).hideUnchangedRegions.revealLineCount)),this.hideUnchangedRegionsContextLineCount=Gz(this,(t=>this._options.read(t).hideUnchangedRegions.contextLineCount)),this.hideUnchangedRegionsMinimumLineCount=Gz(this,(t=>this._options.read(t).hideUnchangedRegions.minimumLineCount));const e={...t,...dK(t,WQ)};this._options=Wz(this,e)}updateOptions(t){const i=dK(t,this._options.get()),e={...this._options.get(),...t,...i};this._options.set(e,void 0,{changedOptions:t})}setWidth(t){this._diffEditorWidth.set(t,void 0)}};function dK(t,i){var e,s,n,o,r,h,c,a;return{enableSplitViewResizing:oi(t.enableSplitViewResizing,i.enableSplitViewResizing),splitViewDefaultRatio:ai(t.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:oi(t.renderSideBySide,i.renderSideBySide),renderMarginRevertIcon:oi(t.renderMarginRevertIcon,i.renderMarginRevertIcon),maxComputationTime:hi(t.maxComputationTime,i.maxComputationTime,0,1073741824),maxFileSize:hi(t.maxFileSize,i.maxFileSize,0,1073741824),ignoreTrimWhitespace:oi(t.ignoreTrimWhitespace,i.ignoreTrimWhitespace),renderIndicators:oi(t.renderIndicators,i.renderIndicators),originalEditable:oi(t.originalEditable,i.originalEditable),diffCodeLens:oi(t.diffCodeLens,i.diffCodeLens),renderOverviewRuler:oi(t.renderOverviewRuler,i.renderOverviewRuler),diffWordWrap:di(t.diffWordWrap,i.diffWordWrap,["off","on","inherit"]),diffAlgorithm:di(t.diffAlgorithm,i.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:oi(t.accessibilityVerbose,i.accessibilityVerbose),experimental:{showMoves:oi((e=t.experimental)===null||e===void 0?void 0:e.showMoves,i.experimental.showMoves),showEmptyDecorations:oi((s=t.experimental)===null||s===void 0?void 0:s.showEmptyDecorations,i.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:oi((o=(n=t.hideUnchangedRegions)===null||n===void 0?void 0:n.enabled)!==null&&o!==void 0?o:(r=t.experimental)===null||r===void 0?void 0:r.collapseUnchangedRegions,i.hideUnchangedRegions.enabled),contextLineCount:hi((h=t.hideUnchangedRegions)===null||h===void 0?void 0:h.contextLineCount,i.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:hi((c=t.hideUnchangedRegions)===null||c===void 0?void 0:c.minimumLineCount,i.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:hi((a=t.hideUnchangedRegions)===null||a===void 0?void 0:a.revealLineCount,i.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:oi(t.isInEmbeddedEditor,i.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:oi(t.onlyShowAccessibleDiffViewer,i.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:hi(t.renderSideBySideInlineBreakpoint,i.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:oi(t.useInlineViewWhenSpaceIsLimited,i.useInlineViewWhenSpaceIsLimited),renderGutterMenu:oi(t.renderGutterMenu,i.renderGutterMenu)}}uK=aK([lK(1,yw)],uK);class fK extends te{constructor(t,i,e){super(),this._editor=t,this._domNode=i,this.itemProvider=e,this.scrollTop=rU(this._editor.onDidScrollChange,(t=>this._editor.getScrollTop())),this.isScrollTopZero=this.scrollTop.map((t=>t===0)),this.modelAttached=rU(this._editor.onDidChangeModel,(t=>this._editor.hasModel())),this.editorOnDidChangeViewZones=cU("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=cU("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=lU("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const s=this._domNode.appendChild(va("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),n=new ResizeObserver((()=>{Uz((t=>{this.domNodeSizeChanged.trigger(t)}))}));n.observe(this._domNode),this._register(qi((()=>n.disconnect()))),this._register(Zz((t=>{s.className=this.isScrollTopZero.read(t)?"":"scroll-decoration"}))),this._register(Zz((t=>this.render(t))))}dispose(){super.dispose(),sa(this._domNode)}render(t){if(!this.modelAttached.read(t))return;this.domNodeSizeChanged.read(t),this.editorOnDidChangeViewZones.read(t),this.editorOnDidContentSizeChange.read(t);const i=this.scrollTop.read(t),e=this._editor.getVisibleRanges(),s=new Set(this.views.keys()),n=yg.ofStartAndLength(0,this._domNode.clientHeight);if(!n.isEmpty)for(const o of e){const e=new Fg(o.startLineNumber,o.endLineNumber+1),r=this.itemProvider.getIntersectingGutterItems(e,t);Uz((t=>{for(const o of r){if(!o.range.intersect(e))continue;s.delete(o.id);let r=this.views.get(o.id);if(r)r.item.set(o,t);else{const t=document.createElement("div");this._domNode.appendChild(t);const i=Wz("item",o),e=this.itemProvider.createView(i,t);r=new gK(i,e,t),this.views.set(o.id,r)}const h=o.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(o.range.startLineNumber,!0)-i:this._editor.getBottomForLineNumber(o.range.startLineNumber-1,!1)-i,c=(o.range.isEmpty?h:this._editor.getBottomForLineNumber(o.range.endLineNumberExclusive-1,!0)-i)-h;r.domNode.style.top=`${h}px`,r.domNode.style.height=`${c}px`,r.gutterItemView.layout(yg.ofStartAndLength(h,c),n)}}))}for(const t of s){const i=this.views.get(t);i.gutterItemView.dispose(),this._domNode.removeChild(i.domNode),this.views.delete(t)}}}class gK{constructor(t,i,e){this.item=t,this.gutterItemView=i,this.domNode=e}}class AK extends Wa{constructor(t){super(),this._getContext=t}runAction(t,i){const e=this._getContext();return super.runAction(t,e)}}class pK{constructor(t){this.text=t,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let i=0;i<t.length;i++)t.charAt(i)===`\n`&&this.lineStartOffsetByLineIdx.push(i+1)}getOffset(t){return this.lineStartOffsetByLineIdx[t.lineNumber-1]+t.column-1}getOffsetRange(t){return new yg(this.getOffset(t.getStartPosition()),this.getOffset(t.getEndPosition()))}get textLength(){const t=this.lineStartOffsetByLineIdx.length-1;return new oD(t,this.text.length-this.lineStartOffsetByLineIdx[t])}}class wK{constructor(t){this.edits=t,Yl((()=>_l(t,((t,i)=>t.range.getEndPosition().isBeforeOrEqual(i.range.getStartPosition())))))}apply(t){let i="",e=new Cs(1,1);for(const s of this.edits){const n=s.range,o=n.getStartPosition(),r=n.getEndPosition(),h=vK(e,o);h.isEmpty()||(i+=t.getValueOfRange(h)),i+=s.text,e=r}const s=vK(e,t.endPositionExclusive);return s.isEmpty()||(i+=t.getValueOfRange(s)),i}applyToString(t){const i=new yK(t);return this.apply(i)}getNewRanges(){const t=[];let i=0,e=0,s=0;for(const n of this.edits){const o=oD.ofText(n.text),r=Cs.lift({lineNumber:n.range.startLineNumber+e,column:n.range.startColumn+(n.range.startLineNumber===i?s:0)}),h=o.createRange(r);t.push(h),e=h.endLineNumber-n.range.endLineNumber,s=h.endColumn-n.range.endColumn,i=n.range.endLineNumber}return t}}class mK{constructor(t,i){this.range=t,this.text=i}}function vK(t,i){if(!t.isBeforeOrEqual(i))throw new Ji("start must be before end");return new Es(t.lineNumber,t.column,i.lineNumber,i.column)}class bK{get endPositionExclusive(){return this.length.addToPosition(new Cs(1,1))}}class yK extends bK{constructor(t){super(),this.value=t,this._t=new pK(this.value)}getValueOfRange(t){return this._t.getOffsetRange(t).substring(this.value)}get length(){return this._t.textLength}}class kK extends bK{constructor(t){super(),this._textModel=t}getValueOfRange(t){return this._textModel.getValueInRange(t)}get length(){const t=this._textModel.getLineCount(),i=this._textModel.getLineLength(t);return new oD(t-1,i)}}class xK extends te{constructor(t,i,e={orientation:0}){var s;super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new we),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new Zi),e.hoverDelegate=(s=e.hoverDelegate)!==null&&s!==void 0?s:this._register(lz()),this.options=e,this.lookupKeybindings=typeof this.options.getKeyBinding=="function",this.toggleMenuAction=this._register(new CK((()=>{var t;return(t=this.toggleMenuActionViewItem)===null||t===void 0?void 0:t.show()}),e.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",t.appendChild(this.element),this.actionBar=this._register(new RH(this.element,{orientation:e.orientation,ariaLabel:e.ariaLabel,actionRunner:e.actionRunner,allowContextMenu:e.allowContextMenu,highlightToggledItems:e.highlightToggledItems,hoverDelegate:e.hoverDelegate,actionViewItemProvider:(t,s)=>{var n;if(t.id===CK.ID)return this.toggleMenuActionViewItem=new eH(t,t.menuActions,i,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:Ka.asClassNameArray((n=e.moreIcon)!==null&&n!==void 0?n:Fs.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(e.actionViewItemProvider){const i=e.actionViewItemProvider(t,s);if(i)return i}if(t instanceof _a){const e=new eH(t,t.actions,i,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:t.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return e.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(e),this.disposables.add(this._onDidChangeDropdownVisibility.add(e.onDidChangeVisibility)),e}}}))}set actionRunner(t){this.actionBar.actionRunner=t}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(t){return this.actionBar.getAction(t)}setActions(t,i){this.clear();const e=t?t.slice(0):[];this.hasSecondaryActions=!!(i&&i.length>0),this.hasSecondaryActions&&i&&(this.toggleMenuAction.menuActions=i.slice(0),e.push(this.toggleMenuAction)),e.forEach((t=>{this.actionBar.push(t,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(t)})}))}getKeybindingLabel(t){var i,e,s;const n=this.lookupKeybindings?(e=(i=this.options).getKeyBinding)===null||e===void 0?void 0:e.call(i,t):void 0;return(s=n==null?void 0:n.getLabel())!==null&&s!==void 0?s:void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}class CK extends ja{constructor(t,i){i=i||st(0,"More Actions..."),super(CK.ID,i,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=t}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(t){this._menuActions=t}}CK.ID="toolbar.toggle.more";var EK=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},BK=function(t,i){return function(e,s){i(e,s,t)}};let DK=class extends xK{constructor(t,i,e,s,n,o,r){super(t,n,{getKeyBinding:t=>{var i;return(i=o.lookupKeybinding(t.id))!==null&&i!==void 0?i:void 0},...i,allowContextMenu:!0,skipTelemetry:typeof(i==null?void 0:i.telemetrySource)=="string"}),this._options=i,this._menuService=e,this._contextKeyService=s,this._contextMenuService=n,this._sessionDisposables=this._store.add(new Zi);const h=i==null?void 0:i.telemetrySource;h&&this._store.add(this.actionBar.onDidRun((t=>r.publicLog2("workbenchActionExecuted",{id:t.action.id,from:h}))))}setActions(t,i=[],e){var s,n,o;this._sessionDisposables.clear();const r=t.slice(),h=i.slice(),c=[];let a=0;const l=[];let u=!1;if(((s=this._options)===null||s===void 0?void 0:s.hiddenItemStrategy)!==-1)for(let t=0;t<r.length;t++){const i=r[t];(i instanceof ou||i instanceof nu)&&i.hideActions&&(c.push(i.hideActions.toggle),i.hideActions.toggle.checked&&a++,i.hideActions.isHidden&&(u=!0,r[t]=void 0,((n=this._options)===null||n===void 0?void 0:n.hiddenItemStrategy)!==0&&(l[t]=i)))}if(((o=this._options)===null||o===void 0?void 0:o.overflowBehavior)!==void 0){const t=function(t,i){const e=new Set;for(const s of i)t.has(s)&&e.add(s);return e}(new Set(this._options.overflowBehavior.exempted),Wt.map(r,(t=>t==null?void 0:t.id))),i=this._options.overflowBehavior.maxItems-t.size;let e=0;for(let s=0;s<r.length;s++){const n=r[s];n&&(e++,t.has(n.id)||e>=i&&(r[s]=void 0,l[s]=n))}}g(r),g(l),super.setActions(r,Ya.join(l,h)),c.length>0&&this._sessionDisposables.add(rc(this.getElement(),"contextmenu",(t=>{var i,s,n,o,r;const h=new ur(Gh(this.getElement()),t),l=this.getItemAction(h.target);if(!l)return;h.preventDefault(),h.stopPropagation();let d,f=!1;if(a===1&&((i=this._options)===null||i===void 0?void 0:i.hiddenItemStrategy)===0){f=!0;for(let t=0;t<c.length;t++)if(c[t].checked){c[t]=Ja({id:l.id,label:l.label,checked:!0,enabled:!1,run(){}});break}}if(!f&&(l instanceof ou||l instanceof nu)){if(!l.hideActions)return;d=l.hideActions.hide}else d=Ja({id:"label",label:st(0,"Hide"),enabled:!1,run(){}});const g=Ya.join([d],c);!((s=this._options)===null||s===void 0)&&s.resetMenu&&!e&&(e=[this._options.resetMenu]),u&&e&&(g.push(new Ya),g.push(Ja({id:"resetThisMenu",label:st(0,"Reset Menu"),run:()=>this._menuService.resetHiddenStates(e)}))),this._contextMenuService.showContextMenu({getAnchor:()=>h,getActions:()=>g,menuId:(n=this._options)===null||n===void 0?void 0:n.contextMenu,menuActionOptions:{renderShortTitle:!0,...(o=this._options)===null||o===void 0?void 0:o.menuOptions},skipTelemetry:typeof((r=this._options)===null||r===void 0?void 0:r.telemetrySource)=="string",contextKeyService:this._contextKeyService})})))}};DK=EK([BK(2,iu),BK(3,Nl),BK(4,aT),BK(5,Hx),BK(6,cu)],DK);let MK=class extends DK{constructor(t,i,e,s,n,o,r,h){super(t,{resetMenu:i,...e},s,n,o,r,h),this._onDidChangeMenuItems=this._store.add(new de),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const c=this._store.add(s.createMenu(i,n,{emitEventsForSubmenuChanges:!0})),a=()=>{var i,s,n;const o=[],r=[];BH(c,e==null?void 0:e.menuOptions,{primary:o,secondary:r},(i=e==null?void 0:e.toolbarOptions)===null||i===void 0?void 0:i.primaryGroup,(s=e==null?void 0:e.toolbarOptions)===null||s===void 0?void 0:s.shouldInlineSubmenu,(n=e==null?void 0:e.toolbarOptions)===null||n===void 0?void 0:n.useSeparatorsInPrimaryActions),t.classList.toggle("has-no-actions",o.length===0&&r.length===0),super.setActions(o,r)};this._store.add(c.onDidChange((()=>{a(),this._onDidChangeMenuItems.fire(this)}))),a()}setActions(){throw new Ji("This toolbar is populated from a menu.")}};MK=EK([BK(3,iu),BK(4,Nl),BK(5,aT),BK(6,Hx),BK(7,cu)],MK);var SK=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},FK=function(t,i){return function(e,s){i(e,s,t)}};const IK=[];let LK=class extends te{constructor(t,i,e,s,n,o){var r,h;super(),this._diffModel=i,this._editors=e,this._instantiationService=s,this._contextKeyService=n,this._menuService=o,this._menu=this._register(this._menuService.createMenu(tu.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=rU(this._menu.onDidChange,(()=>this._menu.getActions())),this._hasActions=this._actions.map((t=>t.length>0)),this.width=Gz(this,(t=>this._hasActions.read(t)?35:0)),this.elements=va("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:"35px"}},[]),this._currentDiff=Gz(this,(t=>{var i;const e=this._diffModel.read(t);if(!e)return;const s=(i=e.diff.read(t))===null||i===void 0?void 0:i.mappings,n=this._editors.modifiedCursor.read(t);return n?s==null?void 0:s.find((t=>t.lineRangeMapping.modified.contains(n.lineNumber))):void 0})),this._selectedDiffs=Gz(this,(t=>{const i=this._diffModel.read(t),e=i==null?void 0:i.diff.read(t);if(!e)return IK;const s=this._editors.modifiedSelections.read(t);if(s.every((t=>t.isEmpty())))return IK;const n=new Ig(s.map((t=>Fg.fromRangeInclusive(t)))),o=e.mappings.filter((t=>t.lineRangeMapping.innerChanges&&n.intersects(t.lineRangeMapping.modified))).map((t=>({mapping:t,rangeMappings:t.lineRangeMapping.innerChanges.filter((t=>s.some((i=>Es.areIntersecting(t.modifiedRange,i)))))})));return o.length===0||o.every((t=>t.rangeMappings.length===0))?IK:o})),this._register((r=t,h=this.elements.root,r.prepend(h),qi((()=>{r.removeChild(h)})))),this._register(rc(this.elements.root,"click",(()=>{this._editors.modified.focus()}))),this._register(UJ(this.elements.root,{display:this._hasActions.map((t=>t?"block":"none"))})),this._register(new fK(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(t,i)=>{const e=this._diffModel.read(i);if(!e)return[];const s=e.diff.read(i);if(!s)return[];const n=this._selectedDiffs.read(i);if(n.length>0){const t=Rg.fromRangeMappings(n.flatMap((t=>t.rangeMappings)));return[new RK(t,!0,tu.DiffEditorSelectionToolbar,void 0,e.model.original.uri,e.model.modified.uri)]}const o=this._currentDiff.read(i);return s.mappings.map((t=>new RK(t.lineRangeMapping.withInnerChangesFromLineRanges(),t.lineRangeMapping===(o==null?void 0:o.lineRangeMapping),tu.DiffEditorHunkToolbar,void 0,e.model.original.uri,e.model.modified.uri)))},createView:(t,i)=>this._instantiationService.createInstance(TK,t,i,this)})),this._register(rc(this.elements.gutter,$c.MOUSE_WHEEL,(t=>{this._editors.modified.getOption(103).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(t)}),{passive:!1}))}computeStagedValue(t){var i;const e=(i=t.innerChanges)!==null&&i!==void 0?i:[];return new wK(e.map((t=>new mK(t.originalRange,this._editors.modifiedModel.get().getValueInRange(t.modifiedRange))))).apply(new kK(this._editors.original.getModel()))}layout(t){this.elements.gutter.style.left=t+"px"}};LK=SK([FK(3,Oa),FK(4,Nl),FK(5,iu)],LK);class RK{constructor(t,i,e,s,n,o){this.mapping=t,this.showAlways=i,this.menuId=e,this.rangeOverride=s,this.originalUri=n,this.modifiedUri=o}get id(){return this.mapping.modified.toString()}get range(){var t;return(t=this.rangeOverride)!==null&&t!==void 0?t:this.mapping.modified}}let TK=class extends te{constructor(t,i,e,s){super(),this._item=t,this._elements=va("div.gutterItem",{style:{height:"20px",width:"34px"}},[va("div.background@background",{},[]),va("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,(t=>t.showAlways)),this._menuId=this._item.map(this,(t=>t.menuId)),this._isSmall=Wz(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const n=this._register(s.createInstance(hT,"element",!0,{position:{hoverPosition:1}}));this._register(RJ(i,this._elements.root)),this._register(Zz((t=>{const i=this._showAlways.read(t);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",i),setTimeout((()=>{this._elements.root.classList.toggle("noTransition",!1)}),0)}))),this._register(eU(((t,i)=>{this._elements.buttons.replaceChildren();const o=i.add(s.createInstance(MK,this._elements.buttons,this._menuId.read(t),{orientation:1,hoverDelegate:n,toolbarOptions:{primaryGroup:t=>t.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(t)?1:3},hiddenItemStrategy:0,actionRunner:new AK((()=>{const t=this._item.get(),i=t.mapping;return{mapping:i,originalWithModifiedChanges:e.computeStagedValue(i),originalUri:t.originalUri,modifiedUri:t.modifiedUri}})),menuOptions:{shouldForwardArgs:!0}}));i.add(o.onDidChangeMenuItems((()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)})))})))}layout(t,i){this._lastItemRange=t,this._lastViewRange=i;let e=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&t.length<30,void 0),e=this._elements.buttons.clientHeight,this._elements.root.style.top=t.start+"px",this._elements.root.style.height=t.length+"px";const s=t.length/2-e/2,n=e;let o=t.start+s;const r=yg.tryCreate(n,i.endExclusive-n-e),h=yg.tryCreate(t.start+n,t.endExclusive-e-n);h&&r&&h.start<h.endExclusive&&(o=r.clip(o),o=h.clip(o)),this._elements.buttons.style.top=o-t.start+"px"}};TK=SK([FK(3,Oa)],TK);var NK=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},QK=function(t,i){return function(e,s){i(e,s,t)}};let OK=class extends cK{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(t,i,e,s,n,o,r,h){var c;super(),this._domElement=t,this._parentContextKeyService=s,this._parentInstantiationService=n,this._accessibilitySignalService=r,this._editorProgressService=h,this.elements=va("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[va("div.noModificationsOverlay@overlay",{style:{position:"absolute",height:"100%",visibility:"hidden"}},[ha("span",{},"No Changes")]),va("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),va("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),va("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=Wz(this,void 0),this._shouldDisposeDiffModel=!1,this.onDidChangeModel=he.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._parentInstantiationService.createChild(new fL([Nl,this._contextKeyService])),this._boundarySashes=Wz(this,void 0),this._accessibleDiffViewerShouldBeVisible=Wz(this,!1),this._accessibleDiffViewerVisible=Gz(this,(t=>!!this._options.onlyShowAccessibleDiffViewer.read(t)||this._accessibleDiffViewerShouldBeVisible.read(t))),this._movedBlocksLinesPart=Wz(this,void 0),this._layoutInfo=Gz(this,(t=>{var i,e,s,n,o;const r=this._rootSizeObserver.width.read(t),h=this._rootSizeObserver.height.read(t),c=this._sash.read(t),a=this._gutter.read(t),l=(i=a==null?void 0:a.width.read(t))!==null&&i!==void 0?i:0,u=(s=(e=this._overviewRulerPart.read(t))===null||e===void 0?void 0:e.width)!==null&&s!==void 0?s:0;let d,f,g,A,p;if(c){const i=c.sashLeft.read(t);d=0,f=i-l-((o=(n=this._movedBlocksLinesPart.read(t))===null||n===void 0?void 0:n.width.read(t))!==null&&o!==void 0?o:0),p=i-l,g=i,A=r-g-u}else p=0,d=l,f=Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),g=l+f,A=r-g-u;return this.elements.original.style.left=d+"px",this.elements.original.style.width=f+"px",this._editors.original.layout({width:f,height:h},!0),a==null||a.layout(p),this.elements.modified.style.left=g+"px",this.elements.modified.style.width=A+"px",this._editors.modified.layout({width:A,height:h},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}})),this._diffValue=this._diffModel.map(((t,i)=>t==null?void 0:t.diff.read(i))),this.onDidUpdateDiff=he.fromObservableLight(this._diffValue),o.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(qi((()=>this._domElement.removeChild(this.elements.root)))),this._rootSizeObserver=this._register(new TJ(this.elements.root,i.dimension)),this._rootSizeObserver.setAutomaticLayout((c=i.automaticLayout)!==null&&c!==void 0&&c),this._options=this._instantiationService.createInstance(uK,i),this._register(Zz((t=>{this._options.setWidth(this._rootSizeObserver.width.read(t))}))),this._contextKeyService.createKey(QC.isEmbeddedDiffEditor.key,!1),this._register(YJ(QC.isEmbeddedDiffEditor,this._contextKeyService,(t=>this._options.isInEmbeddedEditor.read(t)))),this._register(YJ(QC.comparingMovedCode,this._contextKeyService,(t=>{var i;return!!(!((i=this._diffModel.read(t))===null||i===void 0)&&i.movedTextToCompare.read(t))}))),this._register(YJ(QC.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,(t=>this._options.couldShowInlineViewBecauseOfSize.read(t)))),this._register(YJ(QC.diffEditorInlineMode,this._contextKeyService,(t=>!this._options.renderSideBySide.read(t)))),this._register(YJ(QC.hasChanges,this._contextKeyService,(t=>{var i,e,s;return((s=(e=(i=this._diffModel.read(t))===null||i===void 0?void 0:i.diff.read(t))===null||e===void 0?void 0:e.mappings.length)!==null&&s!==void 0?s:0)>0}))),this._editors=this._register(this._instantiationService.createInstance(hK,this.elements.original,this.elements.modified,this._options,e,((t,i,e,s)=>this._createInnerEditor(t,i,e,s)))),this._register(YJ(QC.diffEditorOriginalWritable,this._contextKeyService,(t=>this._options.originalEditable.read(t)))),this._register(YJ(QC.diffEditorModifiedWritable,this._contextKeyService,(t=>!this._options.readOnly.read(t)))),this._register(YJ(QC.diffEditorOriginalUri,this._contextKeyService,(t=>{var i,e;return(e=(i=this._diffModel.read(t))===null||i===void 0?void 0:i.model.original.uri.toString())!==null&&e!==void 0?e:""}))),this._register(YJ(QC.diffEditorModifiedUri,this._contextKeyService,(t=>{var i,e;return(e=(i=this._diffModel.read(t))===null||i===void 0?void 0:i.model.modified.uri.toString())!==null&&e!==void 0?e:""}))),this._overviewRulerPart=Xz(this,(t=>this._options.renderOverviewRuler.read(t)?this._instantiationService.createInstance(HJ(iK,t),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map((t=>t.modifiedEditor))):void 0)).recomputeInitiallyAndOnChange(this._store),this._sash=Xz(this,(t=>{const i=this._options.renderSideBySide.read(t);return this.elements.root.classList.toggle("side-by-side",i),i?new xG(this._options,this.elements.root,{height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map(((t,i)=>{var e,s;return t-((s=(e=this._overviewRulerPart.read(i))===null||e===void 0?void 0:e.width)!==null&&s!==void 0?s:0)}))},this._boundarySashes):void 0})).recomputeInitiallyAndOnChange(this._store);const a=Xz(this,(t=>this._instantiationService.createInstance(HJ($G,t),this._editors,this._diffModel,this._options))).recomputeInitiallyAndOnChange(this._store);Xz(this,(t=>this._instantiationService.createInstance(HJ(kG,t),this._editors,this._diffModel,this._options,this))).recomputeInitiallyAndOnChange(this._store);const l=new Set,u=new Set;let d=!1;const f=Xz(this,(t=>this._instantiationService.createInstance(HJ(YG,t),Gh(this._domElement),this._editors,this._diffModel,this._options,this,(()=>d||a.get().isUpdatingHiddenAreas),l,u))).recomputeInitiallyAndOnChange(this._store),g=Gz(this,(t=>{const i=f.read(t).viewZones.read(t).orig,e=a.read(t).viewZones.read(t).origViewZones;return i.concat(e)})),A=Gz(this,(t=>{const i=f.read(t).viewZones.read(t).mod,e=a.read(t).viewZones.read(t).modViewZones;return i.concat(e)}));let p;this._register(PJ(this._editors.original,g,(t=>{d=t}),l)),this._register(PJ(this._editors.modified,A,(t=>{d=t,d?p=MJ.capture(this._editors.modified):(p==null||p.restore(this._editors.modified),p=void 0)}),u)),this._accessibleDiffViewer=Xz(this,(t=>this._instantiationService.createInstance(HJ($J,t),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,((t,i)=>this._accessibleDiffViewerShouldBeVisible.set(t,i)),this._options.onlyShowAccessibleDiffViewer.map((t=>!t)),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map(((t,i)=>{var e;return(e=t==null?void 0:t.diff.read(i))===null||e===void 0?void 0:e.mappings.map((t=>t.lineRangeMapping))})),new rG(this._editors)))).recomputeInitiallyAndOnChange(this._store);const w=this._accessibleDiffViewerVisible.map((t=>t?"hidden":"visible"));this._register(UJ(this.elements.modified,{visibility:w})),this._register(UJ(this.elements.original,{visibility:w})),this._createDiffEditorContributions(),o.addDiffEditor(this),this._gutter=Xz(this,(t=>this._options.shouldRenderGutterMenu.read(t)?this._instantiationService.createInstance(HJ(LK,t),this.elements.root,this._diffModel,this._editors):void 0)),this._register(dU(this._layoutInfo)),Xz(this,(t=>new(HJ(hG,t))(this.elements.root,this._diffModel,this._layoutInfo.map((t=>t.originalEditor)),this._layoutInfo.map((t=>t.modifiedEditor)),this._editors))).recomputeInitiallyAndOnChange(this._store,(t=>{this._movedBlocksLinesPart.set(t,void 0)})),this._register(UJ(this.elements.overlay,{width:this._layoutInfo.map(((t,i)=>t.originalEditor.width+(this._options.renderSideBySide.read(i)?0:t.modifiedEditor.width))),visibility:Gz((t=>{var i,e;return this._options.hideUnchangedRegions.read(t)&&((e=(i=this._diffModel.read(t))===null||i===void 0?void 0:i.diff.read(t))===null||e===void 0?void 0:e.mappings.length)===0?"visible":"hidden"}))})),this._register(he.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,(t=>this._handleCursorPositionChange(t,!0)))),this._register(he.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,(t=>this._handleCursorPositionChange(t,!1))));const m=this._diffModel.map(this,((t,i)=>{if(t)return t.diff.read(i)===void 0&&!t.isDiffUpToDate.read(i)}));this._register(eU(((t,i)=>{if(m.read(t)===!0){const t=this._editorProgressService.show(!0,1e3);i.add(qi((()=>t.done())))}}))),this._register(qi((()=>{var t;this._shouldDisposeDiffModel&&((t=this._diffModel.get())===null||t===void 0||t.dispose())}))),this._register(eU(((t,i)=>{i.add(new(HJ(sK,t))(this._editors,this._diffModel,this._options,this))})))}_createInnerEditor(t,i,e,s){return t.createInstance(yL,i,e,s)}_createDiffEditorContributions(){const t=Du.getDiffEditorContributions();for(const i of t)try{this._register(this._instantiationService.createInstance(i.ctor,this))}catch(t){Oi(t)}}get _targetEditor(){return this._editors.modified}getEditorType(){return ip.IDiffEditor}layout(t){this._rootSizeObserver.observe(t)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var t;return{original:this._editors.original.saveViewState(),modified:this._editors.modified.saveViewState(),modelState:(t=this._diffModel.get())===null||t===void 0?void 0:t.serializeState()}}restoreViewState(t){var i;if(t&&t.original&&t.modified){const e=t;this._editors.original.restoreViewState(e.original),this._editors.modified.restoreViewState(e.modified),e.modelState&&((i=this._diffModel.get())===null||i===void 0||i.restoreSerializedState(e.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(t){return this._instantiationService.createInstance(LG,t,this._options)}getModel(){var t,i;return(i=(t=this._diffModel.get())===null||t===void 0?void 0:t.model)!==null&&i!==void 0?i:null}setModel(t,i){!t&&this._diffModel.get()&&this._accessibleDiffViewer.get().close();const e=t?"model"in t?{model:t,shouldDispose:!1}:{model:this.createViewModel(t),shouldDispose:!0}:void 0;this._diffModel.get()!==(e==null?void 0:e.model)&&Pz(i,(t=>{var i;rU.batchEventsGlobally(t,(()=>{this._editors.original.setModel(e?e.model.model.original:null),this._editors.modified.setModel(e?e.model.model.modified:null)}));const s=this._diffModel.get(),n=this._shouldDisposeDiffModel;this._shouldDisposeDiffModel=(i=e==null?void 0:e.shouldDispose)!==null&&i!==void 0&&i,this._diffModel.set(e==null?void 0:e.model,t),n&&(s==null||s.dispose())}))}updateOptions(t){this._options.updateOptions(t)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var t;const i=(t=this._diffModel.get())===null||t===void 0?void 0:t.diff.get();return i?i.mappings.map((t=>{const i=t.lineRangeMapping;let e,s,n,o,r=i.innerChanges;return i.original.isEmpty?(e=i.original.startLineNumber-1,s=0,r=void 0):(e=i.original.startLineNumber,s=i.original.endLineNumberExclusive-1),i.modified.isEmpty?(n=i.modified.startLineNumber-1,o=0,r=void 0):(n=i.modified.startLineNumber,o=i.modified.endLineNumberExclusive-1),{originalStartLineNumber:e,originalEndLineNumber:s,modifiedStartLineNumber:n,modifiedEndLineNumber:o,charChanges:r==null?void 0:r.map((t=>({originalStartLineNumber:t.originalRange.startLineNumber,originalStartColumn:t.originalRange.startColumn,originalEndLineNumber:t.originalRange.endLineNumber,originalEndColumn:t.originalRange.endColumn,modifiedStartLineNumber:t.modifiedRange.startLineNumber,modifiedStartColumn:t.modifiedRange.startColumn,modifiedEndLineNumber:t.modifiedRange.endLineNumber,modifiedEndColumn:t.modifiedRange.endColumn})))}})):null}revert(t){const i=this._diffModel.get();i&&i.isDiffUpToDate.get()&&this._editors.modified.executeEdits("diffEditor",[{range:t.modified.toExclusiveRange(),text:i.model.original.getValueInRange(t.original.toExclusiveRange())}])}revertRangeMappings(t){const i=this._diffModel.get();if(!i||!i.isDiffUpToDate.get())return;const e=t.map((t=>({range:t.modifiedRange,text:i.model.original.getValueInRange(t.originalRange)})));this._editors.modified.executeEdits("diffEditor",e)}_goTo(t){this._editors.modified.setPosition(new Cs(t.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(t.lineRangeMapping.modified.toExclusiveRange())}goToDiff(t){var i,e,s,n;const o=(e=(i=this._diffModel.get())===null||i===void 0?void 0:i.diff.get())===null||e===void 0?void 0:e.mappings;if(!o||o.length===0)return;const r=this._editors.modified.getPosition().lineNumber;let h;h=t==="next"?(s=o.find((t=>t.lineRangeMapping.modified.startLineNumber>r)))!==null&&s!==void 0?s:o[0]:(n=xg(o,(t=>t.lineRangeMapping.modified.startLineNumber<r)))!==null&&n!==void 0?n:o[o.length-1],this._goTo(h),h.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(nJ.diffLineDeleted,{source:"diffEditor.goToDiff"}):h.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(nJ.diffLineInserted,{source:"diffEditor.goToDiff"}):h&&this._accessibilitySignalService.playSignal(nJ.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const t=this._diffModel.get();t&&this.waitForDiff().then((()=>{var i;const e=(i=t.diff.get())===null||i===void 0?void 0:i.mappings;e&&e.length!==0&&this._goTo(e[0])}))}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const t=this._diffModel.get();t&&await t.waitForDiff()}mapToOtherSide(){var t,i;const e=this._editors.modified.hasWidgetFocus(),s=e?this._editors.modified:this._editors.original,n=e?this._editors.original:this._editors.modified;let o;const r=s.getSelection();if(r){const s=(i=(t=this._diffModel.get())===null||t===void 0?void 0:t.diff.get())===null||i===void 0?void 0:i.mappings.map((t=>e?t.lineRangeMapping.flip():t.lineRangeMapping));if(s){const t=WJ(r.getStartPosition(),s),i=WJ(r.getEndPosition(),s);o=Es.plusRange(t,i)}}return{destination:n,destinationSelection:o}}switchSide(){const{destination:t,destinationSelection:i}=this.mapToOtherSide();t.focus(),i&&t.setSelection(i)}exitCompareMove(){const t=this._diffModel.get();t&&t.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var t;const i=(t=this._diffModel.get())===null||t===void 0?void 0:t.unchangedRegions.get();i&&Uz((t=>{for(const e of i)e.collapseAll(t)}))}showAllUnchangedRegions(){var t;const i=(t=this._diffModel.get())===null||t===void 0?void 0:t.unchangedRegions.get();i&&Uz((t=>{for(const e of i)e.showAll(t)}))}_handleCursorPositionChange(t,i){var e,s;if((t==null?void 0:t.reason)===3){const n=(s=(e=this._diffModel.get())===null||e===void 0?void 0:e.diff.get())===null||s===void 0?void 0:s.mappings.find((e=>i?e.lineRangeMapping.modified.contains(t.position.lineNumber):e.lineRangeMapping.original.contains(t.position.lineNumber)));n!=null&&n.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(nJ.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):n!=null&&n.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(nJ.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):n&&this._accessibilitySignalService.playSignal(nJ.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};OK=NK([QK(3,Nl),QK(4,Oa),QK(5,Ua),QK(6,iJ),QK(7,xO)],OK);var zK=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},UK=function(t,i){return function(e,s){i(e,s,t)}};let HK=0,PK=!1;function jK(t){if(!t){if(PK)return;PK=!0}(function(t){sw=document.createElement("div"),sw.className="monaco-aria-container";const i=()=>{const t=document.createElement("div");return t.className="monaco-alert",t.setAttribute("role","alert"),t.setAttribute("aria-atomic","true"),sw.appendChild(t),t};nw=i(),ow=i();const e=()=>{const t=document.createElement("div");return t.className="monaco-status",t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),sw.appendChild(t),t};rw=e(),hw=e(),t.appendChild(sw)})(t||Wn.document.body)}let WK=class extends yL{constructor(t,i,e,s,n,o,r,h,c,a,l,u){const d={...i};d.ariaLabel=d.ariaLabel||WO.editorViewAccessibleLabel,d.ariaLabel=d.ariaLabel+";"+WO.accessibilityHelpMessage,super(t,d,{},e,s,n,o,h,c,a,l,u),this._standaloneKeybindingService=r instanceof pJ?r:null,jK(d.ariaContainerElement),rz=(t,i)=>e.createInstance(hT,t,i,{})}addCommand(t,i,e){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const s="DYNAMIC_"+ ++HK,n=gl.deserialize(e);return this._standaloneKeybindingService.addDynamicKeybinding(s,t,i,n),s}createContextKey(t,i){return this._contextKeyService.createKey(t,i)}addAction(t){if(typeof t.id!="string"||typeof t.label!="string"||typeof t.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),te.None;const i=t.id,e=t.label,s=gl.and(gl.equals("editorId",this.getId()),gl.deserialize(t.precondition)),n=t.keybindings,o=gl.and(s,gl.deserialize(t.keybindingContext)),r=t.contextMenuGroupId||null,h=t.contextMenuOrder||0,c=(i,...e)=>Promise.resolve(t.run(this,...e)),a=new Zi,l=this.getId()+":"+i;if(a.add(Xa.registerCommand(l,c)),r){const t={command:{id:l,title:e},when:s,group:r,order:h};a.add(su.appendMenuItem(tu.EditorContext,t))}if(Array.isArray(n))for(const t of n)a.add(this._standaloneKeybindingService.addDynamicKeybinding(l,t,c,o));const u=new tD(l,e,e,void 0,s,((...i)=>Promise.resolve(t.run(this,...i))),this._contextKeyService);return this._actions.set(i,u),a.add(qi((()=>{this._actions.delete(i)}))),a}_triggerCommand(t,i){if(this._codeEditorService instanceof HL)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(t,i)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(t,i)}};WK=zK([UK(2,Oa),UK(3,Ua),UK(4,$a),UK(5,Nl),UK(6,Hx),UK(7,Fk),UK(8,wL),UK(9,yw),UK(10,uf),UK(11,jA)],WK);let YK=class extends WK{constructor(t,i,e,s,n,o,r,h,c,a,l,u,d,f,g){const A={...i};xJ(a,A,!1);const p=h.registerEditorContainer(t);typeof A.theme=="string"&&h.setTheme(A.theme),A.autoDetectHighContrast!==void 0&&h.setAutoDetectHighContrast(!!A.autoDetectHighContrast);const w=A.model;let m;if(delete A.model,super(t,A,e,s,n,o,r,h,c,l,f,g),this._configurationService=a,this._standaloneThemeService=h,this._register(p),w===void 0){const t=d.getLanguageIdByMimeType(A.language)||A.language||ef;m=VK(u,d,A.value||"",t,void 0),this._ownsModel=!0}else m=w,this._ownsModel=!1;if(this._attachModel(m),m){const t={oldModelUrl:null,newModelUrl:m.uri};this._onDidChangeModel.fire(t)}}dispose(){super.dispose()}updateOptions(t){xJ(this._configurationService,t,!1),typeof t.theme=="string"&&this._standaloneThemeService.setTheme(t.theme),t.autoDetectHighContrast!==void 0&&this._standaloneThemeService.setAutoDetectHighContrast(!!t.autoDetectHighContrast),super.updateOptions(t)}_postDetachModelCleanup(t){super._postDetachModelCleanup(t),t&&this._ownsModel&&(t.dispose(),this._ownsModel=!1)}};YK=zK([UK(2,Oa),UK(3,Ua),UK(4,$a),UK(5,Nl),UK(6,Hx),UK(7,gV),UK(8,wL),UK(9,Id),UK(10,yw),UK(11,Ha),UK(12,Od),UK(13,uf),UK(14,jA)],YK);let _K=class extends OK{constructor(t,i,e,s,n,o,r,h,c,a,l,u){const d={...i};xJ(h,d,!0);const f=o.registerEditorContainer(t);typeof d.theme=="string"&&o.setTheme(d.theme),d.autoDetectHighContrast!==void 0&&o.setAutoDetectHighContrast(!!d.autoDetectHighContrast),super(t,d,{},s,e,n,u,a),this._configurationService=h,this._standaloneThemeService=o,this._register(f)}dispose(){super.dispose()}updateOptions(t){xJ(this._configurationService,t,!0),typeof t.theme=="string"&&this._standaloneThemeService.setTheme(t.theme),t.autoDetectHighContrast!==void 0&&this._standaloneThemeService.setAutoDetectHighContrast(!!t.autoDetectHighContrast),super.updateOptions(t)}_createInnerEditor(t,i,e){return t.createInstance(WK,i,e)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(t,i,e){return this.getModifiedEditor().addCommand(t,i,e)}createContextKey(t,i){return this.getModifiedEditor().createContextKey(t,i)}addAction(t){return this.getModifiedEditor().addAction(t)}};function VK(t,i,e,s,n){if(e=e||"",!s){const s=e.indexOf(`\n`);let o=e;return s!==-1&&(o=e.substring(0,s)),JK(t,e,i.createByFilepathOrFirstLine(n||null,o),n)}return JK(t,e,i.createById(s),n)}function JK(t,i,e,s){return t.createModel(i,e,s)}_K=zK([UK(2,Oa),UK(3,Nl),UK(4,Ua),UK(5,gV),UK(6,wL),UK(7,Id),UK(8,aT),UK(9,xO),UK(10,IV),UK(11,iJ)],_K);var GK=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},KK=function(t,i){return function(e,s){i(e,s,t)}};class $K{constructor(t,i){this.viewModel=t,this.deltaScrollVertical=i}getId(){return this.viewModel}}let XK=class extends te{constructor(t,i,e,s){super(),this._container=t,this._overflowWidgetsDomNode=i,this._workbenchUIElementFactory=e,this._instantiationService=s,this._viewModel=Wz(this,void 0),this._collapsed=Gz(this,(t=>{var i;return(i=this._viewModel.read(t))===null||i===void 0?void 0:i.collapsed.read(t)})),this._editorContentHeight=Wz(this,500),this.contentHeight=Gz(this,(t=>(this._collapsed.read(t)?0:this._editorContentHeight.read(t))+this._outerEditorHeight)),this._modifiedContentWidth=Wz(this,0),this._modifiedWidth=Wz(this,0),this._originalContentWidth=Wz(this,0),this._originalWidth=Wz(this,0),this.maxScroll=Gz(this,(t=>{const i=this._modifiedContentWidth.read(t)-this._modifiedWidth.read(t),e=this._originalContentWidth.read(t)-this._originalWidth.read(t);return i>e?{maxScroll:i,width:this._modifiedWidth.read(t)}:{maxScroll:e,width:this._originalWidth.read(t)}})),this._elements=va("div.multiDiffEntry",[va("div.header@header",[va("div.header-content",[va("div.collapse-button@collapseButton"),va("div.file-path",[va("div.title.modified.show-file-icons@primaryPath",[]),va("div.status.deleted@status",["R"]),va("div.title.original.show-file-icons@secondaryPath",[])]),va("div.actions@actions")])]),va("div.editorParent",[va("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(OK,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=qK(this.editor.getModifiedEditor()),this.isOriginalFocused=qK(this.editor.getOriginalEditor()),this.isFocused=Gz(this,(t=>this.isModifedFocused.read(t)||this.isOriginalFocused.read(t))),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=new Zi,this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const n=new f_(this._elements.collapseButton,{});this._register(Zz((t=>{n.element.className="",n.icon=this._collapsed.read(t)?Fs.chevronRight:Fs.chevronDown}))),this._register(n.onDidClick((()=>{var t;(t=this._viewModel.get())===null||t===void 0||t.collapsed.set(!this._collapsed.get(),void 0)}))),this._register(Zz((t=>{this._elements.editor.style.display=this._collapsed.read(t)?"none":"block"}))),this._register(this.editor.getModifiedEditor().onDidLayoutChange((t=>{const i=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(i,void 0)}))),this._register(this.editor.getOriginalEditor().onDidLayoutChange((t=>{const i=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(i,void 0)}))),this._register(this.editor.onDidContentSizeChange((t=>{Hz((i=>{this._editorContentHeight.set(t.contentHeight,i),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),i),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),i)}))}))),this._register(this.editor.getOriginalEditor().onDidScrollChange((t=>{if(this._isSettingScrollTop||!t.scrollTopChanged||!this._data)return;const i=t.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(i)}))),this._register(Zz((t=>{const i=this.isFocused.read(t);this._elements.root.classList.toggle("focused",i)}))),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._register(this._instantiationService.createInstance(MK,this._elements.actions,tu.MultiDiffEditorFileToolbar,{actionRunner:this._register(new AK((()=>{var t;return(t=this._viewModel.get())===null||t===void 0?void 0:t.modifiedUri}))),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:t=>t.startsWith("navigation")},actionViewItemProvider:(t,i)=>LH(s,t,i)}))}setScrollLeft(t){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(t):this.editor.getOriginalEditor().setScrollLeft(t)}setData(t){function i(t){return{...t,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}this._data=t;const e=t.viewModel.entry.value;e.onOptionsDidChange&&this._dataStore.add(e.onOptionsDidChange((()=>{var t;this.editor.updateOptions(i((t=e.options)!==null&&t!==void 0?t:{}))}))),Hz((s=>{var n,o,r,h;(n=this._resourceLabel)===null||n===void 0||n.setUri((o=t.viewModel.modifiedUri)!==null&&o!==void 0?o:t.viewModel.originalUri,{strikethrough:t.viewModel.modifiedUri===void 0});let c=!1,a=!1,l=!1,u="";t.viewModel.modifiedUri&&t.viewModel.originalUri&&t.viewModel.modifiedUri.path!==t.viewModel.originalUri.path?(u="R",c=!0):t.viewModel.modifiedUri?t.viewModel.originalUri||(u="A",l=!0):(u="D",a=!0),this._elements.status.classList.toggle("renamed",c),this._elements.status.classList.toggle("deleted",a),this._elements.status.classList.toggle("added",l),this._elements.status.innerText=u,(r=this._resourceLabel2)===null||r===void 0||r.setUri(c?t.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(t.viewModel,s),this.editor.setModel(t.viewModel.diffEditorViewModel,s),this.editor.updateOptions(i((h=e.options)!==null&&h!==void 0?h:{}))}))}render(t,i,e,s){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${t.start}px`,this._elements.root.style.height=`${t.length}px`,this._elements.root.style.width=`${i}px`,this._elements.root.style.position="absolute";const n=t.length-this._headerHeight,o=Math.max(0,Math.min(s.start-t.start,n));this._elements.header.style.transform=`translateY(${o}px)`,Hz((e=>{this.editor.layout({width:i-16-2,height:t.length-this._outerEditorHeight})}));try{this._isSettingScrollTop=!0,this._lastScrollTop=e,this.editor.getOriginalEditor().setScrollTop(e)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",o>0||e>0),this._elements.header.classList.toggle("collapsed",o===n)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};function qK(t){return rU((i=>{const e=new Zi;return e.add(t.onDidFocusEditorWidget((()=>i(!0)))),e.add(t.onDidBlurEditorWidget((()=>i(!1)))),e}),(()=>t.hasTextFocus()))}XK=GK([KK(3,Oa)],XK);class ZK{constructor(t){this._create=t,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(t){var i;let e;if(this._unused.size===0)e=this._create(t),this._itemData.set(e,t);else{const s=[...this._unused.values()];e=(i=s.find((i=>this._itemData.get(i).getId()===t.getId())))!==null&&i!==void 0?i:s[0],this._unused.delete(e),this._itemData.set(e,t),e.setData(t)}return this._used.add(e),{object:e,dispose:()=>{this._used.delete(e),this._unused.size>5?e.dispose():this._unused.add(e)}}}dispose(){for(const t of this._used)t.dispose();for(const t of this._unused)t.dispose();this._used.clear(),this._unused.clear()}}var t$=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},i$=function(t,i){return function(e,s){i(e,s,t)}};let e$=class extends te{constructor(t,i,e,s,n,o){super(),this._element=t,this._dimension=i,this._viewModel=e,this._workbenchUIElementFactory=s,this._parentContextKeyService=n,this._parentInstantiationService=o,this._elements=va("div.monaco-component.multiDiffEditor",[va("div@content",{style:{overflow:"hidden"}}),va("div.monaco-editor@overflowWidgetsDomNode",{})]),this._sizeObserver=this._register(new TJ(this._element,void 0)),this._objectPool=this._register(new ZK((t=>{const i=this._instantiationService.createInstance(XK,this._elements.content,this._elements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return i.setData(t),i}))),this._scrollable=this._register(new Zy({forceIntegerValues:!1,scheduleAtNextAnimationFrame:t=>fc(Gh(this._element),t),smoothScrollDuration:100})),this._scrollableElement=this._register(new hk(this._elements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this.scrollTop=rU(this._scrollableElement.onScroll,(()=>this._scrollableElement.getScrollPosition().scrollTop)),this.scrollLeft=rU(this._scrollableElement.onScroll,(()=>this._scrollableElement.getScrollPosition().scrollLeft)),this._viewItems=$z(this,((t,i)=>{const e=this._viewModel.read(t);return e?e.items.read(t).map((t=>{var e;const s=i.add(new s$(t,this._objectPool,this.scrollLeft,(t=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+t})}))),n=(e=this._lastDocStates)===null||e===void 0?void 0:e[s.getKey()];return n&&Uz((t=>{s.setViewState(n,t)})),s})):[]})),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,((t,i)=>t.reduce(((t,e)=>t+e.contentHeight.read(i)+this._spaceBetweenPx),0))),this.activeDiffItem=Gz(this,(t=>this._viewItems.read(t).find((i=>{var e;return(e=i.template.read(t))===null||e===void 0?void 0:e.isFocused.read(t)})))),this.lastActiveDiffItem=function(t){let i;return Gz((e=>(i=t(e,i),i)))}(((t,i)=>{var e;return(e=this.activeDiffItem.read(t))!==null&&e!==void 0?e:i})),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._parentInstantiationService.createChild(new fL([Nl,this._contextKeyService])),this._lastDocStates={},this._contextKeyService.createKey(QC.inMultiDiffEditor.key,!0),this._register(eU(((t,i)=>{const e=this._viewModel.read(t);if(e&&e.contextKeys)for(const[t,s]of Object.entries(e.contextKeys)){const e=this._contextKeyService.createKey(t,void 0);e.set(s),i.add(qi((()=>e.reset())))}})));const r=this._parentContextKeyService.createKey(QC.multiDiffEditorAllCollapsed.key,!1);this._register(Zz((t=>{const i=this._viewModel.read(t);if(i){const e=i.items.read(t).every((i=>i.collapsed.read(t)));r.set(e)}}))),this._register(Zz((t=>{const i=this.lastActiveDiffItem.read(t);Uz((e=>{var s;(s=this._viewModel.read(t))===null||s===void 0||s.activeDiffItem.set(i==null?void 0:i.viewModel,e)}))}))),this._register(Zz((t=>{const i=this._dimension.read(t);this._sizeObserver.observe(i)}))),this._elements.content.style.position="relative",this._register(Zz((t=>{const i=this._sizeObserver.height.read(t);this._elements.root.style.height=`${i}px`;const e=this._totalHeight.read(t);this._elements.content.style.height=`${e}px`;const s=this._sizeObserver.width.read(t);let n=s;const o=Mg(this._viewItems.read(t),(i=>i.maxScroll.read(t).maxScroll));o&&(n=s+o.maxScroll.read(t).maxScroll),this._scrollableElement.setScrollDimensions({width:s,height:i,scrollHeight:e,scrollWidth:n})}))),t.replaceChildren(this._scrollableElement.getDomNode()),this._register(qi((()=>{t.replaceChildren()}))),this._register(this._register(Zz((t=>{Hz((i=>{this.render(t)}))}))))}render(t){const i=this.scrollTop.read(t);let e=0,s=0,n=0;const o=this._sizeObserver.height.read(t),r=yg.ofStartAndLength(i,o),h=this._sizeObserver.width.read(t);for(const c of this._viewItems.read(t)){const a=c.contentHeight.read(t),l=Math.min(a,o),u=yg.ofStartAndLength(s,l),d=yg.ofStartAndLength(n,a);if(d.isBefore(r))e-=a-l,c.hide();else if(d.isAfter(r))c.hide();else{const t=Math.max(0,Math.min(r.start-d.start,a-l));e-=t;const s=yg.ofStartAndLength(i+e,o);c.render(u,t,h,s)}s+=l+this._spaceBetweenPx,n+=a+this._spaceBetweenPx}this._elements.content.style.transform=`translateY(${-(i+e)}px)`}};e$=t$([i$(4,Nl),i$(5,Oa)],e$);class s$ extends te{constructor(t,i,e,s){super(),this.viewModel=t,this._objectPool=i,this._scrollLeft=e,this._deltaScrollVertical=s,this._templateRef=this._register(_z(this,void 0)),this.contentHeight=Gz(this,(t=>{var i,e,s;return(s=(e=(i=this._templateRef.read(t))===null||i===void 0?void 0:i.object.contentHeight)===null||e===void 0?void 0:e.read(t))!==null&&s!==void 0?s:this.viewModel.lastTemplateData.read(t).contentHeight})),this.maxScroll=Gz(this,(t=>{var i,e;return(e=(i=this._templateRef.read(t))===null||i===void 0?void 0:i.object.maxScroll.read(t))!==null&&e!==void 0?e:{maxScroll:0,scrollWidth:0}})),this.template=Gz(this,(t=>{var i;return(i=this._templateRef.read(t))===null||i===void 0?void 0:i.object})),this._isHidden=Wz(this,!1),this._register(Zz((t=>{var i;const e=this._scrollLeft.read(t);(i=this._templateRef.read(t))===null||i===void 0||i.object.setScrollLeft(e)}))),this._register(Zz((t=>{const i=this._templateRef.read(t);i&&this._isHidden.read(t)&&(i.object.isFocused.read(t)||this._clear())})))}dispose(){this._clear(),super.dispose()}toString(){var t;return`VirtualViewItem(${(t=this.viewModel.entry.value.modified)===null||t===void 0?void 0:t.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(t,i){var e;this.viewModel.collapsed.set(t.collapsed,i),this._updateTemplateData(i);const s=this.viewModel.lastTemplateData.get(),n=(e=t.selections)===null||e===void 0?void 0:e.map(Bs.liftSelection);this.viewModel.lastTemplateData.set({...s,selections:n},i);const o=this._templateRef.get();o&&n&&o.object.editor.setSelections(n)}_updateTemplateData(t){var i;const e=this._templateRef.get();e&&this.viewModel.lastTemplateData.set({contentHeight:e.object.contentHeight.get(),selections:(i=e.object.editor.getSelections())!==null&&i!==void 0?i:void 0},t)}_clear(){const t=this._templateRef.get();t&&Uz((i=>{this._updateTemplateData(i),t.object.hide(),this._templateRef.set(void 0,i)}))}hide(){this._isHidden.set(!0,void 0)}render(t,i,e,s){this._isHidden.set(!1,void 0);let n=this._templateRef.get();if(!n){n=this._objectPool.getUnusedObj(new $K(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(n,void 0);const t=this.viewModel.lastTemplateData.get().selections;t&&n.object.editor.setSelections(t)}n.object.render(t,e,i,s)}}Ow("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},st(0,"The background color of the diff editor's header")),Ow("multiDiffEditor.background",{dark:"editorBackground",light:"editorBackground",hcDark:"editorBackground",hcLight:"editorBackground"},st(0,"The background color of the multi file diff editor")),Ow("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},st(0,"The border color of the multi file diff editor"));var n$=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},o$=function(t,i){return function(e,s){i(e,s,t)}};let r$=class extends te{constructor(t,i,e){super(),this._element=t,this._workbenchUIElementFactory=i,this._instantiationService=e,this._dimension=Wz(this,void 0),this._viewModel=Wz(this,void 0),this._widgetImpl=$z(this,((t,i)=>(HJ(XK,t),i.add(this._instantiationService.createInstance(HJ(e$,t),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory))))),this._register(dU(this._widgetImpl))}};function h$(t,i,e){return DJ.initialize(e||{}).createInstance(YK,t,i)}function c$(t){return DJ.get(Ua).onCodeEditorAdd((i=>{t(i)}))}function a$(t){return DJ.get(Ua).onDiffEditorAdd((i=>{t(i)}))}function l$(){return DJ.get(Ua).listCodeEditors()}function u$(){return DJ.get(Ua).listDiffEditors()}function d$(t,i,e){return DJ.initialize(e||{}).createInstance(_K,t,i)}function f$(t,i){const e=DJ.initialize(i||{});return new r$(t,{},e)}function g$(t){if(typeof t.id!="string"||typeof t.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return Xa.registerCommand(t.id,t.run)}function A$(t){if(typeof t.id!="string"||typeof t.label!="string"||typeof t.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const i=gl.deserialize(t.precondition),e=new Zi;if(e.add(Xa.registerCommand(t.id,((e,...s)=>mu.runEditorCommand(e,s,i,((i,e,s)=>Promise.resolve(t.run(e,...s))))))),t.contextMenuGroupId){const s={command:{id:t.id,title:t.label},when:i,group:t.contextMenuGroupId,order:t.contextMenuOrder||0};e.add(su.appendMenuItem(tu.EditorContext,s))}if(Array.isArray(t.keybindings)){const s=DJ.get(Hx);if(s instanceof pJ){const n=gl.and(i,gl.deserialize(t.keybindingContext));e.add(s.addDynamicKeybindings(t.keybindings.map((i=>({keybinding:i,command:t.id,when:n})))))}else console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService")}return e}function p$(t){return w$([t])}function w$(t){const i=DJ.get(Hx);return i instanceof pJ?i.addDynamicKeybindings(t.map((t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:gl.deserialize(t.when)})))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),te.None)}function m$(t,i,e){const s=DJ.get(Od),n=s.getLanguageIdByMimeType(i)||i;return VK(DJ.get(Ha),s,t,n,e)}function v$(t,i){const e=DJ.get(Od),s=e.getLanguageIdByMimeType(i)||i||ef;t.setLanguage(e.createById(s))}function b$(t,i,e){t&&DJ.get(sP).changeOne(i,t.uri,e)}function y$(t){DJ.get(sP).changeAll(t,[])}function k$(t){return DJ.get(sP).read(t)}function x$(t){return DJ.get(sP).onMarkerChanged(t)}function C$(t){return DJ.get(Ha).getModel(t)}function E$(){return DJ.get(Ha).getModels()}function B$(t){return DJ.get(Ha).onModelAdded(t)}function D$(t){return DJ.get(Ha).onModelRemoved(t)}function M$(t){return DJ.get(Ha).onModelLanguageChanged((i=>{t({model:i.model,oldLanguage:i.oldLanguageId})}))}function S$(t){return function(t,i,e){return new tp(t,i,e)}(DJ.get(Ha),DJ.get(uf),t)}function F$(t,i){const e=DJ.get(Od),s=DJ.get(gV);return tw.colorizeElement(s,e,t,i).then((()=>{s.registerEditorContainer(t)}))}function I$(t,i,e){const s=DJ.get(Od);return DJ.get(gV).registerEditorContainer(Wn.document.body),tw.colorize(s,t,i,e)}function L$(t,i,e=4){return DJ.get(gV).registerEditorContainer(Wn.document.body),tw.colorizeModelLine(t,i,e)}function R$(t,i){Gs.getOrCreate(i);const e=function(t){return Gs.get(t)||{getInitialState:()=>ep,tokenize:(i,e,s)=>sp(t,s)}}(i),s=eo(t),n=[];let o=e.getInitialState();for(let t=0,i=s.length;t<i;t++){const i=s[t],r=e.tokenize(i,!0,o);n[t]=r.tokens,o=r.endState}return n}function T$(t,i){DJ.get(gV).defineTheme(t,i)}function N$(t){DJ.get(gV).setTheme(t)}function Q$(){Na.clearAllFontInfos()}function O$(t,i){return Xa.registerCommand({id:t,handler:i})}function z$(t){return DJ.get(gT).registerOpener({open:async i=>(typeof i=="string"&&(i=fs.parse(i)),t.open(i))})}function U$(t){return DJ.get(Ua).registerCodeEditorOpenHandler((async(i,e,s)=>{var n;if(!e)return null;const o=(n=i.options)===null||n===void 0?void 0:n.selection;let r;return o&&typeof o.endLineNumber=="number"&&typeof o.endColumn=="number"?r=o:o&&(r={lineNumber:o.startLineNumber,column:o.startColumn}),await t.openCodeEditor(e,i.resource,r)?e:null}))}function H$(t,i){return typeof t=="boolean"?t:i}function P$(t,i){return typeof t=="string"?t:i}function j$(t,i=!1){i&&(t=t.map((function(t){return t.toLowerCase()})));const e=function(t){const i={};for(const e of t)i[e]=!0;return i}(t);return i?function(t){return e[t.toLowerCase()]!==void 0&&e.hasOwnProperty(t.toLowerCase())}:function(t){return e[t]!==void 0&&e.hasOwnProperty(t)}}function W$(t,i,e){i=i.replace(/@@/g,"");let s,n=0;do{s=!1,i=i.replace(/@(\w+)/g,(function(e,n){s=!0;let o="";if(typeof t[n]=="string")o=t[n];else{if(!(t[n]&&t[n]instanceof RegExp))throw t[n]===void 0?zp(t,"language definition does not contain attribute '"+n+"', used at: "+i):zp(t,"attribute reference '"+n+"' must be a string, used at: "+i);o=t[n].source}return Np(o)?"":"(?:"+o+")"})),n++}while(s&&n<5);i=i.replace(/\x01/g,"@");const o=(t.ignoreCase?"i":"")+(t.unicode?"u":"");if(e&&i.match(/\$[sS](\d\d?)/g)){let e=null,s=null;return n=>(s&&e===n||(e=n,s=new RegExp(function(t,i,e){let s=null;return i.replace(/\$[sS](\d\d?)/g,(function(i,n){return s===null&&(s=e.split("."),s.unshift(e)),!Np(n)&&n<s.length?Qp(t,s[n]):""}))}(t,i,n),o)),s)}return new RegExp(i,o)}function Y$(t,i,e,s){let n=-1,o=e,r=e.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(n=parseInt(r[3]),r[2]&&(n+=100)),o=r[4]);let h,c="~",a=o;if(o&&o.length!==0?/^\w*$/.test(a)?c="==":(r=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(c=r[1],a=r[2])):(c="!=",a=""),c!=="~"&&c!=="!~"||!/^(\w|\|)*$/.test(a))if(c==="@"||c==="!@"){const e=t[a];if(!e)throw zp(t,"the @ match target '"+a+"' is not defined, in rule: "+i);if(!function(t,i){if(!i||!Array.isArray(i))return!1;for(const e of i)if(!t(e))return!1;return!0}((function(t){return typeof t=="string"}),e))throw zp(t,"the @ match target '"+a+"' must be an array of strings, in rule: "+i);const s=j$(e,t.ignoreCase);h=function(t){return c==="@"?s(t):!s(t)}}else if(c==="~"||c==="!~")if(a.indexOf("$")<0){const i=W$(t,"^"+a+"$",!1);h=function(t){return c==="~"?i.test(t):!i.test(t)}}else h=function(i,e,s,n){return W$(t,"^"+Up(t,a,e,s,n)+"$",!1).test(i)};else if(a.indexOf("$")<0){const i=Qp(t,a);h=function(t){return c==="=="?t===i:t!==i}}else{const i=Qp(t,a);h=function(e,s,n,o,r){const h=Up(t,i,s,n,o);return c==="=="?e===h:e!==h}}else{const i=j$(a.split("|"),t.ignoreCase);h=function(t){return c==="~"?i(t):!i(t)}}return n===-1?{name:e,value:s,test:function(t,i,e,s){return h(t,t,i,e,s)}}:{name:e,value:s,test:function(t,i,e,s){const o=function(t,i,e,s){if(s<0)return t;if(s<i.length)return i[s];if(s>=100){s-=100;const t=e.split(".");if(t.unshift(e),s<t.length)return t[s]}return null}(t,i,e,n);return h(o||"",t,i,e,s)}}}function _$(t,i,e){if(e){if(typeof e=="string")return e;if(e.token||e.token===""){if(typeof e.token!="string")throw zp(t,"a 'token' attribute must be of type string, in rule: "+i);{const s={token:e.token};if(e.token.indexOf("$")>=0&&(s.tokenSubst=!0),typeof e.bracket=="string")if(e.bracket==="@open")s.bracket=1;else{if(e.bracket!=="@close")throw zp(t,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+i);s.bracket=-1}if(e.next){if(typeof e.next!="string")throw zp(t,"the next state must be a string value in rule: "+i);{let n=e.next;if(!/^(@pop|@push|@popall)$/.test(n)&&(n[0]==="@"&&(n=n.substr(1)),n.indexOf("$")<0&&!function(t,i){let e=i;for(;e&&e.length>0;){if(t.stateNames[e])return!0;const i=e.lastIndexOf(".");e=i<0?null:e.substr(0,i)}return!1}(t,Up(t,n,"",[],""))))throw zp(t,"the next state '"+e.next+"' is not defined in rule: "+i);s.next=n}}return typeof e.goBack=="number"&&(s.goBack=e.goBack),typeof e.switchTo=="string"&&(s.switchTo=e.switchTo),typeof e.log=="string"&&(s.log=e.log),typeof e.nextEmbedded=="string"&&(s.nextEmbedded=e.nextEmbedded,t.usesEmbedded=!0),s}}if(Array.isArray(e)){const s=[];for(let n=0,o=e.length;n<o;n++)s[n]=_$(t,i,e[n]);return{group:s}}if(e.cases){const s=[];for(const n in e.cases)if(e.cases.hasOwnProperty(n)){const o=_$(t,i,e.cases[n]);n==="@default"||n==="@"||n===""?s.push({test:void 0,value:o,name:n}):n==="@eos"?s.push({test:function(t,i,e,s){return s},value:o,name:n}):s.push(Y$(t,i,n,o))}const n=t.defaultToken;return{test:function(t,i,e,o){for(const n of s)if(!n.test||n.test(t,i,e,o))return n.value;return n}}}throw zp(t,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+i)}return{token:""}}r$=n$([o$(2,Oa)],r$);class V${constructor(t){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=t}setRegex(t,i){let e;if(typeof i=="string")e=i;else{if(!(i instanceof RegExp))throw zp(t,"rules must start with a match string or regular expression: "+this.name);e=i.source}this.matchOnlyAtLineStart=e.length>0&&e[0]==="^",this.name=this.name+": "+e,this.regex=W$(t,"^(?:"+(this.matchOnlyAtLineStart?e.substr(1):e)+")",!0)}setAction(t,i){this.action=_$(t,this.name,i)}resolveRegex(t){return this.regex instanceof RegExp?this.regex:this.regex(t)}}function J$(t,i){if(!i||typeof i!="object")throw new Error("Monarch: expecting a language definition object");const e={};e.languageId=t,e.includeLF=H$(i.includeLF,!1),e.noThrow=!1,e.maxStack=100,e.start=typeof i.start=="string"?i.start:null,e.ignoreCase=H$(i.ignoreCase,!1),e.unicode=H$(i.unicode,!1),e.tokenPostfix=P$(i.tokenPostfix,"."+e.languageId),e.defaultToken=P$(i.defaultToken,"source"),e.usesEmbedded=!1;const s=i;function n(t,o,r){for(const h of r){let r=h.include;if(r){if(typeof r!="string")throw zp(e,"an 'include' attribute must be a string at: "+t);if(r[0]==="@"&&(r=r.substr(1)),!i.tokenizer[r])throw zp(e,"include target '"+r+"' is not defined at: "+t);n(t+"."+r,o,i.tokenizer[r])}else{const i=new V$(t);if(Array.isArray(h)&&h.length>=1&&h.length<=3)if(i.setRegex(s,h[0]),h.length>=3)if(typeof h[1]=="string")i.setAction(s,{token:h[1],next:h[2]});else{if(typeof h[1]!="object")throw zp(e,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+t);{const t=h[1];t.next=h[2],i.setAction(s,t)}}else i.setAction(s,h[1]);else{if(!h.regex)throw zp(e,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+t);h.name&&typeof h.name=="string"&&(i.name=h.name),h.matchOnlyAtStart&&(i.matchOnlyAtLineStart=H$(h.matchOnlyAtLineStart,!1)),i.setRegex(s,h.regex),i.setAction(s,h.action)}o.push(i)}}}if(s.languageId=t,s.includeLF=e.includeLF,s.ignoreCase=e.ignoreCase,s.unicode=e.unicode,s.noThrow=e.noThrow,s.usesEmbedded=e.usesEmbedded,s.stateNames=i.tokenizer,s.defaultToken=e.defaultToken,!i.tokenizer||typeof i.tokenizer!="object")throw zp(e,"a language definition must define the 'tokenizer' attribute as an object");e.tokenizer=[];for(const t in i.tokenizer)if(i.tokenizer.hasOwnProperty(t)){e.start||(e.start=t);const s=i.tokenizer[t];e.tokenizer[t]=new Array,n("tokenizer."+t,e.tokenizer[t],s)}if(e.usesEmbedded=s.usesEmbedded,i.brackets){if(!Array.isArray(i.brackets))throw zp(e,"the 'brackets' attribute must be defined as an array")}else i.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const o=[];for(const t of i.brackets){let i=t;if(i&&Array.isArray(i)&&i.length===3&&(i={token:i[2],open:i[0],close:i[1]}),i.open===i.close)throw zp(e,"open and close brackets in a 'brackets' attribute must be different: "+i.open+`\n hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof i.open!="string"||typeof i.token!="string"||typeof i.close!="string")throw zp(e,"every element in the 'brackets' array must be a '{open,close,token}' object or array");o.push({token:i.token+e.tokenPostfix,open:Qp(e,i.open),close:Qp(e,i.close)})}return e.brackets=o,e.noThrow=!0,e}function G$(t){tf.registerLanguage(t)}function K$(){let t=[];return t=t.concat(tf.getLanguages()),t}function $$(t){return DJ.get(Od).languageIdCodec.encodeLanguageId(t)}function X$(t,i){return DJ.withServices((()=>{const e=DJ.get(Od).onDidRequestRichLanguageFeatures((s=>{s===t&&(e.dispose(),i())}));return e}))}function q$(t,i){return DJ.withServices((()=>{const e=DJ.get(Od).onDidRequestBasicLanguageFeatures((s=>{s===t&&(e.dispose(),i())}));return e}))}function Z$(t,i){if(!DJ.get(Od).isRegisteredLanguageId(t))throw new Error(`Cannot set configuration for unknown language ${t}`);return DJ.get(uf).register(t,i,100)}class tX{constructor(t,i){this._languageId=t,this._actual=i}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(t,i,e){if(typeof this._actual.tokenize=="function")return iX.adaptTokenize(this._languageId,this._actual,t,e);throw new Error("Not supported!")}tokenizeEncoded(t,i,e){const s=this._actual.tokenizeEncoded(t,e);return new Ts(s.tokens,s.endState)}}class iX{constructor(t,i,e,s){this._languageId=t,this._actual=i,this._languageService=e,this._standaloneThemeService=s}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(t,i){const e=[];let s=0;for(let n=0,o=t.length;n<o;n++){const o=t[n];let r=o.startIndex;n===0?r=0:r<s&&(r=s),e[n]=new Ls(r,o.scopes,i),s=r}return e}static adaptTokenize(t,i,e,s){const n=i.tokenize(e,s),o=iX._toClassicTokens(n.tokens,t);let r;return r=n.endState.equals(s)?s:n.endState,new Rs(o,r)}tokenize(t,i,e){return iX.adaptTokenize(this._languageId,this._actual,t,e)}_toBinaryTokens(t,i){const e=t.encodeLanguageId(this._languageId),s=this._standaloneThemeService.getColorTheme().tokenTheme,n=[];let o=0,r=0;for(let t=0,h=i.length;t<h;t++){const h=i[t],c=1024|s.match(e,h.scopes);if(o>0&&n[o-1]===c)continue;let a=h.startIndex;t===0?a=0:a<r&&(a=r),n[o++]=a,n[o++]=c,r=a}const h=new Uint32Array(o);for(let t=0;t<o;t++)h[t]=n[t];return h}tokenizeEncoded(t,i,e){const s=this._actual.tokenize(t,e),n=this._toBinaryTokens(this._languageService.languageIdCodec,s.tokens);let o;return o=s.endState.equals(e)?e:s.endState,new Ts(n,o)}}function eX(t){return t&&typeof t.then=="function"}function sX(t){const i=DJ.get(gV);if(t){const e=[null];for(let i=1,s=t.length;i<s;i++)e[i]=CA.fromHex(t[i]);i.setColorMapOverride(e)}else i.setColorMapOverride(null)}function nX(t,i){return function(t){return"tokenizeEncoded"in t}(i)?new tX(t,i):new iX(t,i,DJ.get(Od),DJ.get(gV))}function oX(t,i){const e=new Js((async()=>{const e=await Promise.resolve(i.create());return e?typeof e.getInitialState=="function"?nX(t,e):new Xp(DJ.get(Od),DJ.get(gV),t,J$(t,e),DJ.get(Id)):null}));return Gs.registerFactory(t,e)}function rX(t,i){if(!DJ.get(Od).isRegisteredLanguageId(t))throw new Error(`Cannot set tokens provider for unknown language ${t}`);return eX(i)?oX(t,{create:()=>i}):Gs.register(t,nX(t,i))}function hX(t,i){return eX(i)?oX(t,{create:()=>i}):Gs.register(t,(i=>new Xp(DJ.get(Od),DJ.get(gV),t,J$(t,i),DJ.get(Id)))(i))}function cX(t,i){return DJ.get(jA).referenceProvider.register(t,i)}function aX(t,i){return DJ.get(jA).renameProvider.register(t,i)}function lX(t,i){return DJ.get(jA).newSymbolNamesProvider.register(t,i)}function uX(t,i){return DJ.get(jA).signatureHelpProvider.register(t,i)}function dX(t,i){return DJ.get(jA).hoverProvider.register(t,{provideHover:(t,e,s)=>{const n=t.getWordAtPosition(e);return Promise.resolve(i.provideHover(t,e,s)).then((t=>{if(t)return!t.range&&n&&(t.range=new Es(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn)),t.range||(t.range=new Es(e.lineNumber,e.column,e.lineNumber,e.column)),t}))}})}function fX(t,i){return DJ.get(jA).documentSymbolProvider.register(t,i)}function gX(t,i){return DJ.get(jA).documentHighlightProvider.register(t,i)}function AX(t,i){return DJ.get(jA).linkedEditingRangeProvider.register(t,i)}function pX(t,i){return DJ.get(jA).definitionProvider.register(t,i)}function wX(t,i){return DJ.get(jA).implementationProvider.register(t,i)}function mX(t,i){return DJ.get(jA).typeDefinitionProvider.register(t,i)}function vX(t,i){return DJ.get(jA).codeLensProvider.register(t,i)}function bX(t,i,e){return DJ.get(jA).codeActionProvider.register(t,{providedCodeActionKinds:e==null?void 0:e.providedCodeActionKinds,documentation:e==null?void 0:e.documentation,provideCodeActions:(t,e,s,n)=>{const o=DJ.get(sP).read({resource:t.uri}).filter((t=>Es.areIntersectingOrTouching(t,e)));return i.provideCodeActions(t,e,{markers:o,only:s.only,trigger:s.trigger},n)},resolveCodeAction:i.resolveCodeAction})}function yX(t,i){return DJ.get(jA).documentFormattingEditProvider.register(t,i)}function kX(t,i){return DJ.get(jA).documentRangeFormattingEditProvider.register(t,i)}function xX(t,i){return DJ.get(jA).onTypeFormattingEditProvider.register(t,i)}function CX(t,i){return DJ.get(jA).linkProvider.register(t,i)}function EX(t,i){return DJ.get(jA).completionProvider.register(t,i)}function BX(t,i){return DJ.get(jA).colorProvider.register(t,i)}function DX(t,i){return DJ.get(jA).foldingRangeProvider.register(t,i)}function MX(t,i){return DJ.get(jA).declarationProvider.register(t,i)}function SX(t,i){return DJ.get(jA).selectionRangeProvider.register(t,i)}function FX(t,i){return DJ.get(jA).documentSemanticTokensProvider.register(t,i)}function IX(t,i){return DJ.get(jA).documentRangeSemanticTokensProvider.register(t,i)}function LX(t,i){return DJ.get(jA).inlineCompletionsProvider.register(t,i)}function RX(t,i){return DJ.get(jA).inlineEditProvider.register(t,i)}function TX(t,i){return DJ.get(jA).inlayHintsProvider.register(t,i)}const NX=za("IEditorCancelService"),QX=new Tl("cancellableOperation",!1,st(0,"Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));Hd(NX,class{constructor(){this._tokens=new WeakMap}add(t,i){let e,s=this._tokens.get(t);return s||(s=t.invokeWithinContext((t=>({key:QX.bindTo(t.get(Nl)),tokens:new _t}))),this._tokens.set(t,s)),s.key.set(!0),e=s.tokens.push(i),()=>{e&&(e(),s.key.set(!s.tokens.isEmpty()),e=void 0)}}cancel(t){const i=this._tokens.get(t);if(!i)return;const e=i.tokens.pop();e&&(e.cancel(),i.key.set(!i.tokens.isEmpty()))}},1);class OX extends xe{constructor(t,i){super(i),this.editor=t,this._unregister=t.invokeWithinContext((i=>i.get(NX).add(t,this)))}dispose(){this._unregister(),super.dispose()}}xu(new class extends mu{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:QX})}runEditorCommand(t,i){t.get(NX).cancel(i)}});let zX=class t{constructor(t,i){if(this.flags=i,1&this.flags){const i=t.getModel();this.modelVersionId=i?Kn("{0}#{1}",i.uri.toString(),i.getVersionId()):null}else this.modelVersionId=null;4&this.flags?this.position=t.getPosition():this.position=null,2&this.flags?this.selection=t.getSelection():this.selection=null,8&this.flags?(this.scrollLeft=t.getScrollLeft(),this.scrollTop=t.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(i){if(!(i instanceof t))return!1;const e=i;return this.modelVersionId===e.modelVersionId&&this.scrollLeft===e.scrollLeft&&this.scrollTop===e.scrollTop&&!(!this.position&&e.position||this.position&&!e.position||this.position&&e.position&&!this.position.equals(e.position))&&!(!this.selection&&e.selection||this.selection&&!e.selection||this.selection&&e.selection&&!this.selection.equalsRange(e.selection))}validate(i){return this._equals(new t(i,this.flags))}};class UX extends OX{constructor(t,i,e,s){super(t,s),this._listener=new Zi,4&i&&this._listener.add(t.onDidChangeCursorPosition((t=>{e&&Es.containsPosition(e,t.position)||this.cancel()}))),2&i&&this._listener.add(t.onDidChangeCursorSelection((t=>{e&&Es.containsRange(e,t.selection)||this.cancel()}))),8&i&&this._listener.add(t.onDidScrollChange((t=>this.cancel()))),1&i&&(this._listener.add(t.onDidChangeModel((t=>this.cancel()))),this._listener.add(t.onDidChangeModelContent((t=>this.cancel()))))}dispose(){this._listener.dispose(),super.dispose()}}class HX extends xe{constructor(t,i){super(i),this._listener=t.onDidChangeContent((()=>this.cancel()))}dispose(){this._listener.dispose(),super.dispose()}}function PX(t){return!(!t||typeof t.getEditorType!="function")&&t.getEditorType()===ip.ICodeEditor}function jX(t){return!(!t||typeof t.getEditorType!="function")&&t.getEditorType()===ip.IDiffEditor}function WX(t){return PX(t)?t:jX(t)?t.getModifiedEditor():function(t){return!!t&&typeof t=="object"&&typeof t.onDidChangeActiveEditor=="function"}(t)&&PX(t.activeCodeEditor)?t.activeCodeEditor:null}class YX{static _handleEolEdits(t,i){let e;const s=[];for(const t of i)typeof t.eol=="number"&&(e=t.eol),t.range&&typeof t.text=="string"&&s.push(t);return typeof e=="number"&&t.hasModel()&&t.getModel().pushEOL(e),s}static _isFullModelReplaceEdit(t,i){if(!t.hasModel())return!1;const e=t.getModel(),s=e.validateRange(i.range);return e.getFullModelRange().equalsRange(s)}static execute(t,i,e){e&&t.pushUndoStop();const s=MJ.capture(t),n=YX._handleEolEdits(t,i);n.length===1&&YX._isFullModelReplaceEdit(t,n[0])?t.executeEdits("formatEditsCommand",n.map((t=>KQ.replace(Es.lift(t.range),t.text)))):t.executeEdits("formatEditsCommand",n.map((t=>KQ.replaceMove(Es.lift(t.range),t.text)))),e&&t.pushUndoStop(),s.restoreRelativeVerticalPositionOfCursor(t)}}class _X{constructor(t){this.value=t,this._lower=t.toLowerCase()}static toKey(t){return typeof t=="string"?t.toLowerCase():t._lower}}class VX{constructor(t){if(this._set=new Set,t)for(const i of t)this.add(i)}add(t){this._set.add(_X.toKey(t))}has(t){return this._set.has(_X.toKey(t))}}function JX(t,i,e){const s=[],n=new VX,o=t.ordered(e);for(const t of o)s.push(t),t.extensionId&&n.add(t.extensionId);const r=i.ordered(e);for(const t of r){if(t.extensionId){if(n.has(t.extensionId))continue;n.add(t.extensionId)}s.push({displayName:t.displayName,extensionId:t.extensionId,provideDocumentFormattingEdits:(i,e,s)=>t.provideDocumentRangeFormattingEdits(i,i.getFullModelRange(),e,s)})}return s}class GX{static setFormatterSelector(t){return{dispose:GX._selectors.unshift(t)}}static async select(t,i,e,s){if(t.length===0)return;const n=Wt.first(GX._selectors);return n?await n(t,i,e,s):void 0}}async function KX(t,i,e,s,n,o,r){const h=t.get(Oa),{documentRangeFormattingEditProvider:c}=t.get(jA),a=PX(i)?i.getModel():i,l=c.ordered(a),u=await GX.select(l,a,s,2);u&&(n.report(u),await h.invokeFunction($X,u,i,e,o,r))}async function $X(t,i,e,s,n,o){var r,h;const c=t.get(tP),a=t.get(au),l=t.get(iJ);let u,d;PX(e)?(u=e.getModel(),d=new UX(e,5,void 0,n)):(u=e,d=new HX(e,n));const f=[];let g=0;for(const t of C(s).sort(Es.compareRangesUsingStarts))g>0&&Es.areIntersectingOrTouching(f[g-1],t)?f[g-1]=Es.fromPositions(f[g-1].getStartPosition(),t.getEndPosition()):g=f.push(t);const A=async t=>{var e,s;a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(e=i.extensionId)===null||e===void 0?void 0:e.value,t);const n=await i.provideDocumentRangeFormattingEdits(u,t,u.getFormattingOptions(),d.token)||[];return a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(s=i.extensionId)===null||s===void 0?void 0:s.value,n),n},p=(t,i)=>{if(!t.length||!i.length)return!1;const e=t.reduce(((t,i)=>Es.plusRange(t,i.range)),t[0].range);if(!i.some((t=>Es.intersectRanges(e,t.range))))return!1;for(const e of t)for(const t of i)if(Es.intersectRanges(e.range,t.range))return!0;return!1},w=[],m=[];try{if(typeof i.provideDocumentRangesFormattingEdits=="function"){a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(r=i.extensionId)===null||r===void 0?void 0:r.value,f);const t=await i.provideDocumentRangesFormattingEdits(u,f,u.getFormattingOptions(),d.token)||[];a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(h=i.extensionId)===null||h===void 0?void 0:h.value,t),m.push(t)}else{for(const t of f){if(d.token.isCancellationRequested)return!0;m.push(await A(t))}for(let t=0;t<f.length;++t)for(let i=t+1;i<f.length;++i){if(d.token.isCancellationRequested)return!0;if(p(m[t],m[i])){const e=Es.plusRange(f[t],f[i]),s=await A(e);f.splice(i,1),f.splice(t,1),f.push(e),m.splice(i,1),m.splice(t,1),m.push(s),t=0,i=0}}}for(const t of m){if(d.token.isCancellationRequested)return!0;const i=await c.computeMoreMinimalEdits(u.uri,t);i&&w.push(...i)}}finally{d.dispose()}if(w.length===0)return!1;if(PX(e))YX.execute(e,w,!0),e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1);else{const[{range:t}]=w,i=new Bs(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn);u.pushEditOperations([i],w.map((t=>({text:t.text,range:Es.lift(t.range),forceMoveMarkers:!0}))),(t=>{for(const{range:e}of t)if(Es.areIntersectingOrTouching(e,i))return[new Bs(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)];return null}))}return l.playSignal(nJ.format,{userGesture:o}),!0}async function XX(t,i,e,s,n,o){const r=t.get(Oa),h=t.get(jA),c=PX(i)?i.getModel():i,a=JX(h.documentFormattingEditProvider,h.documentRangeFormattingEditProvider,c),l=await GX.select(a,c,e,1);l&&(s.report(l),await r.invokeFunction(qX,l,i,e,n,o))}async function qX(t,i,e,s,n,o){const r=t.get(tP),h=t.get(iJ);let c,a,l;PX(e)?(c=e.getModel(),a=new UX(e,5,void 0,n)):(c=e,a=new HX(e,n));try{const t=await i.provideDocumentFormattingEdits(c,c.getFormattingOptions(),a.token);if(l=await r.computeMoreMinimalEdits(c.uri,t),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(PX(e))YX.execute(e,l,s!==2),s!==2&&e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1);else{const[{range:t}]=l,i=new Bs(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn);c.pushEditOperations([i],l.map((t=>({text:t.text,range:Es.lift(t.range),forceMoveMarkers:!0}))),(t=>{for(const{range:e}of t)if(Es.areIntersectingOrTouching(e,i))return[new Bs(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)];return null}))}return h.playSignal(nJ.format,{userGesture:o}),!0}function ZX(t,i,e,s,n,o,r){const h=i.onTypeFormattingEditProvider.ordered(e);return h.length===0||h[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(h[0].provideOnTypeFormattingEdits(e,s,n,o,r)).catch(zi).then((i=>t.computeMoreMinimalEdits(e.uri,i)))}GX._selectors=new _t,Xa.registerCommand("_executeFormatRangeProvider",(async function(t,...i){const[e,s,n]=i;Y(fs.isUri(e)),Y(Es.isIRange(s));const o=t.get(Pa),r=t.get(tP),h=t.get(jA),c=await o.createModelReference(e);try{return async function(t,i,e,s,n,o){const r=i.documentRangeFormattingEditProvider.ordered(e);for(const i of r){const r=await Promise.resolve(i.provideDocumentRangeFormattingEdits(e,s,n,o)).catch(zi);if(p(r))return await t.computeMoreMinimalEdits(e.uri,r)}}(r,h,c.object.textEditorModel,Es.lift(s),n,ye.None)}finally{c.dispose()}})),Xa.registerCommand("_executeFormatDocumentProvider",(async function(t,...i){const[e,s]=i;Y(fs.isUri(e));const n=t.get(Pa),o=t.get(tP),r=t.get(jA),h=await n.createModelReference(e);try{return async function(t,i,e,s,n){const o=JX(i.documentFormattingEditProvider,i.documentRangeFormattingEditProvider,e);for(const i of o){const o=await Promise.resolve(i.provideDocumentFormattingEdits(e,s,n)).catch(zi);if(p(o))return await t.computeMoreMinimalEdits(e.uri,o)}}(o,r,h.object.textEditorModel,s,ye.None)}finally{h.dispose()}})),Xa.registerCommand("_executeFormatOnTypeProvider",(async function(t,...i){const[e,s,n,o]=i;Y(fs.isUri(e)),Y(Cs.isIPosition(s)),Y(typeof n=="string");const r=t.get(Pa),h=t.get(tP),c=t.get(jA),a=await r.createModelReference(e);try{return ZX(h,c,a.object.textEditorModel,Cs.lift(s),n,o,ye.None)}finally{a.dispose()}})),Ni.wrappingIndent.defaultValue=0,Ni.glyphMargin.defaultValue=!1,Ni.autoIndent.defaultValue=3,Ni.overviewRulerLanes.defaultValue=2,GX.setFormatterSelector(((t,i,e)=>Promise.resolve(t[0])));const tq=jn();tq.editor={create:h$,getEditors:l$,getDiffEditors:u$,onDidCreateEditor:c$,onDidCreateDiffEditor:a$,createDiffEditor:d$,addCommand:g$,addEditorAction:A$,addKeybindingRule:p$,addKeybindingRules:w$,createModel:m$,setModelLanguage:v$,setModelMarkers:b$,getModelMarkers:k$,removeAllMarkers:y$,onDidChangeMarkers:x$,getModels:E$,getModel:C$,onDidCreateModel:B$,onWillDisposeModel:D$,onDidChangeModelLanguage:M$,createWebWorker:S$,colorizeElement:F$,colorize:I$,colorizeModelLine:L$,tokenize:R$,defineTheme:T$,setTheme:N$,remeasureFonts:Q$,registerCommand:O$,registerLinkOpener:z$,registerEditorOpener:U$,AccessibilitySupport:$s,ContentWidgetPositionPreference:sn,CursorChangeReason:nn,DefaultEndOfLine:on,EditorAutoIndentStrategy:hn,EditorOption:cn,EndOfLinePreference:an,EndOfLineSequence:ln,MinimapPosition:bn,MinimapSectionHeaderStyle:yn,MouseTargetType:kn,OverlayWidgetPositionPreference:Cn,OverviewRulerLane:En,GlyphMarginLane:un,RenderLineNumbersType:Mn,RenderMinimap:Sn,ScrollbarVisibility:In,ScrollType:Fn,TextEditorCursorBlinkingStyle:On,TextEditorCursorStyle:zn,TrackedRangeStickiness:Un,WrappingIndent:Hn,InjectedTextCursorStops:fn,PositionAffinity:Dn,ShowLightbulbIconMode:Rn,ConfigurationChangedEvent:qt,BareFontInfo:La,FontInfo:Ra,TextModelResolvedOptions:ng,FindMatch:og,ApplyUpdateResult:ii,EditorZoom:Fa,createMultiFileDiffEditor:f$,EditorType:ip,EditorOptions:Ni},tq.languages={register:G$,getLanguages:K$,onLanguage:X$,onLanguageEncountered:q$,getEncodedLanguageId:$$,setLanguageConfiguration:Z$,setColorMap:sX,registerTokensProviderFactory:oX,setTokensProvider:rX,setMonarchTokensProvider:hX,registerReferenceProvider:cX,registerRenameProvider:aX,registerNewSymbolNameProvider:lX,registerCompletionItemProvider:EX,registerSignatureHelpProvider:uX,registerHoverProvider:dX,registerDocumentSymbolProvider:fX,registerDocumentHighlightProvider:gX,registerLinkedEditingRangeProvider:AX,registerDefinitionProvider:pX,registerImplementationProvider:wX,registerTypeDefinitionProvider:mX,registerCodeLensProvider:vX,registerCodeActionProvider:bX,registerDocumentFormattingEditProvider:yX,registerDocumentRangeFormattingEditProvider:kX,registerOnTypeFormattingEditProvider:xX,registerLinkProvider:CX,registerColorProvider:BX,registerFoldingRangeProvider:DX,registerDeclarationProvider:MX,registerSelectionRangeProvider:SX,registerDocumentSemanticTokensProvider:FX,registerDocumentRangeSemanticTokensProvider:IX,registerInlineCompletionsProvider:LX,registerInlineEditProvider:RX,registerInlayHintsProvider:TX,DocumentHighlightKind:rn,CompletionItemKind:Zs,CompletionItemTag:tn,CompletionItemInsertTextRule:qs,SymbolKind:Nn,SymbolTag:Qn,IndentAction:dn,CompletionTriggerKind:en,SignatureHelpTriggerKind:Tn,InlayHintKind:gn,InlineCompletionTriggerKind:An,InlineEditTriggerKind:pn,CodeActionTriggerType:Xs,NewSymbolNameTag:xn,PartialAcceptTriggerKind:Bn,FoldingRangeKind:Vs,SelectedSuggestionInfo:Hs};const iq=tq.CancellationTokenSource,eq=tq.Emitter,sq=tq.KeyCode,nq=tq.KeyMod,oq=tq.Position,rq=tq.Range,hq=tq.Selection,cq=tq.SelectionDirection,aq=tq.MarkerSeverity,lq=tq.MarkerTag,uq=tq.Uri,dq=tq.Token,fq=tq.editor,gq=tq.languages,Aq=globalThis.MonacoEnvironment;(Aq!=null&&Aq.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=tq),globalThis.require!==void 0&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const pq=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:iq,Emitter:eq,KeyCode:sq,KeyMod:nq,MarkerSeverity:aq,MarkerTag:lq,Position:oq,Range:rq,Selection:hq,SelectionDirection:cq,Token:dq,Uri:uq,editor:fq,languages:gq},Symbol.toStringTag,{value:"Module"}));var wq=Object.defineProperty,mq=Object.getOwnPropertyDescriptor,vq=Object.getOwnPropertyNames,bq=Object.prototype.hasOwnProperty,yq=(t,i,e,s)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of vq(i))bq.call(t,n)||n===e||wq(t,n,{get:()=>i[n],enumerable:!(s=mq(i,n))||s.enumerable});return t},kq={};yq(kq,pq,"default");var xq={},Cq={},Eq=class t{static getOrCreate(i){return Cq[i]||(Cq[i]=new t(i)),Cq[i]}constructor(t){this._languageId=t,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise(((t,i)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=i}))}load(){return this._loadingTriggered||(this._loadingTriggered=!0,xq[this._languageId].loader().then((t=>this._lazyLoadPromiseResolve(t)),(t=>this._lazyLoadPromiseReject(t)))),this._lazyLoadPromise}};function Bq(t){const i=t.id;xq[i]=t,kq.languages.register(t);const e=Eq.getOrCreate(i);kq.languages.registerTokensProviderFactory(i,{create:async()=>(await e.load()).language}),kq.languages.onLanguageEncountered(i,(async()=>{const t=await e.load();kq.languages.setLanguageConfiguration(i,t.conf)}))}Bq({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>import("./p-10670f98.js")}),Bq({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>import("./p-31ab3d2f.js")}),Bq({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>import("./p-ef728f21.js")}),Bq({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>import("./p-7f03bb12.js")}),Bq({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>import("./p-e85ea4e6.js")}),Bq({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>import("./p-09aa8284.js")}),Bq({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>import("./p-051c45bd.js")}),Bq({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>import("./p-6d919b79.js")}),Bq({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>import("./p-be4f5359.js")}),Bq({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>import("./p-be4f5359.js")}),Bq({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>import("./p-387bfbe9.js")}),Bq({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>import("./p-8e233ba3.js")}),Bq({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>import("./p-d7bce422.js")}),Bq({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>import("./p-520a4780.js")}),Bq({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>import("./p-6be0ac7b.js")}),Bq({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>import("./p-d7b189ae.js")}),Bq({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>import("./p-0f34b553.js")}),Bq({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>import("./p-4b783431.js")}),Bq({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>import("./p-fb862ab4.js")}),Bq({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>import("./p-b5a53d71.js")}),Bq({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>import("./p-a79931a0.js").then((t=>t.TagAutoInterpolationDollar))}),Bq({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>import("./p-a79931a0.js").then((t=>t.TagAngleInterpolationDollar))}),Bq({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>import("./p-a79931a0.js").then((t=>t.TagBracketInterpolationDollar))}),Bq({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>import("./p-a79931a0.js").then((t=>t.TagAngleInterpolationBracket))}),Bq({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>import("./p-a79931a0.js").then((t=>t.TagBracketInterpolationBracket))}),Bq({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>import("./p-a79931a0.js").then((t=>t.TagAutoInterpolationDollar))}),Bq({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>import("./p-a79931a0.js").then((t=>t.TagAutoInterpolationBracket))}),Bq({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>import("./p-fd80e40f.js")}),Bq({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>import("./p-0e3580dd.js")}),Bq({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>import("./p-37b25a35.js")}),Bq({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>import("./p-ceddf312.js")}),Bq({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>import("./p-4c4e40ee.js")}),Bq({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>import("./p-3e8f4637.js")}),Bq({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>import("./p-7f0f9cb5.js")}),Bq({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>import("./p-740691ec.js")}),Bq({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>import("./p-abe83359.js")}),Bq({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>import("./p-292370a1.js")}),Bq({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>import("./p-67c0c584.js")}),Bq({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>import("./p-dceee9b3.js")}),Bq({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>import("./p-13a883f3.js")}),Bq({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>import("./p-2023b18e.js")}),Bq({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>import("./p-c97fe907.js")}),Bq({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>import("./p-f983c2bb.js")}),Bq({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>import("./p-60e02dee.js")}),Bq({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>import("./p-5dc57c7c.js")}),Bq({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>import("./p-aeb84be7.js")}),Bq({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>import("./p-a93ef2e4.js")}),Bq({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>import("./p-24ead082.js")}),Bq({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>import("./p-b30d078e.js")}),Bq({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>import("./p-f402d9a2.js")}),Bq({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>import("./p-e7b2af99.js")}),Bq({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>import("./p-55bd4d6f.js")}),Bq({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>import("./p-f3dbe6ce.js")}),Bq({id:"pla",extensions:[".pla"],loader:()=>import("./p-0ca0ea31.js")}),Bq({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>import("./p-23e889ad.js")}),Bq({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>import("./p-b64869c3.js")}),Bq({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>import("./p-2e7684cd.js")}),Bq({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>import("./p-aa5b0604.js")}),Bq({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>import("./p-aa200543.js")}),Bq({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>import("./p-29352a10.js")}),Bq({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>import("./p-dffe740f.js")}),Bq({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>import("./p-0d34720f.js")}),Bq({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>import("./p-8a366d5e.js")}),Bq({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>import("./p-d106338c.js")}),Bq({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>import("./p-8b026591.js")}),Bq({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>import("./p-6a2c67e4.js")}),Bq({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>import("./p-8cf08464.js")}),Bq({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>import("./p-0e5fc348.js")}),Bq({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>import("./p-33824ad0.js")}),Bq({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>import("./p-168f347d.js")}),Bq({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>import("./p-3180057e.js")}),Bq({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>import("./p-6d9f7699.js")}),Bq({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>import("./p-5f66d083.js")}),Bq({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>import("./p-70cee3b4.js")}),Bq({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>import("./p-525b9cd9.js")}),Bq({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>import("./p-7dc94006.js")}),Bq({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>import("./p-c37c8830.js")}),Bq({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>import("./p-f9980e66.js")}),Bq({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>import("./p-163ffb84.js")}),Bq({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>import("./p-d50381d8.js")}),Bq({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>import("./p-d50381d8.js")}),Bq({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>import("./p-37b71cde.js")}),Bq({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>import("./p-27055aae.js")}),Bq({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>import("./p-cd13b46a.js")}),Bq({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>import("./p-9ff3a12b.js")}),Bq({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>import("./p-e908fdd1.js")}),Bq({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>import("./p-c64334a4.js")}),Bq({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>import("./p-42aadac8.js")});var Dq=Object.defineProperty,Mq=Object.getOwnPropertyDescriptor,Sq=Object.getOwnPropertyNames,Fq=Object.prototype.hasOwnProperty,Iq=(t,i,e,s)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of Sq(i))Fq.call(t,n)||n===e||Dq(t,n,{get:()=>i[n],enumerable:!(s=Mq(i,n))||s.enumerable});return t},Lq={};((t,i,e)=>{Iq(t,i,"default"),e&&Iq(e,i,"default")})(Lq,pq);var Rq=class{constructor(t,i,e){this._onDidChange=new Lq.Emitter,this._languageId=t,this.setOptions(i),this.setModeConfiguration(e)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(t){this._options=t||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(t){this.setOptions(t)}setModeConfiguration(t){this._modeConfiguration=t||Object.create(null),this._onDidChange.fire(this)}},Tq={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},Nq={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},Qq=new Rq("css",Tq,Nq),Oq=new Rq("scss",Tq,Nq),zq=new Rq("less",Tq,Nq);function Uq(){return import("./p-c075abe2.js")}Lq.languages.css={cssDefaults:Qq,lessDefaults:zq,scssDefaults:Oq},Lq.languages.onLanguage("less",(()=>{Uq().then((t=>t.setupMode(zq)))})),Lq.languages.onLanguage("scss",(()=>{Uq().then((t=>t.setupMode(Oq)))})),Lq.languages.onLanguage("css",(()=>{Uq().then((t=>t.setupMode(Qq)))}));var Hq=Object.defineProperty,Pq=Object.getOwnPropertyDescriptor,jq=Object.getOwnPropertyNames,Wq=Object.prototype.hasOwnProperty,Yq=(t,i,e,s)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of jq(i))Wq.call(t,n)||n===e||Hq(t,n,{get:()=>i[n],enumerable:!(s=Pq(i,n))||s.enumerable});return t},_q={};((t,i,e)=>{Yq(t,i,"default"),e&&Yq(e,i,"default")})(_q,pq);var Vq=class{constructor(t,i,e){this._onDidChange=new _q.Emitter,this._languageId=t,this.setOptions(i),this.setModeConfiguration(e)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(t){this._options=t||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(t){this._modeConfiguration=t||Object.create(null),this._onDidChange.fire(this)}},Jq={format:{tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},suggest:{},data:{useDefaultDataProvider:!0}};function Gq(t){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:t===Kq,documentFormattingEdits:t===Kq,documentRangeFormattingEdits:t===Kq}}var Kq="html",$q="handlebars",Xq="razor",qq=nZ(Kq,Jq,Gq(Kq)),Zq=qq.defaults,tZ=nZ($q,Jq,Gq($q)),iZ=tZ.defaults,eZ=nZ(Xq,Jq,Gq(Xq)),sZ=eZ.defaults;function nZ(t,i=Jq,e=Gq(t)){const s=new Vq(t,i,e);let n;const o=_q.languages.onLanguage(t,(async()=>{n=(await import("./p-d46207ca.js")).setupMode(s)}));return{defaults:s,dispose(){o.dispose(),n==null||n.dispose(),n=void 0}}}_q.languages.html={htmlDefaults:Zq,razorDefaults:sZ,handlebarDefaults:iZ,htmlLanguageService:qq,handlebarLanguageService:tZ,razorLanguageService:eZ,registerHTMLLanguageService:nZ};var oZ=new class{constructor(t,i,e){this._onDidChange=new eq,this._languageId=t,this.setDiagnosticsOptions(i),this.setModeConfiguration(e)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(t){this._diagnosticsOptions=t||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(t){this._modeConfiguration=t||Object.create(null),this._onDidChange.fire(this)}}("json",{validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},{documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0});function rZ(){return import("./p-2832ec1f.js")}gq.json={jsonDefaults:oZ,getWorker:()=>rZ().then((t=>t.getWorker()))},gq.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]}),gq.onLanguage("json",(()=>{rZ().then((t=>t.setupMode(oZ)))}));var hZ=Object.defineProperty,cZ=Object.getOwnPropertyDescriptor,aZ=Object.getOwnPropertyNames,lZ=Object.prototype.hasOwnProperty,uZ=(t,i,e,s)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of aZ(i))lZ.call(t,n)||n===e||hZ(t,n,{get:()=>i[n],enumerable:!(s=cZ(i,n))||s.enumerable});return t},dZ={};((t,i,e)=>{uZ(t,i,"default"),e&&uZ(e,i,"default")})(dZ,pq);var fZ=(t=>(t[t.None=0]="None",t[t.CommonJS=1]="CommonJS",t[t.AMD=2]="AMD",t[t.UMD=3]="UMD",t[t.System=4]="System",t[t.ES2015=5]="ES2015",t[t.ESNext=99]="ESNext",t))(fZ||{}),gZ=(t=>(t[t.None=0]="None",t[t.Preserve=1]="Preserve",t[t.React=2]="React",t[t.ReactNative=3]="ReactNative",t[t.ReactJSX=4]="ReactJSX",t[t.ReactJSXDev=5]="ReactJSXDev",t))(gZ||{}),AZ=(t=>(t[t.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",t[t.LineFeed=1]="LineFeed",t))(AZ||{}),pZ=(t=>(t[t.ES3=0]="ES3",t[t.ES5=1]="ES5",t[t.ES2015=2]="ES2015",t[t.ES2016=3]="ES2016",t[t.ES2017=4]="ES2017",t[t.ES2018=5]="ES2018",t[t.ES2019=6]="ES2019",t[t.ES2020=7]="ES2020",t[t.ESNext=99]="ESNext",t[t.JSON=100]="JSON",t[t.Latest=99]="Latest",t))(pZ||{}),wZ=(t=>(t[t.Classic=1]="Classic",t[t.NodeJs=2]="NodeJs",t))(wZ||{}),mZ=class{constructor(t,i,e,s,n){this._onDidChange=new dZ.Emitter,this._onDidExtraLibsChange=new dZ.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(t),this.setDiagnosticsOptions(i),this.setWorkerOptions(e),this.setInlayHintsOptions(s),this.setModeConfiguration(n),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(t,i){let e;if(e=i===void 0?`ts:extralib-${Math.random().toString(36).substring(2,15)}`:i,this._extraLibs[e]&&this._extraLibs[e].content===t)return{dispose:()=>{}};let s=1;return this._removedExtraLibs[e]&&(s=this._removedExtraLibs[e]+1),this._extraLibs[e]&&(s=this._extraLibs[e].version+1),this._extraLibs[e]={content:t,version:s},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let t=this._extraLibs[e];t&&t.version===s&&(delete this._extraLibs[e],this._removedExtraLibs[e]=s,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(t){for(const t in this._extraLibs)this._removedExtraLibs[t]=this._extraLibs[t].version;if(this._extraLibs=Object.create(null),t&&t.length>0)for(const i of t){const t=i.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,e=i.content;let s=1;this._removedExtraLibs[t]&&(s=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:e,version:s}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout((()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)}),0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(t){this._compilerOptions=t||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(t){this._diagnosticsOptions=t||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(t){this._workerOptions=t||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(t){this._inlayHintsOptions=t||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(t){}setEagerModelSync(t){this._eagerModelSync=t}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(t){this._modeConfiguration=t||Object.create(null),this._onDidChange.fire(void 0)}},vZ={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},bZ=new mZ({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},vZ),yZ=new mZ({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},vZ);function kZ(){return import("./p-c465b785.js")}dZ.languages.typescript={ModuleKind:fZ,JsxEmit:gZ,NewLineKind:AZ,ScriptTarget:pZ,ModuleResolutionKind:wZ,typescriptVersion:"5.0.2",typescriptDefaults:bZ,javascriptDefaults:yZ,getTypeScriptWorker:()=>kZ().then((t=>t.getTypeScriptWorker())),getJavaScriptWorker:()=>kZ().then((t=>t.getJavaScriptWorker()))},dZ.languages.onLanguage("typescript",(()=>kZ().then((t=>t.setupTypeScript(bZ))))),dZ.languages.onLanguage("javascript",(()=>kZ().then((t=>t.setupJavaScript(yZ)))));class xZ extends ru{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:nt(0,"Toggle Show Moved Code Blocks"),precondition:gl.has("isInDiffEditor")})}run(t,...i){const e=t.get(Id),s=!e.getValue("diffEditor.experimental.showMoves");e.updateValue("diffEditor.experimental.showMoves",s)}}class CZ extends ru{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:nt(0,"Toggle Use Inline View When Space Is Limited"),precondition:gl.has("isInDiffEditor")})}run(t,...i){const e=t.get(Id),s=!e.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");e.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",s)}}const EZ=nt(0,"Diff Editor");class BZ extends ru{constructor(){super({id:"diffEditor.revert",title:nt(0,"Revert"),f1:!1,category:EZ})}run(t,i){var e;const s=function(t,i,e){return t.get(Ua).listDiffEditors().find((t=>{var s,n;const o=t.getModifiedEditor(),r=t.getOriginalEditor();return o&&((s=o.getModel())===null||s===void 0?void 0:s.uri.toString())===e.toString()&&r&&((n=r.getModel())===null||n===void 0?void 0:n.uri.toString())===i.toString()}))||null}(t,i.originalUri,i.modifiedUri);s instanceof OK&&s.revertRangeMappings((e=i.mapping.innerChanges)!==null&&e!==void 0?e:[])}}const DZ=nt(0,"Accessible Diff Viewer");class MZ extends ru{constructor(){super({id:MZ.id,title:nt(0,"Go to Next Difference"),category:DZ,precondition:gl.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(t){const i=FZ(t);i==null||i.accessibleDiffViewerNext()}}MZ.id="editor.action.accessibleDiffViewer.next";class SZ extends ru{constructor(){super({id:SZ.id,title:nt(0,"Go to Previous Difference"),category:DZ,precondition:gl.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(t){const i=FZ(t);i==null||i.accessibleDiffViewerPrev()}}function FZ(t){const i=t.get(Ua).listDiffEditors(),e=Lc();if(e){for(const t of i)if(IZ(t.getContainerDomNode(),e))return t}return null}function IZ(t,i){let e=i;for(;e;){if(e===t)return!0;e=e.parentElement}return!1}SZ.id="editor.action.accessibleDiffViewer.prev",hu(class extends ru{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:nt(0,"Toggle Collapse Unchanged Regions"),icon:Fs.map,toggled:gl.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:gl.has("isInDiffEditor"),menu:{when:gl.has("isInDiffEditor"),id:tu.EditorTitle,order:22,group:"navigation"}})}run(t,...i){const e=t.get(Id),s=!e.getValue("diffEditor.hideUnchangedRegions.enabled");e.updateValue("diffEditor.hideUnchangedRegions.enabled",s)}}),hu(xZ),hu(CZ),su.appendMenuItem(tu.EditorTitle,{command:{id:(new CZ).desc.id,title:st(0,"Use Inline View When Space Is Limited"),toggled:gl.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:gl.has("isInDiffEditor")},order:11,group:"1_diff",when:gl.and(QC.diffEditorRenderSideBySideInlineBreakpointReached,gl.has("isInDiffEditor"))}),su.appendMenuItem(tu.EditorTitle,{command:{id:(new xZ).desc.id,title:st(0,"Show Moved Code Blocks"),icon:Fs.move,toggled:vl.create("config.diffEditor.experimental.showMoves",!0),precondition:gl.has("isInDiffEditor")},order:10,group:"1_diff",when:gl.has("isInDiffEditor")}),hu(BZ);for(const t of[{icon:Fs.arrowRight,key:QC.diffEditorInlineMode.toNegated()},{icon:Fs.discard,key:QC.diffEditorInlineMode}])su.appendMenuItem(tu.DiffEditorHunkToolbar,{command:{id:(new BZ).desc.id,title:st(0,"Revert Block"),icon:t.icon},when:gl.and(QC.diffEditorModifiedWritable,t.key),order:5,group:"primary"}),su.appendMenuItem(tu.DiffEditorSelectionToolbar,{command:{id:(new BZ).desc.id,title:st(0,"Revert Selection"),icon:t.icon},when:gl.and(QC.diffEditorModifiedWritable,t.key),order:5,group:"primary"});hu(class extends yu{constructor(){super({id:"diffEditor.switchSide",title:nt(0,"Switch Side"),icon:Fs.arrowSwap,precondition:gl.has("isInDiffEditor"),f1:!0,category:EZ})}runEditorCommand(t,i,e){const s=FZ(t);if(s instanceof OK){if(e&&e.dryRun)return{destinationSelection:s.mapToOtherSide().destinationSelection};s.switchSide()}}}),hu(class extends yu{constructor(){super({id:"diffEditor.exitCompareMove",title:nt(0,"Exit Compare Move"),icon:Fs.close,precondition:QC.comparingMovedCode,f1:!1,category:EZ,keybinding:{weight:1e4,primary:9}})}runEditorCommand(t,i,...e){const s=FZ(t);s instanceof OK&&s.exitCompareMove()}}),hu(class extends yu{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:nt(0,"Collapse All Unchanged Regions"),icon:Fs.fold,precondition:gl.has("isInDiffEditor"),f1:!0,category:EZ})}runEditorCommand(t,i,...e){const s=FZ(t);s instanceof OK&&s.collapseAllUnchangedRegions()}}),hu(class extends yu{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:nt(0,"Show All Unchanged Regions"),icon:Fs.unfold,precondition:gl.has("isInDiffEditor"),f1:!0,category:EZ})}runEditorCommand(t,i,...e){const s=FZ(t);s instanceof OK&&s.showAllUnchangedRegions()}}),su.appendMenuItem(tu.EditorTitle,{command:{id:MZ.id,title:st(0,"Open Accessible Diff Viewer"),precondition:gl.has("isInDiffEditor")},order:10,group:"2_diff",when:gl.and(QC.accessibleDiffViewerVisible.negate(),gl.has("isInDiffEditor"))}),Xa.registerCommandAlias("editor.action.diffReview.next",MZ.id),hu(MZ),Xa.registerCommandAlias("editor.action.diffReview.prev",SZ.id),hu(SZ);var LZ,RZ=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},TZ=function(t,i){return function(e,s){i(e,s,t)}};const NZ=new Tl("selectionAnchorSet",!1);let QZ=LZ=class{static get(t){return t.getContribution(LZ.ID)}constructor(t,i){this.editor=t,this.selectionAnchorSetContextKey=NZ.bindTo(i),this.modelChangeListener=t.onDidChangeModel((()=>this.selectionAnchorSetContextKey.reset()))}setSelectionAnchor(){if(this.editor.hasModel()){const t=this.editor.getPosition();this.editor.changeDecorations((i=>{this.decorationId&&i.removeDecoration(this.decorationId),this.decorationId=i.addDecoration(Bs.fromPositions(t,t),{description:"selection-anchor",stickiness:1,hoverMessage:(new RN).appendText(st(0,"Selection Anchor")),className:"selection-anchor"})})),this.selectionAnchorSetContextKey.set(!!this.decorationId),cw(st(0,"Anchor set at {0}:{1}",t.lineNumber,t.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const t=this.editor.getModel().getDecorationRange(this.decorationId);t&&this.editor.setPosition(t.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const t=this.editor.getModel().getDecorationRange(this.decorationId);if(t){const i=this.editor.getPosition();this.editor.setSelection(Bs.fromPositions(t.getStartPosition(),i)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const t=this.decorationId;this.editor.changeDecorations((i=>{i.removeDecoration(t),this.decorationId=void 0})),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};QZ.ID="editor.contrib.selectionAnchorController",QZ=LZ=RZ([TZ(1,Nl)],QZ);Bu(QZ.ID,QZ,4),Cu(class extends vu{constructor(){super({id:"editor.action.setSelectionAnchor",label:st(0,"Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2080),weight:100}})}async run(t,i){var e;(e=QZ.get(i))===null||e===void 0||e.setSelectionAnchor()}}),Cu(class extends vu{constructor(){super({id:"editor.action.goToSelectionAnchor",label:st(0,"Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:NZ})}async run(t,i){var e;(e=QZ.get(i))===null||e===void 0||e.goToSelectionAnchor()}}),Cu(class extends vu{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:st(0,"Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:NZ,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2089),weight:100}})}async run(t,i){var e;(e=QZ.get(i))===null||e===void 0||e.selectFromAnchorToCursor()}}),Cu(class extends vu{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:st(0,"Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:NZ,kbOpts:{kbExpr:QC.editorTextFocus,primary:9,weight:100}})}async run(t,i){var e;(e=QZ.get(i))===null||e===void 0||e.cancelSelectionAnchor()}});const OZ=Ow("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},st(0,"Overview ruler marker color for matching brackets."));class zZ{constructor(t,i,e){this.position=t,this.brackets=i,this.options=e}}class UZ extends te{static get(t){return t.getContribution(UZ.ID)}constructor(t){super(),this._editor=t,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new Er((()=>this._updateBrackets()),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(t.onDidChangeCursorPosition((t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()}))),this._register(t.onDidChangeModelContent((t=>{this._updateBracketsSoon.schedule()}))),this._register(t.onDidChangeModel((t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(t.onDidChangeModelLanguageConfiguration((t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(t.onDidChangeConfiguration((t=>{t.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())}))),this._register(t.onDidBlurEditorWidget((()=>{this._updateBracketsSoon.schedule()}))),this._register(t.onDidFocusEditorWidget((()=>{this._updateBracketsSoon.schedule()})))}jumpToBracket(){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=this._editor.getSelections().map((i=>{const e=i.getStartPosition(),s=t.bracketPairs.matchBracket(e);let n=null;if(s)s[0].containsPosition(e)&&!s[1].containsPosition(e)?n=s[1].getStartPosition():s[1].containsPosition(e)&&(n=s[0].getStartPosition());else{const i=t.bracketPairs.findEnclosingBrackets(e);if(i)n=i[1].getStartPosition();else{const i=t.bracketPairs.findNextBracket(e);i&&i.range&&(n=i.range.getStartPosition())}}return n?new Bs(n.lineNumber,n.column,n.lineNumber,n.column):new Bs(e.lineNumber,e.column,e.lineNumber,e.column)}));this._editor.setSelections(i),this._editor.revealRange(i[0])}selectToBracket(t){if(!this._editor.hasModel())return;const i=this._editor.getModel(),e=[];this._editor.getSelections().forEach((s=>{const n=s.getStartPosition();let o=i.bracketPairs.matchBracket(n);if(!o&&(o=i.bracketPairs.findEnclosingBrackets(n),!o)){const t=i.bracketPairs.findNextBracket(n);t&&t.range&&(o=i.bracketPairs.matchBracket(t.range.getStartPosition()))}let r=null,h=null;if(o){o.sort(Es.compareRangesUsingStarts);const[i,e]=o;if(r=t?i.getStartPosition():i.getEndPosition(),h=t?e.getEndPosition():e.getStartPosition(),e.containsPosition(n)){const t=r;r=h,h=t}}r&&h&&e.push(new Bs(r.lineNumber,r.column,h.lineNumber,h.column))})),e.length>0&&(this._editor.setSelections(e),this._editor.revealRange(e[0]))}removeBrackets(t){if(!this._editor.hasModel())return;const i=this._editor.getModel();this._editor.getSelections().forEach((e=>{const s=e.getPosition();let n=i.bracketPairs.matchBracket(s);n||(n=i.bracketPairs.findEnclosingBrackets(s)),n&&(this._editor.pushUndoStop(),this._editor.executeEdits(t,[{range:n[0],text:""},{range:n[1],text:""}]),this._editor.pushUndoStop())}))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const t=[];let i=0;for(const e of this._lastBracketsData){const s=e.brackets;s&&(t[i++]={range:s[0],options:e.options},t[i++]={range:s[1],options:e.options})}this._decorations.set(t)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);const t=this._editor.getSelections();if(t.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);const i=this._editor.getModel(),e=i.getVersionId();let s=[];this._lastVersionId===e&&(s=this._lastBracketsData);const n=[];let o=0;for(let i=0,e=t.length;i<e;i++){const e=t[i];e.isEmpty()&&(n[o++]=e.getStartPosition())}n.length>1&&n.sort(Cs.compare);const r=[];let h=0,c=0;const a=s.length;for(let t=0,e=n.length;t<e;t++){const e=n[t];for(;c<a&&s[c].position.isBefore(e);)c++;if(c<a&&s[c].position.equals(e))r[h++]=s[c];else{let t=i.bracketPairs.matchBracket(e,20),s=UZ._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;t||this._matchBrackets!=="always"||(t=i.bracketPairs.findEnclosingBrackets(e,20),s=UZ._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),r[h++]=new zZ(e,t,s)}}this._lastBracketsData=r,this._lastVersionId=e}}UZ.ID="editor.contrib.bracketMatchingController",UZ._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=DF.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Ik(OZ),position:ig.Center}}),UZ._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=DF.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),Bu(UZ.ID,UZ,1),Cu(class extends vu{constructor(){super({id:"editor.action.selectToBracket",label:st(0,"Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:nt(0,"Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(t,i,e){var s;let n=!0;e&&e.selectBrackets===!1&&(n=!1),(s=UZ.get(i))===null||s===void 0||s.selectToBracket(n)}}),Cu(class extends vu{constructor(){super({id:"editor.action.jumpToBracket",label:st(0,"Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:QC.editorTextFocus,primary:3165,weight:100}})}run(t,i){var e;(e=UZ.get(i))===null||e===void 0||e.jumpToBracket()}}),Cu(class extends vu{constructor(){super({id:"editor.action.removeBrackets",label:st(0,"Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:QC.editorTextFocus,primary:2561,weight:100}})}run(t,i){var e;(e=UZ.get(i))===null||e===void 0||e.removeBrackets(this.id)}}),su.appendMenuItem(tu.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:st(0,"Go to &&Bracket")},order:2});class HZ{constructor(t,i){this._selection=t,this._isMovingLeft=i}getEditOperations(t,i){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const e=this._selection.startLineNumber,s=this._selection.startColumn,n=this._selection.endColumn;if((!this._isMovingLeft||s!==1)&&(this._isMovingLeft||n!==t.getLineMaxColumn(e)))if(this._isMovingLeft){const o=new Es(e,s-1,e,s),r=t.getValueInRange(o);i.addEditOperation(o,null),i.addEditOperation(new Es(e,n,e,n),r)}else{const o=new Es(e,n,e,n+1),r=t.getValueInRange(o);i.addEditOperation(o,null),i.addEditOperation(new Es(e,s,e,s),r)}}computeCursorState(t,i){return this._isMovingLeft?new Bs(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new Bs(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class PZ extends vu{constructor(t,i){super(i),this.left=t}run(t,i){if(!i.hasModel())return;const e=[],s=i.getSelections();for(const t of s)e.push(new HZ(t,this.left));i.pushUndoStop(),i.executeCommands(this.id,e),i.pushUndoStop()}}Cu(class extends PZ{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:st(0,"Move Selected Text Left"),alias:"Move Selected Text Left",precondition:QC.writable})}}),Cu(class extends PZ{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:st(0,"Move Selected Text Right"),alias:"Move Selected Text Right",precondition:QC.writable})}});Cu(class extends vu{constructor(){super({id:"editor.action.transposeLetters",label:st(0,"Transpose Letters"),alias:"Transpose Letters",precondition:QC.writable,kbOpts:{kbExpr:QC.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(t,i){if(!i.hasModel())return;const e=i.getModel(),s=[],n=i.getSelections();for(const t of n){if(!t.isEmpty())continue;const i=t.startLineNumber,n=t.startColumn,o=e.getLineMaxColumn(i);if(i===1&&(n===1||n===2&&o===2))continue;const r=n===o?t.getPosition():lC.rightPosition(e,t.getPosition().lineNumber,t.getPosition().column),h=lC.leftPosition(e,r),c=lC.leftPosition(e,h),a=e.getValueInRange(Es.fromPositions(c,h)),l=e.getValueInRange(Es.fromPositions(h,r)),u=Es.fromPositions(c,r);s.push(new nC(u,l+a))}s.length>0&&(i.pushUndoStop(),i.executeCommands(this.id,s),i.pushUndoStop())}});const jZ=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let t;t=typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?crypto.getRandomValues.bind(crypto):function(t){for(let i=0;i<t.length;i++)t[i]=Math.floor(256*Math.random());return t};const i=new Uint8Array(16),e=[];for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return function(){t(i),i[6]=15&i[6]|64,i[8]=63&i[8]|128;let s=0,n="";return n+=e[i[s++]],n+=e[i[s++]],n+=e[i[s++]],n+=e[i[s++]],n+="-",n+=e[i[s++]],n+=e[i[s++]],n+="-",n+=e[i[s++]],n+=e[i[s++]],n+="-",n+=e[i[s++]],n+=e[i[s++]],n+="-",n+=e[i[s++]],n+=e[i[s++]],n+=e[i[s++]],n+=e[i[s++]],n+=e[i[s++]],n+=e[i[s++]],n}}();function WZ(t){return{asString:async()=>t,asFile:()=>{},value:typeof t=="string"?t:void 0}}class YZ{constructor(){this._entries=new Map}get size(){let t=0;for(const i of this._entries)t++;return t}has(t){return this._entries.has(this.toKey(t))}matches(t){const i=[...this._entries.keys()];return Wt.some(this,(([t,i])=>i.asFile()))&&i.push("files"),JZ(_Z(t),i)}get(t){var i;return(i=this._entries.get(this.toKey(t)))===null||i===void 0?void 0:i[0]}append(t,i){const e=this._entries.get(t);e?e.push(i):this._entries.set(this.toKey(t),[i])}replace(t,i){this._entries.set(this.toKey(t),[i])}delete(t){this._entries.delete(this.toKey(t))}*[Symbol.iterator](){for(const[t,i]of this._entries)for(const e of i)yield[t,e]}toKey(t){return _Z(t)}}function _Z(t){return t.toLowerCase()}function VZ(t,i){return JZ(_Z(t),i.map(_Z))}function JZ(t,i){if(t==="*/*")return i.length>0;if(i.includes(t))return!0;const e=t.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!e)return!1;const[s,n,o]=e;return o==="*"&&i.some((t=>t.startsWith(n+"/")))}const GZ=Object.freeze({create:t=>w(t.map((t=>t.toString()))).join(`\r\n`),split:t=>t.split(`\r\n`),parse:t=>GZ.split(t).filter((t=>!t.startsWith("#")))});class KZ{constructor(t){this.value=t}equals(t){return this.value===t.value}contains(t){return this.equals(t)||this.value===""||t.value.startsWith(this.value+KZ.sep)}intersects(t){return this.contains(t)||t.contains(this)}append(...t){return new KZ((this.value?[this.value,...t]:t).join(KZ.sep))}}KZ.sep=".",KZ.None=new KZ("@@none@@"),KZ.Empty=new KZ("");const $Z="CodeEditors",XZ="CodeFiles";Vl.add("workbench.contributions.dragAndDrop",new class{});class qZ{constructor(){}static getInstance(){return qZ.INSTANCE}hasData(t){return t&&t===this.proto}getData(t){if(this.hasData(t))return this.data}}function ZZ(t){const i=new YZ;for(const e of t.items){const t=e.type;if(e.kind==="string"){const s=new Promise((t=>e.getAsString(t)));i.append(t,WZ(s))}else if(e.kind==="file"){const s=e.getAsFile();s&&i.append(t,t0(s))}}return i}function t0(t){const i=t.path?fs.parse(t.path):void 0;return function(t,i,e){const s={id:jZ(),name:t,uri:i,data:e};return{asString:async()=>"",asFile:()=>s,value:void 0}}(t.name,i,(async()=>new Uint8Array(await t.arrayBuffer())))}qZ.INSTANCE=new qZ;const i0=Object.freeze([$Z,XZ,oz.RESOURCES,oz.INTERNAL_URI_LIST]);function e0(t,i=!1){const e=ZZ(t),s=e.get(oz.INTERNAL_URI_LIST);if(s)e.replace(jd.uriList,s);else if(i||!e.has(jd.uriList)){const i=[];for(const e of t.items){const t=e.getAsFile();if(t){const e=t.path;try{e?i.push(fs.file(e).toString()):i.push(fs.parse(t.name,!0).toString())}catch{}}}i.length&&e.replace(jd.uriList,WZ(GZ.create(i)))}for(const t of i0)e.delete(t);return e}var s0=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},n0=function(t,i){return function(e,s){i(e,s,t)}};class o0{async provideDocumentPasteEdits(t,i,e,s,n){const o=await this.getEdit(e,n);if(o)return{dispose(){},edits:[{insertText:o.insertText,title:o.title,kind:o.kind,handledMimeType:o.handledMimeType,yieldTo:o.yieldTo}]}}async provideDocumentOnDropEdits(t,i,e,s){const n=await this.getEdit(e,s);return n?[{insertText:n.insertText,title:n.title,kind:n.kind,handledMimeType:n.handledMimeType,yieldTo:n.yieldTo}]:void 0}}class r0 extends o0{constructor(){super(...arguments),this.kind=r0.kind,this.dropMimeTypes=[jd.text],this.pasteMimeTypes=[jd.text]}async getEdit(t,i){const e=t.get(jd.text);if(!e||t.has(jd.uriList))return;const s=await e.asString();return{handledMimeType:jd.text,title:st(0,"Insert Plain Text"),insertText:s,kind:this.kind}}}r0.id="text",r0.kind=new KZ("text.plain");class h0 extends o0{constructor(){super(...arguments),this.kind=new KZ("uri.absolute"),this.dropMimeTypes=[jd.uriList],this.pasteMimeTypes=[jd.uriList]}async getEdit(t,i){const e=await l0(t);if(!e.length||i.isCancellationRequested)return;let s=0;const n=e.map((({uri:t,originalText:i})=>t.scheme===Lh.file?t.fsPath:(s++,i))).join(" ");let o;return o=s>0?e.length>1?st(0,"Insert Uris"):st(0,"Insert Uri"):e.length>1?st(0,"Insert Paths"):st(0,"Insert Path"),{handledMimeType:jd.uriList,insertText:n,title:o,kind:this.kind}}}let c0=class extends o0{constructor(t){super(),this._workspaceContextService=t,this.kind=new KZ("uri.relative"),this.dropMimeTypes=[jd.uriList],this.pasteMimeTypes=[jd.uriList]}async getEdit(t,i){const e=await l0(t);if(!e.length||i.isCancellationRequested)return;const s=f(e.map((({uri:t})=>{const i=this._workspaceContextService.getWorkspaceFolder(t);return i?IM(i.uri,t):void 0})));return s.length?{handledMimeType:jd.uriList,insertText:s.join(" "),title:e.length>1?st(0,"Insert Relative Paths"):st(0,"Insert Relative Path"),kind:this.kind}:void 0}};c0=s0([n0(0,FO)],c0);class a0{constructor(){this.kind=new KZ("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:jd.text}]}async provideDocumentPasteEdits(t,i,e,s,n){var o;if(s.triggerKind!==Os.PasteAs&&!(!((o=s.only)===null||o===void 0)&&o.contains(this.kind)))return;const r=e.get("text/html"),h=await(r==null?void 0:r.asString());return h&&!n.isCancellationRequested?{dispose(){},edits:[{insertText:h,yieldTo:this._yieldTo,title:st(0,"Insert HTML"),kind:this.kind}]}:void 0}}async function l0(t){const i=t.get(jd.uriList);if(!i)return[];const e=await i.asString(),s=[];for(const t of GZ.parse(e))try{s.push({uri:fs.parse(t),originalText:t})}catch{}return s}let u0=class extends te{constructor(t,i){super(),this._register(t.documentOnDropEditProvider.register("*",new r0)),this._register(t.documentOnDropEditProvider.register("*",new h0)),this._register(t.documentOnDropEditProvider.register("*",new c0(i)))}};u0=s0([n0(0,jA),n0(1,FO)],u0);let d0=class extends te{constructor(t,i){super(),this._register(t.documentPasteEditProvider.register("*",new r0)),this._register(t.documentPasteEditProvider.register("*",new h0)),this._register(t.documentPasteEditProvider.register("*",new c0(i))),this._register(t.documentPasteEditProvider.register("*",new a0))}};d0=s0([n0(0,jA),n0(1,FO)],d0);class f0{constructor(){this.value="",this.pos=0}static isDigitCharacter(t){return t>=48&&t<=57}static isVariableCharacter(t){return t===95||t>=97&&t<=122||t>=65&&t<=90}text(t){this.value=t,this.pos=0}tokenText(t){return this.value.substr(t.pos,t.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const t=this.pos;let i,e=0,s=this.value.charCodeAt(t);if(i=f0._table[s],typeof i=="number")return this.pos+=1,{type:i,pos:t,len:1};if(f0.isDigitCharacter(s)){i=8;do{e+=1,s=this.value.charCodeAt(t+e)}while(f0.isDigitCharacter(s));return this.pos+=e,{type:i,pos:t,len:e}}if(f0.isVariableCharacter(s)){i=9;do{s=this.value.charCodeAt(t+ ++e)}while(f0.isVariableCharacter(s)||f0.isDigitCharacter(s));return this.pos+=e,{type:i,pos:t,len:e}}i=10;do{e+=1,s=this.value.charCodeAt(t+e)}while(!isNaN(s)&&f0._table[s]===void 0&&!f0.isDigitCharacter(s)&&!f0.isVariableCharacter(s));return this.pos+=e,{type:i,pos:t,len:e}}}f0._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};class g0{constructor(){this._children=[]}appendChild(t){return t instanceof A0&&this._children[this._children.length-1]instanceof A0?this._children[this._children.length-1].value+=t.value:(t.parent=this,this._children.push(t)),this}replace(t,i){const{parent:e}=t,s=e.children.indexOf(t),n=e.children.slice(0);n.splice(s,1,...i),e._children=n,function t(i,e){for(const s of i)s.parent=e,t(s.children,s)}(i,e)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let t=this;for(;;){if(!t)return;if(t instanceof x0)return t;t=t.parent}}toString(){return this.children.reduce(((t,i)=>t+i.toString()),"")}len(){return 0}}class A0 extends g0{constructor(t){super(),this.value=t}toString(){return this.value}len(){return this.value.length}clone(){return new A0(this.value)}}class p0 extends g0{}class w0 extends p0{static compareByIndex(t,i){return t.index===i.index?0:t.isFinalTabstop?1:i.isFinalTabstop||t.index<i.index?-1:t.index>i.index?1:0}constructor(t){super(),this.index=t}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof m0?this._children[0]:void 0}clone(){const t=new w0(this.index);return this.transform&&(t.transform=this.transform.clone()),t._children=this.children.map((t=>t.clone())),t}}class m0 extends g0{constructor(){super(...arguments),this.options=[]}appendChild(t){return t instanceof A0&&(t.parent=this,this.options.push(t)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const t=new m0;return this.options.forEach(t.appendChild,t),t}}class v0 extends g0{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(t){const i=this;let e=!1,s=t.replace(this.regexp,(function(){return e=!0,i._replace(Array.prototype.slice.call(arguments,0,-2))}));return!e&&this._children.some((t=>t instanceof b0&&!!t.elseValue))&&(s=this._replace([])),s}_replace(t){let i="";for(const e of this._children)if(e instanceof b0){let s=t[e.index]||"";s=e.resolve(s),i+=s}else i+=e.toString();return i}toString(){return""}clone(){const t=new v0;return t.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),t._children=this.children.map((t=>t.clone())),t}}class b0 extends g0{constructor(t,i,e,s){super(),this.index=t,this.shorthandName=i,this.ifValue=e,this.elseValue=s}resolve(t){return this.shorthandName==="upcase"?t?t.toLocaleUpperCase():"":this.shorthandName==="downcase"?t?t.toLocaleLowerCase():"":this.shorthandName==="capitalize"?t?t[0].toLocaleUpperCase()+t.substr(1):"":this.shorthandName==="pascalcase"?t?this._toPascalCase(t):"":this.shorthandName==="camelcase"?t?this._toCamelCase(t):"":t&&typeof this.ifValue=="string"?this.ifValue:t||typeof this.elseValue!="string"?t||"":this.elseValue}_toPascalCase(t){const i=t.match(/[a-z0-9]+/gi);return i?i.map((t=>t.charAt(0).toUpperCase()+t.substr(1))).join(""):t}_toCamelCase(t){const i=t.match(/[a-z0-9]+/gi);return i?i.map(((t,i)=>i===0?t.charAt(0).toLowerCase()+t.substr(1):t.charAt(0).toUpperCase()+t.substr(1))).join(""):t}clone(){return new b0(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class y0 extends p0{constructor(t){super(),this.name=t}resolve(t){let i=t.resolve(this);return this.transform&&(i=this.transform.resolve(i||"")),i!==void 0&&(this._children=[new A0(i)],!0)}clone(){const t=new y0(this.name);return this.transform&&(t.transform=this.transform.clone()),t._children=this.children.map((t=>t.clone())),t}}function k0(t,i){const e=[...t];for(;e.length>0;){const t=e.shift();if(!i(t))break;e.unshift(...t.children)}}class x0 extends g0{get placeholderInfo(){if(!this._placeholders){const t=[];let i;this.walk((function(e){return e instanceof w0&&(t.push(e),i=!i||i.index<e.index?e:i),!0})),this._placeholders={all:t,last:i}}return this._placeholders}get placeholders(){const{all:t}=this.placeholderInfo;return t}offset(t){let i=0,e=!1;return this.walk((s=>s===t?(e=!0,!1):(i+=s.len(),!0))),e?i:-1}fullLen(t){let i=0;return k0([t],(t=>(i+=t.len(),!0))),i}enclosingPlaceholders(t){const i=[];let{parent:e}=t;for(;e;)e instanceof w0&&i.push(e),e=e.parent;return i}resolveVariables(t){return this.walk((i=>(i instanceof y0&&i.resolve(t)&&(this._placeholders=void 0),!0))),this}appendChild(t){return this._placeholders=void 0,super.appendChild(t)}replace(t,i){return this._placeholders=void 0,super.replace(t,i)}clone(){const t=new x0;return this._children=this.children.map((t=>t.clone())),t}walk(t){k0(this.children,t)}}class C0{constructor(){this._scanner=new f0,this._token={type:14,pos:0,len:0}}static escape(t){return t.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(t){return/\${?CLIPBOARD/.test(t)}parse(t,i,e){const s=new x0;return this.parseFragment(t,s),this.ensureFinalTabstop(s,e!=null&&e,i!=null&&i),s}parseFragment(t,i){const e=i.children.length;for(this._scanner.text(t),this._token=this._scanner.next();this._parse(i););const s=new Map,n=[];i.walk((t=>(t instanceof w0&&(t.isFinalTabstop?s.set(0,void 0):!s.has(t.index)&&t.children.length>0?s.set(t.index,t.children):n.push(t)),!0)));const o=(t,e)=>{const n=s.get(t.index);if(!n)return;const r=new w0(t.index);r.transform=t.transform;for(const t of n){const i=t.clone();r.appendChild(i),i instanceof w0&&s.has(i.index)&&!e.has(i.index)&&(e.add(i.index),o(i,e),e.delete(i.index))}i.replace(t,[r])},r=new Set;for(const t of n)o(t,r);return i.children.slice(e)}ensureFinalTabstop(t,i,e){(i||e&&t.placeholders.length>0)&&(t.placeholders.find((t=>t.index===0))||t.appendChild(new w0(0)))}_accept(t,i){if(t===void 0||this._token.type===t){const t=!i||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),t}return!1}_backTo(t){return this._scanner.pos=t.pos+t.len,this._token=t,!1}_until(t){const i=this._token;for(;this._token.type!==t;){if(this._token.type===14)return!1;if(this._token.type===5){const t=this._scanner.next();if(t.type!==0&&t.type!==4&&t.type!==5)return!1}this._token=this._scanner.next()}const e=this._scanner.value.substring(i.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),e}_parse(t){return this._parseEscaped(t)||this._parseTabstopOrVariableName(t)||this._parseComplexPlaceholder(t)||this._parseComplexVariable(t)||this._parseAnything(t)}_parseEscaped(t){let i;return!!(i=this._accept(5,!0))&&(i=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||i,t.appendChild(new A0(i)),!0)}_parseTabstopOrVariableName(t){let i;const e=this._token;return this._accept(0)&&(i=this._accept(9,!0)||this._accept(8,!0))?(t.appendChild(/^\d+$/.test(i)?new w0(Number(i)):new y0(i)),!0):this._backTo(e)}_parseComplexPlaceholder(t){let i;const e=this._token;if(!(this._accept(0)&&this._accept(3)&&(i=this._accept(8,!0))))return this._backTo(e);const s=new w0(Number(i));if(this._accept(1))for(;;){if(this._accept(4))return t.appendChild(s),!0;if(!this._parse(s))return t.appendChild(new A0("${"+i+":")),s.children.forEach(t.appendChild,t),!0}else{if(!(s.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(s)?(t.appendChild(s),!0):(this._backTo(e),!1):this._accept(4)?(t.appendChild(s),!0):this._backTo(e);{const i=new m0;for(;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(s.appendChild(i),this._accept(4)))return t.appendChild(s),!0}return this._backTo(e),!1}}}}_parseChoiceElement(t){const i=this._token,e=[];for(;this._token.type!==2&&this._token.type!==7;){let t;if(t=(t=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||t:this._accept(void 0,!0),!t)return this._backTo(i),!1;e.push(t)}return e.length===0?(this._backTo(i),!1):(t.appendChild(new A0(e.join(""))),!0)}_parseComplexVariable(t){let i;const e=this._token;if(!(this._accept(0)&&this._accept(3)&&(i=this._accept(9,!0))))return this._backTo(e);const s=new y0(i);if(!this._accept(1))return this._accept(6)?this._parseTransform(s)?(t.appendChild(s),!0):(this._backTo(e),!1):this._accept(4)?(t.appendChild(s),!0):this._backTo(e);for(;;){if(this._accept(4))return t.appendChild(s),!0;if(!this._parse(s))return t.appendChild(new A0("${"+i+":")),s.children.forEach(t.appendChild,t),!0}}_parseTransform(t){const i=new v0;let e="",s="";for(;!this._accept(6);){let t;if(t=this._accept(5,!0))t=this._accept(6,!0)||t,e+=t;else{if(this._token.type===14)return!1;e+=this._accept(void 0,!0)}}for(;!this._accept(6);){let t;if(t=this._accept(5,!0))t=this._accept(5,!0)||this._accept(6,!0)||t,i.appendChild(new A0(t));else if(!this._parseFormatString(i)&&!this._parseAnything(i))return!1}for(;!this._accept(4);){if(this._token.type===14)return!1;s+=this._accept(void 0,!0)}try{i.regexp=new RegExp(e,s)}catch{return!1}return t.transform=i,!0}_parseFormatString(t){const i=this._token;if(!this._accept(0))return!1;let e=!1;this._accept(3)&&(e=!0);const s=this._accept(8,!0);if(!s)return this._backTo(i),!1;if(!e)return t.appendChild(new b0(Number(s))),!0;if(this._accept(4))return t.appendChild(new b0(Number(s))),!0;if(!this._accept(1))return this._backTo(i),!1;if(this._accept(6)){const e=this._accept(9,!0);return e&&this._accept(4)?(t.appendChild(new b0(Number(s),e)),!0):(this._backTo(i),!1)}if(this._accept(11)){const i=this._until(4);if(i)return t.appendChild(new b0(Number(s),void 0,i,void 0)),!0}else if(this._accept(12)){const i=this._until(4);if(i)return t.appendChild(new b0(Number(s),void 0,void 0,i)),!0}else if(this._accept(13)){const i=this._until(1);if(i){const e=this._until(4);if(e)return t.appendChild(new b0(Number(s),void 0,i,e)),!0}}else{const i=this._until(4);if(i)return t.appendChild(new b0(Number(s),void 0,void 0,i)),!0}return this._backTo(i),!1}_parseAnything(t){return this._token.type!==14&&(t.appendChild(new A0(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}function E0(t,i,e){var s,n,o,r;return(typeof e.insertText=="string"?e.insertText==="":e.insertText.snippet==="")?{edits:(n=(s=e.additionalEdit)===null||s===void 0?void 0:s.edits)!==null&&n!==void 0?n:[]}:{edits:[...i.map((i=>new PQ(t,{range:i,text:typeof e.insertText=="string"?C0.escape(e.insertText)+"$0":e.insertText.snippet,insertAsSnippet:!0}))),...(r=(o=e.additionalEdit)===null||o===void 0?void 0:o.edits)!==null&&r!==void 0?r:[]]}}function B0(t){var i;function e(t,i){return"mimeType"in t?t.mimeType===i.handledMimeType:!!i.kind&&t.kind.contains(i.kind)}const s=new Map;for(const n of t)for(const o of(i=n.yieldTo)!==null&&i!==void 0?i:[])for(const i of t)if(i!==n&&e(o,i)){let t=s.get(n);t||(t=[],s.set(n,t)),t.push(i)}if(!s.size)return Array.from(t);const n=new Set,o=[];return function t(i){if(!i.length)return[];const e=i[0];if(o.includes(e))return console.warn("Yield to cycle detected",e),i;if(n.has(e))return t(i.slice(1));let r=[];const h=s.get(e);return h&&(o.push(e),r=t(h),o.pop()),n.add(e),[...r,e,...t(i.slice(1))]}(Array.from(t))}var D0=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},M0=function(t,i){return function(e,s){i(e,s,t)}};const S0=DF.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:" ",inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});class F0 extends te{constructor(t,i,e,s,n){super(),this.typeId=t,this.editor=i,this.range=e,this.delegate=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(s),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(t){this.domNode=ha(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=t;const i=ha("span.icon");this.domNode.append(i),i.classList.add(...Ka.asClassNameArray(Fs.loading),"codicon-modifier-spin");const e=()=>{const t=this.editor.getOption(67);this.domNode.style.height=`${t}px`,this.domNode.style.width=`${Math.ceil(.8*t)}px`};e(),this._register(this.editor.onDidChangeConfiguration((t=>{(t.hasChanged(52)||t.hasChanged(67))&&e()}))),this._register(rc(this.domNode,$c.CLICK,(t=>{this.delegate.cancel()})))}getId(){return F0.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}}F0.baseId="editor.widget.inlineProgressWidget";let I0=class extends te{constructor(t,i,e){super(),this.id=t,this._editor=i,this._instantiationService=e,this._showDelay=500,this._showPromise=this._register(new ie),this._currentWidget=new ie,this._operationIdPool=0,this._currentDecorations=i.createDecorationsCollection()}async showWhile(t,i,e){const s=this._operationIdPool++;this._currentOperation=s,this.clear(),this._showPromise.value=yr((()=>{const s=Es.fromPositions(t);this._currentDecorations.set([{range:s,options:S0}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(F0,this.id,this._editor,s,i,e))}),this._showDelay);try{return await e}finally{this._currentOperation===s&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};I0=D0([M0(2,Oa)],I0);var L0,R0=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},T0=function(t,i){return function(e,s){i(e,s,t)}};let N0=L0=class{static get(t){return t.getContribution(L0.ID)}constructor(t,i,e){this._openerService=e,this._messageWidget=new ie,this._messageListeners=new Zi,this._mouseOverMessage=!1,this._editor=t,this._visible=L0.MESSAGE_VISIBLE.bindTo(i)}dispose(){var t;(t=this._message)===null||t===void 0||t.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(t,i){let e;cw(NN(t)?t.value:t),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=NN(t)?VN(t,{actionHandler:{callback:i=>{this.closeMessage(),wQ(this._openerService,i,NN(t)?t.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new Q0(this._editor,i,typeof t=="string"?t:this._message.element),this._messageListeners.add(he.debounce(this._editor.onDidBlurEditorText,((t,i)=>i),0)((()=>{this._mouseOverMessage||this._messageWidget.value&&Dc(Lc(),this._messageWidget.value.getDomNode())||this.closeMessage()}))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidDispose((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeModel((()=>this.closeMessage()))),this._messageListeners.add(rc(this._messageWidget.value.getDomNode(),$c.MOUSE_ENTER,(()=>this._mouseOverMessage=!0),!0)),this._messageListeners.add(rc(this._messageWidget.value.getDomNode(),$c.MOUSE_LEAVE,(()=>this._mouseOverMessage=!1),!0)),this._messageListeners.add(this._editor.onMouseMove((t=>{t.target.position&&(e?e.containsPosition(t.target.position)||this.closeMessage():e=new Es(i.lineNumber-3,1,t.target.position.lineNumber+3,1))})))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(Q0.fadeOut(this._messageWidget.value))}};N0.ID="editor.contrib.messageController",N0.MESSAGE_VISIBLE=new Tl("messageVisible",!1,st(0,"Whether the editor is currently showing an inline message")),N0=L0=R0([T0(1,Nl),T0(2,gT)],N0);xu(new(mu.bindToContribution(N0.get))({id:"leaveEditorMessage",precondition:N0.MESSAGE_VISIBLE,handler:t=>t.closeMessage(),kbOpts:{weight:130,primary:9}}));let Q0=class{static fadeOut(t){const i=()=>{t.dispose(),clearTimeout(e),t.getDomNode().removeEventListener("animationend",i)},e=setTimeout(i,110);return t.getDomNode().addEventListener("animationend",i),t.getDomNode().classList.add("fadeOut"),{dispose:i}}constructor(t,{lineNumber:i,column:e},s){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=t,this._editor.revealLinesInCenterIfOutsideViewport(i,i,0),this._position={lineNumber:i,column:e},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const n=document.createElement("div");n.classList.add("anchor","top"),this._domNode.appendChild(n);const o=document.createElement("div");typeof s=="string"?(o.classList.add("message"),o.textContent=s):(s.classList.add("message"),o.appendChild(s)),this._domNode.appendChild(o);const r=document.createElement("div");r.classList.add("anchor","below"),this._domNode.appendChild(r),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(t){this._domNode.classList.toggle("below",t===2)}};Bu(N0.ID,N0,4);var O0,z0=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},U0=function(t,i){return function(e,s){i(e,s,t)}};let H0=O0=class extends te{constructor(t,i,e,s,n,o,r,h,c,a){super(),this.typeId=t,this.editor=i,this.showCommand=s,this.range=n,this.edits=o,this.onSelectNewEdit=r,this._contextMenuService=h,this._keybindingService=a,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=e.bindTo(c),this.visibleContext.set(!0),this._register(qi((()=>this.visibleContext.reset()))),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(qi((()=>this.editor.removeContentWidget(this)))),this._register(this.editor.onDidChangeCursorPosition((t=>{n.containsPosition(t.position)||this.dispose()}))),this._register(he.runAndSubscribe(a.onDidUpdateKeybindings,(()=>{this._updateButtonTitle()})))}_updateButtonTitle(){var t;const i=(t=this._keybindingService.lookupKeybinding(this.showCommand.id))===null||t===void 0?void 0:t.getLabel();this.button.element.title=this.showCommand.label+(i?` (${i})`:"")}create(){this.domNode=ha(".post-edit-widget"),this.button=this._register(new f_(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(rc(this.domNode,$c.CLICK,(()=>this.showSelector())))}getId(){return O0.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const t=yc(this.button.element);return{x:t.left+t.width,y:t.top+t.height}},getActions:()=>this.edits.allEdits.map(((t,i)=>Ja({id:"",label:t.title,checked:i===this.edits.activeEditIndex,run:()=>{if(i!==this.edits.activeEditIndex)return this.onSelectNewEdit(i)}})))})}};H0.baseId="editor.widget.postEditWidget",H0=O0=z0([U0(7,aT),U0(8,Nl),U0(9,Hx)],H0);let P0=class extends te{constructor(t,i,e,s,n,o){super(),this._id=t,this._editor=i,this._visibleContext=e,this._showCommand=s,this._instantiationService=n,this._bulkEditService=o,this._currentWidget=this._register(new ie),this._register(he.any(i.onDidChangeModel,i.onDidChangeModelContent)((()=>this.clear())))}async applyEditAndShowIfNeeded(t,i,e,s,n){const o=this._editor.getModel();if(!o||!t.length)return;const r=i.allEdits.at(i.activeEditIndex);if(!r)return;const h=await s(r,n),c=E0(o.uri,t,h),a=t[0],l=o.deltaDecorations([],[{range:a,options:{description:"paste-line-suffix",stickiness:0}}]);let u,d;try{u=await this._bulkEditService.apply(c,{editor:this._editor,token:n}),d=o.getDecorationRange(l[0])}finally{o.deltaDecorations(l,[])}e&&u.isApplied&&i.allEdits.length>1&&this.show(d??a,i,(async o=>{const r=this._editor.getModel();r&&(await r.undo(),this.applyEditAndShowIfNeeded(t,{activeEditIndex:o,allEdits:i.allEdits},e,s,n))}))}show(t,i,e){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(H0,this._id,this._editor,this._visibleContext,this._showCommand,t,i,e))}clear(){this._currentWidget.clear()}tryShowSelector(){var t;(t=this._currentWidget.value)===null||t===void 0||t.showSelector()}};P0=z0([U0(4,Oa),U0(5,UQ)],P0);var j0,W0=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Y0=function(t,i){return function(e,s){i(e,s,t)}};const _0="editor.changePasteType",V0=new Tl("pasteWidgetVisible",!1,st(0,"Whether the paste widget is showing")),J0="application/vnd.code.copyMetadata";let G0=j0=class extends te{static get(t){return t.getContribution(j0.ID)}constructor(t,i,e,s,n,o,r){super(),this._bulkEditService=e,this._clipboardService=s,this._languageFeaturesService=n,this._quickInputService=o,this._progressService=r,this._editor=t;const h=t.getContainerDomNode();this._register(rc(h,"copy",(t=>this.handleCopy(t)))),this._register(rc(h,"cut",(t=>this.handleCopy(t)))),this._register(rc(h,"paste",(t=>this.handlePaste(t)),!0)),this._pasteProgressManager=this._register(new I0("pasteIntoEditor",t,i)),this._postPasteWidgetManager=this._register(i.createInstance(P0,"pasteIntoEditor",t,V0,{id:_0,label:st(0,"Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(t){this._editor.focus();try{this._pasteAsActionContext={preferred:t},Nc().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled&&!this._editor.getOption(91)}async finishedPaste(){await this._currentPasteOperation}handleCopy(t){var i,e;if(!this._editor.hasTextFocus()||(Et&&this._clipboardService.writeResources([]),!t.clipboardData||!this.isPasteAsEnabled()))return;const s=this._editor.getModel(),n=this._editor.getSelections();if(!s||!(n!=null&&n.length))return;const o=this._editor.getOption(37);let r=n;const h=n.length===1&&n[0].isEmpty();if(h){if(!o)return;r=[new Es(r[0].startLineNumber,1,r[0].startLineNumber,1+s.getLineLength(r[0].startLineNumber))]}const c=(i=this._editor._getViewModel())===null||i===void 0?void 0:i.getPlainTextToCopy(n,o,yt),a={multicursorText:Array.isArray(c)?c:null,pasteOnNewLine:h,mode:null},l=this._languageFeaturesService.documentPasteEditProvider.ordered(s).filter((t=>!!t.prepareDocumentPaste));if(!l.length)return void this.setCopyMetadata(t.clipboardData,{defaultPastePayload:a});const u=ZZ(t.clipboardData),d=l.flatMap((t=>{var i;return(i=t.copyMimeTypes)!==null&&i!==void 0?i:[]})),g=jZ();this.setCopyMetadata(t.clipboardData,{id:g,providerCopyMimeTypes:d,defaultPastePayload:a});const A=Ar((async t=>{const i=f(await Promise.all(l.map((async i=>{try{return await i.prepareDocumentPaste(s,r,u,t)}catch(t){return void console.error(t)}}))));i.reverse();for(const t of i)for(const[i,e]of t)u.replace(i,e);return u}));(e=j0._currentCopyOperation)===null||e===void 0||e.dataTransferPromise.cancel(),j0._currentCopyOperation={handle:g,dataTransferPromise:A}}async handlePaste(t){var i,e,s,n;if(!t.clipboardData||!this._editor.hasTextFocus())return;(i=N0.get(this._editor))===null||i===void 0||i.closeMessage(),(e=this._currentPasteOperation)===null||e===void 0||e.cancel(),this._currentPasteOperation=void 0;const o=this._editor.getModel(),r=this._editor.getSelections();if(!(r!=null&&r.length)||!o||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;const h=this.fetchCopyMetadata(t),c=e0(t.clipboardData);c.delete(J0);const a=[...t.clipboardData.types,...(s=h==null?void 0:h.providerCopyMimeTypes)!==null&&s!==void 0?s:[],jd.uriList],l=this._languageFeaturesService.documentPasteEditProvider.ordered(o).filter((t=>{var i,e;const s=(i=this._pasteAsActionContext)===null||i===void 0?void 0:i.preferred;return!(s&&t.providedPasteEditKinds&&!this.providerMatchesPreference(t,s))&&((e=t.pasteMimeTypes)===null||e===void 0?void 0:e.some((t=>VZ(t,a))))}));l.length?(t.preventDefault(),t.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,l,r,c,h):this.doPasteInline(l,r,c,h,t)):!((n=this._pasteAsActionContext)===null||n===void 0)&&n.preferred&&this.showPasteAsNoEditMessage(r,this._pasteAsActionContext.preferred)}showPasteAsNoEditMessage(t,i){var e;(e=N0.get(this._editor))===null||e===void 0||e.showMessage(st(0,"No paste edits for '{0}' found",i instanceof KZ?i.value:i.providerId),t[0].getStartPosition())}doPasteInline(t,i,e,s,n){const o=Ar((async r=>{const h=this._editor;if(!h.hasModel())return;const c=h.getModel(),a=new UX(h,3,void 0,r);try{if(await this.mergeInDataFromCopy(e,s,a.token),a.token.isCancellationRequested)return;const o=t.filter((t=>this.isSupportedPasteProvider(t,e)));if(!o.length||o.length===1&&o[0]instanceof r0)return this.applyDefaultPasteHandler(e,s,a.token,n);const r={triggerKind:Os.Automatic},l=await this.getPasteEdits(o,e,c,i,r,a.token);if(a.token.isCancellationRequested)return;if(l.length===1&&l[0].provider instanceof r0)return this.applyDefaultPasteHandler(e,s,a.token,n);if(l.length){const t=h.getOption(85).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(i,{activeEditIndex:0,allEdits:l},t,(async(t,i)=>{var e,s;const n=await((s=(e=t.provider).resolveDocumentPasteEdit)===null||s===void 0?void 0:s.call(e,t,i));return n&&(t.additionalEdit=n.additionalEdit),t}),a.token)}await this.applyDefaultPasteHandler(e,s,a.token,n)}finally{a.dispose(),this._currentPasteOperation===o&&(this._currentPasteOperation=void 0)}}));this._pasteProgressManager.showWhile(i[0].getEndPosition(),st(0,"Running paste handlers. Click to cancel"),o),this._currentPasteOperation=o}showPasteAsPick(t,i,e,s,n){const o=Ar((async r=>{const h=this._editor;if(!h.hasModel())return;const c=h.getModel(),a=new UX(h,3,void 0,r);try{if(await this.mergeInDataFromCopy(s,n,a.token),a.token.isCancellationRequested)return;let o=i.filter((i=>this.isSupportedPasteProvider(i,s,t)));t&&(o=o.filter((i=>this.providerMatchesPreference(i,t))));const r={triggerKind:Os.PasteAs,only:t&&t instanceof KZ?t:void 0};let h,l=await this.getPasteEdits(o,s,c,e,r,a.token);if(a.token.isCancellationRequested)return;if(t&&(l=l.filter((i=>t instanceof KZ?t.contains(i.kind):t.providerId===i.provider.id))),!l.length)return void(r.only&&this.showPasteAsNoEditMessage(e,r.only));if(t)h=l.at(0);else{const t=await this._quickInputService.pick(l.map((t=>{var i;return{label:t.title,description:(i=t.kind)===null||i===void 0?void 0:i.value,edit:t}})),{placeHolder:st(0,"Select Paste Action")});h=t==null?void 0:t.edit}if(!h)return;const u=E0(c.uri,e,h);await this._bulkEditService.apply(u,{editor:this._editor})}finally{a.dispose(),this._currentPasteOperation===o&&(this._currentPasteOperation=void 0)}}));this._progressService.withProgress({location:10,title:st(0,"Running paste handlers")},(()=>o))}setCopyMetadata(t,i){t.setData(J0,JSON.stringify(i))}fetchCopyMetadata(t){var i;if(!t.clipboardData)return;const e=t.clipboardData.getData(J0);if(e)try{return JSON.parse(e)}catch{return}const[s,n]=Ck.getTextData(t.clipboardData);return n?{defaultPastePayload:{mode:n.mode,multicursorText:(i=n.multicursorText)!==null&&i!==void 0?i:null,pasteOnNewLine:!!n.isFromEmptySelection}}:void 0}async mergeInDataFromCopy(t,i,e){var s;if(i!=null&&i.id&&((s=j0._currentCopyOperation)===null||s===void 0?void 0:s.handle)===i.id){const i=await j0._currentCopyOperation.dataTransferPromise;if(e.isCancellationRequested)return;for(const[e,s]of i)t.replace(e,s)}if(!t.has(jd.uriList)){const i=await this._clipboardService.readResources();if(e.isCancellationRequested)return;i.length&&t.append(jd.uriList,WZ(GZ.create(i)))}}async getPasteEdits(t,i,e,s,n,o){const r=await pr(Promise.all(t.map((async t=>{var r,h;try{const c=await((r=t.provideDocumentPasteEdits)===null||r===void 0?void 0:r.call(t,e,s,i,n,o));return(h=c==null?void 0:c.edits)===null||h===void 0?void 0:h.map((i=>({...i,provider:t})))}catch(t){console.error(t)}}))),o);return B0(f(r??[]).flat().filter((t=>!n.only||n.only.contains(t.kind))))}async applyDefaultPasteHandler(t,i,e,s){var n,o,r,h;const c=(n=t.get(jd.text))!==null&&n!==void 0?n:t.get("text"),a=(o=await(c==null?void 0:c.asString()))!==null&&o!==void 0?o:"";if(e.isCancellationRequested)return;const l={clipboardEvent:s,text:a,pasteOnNewLine:(r=i==null?void 0:i.defaultPastePayload.pasteOnNewLine)!==null&&r!==void 0&&r,multicursorText:(h=i==null?void 0:i.defaultPastePayload.multicursorText)!==null&&h!==void 0?h:null,mode:null};this._editor.trigger("keyboard","paste",l)}isSupportedPasteProvider(t,i,e){var s;return!!(!((s=t.pasteMimeTypes)===null||s===void 0)&&s.some((t=>i.matches(t))))&&(!e||this.providerMatchesPreference(t,e))}providerMatchesPreference(t,i){return i instanceof KZ?!t.providedPasteEditKinds||t.providedPasteEditKinds.some((t=>i.contains(t))):t.id===i.providerId}};G0.ID="editor.contrib.copyPasteActionController",G0=j0=W0([Y0(1,Oa),Y0(2,UQ),Y0(3,IV),Y0(4,jA),Y0(5,kP),Y0(6,yO)],G0);const K0="9_cutcopypaste",$0=Ct||document.queryCommandSupported("cut"),X0=Ct||document.queryCommandSupported("copy"),q0=navigator.clipboard!==void 0&&!Vo||document.queryCommandSupported("paste");function Z0(t){return t.register(),t}const t1=$0?Z0(new pu({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Ct?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:tu.MenubarEditMenu,group:"2_ccp",title:st(0,"Cu&&t"),order:1},{menuId:tu.EditorContext,group:K0,title:st(0,"Cut"),when:QC.writable,order:1},{menuId:tu.CommandPalette,group:"",title:st(0,"Cut"),order:1},{menuId:tu.SimpleEditorContext,group:K0,title:st(0,"Cut"),when:QC.writable,order:1}]})):void 0,i1=X0?Z0(new pu({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Ct?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:tu.MenubarEditMenu,group:"2_ccp",title:st(0,"&&Copy"),order:2},{menuId:tu.EditorContext,group:K0,title:st(0,"Copy"),order:2},{menuId:tu.CommandPalette,group:"",title:st(0,"Copy"),order:1},{menuId:tu.SimpleEditorContext,group:K0,title:st(0,"Copy"),order:2}]})):void 0;su.appendMenuItem(tu.MenubarEditMenu,{submenu:tu.MenubarCopy,title:nt(0,"Copy As"),group:"2_ccp",order:3}),su.appendMenuItem(tu.EditorContext,{submenu:tu.EditorContextCopy,title:nt(0,"Copy As"),group:K0,order:3}),su.appendMenuItem(tu.EditorContext,{submenu:tu.EditorContextShare,title:nt(0,"Share"),group:"11_share",order:-1,when:gl.and(gl.notEquals("resourceScheme","output"),QC.editorTextFocus)}),su.appendMenuItem(tu.EditorTitleContext,{submenu:tu.EditorTitleContextShare,title:nt(0,"Share"),group:"11_share",order:-1}),su.appendMenuItem(tu.ExplorerContext,{submenu:tu.ExplorerContextShare,title:nt(0,"Share"),group:"11_share",order:-1});const e1=q0?Z0(new pu({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Ct?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:tu.MenubarEditMenu,group:"2_ccp",title:st(0,"&&Paste"),order:4},{menuId:tu.EditorContext,group:K0,title:st(0,"Paste"),when:QC.writable,order:4},{menuId:tu.CommandPalette,group:"",title:st(0,"Paste"),order:1},{menuId:tu.SimpleEditorContext,group:K0,title:st(0,"Paste"),when:QC.writable,order:4}]})):void 0;class s1 extends vu{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:st(0,"Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:QC.textInputFocus,primary:0,weight:100}})}run(t,i){i.hasModel()&&(!i.getOption(37)&&i.getSelection().isEmpty()||(bk.forceCopyWithSyntaxHighlighting=!0,i.focus(),i.getContainerDomNode().ownerDocument.execCommand("copy"),bk.forceCopyWithSyntaxHighlighting=!1))}}function n1(t,i){t&&(t.addImplementation(1e4,"code-editor",((t,e)=>{const s=t.get(Ua).getFocusedCodeEditor();if(s&&s.hasTextFocus()){const t=s.getOption(37),e=s.getSelection();return e&&e.isEmpty()&&!t||s.getContainerDomNode().ownerDocument.execCommand(i),!0}return!1})),t.addImplementation(0,"generic-dom",((t,e)=>(Nc().execCommand(i),!0))))}n1(t1,"cut"),n1(i1,"copy"),e1&&(e1.addImplementation(1e4,"code-editor",((t,i)=>{var e,s;const n=t.get(Ua),o=t.get(IV),r=n.getFocusedCodeEditor();return r&&r.hasTextFocus()?r.getContainerDomNode().ownerDocument.execCommand("paste")?(s=(e=G0.get(r))===null||e===void 0?void 0:e.finishedPaste())!==null&&s!==void 0?s:Promise.resolve():!Et||(async()=>{const t=await o.readText();if(t!==""){const i=yk.INSTANCE.get(t);let e=!1,s=null,n=null;i&&(e=r.getOption(37)&&!!i.isFromEmptySelection,s=i.multicursorText!==void 0?i.multicursorText:null,n=i.mode),r.trigger("keyboard","paste",{text:t,pasteOnNewLine:e,multicursorText:s,mode:n})}})():!1})),e1.addImplementation(0,"generic-dom",((t,i)=>(Nc().execCommand("paste"),!0)))),X0&&Cu(s1);const o1=new class{constructor(){this.QuickFix=new KZ("quickfix"),this.Refactor=new KZ("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new KZ("notebook"),this.Source=new KZ("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}};var r1;function h1(t,i,e){return!!i.contains(t)&&(!e||!i.contains(e))}(function(t){t.Refactor="refactor",t.RefactorPreview="refactor preview",t.Lightbulb="lightbulb",t.Default="other (default)",t.SourceAction="source action",t.QuickFix="quick fix action",t.FixAll="fix all",t.OrganizeImports="organize imports",t.AutoFix="auto fix",t.QuickFixHover="quick fix hover window",t.OnSave="save participants",t.ProblemsView="problems view"})(r1||(r1={}));class c1{static fromUser(t,i){return t&&typeof t=="object"?new c1(c1.getKindFromUser(t,i.kind),c1.getApplyFromUser(t,i.apply),c1.getPreferredUser(t)):new c1(i.kind,i.apply,!1)}static getApplyFromUser(t,i){switch(typeof t.apply=="string"?t.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return i}}static getKindFromUser(t,i){return typeof t.kind=="string"?new KZ(t.kind):i}static getPreferredUser(t){return typeof t.preferred=="boolean"&&t.preferred}constructor(t,i,e){this.kind=t,this.apply=i,this.preferred=e}}class a1{constructor(t,i,e){this.action=t,this.provider=i,this.highlightRange=e}async resolve(t){var i;if(!((i=this.provider)===null||i===void 0)&&i.resolveCodeAction&&!this.action.edit){let i;try{i=await this.provider.resolveCodeAction(this.action,t)}catch(t){zi(t)}i&&(this.action.edit=i.edit)}return this}}const l1="editor.action.codeAction",u1="editor.action.quickFix",d1="editor.action.autoFix",f1="editor.action.refactor",g1="editor.action.sourceAction",A1="editor.action.organizeImports",p1="editor.action.fixAll";class w1 extends te{static codeActionsPreferredComparator(t,i){return t.isPreferred&&!i.isPreferred?-1:!t.isPreferred&&i.isPreferred?1:0}static codeActionsComparator({action:t},{action:i}){return t.isAI&&!i.isAI?1:!t.isAI&&i.isAI?-1:p(t.diagnostics)?p(i.diagnostics)?w1.codeActionsPreferredComparator(t,i):-1:p(i.diagnostics)?1:w1.codeActionsPreferredComparator(t,i)}constructor(t,i,e){super(),this.documentation=i,this._register(e),this.allActions=[...t].sort(w1.codeActionsComparator),this.validActions=this.allActions.filter((({action:t})=>!t.disabled))}get hasAutoFix(){return this.validActions.some((({action:t})=>!!t.kind&&o1.QuickFix.contains(new KZ(t.kind))&&!!t.isPreferred))}get hasAIFix(){return this.validActions.some((({action:t})=>!!t.isAI))}get allAIFixes(){return this.validActions.every((({action:t})=>!!t.isAI))}}const m1={actions:[],documentation:void 0};async function v1(t,i,e,s,n,o){var r;const c=s.filter||{},a={...c,excludes:[...c.excludes||[],o1.Notebook]},l={only:(r=c.include)===null||r===void 0?void 0:r.value,trigger:s.type},u=new HX(i,o),d=s.type===2,g=function(t,i,e){return t.all(i).filter((t=>!t.providedCodeActionKinds||t.providedCodeActionKinds.some((t=>function(t,i){return!(t.include&&!t.include.intersects(i)||t.excludes&&t.excludes.some((e=>h1(i,e,t.include)))||!t.includeSourceActions&&o1.Source.contains(i))}(e,new KZ(t))))))}(t,i,d?a:c),A=new Zi,p=g.map((async t=>{try{n.report(t);const s=await t.provideCodeActions(i,e,l,u.token);if(s&&A.add(s),u.token.isCancellationRequested)return m1;const o=((s==null?void 0:s.actions)||[]).filter((t=>t&&function(t,i){const e=i.kind?new KZ(i.kind):void 0;return!(!(!t.include||e&&t.include.contains(e))||t.excludes&&e&&t.excludes.some((i=>h1(e,i,t.include)))||!t.includeSourceActions&&e&&o1.Source.contains(e)||t.onlyIncludePreferredActions&&!i.isPreferred)}(c,t))),r=function(t,i,e){if(!t.documentation)return;const s=t.documentation.map((t=>({kind:new KZ(t.kind),command:t.command})));if(e){let t;for(const i of s)i.kind.contains(e)&&(t?t.kind.contains(i.kind)&&(t=i):t=i);if(t)return t==null?void 0:t.command}for(const t of i)if(t.kind){for(const i of s)if(i.kind.contains(new KZ(t.kind)))return i.command}}(t,o,c.include);return{actions:o.map((i=>new a1(i,t))),documentation:r}}catch(t){if(Pi(t))throw t;return zi(t),m1}})),w=t.onDidChange((()=>{h(t.all(i),g)||u.cancel()}));try{const e=await Promise.all(p),n=e.map((t=>t.actions)).flat(),o=[...f(e.map((t=>t.documentation))),...b1(t,i,s,n)];return new w1(n,o,A)}finally{w.dispose(),u.dispose()}}function*b1(t,i,e,s){var n,o,r;if(i&&s.length)for(const h of t.all(i))h._getAdditionalMenuItems&&(yield*(n=h._getAdditionalMenuItems)===null||n===void 0?void 0:n.call(h,{trigger:e.type,only:(r=(o=e.filter)===null||o===void 0?void 0:o.include)===null||r===void 0?void 0:r.value},s.map((t=>t.action))))}var y1;async function k1(t,i,e,s,n=ye.None){var o;const r=t.get(UQ),h=t.get($a),c=t.get(cu),a=t.get(wL);if(c.publicLog2("codeAction.applyCodeAction",{codeActionTitle:i.action.title,codeActionKind:i.action.kind,codeActionIsPreferred:!!i.action.isPreferred,reason:e}),await i.resolve(n),!n.isCancellationRequested){if(!((o=i.action.edit)===null||o===void 0)&&o.edits.length&&!(await r.apply(i.action.edit,{editor:s==null?void 0:s.editor,label:i.action.title,quotableLabel:i.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:e!==y1.OnSave,showPreview:s==null?void 0:s.preview})).isApplied)return;if(i.action.command)try{await h.executeCommand(i.action.command.id,...i.action.command.arguments||[])}catch(t){const i=function(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}(t);a.error(typeof i=="string"?i:st(0,"An unknown error occurred while applying the code action"))}}}(function(t){t.OnSave="onSave",t.FromProblemsView="fromProblemsView",t.FromCodeActions="fromCodeActions",t.FromAILightbulb="fromAILightbulb"})(y1||(y1={})),Xa.registerCommand("_executeCodeActionProvider",(async function(t,i,e,s,n){if(!(i instanceof fs))throw Wi();const{codeActionProvider:o}=t.get(jA),r=t.get(Ha).getModel(i);if(!r)throw Wi();const h=Bs.isISelection(e)?Bs.liftSelection(e):Es.isIRange(e)?r.validateRange(e):void 0;if(!h)throw Wi();const c=typeof s=="string"?new KZ(s):void 0,a=await v1(o,r,h,{type:1,triggerAction:r1.Default,filter:{includeSourceActions:!0,include:c}},kO.None,ye.None),l=[],u=Math.min(a.validActions.length,typeof n=="number"?n:0);for(let t=0;t<u;t++)l.push(a.validActions[t].resolve(ye.None));try{return await Promise.all(l),a.validActions.map((t=>t.action))}finally{setTimeout((()=>a.dispose()),100)}}));var x1,C1=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},E1=function(t,i){return function(e,s){i(e,s,t)}};let B1=x1=class{constructor(t){this.keybindingService=t}getResolver(){const t=new _n((()=>this.keybindingService.getKeybindings().filter((t=>x1.codeActionCommands.indexOf(t.command)>=0)).filter((t=>t.resolvedKeybinding)).map((t=>{let i=t.commandArgs;return t.command===A1?i={kind:o1.SourceOrganizeImports.value}:t.command===p1&&(i={kind:o1.SourceFixAll.value}),{resolvedKeybinding:t.resolvedKeybinding,...c1.fromUser(i,{kind:KZ.None,apply:"never"})}}))));return i=>{if(i.kind){const e=this.bestKeybindingForCodeAction(i,t.value);return e==null?void 0:e.resolvedKeybinding}}}bestKeybindingForCodeAction(t,i){if(!t.kind)return;const e=new KZ(t.kind);return i.filter((t=>t.kind.contains(e))).filter((i=>!i.preferred||t.isPreferred)).reduceRight(((t,i)=>t?t.kind.contains(i.kind)?i:t:i),void 0)}};B1.codeActionCommands=[f1,l1,g1,A1,p1],B1=x1=C1([E1(0,Hx)],B1),Ow("symbolIcon.arrayForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.booleanForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},st(0,"The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.colorForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.constantForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},st(0,"The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},st(0,"The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},st(0,"The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},st(0,"The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},st(0,"The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.fileForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.folderForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},st(0,"The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},st(0,"The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.keyForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.keywordForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},st(0,"The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.moduleForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.namespaceForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.nullForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.numberForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.objectForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.operatorForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.packageForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.propertyForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.referenceForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.snippetForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.stringForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.structForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.textForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.typeParameterForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.unitForeground",{dark:Jw,light:Jw,hcDark:Jw,hcLight:Jw},st(0,"The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ow("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},st(0,"The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));const D1=Object.freeze({kind:KZ.Empty,title:st(0,"More Actions...")}),M1=Object.freeze([{kind:o1.QuickFix,title:st(0,"Quick Fix")},{kind:o1.RefactorExtract,title:st(0,"Extract"),icon:Fs.wrench},{kind:o1.RefactorInline,title:st(0,"Inline"),icon:Fs.wrench},{kind:o1.RefactorRewrite,title:st(0,"Rewrite"),icon:Fs.wrench},{kind:o1.RefactorMove,title:st(0,"Move"),icon:Fs.wrench},{kind:o1.SurroundWith,title:st(0,"Surround With"),icon:Fs.surroundWith},{kind:o1.Source,title:st(0,"Source Action"),icon:Fs.symbolFile},D1]);var S1,F1,I1=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},L1=function(t,i){return function(e,s){i(e,s,t)}};(function(t){t.Hidden={type:0},t.Showing=class{constructor(t,i,e,s){this.actions=t,this.trigger=i,this.editorPosition=e,this.widgetPosition=s,this.type=1}}})(F1||(F1={}));let R1=S1=class extends te{constructor(t,i,e){super(),this._editor=t,this._keybindingService=i,this._onClick=this._register(new de),this.onClick=this._onClick.event,this._state=F1.Hidden,this._iconClasses=[],this._domNode=ha("div.lightBulbWidget"),this._register(Wy.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent((t=>{const i=this._editor.getModel();(this.state.type!==1||!i||this.state.editorPosition.lineNumber>=i.getLineCount())&&this.hide()}))),this._register(ac(this._domNode,(t=>{if(this.state.type!==1)return;this._editor.focus(),t.preventDefault();const{top:i,height:e}=yc(this._domNode),s=this._editor.getOption(67);let n=Math.floor(s/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(n+=s),this._onClick.fire({x:t.posx,y:i+e+n,actions:this.state.actions,trigger:this.state.trigger})}))),this._register(rc(this._domNode,"mouseenter",(t=>{1&~t.buttons||this.hide()}))),this._register(he.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,(()=>{var t,i,e,s;this._preferredKbLabel=(i=(t=this._keybindingService.lookupKeybinding(d1))===null||t===void 0?void 0:t.getLabel())!==null&&i!==void 0?i:void 0,this._quickFixKbLabel=(s=(e=this._keybindingService.lookupKeybinding(u1))===null||e===void 0?void 0:e.getLabel())!==null&&s!==void 0?s:void 0,this._updateLightBulbTitleAndIcon()})))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(t,i,e){if(t.validActions.length<=0)return this.hide();if(!this._editor.getOptions().get(65).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:n,column:o}=s.validatePosition(e),r=s.getOptions().tabSize,h=this._editor.getOptions().get(50),c=EE(s.getLineContent(n),r),a=t=>t>2&&this._editor.getTopForLineNumber(t)===this._editor.getTopForLineNumber(t-1);let l=n,u=1;if(!(h.spaceWidth*c>22)){if(n>1&&!a(n-1))l-=1;else if(n<s.getLineCount()&&!a(n+1))l+=1;else if(o*h.spaceWidth<22)return this.hide();u=/^\S\s*$/.test(s.getLineContent(l))?2:1}this.state=new F1.Showing(t,i,e,{position:{lineNumber:l,column:u},preference:S1._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state!==F1.Hidden&&(this.state=F1.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(t){this._state=t,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],this.state.type!==1)return;let t,i=!1;this.state.actions.allAIFixes?(t=Fs.sparkleFilled,this.state.actions.validActions.length===1&&(i=!0)):t=this.state.actions.hasAutoFix?this.state.actions.hasAIFix?Fs.lightbulbSparkleAutofix:Fs.lightbulbAutofix:this.state.actions.hasAIFix?Fs.lightbulbSparkle:Fs.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,i),this._iconClasses=Ka.asClassNameArray(t),this._domNode.classList.add(...this._iconClasses)}_updateLightbulbTitle(t,i){this.state.type===1&&(i?this.title=st(0,"Run: {0}",this.state.actions.validActions[0].action.title):t&&this._preferredKbLabel?this.title=st(0,"Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!t&&this._quickFixKbLabel?this.title=st(0,"Show Code Actions ({0})",this._quickFixKbLabel):t||(this.title=st(0,"Show Code Actions")))}set title(t){this._domNode.title=t}};R1.ID="editor.contrib.lightbulbWidget",R1._posPref=[0],R1=S1=I1([L1(1,Hx),L1(2,$a)],R1);var T1=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},N1=function(t,i){return function(e,s){i(e,s,t)}};const Q1="acceptSelectedCodeAction",O1="previewSelectedCodeAction";class z1{get templateId(){return"header"}renderTemplate(t){t.classList.add("group-header");const i=document.createElement("span");return t.append(i),{container:t,text:i}}renderElement(t,i,e){var s,n;e.text.textContent=(n=(s=t.group)===null||s===void 0?void 0:s.title)!==null&&n!==void 0?n:""}disposeTemplate(t){}}let U1=class{get templateId(){return"action"}constructor(t,i){this._supportsPreview=t,this._keybindingService=i}renderTemplate(t){t.classList.add(this.templateId);const i=document.createElement("div");i.className="icon",t.append(i);const e=document.createElement("span");return e.className="title",t.append(e),{container:t,icon:i,text:e,keybinding:new PY(t,Rt)}}renderElement(t,i,e){var s,n,o;if(!((s=t.group)===null||s===void 0)&&s.icon?(e.icon.className=Ka.asClassName(t.group.icon),t.group.icon.color&&(e.icon.style.color=Tw(t.group.icon.color.id))):(e.icon.className=Ka.asClassName(Fs.lightBulb),e.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!t.item||!t.label)return;e.text.textContent=Y1(t.label),e.keybinding.set(t.keybinding),function(t,...i){t?ca(...i):aa(...i)}(!!t.keybinding,e.keybinding.element);const r=(n=this._keybindingService.lookupKeybinding(Q1))===null||n===void 0?void 0:n.getLabel(),h=(o=this._keybindingService.lookupKeybinding(O1))===null||o===void 0?void 0:o.getLabel();e.container.classList.toggle("option-disabled",t.disabled),t.disabled?e.container.title=t.label:r&&h?this._supportsPreview&&t.canPreview?e.container.title=st(0,"{0} to Apply, {1} to Preview",r,h):e.container.title=st(0,"{0} to Apply",r):e.container.title=""}disposeTemplate(t){t.keybinding.dispose()}};U1=T1([N1(1,Hx)],U1);class H1 extends UIEvent{constructor(){super("acceptSelectedAction")}}class P1 extends UIEvent{constructor(){super("previewSelectedAction")}}function j1(t){if(t.kind==="action")return t.label}let W1=class extends te{constructor(t,i,e,s,n,o){super(),this._delegate=s,this._contextViewService=n,this._keybindingService=o,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new xe),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const r={getHeight:t=>t.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:t=>t.kind};this._list=this._register(new YU(t,this.domNode,r,[new U1(i,this._keybindingService),new z1],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:j1},accessibilityProvider:{getAriaLabel:t=>{if(t.kind==="action"){let i=t.label?Y1(t==null?void 0:t.label):"";return t.disabled&&(i=st(0,"{0}, Disabled Reason: {1}",i,t.disabled)),i}return null},getWidgetAriaLabel:()=>st(0,"Action Widget"),getRole:t=>t.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(mH),this._register(this._list.onMouseClick((t=>this.onListClick(t)))),this._register(this._list.onMouseOver((t=>this.onListHover(t)))),this._register(this._list.onDidChangeFocus((()=>this.onFocus()))),this._register(this._list.onDidChangeSelection((t=>this.onListSelection(t)))),this._allMenuItems=e,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(t){return!t.disabled&&t.kind==="action"}hide(t){this._delegate.onHide(t),this.cts.cancel(),this._contextViewService.hideContextView()}layout(t){const i=this._allMenuItems.filter((t=>t.kind==="header")).length,e=this._allMenuItems.length*this._actionLineHeight+i*this._headerLineHeight-i*this._actionLineHeight;this._list.layout(e);let s=t;if(this._allMenuItems.length>=50)s=380;else{const i=this._allMenuItems.map(((t,i)=>{const e=this.domNode.ownerDocument.getElementById(this._list.getElementID(i));if(e){e.style.width="auto";const t=e.getBoundingClientRect().width;return e.style.width="",t}return 0}));s=Math.max(...i,t)}const n=Math.min(e,.7*this.domNode.ownerDocument.body.clientHeight);return this._list.layout(n,s),this.domNode.style.height=`${n}px`,this._list.domFocus(),s}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(t){const i=this._list.getFocus();if(i.length===0)return;const e=i[0],s=this._list.element(e);if(!this.focusCondition(s))return;const n=t?new P1:new H1;this._list.setSelection([e],n)}onListSelection(t){if(!t.elements.length)return;const i=t.elements[0];i.item&&this.focusCondition(i)?this._delegate.onSelect(i.item,t.browserEvent instanceof P1):this._list.setSelection([])}onFocus(){var t,i;const e=this._list.getFocus();if(e.length===0)return;const s=e[0],n=this._list.element(s);(i=(t=this._delegate).onFocus)===null||i===void 0||i.call(t,n.item)}async onListHover(t){const i=t.element;if(i&&i.item&&this.focusCondition(i)){if(this._delegate.onHover&&!i.disabled&&i.kind==="action"){const t=await this._delegate.onHover(i.item,this.cts.token);i.canPreview=t?t.canPreview:void 0}t.index&&this._list.splice(t.index,1,[i])}this._list.setFocus(typeof t.index=="number"?[t.index]:[])}onListClick(t){t.element&&this.focusCondition(t.element)&&this._list.setFocus([])}};function Y1(t){return t.replace(/\r\n|\r|\n/g," ")}W1=T1([N1(4,cT),N1(5,Hx)],W1);var _1=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},V1=function(t,i){return function(e,s){i(e,s,t)}};Ow("actionBar.toggledBackground",{dark:bv,light:bv,hcDark:bv,hcLight:bv},st(0,"Background color for toggled action items in action bar."));const J1={Visible:new Tl("codeActionMenuVisible",!1,st(0,"Whether the action widget list is visible"))},G1=za("actionWidgetService");let K1=class extends te{get isVisible(){return J1.Visible.getValue(this._contextKeyService)||!1}constructor(t,i,e){super(),this._contextViewService=t,this._contextKeyService=i,this._instantiationService=e,this._list=this._register(new ie)}show(t,i,e,s,n,o,r){const h=J1.Visible.bindTo(this._contextKeyService),c=this._instantiationService.createInstance(W1,t,i,e,s);this._contextViewService.showContextView({getAnchor:()=>n,render:t=>(h.set(!0),this._renderWidget(t,c,r??[])),onHide:t=>{h.reset(),this._onWidgetClosed(t)}},o,!1)}acceptSelected(t){var i;(i=this._list.value)===null||i===void 0||i.acceptSelected(t)}focusPrevious(){var t,i;(i=(t=this._list)===null||t===void 0?void 0:t.value)===null||i===void 0||i.focusPrevious()}focusNext(){var t,i;(i=(t=this._list)===null||t===void 0?void 0:t.value)===null||i===void 0||i.focusNext()}hide(){var t;(t=this._list.value)===null||t===void 0||t.hide(),this._list.clear()}_renderWidget(t,i,e){var s;const n=document.createElement("div");if(n.classList.add("action-widget"),t.appendChild(n),this._list.value=i,!this._list.value)throw new Error("List has no value");n.appendChild(this._list.value.domNode);const o=new Zi,r=document.createElement("div"),h=t.appendChild(r);h.classList.add("context-view-block"),o.add(rc(h,$c.MOUSE_DOWN,(t=>t.stopPropagation())));const c=document.createElement("div"),a=t.appendChild(c);a.classList.add("context-view-pointerBlock"),o.add(rc(a,$c.POINTER_MOVE,(()=>a.remove()))),o.add(rc(a,$c.MOUSE_DOWN,(()=>a.remove())));let l=0;if(e.length){const t=this._createActionBar(".action-widget-action-bar",e);t&&(n.appendChild(t.getContainer().parentElement),o.add(t),l=t.getContainer().offsetWidth)}const u=(s=this._list.value)===null||s===void 0?void 0:s.layout(l);n.style.width=`${u}px`;const d=o.add(ta(t));return o.add(d.onDidBlur((()=>this.hide()))),o}_createActionBar(t,i){if(!i.length)return;const e=ha(t),s=new RH(e);return s.push(i,{icon:!1,label:!0}),s}_onWidgetClosed(t){var i;(i=this._list.value)===null||i===void 0||i.hide(t)}};K1=_1([V1(0,cT),V1(1,Nl),V1(2,Oa)],K1),Hd(G1,K1,1);const $1=1100;hu(class extends ru{constructor(){super({id:"hideCodeActionWidget",title:nt(0,"Hide action widget"),precondition:J1.Visible,keybinding:{weight:$1,primary:9,secondary:[1033]}})}run(t){t.get(G1).hide()}}),hu(class extends ru{constructor(){super({id:"selectPrevCodeAction",title:nt(0,"Select previous action"),precondition:J1.Visible,keybinding:{weight:$1,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(t){const i=t.get(G1);i instanceof K1&&i.focusPrevious()}}),hu(class extends ru{constructor(){super({id:"selectNextCodeAction",title:nt(0,"Select next action"),precondition:J1.Visible,keybinding:{weight:$1,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(t){const i=t.get(G1);i instanceof K1&&i.focusNext()}}),hu(class extends ru{constructor(){super({id:Q1,title:nt(0,"Accept selected action"),precondition:J1.Visible,keybinding:{weight:$1,primary:3,secondary:[2137]}})}run(t){const i=t.get(G1);i instanceof K1&&i.acceptSelected()}}),hu(class extends ru{constructor(){super({id:O1,title:nt(0,"Preview selected action"),precondition:J1.Visible,keybinding:{weight:$1,primary:2051}})}run(t){const i=t.get(G1);i instanceof K1&&i.acceptSelected(!0)}});const X1=new Tl("supportedCodeAction",""),q1="_typescript.applyFixAllCodeAction";class Z1 extends te{constructor(t,i,e,s=250){super(),this._editor=t,this._markerService=i,this._signalChange=e,this._delay=s,this._autoTriggerTimer=this._register(new xr),this._register(this._markerService.onMarkerChanged((t=>this._onMarkerChanges(t)))),this._register(this._editor.onDidChangeCursorPosition((()=>this._tryAutoTrigger())))}trigger(t){const i=this._getRangeOfSelectionUnlessWhitespaceEnclosed(t);this._signalChange(i?{trigger:t,selection:i}:void 0)}_onMarkerChanges(t){const i=this._editor.getModel();i&&t.some((t=>CM(t,i.uri)))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2,triggerAction:r1.Default})}),this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(t){if(!this._editor.hasModel())return;const i=this._editor.getSelection();if(t.type===1)return i;const e=this._editor.getOption(65).enabled;if(e!==pi.Off){if(e===pi.On)return i;if(e===pi.OnCode){if(!i.isEmpty())return i;const t=this._editor.getModel(),{lineNumber:e,column:s}=i.getPosition(),n=t.getLineContent(e);if(n.length===0)return;if(s===1){if(/\s/.test(n[0]))return}else if(s===t.getLineMaxColumn(e)){if(/\s/.test(n[n.length-1]))return}else if(/\s/.test(n[s-2])&&/\s/.test(n[s-1]))return}return i}}}var t2;(function(t){t.Empty={type:0},t.Triggered=class{constructor(t,i,e){this.trigger=t,this.position=i,this._cancellablePromise=e,this.type=1,this.actions=e.catch((t=>{if(Pi(t))return i2;throw t}))}cancel(){this._cancellablePromise.cancel()}}})(t2||(t2={}));const i2=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});class e2 extends te{constructor(t,i,e,s,n,o){super(),this._editor=t,this._registry=i,this._markerService=e,this._progressService=n,this._configurationService=o,this._codeActionOracle=this._register(new ie),this._state=t2.Empty,this._onDidChangeState=this._register(new de),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=X1.bindTo(s),this._register(this._editor.onDidChangeModel((()=>this._update()))),this._register(this._editor.onDidChangeModelLanguage((()=>this._update()))),this._register(this._registry.onDidChange((()=>this._update()))),this._register(this._editor.onDidChangeConfiguration((t=>{t.hasChanged(65)&&this._update()}))),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(t2.Empty,!0))}_settingEnabledNearbyQuickfixes(){var t;const i=(t=this._editor)===null||t===void 0?void 0:t.getModel();return!!this._configurationService&&this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:i==null?void 0:i.uri})}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(t2.Empty);const t=this._editor.getModel();if(t&&this._registry.has(t)&&!this._editor.getOption(91)){const i=this._registry.all(t).flatMap((t=>{var i;return(i=t.providedCodeActionKinds)!==null&&i!==void 0?i:[]}));this._supportedCodeActions.set(i.join(" ")),this._codeActionOracle.value=new Z1(this._editor,this._markerService,(i=>{var e;if(!i)return void this.setState(t2.Empty);const s=i.selection.getStartPosition(),n=Ar((async e=>{var s,n,o,r,h,c,a,l,u,d;if(this._settingEnabledNearbyQuickfixes()&&i.trigger.type===1&&(i.trigger.triggerAction===r1.QuickFix||!((n=(s=i.trigger.filter)===null||s===void 0?void 0:s.include)===null||n===void 0)&&n.contains(o1.QuickFix))){const s=await v1(this._registry,t,i.selection,i.trigger,kO.None,e),n=[...s.allActions];if(e.isCancellationRequested)return i2;const f=(o=s.validActions)===null||o===void 0?void 0:o.some((t=>!!t.action.kind&&o1.QuickFix.contains(new KZ(t.action.kind)))),g=this._markerService.read({resource:t.uri});if(f){for(const t of s.validActions)!((h=(r=t.action.command)===null||r===void 0?void 0:r.arguments)===null||h===void 0)&&h.some((t=>typeof t=="string"&&t.includes(q1)))&&(t.action.diagnostics=[...g.filter((t=>t.relatedInformation))]);return{validActions:s.validActions,allActions:n,documentation:s.documentation,hasAutoFix:s.hasAutoFix,hasAIFix:s.hasAIFix,allAIFixes:s.allAIFixes,dispose:()=>{s.dispose()}}}if(!f&&g.length>0){const o=i.selection.getPosition();let r=o,h=Number.MAX_VALUE;const f=[...s.validActions];for(const A of g){const p=A.endColumn,w=A.endLineNumber,m=A.startLineNumber;if(w===o.lineNumber||m===o.lineNumber){r=new Cs(w,p);const A={type:i.trigger.type,triggerAction:i.trigger.triggerAction,filter:{include:!((c=i.trigger.filter)===null||c===void 0)&&c.include?(a=i.trigger.filter)===null||a===void 0?void 0:a.include:o1.QuickFix},autoApply:i.trigger.autoApply,context:{notAvailableMessage:((l=i.trigger.context)===null||l===void 0?void 0:l.notAvailableMessage)||"",position:r}},m=new Bs(r.lineNumber,r.column,r.lineNumber,r.column),v=await v1(this._registry,t,m,A,kO.None,e);if(v.validActions.length!==0){for(const t of v.validActions)!((d=(u=t.action.command)===null||u===void 0?void 0:u.arguments)===null||d===void 0)&&d.some((t=>typeof t=="string"&&t.includes(q1)))&&(t.action.diagnostics=[...g.filter((t=>t.relatedInformation))]);s.allActions.length===0&&n.push(...v.allActions),Math.abs(o.column-p)<h?f.unshift(...v.validActions):f.push(...v.validActions)}h=Math.abs(o.column-p)}}const A=f.filter(((t,i,e)=>e.findIndex((i=>i.action.title===t.action.title))===i));return A.sort(((t,i)=>t.action.isPreferred&&!i.action.isPreferred?-1:!t.action.isPreferred&&i.action.isPreferred||t.action.isAI&&!i.action.isAI?1:!t.action.isAI&&i.action.isAI?-1:0)),{validActions:A,allActions:n,documentation:s.documentation,hasAutoFix:s.hasAutoFix,hasAIFix:s.hasAIFix,allAIFixes:s.allAIFixes,dispose:()=>{s.dispose()}}}}return v1(this._registry,t,i.selection,i.trigger,kO.None,e)}));i.trigger.type===1&&((e=this._progressService)===null||e===void 0||e.showWhile(n,250));const o=new t2.Triggered(i.trigger,s,n);let r=!1;this._state.type===1&&(r=this._state.trigger.type===1&&o.type===1&&o.trigger.type===2&&this._state.position!==o.position),r||this.setState(o)}),void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:r1.Default})}else this._supportedCodeActions.reset()}trigger(t){var i;(i=this._codeActionOracle.value)===null||i===void 0||i.trigger(t)}setState(t,i){t!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=t,i||this._disposed||this._onDidChangeState.fire(t))}}var s2,n2=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},o2=function(t,i){return function(e,s){i(e,s,t)}};let r2=s2=class extends te{static get(t){return t.getContribution(s2.ID)}constructor(t,i,e,s,n,o,r,h,c,a){super(),this._commandService=r,this._configurationService=h,this._actionWidgetService=c,this._instantiationService=a,this._activeCodeActions=this._register(new ie),this._showDisabled=!1,this._disposed=!1,this._editor=t,this._model=this._register(new e2(this._editor,n.codeActionProvider,i,e,o,h)),this._register(this._model.onDidChangeState((t=>this.update(t)))),this._lightBulbWidget=new _n((()=>{const t=this._editor.getContribution(R1.ID);return t&&this._register(t.onClick((t=>this.showCodeActionsFromLightbulb(t.actions,t)))),t})),this._resolver=s.createInstance(B1),this._register(this._editor.onDidLayoutChange((()=>this._actionWidgetService.hide())))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(t,i){if(t.allAIFixes&&t.validActions.length===1){const i=t.validActions[0],e=i.action.command;return e&&e.id==="inlineChat.start"&&e.arguments&&e.arguments.length>=1&&(e.arguments[0]={...e.arguments[0],autoSend:!1}),void await this._applyCodeAction(i,!1,!1,y1.FromAILightbulb)}await this.showCodeActionList(t,i,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(t,i,e){return this.showCodeActionList(i,e,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(t,i,e,s){var n;if(!this._editor.hasModel())return;(n=N0.get(this._editor))===null||n===void 0||n.closeMessage();const o=this._editor.getPosition();this._trigger({type:1,triggerAction:i,filter:e,autoApply:s,context:{notAvailableMessage:t,position:o}})}_trigger(t){return this._model.trigger(t)}async _applyCodeAction(t,i,e,s){try{await this._instantiationService.invokeFunction(k1,t,s,{preview:e,editor:this._editor})}finally{i&&this._trigger({type:2,triggerAction:r1.QuickFix,filter:{}})}}async update(t){var i,e,s,n,o,r,h;if(t.type!==1)return void((i=this._lightBulbWidget.rawValue)===null||i===void 0||i.hide());let c;try{c=await t.actions}catch(t){return void Oi(t)}if(!this._disposed)if((e=this._lightBulbWidget.value)===null||e===void 0||e.update(c,t.trigger,t.position),t.trigger.type===1){if(!((s=t.trigger.filter)===null||s===void 0)&&s.include){const i=this.tryGetValidActionToApply(t.trigger,c);if(i){try{(n=this._lightBulbWidget.value)===null||n===void 0||n.hide(),await this._applyCodeAction(i,!1,!1,y1.FromCodeActions)}finally{c.dispose()}return}if(t.trigger.context){const i=this.getInvalidActionThatWouldHaveBeenApplied(t.trigger,c);if(i&&i.action.disabled)return(o=N0.get(this._editor))===null||o===void 0||o.showMessage(i.action.disabled,t.trigger.context.position),void c.dispose()}}const i=!!(!((r=t.trigger.filter)===null||r===void 0)&&r.include);if(t.trigger.context&&(!c.allActions.length||!i&&!c.validActions.length))return(h=N0.get(this._editor))===null||h===void 0||h.showMessage(t.trigger.context.notAvailableMessage,t.trigger.context.position),this._activeCodeActions.value=c,void c.dispose();this._activeCodeActions.value=c,this.showCodeActionList(c,this.toCoords(t.position),{includeDisabledActions:i,fromLightbulb:!1})}else this._actionWidgetService.isVisible?c.dispose():this._activeCodeActions.value=c}getInvalidActionThatWouldHaveBeenApplied(t,i){if(i.allActions.length)return t.autoApply==="first"&&i.validActions.length===0||t.autoApply==="ifSingle"&&i.allActions.length===1?i.allActions.find((({action:t})=>t.disabled)):void 0}tryGetValidActionToApply(t,i){if(i.validActions.length)return t.autoApply==="first"&&i.validActions.length>0||t.autoApply==="ifSingle"&&i.validActions.length===1?i.validActions[0]:void 0}async showCodeActionList(t,i,e){const s=this._editor.createDecorationsCollection(),n=this._editor.getDomNode();if(!n)return;const o=e.includeDisabledActions&&(this._showDisabled||t.validActions.length===0)?t.allActions:t.validActions;if(!o.length)return;const r=Cs.isIPosition(i)?this.toCoords(i):i,h={onSelect:async(t,i)=>{this._applyCodeAction(t,!0,!!i,y1.FromCodeActions),this._actionWidgetService.hide(),s.clear()},onHide:()=>{var t;(t=this._editor)===null||t===void 0||t.focus(),s.clear()},onHover:async(t,i)=>{var e;if(i.isCancellationRequested)return;let s=!1;const n=t.action.kind;if(n){const t=new KZ(n);s=[o1.RefactorExtract,o1.RefactorInline,o1.RefactorRewrite].some((i=>i.contains(t)))}return{canPreview:s||!!(!((e=t.action.edit)===null||e===void 0)&&e.edits.length)}},onFocus:t=>{var i,e;if(t&&t.action){const n=t.action.ranges,o=t.action.diagnostics;if(s.clear(),n&&n.length>0){const t=o&&(o==null?void 0:o.length)>1?o.map((t=>({range:t,options:s2.DECORATION}))):n.map((t=>({range:t,options:s2.DECORATION})));s.set(t)}else if(o&&o.length>0){const t=o.map((t=>({range:t,options:s2.DECORATION})));s.set(t);const n=o[0];n.startLineNumber&&n.startColumn&&aw(st(0,"Context: {0} at line {1} and column {2}.",(e=(i=this._editor.getModel())===null||i===void 0?void 0:i.getWordAtPosition({lineNumber:n.startLineNumber,column:n.startColumn}))===null||e===void 0?void 0:e.word,n.startLineNumber,n.startColumn))}}else s.clear()}};this._actionWidgetService.show("codeActionWidget",!0,function(t,i,e){if(!i)return t.map((t=>{var i;return{kind:"action",item:t,group:D1,disabled:!!t.action.disabled,label:t.action.disabled||t.action.title,canPreview:!!(!((i=t.action.edit)===null||i===void 0)&&i.edits.length)}}));const s=M1.map((t=>({group:t,actions:[]})));for(const i of t){const t=i.action.kind?new KZ(i.action.kind):KZ.None;for(const e of s)if(e.group.kind.contains(t)){e.actions.push(i);break}}const n=[];for(const t of s)if(t.actions.length){n.push({kind:"header",group:t.group});for(const i of t.actions){const s=t.group;n.push({kind:"action",item:i,group:i.action.isAI?{title:s.title,kind:s.kind,icon:Fs.sparkle}:s,label:i.action.title,disabled:!!i.action.disabled,keybinding:e(i.action)})}}return n}(o,this._shouldShowHeaders(),this._resolver.getResolver()),h,r,n,this._getActionBarActions(t,i,e))}toCoords(t){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(t,1),this._editor.render();const i=this._editor.getScrolledVisiblePosition(t),e=yc(this._editor.getDomNode());return{x:e.left+i.left,y:e.top+i.top+i.height}}_shouldShowHeaders(){var t;const i=(t=this._editor)===null||t===void 0?void 0:t.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:i==null?void 0:i.uri})}_getActionBarActions(t,i,e){if(e.fromLightbulb)return[];const s=t.documentation.map((t=>{var i;return{id:t.id,label:t.title,tooltip:(i=t.tooltip)!==null&&i!==void 0?i:"",class:void 0,enabled:!0,run:()=>{var i;return this._commandService.executeCommand(t.id,...(i=t.arguments)!==null&&i!==void 0?i:[])}}}));return e.includeDisabledActions&&t.validActions.length>0&&t.allActions.length!==t.validActions.length&&s.push(this._showDisabled?{id:"hideMoreActions",label:st(0,"Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(t,i,e))}:{id:"showMoreActions",label:st(0,"Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(t,i,e))}),s}};function h2(t){return gl.regex(X1.keys()[0],new RegExp("(\\s|^)"+Xn(t.value)+"\\b"))}r2.ID="editor.contrib.codeActionController",r2.DECORATION=DF.register({description:"quickfix-highlight",className:"quickfix-edit-highlight"}),r2=s2=n2([o2(1,sP),o2(2,Nl),o2(3,Oa),o2(4,jA),o2(5,xO),o2(6,$a),o2(7,Id),o2(8,G1),o2(9,Oa)],r2),Nk(((t,i)=>{((t,e)=>{e&&i.addRule(`.monaco-editor ${t} { background-color: ${e}; }`)})(".quickfix-edit-highlight",t.getColor(Cm));const e=t.getColor(Em);e&&i.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${dy(t.type)?"dotted":"solid"} ${e}; box-sizing: border-box; }`)}));const c2={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:st(0,"Kind of the code action to run.")},apply:{type:"string",description:st(0,"Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[st(0,"Always apply the first returned code action."),st(0,"Apply the first returned code action if it is the only one."),st(0,"Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:st(0,"Controls if only preferred code actions should be returned.")}}};function a2(t,i,e,s,n=r1.Default){if(t.hasModel()){const o=r2.get(t);o==null||o.manualTriggerAtCurrentPosition(i,n,e,s)}}Bu(r2.ID,r2,3),Bu(R1.ID,R1,4),Cu(class extends vu{constructor(){super({id:u1,label:st(0,"Quick Fix..."),alias:"Quick Fix...",precondition:gl.and(QC.writable,QC.hasCodeActionsProvider),kbOpts:{kbExpr:QC.textInputFocus,primary:2137,weight:100}})}run(t,i){return a2(i,st(0,"No code actions available"),void 0,void 0,r1.QuickFix)}}),Cu(class extends vu{constructor(){super({id:f1,label:st(0,"Refactor..."),alias:"Refactor...",precondition:gl.and(QC.writable,QC.hasCodeActionsProvider),kbOpts:{kbExpr:QC.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:gl.and(QC.writable,h2(o1.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:c2}]}})}run(t,i,e){const s=c1.fromUser(e,{kind:o1.Refactor,apply:"never"});return a2(i,typeof(e==null?void 0:e.kind)=="string"?s.preferred?st(0,"No preferred refactorings for '{0}' available",e.kind):st(0,"No refactorings for '{0}' available",e.kind):s.preferred?st(0,"No preferred refactorings available"):st(0,"No refactorings available"),{include:o1.Refactor.contains(s.kind)?s.kind:KZ.None,onlyIncludePreferredActions:s.preferred},s.apply,r1.Refactor)}}),Cu(class extends vu{constructor(){super({id:g1,label:st(0,"Source Action..."),alias:"Source Action...",precondition:gl.and(QC.writable,QC.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:gl.and(QC.writable,h2(o1.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:c2}]}})}run(t,i,e){const s=c1.fromUser(e,{kind:o1.Source,apply:"never"});return a2(i,typeof(e==null?void 0:e.kind)=="string"?s.preferred?st(0,"No preferred source actions for '{0}' available",e.kind):st(0,"No source actions for '{0}' available",e.kind):s.preferred?st(0,"No preferred source actions available"):st(0,"No source actions available"),{include:o1.Source.contains(s.kind)?s.kind:KZ.None,includeSourceActions:!0,onlyIncludePreferredActions:s.preferred},s.apply,r1.SourceAction)}}),Cu(class extends vu{constructor(){super({id:A1,label:st(0,"Organize Imports"),alias:"Organize Imports",precondition:gl.and(QC.writable,h2(o1.SourceOrganizeImports)),kbOpts:{kbExpr:QC.textInputFocus,primary:1581,weight:100}})}run(t,i){return a2(i,st(0,"No organize imports action available"),{include:o1.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",r1.OrganizeImports)}}),Cu(class extends vu{constructor(){super({id:d1,label:st(0,"Auto Fix..."),alias:"Auto Fix...",precondition:gl.and(QC.writable,h2(o1.QuickFix)),kbOpts:{kbExpr:QC.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(t,i){return a2(i,st(0,"No auto fixes available"),{include:o1.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",r1.AutoFix)}}),Cu(class extends vu{constructor(){super({id:p1,label:st(0,"Fix All"),alias:"Fix All",precondition:gl.and(QC.writable,h2(o1.SourceFixAll))})}run(t,i){return a2(i,st(0,"No fix all action available"),{include:o1.SourceFixAll,includeSourceActions:!0},"ifSingle",r1.FixAll)}}),xu(new class extends mu{constructor(){super({id:l1,precondition:gl.and(QC.writable,QC.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:c2}]}})}runEditorCommand(t,i,e){const s=c1.fromUser(e,{kind:KZ.Empty,apply:"ifSingle"});return a2(i,typeof(e==null?void 0:e.kind)=="string"?s.preferred?st(0,"No preferred code actions for '{0}' available",e.kind):st(0,"No code actions for '{0}' available",e.kind):s.preferred?st(0,"No preferred code actions available"):st(0,"No code actions available"),{include:s.kind,includeSourceActions:!0,onlyIncludePreferredActions:s.preferred},s.apply)}}),Vl.as(_d).registerConfiguration({...YQ,properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:st(0,"Enable/disable showing group headers in the Code Action menu."),default:!0}}}),Vl.as(_d).registerConfiguration({...YQ,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:st(0,"Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}});class l2{constructor(){this.lenses=[],this._disposables=new Zi}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(t,i){this._disposables.add(t);for(const e of t.lenses)this.lenses.push({symbol:e,provider:i})}}async function u2(t,i,e){const s=t.ordered(i),n=new Map,o=new l2,r=s.map((async(t,s)=>{n.set(t,s);try{const s=await Promise.resolve(t.provideCodeLenses(i,e));s&&o.add(s,t)}catch(t){zi(t)}}));return await Promise.all(r),o.lenses=o.lenses.sort(((t,i)=>t.symbol.range.startLineNumber<i.symbol.range.startLineNumber?-1:t.symbol.range.startLineNumber>i.symbol.range.startLineNumber?1:n.get(t.provider)<n.get(i.provider)?-1:n.get(t.provider)>n.get(i.provider)?1:t.symbol.range.startColumn<i.symbol.range.startColumn?-1:t.symbol.range.startColumn>i.symbol.range.startColumn?1:0)),o}Xa.registerCommand("_executeCodeLensProvider",(function(t,...i){let[e,s]=i;Y(fs.isUri(e)),Y(typeof s=="number"||!s);const{codeLensProvider:n}=t.get(jA),o=t.get(Ha).getModel(e);if(!o)throw Wi();const r=[],h=new Zi;return u2(n,o,ye.None).then((t=>{h.add(t);const i=[];for(const e of t.lenses)s==null||e.symbol.command?r.push(e.symbol):s-- >0&&e.provider.resolveCodeLens&&i.push(Promise.resolve(e.provider.resolveCodeLens(o,e.symbol,ye.None)).then((t=>r.push(t||e.symbol))));return Promise.all(i)})).then((()=>r)).finally((()=>{setTimeout((()=>h.dispose()),100)}))}));var d2=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},f2=function(t,i){return function(e,s){i(e,s,t)}};const g2=za("ICodeLensCache");class A2{constructor(t,i){this.lineCount=t,this.data=i}}let p2=class{constructor(t){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new Kf(20,.75),lc(Wn,(()=>t.remove("codelens/cache",1)));const i="codelens/cache2",e=t.get(i,1,"{}");this._deserialize(e),he.once(t.onWillSaveState)((e=>{e.reason===aH.SHUTDOWN&&t.store(i,this._serialize(),1,1)}))}put(t,i){const e=i.lenses.map((t=>{var i;return{range:t.symbol.range,command:t.symbol.command&&{id:"",title:(i=t.symbol.command)===null||i===void 0?void 0:i.title}}})),s=new l2;s.add({lenses:e,dispose:()=>{}},this._fakeProvider);const n=new A2(t.getLineCount(),s);this._cache.set(t.uri.toString(),n)}get(t){const i=this._cache.get(t.uri.toString());return i&&i.lineCount===t.getLineCount()?i.data:void 0}delete(t){this._cache.delete(t.uri.toString())}_serialize(){const t=Object.create(null);for(const[i,e]of this._cache){const s=new Set;for(const t of e.data.lenses)s.add(t.symbol.range.startLineNumber);t[i]={lineCount:e.lineCount,lines:[...s.values()]}}return JSON.stringify(t)}_deserialize(t){try{const i=JSON.parse(t);for(const t in i){const e=i[t],s=[];for(const t of e.lines)s.push({range:new Es(t,1,t,11)});const n=new l2;n.add({lenses:s,dispose(){}},this._fakeProvider),this._cache.set(t,new A2(e.lineCount,n))}}catch{}}};p2=d2([f2(0,cH)],p2),Hd(g2,p2,1);class w2{constructor(t,i,e){this.afterColumn=1073741824,this.afterLineNumber=t,this.heightInPx=i,this._onHeight=e,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(t){this._lastHeight===void 0?this._lastHeight=t:this._lastHeight!==t&&(this._lastHeight=t,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class m2{constructor(t,i){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=t,this._id="codelens.widget-"+m2._idPool++,this.updatePosition(i),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(t,i){this._commands.clear();const e=[];let s=!1;for(let i=0;i<t.length;i++){const n=t[i];if(n&&(s=!0,n.command)){const s=kT(n.command.title.trim());if(n.command.id){const t="c"+m2._idPool++;e.push(ha("a",{id:t,title:n.command.tooltip,role:"button"},...s)),this._commands.set(t,n.command)}else e.push(ha("span",{title:n.command.tooltip},...s));i+1<t.length&&e.push(ha("span",void 0," | "))}}s?(sa(this._domNode,...e),this._isEmpty&&i&&this._domNode.classList.add("fadein"),this._isEmpty=!1):sa(this._domNode,ha("span",void 0,"no commands"))}getCommand(t){return t.parentElement===this._domNode?this._commands.get(t.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(t){const i=this._editor.getModel().getLineFirstNonWhitespaceColumn(t);this._widgetPosition={position:{lineNumber:t,column:i},preference:[1]}}getPosition(){return this._widgetPosition||null}}m2._idPool=0;class v2{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(t,i){this._addDecorations.push(t),this._addDecorationsCallbacks.push(i)}removeDecoration(t){this._removeDecorations.push(t)}commit(t){const i=t.deltaDecorations(this._removeDecorations,this._addDecorations);for(let t=0,e=i.length;t<e;t++)this._addDecorationsCallbacks[t](i[t])}}const b2=DF.register({collapseOnReplaceEdit:!0,description:"codelens"});class y2{constructor(t,i,e,s,n,o){let r;this._isDisposed=!1,this._editor=i,this._data=t,this._decorationIds=[];const h=[];this._data.forEach(((t,i)=>{t.symbol.command&&h.push(t.symbol),e.addDecoration({range:t.symbol.range,options:b2},(t=>this._decorationIds[i]=t)),r=r?Es.plusRange(r,t.symbol.range):Es.lift(t.symbol.range)})),this._viewZone=new w2(r.startLineNumber-1,n,o),this._viewZoneId=s.addZone(this._viewZone),h.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(h,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new m2(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(t,i){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],i==null||i.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((t,i)=>{const e=this._editor.getModel().getDecorationRange(t),s=this._data[i].symbol;return!(!e||Es.isEmpty(s.range)!==e.isEmpty())}))}updateCodeLensSymbols(t,i){this._decorationIds.forEach(i.removeDecoration,i),this._decorationIds=[],this._data=t,this._data.forEach(((t,e)=>{i.addDecoration({range:t.symbol.range,options:b2},(t=>this._decorationIds[e]=t))}))}updateHeight(t,i){this._viewZone.heightInPx=t,i.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(t){if(!this._viewZone.isVisible())return null;for(let i=0;i<this._decorationIds.length;i++){const e=t.getDecorationRange(this._decorationIds[i]);e&&(this._data[i].symbol.range=e)}return this._data}updateCommands(t){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(t,!0);for(let i=0;i<this._data.length;i++){const e=t[i];if(e){const{symbol:t}=this._data[i];t.command=e.command||t.command}}}getCommand(t){var i;return(i=this._contentWidget)===null||i===void 0?void 0:i.getCommand(t)}getLineNumber(){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return t?t.startLineNumber:-1}update(t){if(this.isValid()){const i=this._editor.getModel().getDecorationRange(this._decorationIds[0]);i&&(this._viewZone.afterLineNumber=i.startLineNumber-1,t.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(i.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var k2=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},x2=function(t,i){return function(e,s){i(e,s,t)}};let C2=class{constructor(t,i,e,s,n,o){this._editor=t,this._languageFeaturesService=i,this._commandService=s,this._notificationService=n,this._codeLensCache=o,this._disposables=new Zi,this._localToDispose=new Zi,this._lenses=[],this._oldCodeLensModels=new Zi,this._provideCodeLensDebounce=e.for(i.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=e.for(i.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new Er((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((t=>{(t.hasChanged(50)||t.hasChanged(19)||t.hasChanged(18))&&this._updateLensStyle(),t.hasChanged(17)&&this._onModelChange()}))),this._disposables.add(i.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var t;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(t=this._currentCodeLensModel)===null||t===void 0||t.dispose()}_getLayoutInfo(){const t=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));let i=this._editor.getOption(19);return(!i||i<5)&&(i=.9*this._editor.getOption(52)|0),{fontSize:i,codeLensHeight:i*t|0}}_updateLensStyle(){const{codeLensHeight:t,fontSize:i}=this._getLayoutInfo(),e=this._editor.getOption(18),s=this._editor.getOption(50),{style:n}=this._editor.getContainerDomNode();n.setProperty("--vscode-editorCodeLens-lineHeight",`${t}px`),n.setProperty("--vscode-editorCodeLens-fontSize",`${i}px`),n.setProperty("--vscode-editorCodeLens-fontFeatureSettings",s.fontFeatureSettings),e&&(n.setProperty("--vscode-editorCodeLens-fontFamily",e),n.setProperty("--vscode-editorCodeLens-fontFamilyDefault",Li.fontFamily)),this._editor.changeViewZones((i=>{for(const e of this._lenses)e.updateHeight(t,i)}))}_localDispose(){var t,i,e;(t=this._getCodeLensModelPromise)===null||t===void 0||t.cancel(),this._getCodeLensModelPromise=void 0,(i=this._resolveCodeLensesPromise)===null||i===void 0||i.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose()}_onModelChange(){this._localDispose();const t=this._editor.getModel();if(!t||!this._editor.getOption(17)||t.isTooLargeForTokenization())return;const i=this._codeLensCache.get(t);if(i&&this._renderCodeLensSymbols(i),!this._languageFeaturesService.codeLensProvider.has(t))return void(i&&yr((()=>{const e=this._codeLensCache.get(t);i===e&&(this._codeLensCache.delete(t),this._onModelChange())}),3e4,this._localToDispose));for(const i of this._languageFeaturesService.codeLensProvider.all(t))if(typeof i.onDidChange=="function"){const t=i.onDidChange((()=>e.schedule()));this._localToDispose.add(t)}const e=new Er((()=>{var i;const s=Date.now();(i=this._getCodeLensModelPromise)===null||i===void 0||i.cancel(),this._getCodeLensModelPromise=Ar((i=>u2(this._languageFeaturesService.codeLensProvider,t,i))),this._getCodeLensModelPromise.then((i=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=i,this._codeLensCache.put(t,i);const n=this._provideCodeLensDebounce.update(t,Date.now()-s);e.delay=n,this._renderCodeLensSymbols(i),this._resolveCodeLensesInViewportSoon()}),Oi)}),this._provideCodeLensDebounce.get(t));this._localToDispose.add(e),this._localToDispose.add(qi((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{var t;this._editor.changeDecorations((t=>{this._editor.changeViewZones((i=>{const e=[];let s=-1;this._lenses.forEach((t=>{t.isValid()&&s!==t.getLineNumber()?(t.update(i),s=t.getLineNumber()):e.push(t)}));const n=new v2;e.forEach((t=>{t.dispose(n,i),this._lenses.splice(this._lenses.indexOf(t),1)})),n.commit(t)}))})),e.schedule(),this._resolveCodeLensesScheduler.cancel(),(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((()=>{e.schedule()}))),this._localToDispose.add(this._editor.onDidBlurEditorText((()=>{e.cancel()}))),this._localToDispose.add(this._editor.onDidScrollChange((t=>{t.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(qi((()=>{if(this._editor.getModel()){const t=MJ.capture(this._editor);this._editor.changeDecorations((t=>{this._editor.changeViewZones((i=>{this._disposeAllLenses(t,i)}))})),t.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((t=>{if(t.target.type!==9)return;let i=t.target.element;if((i==null?void 0:i.tagName)==="SPAN"&&(i=i.parentElement),(i==null?void 0:i.tagName)==="A")for(const t of this._lenses){const e=t.getCommand(i);if(e){this._commandService.executeCommand(e.id,...e.arguments||[]).catch((t=>this._notificationService.error(t)));break}}}))),e.schedule()}_disposeAllLenses(t,i){const e=new v2;for(const t of this._lenses)t.dispose(e,i);t&&e.commit(t),this._lenses.length=0}_renderCodeLensSymbols(t){if(!this._editor.hasModel())return;const i=this._editor.getModel().getLineCount(),e=[];let s;for(const n of t.lenses){const t=n.symbol.range.startLineNumber;t<1||t>i||(s&&s[s.length-1].symbol.range.startLineNumber===t?s.push(n):(s=[n],e.push(s)))}if(!e.length&&!this._lenses.length)return;const n=MJ.capture(this._editor),o=this._getLayoutInfo();this._editor.changeDecorations((t=>{this._editor.changeViewZones((i=>{const s=new v2;let n=0,r=0;for(;r<e.length&&n<this._lenses.length;){const t=e[r][0].symbol.range.startLineNumber,h=this._lenses[n].getLineNumber();h<t?(this._lenses[n].dispose(s,i),this._lenses.splice(n,1)):h===t?(this._lenses[n].updateCodeLensSymbols(e[r],s),r++,n++):(this._lenses.splice(n,0,new y2(e[r],this._editor,s,i,o.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),n++,r++)}for(;n<this._lenses.length;)this._lenses[n].dispose(s,i),this._lenses.splice(n,1);for(;r<e.length;)this._lenses.push(new y2(e[r],this._editor,s,i,o.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),r++;s.commit(t)}))})),n.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var t;(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0;const i=this._editor.getModel();if(!i)return;const e=[],s=[];if(this._lenses.forEach((t=>{const n=t.computeIfNecessary(i);n&&(e.push(n),s.push(t))})),e.length===0)return;const n=Date.now(),o=Ar((t=>{const n=e.map(((e,n)=>{const o=new Array(e.length),r=e.map(((e,s)=>e.symbol.command||typeof e.provider.resolveCodeLens!="function"?(o[s]=e.symbol,Promise.resolve(void 0)):Promise.resolve(e.provider.resolveCodeLens(i,e.symbol,t)).then((t=>{o[s]=t}),zi)));return Promise.all(r).then((()=>{t.isCancellationRequested||s[n].isDisposed()||s[n].updateCommands(o)}))}));return Promise.all(n)}));this._resolveCodeLensesPromise=o,this._resolveCodeLensesPromise.then((()=>{const t=this._resolveCodeLensesDebounce.update(i,Date.now()-n);this._resolveCodeLensesScheduler.delay=t,this._currentCodeLensModel&&this._codeLensCache.put(i,this._currentCodeLensModel),this._oldCodeLensModels.clear(),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(t=>{Oi(t),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}async getModel(){var t;return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,!((t=this._currentCodeLensModel)===null||t===void 0)&&t.isDisposed?void 0:this._currentCodeLensModel}};C2.ID="css.editor.codeLens",C2=k2([x2(1,jA),x2(2,dR),x2(3,$a),x2(4,wL),x2(5,g2)],C2),Bu(C2.ID,C2,1),Cu(class extends vu{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:QC.hasCodeLensProvider,label:st(0,"Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(t,i){if(!i.hasModel())return;const e=t.get(kP),s=t.get($a),n=t.get(wL),o=i.getSelection().positionLineNumber,r=i.getContribution(C2.ID);if(!r)return;const h=await r.getModel();if(!h)return;const c=[];for(const t of h.lenses)t.symbol.command&&t.symbol.range.startLineNumber===o&&c.push({label:t.symbol.command.title,command:t.symbol.command});if(c.length===0)return;const a=await e.pick(c,{canPickMany:!1,placeHolder:st(0,"Select a command")});if(!a)return;let l=a.command;if(h.isDisposed){const t=await r.getModel(),i=t==null?void 0:t.lenses.find((t=>{var i;return t.symbol.range.startLineNumber===o&&((i=t.symbol.command)===null||i===void 0?void 0:i.title)===l.title}));if(!i||!i.symbol.command)return;l=i.symbol.command}try{await s.executeCommand(l.id,...l.arguments||[])}catch(t){n.error(t)}}});var E2=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},B2=function(t,i){return function(e,s){i(e,s,t)}};class D2{constructor(t,i){this._editorWorkerClient=new ZA(t,!1,"editorWorkerService",i)}async provideDocumentColors(t,i){return this._editorWorkerClient.computeDefaultDocumentColors(t.uri)}provideColorPresentations(t,i,e){const s=i.range,n=i.color,o=n.alpha,r=new CA(new yA(Math.round(255*n.red),Math.round(255*n.green),Math.round(255*n.blue),o)),h=o?CA.Format.CSS.formatRGB(r):CA.Format.CSS.formatRGBA(r),c=o?CA.Format.CSS.formatHSL(r):CA.Format.CSS.formatHSLA(r),a=o?CA.Format.CSS.formatHex(r):CA.Format.CSS.formatHexA(r),l=[];return l.push({label:h,textEdit:{range:s,text:h}}),l.push({label:c,textEdit:{range:s,text:c}}),l.push({label:a,textEdit:{range:s,text:a}}),l}}let M2=class extends te{constructor(t,i,e){super(),this._register(e.colorProvider.register("*",new D2(t,i)))}};async function S2(t,i,e,s=!0){return T2(new I2,t,i,e,s)}function F2(t,i,e,s){return Promise.resolve(e.provideColorPresentations(t,i,s))}M2=E2([B2(0,Ha),B2(1,uf),B2(2,jA)],M2),hJ(M2);class I2{constructor(){}async compute(t,i,e,s){const n=await t.provideDocumentColors(i,e);if(Array.isArray(n))for(const i of n)s.push({colorInfo:i,provider:t});return Array.isArray(n)}}class L2{constructor(){}async compute(t,i,e,s){const n=await t.provideDocumentColors(i,e);if(Array.isArray(n))for(const t of n)s.push({range:t.range,color:[t.color.red,t.color.green,t.color.blue,t.color.alpha]});return Array.isArray(n)}}class R2{constructor(t){this.colorInfo=t}async compute(t,i,e,s){const n=await t.provideColorPresentations(i,this.colorInfo,ye.None);return Array.isArray(n)&&s.push(...n),Array.isArray(n)}}async function T2(t,i,e,s,n){let o,r=!1;const h=[],c=i.ordered(e);for(let i=c.length-1;i>=0;i--){const n=c[i];if(n instanceof D2)o=n;else try{await t.compute(n,e,s,h)&&(r=!0)}catch(t){zi(t)}}return r?h:o&&n?(await t.compute(o,e,s,h),h):[]}function N2(t,i){const{colorProvider:e}=t.get(jA),s=t.get(Ha).getModel(i);if(!s)throw Wi();return{model:s,colorProviderRegistry:e,isDefaultColorDecoratorsEnabled:t.get(Id).getValue("editor.defaultColorDecorators",{resource:i})}}Xa.registerCommand("_executeDocumentColorProvider",(function(t,...i){const[e]=i;if(!(e instanceof fs))throw Wi();const{model:s,colorProviderRegistry:n,isDefaultColorDecoratorsEnabled:o}=N2(t,e);return T2(new L2,n,s,ye.None,o)})),Xa.registerCommand("_executeColorPresentationProvider",(function(t,...i){const[e,s]=i,{uri:n,range:o}=s;if(!(n instanceof fs&&Array.isArray(e)&&e.length===4&&Es.isIRange(o)))throw Wi();const{model:r,colorProviderRegistry:h,isDefaultColorDecoratorsEnabled:c}=N2(t,n),[a,l,u,d]=e;return T2(new R2({range:o,color:{red:a,green:l,blue:u,alpha:d}}),h,r,ye.None,c)}));var Q2,O2=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},z2=function(t,i){return function(e,s){i(e,s,t)}};const U2=Object.create({});let H2=Q2=class extends te{constructor(t,i,e,s){super(),this._editor=t,this._configurationService=i,this._languageFeaturesService=e,this._localToDispose=this._register(new Zi),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new Xb(this._editor),this._decoratorLimitReporter=new P2,this._colorDecorationClassRefs=this._register(new Zi),this._debounceInformation=s.for(e.colorProvider,"Document Colors",{min:Q2.RECOMPUTE_TIME}),this._register(t.onDidChangeModel((()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()}))),this._register(t.onDidChangeModelLanguage((()=>this.updateColors()))),this._register(e.colorProvider.onDidChange((()=>this.updateColors()))),this._register(t.onDidChangeConfiguration((t=>{const i=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(147);const e=i!==this._isColorDecoratorsEnabled||t.hasChanged(21),s=t.hasChanged(147);(e||s)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())}))),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(147),this.updateColors()}isEnabled(){const t=this._editor.getModel();if(!t)return!1;const i=t.getLanguageId(),e=this._configurationService.getValue(i);if(e&&typeof e=="object"){const t=e.colorDecorators;if(t&&t.enable!==void 0&&!t.enable)return t.enable}return this._editor.getOption(20)}static get(t){return t.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const t=this._editor.getModel();t&&this._languageFeaturesService.colorProvider.has(t)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._timeoutTimer||(this._timeoutTimer=new xr,this._timeoutTimer.cancelAndSet((()=>{this._timeoutTimer=null,this.beginCompute()}),this._debounceInformation.get(t)))}))),this.beginCompute())}async beginCompute(){this._computePromise=Ar((async t=>{const i=this._editor.getModel();if(!i)return[];const e=new re(!1),s=await S2(this._languageFeaturesService.colorProvider,i,t,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(i,e.elapsed()),s}));try{const t=await this._computePromise;this.updateDecorations(t),this.updateColorDecorators(t),this._computePromise=null}catch(t){Oi(t)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(t){const i=t.map((t=>({range:{startLineNumber:t.colorInfo.range.startLineNumber,startColumn:t.colorInfo.range.startColumn,endLineNumber:t.colorInfo.range.endLineNumber,endColumn:t.colorInfo.range.endColumn},options:DF.EMPTY})));this._editor.changeDecorations((e=>{this._decorationsIds=e.deltaDecorations(this._decorationsIds,i),this._colorDatas=new Map,this._decorationsIds.forEach(((i,e)=>this._colorDatas.set(i,t[e])))}))}updateColorDecorators(t){this._colorDecorationClassRefs.clear();const i=[],e=this._editor.getOption(21);for(let s=0;s<t.length&&i.length<e;s++){const{red:e,green:n,blue:o,alpha:r}=t[s].colorInfo.color,h=new yA(Math.round(255*e),Math.round(255*n),Math.round(255*o),r),c=`rgba(${h.r}, ${h.g}, ${h.b}, ${h.a})`,a=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:c}));i.push({range:{startLineNumber:t[s].colorInfo.range.startLineNumber,startColumn:t[s].colorInfo.range.startColumn,endLineNumber:t[s].colorInfo.range.endLineNumber,endColumn:t[s].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:" ",inlineClassName:`${a.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:U2}}})}const s=e<t.length&&e;this._decoratorLimitReporter.update(t.length,s),this._colorDecoratorIds.set(i)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(t){const i=this._editor.getModel();if(!i)return null;const e=i.getDecorationsInRange(Es.fromPositions(t,t)).filter((t=>this._colorDatas.has(t.id)));return e.length===0?null:this._colorDatas.get(e[0].id)}isColorDecoration(t){return this._colorDecoratorIds.has(t)}};H2.ID="editor.contrib.colorDetector",H2.RECOMPUTE_TIME=1e3,H2=Q2=O2([z2(1,Id),z2(2,jA),z2(3,dR)],H2);class P2{constructor(){this._onDidChange=new de,this._computed=0,this._limited=!1}update(t,i){t===this._computed&&i===this._limited||(this._computed=t,this._limited=i,this._onDidChange.fire())}}Bu(H2.ID,H2,1);class j2{get color(){return this._color}set color(t){this._color.equals(t)||(this._color=t,this._onDidChangeColor.fire(t))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(t){this._colorPresentations=t,this.presentationIndex>t.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(t,i,e){this.presentationIndex=e,this._onColorFlushed=new de,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new de,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new de,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=t,this._color=t,this._colorPresentations=i}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(t,i){let e=-1;for(let t=0;t<this.colorPresentations.length;t++)if(i.toLowerCase()===this.colorPresentations[t].label){e=t;break}if(e===-1){const t=i.split("(")[0].toLowerCase();for(let i=0;i<this.colorPresentations.length;i++)if(this.colorPresentations[i].label.toLowerCase().startsWith(t)){e=i;break}}e!==-1&&e!==this.presentationIndex&&(this.presentationIndex=e,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}const W2=ha;class Y2 extends te{constructor(t,i,e,s=!1){super(),this.model=i,this.showingStandaloneColorPicker=s,this._closeButton=null,this._domNode=W2(".colorpicker-header"),ia(t,this._domNode),this._pickedColorNode=ia(this._domNode,W2(".picked-color")),ia(this._pickedColorNode,W2("span.codicon.codicon-color-mode")),this._pickedColorPresentation=ia(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const n=st(0,"Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",n),this._originalColorNode=ia(this._domNode,W2(".original-color")),this._originalColorNode.style.backgroundColor=CA.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=e.getColorTheme().getColor(Dm)||CA.white,this._register(e.onDidColorThemeChange((t=>{this.backgroundColor=t.getColor(Dm)||CA.white}))),this._register(rc(this._pickedColorNode,$c.CLICK,(()=>this.model.selectNextColorPresentation()))),this._register(rc(this._originalColorNode,$c.CLICK,(()=>{this.model.color=this.model.originalColor,this.model.flushColor()}))),this._register(i.onDidChangeColor(this.onDidChangeColor,this)),this._register(i.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=CA.Format.CSS.format(i.color)||"",this._pickedColorNode.classList.toggle("light",i.color.rgba.a<.5?this.backgroundColor.isLighter():i.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new _2(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(t){this._pickedColorNode.style.backgroundColor=CA.Format.CSS.format(t)||"",this._pickedColorNode.classList.toggle("light",t.rgba.a<.5?this.backgroundColor.isLighter():t.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class _2 extends te{constructor(t){super(),this._onClicked=this._register(new de),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),ia(t,this._button);const i=document.createElement("div");i.classList.add("close-button-inner-div"),ia(this._button,i),ia(i,W2(".button"+Ka.asCSSSelector(X_("color-picker-close",Fs.close,st(0,"Icon to close the color picker"))))).classList.add("close-icon"),this._register(rc(this._button,$c.CLICK,(()=>{this._onClicked.fire()})))}}class V2 extends te{constructor(t,i,e,s=!1){super(),this.model=i,this.pixelRatio=e,this._insertButton=null,this._domNode=W2(".colorpicker-body"),ia(t,this._domNode),this._saturationBox=new J2(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new K2(this._domNode,this.model,s),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new $2(this._domNode,this.model,s),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),s&&(this._insertButton=this._register(new X2(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:t,v:i}){const e=this.model.color.hsva;this.model.color=new CA(new xA(e.h,t,i,e.a))}onDidOpacityChange(t){const i=this.model.color.hsva;this.model.color=new CA(new xA(i.h,i.s,i.v,t))}onDidHueChange(t){const i=this.model.color.hsva,e=360*(1-t);this.model.color=new CA(new xA(e===360?0:e,i.s,i.v,i.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class J2 extends te{constructor(t,i,e){super(),this.model=i,this.pixelRatio=e,this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new de,this.onColorFlushed=this._onColorFlushed.event,this._domNode=W2(".saturation-wrap"),ia(t,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",ia(this._domNode,this._canvas),this.selection=W2(".saturation-selection"),ia(this._domNode,this.selection),this.layout(),this._register(rc(this._domNode,$c.POINTER_DOWN,(t=>this.onPointerDown(t)))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(t){if(!(t.target&&t.target instanceof Element))return;this.monitor=this._register(new Lw);const i=yc(this._domNode);t.target!==this.selection&&this.onDidChangePosition(t.offsetX,t.offsetY),this.monitor.startMonitoring(t.target,t.pointerId,t.buttons,(t=>this.onDidChangePosition(t.pageX-i.left,t.pageY-i.top)),(()=>null));const e=rc(t.target.ownerDocument,$c.POINTER_UP,(()=>{this._onColorFlushed.fire(),e.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)}),!0)}onDidChangePosition(t,i){const e=Math.max(0,Math.min(1,t/this.width)),s=Math.max(0,Math.min(1,1-i/this.height));this.paintSelection(e,s),this._onDidChange.fire({s:e,v:s})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const t=this.model.color.hsva;this.paintSelection(t.s,t.v)}paint(){const t=this.model.color.hsva,i=new CA(new xA(t.h,1,1,1)),e=this._canvas.getContext("2d"),s=e.createLinearGradient(0,0,this._canvas.width,0);s.addColorStop(0,"rgba(255, 255, 255, 1)"),s.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),s.addColorStop(1,"rgba(255, 255, 255, 0)");const n=e.createLinearGradient(0,0,0,this._canvas.height);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),e.rect(0,0,this._canvas.width,this._canvas.height),e.fillStyle=CA.Format.CSS.format(i),e.fill(),e.fillStyle=s,e.fill(),e.fillStyle=n,e.fill()}paintSelection(t,i){this.selection.style.left=t*this.width+"px",this.selection.style.top=this.height-i*this.height+"px"}onDidChangeColor(t){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const i=t.hsva;this.paintSelection(i.s,i.v)}}class G2 extends te{constructor(t,i,e=!1){super(),this.model=i,this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new de,this.onColorFlushed=this._onColorFlushed.event,e?(this.domNode=ia(t,W2(".standalone-strip")),this.overlay=ia(this.domNode,W2(".standalone-overlay"))):(this.domNode=ia(t,W2(".strip")),this.overlay=ia(this.domNode,W2(".overlay"))),this.slider=ia(this.domNode,W2(".slider")),this.slider.style.top="0px",this._register(rc(this.domNode,$c.POINTER_DOWN,(t=>this.onPointerDown(t)))),this._register(i.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const t=this.getValue(this.model.color);this.updateSliderPosition(t)}onDidChangeColor(t){const i=this.getValue(t);this.updateSliderPosition(i)}onPointerDown(t){if(!(t.target&&t.target instanceof Element))return;const i=this._register(new Lw),e=yc(this.domNode);this.domNode.classList.add("grabbing"),t.target!==this.slider&&this.onDidChangeTop(t.offsetY),i.startMonitoring(t.target,t.pointerId,t.buttons,(t=>this.onDidChangeTop(t.pageY-e.top)),(()=>null));const s=rc(t.target.ownerDocument,$c.POINTER_UP,(()=>{this._onColorFlushed.fire(),s.dispose(),i.stopMonitoring(!0),this.domNode.classList.remove("grabbing")}),!0)}onDidChangeTop(t){const i=Math.max(0,Math.min(1,1-t/this.height));this.updateSliderPosition(i),this._onDidChange.fire(i)}updateSliderPosition(t){this.slider.style.top=(1-t)*this.height+"px"}}class K2 extends G2{constructor(t,i,e=!1){super(t,i,e),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(t){super.onDidChangeColor(t);const{r:i,g:e,b:s}=t.rgba,n=new CA(new yA(i,e,s,1)),o=new CA(new yA(i,e,s,0));this.overlay.style.background=`linear-gradient(to bottom, ${n} 0%, ${o} 100%)`}getValue(t){return t.hsva.a}}class $2 extends G2{constructor(t,i,e=!1){super(t,i,e),this.domNode.classList.add("hue-strip")}getValue(t){return 1-t.hsva.h/360}}class X2 extends te{constructor(t){super(),this._onClicked=this._register(new de),this.onClicked=this._onClicked.event,this._button=ia(t,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(rc(this._button,$c.CLICK,(()=>{this._onClicked.fire()})))}get button(){return this._button}}class q2 extends Yy{constructor(t,i,e,s,n=!1){super(),this.model=i,this.pixelRatio=e,this._register(xa.getInstance(Gh(t)).onDidChange((()=>this.layout())));const o=W2(".colorpicker-widget");t.appendChild(o),this.header=this._register(new Y2(o,this.model,s,n)),this.body=this._register(new V2(o,this.model,this.pixelRatio,n))}layout(){this.body.layout()}}var Z2=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},t4=function(t,i){return function(e,s){i(e,s,t)}};class i4{constructor(t,i,e,s){this.owner=t,this.range=i,this.model=e,this.provider=s,this.forceShowAtRange=!0}isValidForHoverAnchor(t){return t.type===1&&this.range.startColumn<=t.range.startColumn&&this.range.endColumn>=t.range.endColumn}}let e4=class{constructor(t,i){this._editor=t,this._themeService=i,this.hoverOrdinal=2}computeSync(t,i){return[]}computeAsync(t,i,e){return Lr.fromPromise(this._computeAsync(t,i,e))}async _computeAsync(t,i,e){if(!this._editor.hasModel())return[];const s=H2.get(this._editor);if(!s)return[];for(const t of i){if(!s.isColorDecoration(t))continue;const i=s.getColorData(t.range.getStartPosition());if(i)return[await o4(this,this._editor.getModel(),i.colorInfo,i.provider)]}return[]}renderHoverParts(t,i){return r4(this,this._editor,this._themeService,i,t)}};e4=Z2([t4(1,Fk)],e4);class s4{constructor(t,i,e,s){this.owner=t,this.range=i,this.model=e,this.provider=s}}let n4=class{constructor(t,i){this._editor=t,this._themeService=i,this._color=null}async createColorHover(t,i,e){if(!this._editor.hasModel()||!H2.get(this._editor))return null;const s=await S2(e,this._editor.getModel(),ye.None);let n=null,o=null;for(const i of s){const e=i.colorInfo;Es.containsRange(e.range,t.range)&&(n=e,o=i.provider)}const r=n??t,h=o??i,c=!!n;return{colorHover:await o4(this,this._editor.getModel(),r,h),foundInEditor:c}}async updateEditorModel(t){if(!this._editor.hasModel())return;const i=t.model;let e=new Es(t.range.startLineNumber,t.range.startColumn,t.range.endLineNumber,t.range.endColumn);this._color&&(await c4(this._editor.getModel(),i,this._color,e,t),e=h4(this._editor,e,i))}renderHoverParts(t,i){return r4(this,this._editor,this._themeService,i,t)}set color(t){this._color=t}get color(){return this._color}};async function o4(t,i,e,s){const n=i.getValueInRange(e.range),{red:o,green:r,blue:h,alpha:c}=e.color,a=new yA(Math.round(255*o),Math.round(255*r),Math.round(255*h),c),l=new CA(a),u=await F2(i,e,s,ye.None),d=new j2(l,[],0);return d.colorPresentations=u||[],d.guessColorPresentation(l,n),t instanceof e4?new i4(t,Es.lift(e.range),d,s):new s4(t,Es.lift(e.range),d,s)}function r4(t,i,e,s,n){if(s.length===0||!i.hasModel())return te.None;if(n.setMinimumDimensions){const t=i.getOption(67)+8;n.setMinimumDimensions(new vc(302,t))}const o=new Zi,r=s[0],h=i.getModel(),c=r.model,a=o.add(new q2(n.fragment,c,i.getOption(143),e,t instanceof n4));n.setColorPicker(a);let l=!1,u=new Es(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);if(t instanceof n4){const i=s[0].model.color;t.color=i,c4(h,c,i,u,r),o.add(c.onColorFlushed((i=>{t.color=i})))}else o.add(c.onColorFlushed((async t=>{await c4(h,c,t,u,r),l=!0,u=h4(i,u,c)})));return o.add(c.onDidChangeColor((t=>{c4(h,c,t,u,r)}))),o.add(i.onDidChangeModelContent((t=>{l?l=!1:(n.hide(),i.focus())}))),o}function h4(t,i,e){var s,n;const o=[],r=(s=e.presentation.textEdit)!==null&&s!==void 0?s:{range:i,text:e.presentation.label,forceMoveMarkers:!1};o.push(r),e.presentation.additionalTextEdits&&o.push(...e.presentation.additionalTextEdits);const h=Es.lift(r.range),c=t.getModel()._setTrackedRange(null,h,3);return t.executeEdits("colorpicker",o),t.pushUndoStop(),(n=t.getModel()._getTrackedRange(c))!==null&&n!==void 0?n:h}async function c4(t,i,e,s,n){const o=await F2(t,{range:s,color:{red:e.rgba.r/255,green:e.rgba.g/255,blue:e.rgba.b/255,alpha:e.rgba.a}},n.provider,ye.None);i.colorPresentations=o||[]}function a4(t,i){return!!t[i]}n4=Z2([t4(1,Fk)],n4);class l4{constructor(t,i){this.target=t.target,this.isLeftClick=t.event.leftButton,this.isMiddleClick=t.event.middleButton,this.isRightClick=t.event.rightButton,this.hasTriggerModifier=a4(t.event,i.triggerModifier),this.hasSideBySideModifier=a4(t.event,i.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=t.event.detail<=1}}class u4{constructor(t,i){this.keyCodeIsTriggerKey=t.keyCode===i.triggerKey,this.keyCodeIsSideBySideKey=t.keyCode===i.triggerSideBySideKey,this.hasTriggerModifier=a4(t,i.triggerModifier)}}class d4{constructor(t,i,e,s){this.triggerKey=t,this.triggerModifier=i,this.triggerSideBySideKey=e,this.triggerSideBySideModifier=s}equals(t){return this.triggerKey===t.triggerKey&&this.triggerModifier===t.triggerModifier&&this.triggerSideBySideKey===t.triggerSideBySideKey&&this.triggerSideBySideModifier===t.triggerSideBySideModifier}}function f4(t){return t==="altKey"?kt?new d4(57,"metaKey",6,"altKey"):new d4(5,"ctrlKey",6,"altKey"):kt?new d4(6,"altKey",57,"metaKey"):new d4(6,"altKey",5,"ctrlKey")}class g4 extends te{constructor(t,i){var e;super(),this._onMouseMoveOrRelevantKeyDown=this._register(new de),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new de),this.onExecute=this._onExecute.event,this._onCancel=this._register(new de),this.onCancel=this._onCancel.event,this._editor=t,this._extractLineNumberFromMouseEvent=(e=i==null?void 0:i.extractLineNumberFromMouseEvent)!==null&&e!==void 0?e:t=>t.target.position?t.target.position.lineNumber:0,this._opts=f4(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration((t=>{if(t.hasChanged(78)){const t=f4(this._editor.getOption(78));if(this._opts.equals(t))return;this._opts=t,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}}))),this._register(this._editor.onMouseMove((t=>this._onEditorMouseMove(new l4(t,this._opts))))),this._register(this._editor.onMouseDown((t=>this._onEditorMouseDown(new l4(t,this._opts))))),this._register(this._editor.onMouseUp((t=>this._onEditorMouseUp(new l4(t,this._opts))))),this._register(this._editor.onKeyDown((t=>this._onEditorKeyDown(new u4(t,this._opts))))),this._register(this._editor.onKeyUp((t=>this._onEditorKeyUp(new u4(t,this._opts))))),this._register(this._editor.onMouseDrag((()=>this._resetHandler()))),this._register(this._editor.onDidChangeCursorSelection((t=>this._onDidChangeCursorSelection(t)))),this._register(this._editor.onDidChangeModel((t=>this._resetHandler()))),this._register(this._editor.onDidChangeModelContent((()=>this._resetHandler()))),this._register(this._editor.onDidScrollChange((t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()})))}_onDidChangeCursorSelection(t){t.selection&&t.selection.startColumn!==t.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(t){this._lastMouseMoveEvent=t,this._onMouseMoveOrRelevantKeyDown.fire([t,null])}_onEditorMouseDown(t){this._hasTriggerKeyOnMouseDown=t.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(t)}_onEditorMouseUp(t){const i=this._extractLineNumberFromMouseEvent(t);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===i&&this._onExecute.fire(t)}_onEditorKeyDown(t){this._lastMouseMoveEvent&&(t.keyCodeIsTriggerKey||t.keyCodeIsSideBySideKey&&t.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,t]):t.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(t){t.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var A4=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},p4=function(t,i){return function(e,s){i(e,s,t)}};let w4=class extends yL{constructor(t,i,e,s,n,o,r,h,c,a,l,u,d){super(t,{...s.getRawOptions(),overflowWidgetsDomNode:s.getOverflowWidgetsDomNode()},e,n,o,r,h,c,a,l,u,d),this._parentEditor=s,this._overwriteOptions=i,super.updateOptions(this._overwriteOptions),this._register(s.onDidChangeConfiguration((t=>this._onParentConfigurationChanged(t))))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(t){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(t){q(this._overwriteOptions,t,!0),super.updateOptions(this._overwriteOptions)}};w4=A4([p4(4,Oa),p4(5,Ua),p4(6,$a),p4(7,Nl),p4(8,Fk),p4(9,wL),p4(10,yw),p4(11,uf),p4(12,jA)],w4);const m4=new CA(new yA(0,122,204)),v4={showArrow:!0,showFrame:!0,className:"",frameColor:m4,arrowColor:m4,keepEditorSelection:!1};class b4{constructor(t,i,e,s,n,o,r,h){this.id="",this.domNode=t,this.afterLineNumber=i,this.afterColumn=e,this.heightInLines=s,this.showInHiddenAreas=r,this.ordinal=h,this._onDomNodeTop=n,this._onComputedHeight=o}onDomNodeTop(t){this._onDomNodeTop(t)}onComputedHeight(t){this._onComputedHeight(t)}}class y4{constructor(t,i){this._id=t,this._domNode=i}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class k4{constructor(t){this._editor=t,this._ruleName=k4._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),Vc(this._ruleName)}set color(t){this._color!==t&&(this._color=t,this._updateStyle())}set height(t){this._height!==t&&(this._height=t,this._updateStyle())}_updateStyle(){Vc(this._ruleName),_c(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `)}show(t){t.column===1&&(t={lineNumber:t.lineNumber,column:2}),this._decorations.set([{range:Es.fromPositions(t),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}}k4._IdGenerator=new zN(".arrow-decoration-");class x4{constructor(t,i={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new Zi,this.container=null,this._isShowing=!1,this.editor=t,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=G(i),q(this.options,v4,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange((t=>{const i=this._getWidth(t);this.domNode.style.width=i+"px",this.domNode.style.left=this._getLeft(t)+"px",this._onWidth(i)})))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones((t=>{this._viewZone&&t.removeZone(this._viewZone.id),this._viewZone=null})),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new k4(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(t){t.frameColor&&(this.options.frameColor=t.frameColor),t.arrowColor&&(this.options.arrowColor=t.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const t=this.options.frameColor.toString();this.container.style.borderTopColor=t,this.container.style.borderBottomColor=t}if(this._arrow&&this.options.arrowColor){const t=this.options.arrowColor.toString();this._arrow.color=t}}_getWidth(t){return t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}_getLeft(t){return t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?t.minimap.minimapWidth:0}_onViewZoneTop(t){this.domNode.style.top=t+"px"}_onViewZoneHeight(t){var i;if(this.domNode.style.height=`${t}px`,this.container){const i=t-this._decoratingElementsHeight();this.container.style.height=`${i}px`;const e=this.editor.getLayoutInfo();this._doLayout(i,this._getWidth(e))}(i=this._resizeSash)===null||i===void 0||i.layout()}get position(){const t=this._positionMarkerId.getRange(0);if(t)return t.getStartPosition()}show(t,i){const e=Es.isIRange(t)?Es.lift(t):Es.fromPositions(t);this._isShowing=!0,this._showImpl(e,i),this._isShowing=!1,this._positionMarkerId.set([{range:e,options:DF.EMPTY}])}hide(){var t;this._viewZone&&(this.editor.changeViewZones((t=>{this._viewZone&&t.removeZone(this._viewZone.id)})),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(t=this._arrow)===null||t===void 0||t.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){const t=this.editor.getOption(67);let i=0;return this.options.showArrow&&(i+=2*Math.round(t/3)),this.options.showFrame&&(i+=2*Math.round(t/9)),i}_showImpl(t,i){const e=t.getStartPosition(),s=this.editor.getLayoutInfo(),n=this._getWidth(s);this.domNode.style.width=`${n}px`,this.domNode.style.left=this._getLeft(s)+"px";const o=document.createElement("div");o.style.overflow="hidden";const r=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){const t=Math.max(12,this.editor.getLayoutInfo().height/r*.8);i=Math.min(i,t)}let h=0,c=0;if(this._arrow&&this.options.showArrow&&(h=Math.round(r/3),this._arrow.height=h,this._arrow.show(e)),this.options.showFrame&&(c=Math.round(r/9)),this.editor.changeViewZones((t=>{this._viewZone&&t.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new b4(o,e.lineNumber,e.column,i,(t=>this._onViewZoneTop(t)),(t=>this._onViewZoneHeight(t)),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=t.addZone(this._viewZone),this._overlayWidget=new y4("vs.editor.contrib.zoneWidget"+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)})),this.container&&this.options.showFrame){const t=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=t+"px",this.container.style.borderBottomWidth=t+"px"}const a=i*r-this._decoratingElementsHeight();this.container&&(this.container.style.top=h+"px",this.container.style.height=a+"px",this.container.style.overflow="hidden"),this._doLayout(a,n),this.options.keepEditorSelection||this.editor.setSelection(t);const l=this.editor.getModel();if(l){const i=l.validateRange(new Es(t.startLineNumber,1,t.endLineNumber+1,1));this.revealRange(i,i.startLineNumber===l.getLineCount())}}revealRange(t,i){i?this.editor.revealLineNearTop(t.endLineNumber,0):this.editor.revealRange(t,0)}setCssClass(t,i){this.container&&(i&&this.container.classList.remove(i),this.container.classList.add(t))}_onWidth(t){}_doLayout(t,i){}_relayout(t){this._viewZone&&this._viewZone.heightInLines!==t&&this.editor.changeViewZones((i=>{this._viewZone&&(this._viewZone.heightInLines=t,i.layoutZone(this._viewZone.id))}))}_initSash(){if(this._resizeSash)return;let t;this._resizeSash=this._disposables.add(new _P(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0),this._disposables.add(this._resizeSash.onDidStart((i=>{this._viewZone&&(t={startY:i.startY,heightInLines:this._viewZone.heightInLines})}))),this._disposables.add(this._resizeSash.onDidEnd((()=>{t=void 0}))),this._disposables.add(this._resizeSash.onDidChange((i=>{if(t){const e=(i.currentY-t.startY)/this.editor.getOption(67),s=e<0?Math.ceil(e):Math.floor(e),n=t.heightInLines+s;n>5&&n<35&&this._relayout(n)}})))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const t=this.editor.getLayoutInfo();return t.width-t.minimap.minimapWidth}}var C4=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},E4=function(t,i){return function(e,s){i(e,s,t)}};const B4=za("IPeekViewService");var D4;Hd(B4,class{constructor(){this._widgets=new Map}addExclusiveWidget(t,i){const e=this._widgets.get(t);e&&(e.listener.dispose(),e.widget.dispose()),this._widgets.set(t,{widget:i,listener:i.onDidClose((()=>{const e=this._widgets.get(t);e&&e.widget===i&&(e.listener.dispose(),this._widgets.delete(t))}))})}},1),function(t){t.inPeekEditor=new Tl("inReferenceSearchEditor",!0,st(0,"Whether the current code editor is embedded inside peek")),t.notInPeekEditor=t.inPeekEditor.toNegated()}(D4||(D4={}));let M4=class{constructor(t,i){t instanceof w4&&D4.inPeekEditor.bindTo(i)}dispose(){}};M4.ID="editor.contrib.referenceController",M4=C4([E4(1,Nl)],M4),Bu(M4.ID,M4,0);const S4={headerBackgroundColor:CA.white,primaryHeadingColor:CA.fromHex("#333333"),secondaryHeadingColor:CA.fromHex("#6c6c6cb3")};let F4=class extends x4{constructor(t,i,e){super(t,i),this.instantiationService=e,this._onDidClose=new de,this.onDidClose=this._onDidClose.event,q(this.options,S4,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(t){const i=this.options;t.headerBackgroundColor&&(i.headerBackgroundColor=t.headerBackgroundColor),t.primaryHeadingColor&&(i.primaryHeadingColor=t.primaryHeadingColor),t.secondaryHeadingColor&&(i.secondaryHeadingColor=t.secondaryHeadingColor),super.style(t)}_applyStyles(){super._applyStyles();const t=this.options;this._headElement&&t.headerBackgroundColor&&(this._headElement.style.backgroundColor=t.headerBackgroundColor.toString()),this._primaryHeading&&t.primaryHeadingColor&&(this._primaryHeading.style.color=t.primaryHeadingColor.toString()),this._secondaryHeading&&t.secondaryHeadingColor&&(this._secondaryHeading.style.color=t.secondaryHeadingColor.toString()),this._bodyElement&&t.frameColor&&(this._bodyElement.style.borderColor=t.frameColor.toString())}_fillContainer(t){this.setCssClass("peekview-widget"),this._headElement=ha(".head"),this._bodyElement=ha(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),t.appendChild(this._headElement),t.appendChild(this._bodyElement)}_fillHead(t,i){this._titleElement=ha(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),cc(this._titleElement,"click",(t=>this._onTitleClick(t)))),ia(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=ha("span.filename"),this._secondaryHeading=ha("span.dirname"),this._metaHeading=ha("span.meta"),ia(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const e=ha(".peekview-actions");ia(this._headElement,e);const s=this._getActionBarOptions();this._actionbarWidget=new RH(e,s),this._disposables.add(this._actionbarWidget),i||this._actionbarWidget.push(new ja("peekview.close",st(0,"Close"),Ka.asClassName(Fs.close),!0,(()=>(this.dispose(),Promise.resolve()))),{label:!1,icon:!0})}_fillTitleIcon(t){}_getActionBarOptions(){return{actionViewItemProvider:LH.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(t){}setTitle(t,i){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=t,this._primaryHeading.setAttribute("title",t),i?this._secondaryHeading.innerText=i:nc(this._secondaryHeading))}setMetaTitle(t){this._metaHeading&&(t?(this._metaHeading.innerText=t,ca(this._metaHeading)):aa(this._metaHeading))}_doLayout(t,i){if(!this._isShowing&&t<0)return void this.dispose();const e=Math.ceil(1.2*this.editor.getOption(67)),s=Math.round(t-(e+2));this._doLayoutHead(e,i),this._doLayoutBody(s,i)}_doLayoutHead(t,i){this._headElement&&(this._headElement.style.height=`${t}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(t,i){this._bodyElement&&(this._bodyElement.style.height=`${t}px`)}};F4=C4([E4(2,Oa)],F4);const I4=Ow("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:CA.black,hcLight:CA.white},st(0,"Background color of the peek view title area.")),L4=Ow("peekViewTitleLabel.foreground",{dark:CA.white,light:CA.black,hcDark:CA.white,hcLight:hm},st(0,"Color of the peek view title.")),R4=Ow("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},st(0,"Color of the peek view title info.")),T4=Ow("peekView.border",{dark:pm,light:pm,hcDark:$w,hcLight:$w},st(0,"Color of the peek view borders and arrow.")),N4=Ow("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:CA.black,hcLight:CA.white},st(0,"Background color of the peek view result list."));Ow("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:CA.white,hcLight:hm},st(0,"Foreground color for line nodes in the peek view result list.")),Ow("peekViewResult.fileForeground",{dark:CA.white,light:"#1E1E1E",hcDark:CA.white,hcLight:hm},st(0,"Foreground color for file nodes in the peek view result list.")),Ow("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},st(0,"Background color of the selected entry in the peek view result list.")),Ow("peekViewResult.selectionForeground",{dark:CA.white,light:"#6C6C6C",hcDark:CA.white,hcLight:hm},st(0,"Foreground color of the selected entry in the peek view result list."));const Q4=Ow("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:CA.black,hcLight:CA.white},st(0,"Background color of the peek view editor."));Ow("peekViewEditorGutter.background",{dark:Q4,light:Q4,hcDark:Q4,hcLight:Q4},st(0,"Background color of the gutter in the peek view editor.")),Ow("peekViewEditorStickyScroll.background",{dark:Q4,light:Q4,hcDark:Q4,hcLight:Q4},st(0,"Background color of sticky scroll in the peek view editor.")),Ow("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},st(0,"Match highlight color in the peek view result list.")),Ow("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},st(0,"Match highlight color in the peek view editor.")),Ow("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:Xw,hcLight:Xw},st(0,"Match highlight border in the peek view editor."));class O4{constructor(t,i,e,s){this.isProviderFirst=t,this.parent=i,this.link=e,this._rangeCallback=s,this.id=UN.nextId()}get uri(){return this.link.uri}get range(){var t,i;return(i=(t=this._range)!==null&&t!==void 0?t:this.link.targetSelectionRange)!==null&&i!==void 0?i:this.link.range}set range(t){this._range=t,this._rangeCallback(this)}get ariaMessage(){var t;const i=(t=this.parent.getPreview(this))===null||t===void 0?void 0:t.preview(this.range);return i?st(0,"{0} in {1} on line {2} at column {3}",i.value,BM(this.uri),this.range.startLineNumber,this.range.startColumn):st(0,"in {0} on line {1} at column {2}",BM(this.uri),this.range.startLineNumber,this.range.startColumn)}}class z4{constructor(t){this._modelReference=t}dispose(){this._modelReference.dispose()}preview(t,i=8){const e=this._modelReference.object.textEditorModel;if(!e)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:r}=t,h=e.getWordUntilPosition({lineNumber:s,column:n-i}),c=new Es(s,h.startColumn,s,n),a=new Es(o,r,o,1073741824),l=e.getValueInRange(c).replace(/^\s+/,""),u=e.getValueInRange(t);return{value:l+u+e.getValueInRange(a).replace(/\s+$/,""),highlight:{start:l.length,end:l.length+u.length}}}}class U4{constructor(t,i){this.parent=t,this.uri=i,this.children=[],this._previews=new Jf}dispose(){$i(this._previews.values()),this._previews.clear()}getPreview(t){return this._previews.get(t.uri)}get ariaMessage(){const t=this.children.length;return t===1?st(0,"1 symbol in {0}, full path {1}",BM(this.uri),this.uri.fsPath):st(0,"{0} symbols in {1}, full path {2}",t,BM(this.uri),this.uri.fsPath)}async resolve(t){if(this._previews.size!==0)return this;for(const i of this.children)if(!this._previews.has(i.uri))try{const e=await t.createModelReference(i.uri);this._previews.set(i.uri,new z4(e))}catch(t){Oi(t)}return this}}class H4{constructor(t,i){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new de,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=t,this._title=i;const[e]=t;let s;t.sort(H4._compareReferences);for(const i of t)if(s&&xM.isEqual(s.uri,i.uri,!0)||(s=new U4(this,i.uri),this.groups.push(s)),s.children.length===0||H4._compareReferences(i,s.children[s.children.length-1])!==0){const t=new O4(e===i,s,i,(t=>this._onDidChangeReferenceRange.fire(t)));this.references.push(t),s.children.push(t)}}dispose(){$i(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new H4(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?st(0,"No results found"):this.references.length===1?st(0,"Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?st(0,"Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):st(0,"Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(t,i){const{parent:e}=t;let s=e.children.indexOf(t);const n=e.children.length,o=e.parent.groups.length;return o===1||i&&s+1<n||!i&&s>0?(s=i?(s+1)%n:(s+n-1)%n,e.children[s]):(s=e.parent.groups.indexOf(e),i?(s=(s+1)%o,e.parent.groups[s].children[0]):(s=(s+o-1)%o,e.parent.groups[s].children[e.parent.groups[s].children.length-1]))}nearestReference(t,i){const e=this.references.map(((e,s)=>({idx:s,prefixLen:po(e.uri.toString(),t.toString()),offsetDist:100*Math.abs(e.range.startLineNumber-i.lineNumber)+Math.abs(e.range.startColumn-i.column)}))).sort(((t,i)=>t.prefixLen>i.prefixLen?-1:t.prefixLen<i.prefixLen?1:t.offsetDist<i.offsetDist?-1:t.offsetDist>i.offsetDist?1:0))[0];if(e)return this.references[e.idx]}referenceAt(t,i){for(const e of this.references)if(e.uri.toString()===t.toString()&&Es.containsPosition(e.range,i))return e}firstReference(){for(const t of this.references)if(t.isProviderFirst)return t;return this.references[0]}static _compareReferences(t,i){return xM.compare(t.uri,i.uri)||Es.compareRangesUsingStarts(t.range,i.range)}}var P4,j4=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},W4=function(t,i){return function(e,s){i(e,s,t)}};let Y4=class{constructor(t){this._resolverService=t}hasChildren(t){return t instanceof H4||t instanceof U4}getChildren(t){if(t instanceof H4)return t.groups;if(t instanceof U4)return t.resolve(this._resolverService).then((t=>t.children));throw new Error("bad tree")}};Y4=j4([W4(0,Pa)],Y4);class _4{getHeight(){return 23}getTemplateId(t){return t instanceof U4?K4.id:X4.id}}let V4=class{constructor(t){this._keybindingService=t}getKeyboardNavigationLabel(t){var i;if(t instanceof O4){const e=(i=t.parent.getPreview(t))===null||i===void 0?void 0:i.preview(t.range);if(e)return e.value}return BM(t.uri)}};V4=j4([W4(0,Hx)],V4);class J4{getId(t){return t instanceof O4?t.id:t.uri}}let G4=class extends te{constructor(t,i){super(),this._labelService=i;const e=document.createElement("div");e.classList.add("reference-file"),this.file=this._register(new QY(e,{supportHighlights:!0})),this.badge=new g_(ia(e,ha(".count")),{},wH),t.appendChild(e)}set(t,i){const e=MM(t.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(t.uri),this._labelService.getUriLabel(e,{relative:!0}),{title:this._labelService.getUriLabel(t.uri),matches:i});const s=t.children.length;this.badge.setCount(s),s>1?this.badge.setTitleFormat(st(0,"{0} references",s)):this.badge.setTitleFormat(st(0,"{0} reference",s))}};G4=j4([W4(1,bO)],G4);let K4=P4=class{constructor(t){this._instantiationService=t,this.templateId=P4.id}renderTemplate(t){return this._instantiationService.createInstance(G4,t)}renderElement(t,i,e){e.set(t.element,rN(t.filterData))}disposeTemplate(t){t.dispose()}};K4.id="FileReferencesRenderer",K4=P4=j4([W4(0,Oa)],K4);class $4 extends te{constructor(t){super(),this.label=this._register(new TY(t))}set(t,i){var e;const s=(e=t.parent.getPreview(t))===null||e===void 0?void 0:e.preview(t.range);if(s&&s.value){const{value:t,highlight:e}=s;i&&!mN.isDefault(i)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(t,rN(i))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(t,[e]))}else this.label.set(`${BM(t.uri)}:${t.range.startLineNumber+1}:${t.range.startColumn+1}`)}}class X4{constructor(){this.templateId=X4.id}renderTemplate(t){return new $4(t)}renderElement(t,i,e){e.set(t.element,t.filterData)}disposeTemplate(t){t.dispose()}}X4.id="OneReferenceRenderer";class q4{getWidgetAriaLabel(){return st(0,"References")}getAriaLabel(t){return t.ariaMessage}}var Z4=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},t3=function(t,i){return function(e,s){i(e,s,t)}};class i3{constructor(t,i){this._editor=t,this._model=i,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new Zi,this._callOnModelChange=new Zi,this._callOnDispose.add(this._editor.onDidChangeModel((()=>this._onModelChanged()))),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const t=this._editor.getModel();if(t){for(const i of this._model.references)if(i.uri.toString()===t.uri.toString())return void this._addDecorations(i.parent)}}_addDecorations(t){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((()=>this._onDecorationChanged())));const i=[],e=[];for(let s=0,n=t.children.length;s<n;s++){const n=t.children[s];this._decorationIgnoreSet.has(n.id)||n.uri.toString()===this._editor.getModel().uri.toString()&&(i.push({range:n.range,options:i3.DecorationOptions}),e.push(s))}this._editor.changeDecorations((s=>{const n=s.deltaDecorations([],i);for(let i=0;i<n.length;i++)this._decorations.set(n[i],t.children[e[i]])}))}_onDecorationChanged(){const t=[],i=this._editor.getModel();if(i){for(const[e,s]of this._decorations){const n=i.getDecorationRange(e);if(!n)continue;let o=!1;Es.equalsRange(n,s.range)||((Es.spansMultipleLines(n)||s.range.endColumn-s.range.startColumn!==n.endColumn-n.startColumn)&&(o=!0),o?(this._decorationIgnoreSet.add(s.id),t.push(e)):s.range=n)}for(let i=0,e=t.length;i<e;i++)this._decorations.delete(t[i]);this._editor.removeDecorations(t)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}i3.DecorationOptions=DF.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class e3{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(t){let i,e;try{const s=JSON.parse(t);i=s.ratio,e=s.heightInLines}catch{}return{ratio:i||.7,heightInLines:e||18}}}class s3 extends MY{}let n3=class extends F4{constructor(t,i,e,s,n,o,r,h,c,a,l,u){super(t,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},o),this._defaultTreeKeyboardSupport=i,this.layoutData=e,this._textModelResolverService=n,this._instantiationService=o,this._peekViewService=r,this._uriLabel=h,this._undoRedoService=c,this._keybindingService=a,this._languageService=l,this._languageConfigurationService=u,this._disposeOnNewModel=new Zi,this._callOnDispose=new Zi,this._onDidSelectReference=new de,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new vc(0,0),this._applyTheme(s.getColorTheme()),this._callOnDispose.add(s.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(t,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),$i(this._preview),$i(this._previewNotAvailableMessage),$i(this._tree),$i(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(t){const i=t.getColor(T4)||CA.transparent;this.style({arrowColor:i,frameColor:i,headerBackgroundColor:t.getColor(I4)||CA.transparent,primaryHeadingColor:t.getColor(L4),secondaryHeadingColor:t.getColor(R4)})}show(t){super.show(t,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(t){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"title"})}_fillBody(t){this.setCssClass("reference-zone-widget"),this._messageContainer=ia(t,ha("div.messages")),aa(this._messageContainer),this._splitView=new qP(t,{orientation:1}),this._previewContainer=ia(t,ha("div.preview.inline")),this._preview=this._instantiationService.createInstance(w4,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor),aa(this._previewContainer),this._previewNotAvailableMessage=new wF(st(0,"no preview available"),ef,wF.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=ia(t,ha("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new q4,keyboardNavigationLabelProvider:this._instantiationService.createInstance(V4),identityProvider:new J4,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:N4}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(cc(this._treeContainer,"keydown",(t=>{t.equals(9)&&(this._keybindingService.dispatchEvent(t,t.target),t.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(s3,"ReferencesWidget",this._treeContainer,new _4,[this._instantiationService.createInstance(K4),this._instantiationService.createInstance(X4)],this._instantiationService.createInstance(Y4),i),this._splitView.addView({onDidChange:he.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:t=>{this._preview.layout({height:this._dim.height,width:t})}},XP.Distribute),this._splitView.addView({onDidChange:he.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:t=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${t}px`,this._tree.layout(this._dim.height,t)}},XP.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)}),void 0));const e=(t,i)=>{t instanceof O4&&(i==="show"&&this._revealReference(t,!1),this._onDidSelectReference.fire({element:t,kind:i,source:"tree"}))};this._tree.onDidOpen((t=>{t.sideBySide?e(t.element,"side"):t.editorOptions.pinned?e(t.element,"goto"):e(t.element,"show")})),aa(this._treeContainer)}_onWidth(t){this._dim&&this._doLayoutBody(this._dim.height,t)}_doLayoutBody(t,i){super._doLayoutBody(t,i),this._dim=new vc(i,t),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(i),this._splitView.resizeView(0,i*this.layoutData.ratio)}setSelection(t){return this._revealReference(t,!0).then((()=>{this._model&&(this._tree.setSelection([t]),this._tree.setFocus([t]))}))}setModel(t){return this._disposeOnNewModel.clear(),this._model=t,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=st(0,"No results"),ca(this._messageContainer),Promise.resolve(void 0)):(aa(this._messageContainer),this._decorationsManager=new i3(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((t=>this._tree.rerender(t)))),this._disposeOnNewModel.add(this._preview.onMouseDown((t=>{const{event:i,target:e}=t;if(i.detail!==2)return;const s=this._getFocusedReference();s&&this._onDidSelectReference.fire({element:{uri:s.uri,range:e.range},kind:i.ctrlKey||i.metaKey||i.altKey?"side":"open",source:"editor"})}))),this.container.classList.add("results-loaded"),ca(this._treeContainer),ca(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[t]=this._tree.getFocus();return t instanceof O4?t:t instanceof U4&&t.children.length>0?t.children[0]:void 0}async revealReference(t){await this._revealReference(t,!1),this._onDidSelectReference.fire({element:t,kind:"goto",source:"tree"})}async _revealReference(t,i){if(this._revealedReference===t)return;this._revealedReference=t,t.uri.scheme!==Lh.inMemory?this.setTitle(EM(t.uri),this._uriLabel.getUriLabel(MM(t.uri))):this.setTitle(st(0,"References"));const e=this._textModelResolverService.createModelReference(t.uri);this._tree.getInput()===t.parent||(i&&this._tree.reveal(t.parent),await this._tree.expand(t.parent)),this._tree.reveal(t);const s=await e;if(!this._model)return void s.dispose();$i(this._previewModelReference);const n=s.object;if(n){const i=this._preview.getModel()===n.textEditorModel?0:1,e=Es.lift(t.range).collapseToStart();this._previewModelReference=s,this._preview.setModel(n.textEditorModel),this._preview.setSelection(e),this._preview.revealRangeInCenter(e,i)}else this._preview.setModel(this._previewNotAvailableMessage),s.dispose()}};n3=Z4([t3(3,Fk),t3(4,Pa),t3(5,Oa),t3(6,B4),t3(7,bO),t3(8,rF),t3(9,Hx),t3(10,Od),t3(11,uf)],n3);var o3,r3=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},h3=function(t,i){return function(e,s){i(e,s,t)}};const c3=new Tl("referenceSearchVisible",!1,st(0,"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let a3=o3=class{static get(t){return t.getContribution(o3.ID)}constructor(t,i,e,s,n,o,r,h){this._defaultTreeKeyboardSupport=t,this._editor=i,this._editorService=s,this._notificationService=n,this._instantiationService=o,this._storageService=r,this._configurationService=h,this._disposables=new Zi,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=c3.bindTo(e)}dispose(){var t,i;this._referenceSearchVisible.reset(),this._disposables.dispose(),(t=this._widget)===null||t===void 0||t.dispose(),(i=this._model)===null||i===void 0||i.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(t,i,e){let s;if(this._widget&&(s=this._widget.position),this.closeWidget(),s&&t.containsPosition(s))return;this._peekMode=e,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>{this.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((()=>{this._ignoreModelChangeEvent||this.closeWidget()})));const n="peekViewLayout",o=e3.fromJSON(this._storageService.get(n,0,"{}"));this._widget=this._instantiationService.createInstance(n3,this._editor,this._defaultTreeKeyboardSupport,o),this._widget.setTitle(st(0,"Loading...")),this._widget.show(t),this._disposables.add(this._widget.onDidClose((()=>{i.cancel(),this._widget&&(this._storageService.store(n,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((t=>{const{element:i,kind:s}=t;if(i)switch(s){case"open":t.source==="editor"&&this._configurationService.getValue("editor.stablePeek")||this.openReference(i,!1,!1);break;case"side":this.openReference(i,!0,!1);break;case"goto":e?this._gotoReference(i,!0):this.openReference(i,!1,!0)}})));const r=++this._requestIdPool;i.then((i=>{var e;if(r===this._requestIdPool&&this._widget)return(e=this._model)===null||e===void 0||e.dispose(),this._model=i,this._widget.setModel(this._model).then((()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(st(0,"{0} ({1})",this._model.title,this._model.references.length));const i=this._editor.getModel().uri,e=new Cs(t.startLineNumber,t.startColumn),s=this._model.nearestReference(i,e);if(s)return this._widget.setSelection(s).then((()=>{this._widget&&this._editor.getOption(87)==="editor"&&this._widget.focusOnPreviewEditor()}))}}));i.dispose()}),(t=>{this._notificationService.error(t)}))}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(t){if(!this._editor.hasModel()||!this._model||!this._widget)return;const i=this._widget.position;if(!i)return;const e=this._model.nearestReference(this._editor.getModel().uri,i);if(!e)return;const s=this._model.nextOrPreviousReference(e,t),n=this._editor.hasTextFocus(),o=this._widget.isPreviewEditorFocused();await this._widget.setSelection(s),await this._gotoReference(s,!1),n?this._editor.focus():this._widget&&o&&this._widget.focusOnPreviewEditor()}async revealReference(t){this._editor.hasModel()&&this._model&&this._widget&&await this._widget.revealReference(t)}closeWidget(t=!0){var i,e;(i=this._widget)===null||i===void 0||i.dispose(),(e=this._model)===null||e===void 0||e.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,t&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(t,i){var e;(e=this._widget)===null||e===void 0||e.hide(),this._ignoreModelChangeEvent=!0;const s=Es.lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:s,selectionSource:"code.jump",pinned:i}},this._editor).then((t=>{var i;if(this._ignoreModelChangeEvent=!1,t&&this._widget)if(this._editor===t)this._widget.show(s),this._widget.focusOnReferenceTree();else{const e=o3.get(t),n=this._model.clone();this.closeWidget(),t.focus(),e==null||e.toggleWidget(s,Ar((t=>Promise.resolve(n))),(i=this._peekMode)!==null&&i!==void 0&&i)}else this.closeWidget()}),(t=>{this._ignoreModelChangeEvent=!1,Oi(t)}))}openReference(t,i,e){i||this.closeWidget();const{uri:s,range:n}=t;this._editorService.openCodeEditor({resource:s,options:{selection:n,selectionSource:"code.jump",pinned:e}},this._editor,i)}};function l3(t,i){const e=function(t){const i=t.get(Ua).getFocusedCodeEditor();return i instanceof w4?i.getParentEditor():i}(t);if(!e)return;const s=a3.get(e);s&&i(s)}a3.ID="editor.contrib.referencesController",a3=o3=r3([h3(2,Nl),h3(3,Ua),h3(4,wL),h3(5,Oa),h3(6,cH),h3(7,Id)],a3),Gl.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Re(2089,60),when:gl.or(c3,D4.inPeekEditor),handler(t){l3(t,(t=>{t.changeFocusBetweenPreviewAndReferences()}))}}),Gl.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:gl.or(c3,D4.inPeekEditor),handler(t){l3(t,(t=>{t.goToNextOrPreviousReference(!0)}))}}),Gl.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:gl.or(c3,D4.inPeekEditor),handler(t){l3(t,(t=>{t.goToNextOrPreviousReference(!1)}))}}),Xa.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),Xa.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),Xa.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),Xa.registerCommand("closeReferenceSearch",(t=>l3(t,(t=>t.closeWidget())))),Gl.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:gl.and(D4.inPeekEditor,gl.not("config.editor.stablePeek"))}),Gl.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:gl.and(c3,gl.not("config.editor.stablePeek"),gl.or(QC.editorTextFocus,SW.negate()))}),Gl.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:gl.and(c3,OW,WW.negate(),_W.negate()),handler(t){var i;const e=(i=t.get(LW).lastFocusedList)===null||i===void 0?void 0:i.getFocus();Array.isArray(e)&&e[0]instanceof O4&&l3(t,(t=>t.revealReference(e[0])))}}),Gl.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:gl.and(c3,OW,WW.negate(),_W.negate()),handler(t){var i;const e=(i=t.get(LW).lastFocusedList)===null||i===void 0?void 0:i.getFocus();Array.isArray(e)&&e[0]instanceof O4&&l3(t,(t=>t.openReference(e[0],!0,!0)))}}),Xa.registerCommand("openReference",(t=>{var i;const e=(i=t.get(LW).lastFocusedList)===null||i===void 0?void 0:i.getFocus();Array.isArray(e)&&e[0]instanceof O4&&l3(t,(t=>t.openReference(e[0],!1,!0)))}));var u3=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},d3=function(t,i){return function(e,s){i(e,s,t)}};const f3=new Tl("hasSymbols",!1,st(0,"Whether there are symbol locations that can be navigated via keyboard-only.")),g3=za("ISymbolNavigationService");let A3=class{constructor(t,i,e,s){this._editorService=i,this._notificationService=e,this._keybindingService=s,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=f3.bindTo(t)}reset(){var t,i;this._ctxHasSymbols.reset(),(t=this._currentState)===null||t===void 0||t.dispose(),(i=this._currentMessage)===null||i===void 0||i.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(t){const i=t.parent.parent;if(i.references.length<=1)return void this.reset();this._currentModel=i,this._currentIdx=i.references.indexOf(t),this._ctxHasSymbols.set(!0),this._showMessage();const e=new p3(this._editorService),s=e.onDidChange((t=>{if(this._ignoreEditorChange)return;const e=this._editorService.getActiveCodeEditor();if(!e)return;const s=e.getModel(),n=e.getPosition();if(!s||!n)return;let o=!1,r=!1;for(const t of i.references)if(CM(t.uri,s.uri))o=!0,r=r||Es.containsPosition(t.range,n);else if(o)break;o&&r||this.reset()}));this._currentState=Xi(e,s)}revealNext(t){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const i=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:i.uri,options:{selection:Es.collapseToStart(i.range),selectionRevealType:3}},t).finally((()=>{this._ignoreEditorChange=!1}))}_showMessage(){var t;(t=this._currentMessage)===null||t===void 0||t.dispose();const i=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),e=i?st(0,"Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,i.getLabel()):st(0,"Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(e)}};A3=u3([d3(0,Nl),d3(1,Ua),d3(2,wL),d3(3,Hx)],A3),Hd(g3,A3,1),xu(new class extends mu{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:f3,kbOpts:{weight:100,primary:70}})}runEditorCommand(t,i){return t.get(g3).revealNext(i)}}),Gl.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:f3,primary:9,handler(t){t.get(g3).reset()}});let p3=class{constructor(t){this._listener=new Map,this._disposables=new Zi,this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._disposables.add(t.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(t.onCodeEditorAdd(this._onDidAddEditor,this)),t.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),$i(this._listener.values())}_onDidAddEditor(t){this._listener.set(t,Xi(t.onDidChangeCursorPosition((i=>this._onDidChange.fire({editor:t}))),t.onDidChangeModelContent((i=>this._onDidChange.fire({editor:t})))))}_onDidRemoveEditor(t){var i;(i=this._listener.get(t))===null||i===void 0||i.dispose(),this._listener.delete(t)}};async function w3(t,i,e,s){const n=e.ordered(t).map((e=>Promise.resolve(s(e,t,i)).then(void 0,(t=>{zi(t)}))));return f((await Promise.all(n)).flat())}function m3(t,i,e,s){return w3(i,e,t,((t,i,e)=>t.provideDefinition(i,e,s)))}function v3(t,i,e,s){return w3(i,e,t,((t,i,e)=>t.provideDeclaration(i,e,s)))}function b3(t,i,e,s){return w3(i,e,t,((t,i,e)=>t.provideImplementation(i,e,s)))}function y3(t,i,e,s){return w3(i,e,t,((t,i,e)=>t.provideTypeDefinition(i,e,s)))}function k3(t,i,e,s,n){return w3(i,e,t,(async(t,i,e)=>{const o=await t.provideReferences(i,e,{includeDeclaration:!0},n);if(!s||!o||o.length!==2)return o;const r=await t.provideReferences(i,e,{includeDeclaration:!1},n);return r&&r.length===1?r:o}))}async function x3(t){const i=await t(),e=new H4(i,""),s=e.references.map((t=>t.link));return e.dispose(),s}var C3,E3,B3,D3,M3,S3,F3,I3;p3=u3([d3(0,Ua)],p3),ku("_executeDefinitionProvider",((t,i,e)=>{const s=m3(t.get(jA).definitionProvider,i,e,ye.None);return x3((()=>s))})),ku("_executeTypeDefinitionProvider",((t,i,e)=>{const s=y3(t.get(jA).typeDefinitionProvider,i,e,ye.None);return x3((()=>s))})),ku("_executeDeclarationProvider",((t,i,e)=>{const s=v3(t.get(jA).declarationProvider,i,e,ye.None);return x3((()=>s))})),ku("_executeReferenceProvider",((t,i,e)=>{const s=k3(t.get(jA).referenceProvider,i,e,!1,ye.None);return x3((()=>s))})),ku("_executeImplementationProvider",((t,i,e)=>{const s=b3(t.get(jA).implementationProvider,i,e,ye.None);return x3((()=>s))})),su.appendMenuItem(tu.EditorContext,{submenu:tu.EditorContextPeek,title:st(0,"Peek"),group:"navigation",order:100});class L3{static is(t){return!(!t||typeof t!="object")&&(t instanceof L3||!(!Cs.isIPosition(t.position)||!t.model))}constructor(t,i){this.model=t,this.position=i}}class R3 extends yu{static all(){return R3._allSymbolNavigationCommands.values()}static _patchConfig(t){const i={...t,f1:!0};if(i.menu)for(const e of Wt.wrap(i.menu))e.id!==tu.EditorContext&&e.id!==tu.EditorContextPeek||(e.when=gl.and(t.precondition,e.when));return i}constructor(t,i){super(R3._patchConfig(i)),this.configuration=t,R3._allSymbolNavigationCommands.set(i.id,this)}runEditorCommand(t,i,e,s){if(!i.hasModel())return Promise.resolve(void 0);const n=t.get(wL),o=t.get(Ua),r=t.get(xO),h=t.get(g3),c=t.get(jA),a=t.get(Oa),l=i.getModel(),u=i.getPosition(),d=L3.is(e)?e:new L3(l,u),f=new UX(i,5),g=pr(this._getLocationModel(c,d.model,d.position,f.token),f.token).then((async t=>{var n;if(!t||f.token.isCancellationRequested)return;let r;if(cw(t.ariaMessage),t.referenceAt(l.uri,u)){const t=this._getAlternativeCommand(i);!R3._activeAlternativeCommands.has(t)&&R3._allSymbolNavigationCommands.has(t)&&(r=R3._allSymbolNavigationCommands.get(t))}const c=t.references.length;if(c===0){if(!this.configuration.muteMessage){const t=l.getWordAtPosition(u);(n=N0.get(i))===null||n===void 0||n.showMessage(this._getNoResultFoundMessage(t),u)}}else{if(c!==1||!r)return this._onResult(o,h,i,t,s);R3._activeAlternativeCommands.add(this.desc.id),a.invokeFunction((t=>r.runEditorCommand(t,i,e,s).finally((()=>{R3._activeAlternativeCommands.delete(this.desc.id)}))))}}),(t=>{n.error(t)})).finally((()=>{f.dispose()}));return r.showWhile(g,250),g}async _onResult(t,i,e,s,n){const o=this._getGoToPreference(e);if(e instanceof w4||!(this.configuration.openInPeek||o==="peek"&&s.references.length>1)){const r=s.firstReference(),h=s.references.length>1&&o==="gotoAndPeek",c=await this._openReference(e,t,r,this.configuration.openToSide,!h);h&&c?this._openInPeek(c,s,n):s.dispose(),o==="goto"&&i.put(r)}else this._openInPeek(e,s,n)}async _openReference(t,i,e,s,n){let o;var r;if((r=e)&&fs.isUri(r.uri)&&Es.isIRange(r.range)&&(Es.isIRange(r.originSelectionRange)||Es.isIRange(r.targetSelectionRange))&&(o=e.targetSelectionRange),o||(o=e.range),!o)return;const h=await i.openCodeEditor({resource:e.uri,options:{selection:Es.collapseToStart(o),selectionRevealType:3,selectionSource:"code.jump"}},t,s);if(h){if(n){const t=h.getModel(),i=h.createDecorationsCollection([{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout((()=>{h.getModel()===t&&i.clear()}),350)}return h}}_openInPeek(t,i,e){const s=a3.get(t);s&&t.hasModel()?s.toggleWidget(e??t.getSelection(),Ar((t=>Promise.resolve(i))),this.configuration.openInPeek):i.dispose()}}R3._allSymbolNavigationCommands=new Map,R3._activeAlternativeCommands=new Set;class T3 extends R3{async _getLocationModel(t,i,e,s){return new H4(await m3(t.definitionProvider,i,e,s),st(0,"Definitions"))}_getNoResultFoundMessage(t){return t&&t.word?st(0,"No definition found for '{0}'",t.word):st(0,"No definition found")}_getAlternativeCommand(t){return t.getOption(58).alternativeDefinitionCommand}_getGoToPreference(t){return t.getOption(58).multipleDefinitions}}hu(((C3=class extends T3{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:C3.id,title:{...nt(0,"Go to Definition"),mnemonicTitle:st(0,"Go to &&Definition")},precondition:QC.hasDefinitionProvider,keybinding:[{when:QC.editorTextFocus,primary:70,weight:100},{when:gl.and(QC.editorTextFocus,DW),primary:2118,weight:100}],menu:[{id:tu.EditorContext,group:"navigation",order:1.1},{id:tu.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),Xa.registerCommandAlias("editor.action.goToDeclaration",C3.id)}}).id="editor.action.revealDefinition",C3)),hu(((E3=class extends T3{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:E3.id,title:nt(0,"Open Definition to the Side"),precondition:gl.and(QC.hasDefinitionProvider,QC.isInEmbeddedEditor.toNegated()),keybinding:[{when:QC.editorTextFocus,primary:Re(2089,70),weight:100},{when:gl.and(QC.editorTextFocus,DW),primary:Re(2089,2118),weight:100}]}),Xa.registerCommandAlias("editor.action.openDeclarationToTheSide",E3.id)}}).id="editor.action.revealDefinitionAside",E3)),hu(((B3=class extends T3{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:B3.id,title:nt(0,"Peek Definition"),precondition:gl.and(QC.hasDefinitionProvider,D4.notInPeekEditor,QC.isInEmbeddedEditor.toNegated()),keybinding:{when:QC.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:tu.EditorContextPeek,group:"peek",order:2}}),Xa.registerCommandAlias("editor.action.previewDeclaration",B3.id)}}).id="editor.action.peekDefinition",B3));class N3 extends R3{async _getLocationModel(t,i,e,s){return new H4(await v3(t.declarationProvider,i,e,s),st(0,"Declarations"))}_getNoResultFoundMessage(t){return t&&t.word?st(0,"No declaration found for '{0}'",t.word):st(0,"No declaration found")}_getAlternativeCommand(t){return t.getOption(58).alternativeDeclarationCommand}_getGoToPreference(t){return t.getOption(58).multipleDeclarations}}hu(((D3=class extends N3{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:D3.id,title:{...nt(0,"Go to Declaration"),mnemonicTitle:st(0,"Go to &&Declaration")},precondition:gl.and(QC.hasDeclarationProvider,QC.isInEmbeddedEditor.toNegated()),menu:[{id:tu.EditorContext,group:"navigation",order:1.3},{id:tu.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(t){return t&&t.word?st(0,"No declaration found for '{0}'",t.word):st(0,"No declaration found")}}).id="editor.action.revealDeclaration",D3)),hu(class extends N3{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:nt(0,"Peek Declaration"),precondition:gl.and(QC.hasDeclarationProvider,D4.notInPeekEditor,QC.isInEmbeddedEditor.toNegated()),menu:{id:tu.EditorContextPeek,group:"peek",order:3}})}});class Q3 extends R3{async _getLocationModel(t,i,e,s){return new H4(await y3(t.typeDefinitionProvider,i,e,s),st(0,"Type Definitions"))}_getNoResultFoundMessage(t){return t&&t.word?st(0,"No type definition found for '{0}'",t.word):st(0,"No type definition found")}_getAlternativeCommand(t){return t.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(t){return t.getOption(58).multipleTypeDefinitions}}hu(((M3=class extends Q3{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:M3.ID,title:{...nt(0,"Go to Type Definition"),mnemonicTitle:st(0,"Go to &&Type Definition")},precondition:QC.hasTypeDefinitionProvider,keybinding:{when:QC.editorTextFocus,primary:0,weight:100},menu:[{id:tu.EditorContext,group:"navigation",order:1.4},{id:tu.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}}).ID="editor.action.goToTypeDefinition",M3)),hu(((S3=class extends Q3{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:S3.ID,title:nt(0,"Peek Type Definition"),precondition:gl.and(QC.hasTypeDefinitionProvider,D4.notInPeekEditor,QC.isInEmbeddedEditor.toNegated()),menu:{id:tu.EditorContextPeek,group:"peek",order:4}})}}).ID="editor.action.peekTypeDefinition",S3));class O3 extends R3{async _getLocationModel(t,i,e,s){return new H4(await b3(t.implementationProvider,i,e,s),st(0,"Implementations"))}_getNoResultFoundMessage(t){return t&&t.word?st(0,"No implementation found for '{0}'",t.word):st(0,"No implementation found")}_getAlternativeCommand(t){return t.getOption(58).alternativeImplementationCommand}_getGoToPreference(t){return t.getOption(58).multipleImplementations}}hu(((F3=class extends O3{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:F3.ID,title:{...nt(0,"Go to Implementations"),mnemonicTitle:st(0,"Go to &&Implementations")},precondition:QC.hasImplementationProvider,keybinding:{when:QC.editorTextFocus,primary:2118,weight:100},menu:[{id:tu.EditorContext,group:"navigation",order:1.45},{id:tu.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}}).ID="editor.action.goToImplementation",F3)),hu(((I3=class extends O3{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:I3.ID,title:nt(0,"Peek Implementations"),precondition:gl.and(QC.hasImplementationProvider,D4.notInPeekEditor,QC.isInEmbeddedEditor.toNegated()),keybinding:{when:QC.editorTextFocus,primary:3142,weight:100},menu:{id:tu.EditorContextPeek,group:"peek",order:5}})}}).ID="editor.action.peekImplementation",I3));class z3 extends R3{_getNoResultFoundMessage(t){return t?st(0,"No references found for '{0}'",t.word):st(0,"No references found")}_getAlternativeCommand(t){return t.getOption(58).alternativeReferenceCommand}_getGoToPreference(t){return t.getOption(58).multipleReferences}}hu(class extends z3{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{...nt(0,"Go to References"),mnemonicTitle:st(0,"Go to &&References")},precondition:gl.and(QC.hasReferenceProvider,D4.notInPeekEditor,QC.isInEmbeddedEditor.toNegated()),keybinding:{when:QC.editorTextFocus,primary:1094,weight:100},menu:[{id:tu.EditorContext,group:"navigation",order:1.45},{id:tu.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(t,i,e,s){return new H4(await k3(t.referenceProvider,i,e,!0,s),st(0,"References"))}}),hu(class extends z3{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:nt(0,"Peek References"),precondition:gl.and(QC.hasReferenceProvider,D4.notInPeekEditor,QC.isInEmbeddedEditor.toNegated()),menu:{id:tu.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(t,i,e,s){return new H4(await k3(t.referenceProvider,i,e,!1,s),st(0,"References"))}});class U3 extends R3{constructor(t,i,e){super(t,{id:"editor.action.goToLocation",title:nt(0,"Go to Any Symbol"),precondition:gl.and(D4.notInPeekEditor,QC.isInEmbeddedEditor.toNegated())}),this._references=i,this._gotoMultipleBehaviour=e}async _getLocationModel(t,i,e,s){return new H4(this._references,st(0,"Locations"))}_getNoResultFoundMessage(t){return t&&st(0,"No results for '{0}'",t.word)||""}_getGoToPreference(t){var i;return(i=this._gotoMultipleBehaviour)!==null&&i!==void 0?i:t.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}Xa.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:fs},{name:"position",description:"The position at which to start",constraint:Cs.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(t,i,e,s,n,o,r)=>{Y(fs.isUri(i)),Y(Cs.isIPosition(e)),Y(Array.isArray(s)),Y(n===void 0||typeof n=="string"),Y(r===void 0||typeof r=="boolean");const h=t.get(Ua),c=await h.openCodeEditor({resource:i},h.getFocusedCodeEditor());if(PX(c))return c.setPosition(e),c.revealPositionInCenterIfOutsideViewport(e,0),c.invokeWithinContext((t=>{const i=new class extends U3{_getNoResultFoundMessage(t){return o||super._getNoResultFoundMessage(t)}}({muteMessage:!o,openInPeek:!!r,openToSide:!1},s,n);t.get(Oa).invokeFunction(i.run.bind(i),c)}))}}),Xa.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:fs},{name:"position",description:"The position at which to start",constraint:Cs.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(t,i,e,s,n)=>{t.get($a).executeCommand("editor.action.goToLocations",i,e,s,n,void 0,!0)}}),Xa.registerCommand({id:"editor.action.findReferences",handler:(t,i,e)=>{Y(fs.isUri(i)),Y(Cs.isIPosition(e));const s=t.get(jA),n=t.get(Ua);return n.openCodeEditor({resource:i},n.getFocusedCodeEditor()).then((t=>{if(!PX(t)||!t.hasModel())return;const i=a3.get(t);if(!i)return;const n=Ar((i=>k3(s.referenceProvider,t.getModel(),Cs.lift(e),!1,i).then((t=>new H4(t,st(0,"References")))))),o=new Es(e.lineNumber,e.column,e.lineNumber,e.column);return Promise.resolve(i.toggleWidget(o,n,!1))}))}}),Xa.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");var H3,P3=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},j3=function(t,i){return function(e,s){i(e,s,t)}};let W3=H3=class{constructor(t,i,e,s){this.textModelResolverService=i,this.languageService=e,this.languageFeaturesService=s,this.toUnhook=new Zi,this.toUnhookForKeyboard=new Zi,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=t,this.linkDecorations=this.editor.createDecorationsCollection();const n=new g4(t);this.toUnhook.add(n),this.toUnhook.add(n.onMouseMoveOrRelevantKeyDown((([t,i])=>{this.startFindDefinitionFromMouse(t,i??void 0)}))),this.toUnhook.add(n.onExecute((t=>{this.isEnabled(t)&&this.gotoDefinition(t.target.position,t.hasSideBySideModifier).catch((t=>{Oi(t)})).finally((()=>{this.removeLinkDecorations()}))}))),this.toUnhook.add(n.onCancel((()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null})))}static get(t){return t.getContribution(H3.ID)}async startFindDefinitionFromCursor(t){await this.startFindDefinition(t),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition((()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()}))),this.toUnhookForKeyboard.add(this.editor.onKeyDown((t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())})))}startFindDefinitionFromMouse(t,i){if(t.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(t,i))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const e=t.target.position;this.startFindDefinition(e)}async startFindDefinition(t){var i;this.toUnhookForKeyboard.clear();const e=t?(i=this.editor.getModel())===null||i===void 0?void 0:i.getWordAtPosition(t):null;if(!e)return this.currentWordAtPosition=null,void this.removeLinkDecorations();if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===e.startColumn&&this.currentWordAtPosition.endColumn===e.endColumn&&this.currentWordAtPosition.word===e.word)return;this.currentWordAtPosition=e;const s=new zX(this.editor,15);let n;this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Ar((i=>this.findDefinition(t,i)));try{n=await this.previousPromise}catch(t){return void Oi(t)}if(!n||!n.length||!s.validate(this.editor))return void this.removeLinkDecorations();const o=n[0].originSelectionRange?Es.lift(n[0].originSelectionRange):new Es(t.lineNumber,e.startColumn,t.lineNumber,e.endColumn);if(n.length>1){let t=o;for(const{originSelectionRange:i}of n)i&&(t=Es.plusRange(t,i));this.addDecoration(t,(new RN).appendText(st(0,"Click to show {0} definitions.",n.length)))}else{const t=n[0];if(!t.uri)return;this.textModelResolverService.createModelReference(t.uri).then((i=>{if(!i.object||!i.object.textEditorModel)return void i.dispose();const{object:{textEditorModel:e}}=i,{startLineNumber:s}=t.range;if(s<1||s>e.getLineCount())return void i.dispose();const n=this.getPreviewValue(e,s,t),r=this.languageService.guessLanguageIdByFilepathOrFirstLine(e.uri);this.addDecoration(o,n?(new RN).appendCodeblock(r||"",n):void 0),i.dispose()}))}}getPreviewValue(t,i,e){let s=e.range;return s.endLineNumber-s.startLineNumber>=H3.MAX_SOURCE_PREVIEW_LINES&&(s=this.getPreviewRangeBasedOnIndentation(t,i)),this.stripIndentationFromPreviewRange(t,i,s)}stripIndentationFromPreviewRange(t,i,e){let s=t.getLineFirstNonWhitespaceColumn(i);for(let n=i+1;n<e.endLineNumber;n++){const i=t.getLineFirstNonWhitespaceColumn(n);s=Math.min(s,i)}return t.getValueInRange(e).replace(new RegExp(`^\\s{${s-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(t,i){const e=t.getLineFirstNonWhitespaceColumn(i),s=Math.min(t.getLineCount(),i+H3.MAX_SOURCE_PREVIEW_LINES);let n=i+1;for(;n<s&&e!==t.getLineFirstNonWhitespaceColumn(n);n++);return new Es(i,1,n+1,1)}addDecoration(t,i){const e={range:t,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:i}};this.linkDecorations.set([e])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(t,i){var e;return this.editor.hasModel()&&t.isLeftClick&&t.isNoneOrSingleMouseDown&&t.target.type===6&&!(((e=t.target.detail.injectedText)===null||e===void 0?void 0:e.options)instanceof BF)&&(t.hasTriggerModifier||!!i&&i.keyCodeIsTriggerKey)&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(t,i){const e=this.editor.getModel();return e?m3(this.languageFeaturesService.definitionProvider,e,t,i):Promise.resolve(null)}gotoDefinition(t,i){return this.editor.setPosition(t),this.editor.invokeWithinContext((t=>{const e=!i&&this.editor.getOption(88)&&!this.isInPeekEditor(t);return new T3({openToSide:i,openInPeek:e,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(t)}))}isInPeekEditor(t){const i=t.get(Nl);return D4.inPeekEditor.getValue(i)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}};W3.ID="editor.contrib.gotodefinitionatposition",W3.MAX_SOURCE_PREVIEW_LINES=8,W3=H3=P3([j3(1,Pa),j3(2,Od),j3(3,jA)],W3),Bu(W3.ID,W3,2);let Y3=class{constructor(t,i,e){this.value=t,this.isComplete=i,this.hasLoadingMessage=e}};class _3 extends te{constructor(t,i){super(),this._editor=t,this._computer=i,this._onResult=this._register(new de),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new Er((()=>this._triggerAsyncComputation()),0)),this._secondWaitScheduler=this._register(new Er((()=>this._triggerSyncComputation()),0)),this._loadingMessageScheduler=this._register(new Er((()=>this._triggerLoadingMessage()),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(t,i=!0){this._state=t,i&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=function(t){const i=new xe,e=t(i.token);return new Rr(i,(async t=>{const s=i.token.onCancellationRequested((()=>{s.dispose(),i.dispose(),t.reject(new ji)}));try{for await(const s of e){if(i.token.isCancellationRequested)return;t.emitOne(s)}s.dispose(),i.dispose()}catch(e){s.dispose(),i.dispose(),t.reject(e)}}))}((t=>this._computer.computeAsync(t))),(async()=>{try{for await(const t of this._asyncIterable)t&&(this._result.push(t),this._fireResult());this._asyncIterableDone=!0,this._state!==3&&this._state!==4||this._setState(0)}catch(t){Oi(t)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const t=this._state===0,i=this._state===4;this._onResult.fire(new Y3(this._result.slice(0),t,i))}start(t){if(t===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}class V3{constructor(t,i,e,s){this.priority=t,this.range=i,this.initialMousePosX=e,this.initialMousePosY=s,this.type=1}equals(t){return t.type===1&&this.range.equalsRange(t.range)}canAdoptVisibleHover(t,i){return t.type===1&&i.lineNumber===this.range.startLineNumber}}class J3{constructor(t,i,e,s,n,o){this.priority=t,this.owner=i,this.range=e,this.initialMousePosX=s,this.initialMousePosY=n,this.supportsMarkerHover=o,this.type=2}equals(t){return t.type===2&&this.owner===t.owner}canAdoptVisibleHover(t,i){return t.type===2&&this.owner===t.owner}}const G3=new class{constructor(){this._participants=[]}register(t){this._participants.push(t)}getAll(){return this._participants}};class K3{constructor(){let t;this._onDidWillResize=new de,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new de,this.onDidResize=this._onDidResize.event,this._sashListener=new Zi,this._size=new vc(0,0),this._minSize=new vc(0,0),this._maxSize=new vc(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new _P(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new _P(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new _P(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:zP.North}),this._southSash=new _P(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:zP.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let i=0,e=0;this._sashListener.add(he.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)((()=>{t===void 0&&(this._onDidWillResize.fire(),t=this._size,i=0,e=0)}))),this._sashListener.add(he.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)((()=>{t!==void 0&&(t=void 0,i=0,e=0,this._onDidResize.fire({dimension:this._size,done:!0}))}))),this._sashListener.add(this._eastSash.onDidChange((s=>{t&&(e=s.currentX-s.startX,this.layout(t.height+i,t.width+e),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))}))),this._sashListener.add(this._westSash.onDidChange((s=>{t&&(e=-(s.currentX-s.startX),this.layout(t.height+i,t.width+e),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))}))),this._sashListener.add(this._northSash.onDidChange((s=>{t&&(i=-(s.currentY-s.startY),this.layout(t.height+i,t.width+e),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))}))),this._sashListener.add(this._southSash.onDidChange((s=>{t&&(i=s.currentY-s.startY,this.layout(t.height+i,t.width+e),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))}))),this._sashListener.add(he.any(this._eastSash.onDidReset,this._westSash.onDidReset)((t=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))),this._sashListener.add(he.any(this._northSash.onDidReset,this._southSash.onDidReset)((t=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))})))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(t,i,e,s){this._northSash.state=t?3:0,this._eastSash.state=i?3:0,this._southSash.state=e?3:0,this._westSash.state=s?3:0}layout(t=this.size.height,i=this.size.width){const{height:e,width:s}=this._minSize,{height:n,width:o}=this._maxSize;t=Math.max(e,Math.min(n,t)),i=Math.max(s,Math.min(o,i));const r=new vc(i,t);vc.equals(r,this._size)||(this.domNode.style.height=t+"px",this.domNode.style.width=i+"px",this._size=r,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(t){this._maxSize=t}get maxSize(){return this._maxSize}set minSize(t){this._minSize=t}get minSize(){return this._minSize}set preferredSize(t){this._preferredSize=t}get preferredSize(){return this._preferredSize}}class $3 extends te{constructor(t,i=new vc(10,10)){super(),this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new K3),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=vc.lift(i),this._resizableNode.layout(i.height,i.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize((t=>{this._resize(new vc(t.dimension.width,t.dimension.height)),t.done&&(this._isResizing=!1)}))),this._register(this._resizableNode.onDidWillResize((()=>{this._isResizing=!0})))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var t;return!((t=this._contentPosition)===null||t===void 0)&&t.position?Cs.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(t){const i=this._editor.getDomNode(),e=this._editor.getScrolledVisiblePosition(t);if(!(!i||!e))return yc(i).top+e.top-30}_availableVerticalSpaceBelow(t){const i=this._editor.getDomNode(),e=this._editor.getScrolledVisiblePosition(t);if(!i||!e)return;const s=yc(i),n=wc(i.ownerDocument.body),o=s.top+e.top+e.height;return n.height-o-24}_findPositionPreference(t,i){var e,s;const n=Math.min((e=this._availableVerticalSpaceBelow(i))!==null&&e!==void 0?e:1/0,t),o=Math.min((s=this._availableVerticalSpaceAbove(i))!==null&&s!==void 0?s:1/0,t),r=Math.min(Math.max(o,n),t),h=Math.min(t,r);let c;return c=this._editor.getOption(60).above?h<=o?1:2:h<=n?2:1,c===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),c}_resize(t){this._resizableNode.layout(t.height,t.width)}}var X3,q3,Z3=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},t5=function(t,i){return function(e,s){i(e,s,t)}};const i5=ha;let e5=X3=class extends te{constructor(t,i,e){super(),this._editor=t,this._instantiationService=i,this._keybindingService=e,this._currentResult=null,this._widget=this._register(this._instantiationService.createInstance(r5,this._editor)),this._participants=[];for(const t of G3.getAll())this._participants.push(this._instantiationService.createInstance(t,this._editor));this._participants.sort(((t,i)=>t.hoverOrdinal-i.hoverOrdinal)),this._computer=new c5(this._editor,this._participants),this._hoverOperation=this._register(new _3(this._editor,this._computer)),this._register(this._hoverOperation.onResult((t=>{if(!this._computer.anchor)return;const i=t.hasLoadingMessage?this._addLoadingMessage(t.value):t.value;this._withResult(new s5(this._computer.anchor,i,t.isComplete))}))),this._register(cc(this._widget.getDomNode(),"keydown",(t=>{t.equals(9)&&this.hide()}))),this._register(Gs.onDidChange((()=>{this._widget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)})))}_startShowingOrUpdateHover(t,i,e,s,n){return!this._widget.position||!this._currentResult?!!t&&(this._startHoverOperationIfNecessary(t,i,e,s,!1),!0):this._editor.getOption(60).sticky&&n&&this._widget.isMouseGettingCloser(n.event.posx,n.event.posy)?(t&&this._startHoverOperationIfNecessary(t,i,e,s,!0),!0):t?!(!t||!this._currentResult.anchor.equals(t))||(t.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?(this._setCurrentResult(this._currentResult.filter(t)),this._startHoverOperationIfNecessary(t,i,e,s,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(t,i,e,s,!1),!0)):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(t,i,e,s,n){this._computer.anchor&&this._computer.anchor.equals(t)||(this._hoverOperation.cancel(),this._computer.anchor=t,this._computer.shouldFocus=s,this._computer.source=e,this._computer.insistOnKeepingHoverVisible=n,this._hoverOperation.start(i))}_setCurrentResult(t){this._currentResult!==t&&(t&&t.messages.length===0&&(t=null),this._currentResult=t,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())}_addLoadingMessage(t){if(this._computer.anchor){for(const i of this._participants)if(i.createLoadingMessage){const e=i.createLoadingMessage(this._computer.anchor);if(e)return t.slice(0).concat([e])}}return t}_withResult(t){this._widget.position&&this._currentResult&&this._currentResult.isComplete&&(!t.isComplete||this._computer.insistOnKeepingHoverVisible&&t.messages.length===0)||this._setCurrentResult(t)}_renderMessages(t,i){const{showAtPosition:e,showAtSecondaryPosition:s,highlightRange:n}=X3.computeHoverRanges(this._editor,t.range,i),o=new Zi,r=o.add(new h5(this._keybindingService)),h=document.createDocumentFragment();let c=null;const a={fragment:h,statusBar:r,setColorPicker:t=>c=t,onContentsChanged:()=>this._widget.onContentsChanged(),setMinimumDimensions:t=>this._widget.setMinimumDimensions(t),hide:()=>this.hide()};for(const t of this._participants){const e=i.filter((i=>i.owner===t));e.length>0&&o.add(t.renderHoverParts(a,e))}const l=i.some((t=>t.isBeforeContent));if(r.hasContent&&h.appendChild(r.hoverElement),h.hasChildNodes()){if(n){const t=this._editor.createDecorationsCollection();t.set([{range:n,options:X3._DECORATION_OPTIONS}]),o.add(qi((()=>{t.clear()})))}this._widget.showAt(h,new o5(t.initialMousePosX,t.initialMousePosY,c,e,s,this._editor.getOption(60).above,this._computer.shouldFocus,this._computer.source,l,o))}else o.dispose()}static computeHoverRanges(t,i,e){let s=1;if(t.hasModel()){const e=t._getViewModel(),n=e.coordinatesConverter,o=n.convertModelRangeToViewRange(i),r=new Cs(o.startLineNumber,e.getLineMinColumn(o.startLineNumber));s=n.convertViewPositionToModelPosition(r).column}const n=i.startLineNumber;let o=i.startColumn,r=e[0].range,h=null;for(const t of e)r=Es.plusRange(r,t.range),t.range.startLineNumber===n&&t.range.endLineNumber===n&&(o=Math.max(Math.min(o,t.range.startColumn),s)),t.forceShowAtRange&&(h=t.range);return{showAtPosition:h?h.getStartPosition():new Cs(n,i.startColumn),showAtSecondaryPosition:h?h.getStartPosition():new Cs(n,o),highlightRange:r}}showsOrWillShow(t){if(this._widget.isResizing)return!0;const i=[];for(const e of this._participants)if(e.suggestHoverAnchor){const s=e.suggestHoverAnchor(t);s&&i.push(s)}const e=t.target;if(e.type===6&&i.push(new V3(0,e.range,t.event.posx,t.event.posy)),e.type===7){const s=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;!e.detail.isAfterLines&&typeof e.detail.horizontalDistanceToText=="number"&&e.detail.horizontalDistanceToText<s&&i.push(new V3(0,e.range,t.event.posx,t.event.posy))}return i.length===0?this._startShowingOrUpdateHover(null,0,0,!1,t):(i.sort(((t,i)=>i.priority-t.priority)),this._startShowingOrUpdateHover(i[0],0,0,!1,t))}startShowingAtRange(t,i,e,s){this._startShowingOrUpdateHover(new V3(0,t,void 0,void 0),i,e,s,null)}containsNode(t){return!!t&&this._widget.getDomNode().contains(t)}focus(){this._widget.focus()}scrollUp(){this._widget.scrollUp()}scrollDown(){this._widget.scrollDown()}scrollLeft(){this._widget.scrollLeft()}scrollRight(){this._widget.scrollRight()}pageUp(){this._widget.pageUp()}pageDown(){this._widget.pageDown()}goToTop(){this._widget.goToTop()}goToBottom(){this._widget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}get isColorPickerVisible(){return this._widget.isColorPickerVisible}get isVisibleFromKeyboard(){return this._widget.isVisibleFromKeyboard}get isVisible(){return this._widget.isVisible}get isFocused(){return this._widget.isFocused}get isResizing(){return this._widget.isResizing}get widget(){return this._widget}};e5._DECORATION_OPTIONS=DF.register({description:"content-hover-highlight",className:"hoverHighlight"}),e5=X3=Z3([t5(1,Oa),t5(2,Hx)],e5);class s5{constructor(t,i,e){this.anchor=t,this.messages=i,this.isComplete=e}filter(t){const i=this.messages.filter((i=>i.isValidForHoverAnchor(t)));return i.length===this.messages.length?this:new n5(this,this.anchor,i,this.isComplete)}}class n5 extends s5{constructor(t,i,e,s){super(i,e,s),this.original=t}filter(t){return this.original.filter(t)}}class o5{constructor(t,i,e,s,n,o,r,h,c,a){this.initialMousePosX=t,this.initialMousePosY=i,this.colorPicker=e,this.showAtPosition=s,this.showAtSecondaryPosition=n,this.preferAbove=o,this.stoleFocus=r,this.source=h,this.isBeforeContent=c,this.disposables=a,this.closestMouseDistance=void 0}}let r5=q3=class extends $3{get isColorPickerVisible(){var t;return!!(!((t=this._visibleData)===null||t===void 0)&&t.colorPicker)}get isVisibleFromKeyboard(){var t;return((t=this._visibleData)===null||t===void 0?void 0:t.source)===1}get isVisible(){var t;return(t=this._hoverVisibleKey.get())!==null&&t!==void 0&&t}get isFocused(){var t;return(t=this._hoverFocusedKey.get())!==null&&t!==void 0&&t}constructor(t,i,e,s,n){const o=t.getOption(67)+8,r=new vc(150,o);super(t,r),this._configurationService=e,this._accessibilityService=s,this._keybindingService=n,this._hover=this._register(new uT),this._minimumSize=r,this._hoverVisibleKey=QC.hoverVisible.bindTo(i),this._hoverFocusedKey=QC.hoverFocused.bindTo(i),ia(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange((()=>{this.isVisible&&this._updateMaxDimensions()}))),this._register(this._editor.onDidChangeConfiguration((t=>{t.hasChanged(50)&&this._updateFont()})));const h=this._register(ta(this._resizableNode.domNode));this._register(h.onDidFocus((()=>{this._hoverFocusedKey.set(!0)}))),this._register(h.onDidBlur((()=>{this._hoverFocusedKey.set(!1)}))),this._setHoverData(void 0),this._editor.addContentWidget(this)}dispose(){var t;super.dispose(),(t=this._visibleData)===null||t===void 0||t.disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return q3.ID}static _applyDimensions(t,i,e){const s=typeof i=="number"?`${i}px`:i,n=typeof e=="number"?`${e}px`:e;t.style.width=s,t.style.height=n}_setContentsDomNodeDimensions(t,i){const e=this._hover.contentsDomNode;return q3._applyDimensions(e,t,i)}_setContainerDomNodeDimensions(t,i){const e=this._hover.containerDomNode;return q3._applyDimensions(e,t,i)}_setHoverWidgetDimensions(t,i){this._setContentsDomNodeDimensions(t,i),this._setContainerDomNodeDimensions(t,i),this._layoutContentWidget()}static _applyMaxDimensions(t,i,e){const s=typeof i=="number"?`${i}px`:i,n=typeof e=="number"?`${e}px`:e;t.style.maxWidth=s,t.style.maxHeight=n}_setHoverWidgetMaxDimensions(t,i){q3._applyMaxDimensions(this._hover.contentsDomNode,t,i),q3._applyMaxDimensions(this._hover.containerDomNode,t,i),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof t=="number"?`${t}px`:t),this._layoutContentWidget()}_hasHorizontalScrollbar(){const t=this._hover.scrollbar.getScrollDimensions();return t.scrollWidth>t.width}_adjustContentsBottomPadding(){const t=this._hover.contentsDomNode,i=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;t.style.paddingBottom!==i&&(t.style.paddingBottom=i)}_setAdjustedHoverWidgetDimensions(t){this._setHoverWidgetMaxDimensions("none","none");const i=t.width,e=t.height;this._setHoverWidgetDimensions(i,e),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._setContentsDomNodeDimensions(i,e-10))}_updateResizableNodeMaxDimensions(){var t,i;const e=(t=this._findMaximumRenderingWidth())!==null&&t!==void 0?t:1/0,s=(i=this._findMaximumRenderingHeight())!==null&&i!==void 0?i:1/0;this._resizableNode.maxSize=new vc(e,s),this._setHoverWidgetMaxDimensions(e,s)}_resize(t){var i,e;q3._lastDimensions=new vc(t.width,t.height),this._setAdjustedHoverWidgetDimensions(t),this._resizableNode.layout(t.height,t.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),(e=(i=this._visibleData)===null||i===void 0?void 0:i.colorPicker)===null||e===void 0||e.layout()}_findAvailableSpaceVertically(){var t;const i=(t=this._visibleData)===null||t===void 0?void 0:t.showAtPosition;if(i)return this._positionPreference===1?this._availableVerticalSpaceAbove(i):this._availableVerticalSpaceBelow(i)}_findMaximumRenderingHeight(){const t=this._findAvailableSpaceVertically();if(!t)return;let i=6;return Array.from(this._hover.contentsDomNode.children).forEach((t=>{i+=t.clientHeight})),this._hasHorizontalScrollbar()&&(i+=10),Math.min(t,i)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const t=Array.from(this._hover.contentsDomNode.children).some((t=>t.scrollWidth>t.clientWidth));return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),t}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const t=this._isHoverTextOverflowing(),i=this._contentWidth===void 0?0:this._contentWidth-2;return t||this._hover.containerDomNode.clientWidth<i?wc(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(t,i){if(!this._visibleData)return!1;if(this._visibleData.initialMousePosX===void 0||this._visibleData.initialMousePosY===void 0)return this._visibleData.initialMousePosX=t,this._visibleData.initialMousePosY=i,!1;const e=yc(this.getDomNode());this._visibleData.closestMouseDistance===void 0&&(this._visibleData.closestMouseDistance=a5(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,e.left,e.top,e.width,e.height));const s=a5(t,i,e.left,e.top,e.width,e.height);return!(s>this._visibleData.closestMouseDistance+4)&&(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,s),!0)}_setHoverData(t){var i;(i=this._visibleData)===null||i===void 0||i.disposables.dispose(),this._visibleData=t,this._hoverVisibleKey.set(!!t),this._hover.containerDomNode.classList.toggle("hidden",!t)}_updateFont(){const{fontSize:t,lineHeight:i}=this._editor.getOption(50),e=this._hover.contentsDomNode;e.style.fontSize=`${t}px`,e.style.lineHeight=""+i/t,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((t=>this._editor.applyFontInfo(t)))}_updateContent(t){const i=this._hover.contentsDomNode;i.style.paddingBottom="",i.textContent="",i.appendChild(t)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const t=Math.max(this._editor.getLayoutInfo().height/4,250,q3._lastDimensions.height),i=Math.max(.66*this._editor.getLayoutInfo().width,500,q3._lastDimensions.width);this._setHoverWidgetMaxDimensions(i,t)}_render(t,i){this._setHoverData(i),this._updateFont(),this._updateContent(t),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){var t;return this._visibleData?{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,positionAffinity:this._visibleData.isBeforeContent?3:void 0,preference:[(t=this._positionPreference)!==null&&t!==void 0?t:1]}:null}showAt(t,i){var e,s,n,o;if(!this._editor||!this._editor.hasModel())return;this._render(t,i);const r=Bc(this._hover.containerDomNode),h=i.showAtPosition;this._positionPreference=(e=this._findPositionPreference(r,h))!==null&&e!==void 0?e:1,this.onContentsChanged(),i.stoleFocus&&this._hover.containerDomNode.focus(),(s=i.colorPicker)===null||s===void 0||s.layout();const c=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&fT(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(o=(n=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))===null||n===void 0?void 0:n.getAriaLabel())!==null&&o!==void 0?o:"");c&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+c)}hide(){if(!this._visibleData)return;const t=this._visibleData.stoleFocus||this._hoverFocusedKey.get();this._setHoverData(void 0),this._resizableNode.maxSize=new vc(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),t&&this._editor.focus()}_removeConstraintsRenderNormally(){const t=this._editor.getLayoutInfo();this._resizableNode.layout(t.height,t.width),this._setHoverWidgetDimensions("auto","auto")}_adjustHoverHeightForScrollbar(t){var i;const e=this._hover.containerDomNode,s=this._hover.contentsDomNode,n=(i=this._findMaximumRenderingHeight())!==null&&i!==void 0?i:1/0;this._setContainerDomNodeDimensions(xc(e),Math.min(n,t)),this._setContentsDomNodeDimensions(xc(s),Math.min(n,t-10))}setMinimumDimensions(t){this._minimumSize=new vc(Math.max(this._minimumSize.width,t.width),Math.max(this._minimumSize.height,t.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const t=this._contentWidth===void 0?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new vc(t,this._minimumSize.height)}onContentsChanged(){var t;this._removeConstraintsRenderNormally();const i=this._hover.containerDomNode;let e=Bc(i),s=xc(i);if(this._resizableNode.layout(e,s),this._setHoverWidgetDimensions(s,e),e=Bc(i),s=xc(i),this._contentWidth=s,this._updateMinimumWidth(),this._resizableNode.layout(e,s),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._adjustHoverHeightForScrollbar(e)),(t=this._visibleData)===null||t===void 0?void 0:t.showAtPosition){const t=Bc(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(t,this._visibleData.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const t=this._hover.scrollbar.getScrollPosition().scrollTop,i=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:t-i.lineHeight})}scrollDown(){const t=this._hover.scrollbar.getScrollPosition().scrollTop,i=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:t+i.lineHeight})}scrollLeft(){const t=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:t-30})}scrollRight(){const t=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:t+30})}pageUp(){const t=this._hover.scrollbar.getScrollPosition().scrollTop,i=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:t-i})}pageDown(){const t=this._hover.scrollbar.getScrollPosition().scrollTop,i=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:t+i})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}};r5.ID="editor.contrib.resizableContentHoverWidget",r5._lastDimensions=new vc(0,0),r5=q3=Z3([t5(1,Nl),t5(2,Id),t5(3,yw),t5(4,Hx)],r5);let h5=class extends te{get hasContent(){return this._hasContent}constructor(t){super(),this._keybindingService=t,this._hasContent=!1,this.hoverElement=i5("div.hover-row.status-bar"),this.actionsElement=ia(this.hoverElement,i5("div.actions"))}addAction(t){const i=this._keybindingService.lookupKeybinding(t.commandId),e=i?i.getLabel():null;return this._hasContent=!0,this._register(dT.render(this.actionsElement,t,e))}append(t){const i=ia(this.actionsElement,t);return this._hasContent=!0,i}};h5=Z3([t5(0,Hx)],h5);class c5{get anchor(){return this._anchor}set anchor(t){this._anchor=t}get shouldFocus(){return this._shouldFocus}set shouldFocus(t){this._shouldFocus=t}get source(){return this._source}set source(t){this._source=t}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(t){this._insistOnKeepingHoverVisible=t}constructor(t,i){this._editor=t,this._participants=i,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(t,i){if(i.type!==1&&!i.supportsMarkerHover)return[];const e=t.getModel(),s=i.range.startLineNumber;if(s>e.getLineCount())return[];const n=e.getLineMaxColumn(s);return t.getLineDecorations(s).filter((t=>{if(t.options.isWholeLine)return!0;const e=t.range.startLineNumber===s?t.range.startColumn:1,o=t.range.endLineNumber===s?t.range.endColumn:n;if(t.options.showIfCollapsed){if(e>i.range.startColumn+1||i.range.endColumn-1>o)return!1}else if(e>i.range.startColumn||i.range.endColumn>o)return!1;return!0}))}computeAsync(t){const i=this._anchor;if(!this._editor.hasModel()||!i)return Lr.EMPTY;const e=c5._getLineDecorations(this._editor,i);return Lr.merge(this._participants.map((s=>s.computeAsync?s.computeAsync(i,e,t):Lr.EMPTY)))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const t=c5._getLineDecorations(this._editor,this._anchor);let i=[];for(const e of this._participants)i=i.concat(e.computeSync(this._anchor,t));return f(i)}}function a5(t,i,e,s,n,o){const r=e+n/2,h=s+o/2,c=Math.max(Math.abs(t-r)-n/2,0),a=Math.max(Math.abs(i-h)-o/2,0);return Math.sqrt(c*c+a*a)}const l5=ha;class u5 extends te{constructor(t,i,e){super(),this._renderDisposeables=this._register(new Zi),this._editor=t,this._isVisible=!1,this._messages=[],this._hover=this._register(new uT),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new pQ({editor:this._editor},i,e)),this._computer=new d5(this._editor),this._hoverOperation=this._register(new _3(this._editor,this._computer)),this._register(this._hoverOperation.onResult((t=>{this._withResult(t.value)}))),this._register(this._editor.onDidChangeModelDecorations((()=>this._onModelDecorationsChanged()))),this._register(this._editor.onDidChangeConfiguration((t=>{t.hasChanged(50)&&this._updateFont()}))),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return u5.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((t=>this._editor.applyFontInfo(t)))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(t,i){this._computer.lineNumber===t&&this._computer.lane===i||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=t,this._computer.lane=i,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(t){this._messages=t,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(t,i){this._renderDisposeables.clear();const e=document.createDocumentFragment();for(const t of i){const i=l5("div.hover-row.markdown-hover"),s=ia(i,l5("div.hover-contents")),n=this._renderDisposeables.add(this._markdownRenderer.render(t.value));s.appendChild(n.element),e.appendChild(i)}this._updateContents(e),this._showAt(t)}_updateContents(t){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(t),this._updateFont()}_showAt(t){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const i=this._editor.getLayoutInfo(),e=this._editor.getTopForLineNumber(t),s=this._editor.getScrollTop(),n=this._editor.getOption(67),o=e-s-(this._hover.containerDomNode.clientHeight-n)/2,r=i.glyphMarginLeft+i.glyphMarginWidth+(this._computer.lane==="lineNo"?i.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${r}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(o),0)}px`}}u5.ID="editor.contrib.modesGlyphHoverWidget";class d5{get lineNumber(){return this._lineNumber}set lineNumber(t){this._lineNumber=t}get lane(){return this._laneOrLine}set lane(t){this._laneOrLine=t}constructor(t){this._editor=t,this._lineNumber=-1,this._laneOrLine=eg.Center}computeSync(){var t,i;const e=t=>({value:t}),s=this._editor.getLineDecorations(this._lineNumber),n=[],o=this._laneOrLine==="lineNo";if(!s)return n;for(const r of s){const s=(i=(t=r.options.glyphMargin)===null||t===void 0?void 0:t.position)!==null&&i!==void 0?i:eg.Center;if(!o&&s!==this._laneOrLine)continue;const h=o?r.options.lineNumberHoverMessage:r.options.glyphMarginHoverMessage;h&&!TN(h)&&n.push(...C(h).map(e))}return n}}class f5{constructor(t,i,e){this.provider=t,this.hover=i,this.ordinal=e}}function g5(t,i,e,s){const n=t.ordered(i).map(((t,n)=>async function(t,i,e,s,n){try{const o=await Promise.resolve(t.provideHover(e,s,n));if(o&&function(t){const i=t.range!==void 0,e=t.contents!==void 0&&t.contents&&t.contents.length>0;return i&&e}(o))return new f5(t,o,i)}catch(t){zi(t)}}(t,n,i,e,s)));return Lr.fromPromises(n).coalesce()}ku("_executeHoverProvider",((t,i,e)=>function(t,i,e,s){return g5(t,i,e,s).map((t=>t.hover)).toPromise()}(t.get(jA).hoverProvider,i,e,ye.None)));var A5=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},p5=function(t,i){return function(e,s){i(e,s,t)}};const w5=ha;class m5{constructor(t,i,e,s,n){this.owner=t,this.range=i,this.contents=e,this.isBeforeContent=s,this.ordinal=n}isValidForHoverAnchor(t){return t.type===1&&this.range.startColumn<=t.range.startColumn&&this.range.endColumn>=t.range.endColumn}}let v5=class{constructor(t,i,e,s,n){this._editor=t,this._languageService=i,this._openerService=e,this._configurationService=s,this._languageFeaturesService=n,this.hoverOrdinal=3}createLoadingMessage(t){return new m5(this,t.range,[(new RN).appendText(st(0,"Loading..."))],!1,2e3)}computeSync(t,i){if(!this._editor.hasModel()||t.type!==1)return[];const e=this._editor.getModel(),s=t.range.startLineNumber,n=e.getLineMaxColumn(s),o=[];let r=1e3;const h=e.getLineLength(s),c=e.getLanguageIdAtPosition(t.range.startLineNumber,t.range.startColumn),a=this._editor.getOption(117),l=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});let u=!1;a>=0&&h>a&&t.range.startColumn>=a&&(u=!0,o.push(new m5(this,t.range,[{value:st(0,"Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,r++))),!u&&typeof l=="number"&&h>=l&&o.push(new m5(this,t.range,[{value:st(0,"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,r++));let d=!1;for(const e of i){const i=e.range.startLineNumber===s?e.range.startColumn:1,h=e.range.endLineNumber===s?e.range.endColumn:n,c=e.options.hoverMessage;if(!c||TN(c))continue;e.options.beforeContentClassName&&(d=!0);const a=new Es(t.range.startLineNumber,i,t.range.startLineNumber,h);o.push(new m5(this,a,C(c),d,r++))}return o}computeAsync(t,i,e){if(!this._editor.hasModel()||t.type!==1)return Lr.EMPTY;const s=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(s))return Lr.EMPTY;const n=new Cs(t.range.startLineNumber,t.range.startColumn);return g5(this._languageFeaturesService.hoverProvider,s,n,e).filter((t=>!TN(t.hover.contents))).map((i=>{const e=i.hover.range?Es.lift(i.hover.range):t.range;return new m5(this,e,i.hover.contents,!1,i.ordinal)}))}renderHoverParts(t,i){return b5(t,i,this._editor,this._languageService,this._openerService)}};function b5(t,i,e,s,n){i.sort(((t,i)=>t.ordinal-i.ordinal));const o=new Zi;for(const r of i)for(const i of r.contents){if(TN(i))continue;const r=w5("div.hover-row.markdown-hover"),h=ia(r,w5("div.hover-contents")),c=o.add(new pQ({editor:e},s,n));o.add(c.onDidRenderAsync((()=>{h.className="hover-contents code-hover-contents",t.onContentsChanged()})));const a=o.add(c.render(i));h.appendChild(a.element),t.fragment.appendChild(r)}return o}v5=A5([p5(1,Od),p5(2,gT),p5(3,Id),p5(4,jA)],v5);var y5=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},k5=function(t,i){return function(e,s){i(e,s,t)}};class x5{constructor(t,i,e){this.marker=t,this.index=i,this.total=e}}let C5=class{constructor(t,i,e){this._markerService=i,this._configService=e,this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._dispoables=new Zi,this._markers=[],this._nextIdx=-1,fs.isUri(t)?this._resourceFilter=i=>i.toString()===t.toString():t&&(this._resourceFilter=t);const s=this._configService.getValue("problems.sortOrder"),n=(t,i)=>{let e=ro(t.resource.toString(),i.resource.toString());return e===0&&(e=s==="position"?Es.compareRangesUsingStarts(t,i)||iP.compare(t.severity,i.severity):iP.compare(t.severity,i.severity)||Es.compareRangesUsingStarts(t,i)),e},o=()=>{this._markers=this._markerService.read({resource:fs.isUri(t)?t:void 0,severities:iP.Error|iP.Warning|iP.Info}),typeof t=="function"&&(this._markers=this._markers.filter((t=>this._resourceFilter(t.resource)))),this._markers.sort(n)};o(),this._dispoables.add(i.onMarkerChanged((t=>{this._resourceFilter&&!t.some((t=>this._resourceFilter(t)))||(o(),this._nextIdx=-1,this._onDidChange.fire())})))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(t){return!this._resourceFilter&&!t||!(!this._resourceFilter||!t)&&this._resourceFilter(t)}get selected(){const t=this._markers[this._nextIdx];return t&&new x5(t,this._nextIdx+1,this._markers.length)}_initIdx(t,i,e){let s=!1,n=this._markers.findIndex((i=>i.resource.toString()===t.uri.toString()));n<0&&(n=c(this._markers,{resource:t.uri},((t,i)=>ro(t.resource.toString(),i.resource.toString()))),n<0&&(n=~n));for(let e=n;e<this._markers.length;e++){let n=Es.lift(this._markers[e]);if(n.isEmpty()){const i=t.getWordAtPosition(n.getStartPosition());i&&(n=new Es(n.startLineNumber,i.startColumn,n.startLineNumber,i.endColumn))}if(i&&(n.containsPosition(i)||i.isBeforeOrEqual(n.getStartPosition()))){this._nextIdx=e,s=!0;break}if(this._markers[e].resource.toString()!==t.uri.toString())break}s||(this._nextIdx=e?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(t,i,e){if(this._markers.length===0)return!1;const s=this._nextIdx;return this._nextIdx===-1?this._initIdx(i,e,t):t?this._nextIdx=(this._nextIdx+1)%this._markers.length:t||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),s!==this._nextIdx}find(t,i){let e=this._markers.findIndex((i=>i.resource.toString()===t.toString()));if(!(e<0)){for(;e<this._markers.length;e++)if(Es.containsPosition(this._markers[e],i))return new x5(this._markers[e],e+1,this._markers.length)}}};C5=y5([k5(1,sP),k5(2,Id)],C5);const E5=za("IMarkerNavigationService");let B5=class{constructor(t,i){this._markerService=t,this._configService=i,this._provider=new _t}getMarkerList(t){for(const i of this._provider){const e=i.getMarkerList(t);if(e)return e}return new C5(t,this._markerService,this._configService)}};var D5;B5=y5([k5(0,sP),k5(1,Id)],B5),Hd(E5,B5,1),function(t){t.className=function(t){switch(t){case AL.Ignore:return"severity-ignore "+Ka.asClassName(Fs.info);case AL.Info:return Ka.asClassName(Fs.info);case AL.Warning:return Ka.asClassName(Fs.warning);case AL.Error:return Ka.asClassName(Fs.error);default:return""}}}(D5||(D5={}));var M5,S5=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},F5=function(t,i){return function(e,s){i(e,s,t)}};class I5{constructor(t,i,e,s,n){this._openerService=s,this._labelService=n,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new Zi,this._editor=i;const o=document.createElement("div");o.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.add(cc(this._relatedBlock,"click",(t=>{t.preventDefault();const i=this._relatedDiagnostics.get(t.target);i&&e(i)}))),this._scrollable=new rk(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),t.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((t=>{o.style.left=`-${t.scrollLeft}px`,o.style.top=`-${t.scrollTop}px`}))),this._disposables.add(this._scrollable)}dispose(){$i(this._disposables)}update(t){const{source:i,message:e,relatedInformation:s,code:n}=t;let o=((i==null?void 0:i.length)||0)+2;n&&(o+=typeof n=="string"?n.length:n.value.length);const r=eo(e);this._lines=r.length,this._longestLineLength=0;for(const t of r)this._longestLineLength=Math.max(t.length+o,this._longestLineLength);nc(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(t)),this._editor.applyFontInfo(this._messageBlock);let h=this._messageBlock;for(const t of r)h=document.createElement("div"),h.innerText=t,t===""&&(h.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(h);if(i||n){const t=document.createElement("span");if(t.classList.add("details"),h.appendChild(t),i){const e=document.createElement("span");e.innerText=i,e.classList.add("source"),t.appendChild(e)}if(n)if(typeof n=="string"){const i=document.createElement("span");i.innerText=`(${n})`,i.classList.add("code"),t.appendChild(i)}else this._codeLink=ha("a.code-link"),this._codeLink.setAttribute("href",`${n.target.toString()}`),this._codeLink.onclick=t=>{this._openerService.open(n.target,{allowCommands:!0}),t.preventDefault(),t.stopPropagation()},ia(this._codeLink,ha("span")).innerText=n.value,t.appendChild(this._codeLink)}if(nc(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),p(s)){const t=this._relatedBlock.appendChild(document.createElement("div"));t.style.paddingTop=`${Math.floor(.66*this._editor.getOption(67))}px`,this._lines+=1;for(const i of s){const e=document.createElement("div"),s=document.createElement("a");s.classList.add("filename"),s.innerText=`${this._labelService.getUriBasenameLabel(i.resource)}(${i.startLineNumber}, ${i.startColumn}): `,s.title=this._labelService.getUriLabel(i.resource),this._relatedDiagnostics.set(s,i);const n=document.createElement("span");n.innerText=i.message,e.appendChild(s),e.appendChild(n),this._lines+=1,t.appendChild(e)}}const c=this._editor.getOption(50),a=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),l=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:a,scrollHeight:l})}layout(t,i){this._scrollable.getDomNode().style.height=`${t}px`,this._scrollable.getDomNode().style.width=`${i}px`,this._scrollable.setScrollDimensions({width:i,height:t})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(t){let i="";switch(t.severity){case iP.Error:i=st(0,"Error");break;case iP.Warning:i=st(0,"Warning");break;case iP.Info:i=st(0,"Info");break;case iP.Hint:i=st(0,"Hint")}let e=st(0,"{0} at {1}. ",i,t.startLineNumber+":"+t.startColumn);const s=this._editor.getModel();return s&&t.startLineNumber<=s.getLineCount()&&t.startLineNumber>=1&&(e=`${s.getLineContent(t.startLineNumber)}, ${e}`),e}}let L5=M5=class extends F4{constructor(t,i,e,s,n,o,r){super(t,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},n),this._themeService=i,this._openerService=e,this._menuService=s,this._contextKeyService=o,this._labelService=r,this._callOnDispose=new Zi,this._onDidSelectRelatedInformation=new de,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=iP.Warning,this._backgroundColor=CA.white,this._applyTheme(i.getColorTheme()),this._callOnDispose.add(i.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(t){this._backgroundColor=t.getColor(j5);let i=Q5,e=O5;this._severity===iP.Warning?(i=z5,e=U5):this._severity===iP.Info&&(i=H5,e=P5);const s=t.getColor(i),n=t.getColor(e);this.style({arrowColor:s,frameColor:s,headerBackgroundColor:n,primaryHeadingColor:t.getColor(L4),secondaryHeadingColor:t.getColor(R4)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(t){super._fillHead(t),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun((t=>this.editor.focus())));const i=[],e=this._menuService.createMenu(M5.TitleMenu,this._contextKeyService);BH(e,void 0,i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0}),e.dispose()}_fillTitleIcon(t){this._icon=ia(t,ha(""))}_fillBody(t){this._parentContainer=t,t.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),t.appendChild(this._container),this._message=new I5(this._container,this.editor,(t=>this._onDidSelectRelatedInformation.fire(t)),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(t,i,e){this._container.classList.remove("stale"),this._message.update(t),this._severity=t.severity,this._applyTheme(this._themeService.getColorTheme());const s=Es.lift(t),n=this.editor.getPosition(),o=n&&s.containsPosition(n)?n:s.getStartPosition();super.show(o,this.computeRequiredHeight());const r=this.editor.getModel();if(r){const t=st(0,e>1?"{0} of {1} problems":"{0} of {1} problem",i,e);this.setTitle(BM(r.uri),t)}this._icon.className=`codicon ${D5.className(iP.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(o,0),this.editor.focus()}updateMarker(t){this._container.classList.remove("stale"),this._message.update(t)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(t,i){super._doLayoutBody(t,i),this._heightInPixel=t,this._message.layout(t,i),this._container.style.height=`${t}px`}_onWidth(t){this._message.layout(this._heightInPixel,t)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};L5.TitleMenu=new tu("gotoErrorTitleMenu"),L5=M5=S5([F5(1,Fk),F5(2,gT),F5(3,iu),F5(4,Oa),F5(5,Nl),F5(6,bO)],L5);const R5=Pw(um,dm),T5=Pw(gm,Am),N5=Pw(pm,wm),Q5=Ow("editorMarkerNavigationError.background",{dark:R5,light:R5,hcDark:$w,hcLight:$w},st(0,"Editor marker navigation widget error color.")),O5=Ow("editorMarkerNavigationError.headerBackground",{dark:Hw(Q5,.1),light:Hw(Q5,.1),hcDark:null,hcLight:null},st(0,"Editor marker navigation widget error heading background.")),z5=Ow("editorMarkerNavigationWarning.background",{dark:T5,light:T5,hcDark:$w,hcLight:$w},st(0,"Editor marker navigation widget warning color.")),U5=Ow("editorMarkerNavigationWarning.headerBackground",{dark:Hw(z5,.1),light:Hw(z5,.1),hcDark:"#0C141F",hcLight:Hw(z5,.2)},st(0,"Editor marker navigation widget warning heading background.")),H5=Ow("editorMarkerNavigationInfo.background",{dark:N5,light:N5,hcDark:$w,hcLight:$w},st(0,"Editor marker navigation widget info color.")),P5=Ow("editorMarkerNavigationInfo.headerBackground",{dark:Hw(H5,.1),light:Hw(H5,.1),hcDark:null,hcLight:null},st(0,"Editor marker navigation widget info heading background.")),j5=Ow("editorMarkerNavigation.background",{dark:rm,light:rm,hcDark:rm,hcLight:rm},st(0,"Editor marker navigation widget background."));var W5,Y5=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},_5=function(t,i){return function(e,s){i(e,s,t)}};let V5=W5=class{static get(t){return t.getContribution(W5.ID)}constructor(t,i,e,s,n){this._markerNavigationService=i,this._contextKeyService=e,this._editorService=s,this._instantiationService=n,this._sessionDispoables=new Zi,this._editor=t,this._widgetVisible=$5.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(t){if(this._model&&this._model.matches(t))return this._model;let i=!1;return this._model&&(i=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(t),i&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(L5,this._editor),this._widget.onDidClose((()=>this.close()),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((t=>{var i,e,s;!((i=this._model)===null||i===void 0)&&i.selected&&Es.containsPosition((e=this._model)===null||e===void 0?void 0:e.selected.marker,t.position)||(s=this._model)===null||s===void 0||s.resetIndex()}))),this._sessionDispoables.add(this._model.onDidChange((()=>{if(!this._widget||!this._widget.position||!this._model)return;const t=this._model.find(this._editor.getModel().uri,this._widget.position);t?this._widget.updateMarker(t.marker):this._widget.showStale()}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((t=>{this._editorService.openCodeEditor({resource:t.resource,options:{pinned:!0,revealIfOpened:!0,selection:Es.lift(t).collapseToStart()}},this._editor),this.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((()=>this._cleanUp()))),this._model}close(t=!0){this._cleanUp(),t&&this._editor.focus()}showAtMarker(t){if(this._editor.hasModel()){const i=this._getOrCreateModel(this._editor.getModel().uri);i.resetIndex(),i.move(!0,this._editor.getModel(),new Cs(t.startLineNumber,t.startColumn)),i.selected&&this._widget.showAtMarker(i.selected.marker,i.selected.index,i.selected.total)}}async nagivate(t,i){var e,s;if(this._editor.hasModel()){const n=this._getOrCreateModel(i?void 0:this._editor.getModel().uri);if(n.move(t,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const o=await this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);o&&((e=W5.get(o))===null||e===void 0||e.close(),(s=W5.get(o))===null||s===void 0||s.nagivate(t,i))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}}};V5.ID="editor.contrib.markerController",V5=W5=Y5([_5(1,E5),_5(2,Nl),_5(3,Ua),_5(4,Oa)],V5);class J5 extends vu{constructor(t,i,e){super(e),this._next=t,this._multiFile=i}async run(t,i){var e;i.hasModel()&&((e=V5.get(i))===null||e===void 0||e.nagivate(this._next,this._multiFile))}}class G5 extends J5{constructor(){super(!0,!1,{id:G5.ID,label:G5.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:QC.focus,primary:578,weight:100},menuOpts:{menuId:L5.TitleMenu,title:G5.LABEL,icon:X_("marker-navigation-next",Fs.arrowDown,st(0,"Icon for goto next marker.")),group:"navigation",order:1}})}}G5.ID="editor.action.marker.next",G5.LABEL=st(0,"Go to Next Problem (Error, Warning, Info)");class K5 extends J5{constructor(){super(!1,!1,{id:K5.ID,label:K5.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:QC.focus,primary:1602,weight:100},menuOpts:{menuId:L5.TitleMenu,title:K5.LABEL,icon:X_("marker-navigation-previous",Fs.arrowUp,st(0,"Icon for goto previous marker.")),group:"navigation",order:2}})}}K5.ID="editor.action.marker.prev",K5.LABEL=st(0,"Go to Previous Problem (Error, Warning, Info)");Bu(V5.ID,V5,4),Cu(G5),Cu(K5),Cu(class extends J5{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:st(0,"Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:QC.focus,primary:66,weight:100},menuOpts:{menuId:tu.MenubarGoMenu,title:st(0,"Next &&Problem"),group:"6_problem_nav",order:1}})}}),Cu(class extends J5{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:st(0,"Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:QC.focus,primary:1090,weight:100},menuOpts:{menuId:tu.MenubarGoMenu,title:st(0,"Previous &&Problem"),group:"6_problem_nav",order:2}})}});const $5=new Tl("markersNavigationVisible",!1);xu(new(mu.bindToContribution(V5.get))({id:"closeMarkersNavigation",precondition:$5,handler:t=>t.close(),kbOpts:{weight:150,kbExpr:QC.focus,primary:9,secondary:[1033]}}));var X5=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},q5=function(t,i){return function(e,s){i(e,s,t)}};const Z5=ha;class t8{constructor(t,i,e){this.owner=t,this.range=i,this.marker=e}isValidForHoverAnchor(t){return t.type===1&&this.range.startColumn<=t.range.startColumn&&this.range.endColumn>=t.range.endColumn}}const i8={type:1,filter:{include:o1.QuickFix},triggerAction:r1.QuickFixHover};let e8=class{constructor(t,i,e,s){this._editor=t,this._markerDecorationsService=i,this._openerService=e,this._languageFeaturesService=s,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(t,i){if(!this._editor.hasModel()||t.type!==1&&!t.supportsMarkerHover)return[];const e=this._editor.getModel(),s=t.range.startLineNumber,n=e.getLineMaxColumn(s),o=[];for(const r of i){const i=r.range.startLineNumber===s?r.range.startColumn:1,h=r.range.endLineNumber===s?r.range.endColumn:n,c=this._markerDecorationsService.getMarker(e.uri,r);if(!c)continue;const a=new Es(t.range.startLineNumber,i,t.range.startLineNumber,h);o.push(new t8(this,a,c))}return o}renderHoverParts(t,i){if(!i.length)return te.None;const e=new Zi;i.forEach((i=>t.fragment.appendChild(this.renderMarkerHover(i,e))));const s=i.length===1?i[0]:i.sort(((t,i)=>iP.compare(t.marker.severity,i.marker.severity)))[0];return this.renderMarkerStatusbar(t,s,e),e}renderMarkerHover(t,i){const e=Z5("div.hover-row"),s=ia(e,Z5("div.marker.hover-contents")),{source:n,message:o,code:r,relatedInformation:h}=t.marker;this._editor.applyFontInfo(s);const c=ia(s,Z5("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=o,n||r)if(r&&typeof r!="string"){const t=Z5("span");n&&(ia(t,Z5("span")).innerText=n);const e=ia(t,Z5("a.code-link"));e.setAttribute("href",r.target.toString()),i.add(rc(e,"click",(t=>{this._openerService.open(r.target,{allowCommands:!0}),t.preventDefault(),t.stopPropagation()}))),ia(e,Z5("span")).innerText=r.value;const o=ia(s,t);o.style.opacity="0.6",o.style.paddingLeft="6px"}else{const t=ia(s,Z5("span"));t.style.opacity="0.6",t.style.paddingLeft="6px",t.innerText=n&&r?`${n}(${r})`:n||`(${r})`}if(p(h))for(const{message:t,resource:e,startLineNumber:n,startColumn:o}of h){const r=ia(s,Z5("div"));r.style.marginTop="8px";const h=ia(r,Z5("a"));h.innerText=`${BM(e)}(${n}, ${o}): `,h.style.cursor="pointer",i.add(rc(h,"click",(t=>{t.stopPropagation(),t.preventDefault(),this._openerService&&this._openerService.open(e,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:n,startColumn:o}}}).catch(Oi)})));const c=ia(r,Z5("span"));c.innerText=t,this._editor.applyFontInfo(c)}return e}renderMarkerStatusbar(t,i,e){if(i.marker.severity===iP.Error||i.marker.severity===iP.Warning||i.marker.severity===iP.Info){const e=V5.get(this._editor);e&&t.statusBar.addAction({label:st(0,"View Problem"),commandId:G5.ID,run:()=>{t.hide(),e.showAtMarker(i.marker),this._editor.focus()}})}if(!this._editor.getOption(91)){const s=t.statusBar.append(Z5("div"));this.recentMarkerCodeActionsInfo&&(eP.makeKey(this.recentMarkerCodeActionsInfo.marker)===eP.makeKey(i.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(s.textContent=st(0,"No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const n=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?te.None:yr((()=>s.textContent=st(0,"Checking for quick fixes...")),200,e);s.textContent||(s.textContent=" ");const o=this.getCodeActions(i.marker);e.add(qi((()=>o.cancel()))),o.then((o=>{if(n.dispose(),this.recentMarkerCodeActionsInfo={marker:i.marker,hasCodeActions:o.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return o.dispose(),void(s.textContent=st(0,"No quick fixes available"));s.style.display="none";let r=!1;e.add(qi((()=>{r||o.dispose()}))),t.statusBar.addAction({label:st(0,"Quick Fix..."),commandId:u1,run:i=>{r=!0;const e=r2.get(this._editor),s=yc(i);t.hide(),e==null||e.showCodeActions(i8,o,{x:s.left,y:s.top,width:s.width,height:s.height})}})}),Oi)}}getCodeActions(t){return Ar((i=>v1(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new Es(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn),i8,kO.None,i)))}};e8=X5([q5(1,uw),q5(2,gT),q5(3,jA)],e8);const s8="editor.action.inlineSuggest.commit",n8="editor.action.inlineSuggest.showPrevious",o8="editor.action.inlineSuggest.showNext";var r8,h8=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},c8=function(t,i){return function(e,s){i(e,s,t)}};let a8=class extends te{constructor(t,i,e){super(),this.editor=t,this.model=i,this.instantiationService=e,this.alwaysShowToolbar=rU(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(62).showToolbar==="always")),this.sessionPosition=void 0,this.position=Gz(this,(t=>{var i,e,s;const n=(i=this.model.read(t))===null||i===void 0?void 0:i.primaryGhostText.read(t);if(!this.alwaysShowToolbar.read(t)||!n||n.parts.length===0)return this.sessionPosition=void 0,null;const o=n.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==n.lineNumber&&(this.sessionPosition=void 0);const r=new Cs(n.lineNumber,Math.min(o,(s=(e=this.sessionPosition)===null||e===void 0?void 0:e.column)!==null&&s!==void 0?s:Number.MAX_SAFE_INTEGER));return this.sessionPosition=r,r})),this._register(eU(((i,e)=>{const s=this.model.read(i);if(!s||!this.alwaysShowToolbar.read(i))return;const n=e.add(this.instantiationService.createInstance(d8,this.editor,!0,this.position,s.selectedInlineCompletionIndex,s.inlineCompletionsCount,s.selectedInlineCompletion.map((t=>{var i;return(i=t==null?void 0:t.inlineCompletion.source.inlineCompletions.commands)!==null&&i!==void 0?i:[]}))));t.addContentWidget(n),e.add(qi((()=>t.removeContentWidget(n)))),e.add(Zz((t=>{this.position.read(t)&&s.lastTriggerKind.read(t)!==Qs.Explicit&&s.triggerExplicitly()})))})))}};a8=h8([c8(2,Oa)],a8);const l8=X_("inline-suggestion-hints-next",Fs.chevronRight,st(0,"Icon for show next parameter hint.")),u8=X_("inline-suggestion-hints-previous",Fs.chevronLeft,st(0,"Icon for show previous parameter hint."));let d8=r8=class extends te{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(t,i,e){const s=new ja(t,i,e,!0,(()=>this._commandService.executeCommand(t))),n=this.keybindingService.lookupKeybinding(t,this._contextKeyService);let o=i;return n&&(o=st(0,"{0} ({1})",i,n.getLabel())),s.tooltip=o,s}constructor(t,i,e,s,n,o,r,c,a,l,u){super(),this.editor=t,this.withBorder=i,this._position=e,this._currentSuggestionIdx=s,this._suggestionCount=n,this._extraCommands=o,this._commandService=r,this.keybindingService=a,this._contextKeyService=l,this._menuService=u,this.id="InlineSuggestionHintsContentWidget"+r8.id++,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=va("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[va("div@toolBar")]),this.previousAction=this.createCommandAction(n8,st(0,"Previous"),Ka.asClassName(u8)),this.availableSuggestionCountAction=new ja("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(o8,st(0,"Next"),Ka.asClassName(l8)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(tu.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new Er((()=>{this.availableSuggestionCountAction.label=""}),100)),this.disableButtonsDebounced=this._register(new Er((()=>{this.previousAction.enabled=this.nextAction.enabled=!1}),100)),this.lastCommands=[],this.toolBar=this._register(c.createInstance(A8,this.nodes.toolBar,tu.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:t=>t.startsWith("primary")},actionViewItemProvider:(t,i)=>{if(t instanceof ou)return c.createInstance(g8,t,void 0);if(t===this.availableSuggestionCountAction){const i=new f8(void 0,t,{label:!0,icon:!1});return i.setClass("availableSuggestionCount"),i}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility((t=>{r8._dropDownVisible=t}))),this._register(Zz((t=>{this._position.read(t),this.editor.layoutContentWidget(this)}))),this._register(Zz((t=>{const i=this._suggestionCount.read(t),e=this._currentSuggestionIdx.read(t);i!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${e+1}/${i}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),i!==void 0&&i>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()}))),this._register(Zz((t=>{const i=this._extraCommands.read(t);if(h(this.lastCommands,i))return;this.lastCommands=i;const e=i.map((t=>({class:void 0,id:t.id,enabled:!0,tooltip:t.tooltip||"",label:t.title,run:i=>this._commandService.executeCommand(t.id)})));for(const[t,i]of this.inlineCompletionsActionsMenus.getActions())for(const t of i)t instanceof ou&&e.push(t);e.length>0&&e.unshift(new Ya),this.toolBar.setAdditionalSecondaryActions(e)})))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};d8._dropDownVisible=!1,d8.id=0,d8=r8=h8([c8(6,$a),c8(7,Oa),c8(8,Hx),c8(9,Nl),c8(10,iu)],d8);class f8 extends qU{constructor(){super(...arguments),this._className=void 0}setClass(t){this._className=t}render(t){super.render(t),this._className&&t.classList.add(this._className)}updateTooltip(){}}let g8=class extends MH{updateLabel(){const t=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!t)return super.updateLabel();if(this.label){const i=va("div.keybinding").root;this._register(new PY(i,Rt,{disableTitle:!0,...HY})).set(t),this.label.textContent=this._action.label,this.label.appendChild(i),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}},A8=class extends DK{constructor(t,i,e,s,n,o,r,h){super(t,{resetMenu:i,...e},s,n,o,r,h),this.menuId=i,this.options2=e,this.menuService=s,this.contextKeyService=n,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange((()=>this.updateToolbar()))),this.updateToolbar()}updateToolbar(){var t,i,e,s,n,o,r;const h=[],c=[];BH(this.menu,(t=this.options2)===null||t===void 0?void 0:t.menuOptions,{primary:h,secondary:c},(e=(i=this.options2)===null||i===void 0?void 0:i.toolbarOptions)===null||e===void 0?void 0:e.primaryGroup,(n=(s=this.options2)===null||s===void 0?void 0:s.toolbarOptions)===null||n===void 0?void 0:n.shouldInlineSubmenu,(r=(o=this.options2)===null||o===void 0?void 0:o.toolbarOptions)===null||r===void 0?void 0:r.useSeparatorsInPrimaryActions),c.push(...this.additionalActions),h.unshift(...this.prependedPrimaryActions),this.setActions(h,c)}setPrependedPrimaryActions(t){h(this.prependedPrimaryActions,t,((t,i)=>t===i))||(this.prependedPrimaryActions=t,this.updateToolbar())}setAdditionalSecondaryActions(t){h(this.additionalActions,t,((t,i)=>t===i))||(this.additionalActions=t,this.updateToolbar())}};A8=h8([c8(3,iu),c8(4,Nl),c8(5,aT),c8(6,Hx),c8(7,cu)],A8);var p8,w8=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},m8=function(t,i){return function(e,s){i(e,s,t)}};let v8=p8=class extends te{constructor(t,i,e,s,n){super(),this._editor=t,this._instantiationService=i,this._openerService=e,this._languageService=s,this._keybindingService=n,this._listenersStore=new Zi,this._hoverState={mouseDown:!1,contentHoverFocused:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new Er((()=>this._reactToEditorMouseMove(this._mouseMoveEvent)),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration((t=>{t.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())})))}static get(t){return t.getContribution(p8.ID)}_hookListeners(){const t=this._editor.getOption(60);this._hoverSettings={enabled:t.enabled,sticky:t.sticky,hidingDelay:t.delay},t.enabled?(this._listenersStore.add(this._editor.onMouseDown((t=>this._onEditorMouseDown(t)))),this._listenersStore.add(this._editor.onMouseUp((()=>this._onEditorMouseUp()))),this._listenersStore.add(this._editor.onMouseMove((t=>this._onEditorMouseMove(t)))),this._listenersStore.add(this._editor.onKeyDown((t=>this._onKeyDown(t))))):(this._listenersStore.add(this._editor.onMouseMove((t=>this._onEditorMouseMove(t)))),this._listenersStore.add(this._editor.onKeyDown((t=>this._onKeyDown(t))))),this._listenersStore.add(this._editor.onMouseLeave((t=>this._onEditorMouseLeave(t)))),this._listenersStore.add(this._editor.onDidChangeModel((()=>{this._cancelScheduler(),this._hideWidgets()}))),this._listenersStore.add(this._editor.onDidChangeModelContent((()=>this._cancelScheduler()))),this._listenersStore.add(this._editor.onDidScrollChange((t=>this._onEditorScrollChanged(t))))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(t){(t.scrollTopChanged||t.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(t){var i;this._hoverState.mouseDown=!0;const e=t.target;e.type!==9||e.detail!==r5.ID?e.type===12&&e.detail===u5.ID||(e.type!==12&&(this._hoverState.contentHoverFocused=!1),!((i=this._contentWidget)===null||i===void 0)&&i.widget.isResizing||this._hideWidgets()):this._hoverState.contentHoverFocused=!0}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(t){var i,e;this._cancelScheduler();const s=t.event.browserEvent.relatedTarget;!((i=this._contentWidget)===null||i===void 0)&&i.widget.isResizing||!((e=this._contentWidget)===null||e===void 0)&&e.containsNode(s)||this._hideWidgets()}_isMouseOverWidget(t){var i,e,s,n,o;const r=t.target,h=this._hoverSettings.sticky;return!(!h||r.type!==9||r.detail!==r5.ID)||!(!h||!(!((i=this._contentWidget)===null||i===void 0)&&i.containsNode((e=t.event.browserEvent.view)===null||e===void 0?void 0:e.document.activeElement))||!((n=(s=t.event.browserEvent.view)===null||s===void 0?void 0:s.getSelection())===null||n===void 0)&&n.isCollapsed)||!(h||r.type!==9||r.detail!==r5.ID||!(!((o=this._contentWidget)===null||o===void 0)&&o.isColorPickerVisible))||!(!h||r.type!==12||r.detail!==u5.ID)}_onEditorMouseMove(t){var i,e,s,n;if(this._mouseMoveEvent=t,((i=this._contentWidget)===null||i===void 0?void 0:i.isFocused)||((e=this._contentWidget)===null||e===void 0?void 0:e.isResizing)||this._hoverState.mouseDown&&this._hoverState.contentHoverFocused)return;const o=this._hoverSettings.sticky;if(o&&(!((s=this._contentWidget)===null||s===void 0)&&s.isVisibleFromKeyboard))return;if(this._isMouseOverWidget(t))return void this._reactToEditorMouseMoveRunner.cancel();const r=this._hoverSettings.hidingDelay;!((n=this._contentWidget)===null||n===void 0)&&n.isVisible&&o&&r>0?this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(r):this._reactToEditorMouseMove(t)}_reactToEditorMouseMove(t){var i,e,s,n;if(!t)return;const o=t.target,r=(i=o.element)===null||i===void 0?void 0:i.classList.contains("colorpicker-color-decoration"),h=this._editor.getOption(148),c=this._hoverSettings.enabled,a=this._hoverState.activatedByDecoratorClick;if(r&&(h==="click"&&!a||h==="hover"&&!c||h==="clickAndHover"&&!c&&!a)||!r&&!c&&!a)return void this._hideWidgets();this._getOrCreateContentWidget().showsOrWillShow(t)?(e=this._glyphWidget)===null||e===void 0||e.hide():o.type===2&&o.position&&o.detail.glyphMarginLane?((s=this._contentWidget)===null||s===void 0||s.hide(),this._getOrCreateGlyphWidget().startShowingAt(o.position.lineNumber,o.detail.glyphMarginLane)):o.type===3&&o.position?((n=this._contentWidget)===null||n===void 0||n.hide(),this._getOrCreateGlyphWidget().startShowingAt(o.position.lineNumber,"lineNo")):this._hideWidgets()}_onKeyDown(t){var i;if(!this._editor.hasModel())return;const e=this._keybindingService.softDispatch(t,this._editor.getDomNode()),s=e.kind===1||e.kind===2&&e.commandId==="editor.action.showHover"&&((i=this._contentWidget)===null||i===void 0?void 0:i.isVisible);t.keyCode===5||t.keyCode===6||t.keyCode===57||t.keyCode===4||s||this._hideWidgets()}_hideWidgets(){var t,i,e;this._hoverState.mouseDown&&this._hoverState.contentHoverFocused&&(!((t=this._contentWidget)===null||t===void 0)&&t.isColorPickerVisible)||d8.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,this._hoverState.contentHoverFocused=!1,(i=this._glyphWidget)===null||i===void 0||i.hide(),(e=this._contentWidget)===null||e===void 0||e.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(e5,this._editor)),this._contentWidget}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=new u5(this._editor,this._languageService,this._openerService)),this._glyphWidget}showContentHover(t,i,e,s,n=!1){this._hoverState.activatedByDecoratorClick=n,this._getOrCreateContentWidget().startShowingAtRange(t,i,e,s)}focus(){var t;(t=this._contentWidget)===null||t===void 0||t.focus()}scrollUp(){var t;(t=this._contentWidget)===null||t===void 0||t.scrollUp()}scrollDown(){var t;(t=this._contentWidget)===null||t===void 0||t.scrollDown()}scrollLeft(){var t;(t=this._contentWidget)===null||t===void 0||t.scrollLeft()}scrollRight(){var t;(t=this._contentWidget)===null||t===void 0||t.scrollRight()}pageUp(){var t;(t=this._contentWidget)===null||t===void 0||t.pageUp()}pageDown(){var t;(t=this._contentWidget)===null||t===void 0||t.pageDown()}goToTop(){var t;(t=this._contentWidget)===null||t===void 0||t.goToTop()}goToBottom(){var t;(t=this._contentWidget)===null||t===void 0||t.goToBottom()}get isColorPickerVisible(){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.isColorPickerVisible}get isHoverVisible(){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.isVisible}dispose(){var t,i;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(t=this._glyphWidget)===null||t===void 0||t.dispose(),(i=this._contentWidget)===null||i===void 0||i.dispose()}};var b8;v8.ID="editor.contrib.hover",v8=p8=w8([m8(1,Oa),m8(2,gT),m8(3,Od),m8(4,Hx)],v8),function(t){t.NoAutoFocus="noAutoFocus",t.FocusIfVisible="focusIfVisible",t.AutoFocusImmediately="autoFocusImmediately"}(b8||(b8={}));Bu(v8.ID,v8,2),Cu(class extends vu{constructor(){super({id:"editor.action.showHover",label:st(0,"Show or Focus Hover"),metadata:{description:"Show or Focus Hover",args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[b8.NoAutoFocus,b8.FocusIfVisible,b8.AutoFocusImmediately],enumDescriptions:[st(0,"The hover will not automatically take focus."),st(0,"The hover will take focus only if it is already visible."),st(0,"The hover will automatically take focus when it appears.")],default:b8.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2087),weight:100}})}run(t,i,e){if(!i.hasModel())return;const s=v8.get(i);if(!s)return;const n=e==null?void 0:e.focus;let o=b8.FocusIfVisible;Object.values(b8).includes(n)?o=n:typeof n=="boolean"&&n&&(o=b8.AutoFocusImmediately);const r=t=>{const e=i.getPosition(),n=new Es(e.lineNumber,e.column,e.lineNumber,e.column);s.showContentHover(n,1,1,t)},h=i.getOption(2)===2;s.isHoverVisible?o!==b8.NoAutoFocus?s.focus():r(h):r(h||o===b8.AutoFocusImmediately)}}),Cu(class extends vu{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:st(0,"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(t,i){const e=v8.get(i);if(!e)return;const s=i.getPosition();if(!s)return;const n=new Es(s.lineNumber,s.column,s.lineNumber,s.column),o=W3.get(i);o&&o.startFindDefinitionFromCursor(s).then((()=>{e.showContentHover(n,1,1,!0)}))}}),Cu(class extends vu{constructor(){super({id:"editor.action.scrollUpHover",label:st(0,"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:QC.hoverFocused,kbOpts:{kbExpr:QC.hoverFocused,primary:16,weight:100}})}run(t,i){const e=v8.get(i);e&&e.scrollUp()}}),Cu(class extends vu{constructor(){super({id:"editor.action.scrollDownHover",label:st(0,"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:QC.hoverFocused,kbOpts:{kbExpr:QC.hoverFocused,primary:18,weight:100}})}run(t,i){const e=v8.get(i);e&&e.scrollDown()}}),Cu(class extends vu{constructor(){super({id:"editor.action.scrollLeftHover",label:st(0,"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:QC.hoverFocused,kbOpts:{kbExpr:QC.hoverFocused,primary:15,weight:100}})}run(t,i){const e=v8.get(i);e&&e.scrollLeft()}}),Cu(class extends vu{constructor(){super({id:"editor.action.scrollRightHover",label:st(0,"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:QC.hoverFocused,kbOpts:{kbExpr:QC.hoverFocused,primary:17,weight:100}})}run(t,i){const e=v8.get(i);e&&e.scrollRight()}}),Cu(class extends vu{constructor(){super({id:"editor.action.pageUpHover",label:st(0,"Page Up Hover"),alias:"Page Up Hover",precondition:QC.hoverFocused,kbOpts:{kbExpr:QC.hoverFocused,primary:11,secondary:[528],weight:100}})}run(t,i){const e=v8.get(i);e&&e.pageUp()}}),Cu(class extends vu{constructor(){super({id:"editor.action.pageDownHover",label:st(0,"Page Down Hover"),alias:"Page Down Hover",precondition:QC.hoverFocused,kbOpts:{kbExpr:QC.hoverFocused,primary:12,secondary:[530],weight:100}})}run(t,i){const e=v8.get(i);e&&e.pageDown()}}),Cu(class extends vu{constructor(){super({id:"editor.action.goToTopHover",label:st(0,"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:QC.hoverFocused,kbOpts:{kbExpr:QC.hoverFocused,primary:14,secondary:[2064],weight:100}})}run(t,i){const e=v8.get(i);e&&e.goToTop()}}),Cu(class extends vu{constructor(){super({id:"editor.action.goToBottomHover",label:st(0,"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:QC.hoverFocused,kbOpts:{kbExpr:QC.hoverFocused,primary:13,secondary:[2066],weight:100}})}run(t,i){const e=v8.get(i);e&&e.goToBottom()}}),G3.register(v5),G3.register(e8),Nk(((t,i)=>{const e=t.getColor(Mm);e&&(i.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${e.transparent(.5)}; }`),i.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${e.transparent(.5)}; }`),i.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${e.transparent(.5)}; }`))}));class y8 extends te{constructor(t){super(),this._editor=t,this._register(t.onMouseDown((t=>this.onMouseDown(t))))}dispose(){super.dispose()}onMouseDown(t){const i=this._editor.getOption(148);if(i!=="click"&&i!=="clickAndHover")return;const e=t.target;if(e.type!==6||!e.detail.injectedText||e.detail.injectedText.options.attachedData!==U2||!e.range)return;const s=this._editor.getContribution(v8.ID);if(s&&!s.isColorPickerVisible){const t=new Es(e.range.startLineNumber,e.range.startColumn+1,e.range.endLineNumber,e.range.endColumn+1);s.showContentHover(t,1,0,!1,!0)}}}y8.ID="editor.contrib.colorContribution",Bu(y8.ID,y8,2),G3.register(e4);var k8,x8,C8=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},E8=function(t,i){return function(e,s){i(e,s,t)}};let B8=k8=class extends te{constructor(t,i,e,s,n,o,r){super(),this._editor=t,this._modelService=e,this._keybindingService=s,this._instantiationService=n,this._languageFeatureService=o,this._languageConfigurationService=r,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=QC.standaloneColorPickerVisible.bindTo(i),this._standaloneColorPickerFocused=QC.standaloneColorPickerFocused.bindTo(i)}showOrFocus(){var t;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(t=this._standaloneColorPickerWidget)===null||t===void 0||t.focus():this._standaloneColorPickerWidget=new D8(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var t;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(t=this._standaloneColorPickerWidget)===null||t===void 0||t.hide(),this._editor.focus()}insertColor(){var t;(t=this._standaloneColorPickerWidget)===null||t===void 0||t.updateEditor(),this.hide()}static get(t){return t.getContribution(k8.ID)}};B8.ID="editor.contrib.standaloneColorPickerController",B8=k8=C8([E8(1,Nl),E8(2,Ha),E8(3,Hx),E8(4,Oa),E8(5,jA),E8(6,uf)],B8),Bu(B8.ID,B8,1);let D8=x8=class extends te{constructor(t,i,e,s,n,o,r,h){var c;super(),this._editor=t,this._standaloneColorPickerVisible=i,this._standaloneColorPickerFocused=e,this._modelService=n,this._keybindingService=o,this._languageFeaturesService=r,this._languageConfigurationService=h,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new de),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=s.createInstance(n4,this._editor),this._position=(c=this._editor._getViewModel())===null||c===void 0?void 0:c.getPrimaryCursorState().modelState.position;const a=this._editor.getSelection(),l=a?{startLineNumber:a.startLineNumber,startColumn:a.startColumn,endLineNumber:a.endLineNumber,endColumn:a.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},u=this._register(ta(this._body));this._register(u.onDidBlur((t=>{this.hide()}))),this._register(u.onDidFocus((t=>{this.focus()}))),this._register(this._editor.onDidChangeCursorPosition((()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()}))),this._register(this._editor.onMouseMove((t=>{var i;const e=(i=t.target.element)===null||i===void 0?void 0:i.classList;e&&e.contains("colorpicker-color-decoration")&&this.hide()}))),this._register(this.onResult((t=>{this._render(t.value,t.foundInEditor)}))),this._start(l),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return x8.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const t=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:t?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(t){const i=await this._computeAsync(t);i&&this._onResult.fire(new M8(i.result,i.foundInEditor))}async _computeAsync(t){if(!this._editor.hasModel())return null;const i={range:t,color:{red:0,green:0,blue:0,alpha:1}},e=await this._standaloneColorPickerParticipant.createColorHover(i,new D2(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return e?{result:e.colorHover,foundInEditor:e.foundInEditor}:null}_render(t,i){const e=document.createDocumentFragment();let s;const n={fragment:e,statusBar:this._register(new h5(this._keybindingService)),setColorPicker:t=>s=t,onContentsChanged:()=>{},hide:()=>this.hide()};if(this._colorHover=t,this._register(this._standaloneColorPickerParticipant.renderHoverParts(n,[t])),s===void 0)return;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px",this._body.tabIndex=0,this._body.appendChild(e),s.layout();const o=s.body,r=o.saturationBox.domNode.clientWidth,h=o.domNode.clientWidth-r-22-8,c=s.body.enterButton;c==null||c.onClicked((()=>{this.updateEditor(),this.hide()}));const a=s.header;a.pickedColorNode.style.width=r+8+"px",a.originalColorNode.style.width=h+"px";const l=s.header.closeButton;l==null||l.onClicked((()=>{this.hide()})),i&&(c&&(c.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(t.range)),this._editor.layoutContentWidget(this)}};D8.ID="editor.contrib.standaloneColorPickerWidget",D8=x8=C8([E8(3,Oa),E8(4,Ha),E8(5,Hx),E8(6,jA),E8(7,uf)],D8);class M8{constructor(t,i){this.value=t,this.foundInEditor=i}}Cu(class extends vu{constructor(){super({id:"editor.action.hideColorPicker",label:st(0,"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:QC.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100}})}run(t,i){var e;(e=B8.get(i))===null||e===void 0||e.hide()}}),Cu(class extends vu{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:st(0,"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:QC.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100}})}run(t,i){var e;(e=B8.get(i))===null||e===void 0||e.insertColor()}}),hu(class extends yu{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...nt(0,"Show or Focus Standalone Color Picker"),mnemonicTitle:st(0,"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:tu.CommandPalette}]})}runEditorCommand(t,i){var e;(e=B8.get(i))===null||e===void 0||e.showOrFocus()}});class S8{constructor(t,i,e){this.languageConfigurationService=e,this._selection=t,this._insertSpace=i,this._usedEndToken=null}static _haystackHasNeedleAtOffset(t,i,e){if(e<0)return!1;const s=i.length;if(e+s>t.length)return!1;for(let n=0;n<s;n++){const s=t.charCodeAt(e+n),o=i.charCodeAt(n);if(s!==o&&!(s>=65&&s<=90&&s+32===o||o>=65&&o<=90&&o+32===s))return!1}return!0}_createOperationsForBlockComment(t,i,e,s,n,o){const r=t.startLineNumber,h=t.startColumn,c=t.endLineNumber,a=t.endColumn,l=n.getLineContent(r),u=n.getLineContent(c);let d,f=l.lastIndexOf(i,h-1+i.length),g=u.indexOf(e,a-1-e.length);if(f!==-1&&g!==-1)if(r===c)l.substring(f+i.length,g).indexOf(e)>=0&&(f=-1,g=-1);else{const t=l.substring(f+i.length),s=u.substring(0,g);(t.indexOf(e)>=0||s.indexOf(e)>=0)&&(f=-1,g=-1)}f!==-1&&g!==-1?(s&&f+i.length<l.length&&l.charCodeAt(f+i.length)===32&&(i+=" "),s&&g>0&&u.charCodeAt(g-1)===32&&(e=" "+e,g-=1),d=S8._createRemoveBlockCommentOperations(new Es(r,f+i.length+1,c,g+1),i,e)):(d=S8._createAddBlockCommentOperations(t,i,e,this._insertSpace),this._usedEndToken=d.length===1?e:null);for(const t of d)o.addTrackedEditOperation(t.range,t.text)}static _createRemoveBlockCommentOperations(t,i,e){const s=[];return Es.isEmpty(t)?s.push(KQ.delete(new Es(t.startLineNumber,t.startColumn-i.length,t.endLineNumber,t.endColumn+e.length))):(s.push(KQ.delete(new Es(t.startLineNumber,t.startColumn-i.length,t.startLineNumber,t.startColumn))),s.push(KQ.delete(new Es(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn+e.length)))),s}static _createAddBlockCommentOperations(t,i,e,s){const n=[];return Es.isEmpty(t)?n.push(KQ.replace(new Es(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn),i+"  "+e)):(n.push(KQ.insert(new Cs(t.startLineNumber,t.startColumn),i+(s?" ":""))),n.push(KQ.insert(new Cs(t.endLineNumber,t.endColumn),(s?" ":"")+e))),n}getEditOperations(t,i){const e=this._selection.startLineNumber,s=this._selection.startColumn;t.tokenization.tokenizeIfCheap(e);const n=t.getLanguageIdAtPosition(e,s),o=this.languageConfigurationService.getLanguageConfiguration(n).comments;o&&o.blockCommentStartToken&&o.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,o.blockCommentStartToken,o.blockCommentEndToken,this._insertSpace,t,i)}computeCursorState(t,i){const e=i.getInverseEditOperations();if(e.length===2){const t=e[0],i=e[1];return new Bs(t.range.endLineNumber,t.range.endColumn,i.range.startLineNumber,i.range.startColumn)}{const t=e[0].range,i=this._usedEndToken?-this._usedEndToken.length-1:0;return new Bs(t.endLineNumber,t.endColumn+i,t.endLineNumber,t.endColumn+i)}}}class F8{constructor(t,i,e,s,n,o,r){this.languageConfigurationService=t,this._selection=i,this._indentSize=e,this._type=s,this._insertSpace=n,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=r||!1}static _gatherPreflightCommentStrings(t,i,e,s){t.tokenization.tokenizeIfCheap(i);const n=t.getLanguageIdAtPosition(i,1),o=s.getLanguageConfiguration(n).comments,r=o?o.lineCommentToken:null;if(!r)return null;const h=[];for(let t=0,s=e-i+1;t<s;t++)h[t]={ignore:!1,commentStr:r,commentStrOffset:0,commentStrLength:r.length};return h}static _analyzeLines(t,i,e,s,n,o,r,h){let c,a=!0;c=t===0||t!==1;for(let h=0,l=s.length;h<l;h++){const l=s[h],u=n+h;if(u===n&&r){l.ignore=!0;continue}const d=e.getLineContent(u),f=so(d);if(f!==-1){if(a=!1,l.ignore=!1,l.commentStrOffset=f,c&&!S8._haystackHasNeedleAtOffset(d,l.commentStr,f)&&(t===0?c=!1:t===1||(l.ignore=!0)),c&&i){const t=f+l.commentStrLength;t<d.length&&d.charCodeAt(t)===32&&(l.commentStrLength+=1)}}else l.ignore=o,l.commentStrOffset=d.length}if(t===0&&a){c=!1;for(let t=0,i=s.length;t<i;t++)s[t].ignore=!1}return{supported:!0,shouldRemoveComments:c,lines:s}}static _gatherPreflightData(t,i,e,s,n,o,r,h){const c=F8._gatherPreflightCommentStrings(e,s,n,h);return c===null?{supported:!1}:F8._analyzeLines(t,i,e,c,s,o,r,h)}_executeLineComments(t,i,e,s){let n;e.shouldRemoveComments?n=F8._createRemoveLineCommentsOperations(e.lines,s.startLineNumber):(F8._normalizeInsertionPoint(t,e.lines,s.startLineNumber,this._indentSize),n=this._createAddLineCommentsOperations(e.lines,s.startLineNumber));const o=new Cs(s.positionLineNumber,s.positionColumn);for(let e=0,s=n.length;e<s;e++)i.addEditOperation(n[e].range,n[e].text),Es.isEmpty(n[e].range)&&Es.getStartPosition(n[e].range).equals(o)&&t.getLineContent(o.lineNumber).length+1===o.column&&(this._deltaColumn=(n[e].text||"").length);this._selectionId=i.trackSelection(s)}_attemptRemoveBlockComment(t,i,e,s){let n=i.startLineNumber,o=i.endLineNumber;const r=s.length+Math.max(t.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.startColumn);let h=t.getLineContent(n).lastIndexOf(e,r-1),c=t.getLineContent(o).indexOf(s,i.endColumn-1-e.length);return h!==-1&&c===-1&&(c=t.getLineContent(n).indexOf(s,h+e.length),o=n),h===-1&&c!==-1&&(h=t.getLineContent(o).lastIndexOf(e,c),n=o),!i.isEmpty()||h!==-1&&c!==-1||(h=t.getLineContent(n).indexOf(e),h!==-1&&(c=t.getLineContent(n).indexOf(s,h+e.length))),h!==-1&&t.getLineContent(n).charCodeAt(h+e.length)===32&&(e+=" "),c!==-1&&t.getLineContent(o).charCodeAt(c-1)===32&&(s=" "+s,c-=1),h!==-1&&c!==-1?S8._createRemoveBlockCommentOperations(new Es(n,h+e.length+1,o,c+1),e,s):null}_executeBlockComment(t,i,e){t.tokenization.tokenizeIfCheap(e.startLineNumber);const s=t.getLanguageIdAtPosition(e.startLineNumber,1),n=this.languageConfigurationService.getLanguageConfiguration(s).comments;if(!n||!n.blockCommentStartToken||!n.blockCommentEndToken)return;const o=n.blockCommentStartToken,r=n.blockCommentEndToken;let h=this._attemptRemoveBlockComment(t,e,o,r);if(!h){if(e.isEmpty()){const i=t.getLineContent(e.startLineNumber);let s=so(i);s===-1&&(s=i.length),h=S8._createAddBlockCommentOperations(new Es(e.startLineNumber,s+1,e.startLineNumber,i.length+1),o,r,this._insertSpace)}else h=S8._createAddBlockCommentOperations(new Es(e.startLineNumber,t.getLineFirstNonWhitespaceColumn(e.startLineNumber),e.endLineNumber,t.getLineMaxColumn(e.endLineNumber)),o,r,this._insertSpace);h.length===1&&(this._deltaColumn=o.length+1)}this._selectionId=i.trackSelection(e);for(const t of h)i.addEditOperation(t.range,t.text)}getEditOperations(t,i){let e=this._selection;if(this._moveEndPositionDown=!1,e.startLineNumber===e.endLineNumber&&this._ignoreFirstLine)return i.addEditOperation(new Es(e.startLineNumber,t.getLineMaxColumn(e.startLineNumber),e.startLineNumber+1,1),e.startLineNumber===t.getLineCount()?"":`\n`),void(this._selectionId=i.trackSelection(e));e.startLineNumber<e.endLineNumber&&e.endColumn===1&&(this._moveEndPositionDown=!0,e=e.setEndPosition(e.endLineNumber-1,t.getLineMaxColumn(e.endLineNumber-1)));const s=F8._gatherPreflightData(this._type,this._insertSpace,t,e.startLineNumber,e.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return s.supported?this._executeLineComments(t,i,s,e):this._executeBlockComment(t,i,e)}computeCursorState(t,i){let e=i.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(e=e.setEndPosition(e.endLineNumber+1,1)),new Bs(e.selectionStartLineNumber,e.selectionStartColumn+this._deltaColumn,e.positionLineNumber,e.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(t,i){const e=[];for(let s=0,n=t.length;s<n;s++){const n=t[s];n.ignore||e.push(KQ.delete(new Es(i+s,n.commentStrOffset+1,i+s,n.commentStrOffset+n.commentStrLength+1)))}return e}_createAddLineCommentsOperations(t,i){const e=[],s=this._insertSpace?" ":"";for(let n=0,o=t.length;n<o;n++){const o=t[n];o.ignore||e.push(KQ.insert(new Cs(i+n,o.commentStrOffset+1),o.commentStr+s))}return e}static nextVisibleColumn(t,i,e,s){return e?t+(i-t%i):t+s}static _normalizeInsertionPoint(t,i,e,s){let n,o,r=1073741824;for(let n=0,o=i.length;n<o;n++){if(i[n].ignore)continue;const o=t.getLineContent(e+n);let h=0;for(let t=0,e=i[n].commentStrOffset;h<r&&t<e;t++)h=F8.nextVisibleColumn(h,s,o.charCodeAt(t)===9,1);h<r&&(r=h)}r=Math.floor(r/s)*s;for(let h=0,c=i.length;h<c;h++){if(i[h].ignore)continue;const c=t.getLineContent(e+h);let a=0;for(n=0,o=i[h].commentStrOffset;a<r&&n<o;n++)a=F8.nextVisibleColumn(a,s,c.charCodeAt(n)===9,1);i[h].commentStrOffset=a>r?n-1:n}}}class I8 extends vu{constructor(t,i){super(i),this._type=t}run(t,i){const e=t.get(uf);if(!i.hasModel())return;const s=[],n=i.getModel().getOptions(),o=i.getOption(23),r=i.getSelections().map(((t,i)=>({selection:t,index:i,ignoreFirstLine:!1})));r.sort(((t,i)=>Es.compareRangesUsingStarts(t.selection,i.selection)));let h=r[0];for(let t=1;t<r.length;t++){const i=r[t];h.selection.endLineNumber===i.selection.startLineNumber&&(h.index<i.index?i.ignoreFirstLine=!0:(h.ignoreFirstLine=!0,h=i))}for(const t of r)s.push(new F8(e,t.selection,n.indentSize,this._type,o.insertSpace,o.ignoreEmptyLines,t.ignoreFirstLine));i.pushUndoStop(),i.executeCommands(this.id,s),i.pushUndoStop()}}Cu(class extends I8{constructor(){super(0,{id:"editor.action.commentLine",label:st(0,"Toggle Line Comment"),alias:"Toggle Line Comment",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:tu.MenubarEditMenu,group:"5_insert",title:st(0,"&&Toggle Line Comment"),order:1}})}}),Cu(class extends I8{constructor(){super(1,{id:"editor.action.addCommentLine",label:st(0,"Add Line Comment"),alias:"Add Line Comment",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2081),weight:100}})}}),Cu(class extends I8{constructor(){super(2,{id:"editor.action.removeCommentLine",label:st(0,"Remove Line Comment"),alias:"Remove Line Comment",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2099),weight:100}})}}),Cu(class extends vu{constructor(){super({id:"editor.action.blockComment",label:st(0,"Toggle Block Comment"),alias:"Toggle Block Comment",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:tu.MenubarEditMenu,group:"5_insert",title:st(0,"Toggle &&Block Comment"),order:2}})}run(t,i){const e=t.get(uf);if(!i.hasModel())return;const s=i.getOption(23),n=[],o=i.getSelections();for(const t of o)n.push(new S8(t,s.insertSpace,e));i.pushUndoStop(),i.executeCommands(this.id,n),i.pushUndoStop()}});var L8,R8=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},T8=function(t,i){return function(e,s){i(e,s,t)}};let N8=L8=class{static get(t){return t.getContribution(L8.ID)}constructor(t,i,e,s,n,o,r,h){this._contextMenuService=i,this._contextViewService=e,this._contextKeyService=s,this._keybindingService=n,this._menuService=o,this._configurationService=r,this._workspaceContextService=h,this._toDispose=new Zi,this._contextMenuIsBeingShownCount=0,this._editor=t,this._toDispose.add(this._editor.onContextMenu((t=>this._onContextMenu(t)))),this._toDispose.add(this._editor.onMouseWheel((t=>{if(this._contextMenuIsBeingShownCount>0){const i=this._contextViewService.getContextViewElement(),e=t.srcElement;e.shadowRoot&&Ic(i)===e.shadowRoot||this._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((t=>{this._editor.getOption(24)&&t.keyCode===58&&(t.preventDefault(),t.stopPropagation(),this.showContextMenu())})))}_onContextMenu(t){if(!this._editor.hasModel())return;if(!this._editor.getOption(24))return this._editor.focus(),void(t.target.position&&!this._editor.getSelection().containsPosition(t.target.position)&&this._editor.setPosition(t.target.position));if(t.target.type===12||t.target.type===6&&t.target.detail.injectedText)return;if(t.event.preventDefault(),t.event.stopPropagation(),t.target.type===11)return this._showScrollbarContextMenu(t.event);if(t.target.type!==6&&t.target.type!==7&&t.target.type!==1)return;if(this._editor.focus(),t.target.position){let i=!1;for(const e of this._editor.getSelections())if(e.containsPosition(t.target.position)){i=!0;break}i||this._editor.setPosition(t.target.position)}let i=null;t.target.type!==1&&(i=t.event),this.showContextMenu(i)}showContextMenu(t){if(!this._editor.getOption(24)||!this._editor.hasModel())return;const i=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?tu.SimpleEditorContext:tu.EditorContext);i.length>0&&this._doShowContextMenu(i,t)}_getMenuActions(t,i){const e=[],s=this._menuService.createMenu(i,this._contextKeyService),n=s.getActions({arg:t.uri});s.dispose();for(const i of n){const[,s]=i;let n=0;for(const i of s)if(i instanceof nu){const s=this._getMenuActions(t,i.item.submenu);s.length>0&&(e.push(new _a(i.id,i.label,s)),n++)}else e.push(i),n++;n&&e.push(new Ya)}return e.length&&e.pop(),e}_doShowContextMenu(t,i=null){if(!this._editor.hasModel())return;const e=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let s=i;if(!s){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),i=yc(this._editor.getDomNode()),e=i.left+t.left,n=i.top+t.top+t.height;s={x:e,y:n}}const n=this._editor.getOption(127)&&!Dt;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:n?this._editor.getDomNode():void 0,getAnchor:()=>s,getActions:()=>t,getActionViewItem:t=>{const i=this._keybindingFor(t);if(i)return new qU(t,t,{label:!0,keybinding:i.getLabel(),isMenu:!0});const e=t;return typeof e.getActionViewItem=="function"?e.getActionViewItem():new qU(t,t,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:t=>this._keybindingFor(t),onHide:t=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:e})}})}_showScrollbarContextMenu(t){if(!this._editor.hasModel()||this._workspaceContextService.getWorkspace().id===OO)return;const i=this._editor.getOption(73);let e=0;const s=t=>({id:"menu-action-"+ ++e,label:t.label,tooltip:"",class:void 0,enabled:t.enabled===void 0||t.enabled,checked:t.checked,run:t.run}),n=(t,i,n,o,r)=>{if(!i)return s({label:t,enabled:i,run:()=>{}});const h=t=>()=>{this._configurationService.updateValue(n,t)},c=[];for(const t of r)c.push(s({label:t.label,checked:o===t.value,run:h(t.value)}));return((t,i)=>new _a("menu-action-"+ ++e,t,i,void 0))(t,c)},o=[];o.push(s({label:st(0,"Minimap"),checked:i.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!i.enabled)}})),o.push(new Ya),o.push(s({label:st(0,"Render Characters"),enabled:i.enabled,checked:i.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!i.renderCharacters)}})),o.push(n(st(0,"Vertical size"),i.enabled,"editor.minimap.size",i.size,[{label:st(0,"Proportional"),value:"proportional"},{label:st(0,"Fill"),value:"fill"},{label:st(0,"Fit"),value:"fit"}])),o.push(n(st(0,"Slider"),i.enabled,"editor.minimap.showSlider",i.showSlider,[{label:st(0,"Mouse Over"),value:"mouseover"},{label:st(0,"Always"),value:"always"}]));const r=this._editor.getOption(127)&&!Dt;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:r?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>o,onHide:t=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(t){return this._keybindingService.lookupKeybinding(t.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};N8.ID="editor.contrib.contextmenu",N8=L8=R8([T8(1,aT),T8(2,cT),T8(3,Nl),T8(4,Hx),T8(5,iu),T8(6,Id),T8(7,FO)],N8);Bu(N8.ID,N8,2),Cu(class extends vu{constructor(){super({id:"editor.action.showContextMenu",label:st(0,"Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:QC.textInputFocus,primary:1092,weight:100}})}run(t,i){var e;(e=N8.get(i))===null||e===void 0||e.showContextMenu()}});class Q8{constructor(t){this.selections=t}equals(t){const i=this.selections.length;if(i!==t.selections.length)return!1;for(let e=0;e<i;e++)if(!this.selections[e].equalsSelection(t.selections[e]))return!1;return!0}}class O8{constructor(t,i,e){this.cursorState=t,this.scrollTop=i,this.scrollLeft=e}}class z8 extends te{static get(t){return t.getContribution(z8.ID)}constructor(t){super(),this._editor=t,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(t.onDidChangeModel((t=>{this._undoStack=[],this._redoStack=[]}))),this._register(t.onDidChangeModelContent((t=>{this._undoStack=[],this._redoStack=[]}))),this._register(t.onDidChangeCursorSelection((i=>{if(this._isCursorUndoRedo||!i.oldSelections||i.oldModelVersionId!==i.modelVersionId)return;const e=new Q8(i.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(e)||(this._undoStack.push(new O8(e,t.getScrollTop(),t.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())})))}cursorUndo(){this._editor.hasModel()&&this._undoStack.length!==0&&(this._redoStack.push(new O8(new Q8(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&this._redoStack.length!==0&&(this._undoStack.push(new O8(new Q8(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(t){this._isCursorUndoRedo=!0,this._editor.setSelections(t.cursorState.selections),this._editor.setScrollPosition({scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),this._isCursorUndoRedo=!1}}z8.ID="editor.contrib.cursorUndoRedoController";Bu(z8.ID,z8,0),Cu(class extends vu{constructor(){super({id:"cursorUndo",label:st(0,"Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:QC.textInputFocus,primary:2099,weight:100}})}run(t,i,e){var s;(s=z8.get(i))===null||s===void 0||s.cursorUndo()}}),Cu(class extends vu{constructor(){super({id:"cursorRedo",label:st(0,"Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(t,i,e){var s;(s=z8.get(i))===null||s===void 0||s.cursorRedo()}});class U8{constructor(t,i,e){this.selection=t,this.targetPosition=i,this.copy=e,this.targetSelection=null}getEditOperations(t,i){const e=t.getValueInRange(this.selection);this.copy||i.addEditOperation(this.selection,null),i.addEditOperation(new Es(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),e),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new Bs(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new Bs(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new Bs(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new Bs(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new Bs(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}computeCursorState(t,i){return this.targetSelection}}function H8(t){return kt?t.altKey:t.ctrlKey}class P8 extends te{constructor(t){super(),this._editor=t,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown((t=>this._onEditorMouseDown(t)))),this._register(this._editor.onMouseUp((t=>this._onEditorMouseUp(t)))),this._register(this._editor.onMouseDrag((t=>this._onEditorMouseDrag(t)))),this._register(this._editor.onMouseDrop((t=>this._onEditorMouseDrop(t)))),this._register(this._editor.onMouseDropCanceled((()=>this._onEditorMouseDropCanceled()))),this._register(this._editor.onKeyDown((t=>this.onEditorKeyDown(t)))),this._register(this._editor.onKeyUp((t=>this.onEditorKeyUp(t)))),this._register(this._editor.onDidBlurEditorWidget((()=>this.onEditorBlur()))),this._register(this._editor.onDidBlurEditorText((()=>this.onEditorBlur()))),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(t){this._editor.getOption(35)&&!this._editor.getOption(22)&&(H8(t)&&(this._modifierPressed=!0),this._mouseDown&&H8(t)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(t){this._editor.getOption(35)&&!this._editor.getOption(22)&&(H8(t)&&(this._modifierPressed=!1),this._mouseDown&&t.keyCode===P8.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(t){this._mouseDown=!0}_onEditorMouseUp(t){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(t){const i=t.target;if(this._dragSelection===null){const t=(this._editor.getSelections()||[]).filter((t=>i.position&&t.containsPosition(i.position)));if(t.length!==1)return;this._dragSelection=t[0]}H8(t.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),i.position&&(this._dragSelection.containsPosition(i.position)?this._removeDecoration():this.showAt(i.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(t){if(t.target&&(this._hitContent(t.target)||this._hitMargin(t.target))&&t.target.position){const i=new Cs(t.target.position.lineNumber,t.target.position.column);if(this._dragSelection===null){let e=null;if(t.event.shiftKey){const t=this._editor.getSelection();if(t){const{selectionStartLineNumber:s,selectionStartColumn:n}=t;e=[new Bs(s,n,i.lineNumber,i.column)]}}else e=(this._editor.getSelections()||[]).map((t=>t.containsPosition(i)?new Bs(i.lineNumber,i.column,i.lineNumber,i.column):t));this._editor.setSelections(e||[],"mouse",3)}else(!this._dragSelection.containsPosition(i)||(H8(t.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(i)||this._dragSelection.getStartPosition().equals(i)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(P8.ID,new U8(this._dragSelection,i,H8(t.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(t){this._dndDecorationIds.set([{range:new Es(t.lineNumber,t.column,t.lineNumber,t.column),options:P8._DECORATION_OPTIONS}]),this._editor.revealPosition(t,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(t){return t.type===6||t.type===7}_hitMargin(t){return t.type===2||t.type===3||t.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}var j8;P8.ID="editor.contrib.dragAndDrop",P8.TRIGGER_KEY_VALUE=kt?6:5,P8._DECORATION_OPTIONS=DF.register({description:"dnd-target",className:"dnd-target"}),Bu(P8.ID,P8,2),Bu(G0.ID,G0,0),hJ(d0),xu(new class extends mu{constructor(){super({id:_0,precondition:V0,kbOpts:{weight:100,primary:2137}})}runEditorCommand(t,i){var e;return(e=G0.get(i))===null||e===void 0?void 0:e.changePasteType()}}),xu(new class extends mu{constructor(){super({id:"editor.hidePasteWidget",precondition:V0,kbOpts:{weight:100,primary:9}})}runEditorCommand(t,i){var e;(e=G0.get(i))===null||e===void 0||e.clearWidgets()}}),Cu((j8=class extends vu{constructor(){super({id:"editor.action.pasteAs",label:st(0,"Paste As..."),alias:"Paste As...",precondition:QC.writable,metadata:{description:"Paste as",args:[{name:"args",schema:j8.argsSchema}]}})}run(t,i,e){var s;let n=typeof(e==null?void 0:e.kind)=="string"?e.kind:void 0;return!n&&e&&(n=typeof e.id=="string"?e.id:void 0),(s=G0.get(i))===null||s===void 0?void 0:s.pasteAs(n?new KZ(n):void 0)}},j8.argsSchema={type:"object",properties:{kind:{type:"string",description:st(0,"The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}},j8)),Cu(class extends vu{constructor(){super({id:"editor.action.pasteAsText",label:st(0,"Paste as Text"),alias:"Paste as Text",precondition:QC.writable})}run(t,i){var e;return(e=G0.get(i))===null||e===void 0?void 0:e.pasteAs({providerId:r0.id})}});class W8{constructor(t){this.identifier=t}}const Y8=za("treeViewsDndService");Hd(Y8,class{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(t){if(t&&this._dragOperations.has(t)){const i=this._dragOperations.get(t);return this._dragOperations.delete(t),i}}},1);var _8,V8=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},J8=function(t,i){return function(e,s){i(e,s,t)}};const G8="editor.experimental.dropIntoEditor.defaultProvider",K8="editor.changeDropType",$8=new Tl("dropWidgetVisible",!1,st(0,"Whether the drop widget is showing"));let X8=_8=class extends te{static get(t){return t.getContribution(_8.ID)}constructor(t,i,e,s,n){super(),this._configService=e,this._languageFeaturesService=s,this._treeViewsDragAndDropService=n,this.treeItemsTransfer=qZ.getInstance(),this._dropProgressManager=this._register(i.createInstance(I0,"dropIntoEditor",t)),this._postDropWidgetManager=this._register(i.createInstance(P0,"dropIntoEditor",t,$8,{id:K8,label:st(0,"Show drop options...")})),this._register(t.onDropIntoEditor((i=>this.onDropIntoEditor(t,i.position,i.event))))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(t,i,e){var s;if(!e.dataTransfer||!t.hasModel())return;(s=this._currentOperation)===null||s===void 0||s.cancel(),t.focus(),t.setPosition(i);const n=Ar((async s=>{const o=new UX(t,1,void 0,s);try{const n=await this.extractDataTransferData(e);if(n.size===0||o.token.isCancellationRequested)return;const r=t.getModel();if(!r)return;const h=this._languageFeaturesService.documentOnDropEditProvider.ordered(r).filter((t=>!t.dropMimeTypes||t.dropMimeTypes.some((t=>n.matches(t))))),c=await this.getDropEdits(h,r,i,n,o);if(o.token.isCancellationRequested)return;if(c.length){const e=this.getInitialActiveEditIndex(r,c),n=t.getOption(36).showDropSelector==="afterDrop";await this._postDropWidgetManager.applyEditAndShowIfNeeded([Es.fromPositions(i)],{activeEditIndex:e,allEdits:c},n,(async t=>t),s)}}finally{o.dispose(),this._currentOperation===n&&(this._currentOperation=void 0)}}));this._dropProgressManager.showWhile(i,st(0,"Running drop handlers. Click to cancel"),n),this._currentOperation=n}async getDropEdits(t,i,e,s,n){const o=await pr(Promise.all(t.map((async t=>{try{const o=await t.provideDocumentOnDropEdits(i,e,s,n.token);return o==null?void 0:o.map((i=>({...i,providerId:t.id})))}catch(t){console.error(t)}}))),n.token);return B0(f(o??[]).flat())}getInitialActiveEditIndex(t,i){const e=this._configService.getValue(G8,{resource:t.uri});for(const[t,s]of Object.entries(e)){const e=new KZ(s),n=i.findIndex((i=>e.value===i.providerId&&i.handledMimeType&&VZ(t,[i.handledMimeType])));if(n>=0)return n}return 0}async extractDataTransferData(t){if(!t.dataTransfer)return new YZ;const i=e0(t.dataTransfer);if(this.treeItemsTransfer.hasData(W8.prototype)){const t=this.treeItemsTransfer.getData(W8.prototype);if(Array.isArray(t))for(const e of t){const t=await this._treeViewsDragAndDropService.removeDragOperationTransfer(e.identifier);if(t)for(const[e,s]of t)i.replace(e,s)}}return i}};X8.ID="editor.contrib.dropIntoEditorController",X8=_8=V8([J8(1,Oa),J8(2,Id),J8(3,jA),J8(4,Y8)],X8),Bu(X8.ID,X8,2),hJ(u0),xu(new class extends mu{constructor(){super({id:K8,precondition:$8,kbOpts:{weight:100,primary:2137}})}runEditorCommand(t,i,e){var s;(s=X8.get(i))===null||s===void 0||s.changeDropType()}}),xu(new class extends mu{constructor(){super({id:"editor.hideDropWidget",precondition:$8,kbOpts:{weight:100,primary:9}})}runEditorCommand(t,i,e){var s;(s=X8.get(i))===null||s===void 0||s.clearWidgets()}}),Vl.as(_d).registerConfiguration({...YQ,properties:{[G8]:{type:"object",scope:5,description:st(0,"Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}});class q8{constructor(t){this._editor=t,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const t=this._findScopeDecorationIds.map((t=>this._editor.getModel().getDecorationRange(t))).filter((t=>!!t));if(t.length)return t}return null}getStartPosition(){return this._startPosition}setStartPosition(t){this._startPosition=t,this.setCurrentFindMatch(null)}_getDecorationIndex(t){const i=this._decorations.indexOf(t);return i>=0?i+1:1}getDecorationRangeAt(t){const i=t<this._decorations.length?this._decorations[t]:null;return i?this._editor.getModel().getDecorationRange(i):null}getCurrentMatchesPosition(t){const i=this._editor.getModel().getDecorationsInRange(t);for(const t of i){const i=t.options;if(i===q8._FIND_MATCH_DECORATION||i===q8._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(t.id)}return 0}setCurrentFindMatch(t){let i=null,e=0;if(t)for(let s=0,n=this._decorations.length;s<n;s++){const n=this._editor.getModel().getDecorationRange(this._decorations[s]);if(t.equalsRange(n)){i=this._decorations[s],e=s+1;break}}return this._highlightedDecorationId===null&&i===null||this._editor.changeDecorations((t=>{if(this._highlightedDecorationId!==null&&(t.changeDecorationOptions(this._highlightedDecorationId,q8._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),i!==null&&(this._highlightedDecorationId=i,t.changeDecorationOptions(this._highlightedDecorationId,q8._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(t.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),i!==null){let e=this._editor.getModel().getDecorationRange(i);if(e.startLineNumber!==e.endLineNumber&&e.endColumn===1){const t=e.endLineNumber-1,i=this._editor.getModel().getLineMaxColumn(t);e=new Es(e.startLineNumber,e.startColumn,t,i)}this._rangeHighlightDecorationId=t.addDecoration(e,q8._RANGE_HIGHLIGHT_DECORATION)}})),e}set(t,i){this._editor.changeDecorations((e=>{let s=q8._FIND_MATCH_DECORATION;const n=[];if(t.length>1e3){s=q8._FIND_MATCH_NO_OVERVIEW_DECORATION;const i=this._editor.getModel().getLineCount(),e=this._editor.getLayoutInfo().height/i,o=Math.max(2,Math.ceil(3/e));let r=t[0].range.startLineNumber,h=t[0].range.endLineNumber;for(let i=1,e=t.length;i<e;i++){const e=t[i].range;h+o>=e.startLineNumber?e.endLineNumber>h&&(h=e.endLineNumber):(n.push({range:new Es(r,1,h,1),options:q8._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),r=e.startLineNumber,h=e.endLineNumber)}n.push({range:new Es(r,1,h,1),options:q8._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const o=new Array(t.length);for(let i=0,e=t.length;i<e;i++)o[i]={range:t[i].range,options:s};this._decorations=e.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=e.deltaDecorations(this._overviewRulerApproximateDecorations,n),this._rangeHighlightDecorationId&&(e.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach((t=>e.removeDecoration(t))),this._findScopeDecorationIds=[]),i!=null&&i.length&&(this._findScopeDecorationIds=i.map((t=>e.addDecoration(t,q8._FIND_SCOPE_DECORATION))))}))}matchBeforePosition(t){if(this._decorations.length===0)return null;for(let i=this._decorations.length-1;i>=0;i--){const e=this._decorations[i],s=this._editor.getModel().getDecorationRange(e);if(s&&!(s.endLineNumber>t.lineNumber)&&(s.endLineNumber<t.lineNumber||!(s.endColumn>t.column)))return s}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(t){if(this._decorations.length===0)return null;for(let i=0,e=this._decorations.length;i<e;i++){const e=this._decorations[i],s=this._editor.getModel().getDecorationRange(e);if(s&&!(s.startLineNumber<t.lineNumber)&&(s.startLineNumber>t.lineNumber||!(s.startColumn<t.column)))return s}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let t=[];return t=t.concat(this._decorations),t=t.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&t.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&t.push(this._rangeHighlightDecorationId),t}}q8._CURRENT_FIND_MATCH_DECORATION=DF.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Ik(sv),position:ig.Center},minimap:{color:Ik(cv),position:1}}),q8._FIND_MATCH_DECORATION=DF.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Ik(sv),position:ig.Center},minimap:{color:Ik(cv),position:1}}),q8._FIND_MATCH_NO_OVERVIEW_DECORATION=DF.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),q8._FIND_MATCH_ONLY_OVERVIEW_DECORATION=DF.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Ik(sv),position:ig.Center}}),q8._RANGE_HIGHLIGHT_DECORATION=DF.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),q8._FIND_SCOPE_DECORATION=DF.register({description:"find-scope",className:"findScope",isWholeLine:!0});class Z8{constructor(t,i,e){this._editorSelection=t,this._ranges=i,this._replaceStrings=e,this._trackedEditorSelectionId=null}getEditOperations(t,i){if(this._ranges.length>0){const t=[];for(let i=0;i<this._ranges.length;i++)t.push({range:this._ranges[i],text:this._replaceStrings[i]});t.sort(((t,i)=>Es.compareRangesUsingStarts(t.range,i.range)));const e=[];let s=t[0];for(let i=1;i<t.length;i++)s.range.endLineNumber===t[i].range.startLineNumber&&s.range.endColumn===t[i].range.startColumn?(s.range=s.range.plusRange(t[i].range),s.text=s.text+t[i].text):(e.push(s),s=t[i]);e.push(s);for(const t of e)i.addEditOperation(t.range,t.text)}this._trackedEditorSelectionId=i.trackSelection(this._editorSelection)}computeCursorState(t,i){return i.getTrackedSelection(this._trackedEditorSelectionId)}}function t6(t,i){if(t&&t[0]!==""){const e=i6(t,i,"-"),s=i6(t,i,"_");return e&&!s?e6(t,i,"-"):!e&&s?e6(t,i,"_"):t[0].toUpperCase()===t[0]?i.toUpperCase():t[0].toLowerCase()===t[0]?i.toLowerCase():function(t,i=!1){return!!t&&(i&&(t=t.replace(/\\./g,"")),t.toLowerCase()!==t)}(t[0][0])&&i.length>0?i[0].toUpperCase()+i.substr(1):t[0][0].toUpperCase()!==t[0][0]&&i.length>0?i[0].toLowerCase()+i.substr(1):i}return i}function i6(t,i,e){return t[0].indexOf(e)!==-1&&i.indexOf(e)!==-1&&t[0].split(e).length===i.split(e).length}function e6(t,i,e){const s=i.split(e),n=t[0].split(e);let o="";return s.forEach(((t,i)=>{o+=t6([n[i]],t)+e})),o.slice(0,-1)}class s6{constructor(t){this.staticValue=t,this.kind=0}}class n6{constructor(t){this.pieces=t,this.kind=1}}class o6{static fromStaticValue(t){return new o6([r6.staticValue(t)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(t){t&&t.length!==0?t.length===1&&t[0].staticValue!==null?this._state=new s6(t[0].staticValue):this._state=new n6(t):this._state=new s6("")}buildReplaceString(t,i){if(this._state.kind===0)return i?t6(t,this._state.staticValue):this._state.staticValue;let e="";for(let i=0,s=this._state.pieces.length;i<s;i++){const s=this._state.pieces[i];if(s.staticValue!==null){e+=s.staticValue;continue}let n=o6._substitute(s.matchIndex,t);if(s.caseOps!==null&&s.caseOps.length>0){const t=[],i=s.caseOps.length;let e=0;for(let o=0,r=n.length;o<r;o++){if(e>=i){t.push(n.slice(o));break}switch(s.caseOps[e]){case"U":t.push(n[o].toUpperCase());break;case"u":t.push(n[o].toUpperCase()),e++;break;case"L":t.push(n[o].toLowerCase());break;case"l":t.push(n[o].toLowerCase()),e++;break;default:t.push(n[o])}}n=t.join("")}e+=n}return e}static _substitute(t,i){if(i===null)return"";if(t===0)return i[0];let e="";for(;t>0;){if(t<i.length)return(i[t]||"")+e;e=String(t%10)+e,t=Math.floor(t/10)}return"$"+e}}class r6{static staticValue(t){return new r6(t,-1,null)}static caseOps(t,i){return new r6(null,t,i)}constructor(t,i,e){this.staticValue=t,this.matchIndex=i,e&&e.length!==0?this.caseOps=e.slice(0):this.caseOps=null}}class h6{constructor(t){this._source=t,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(t){this._emitStatic(this._source.substring(this._lastCharIndex,t)),this._lastCharIndex=t}emitStatic(t,i){this._emitStatic(t),this._lastCharIndex=i}_emitStatic(t){t.length!==0&&(this._currentStaticPiece+=t)}emitMatchIndex(t,i,e){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=r6.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=r6.caseOps(t,e),this._lastCharIndex=i}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=r6.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new o6(this._result)}}const c6=new Tl("findWidgetVisible",!1);c6.toNegated();const a6=new Tl("findInputFocussed",!1),l6=new Tl("replaceInputFocussed",!1),u6={primary:545,mac:{primary:2593}},d6={primary:565,mac:{primary:2613}},f6={primary:560,mac:{primary:2608}},g6={primary:554,mac:{primary:2602}},A6={primary:558,mac:{primary:2606}},p6="actions.find",w6="actions.findWithSelection",m6="editor.actions.findWithArgs",v6="editor.action.nextMatchFindAction",b6="editor.action.previousMatchFindAction",y6="editor.action.goToMatchFindAction",k6="editor.action.nextSelectionMatchFindAction",x6="editor.action.previousSelectionMatchFindAction",C6="editor.action.startFindReplaceAction",E6="closeFindWidget",B6="toggleFindCaseSensitive",D6="toggleFindWholeWord",M6="toggleFindRegex",S6="toggleFindInSelection",F6="togglePreserveCase",I6="editor.action.replaceOne",L6="editor.action.replaceAll",R6="editor.action.selectAllMatches",T6=19999;class N6{constructor(t,i){this._toDispose=new Zi,this._editor=t,this._state=i,this._isDisposed=!1,this._startSearchingTimer=new xr,this._decorations=new q8(t),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new Er((()=>this.research(!1)),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((t=>{t.reason!==3&&t.reason!==5&&t.reason!==6||this._decorations.setStartPosition(this._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((t=>{this._ignoreModelContentChanged||(t.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((t=>this._onStateChanged(t)))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,$i(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(t){!this._isDisposed&&this._editor.hasModel()&&(t.searchString||t.isReplaceRevealed||t.isRegex||t.wholeWord||t.matchCase||t.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((()=>{t.searchScope?this.research(t.moveCursor,this._state.searchScope):this.research(t.moveCursor)}),240)):t.searchScope?this.research(t.moveCursor,this._state.searchScope):this.research(t.moveCursor))}static _getSearchRange(t,i){return i||t.getFullModelRange()}research(t,i){let e=null;i!==void 0?i!==null&&(e=Array.isArray(i)?i:[i]):e=this._decorations.getFindScopes(),e!==null&&(e=e.map((t=>{if(t.startLineNumber!==t.endLineNumber){let i=t.endLineNumber;return t.endColumn===1&&(i-=1),new Es(t.startLineNumber,1,i,this._editor.getModel().getLineMaxColumn(i))}return t})));const s=this._findMatches(e,!1,T6);this._decorations.set(s,e);const n=this._editor.getSelection();let o=this._decorations.getCurrentMatchesPosition(n);if(o===0&&s.length>0){const t=Bg(s.map((t=>t.range)),(t=>Es.compareRangesUsingStarts(t,n)>=0));o=t>0?t-1+1:o}this._state.changeMatchInfo(o,this._decorations.getCount(),void 0),t&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const t=this._decorations.getFindScope();return t&&this._editor.revealRangeInCenterIfOutsideViewport(t,0),!0}return!1}_setCurrentFindMatch(t){const i=this._decorations.setCurrentFindMatch(t);this._state.changeMatchInfo(i,this._decorations.getCount(),t),this._editor.setSelection(t),this._editor.revealRangeInCenterIfOutsideViewport(t,0)}_prevSearchPosition(t){const i=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:e,column:s}=t;const n=this._editor.getModel();return i||s===1?(e===1?e=n.getLineCount():e--,s=n.getLineMaxColumn(e)):s--,new Cs(e,s)}_moveToPrevMatch(t,i=!1){if(!this._state.canNavigateBack()){const i=this._decorations.matchAfterPosition(t);return void(i&&this._setCurrentFindMatch(i))}if(this._decorations.getCount()<T6){let i=this._decorations.matchBeforePosition(t);return i&&i.isEmpty()&&i.getStartPosition().equals(t)&&(t=this._prevSearchPosition(t),i=this._decorations.matchBeforePosition(t)),void(i&&this._setCurrentFindMatch(i))}if(this._cannotFind())return;const e=this._decorations.getFindScope(),s=N6._getSearchRange(this._editor.getModel(),e);s.getEndPosition().isBefore(t)&&(t=s.getEndPosition()),t.isBefore(s.getStartPosition())&&(t=s.getEndPosition());const{lineNumber:n,column:o}=t,r=this._editor.getModel();let h=new Cs(n,o),c=r.findPreviousMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,!1);return c&&c.range.isEmpty()&&c.range.getStartPosition().equals(h)&&(h=this._prevSearchPosition(h),c=r.findPreviousMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,!1)),c?i||s.containsRange(c.range)?void this._setCurrentFindMatch(c.range):this._moveToPrevMatch(c.range.getStartPosition(),!0):void 0}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(t){const i=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:e,column:s}=t;const n=this._editor.getModel();return i||s===n.getLineMaxColumn(e)?(e===n.getLineCount()?e=1:e++,s=1):s++,new Cs(e,s)}_moveToNextMatch(t){if(!this._state.canNavigateForward()){const i=this._decorations.matchBeforePosition(t);return void(i&&this._setCurrentFindMatch(i))}if(this._decorations.getCount()<T6){let i=this._decorations.matchAfterPosition(t);return i&&i.isEmpty()&&i.getStartPosition().equals(t)&&(t=this._nextSearchPosition(t),i=this._decorations.matchAfterPosition(t)),void(i&&this._setCurrentFindMatch(i))}const i=this._getNextMatch(t,!1,!0);i&&this._setCurrentFindMatch(i.range)}_getNextMatch(t,i,e,s=!1){if(this._cannotFind())return null;const n=this._decorations.getFindScope(),o=N6._getSearchRange(this._editor.getModel(),n);o.getEndPosition().isBefore(t)&&(t=o.getStartPosition()),t.isBefore(o.getStartPosition())&&(t=o.getStartPosition());const{lineNumber:r,column:h}=t,c=this._editor.getModel();let a=new Cs(r,h),l=c.findNextMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,i);return e&&l&&l.range.isEmpty()&&l.range.getStartPosition().equals(a)&&(a=this._nextSearchPosition(a),l=c.findNextMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,i)),l?s||o.containsRange(l.range)?l:this._getNextMatch(l.range.getEndPosition(),i,e,!0):null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(t){const i=this._decorations.getDecorationRangeAt(t);i&&this._setCurrentFindMatch(i)}moveToMatch(t){this._moveToMatch(t)}_getReplacePattern(){return this._state.isRegex?function(t){if(!t||t.length===0)return new o6(null);const i=[],e=new h6(t);for(let s=0,n=t.length;s<n;s++){const o=t.charCodeAt(s);if(o!==92){if(o===36){if(s++,s>=n)break;const o=t.charCodeAt(s);if(o===36){e.emitUnchanged(s-1),e.emitStatic("$",s+1);continue}if(o===48||o===38){e.emitUnchanged(s-1),e.emitMatchIndex(0,s+1,i),i.length=0;continue}if(49<=o&&o<=57){let r=o-48;if(s+1<n){const n=t.charCodeAt(s+1);if(48<=n&&n<=57){s++,r=10*r+(n-48),e.emitUnchanged(s-2),e.emitMatchIndex(r,s+1,i),i.length=0;continue}}e.emitUnchanged(s-1),e.emitMatchIndex(r,s+1,i),i.length=0;continue}}}else{if(s++,s>=n)break;const o=t.charCodeAt(s);switch(o){case 92:e.emitUnchanged(s-1),e.emitStatic("\\",s+1);break;case 110:e.emitUnchanged(s-1),e.emitStatic(`\n`,s+1);break;case 116:e.emitUnchanged(s-1),e.emitStatic("\t",s+1);break;case 117:case 85:case 108:case 76:e.emitUnchanged(s-1),e.emitStatic("",s+1),i.push(String.fromCharCode(o))}}}return e.finalize()}(this._state.replaceString):o6.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const t=this._getReplacePattern(),i=this._editor.getSelection(),e=this._getNextMatch(i.getStartPosition(),!0,!1);if(e)if(i.equalsRange(e.range)){const s=t.buildReplaceString(e.matches,this._state.preserveCase),n=new nC(i,s);this._executeEditorCommand("replace",n),this._decorations.setStartPosition(new Cs(i.startLineNumber,i.startColumn+s.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(e.range)}_findMatches(t,i,e){const s=(t||[null]).map((t=>N6._getSearchRange(this._editor.getModel(),t)));return this._editor.getModel().findMatches(this._state.searchString,s,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,i,e)}replaceAll(){if(!this._hasMatches())return;const t=this._decorations.getFindScopes();t===null&&this._state.matchesCount>=T6?this._largeReplaceAll():this._regularReplaceAll(t),this.research(!1)}_largeReplaceAll(){const t=new lg(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null).parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let t="mu";i.ignoreCase&&(t+="i"),i.global&&(t+="g"),i=new RegExp(i.source,t)}const e=this._editor.getModel(),s=e.getValue(1),n=e.getFullModelRange(),o=this._getReplacePattern();let r;const h=this._state.preserveCase;r=o.hasReplacementPatterns||h?s.replace(i,(function(){return o.buildReplaceString(arguments,h)})):s.replace(i,o.buildReplaceString(null,h));const c=new cC(n,r,this._editor.getSelection());this._executeEditorCommand("replaceAll",c)}_regularReplaceAll(t){const i=this._getReplacePattern(),e=this._findMatches(t,i.hasReplacementPatterns||this._state.preserveCase,1073741824),s=[];for(let t=0,n=e.length;t<n;t++)s[t]=i.buildReplaceString(e[t].matches,this._state.preserveCase);const n=new Z8(this._editor.getSelection(),e.map((t=>t.range)),s);this._executeEditorCommand("replaceAll",n)}selectAllMatches(){if(!this._hasMatches())return;const t=this._decorations.getFindScopes();let i=this._findMatches(t,!1,1073741824).map((t=>new Bs(t.range.startLineNumber,t.range.startColumn,t.range.endLineNumber,t.range.endColumn)));const e=this._editor.getSelection();for(let t=0,s=i.length;t<s;t++)if(i[t].equalsRange(e)){i=[e].concat(i.slice(0,t)).concat(i.slice(t+1));break}this._editor.setSelections(i)}_executeEditorCommand(t,i){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(t,i),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}class Q6 extends Yy{constructor(t,i,e){super(),this._hideSoon=this._register(new Er((()=>this._hide()),2e3)),this._isVisible=!1,this._editor=t,this._state=i,this._keybindingService=e,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s={inputActiveOptionBorder:Tw(vv),inputActiveOptionForeground:Tw(yv),inputActiveOptionBackground:Tw(bv)},n=this._register(lz());this.caseSensitive=this._register(new oj({appendTitle:this._keybindingLabelFor(B6),isChecked:this._state.matchCase,hoverDelegate:n,...s})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange((()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)}))),this.wholeWords=this._register(new rj({appendTitle:this._keybindingLabelFor(D6),isChecked:this._state.wholeWord,hoverDelegate:n,...s})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange((()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)}))),this.regex=this._register(new hj({appendTitle:this._keybindingLabelFor(M6),isChecked:this._state.isRegex,hoverDelegate:n,...s})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange((()=>{this._state.change({isRegex:this.regex.checked},!1)}))),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange((t=>{let i=!1;t.isRegex&&(this.regex.checked=this._state.isRegex,i=!0),t.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,i=!0),t.matchCase&&(this.caseSensitive.checked=this._state.matchCase,i=!0),!this._state.isRevealed&&i&&this._revealTemporarily()}))),this._register(rc(this._domNode,$c.MOUSE_LEAVE,(t=>this._onMouseLeave()))),this._register(rc(this._domNode,"mouseover",(t=>this._onMouseOver())))}_keybindingLabelFor(t){const i=this._keybindingService.lookupKeybinding(t);return i?` (${i.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Q6.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}function O6(t,i){return t===1||t!==2&&i}Q6.ID="editor.contrib.findOptionsWidget";class z6 extends te{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return O6(this._isRegexOverride,this._isRegex)}get wholeWord(){return O6(this._wholeWordOverride,this._wholeWord)}get matchCase(){return O6(this._matchCaseOverride,this._matchCase)}get preserveCase(){return O6(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new de),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(t,i,e){const s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let n=!1;i===0&&(t=0),t>i&&(t=i),this._matchesPosition!==t&&(this._matchesPosition=t,s.matchesPosition=!0,n=!0),this._matchesCount!==i&&(this._matchesCount=i,s.matchesCount=!0,n=!0),e!==void 0&&(Es.equalsRange(this._currentMatch,e)||(this._currentMatch=e,s.currentMatch=!0,n=!0)),n&&this._onFindReplaceStateChange.fire(s)}change(t,i,e=!0){var s;const n={moveCursor:i,updateHistory:e,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;const r=this.isRegex,h=this.wholeWord,c=this.matchCase,a=this.preserveCase;t.searchString!==void 0&&this._searchString!==t.searchString&&(this._searchString=t.searchString,n.searchString=!0,o=!0),t.replaceString!==void 0&&this._replaceString!==t.replaceString&&(this._replaceString=t.replaceString,n.replaceString=!0,o=!0),t.isRevealed!==void 0&&this._isRevealed!==t.isRevealed&&(this._isRevealed=t.isRevealed,n.isRevealed=!0,o=!0),t.isReplaceRevealed!==void 0&&this._isReplaceRevealed!==t.isReplaceRevealed&&(this._isReplaceRevealed=t.isReplaceRevealed,n.isReplaceRevealed=!0,o=!0),t.isRegex!==void 0&&(this._isRegex=t.isRegex),t.wholeWord!==void 0&&(this._wholeWord=t.wholeWord),t.matchCase!==void 0&&(this._matchCase=t.matchCase),t.preserveCase!==void 0&&(this._preserveCase=t.preserveCase),t.searchScope!==void 0&&(!((s=t.searchScope)===null||s===void 0)&&s.every((t=>{var i;return(i=this._searchScope)===null||i===void 0?void 0:i.some((i=>!Es.equalsRange(i,t)))}))||(this._searchScope=t.searchScope,n.searchScope=!0,o=!0)),t.loop!==void 0&&this._loop!==t.loop&&(this._loop=t.loop,n.loop=!0,o=!0),t.isSearching!==void 0&&this._isSearching!==t.isSearching&&(this._isSearching=t.isSearching,n.isSearching=!0,o=!0),t.filters!==void 0&&(this._filters?this._filters.update(t.filters):this._filters=t.filters,n.filters=!0,o=!0),this._isRegexOverride=t.isRegexOverride!==void 0?t.isRegexOverride:0,this._wholeWordOverride=t.wholeWordOverride!==void 0?t.wholeWordOverride:0,this._matchCaseOverride=t.matchCaseOverride!==void 0?t.matchCaseOverride:0,this._preserveCaseOverride=t.preserveCaseOverride!==void 0?t.preserveCaseOverride:0,r!==this.isRegex&&(o=!0,n.isRegex=!0),h!==this.wholeWord&&(o=!0,n.wholeWord=!0),c!==this.matchCase&&(o=!0,n.matchCase=!0),a!==this.preserveCase&&(o=!0,n.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(n)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=T6}}const U6=st(0,"input"),H6=st(0,"Preserve Case");class P6 extends BP{constructor(t){var i;super({icon:Fs.preserveCase,title:H6+t.appendTitle,isChecked:t.isChecked,hoverDelegate:(i=t.hoverDelegate)!==null&&i!==void 0?i:az("element"),inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionForeground:t.inputActiveOptionForeground,inputActiveOptionBackground:t.inputActiveOptionBackground})}}class j6 extends Yy{constructor(t,i,e,s){super(),this._showOptionButtons=e,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new de),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new de),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new de),this._onInput=this._register(new de),this._onKeyUp=this._register(new de),this._onPreserveCaseKeyDown=this._register(new de),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=i,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||U6;const n=s.appendPreserveCaseLabel||"",o=s.history||[],r=!!s.flexibleHeight,h=!!s.flexibleWidth,c=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new dj(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:o,showHistoryHint:s.showHistoryHint,flexibleHeight:r,flexibleWidth:h,flexibleMaxHeight:c,inputBoxStyles:s.inputBoxStyles})),this.preserveCase=this._register(new P6({appendTitle:n,isChecked:!1,...s.toggleStyles})),this._register(this.preserveCase.onChange((t=>{this._onDidOptionChange.fire(t),!t&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.preserveCase.onKeyDown((t=>{this._onPreserveCaseKeyDown.fire(t)}))),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const a=[this.preserveCase.domNode];this.onkeydown(this.domNode,(t=>{if(t.equals(15)||t.equals(17)||t.equals(9)){const i=a.indexOf(this.domNode.ownerDocument.activeElement);if(i>=0){let e=-1;t.equals(17)?e=(i+1)%a.length:t.equals(15)&&(e=i===0?a.length-1:i-1),t.equals(9)?(a[i].blur(),this.inputBox.focus()):e>=0&&a[e].focus(),qc(t,!0)}}}));const l=document.createElement("div");l.className="controls",l.style.display=this._showOptionButtons?"block":"none",l.appendChild(this.preserveCase.domNode),this.domNode.appendChild(l),t==null||t.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,(t=>this._onKeyDown.fire(t))),this.onkeyup(this.inputBox.inputElement,(t=>this._onKeyUp.fire(t))),this.oninput(this.inputBox.inputElement,(t=>this._onInput.fire())),this.onmousedown(this.inputBox.inputElement,(t=>this._onMouseDown.fire(t)))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(t){t?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(t){this.preserveCase.checked=t}focusOnPreserve(){this.preserveCase.focus()}validate(){var t;(t=this.inputBox)===null||t===void 0||t.validate()}set width(t){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=t+"px"}dispose(){super.dispose()}}var W6=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Y6=function(t,i){return function(e,s){i(e,s,t)}};const _6=new Tl("suggestWidgetVisible",!1,st(0,"Whether suggestion are visible")),V6="historyNavigationWidgetFocus",J6="historyNavigationForwardsEnabled",G6="historyNavigationBackwardsEnabled";let K6;const $6=[];function X6(t,i){if($6.includes(i))throw new Error("Cannot register the same widget multiple times");$6.push(i);const e=new Zi,s=new Tl(V6,!1).bindTo(t),n=new Tl(J6,!0).bindTo(t),o=new Tl(G6,!0).bindTo(t),r=()=>{s.set(!0),K6=i},h=()=>{s.set(!1),K6===i&&(K6=void 0)};return Rc(i.element)&&r(),e.add(i.onDidFocus((()=>r()))),e.add(i.onDidBlur((()=>h()))),e.add(qi((()=>{$6.splice($6.indexOf(i),1),h()}))),{historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:o,dispose(){e.dispose()}}}let q6=class extends gj{constructor(t,i,e,s){super(t,i,e);const n=this._register(s.createScoped(this.inputBox.element));this._register(X6(n,this.inputBox))}};q6=W6([Y6(3,Nl)],q6);let Z6=class extends j6{constructor(t,i,e,s,n=!1){super(t,i,n,e);const o=this._register(s.createScoped(this.inputBox.element));this._register(X6(o,this.inputBox))}};function t9(t){var i,e;return((i=t.lookupKeybinding("history.showPrevious"))===null||i===void 0?void 0:i.getElectronAccelerator())==="Up"&&((e=t.lookupKeybinding("history.showNext"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Down"}Z6=W6([Y6(3,Nl)],Z6),Gl.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:gl.and(gl.has(V6),gl.equals(G6,!0),gl.not("isComposing"),_6.isEqualTo(!1)),primary:16,secondary:[528],handler:t=>{K6==null||K6.showPreviousValue()}}),Gl.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:gl.and(gl.has(V6),gl.equals(J6,!0),gl.not("isComposing"),_6.isEqualTo(!1)),primary:18,secondary:[530],handler:t=>{K6==null||K6.showNextValue()}});const i9=X_("find-selection",Fs.selection,st(0,"Icon for 'Find in Selection' in the editor find widget.")),e9=X_("find-collapsed",Fs.chevronRight,st(0,"Icon to indicate that the editor find widget is collapsed.")),s9=X_("find-expanded",Fs.chevronDown,st(0,"Icon to indicate that the editor find widget is expanded.")),n9=X_("find-replace",Fs.replace,st(0,"Icon for 'Replace' in the editor find widget.")),o9=X_("find-replace-all",Fs.replaceAll,st(0,"Icon for 'Replace All' in the editor find widget.")),r9=X_("find-previous-match",Fs.arrowUp,st(0,"Icon for 'Find Previous' in the editor find widget.")),h9=X_("find-next-match",Fs.arrowDown,st(0,"Icon for 'Find Next' in the editor find widget.")),c9=st(0,"Find / Replace"),a9=st(0,"Find"),l9=st(0,"Find"),u9=st(0,"Previous Match"),d9=st(0,"Next Match"),f9=st(0,"Find in Selection"),g9=st(0,"Close"),A9=st(0,"Replace"),p9=st(0,"Replace"),w9=st(0,"Replace"),m9=st(0,"Replace All"),v9=st(0,"Toggle Replace"),b9=st(0,"Only the first {0} results are highlighted, but all find operations work on the entire text.",T6),y9=st(0,"{0} of {1}"),k9=st(0,"No results"),x9=419;let C9=69;const E9="ctrlEnterReplaceAll.windows.donotask",B9=kt?256:2048;class D9{constructor(t){this.afterLineNumber=t,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function M9(t,i,e){const s=!!i.match(/\n/);e&&s&&e.selectionStart>0&&t.stopPropagation()}function S9(t,i,e){const s=!!i.match(/\n/);e&&s&&e.selectionEnd<e.value.length&&t.stopPropagation()}class F9 extends Yy{constructor(t,i,e,s,n,o,r,h,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=t,this._controller=i,this._state=e,this._contextViewProvider=s,this._keybindingService=n,this._contextKeyService=o,this._storageService=h,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!h.getBoolean(E9,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new mr(500),this._register(qi((()=>this._updateHistoryDelayer.cancel()))),this._register(this._state.onFindReplaceStateChange((t=>this._onStateChanged(t)))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration((t=>{if(t.hasChanged(91)&&(this._codeEditor.getOption(91)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),t.hasChanged(145)&&this._tryUpdateWidgetWidth(),t.hasChanged(2)&&this.updateAccessibilitySupport(),t.hasChanged(41)){const t=this._codeEditor.getOption(41).loop;this._state.change({loop:t},!1);const i=this._codeEditor.getOption(41).addExtraSpaceOnTop;i&&!this._viewZone&&(this._viewZone=new D9(0),this._showViewZone()),!i&&this._viewZone&&this._removeViewZone()}}))),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection((()=>{this._isVisible&&this._updateToggleSelectionFindButton()}))),this._register(this._codeEditor.onDidFocusEditorWidget((async()=>{if(this._isVisible){const t=await this._controller.getGlobalBufferTerm();t&&t!==this._state.searchString&&(this._state.change({searchString:t},!1),this._findInput.select())}}))),this._findInputFocused=a6.bindTo(o),this._findFocusTracker=this._register(ta(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus((()=>{this._findInputFocused.set(!0),this._updateSearchScope()}))),this._register(this._findFocusTracker.onDidBlur((()=>{this._findInputFocused.set(!1)}))),this._replaceInputFocused=l6.bindTo(o),this._replaceFocusTracker=this._register(ta(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus((()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()}))),this._register(this._replaceFocusTracker.onDidBlur((()=>{this._replaceInputFocused.set(!1)}))),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new D9(0)),this._register(this._codeEditor.onDidChangeModel((()=>{this._isVisible&&(this._viewZoneId=void 0)}))),this._register(this._codeEditor.onDidScrollChange((t=>{t.scrollTopChanged?this._layoutViewZone():setTimeout((()=>{this._layoutViewZone()}),0)})))}getId(){return F9.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(t){if(t.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(t.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),t.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),t.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(91)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=xc(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(t.isRevealed||t.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),t.isRegex&&this._findInput.setRegex(this._state.isRegex),t.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),t.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),t.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),t.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),t.searchString||t.matchesCount||t.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(t.searchString||t.currentMatch)&&this._layoutViewZone(),t.updateHistory&&this._delayedUpdateHistory(),t.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Oi)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){let t;if(this._matchesCount.style.minWidth=C9+"px",this._state.matchesCount>=T6?this._matchesCount.title=b9:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){let i=String(this._state.matchesCount);this._state.matchesCount>=T6&&(i+="+");let e=String(this._state.matchesPosition);e==="0"&&(e="?"),t=Kn(y9,e,i)}else t=k9;this._matchesCount.appendChild(document.createTextNode(t)),cw(this._getAriaLabel(t,this._state.currentMatch,this._state.searchString)),C9=Math.max(C9,this._matchesCount.clientWidth)}_getAriaLabel(t,i,e){if(t===k9)return e===""?st(0,"{0} found",t):st(0,"{0} found for '{1}'",t,e);if(i){const s=st(0,"{0} found for '{1}', at {2}",t,e,i.startLineNumber+":"+i.startColumn),n=this._codeEditor.getModel();return n&&i.startLineNumber<=n.getLineCount()&&i.startLineNumber>=1?`${n.getLineContent(i.startLineNumber)}, ${s}`:s}return st(0,"{0} found for '{1}'",t,e)}_updateToggleSelectionFindButton(){const t=this._codeEditor.getSelection(),i=!!t&&(t.startLineNumber!==t.endLineNumber||t.startColumn!==t.endColumn),e=this._toggleSelectionFind.checked;this._isVisible&&(e||i)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const t=this._state.searchString.length>0,i=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&t&&i&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&t&&i&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&t),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&t),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const e=!this._codeEditor.getOption(91);this._toggleReplaceBtn.setEnabled(this._isVisible&&e)}_reveal(){if(this._revealTimeouts.forEach((t=>{clearTimeout(t)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const t=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const i=!!t&&t.startLineNumber!==t.endLineNumber;this._toggleSelectionFind.checked=i;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")}),0)),this._revealTimeouts.push(setTimeout((()=>{this._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);let i=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&t){const e=this._codeEditor.getDomNode();if(e){const s=yc(e),n=this._codeEditor.getScrolledVisiblePosition(t.getStartPosition()),o=s.left+(n?n.left:0),r=n?n.top:0;if(this._viewZone&&r<this._viewZone.heightInPx){t.endLineNumber>t.startLineNumber&&(i=!1);const e=bc(this._domNode).left;o>e&&(i=!1);const n=this._codeEditor.getScrolledVisiblePosition(t.getEndPosition());s.left+(n?n.left:0)>e&&(i=!1)}}}this._showViewZone(i)}}_hide(t){this._revealTimeouts.forEach((t=>{clearTimeout(t)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),t&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(t){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop)return void this._removeViewZone();if(!this._isVisible)return;const i=this._viewZone;this._viewZoneId===void 0&&i&&this._codeEditor.changeViewZones((e=>{i.heightInPx=this._getHeight(),this._viewZoneId=e.addZone(i),this._codeEditor.setScrollTop(t||this._codeEditor.getScrollTop()+i.heightInPx)}))}_showViewZone(t=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new D9(0));const i=this._viewZone;this._codeEditor.changeViewZones((e=>{if(this._viewZoneId!==void 0){const s=this._getHeight();if(s===i.heightInPx)return;const n=s-i.heightInPx;return i.heightInPx=s,e.layoutZone(this._viewZoneId),void(t&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+n))}{let s=this._getHeight();if(s-=this._codeEditor.getOption(84).top,s<=0)return;i.heightInPx=s,this._viewZoneId=e.addZone(i),t&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}}))}_removeViewZone(){this._codeEditor.changeViewZones((t=>{this._viewZoneId!==void 0&&(t.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))}))}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;const t=this._codeEditor.getLayoutInfo();if(t.contentWidth<=0)return void this._domNode.classList.add("hiddenEditor");this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=t.width,e=t.minimap.minimapWidth;let s=!1,n=!1,o=!1;if(this._resized&&xc(this._domNode)>x9)return this._domNode.style.maxWidth=i-28-e-15+"px",void(this._replaceInput.width=xc(this._findInput.domNode));if(447+e>=i&&(n=!0),447+e-C9>=i&&(o=!0),447+e-C9>=i+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",o),this._domNode.classList.toggle("reduced-find-widget",n),o||s||(this._domNode.style.maxWidth=i-28-e-15+"px"),this._findInput.layout({collapsedFindWidget:s,narrowFindWidget:o,reducedFindWidget:n}),this._resized){const t=this._findInput.inputBox.element.clientWidth;t>0&&(this._replaceInput.width=t)}else this._isReplaceVisible&&(this._replaceInput.width=xc(this._findInput.domNode))}_getHeight(){let t=0;return t+=4,t+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(t+=4,t+=this._replaceInput.inputBox.height+2),t+=4,t}_tryUpdateHeight(){const t=this._getHeight();return(this._cachedHeight===null||this._cachedHeight!==t)&&(this._cachedHeight=t,this._domNode.style.height=`${t}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const t=this._codeEditor.getSelections();t.map((t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const i=this._state.currentMatch;return t.startLineNumber===t.endLineNumber||Es.equalsRange(t,i)?null:t})).filter((t=>!!t)),t.length&&this._state.change({searchScope:t},!0)}}_onFindInputMouseDown(t){t.middleButton&&t.stopPropagation()}_onFindInputKeyDown(t){return t.equals(3|B9)?(this._keybindingService.dispatchEvent(t,t.target)||this._findInput.inputBox.insertAtCursor(`\n`),void t.preventDefault()):t.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void t.preventDefault()):t.equals(2066)?(this._codeEditor.focus(),void t.preventDefault()):t.equals(16)?M9(t,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):t.equals(18)?S9(t,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}_onReplaceInputKeyDown(t){return t.equals(3|B9)?(this._keybindingService.dispatchEvent(t,t.target)||(yt&&Ct&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(st(0,"Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(E9,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`\n`)),void t.preventDefault()):t.equals(2)?(this._findInput.focusOnCaseSensitive(),void t.preventDefault()):t.equals(1026)?(this._findInput.focus(),void t.preventDefault()):t.equals(2066)?(this._codeEditor.focus(),void t.preventDefault()):t.equals(16)?M9(t,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):t.equals(18)?S9(t,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}getVerticalSashLeft(t){return 0}_keybindingLabelFor(t){const i=this._keybindingService.lookupKeybinding(t);return i?` (${i.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new q6(null,this._contextViewProvider,{width:221,label:a9,placeholder:l9,appendCaseSensitiveLabel:this._keybindingLabelFor(B6),appendWholeWordsLabel:this._keybindingLabelFor(D6),appendRegexLabel:this._keybindingLabelFor(M6),validation:t=>{if(t.length===0||!this._findInput.getRegex())return null;try{return null}catch(t){return{content:t.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>t9(this._keybindingService),inputBoxStyles:AH,toggleStyles:gH},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((t=>this._onFindInputKeyDown(t)))),this._register(this._findInput.inputBox.onDidChange((()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((t=>{t.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),t.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((t=>{t.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),t.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((t=>{this._tryUpdateHeight()&&this._showViewZone()}))),xt&&this._register(this._findInput.onMouseDown((t=>this._onFindInputMouseDown(t)))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();const t=this._register(lz());this._prevBtn=this._register(new I9({label:u9+this._keybindingLabelFor(b6),icon:r9,hoverDelegate:t,onTrigger:()=>{_(this._codeEditor.getAction(b6)).run().then(void 0,Oi)}})),this._nextBtn=this._register(new I9({label:d9+this._keybindingLabelFor(v6),icon:h9,hoverDelegate:t,onTrigger:()=>{_(this._codeEditor.getAction(v6)).run().then(void 0,Oi)}}));const i=document.createElement("div");i.className="find-part",i.appendChild(this._findInput.domNode);const e=document.createElement("div");e.className="find-actions",i.appendChild(e),e.appendChild(this._matchesCount),e.appendChild(this._prevBtn.domNode),e.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new BP({icon:i9,title:f9+this._keybindingLabelFor(S6),isChecked:!1,hoverDelegate:t,inputActiveOptionBackground:Tw(bv),inputActiveOptionBorder:Tw(vv),inputActiveOptionForeground:Tw(yv)})),this._register(this._toggleSelectionFind.onChange((()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let t=this._codeEditor.getSelections();t=t.map((t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t))).filter((t=>!!t)),t.length&&this._state.change({searchScope:t},!0)}}else this._state.change({searchScope:null},!0)}))),e.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new I9({label:g9+this._keybindingLabelFor(E6),icon:eV,hoverDelegate:t,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:t=>{t.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),t.preventDefault())}})),this._replaceInput=this._register(new Z6(null,void 0,{label:A9,placeholder:p9,appendPreserveCaseLabel:this._keybindingLabelFor(F6),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>t9(this._keybindingService),inputBoxStyles:AH,toggleStyles:gH},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((t=>this._onReplaceInputKeyDown(t)))),this._register(this._replaceInput.inputBox.onDidChange((()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((t=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((t=>{t.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),t.preventDefault())})));const s=this._register(lz());this._replaceBtn=this._register(new I9({label:w9+this._keybindingLabelFor(I6),icon:n9,hoverDelegate:s,onTrigger:()=>{this._controller.replace()},onKeyDown:t=>{t.equals(1026)&&(this._closeBtn.focus(),t.preventDefault())}})),this._replaceAllBtn=this._register(new I9({label:m9+this._keybindingLabelFor(L6),icon:o9,hoverDelegate:s,onTrigger:()=>{this._controller.replaceAll()}}));const n=document.createElement("div");n.className="replace-part",n.appendChild(this._replaceInput.domNode);const o=document.createElement("div");o.className="replace-actions",n.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new I9({label:v9,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=xc(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=c9,this._domNode.role="dialog",this._domNode.style.width="419px",this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(i),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(n),this._resizeSash=this._register(new _P(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let r=x9;this._register(this._resizeSash.onDidStart((()=>{r=xc(this._domNode)}))),this._register(this._resizeSash.onDidChange((t=>{this._resized=!0;const i=r+t.startX-t.currentX;i<x9||i>(parseFloat(pc(this._domNode).maxWidth)||0)||(this._domNode.style.width=`${i}px`,this._isReplaceVisible&&(this._replaceInput.width=xc(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())}))),this._register(this._resizeSash.onDidReset((()=>{const t=xc(this._domNode);if(t<x9)return;let i=x9;if(!this._resized||t===x9){const t=this._codeEditor.getLayoutInfo();i=t.width-28-t.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${i}px`,this._isReplaceVisible&&(this._replaceInput.width=xc(this._findInput.domNode)),this._findInput.inputBox.layout()})))}updateAccessibilitySupport(){const t=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(t!==2)}}F9.ID="editor.contrib.findWidget";class I9 extends Yy{constructor(t){var i;super(),this._opts=t;let e="button";this._opts.className&&(e=e+" "+this._opts.className),this._opts.icon&&(e=e+" "+Ka.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.tabIndex=0,this._domNode.className=e,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this._register(fz((i=t.hoverDelegate)!==null&&i!==void 0?i:az("element"),this._domNode,this._opts.label)),this.onclick(this._domNode,(t=>{this._opts.onTrigger(),t.preventDefault()})),this.onkeydown(this._domNode,(t=>{var i,e;if(t.equals(10)||t.equals(3))return this._opts.onTrigger(),void t.preventDefault();(e=(i=this._opts).onKeyDown)===null||e===void 0||e.call(i,t)}))}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(t){this._domNode.classList.toggle("disabled",!t),this._domNode.setAttribute("aria-disabled",String(!t)),this._domNode.tabIndex=t?0:-1}setExpanded(t){this._domNode.setAttribute("aria-expanded",String(!!t)),t?(this._domNode.classList.remove(...Ka.asClassNameArray(e9)),this._domNode.classList.add(...Ka.asClassNameArray(s9))):(this._domNode.classList.remove(...Ka.asClassNameArray(s9)),this._domNode.classList.add(...Ka.asClassNameArray(e9)))}}Nk(((t,i)=>{const e=t.getColor(Em);e&&i.addRule(`.monaco-editor .findMatch { border: 1px ${dy(t.type)?"dotted":"solid"} ${e}; box-sizing: border-box; }`);const s=t.getColor(Bm);s&&i.addRule(`.monaco-editor .findScope { border: 1px ${dy(t.type)?"dashed":"solid"} ${s}; }`);const n=t.getColor($w);n&&i.addRule(`.monaco-editor .find-widget { border: 1px solid ${n}; }`)}));var L9,R9=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},T9=function(t,i){return function(e,s){i(e,s,t)}};function N9(t,i="single",e=!1){if(!t.hasModel())return null;const s=t.getSelection();if(i==="single"&&s.startLineNumber===s.endLineNumber||i==="multiple"){if(s.isEmpty()){const i=t.getConfiguredWordAtPosition(s.getStartPosition());if(i&&e===!1)return i.word}else if(t.getModel().getValueLengthInRange(s)<524288)return t.getModel().getValueInRange(s)}return null}let Q9=L9=class extends te{get editor(){return this._editor}static get(t){return t.getContribution(L9.ID)}constructor(t,i,e,s,n){super(),this._editor=t,this._findWidgetVisible=c6.bindTo(i),this._contextKeyService=i,this._storageService=e,this._clipboardService=s,this._notificationService=n,this._updateHistoryDelayer=new mr(500),this._state=this._register(new z6),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange((t=>this._onStateChanged(t)))),this._model=null,this._register(this._editor.onDidChangeModel((()=>{const t=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),t&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})})))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(t){this.saveQueryState(t),t.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),t.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(t){t.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),t.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),t.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),t.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!a6.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let t=this._editor.getSelections();t=t.map((t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t))).filter((t=>!!t)),t.length&&this._state.change({searchScope:t},!0)}}setSearchString(t){this._state.isRegex&&(t=Xn(t)),this._state.change({searchString:t},!1)}highlightFindOptions(t=!1){}async _start(t,i){if(this.disposeModel(),!this._editor.hasModel())return;const e={...i,isRevealed:!0};if(t.seedSearchStringFromSelection==="single"){const i=N9(this._editor,t.seedSearchStringFromSelection,t.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?e.searchString=Xn(i):e.searchString=i)}else if(t.seedSearchStringFromSelection==="multiple"&&!t.updateSearchScope){const i=N9(this._editor,t.seedSearchStringFromSelection);i&&(e.searchString=i)}if(!e.searchString&&t.seedSearchStringFromGlobalClipboard){const t=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;t&&(e.searchString=t)}if(t.forceRevealReplace||e.isReplaceRevealed?e.isReplaceRevealed=!0:this._findWidgetVisible.get()||(e.isReplaceRevealed=!1),t.updateSearchScope){const t=this._editor.getSelections();t.some((t=>!t.isEmpty()))&&(e.searchScope=t)}e.loop=t.loop,this._state.change(e,!1),this._model||(this._model=new N6(this._editor,this._state))}start(t,i){return this._start(t,i)}moveToNextMatch(){return!!this._model&&(this._model.moveToNextMatch(),!0)}moveToPrevMatch(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}goToMatch(t){return!!this._model&&(this._model.moveToMatch(t),!0)}replace(){return!!this._model&&(this._model.replace(),!0)}replaceAll(){var t;return!!this._model&&(!((t=this._editor.getModel())===null||t===void 0)&&t.isTooLargeForHeapOperation()?(this._notificationService.warn(st(0,"The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0))}selectAllMatches(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(t){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(t)}};Q9.ID="editor.contrib.findController",Q9=L9=R9([T9(1,Nl),T9(2,cH),T9(3,IV),T9(4,wL)],Q9);let O9=class extends Q9{constructor(t,i,e,s,n,o,r,h){super(t,e,r,h,o),this._contextViewService=i,this._keybindingService=s,this._themeService=n,this._widget=null,this._findOptionsWidget=null}async _start(t,i){this._widget||this._createFindWidget();const e=this._editor.getSelection();let s=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":s=!!e&&e.startLineNumber!==e.endLineNumber;break}t.updateSearchScope=t.updateSearchScope||s,await super._start(t,i),this._widget&&(t.shouldFocus===2?this._widget.focusReplaceInput():t.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(t=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!t?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new F9(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new Q6(this._editor,this._state,this._keybindingService))}};O9=R9([T9(1,cT),T9(2,Nl),T9(3,Hx),T9(4,Fk),T9(5,wL),T9(6,cH),T9(7,IV)],O9);Eu(new bu({id:p6,label:st(0,"Find"),alias:"Find",precondition:gl.or(QC.focus,gl.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:tu.MenubarEditMenu,group:"3_find",title:st(0,"&&Find"),order:1}})).addImplementation(0,((t,i,e)=>{const s=Q9.get(i);return!!s&&s.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:i.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:i.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:i.getOption(41).loop})}));const z9={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};class U9 extends vu{async run(t,i){const e=Q9.get(i);e&&!this._run(e)&&(await e.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getState().searchString.length===0&&i.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:i.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:i.getOption(41).loop}),this._run(e))}}class H9 extends vu{async run(t,i){const e=Q9.get(i);if(!e)return;const s=N9(i,"single",!1);s&&e.setSearchString(s),this._run(e)||(await e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:i.getOption(41).loop}),this._run(e))}}Eu(new bu({id:C6,label:st(0,"Replace"),alias:"Replace",precondition:gl.or(QC.focus,gl.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:tu.MenubarEditMenu,group:"3_find",title:st(0,"&&Replace"),order:2}})).addImplementation(0,((t,i,e)=>{if(!i.hasModel()||i.getOption(91))return!1;const s=Q9.get(i);if(!s)return!1;const n=i.getSelection(),o=s.isFindInputFocused(),r=!n.isEmpty()&&n.startLineNumber===n.endLineNumber&&i.getOption(41).seedSearchStringFromSelection!=="never"&&!o,h=o||r?2:1;return s.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:i.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:i.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:h,shouldAnimate:!0,updateSearchScope:!1,loop:i.getOption(41).loop})})),Bu(Q9.ID,O9,0),Cu(class extends vu{constructor(){super({id:m6,label:st(0,"Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:z9})}async run(t,i,e){const s=Q9.get(i);if(s){const t=e?{searchString:e.searchString,replaceString:e.replaceString,isReplaceRevealed:e.replaceString!==void 0,isRegex:e.isRegex,wholeWord:e.matchWholeWord,matchCase:e.isCaseSensitive,preserveCase:e.preserveCase}:{};await s.start({forceRevealReplace:!1,seedSearchStringFromSelection:s.getState().searchString.length===0&&i.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:i.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(e==null?void 0:e.findInSelection)||!1,loop:i.getOption(41).loop},t),s.setGlobalBufferTerm(s.getState().searchString)}}}),Cu(class extends vu{constructor(){super({id:w6,label:st(0,"Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(t,i){const e=Q9.get(i);e&&(await e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:i.getOption(41).loop}),e.setGlobalBufferTerm(e.getState().searchString))}}),Cu(class extends U9{constructor(){super({id:v6,label:st(0,"Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:QC.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:gl.and(QC.focus,a6),primary:3,weight:100}]})}_run(t){return!!t.moveToNextMatch()&&(t.editor.pushUndoStop(),!0)}}),Cu(class extends U9{constructor(){super({id:b6,label:st(0,"Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:QC.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:gl.and(QC.focus,a6),primary:1027,weight:100}]})}_run(t){return t.moveToPrevMatch()}}),Cu(class extends vu{constructor(){super({id:y6,label:st(0,"Go to Match..."),alias:"Go to Match...",precondition:c6}),this._highlightDecorations=[]}run(t,i,e){const s=Q9.get(i);if(!s)return;const n=s.getState().matchesCount;if(n<1)return void t.get(wL).notify({severity:pL.Warning,message:st(0,"No matches. Try searching for something else.")});const o=t.get(kP).createInputBox();o.placeholder=st(0,"Type a number to go to a specific match (between 1 and {0})",n);const r=t=>{const i=parseInt(t);if(isNaN(i))return;const e=s.getState().matchesCount;return i>0&&i<=e?i-1:i<0&&i>=-e?e+i:void 0},h=t=>{const e=r(t);if(typeof e=="number"){o.validationMessage=void 0,s.goToMatch(e);const t=s.getState().currentMatch;t&&this.addDecorations(i,t)}else o.validationMessage=st(0,"Please type a number between 1 and {0}",s.getState().matchesCount),this.clearDecorations(i)};o.onDidChangeValue((t=>{h(t)})),o.onDidAccept((()=>{const t=r(o.value);typeof t=="number"?(s.goToMatch(t),o.hide()):o.validationMessage=st(0,"Please type a number between 1 and {0}",s.getState().matchesCount)})),o.onDidHide((()=>{this.clearDecorations(i),o.dispose()})),o.show()}clearDecorations(t){t.changeDecorations((t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])}))}addDecorations(t,i){t.changeDecorations((t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[{range:i,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:i,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:Ik(fx),position:ig.Full}}}])}))}}),Cu(class extends H9{constructor(){super({id:k6,label:st(0,"Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:QC.focus,primary:2109,weight:100}})}_run(t){return t.moveToNextMatch()}}),Cu(class extends H9{constructor(){super({id:x6,label:st(0,"Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:QC.focus,primary:3133,weight:100}})}_run(t){return t.moveToPrevMatch()}});const P9=mu.bindToContribution(Q9.get);xu(new P9({id:E6,precondition:c6,handler:t=>t.closeFindWidget(),kbOpts:{weight:105,kbExpr:gl.and(QC.focus,gl.not("isComposing")),primary:9,secondary:[1033]}})),xu(new P9({id:B6,precondition:void 0,handler:t=>t.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:QC.focus,primary:u6.primary,mac:u6.mac,win:u6.win,linux:u6.linux}})),xu(new P9({id:D6,precondition:void 0,handler:t=>t.toggleWholeWords(),kbOpts:{weight:105,kbExpr:QC.focus,primary:d6.primary,mac:d6.mac,win:d6.win,linux:d6.linux}})),xu(new P9({id:M6,precondition:void 0,handler:t=>t.toggleRegex(),kbOpts:{weight:105,kbExpr:QC.focus,primary:f6.primary,mac:f6.mac,win:f6.win,linux:f6.linux}})),xu(new P9({id:S6,precondition:void 0,handler:t=>t.toggleSearchScope(),kbOpts:{weight:105,kbExpr:QC.focus,primary:g6.primary,mac:g6.mac,win:g6.win,linux:g6.linux}})),xu(new P9({id:F6,precondition:void 0,handler:t=>t.togglePreserveCase(),kbOpts:{weight:105,kbExpr:QC.focus,primary:A6.primary,mac:A6.mac,win:A6.win,linux:A6.linux}})),xu(new P9({id:I6,precondition:c6,handler:t=>t.replace(),kbOpts:{weight:105,kbExpr:QC.focus,primary:3094}})),xu(new P9({id:I6,precondition:c6,handler:t=>t.replace(),kbOpts:{weight:105,kbExpr:gl.and(QC.focus,l6),primary:3}})),xu(new P9({id:L6,precondition:c6,handler:t=>t.replaceAll(),kbOpts:{weight:105,kbExpr:QC.focus,primary:2563}})),xu(new P9({id:L6,precondition:c6,handler:t=>t.replaceAll(),kbOpts:{weight:105,kbExpr:gl.and(QC.focus,l6),primary:void 0,mac:{primary:2051}}})),xu(new P9({id:R6,precondition:c6,handler:t=>t.selectAllMatches(),kbOpts:{weight:105,kbExpr:QC.focus,primary:515}}));const j9={0:" ",1:"u",2:"r"},W9=16777215,Y9=4278190080;class _9{constructor(t){const i=Math.ceil(t/32);this._states=new Uint32Array(i)}get(t){const i=t/32|0,e=t%32;return!!(this._states[i]&1<<e)}set(t,i){const e=t/32|0,s=t%32,n=this._states[e];this._states[e]=i?n|1<<s:n&~(1<<s)}}class V9{constructor(t,i,e){if(t.length!==i.length||t.length>65535)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=t,this._endIndexes=i,this._collapseStates=new _9(t.length),this._userDefinedStates=new _9(t.length),this._recoveredStates=new _9(t.length),this._types=e,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const t=[],i=(i,e)=>{const s=t[t.length-1];return this.getStartLineNumber(s)<=i&&this.getEndLineNumber(s)>=e};for(let e=0,s=this._startIndexes.length;e<s;e++){const s=this._startIndexes[e],n=this._endIndexes[e];if(s>W9||n>W9)throw new Error("startLineNumber or endLineNumber must not exceed "+W9);for(;t.length>0&&!i(s,n);)t.pop();const o=t.length>0?t[t.length-1]:-1;t.push(e),this._startIndexes[e]=s+((255&o)<<24),this._endIndexes[e]=n+((65280&o)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(t){return this._startIndexes[t]&W9}getEndLineNumber(t){return this._endIndexes[t]&W9}getType(t){return this._types?this._types[t]:void 0}hasTypes(){return!!this._types}isCollapsed(t){return this._collapseStates.get(t)}setCollapsed(t,i){this._collapseStates.set(t,i)}isUserDefined(t){return this._userDefinedStates.get(t)}setUserDefined(t,i){return this._userDefinedStates.set(t,i)}isRecovered(t){return this._recoveredStates.get(t)}setRecovered(t,i){return this._recoveredStates.set(t,i)}getSource(t){return this.isUserDefined(t)?1:this.isRecovered(t)?2:0}setSource(t,i){i===1?(this.setUserDefined(t,!0),this.setRecovered(t,!1)):i===2?(this.setUserDefined(t,!1),this.setRecovered(t,!0)):(this.setUserDefined(t,!1),this.setRecovered(t,!1))}setCollapsedAllOfType(t,i){let e=!1;if(this._types)for(let s=0;s<this._types.length;s++)this._types[s]===t&&(this.setCollapsed(s,i),e=!0);return e}toRegion(t){return new J9(this,t)}getParentIndex(t){this.ensureParentIndices();const i=((this._startIndexes[t]&Y9)>>>24)+((this._endIndexes[t]&Y9)>>>16);return i===65535?-1:i}contains(t,i){return this.getStartLineNumber(t)<=i&&this.getEndLineNumber(t)>=i}findIndex(t){let i=0,e=this._startIndexes.length;if(e===0)return-1;for(;i<e;){const s=Math.floor((i+e)/2);t<this.getStartLineNumber(s)?e=s:i=s+1}return i-1}findRange(t){let i=this.findIndex(t);if(i>=0){if(this.getEndLineNumber(i)>=t)return i;for(i=this.getParentIndex(i);i!==-1;){if(this.contains(i,t))return i;i=this.getParentIndex(i)}}return-1}toString(){const t=[];for(let i=0;i<this.length;i++)t[i]=`[${j9[this.getSource(i)]}${this.isCollapsed(i)?"+":"-"}] ${this.getStartLineNumber(i)}/${this.getEndLineNumber(i)}`;return t.join(", ")}toFoldRange(t){return{startLineNumber:this._startIndexes[t]&W9,endLineNumber:this._endIndexes[t]&W9,type:this._types?this._types[t]:void 0,isCollapsed:this.isCollapsed(t),source:this.getSource(t)}}static fromFoldRanges(t){const i=t.length,e=new Uint32Array(i),s=new Uint32Array(i);let n=[],o=!1;for(let r=0;r<i;r++){const i=t[r];e[r]=i.startLineNumber,s[r]=i.endLineNumber,n.push(i.type),i.type&&(o=!0)}o||(n=void 0);const r=new V9(e,s,n);for(let e=0;e<i;e++)t[e].isCollapsed&&r.setCollapsed(e,!0),r.setSource(e,t[e].source);return r}static sanitizeAndMerge(t,i,e){e=e??Number.MAX_VALUE;const s=(t,i)=>Array.isArray(t)?e=>e<i?t[e]:void 0:e=>e<i?t.toFoldRange(e):void 0,n=s(t,t.length),o=s(i,i.length);let r=0,h=0,c=n(0),a=o(0);const l=[];let u,d=0;const f=[];for(;c||a;){let t;if(a&&(!c||c.startLineNumber>=a.startLineNumber))c&&c.startLineNumber===a.startLineNumber?(a.source===1?t=a:(t=c,t.isCollapsed=a.isCollapsed&&c.endLineNumber===a.endLineNumber,t.source=0),c=n(++r)):(t=a,a.isCollapsed&&a.source===0&&(t.source=2)),a=o(++h);else{let i=h,e=a;for(;;){if(!e||e.startLineNumber>c.endLineNumber){t=c;break}if(e.source===1&&e.endLineNumber>c.endLineNumber)break;e=o(++i)}c=n(++r)}if(t){for(;u&&u.endLineNumber<t.startLineNumber;)u=l.pop();t.endLineNumber>t.startLineNumber&&t.startLineNumber>d&&t.endLineNumber<=e&&(!u||u.endLineNumber>=t.endLineNumber)&&(f.push(t),d=t.startLineNumber,u&&l.push(u),u=t)}}return f}}class J9{constructor(t,i){this.ranges=t,this.index=i}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(t){return t.startLineNumber<=this.startLineNumber&&t.endLineNumber>=this.endLineNumber}containsLine(t){return this.startLineNumber<=t&&t<=this.endLineNumber}}class G9{get regions(){return this._regions}get textModel(){return this._textModel}constructor(t,i){this._updateEventEmitter=new de,this.onDidChange=this._updateEventEmitter.event,this._textModel=t,this._decorationProvider=i,this._regions=new V9(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(t){if(!t.length)return;t=t.sort(((t,i)=>t.regionIndex-i.regionIndex));const i={};this._decorationProvider.changeDecorations((e=>{let s=0,n=-1,o=-1;const r=t=>{for(;s<t;){const t=this._regions.getEndLineNumber(s),i=this._regions.isCollapsed(s);if(t<=n){const n=this.regions.getSource(s)!==0;e.changeDecorationOptions(this._editorDecorationIds[s],this._decorationProvider.getDecorationOption(i,t<=o,n))}i&&t>o&&(o=t),s++}};for(const e of t){const t=e.regionIndex,s=this._editorDecorationIds[t];if(s&&!i[s]){i[s]=!0,r(t);const e=!this._regions.isCollapsed(t);this._regions.setCollapsed(t,e),n=Math.max(n,this._regions.getEndLineNumber(t))}}r(this._regions.length)})),this._updateEventEmitter.fire({model:this,collapseStateChanged:t})}removeManualRanges(t){const i=new Array,e=i=>{for(const e of t)if(!(e.startLineNumber>i.endLineNumber||i.startLineNumber>e.endLineNumber))return!0;return!1};for(let t=0;t<this._regions.length;t++){const s=this._regions.toFoldRange(t);s.source!==0&&e(s)||i.push(s)}this.updatePost(V9.fromFoldRanges(i))}update(t,i=[]){const e=this._currentFoldedOrManualRanges(i),s=V9.sanitizeAndMerge(t,e,this._textModel.getLineCount());this.updatePost(V9.fromFoldRanges(s))}updatePost(t){const i=[];let e=-1;for(let s=0,n=t.length;s<n;s++){const n=t.getStartLineNumber(s),o=t.getEndLineNumber(s),r=t.isCollapsed(s),h=t.getSource(s)!==0,c={startLineNumber:n,startColumn:this._textModel.getLineMaxColumn(n),endLineNumber:o,endColumn:this._textModel.getLineMaxColumn(o)+1};i.push({range:c,options:this._decorationProvider.getDecorationOption(r,o<=e,h)}),r&&o>e&&(e=o)}this._decorationProvider.changeDecorations((t=>this._editorDecorationIds=t.deltaDecorations(this._editorDecorationIds,i))),this._regions=t,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(t=[]){const i=(i,e)=>{for(const s of t)if(i<s&&s<=e)return!0;return!1},e=[];for(let t=0,s=this._regions.length;t<s;t++){let s=this.regions.isCollapsed(t);const n=this.regions.getSource(t);if(s||n!==0){const o=this._regions.toFoldRange(t),r=this._textModel.getDecorationRange(this._editorDecorationIds[t]);r&&(s&&i(r.startLineNumber,r.endLineNumber)&&(s=!1),e.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,type:o.type,isCollapsed:s,source:n}))}}return e}getMemento(){const t=this._currentFoldedOrManualRanges(),i=[],e=this._textModel.getLineCount();for(let s=0,n=t.length;s<n;s++){const n=t[s];if(n.startLineNumber>=n.endLineNumber||n.startLineNumber<1||n.endLineNumber>e)continue;const o=this._getLinesChecksum(n.startLineNumber+1,n.endLineNumber);i.push({startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,isCollapsed:n.isCollapsed,source:n.source,checksum:o})}return i.length>0?i:void 0}applyMemento(t){var i,e;if(!Array.isArray(t))return;const s=[],n=this._textModel.getLineCount();for(const o of t){if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>n)continue;const t=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);o.checksum&&t!==o.checksum||s.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,type:void 0,isCollapsed:(i=o.isCollapsed)===null||i===void 0||i,source:(e=o.source)!==null&&e!==void 0?e:0})}const o=V9.sanitizeAndMerge(this._regions,s,n);this.updatePost(V9.fromFoldRanges(o))}_getLinesChecksum(t,i){return Uh(this._textModel.getLineContent(t)+this._textModel.getLineContent(i))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(t,i){const e=[];if(this._regions){let s=this._regions.findRange(t),n=1;for(;s>=0;){const t=this._regions.toRegion(s);i&&!i(t,n)||e.push(t),n++,s=t.parentIndex}}return e}getRegionAtLine(t){if(this._regions){const i=this._regions.findRange(t);if(i>=0)return this._regions.toRegion(i)}return null}getRegionsInside(t,i){const e=[],s=t?t.regionIndex+1:0,n=t?t.endLineNumber:Number.MAX_VALUE;if(i&&i.length===2){const t=[];for(let o=s,r=this._regions.length;o<r;o++){const s=this._regions.toRegion(o);if(!(this._regions.getStartLineNumber(o)<n))break;for(;t.length>0&&!s.containedBy(t[t.length-1]);)t.pop();t.push(s),i(s,t.length)&&e.push(s)}}else for(let t=s,o=this._regions.length;t<o;t++){const s=this._regions.toRegion(t);if(!(this._regions.getStartLineNumber(t)<n))break;i&&!i(s)||e.push(s)}return e}}function K9(t,i,e){const s=[];for(const n of e){const e=t.getRegionAtLine(n);if(e){const n=!e.isCollapsed;if(s.push(e),i>1){const o=t.getRegionsInside(e,((t,e)=>t.isCollapsed!==n&&e<i));s.push(...o)}}}t.toggleCollapseState(s)}function $9(t,i,e=Number.MAX_VALUE,s){const n=[];if(s&&s.length>0)for(const o of s){const s=t.getRegionAtLine(o);if(s&&(s.isCollapsed!==i&&n.push(s),e>1)){const o=t.getRegionsInside(s,((t,s)=>t.isCollapsed!==i&&s<e));n.push(...o)}}else{const s=t.getRegionsInside(null,((t,s)=>t.isCollapsed!==i&&s<e));n.push(...s)}t.toggleCollapseState(n)}function X9(t,i,e,s){const n=[];for(const o of s){const s=t.getAllRegionsAtLine(o,((t,s)=>t.isCollapsed!==i&&s<=e));n.push(...s)}t.toggleCollapseState(n)}function q9(t,i,e){const s=[];for(const i of e){const e=t.getAllRegionsAtLine(i,void 0);e.length>0&&s.push(e[0])}const n=t.getRegionsInside(null,(t=>s.every((i=>!i.containedBy(t)&&!t.containedBy(i)))&&t.isCollapsed!==i));t.toggleCollapseState(n)}function Z9(t,i,e){const s=t.textModel,n=t.regions,o=[];for(let t=n.length-1;t>=0;t--)if(e!==n.isCollapsed(t)){const e=n.getStartLineNumber(t);i.test(s.getLineContent(e))&&o.push(n.toRegion(t))}t.toggleCollapseState(o)}function t7(t,i,e){const s=t.regions,n=[];for(let t=s.length-1;t>=0;t--)e!==s.isCollapsed(t)&&i===s.getType(t)&&n.push(s.toRegion(t));t.toggleCollapseState(n)}class i7{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(t){this._updateEventEmitter=new de,this._hasLineChanges=!1,this._foldingModel=t,this._foldingModelListener=t.onDidChange((t=>this.updateHiddenRanges())),this._hiddenRanges=[],t.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(t){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=t.changes.some((t=>t.range.endLineNumber!==t.range.startLineNumber||iD(t.text)[0]!==0)))}updateHiddenRanges(){let t=!1;const i=[];let e=0,s=0,n=Number.MAX_VALUE,o=-1;const r=this._foldingModel.regions;for(;e<r.length;e++){if(!r.isCollapsed(e))continue;const h=r.getStartLineNumber(e)+1,c=r.getEndLineNumber(e);n<=h&&c<=o||(!t&&s<this._hiddenRanges.length&&this._hiddenRanges[s].startLineNumber===h&&this._hiddenRanges[s].endLineNumber===c?(i.push(this._hiddenRanges[s]),s++):(t=!0,i.push(new Es(h,1,c,1))),n=h,o=c)}(this._hasLineChanges||t||s<this._hiddenRanges.length)&&this.applyHiddenRanges(i)}applyHiddenRanges(t){this._hiddenRanges=t,this._hasLineChanges=!1,this._updateEventEmitter.fire(t)}hasRanges(){return this._hiddenRanges.length>0}isHidden(t){return e7(this._hiddenRanges,t)!==null}adjustSelections(t){let i=!1;const e=this._foldingModel.textModel;let s=null;const n=t=>(s&&function(t,i){return t>=i.startLineNumber&&t<=i.endLineNumber}(t,s)||(s=e7(this._hiddenRanges,t)),s?s.startLineNumber-1:null);for(let s=0,o=t.length;s<o;s++){let o=t[s];const r=n(o.startLineNumber);r&&(o=o.setStartPosition(r,e.getLineMaxColumn(r)),i=!0);const h=n(o.endLineNumber);h&&(o=o.setEndPosition(h,e.getLineMaxColumn(h)),i=!0),t[s]=o}return i}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function e7(t,i){const e=Bg(t,(t=>i<t.startLineNumber))-1;return e>=0&&t[e].endLineNumber>=i?t[e]:null}class s7{constructor(t,i,e){this.editorModel=t,this.languageConfigurationService=i,this.foldingRangesLimit=e,this.id="indent"}dispose(){}compute(t){const i=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,e=i&&!!i.offSide,s=i&&i.markers;return Promise.resolve(function(t,i,e,s=o7){const n=t.getOptions().tabSize,o=new n7(s);let r;e&&(r=new RegExp(`(${e.start.source})|(?:${e.end.source})`));const h=[],c=t.getLineCount()+1;h.push({indent:-1,endAbove:c,line:c});for(let e=t.getLineCount();e>0;e--){const s=t.getLineContent(e),c=EE(s,n);let a,l=h[h.length-1];if(c!==-1){if(r&&(a=s.match(r))){if(!a[1]){h.push({indent:-2,endAbove:e,line:e});continue}{let t=h.length-1;for(;t>0&&h[t].indent!==-2;)t--;if(t>0){h.length=t+1,l=h[t],o.insertFirst(e,l.line,c),l.line=e,l.indent=c,l.endAbove=e;continue}}}if(l.indent>c){do{h.pop(),l=h[h.length-1]}while(l.indent>c);const t=l.endAbove-1;t-e>=1&&o.insertFirst(e,t,c)}l.indent===c?l.endAbove=e:h.push({indent:c,endAbove:e,line:e})}else i&&(l.endAbove=e)}return o.toIndentRanges(t)}(this.editorModel,e,s,this.foldingRangesLimit))}}let n7=class{constructor(t){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=t}insertFirst(t,i,e){if(t>W9||i>W9)return;const s=this._length;this._startIndexes[s]=t,this._endIndexes[s]=i,this._length++,e<1e3&&(this._indentOccurrences[e]=(this._indentOccurrences[e]||0)+1)}toIndentRanges(t){const i=this._foldingRangesLimit.limit;if(this._length<=i){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let e=this._length-1,s=0;e>=0;e--,s++)t[s]=this._startIndexes[e],i[s]=this._endIndexes[e];return new V9(t,i)}{this._foldingRangesLimit.update(this._length,i);let e=0,s=this._indentOccurrences.length;for(let t=0;t<this._indentOccurrences.length;t++){const n=this._indentOccurrences[t];if(n){if(n+e>i){s=t;break}e+=n}}const n=t.getOptions().tabSize,o=new Uint32Array(i),r=new Uint32Array(i);for(let h=this._length-1,c=0;h>=0;h--){const a=this._startIndexes[h],l=EE(t.getLineContent(a),n);(l<s||l===s&&e++<i)&&(o[c]=a,r[c]=this._endIndexes[h],c++)}return new V9(o,r)}}};const o7={limit:5e3,update:()=>{}},r7=Ow("editor.foldBackground",{light:Hw(bm,.3),dark:Hw(bm,.3),hcDark:null,hcLight:null},st(0,"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);Ow("editorGutter.foldingControlForeground",{dark:Gw,light:Gw,hcDark:Gw,hcLight:Gw},st(0,"Color of the folding control in the editor gutter."));const h7=X_("folding-expanded",Fs.chevronDown,st(0,"Icon for expanded ranges in the editor glyph margin.")),c7=X_("folding-collapsed",Fs.chevronRight,st(0,"Icon for collapsed ranges in the editor glyph margin.")),a7=X_("folding-manual-collapsed",c7,st(0,"Icon for manually collapsed ranges in the editor glyph margin.")),l7=X_("folding-manual-expanded",h7,st(0,"Icon for manually expanded ranges in the editor glyph margin.")),u7={color:Ik(r7),position:1},d7=st(0,"Click to expand the range."),f7=st(0,"Click to collapse the range.");class g7{constructor(t){this.editor=t,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(t,i,e){return i?g7.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?t?this.showFoldingHighlights?g7.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:g7.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:g7.NO_CONTROLS_EXPANDED_RANGE_DECORATION:t?e?this.showFoldingHighlights?g7.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:g7.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?g7.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:g7.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?e?g7.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:g7.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:e?g7.MANUALLY_EXPANDED_VISUAL_DECORATION:g7.EXPANDED_VISUAL_DECORATION}changeDecorations(t){return this.editor.changeDecorations(t)}removeDecorations(t){this.editor.removeDecorations(t)}}g7.COLLAPSED_VISUAL_DECORATION=DF.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:d7,firstLineDecorationClassName:Ka.asClassName(c7)}),g7.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=DF.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:u7,isWholeLine:!0,linesDecorationsTooltip:d7,firstLineDecorationClassName:Ka.asClassName(c7)}),g7.MANUALLY_COLLAPSED_VISUAL_DECORATION=DF.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:d7,firstLineDecorationClassName:Ka.asClassName(a7)}),g7.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=DF.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:u7,isWholeLine:!0,linesDecorationsTooltip:d7,firstLineDecorationClassName:Ka.asClassName(a7)}),g7.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=DF.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:d7}),g7.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=DF.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:u7,isWholeLine:!0,linesDecorationsTooltip:d7}),g7.EXPANDED_VISUAL_DECORATION=DF.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Ka.asClassName(h7),linesDecorationsTooltip:f7}),g7.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=DF.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Ka.asClassName(h7),linesDecorationsTooltip:f7}),g7.MANUALLY_EXPANDED_VISUAL_DECORATION=DF.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Ka.asClassName(l7),linesDecorationsTooltip:f7}),g7.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=DF.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:Ka.asClassName(l7),linesDecorationsTooltip:f7}),g7.NO_CONTROLS_EXPANDED_RANGE_DECORATION=DF.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),g7.HIDDEN_RANGE_DECORATION=DF.register({description:"folding-hidden-range-decoration",stickiness:1});const A7={};class p7{constructor(t,i,e,s,n){this.editorModel=t,this.providers=i,this.handleFoldingRangesChange=e,this.foldingRangesLimit=s,this.fallbackRangeProvider=n,this.id="syntax",this.disposables=new Zi,n&&this.disposables.add(n);for(const t of i)typeof t.onDidChange=="function"&&this.disposables.add(t.onDidChange(e))}compute(t){return function(t,i,e){let s=null;const n=t.map(((t,n)=>Promise.resolve(t.provideFoldingRanges(i,A7,e)).then((t=>{if(!e.isCancellationRequested&&Array.isArray(t)){Array.isArray(s)||(s=[]);const e=i.getLineCount();for(const i of t)i.start>0&&i.end>i.start&&i.end<=e&&s.push({start:i.start,end:i.end,rank:n,kind:i.kind})}}),zi)));return Promise.all(n).then((t=>s))}(this.providers,this.editorModel,t).then((i=>{var e,s;return i?function(t,i){const e=t.sort(((t,i)=>{let e=t.start-i.start;return e===0&&(e=t.rank-i.rank),e})),s=new w7(i);let n;const o=[];for(const t of e)if(n){if(t.start>n.start)if(t.end<=n.end)o.push(n),n=t,s.add(t.start,t.end,t.kind&&t.kind.value,o.length);else{if(t.start>n.end){do{n=o.pop()}while(n&&t.start>n.end);n&&o.push(n),n=t}s.add(t.start,t.end,t.kind&&t.kind.value,o.length)}}else n=t,s.add(t.start,t.end,t.kind&&t.kind.value,o.length);return s.toIndentRanges()}(i,this.foldingRangesLimit):(s=(e=this.fallbackRangeProvider)===null||e===void 0?void 0:e.compute(t))!==null&&s!==void 0?s:null}))}dispose(){this.disposables.dispose()}}class w7{constructor(t){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=t}add(t,i,e,s){if(t>W9||i>W9)return;const n=this._length;this._startIndexes[n]=t,this._endIndexes[n]=i,this._nestingLevels[n]=s,this._types[n]=e,this._length++,s<30&&(this._nestingLevelCounts[s]=(this._nestingLevelCounts[s]||0)+1)}toIndentRanges(){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let e=0;e<this._length;e++)t[e]=this._startIndexes[e],i[e]=this._endIndexes[e];return new V9(t,i,this._types)}{this._foldingRangesLimit.update(this._length,t);let i=0,e=this._nestingLevelCounts.length;for(let s=0;s<this._nestingLevelCounts.length;s++){const n=this._nestingLevelCounts[s];if(n){if(n+i>t){e=s;break}i+=n}}const s=new Uint32Array(t),n=new Uint32Array(t),o=[];for(let r=0,h=0;r<this._length;r++){const c=this._nestingLevels[r];(c<e||c===e&&i++<t)&&(s[h]=this._startIndexes[r],n[h]=this._endIndexes[r],o[h]=this._types[r],h++)}return new V9(s,n,o)}}}var m7,v7=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},b7=function(t,i){return function(e,s){i(e,s,t)}};const y7=new Tl("foldingEnabled",!1);let k7=m7=class extends te{static get(t){return t.getContribution(m7.ID)}static getFoldingRangeProviders(t,i){var e,s;const n=t.foldingRangeProvider.ordered(i);return(s=(e=m7._foldingRangeSelector)===null||e===void 0?void 0:e.call(m7,n,i))!==null&&s!==void 0?s:n}constructor(t,i,e,s,n,o){super(),this.contextKeyService=i,this.languageConfigurationService=e,this.languageFeaturesService=o,this.localToDispose=this._register(new Zi),this.editor=t,this._foldingLimitReporter=new x7(t);const r=this.editor.getOptions();this._isEnabled=r.get(43),this._useFoldingProviders=r.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=r.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=r.get(46),this.updateDebounceInfo=n.for(o.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new g7(t),this.foldingDecorationProvider.showFoldingControls=r.get(110),this.foldingDecorationProvider.showFoldingHighlights=r.get(45),this.foldingEnabled=y7.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel((()=>this.onModelChanged()))),this._register(this.editor.onDidChangeConfiguration((t=>{if(t.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),t.hasChanged(47)&&this.onModelChanged(),t.hasChanged(110)||t.hasChanged(45)){const t=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=t.get(110),this.foldingDecorationProvider.showFoldingHighlights=t.get(45),this.triggerFoldingModelChanged()}t.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),t.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),t.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))}))),this.onModelChanged()}saveViewState(){const t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization())return{};if(this.foldingModel){const i=this.foldingModel.getMemento(),e=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:i,lineCount:t.getLineCount(),provider:e,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(t){const i=this.editor.getModel();if(i&&this._isEnabled&&!i.isTooLargeForTokenization()&&this.hiddenRangeModel&&t&&(this._currentModelHasFoldedImports=!!t.foldedImports,t.collapsedRegions&&t.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(t.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const t=this.editor.getModel();this._isEnabled&&t&&!t.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new G9(t,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new i7(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange((t=>this.onHiddenRangesChanges(t)))),this.updateScheduler=new mr(this.updateDebounceInfo.get(t)),this.cursorChangedScheduler=new Er((()=>this.revealCursor()),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange((()=>this.onFoldingStrategyChanged()))),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration((()=>this.onFoldingStrategyChanged()))),this.localToDispose.add(this.editor.onDidChangeModelContent((t=>this.onDidChangeModelContent(t)))),this.localToDispose.add(this.editor.onDidChangeCursorPosition((()=>this.onCursorPositionChanged()))),this.localToDispose.add(this.editor.onMouseDown((t=>this.onEditorMouseDown(t)))),this.localToDispose.add(this.editor.onMouseUp((t=>this.onEditorMouseUp(t)))),this.localToDispose.add({dispose:()=>{var t,i;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)===null||t===void 0||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(i=this.rangeProvider)===null||i===void 0||i.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var t;(t=this.rangeProvider)===null||t===void 0||t.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(t){if(this.rangeProvider)return this.rangeProvider;const i=new s7(t,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=i,this._useFoldingProviders&&this.foldingModel){const e=m7.getFoldingRangeProviders(this.languageFeaturesService,t);e.length>0&&(this.rangeProvider=new p7(t,e,(()=>this.triggerFoldingModelChanged()),this._foldingLimitReporter,i))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(t){var i;(i=this.hiddenRangeModel)===null||i===void 0||i.notifyChangeModelContent(t),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger((()=>{const t=this.foldingModel;if(!t)return null;const i=new re,e=this.getRangeProvider(t.textModel),s=this.foldingRegionPromise=Ar((t=>e.compute(t)));return s.then((e=>{if(e&&s===this.foldingRegionPromise){let s;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const t=e.setCollapsedAllOfType(Vs.Imports.value,!0);t&&(s=MJ.capture(this.editor),this._currentModelHasFoldedImports=t)}const n=this.editor.getSelections(),o=n?n.map((t=>t.startLineNumber)):[];t.update(e,o),s==null||s.restore(this.editor);const r=this.updateDebounceInfo.update(t.textModel,i.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=r)}return t}))})).then(void 0,(t=>(Oi(t),null))))}onHiddenRangesChanges(t){if(this.hiddenRangeModel&&t.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(t,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const t=this.getFoldingModel();t&&t.then((t=>{if(t){const i=this.editor.getSelections();if(i&&i.length>0){const e=[];for(const s of i){const i=s.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(i)&&e.push(...t.getAllRegionsAtLine(i,(t=>t.isCollapsed&&i>t.startLineNumber)))}e.length&&(t.toggleCollapseState(e),this.reveal(i[0].getPosition()))}}})).then(void 0,Oi)}onEditorMouseDown(t){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!t.target||!t.target.range||!t.event.leftButton&&!t.event.middleButton)return;const i=t.target.range;let e=!1;switch(t.target.type){case 4:{const i=t.target.detail,s=t.target.element.offsetLeft;if(i.offsetX-s<4)return;e=!0;break}case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!t.target.detail.isAfterLines)break;return;case 6:if(this.hiddenRangeModel.hasRanges()){const t=this.editor.getModel();if(t&&i.startColumn===t.getLineMaxColumn(i.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:i.startLineNumber,iconClicked:e}}onEditorMouseUp(t){const i=this.foldingModel;if(!i||!this.mouseDownInfo||!t.target)return;const e=this.mouseDownInfo.lineNumber,s=this.mouseDownInfo.iconClicked,n=t.target.range;if(!n||n.startLineNumber!==e)return;if(s){if(t.target.type!==4)return}else{const t=this.editor.getModel();if(!t||n.startColumn!==t.getLineMaxColumn(e))return}const o=i.getRegionAtLine(e);if(o&&o.startLineNumber===e){const n=o.isCollapsed;if(s||n){let s=[];if(t.event.altKey){const t=t=>!t.containedBy(o)&&!o.containedBy(t),e=i.getRegionsInside(null,t);for(const t of e)t.isCollapsed&&s.push(t);s.length===0&&(s=e)}else{const e=t.event.middleButton||t.event.shiftKey;if(e)for(const t of i.getRegionsInside(o))t.isCollapsed===n&&s.push(t);!n&&e&&s.length!==0||s.push(o)}i.toggleCollapseState(s),this.reveal({lineNumber:e,column:1})}}}reveal(t){this.editor.revealPositionInCenterIfOutsideViewport(t,0)}};k7.ID="editor.contrib.folding",k7=m7=v7([b7(1,Nl),b7(2,uf),b7(3,wL),b7(4,dR),b7(5,jA)],k7);class x7{constructor(t){this.editor=t,this._onDidChange=new de,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(t,i){t===this._computed&&i===this._limited||(this._computed=t,this._limited=i,this._onDidChange.fire())}}class C7 extends vu{runEditorCommand(t,i,e){const s=t.get(uf),n=k7.get(i);if(!n)return;const o=n.getFoldingModel();return o?(this.reportTelemetry(t,i),o.then((t=>{if(t){this.invoke(n,t,i,e,s);const o=i.getSelection();o&&n.reveal(o.getStartPosition())}}))):void 0}getSelectedLines(t){const i=t.getSelections();return i?i.map((t=>t.startLineNumber)):[]}getLineNumbers(t,i){return t&&t.selectionLines?t.selectionLines.map((t=>t+1)):this.getSelectedLines(i)}run(t,i){}}function E7(t){if(!P(t)){if(!Q(t))return!1;const i=t;if(!P(i.levels)&&!z(i.levels)||!P(i.direction)&&!N(i.direction)||!(P(i.selectionLines)||Array.isArray(i.selectionLines)&&i.selectionLines.every(z)))return!1}return!0}class B7 extends C7{getFoldingLevel(){return parseInt(this.id.substr(B7.ID_PREFIX.length))}invoke(t,i,e){(function(t,i,e,s){const n=t.getRegionsInside(null,((t,n)=>n===i&&t.isCollapsed!==e&&!s.some((i=>t.containsLine(i)))));t.toggleCollapseState(n)})(i,this.getFoldingLevel(),!0,this.getSelectedLines(e))}}B7.ID_PREFIX="editor.foldLevel",B7.ID=t=>B7.ID_PREFIX+t;Bu(k7.ID,k7,0),Cu(class extends C7{constructor(){super({id:"editor.unfold",label:st(0,"Unfold"),alias:"Unfold",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t`,constraint:E7,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(t,i,e,s){const n=s&&s.levels||1,o=this.getLineNumbers(s,e);s&&s.direction==="up"?X9(i,!1,n,o):$9(i,!1,n,o)}}),Cu(class extends C7{constructor(){super({id:"editor.unfoldRecursively",label:st(0,"Unfold Recursively"),alias:"Unfold Recursively",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2142),weight:100}})}invoke(t,i,e,s){$9(i,!1,Number.MAX_VALUE,this.getSelectedLines(e))}}),Cu(class extends C7{constructor(){super({id:"editor.fold",label:st(0,"Fold"),alias:"Fold",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t`,constraint:E7,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(t,i,e,s){const n=this.getLineNumbers(s,e),o=s&&s.levels,r=s&&s.direction;typeof o!="number"&&typeof r!="string"?function(t,i,e){const s=[];for(const n of e){const e=t.getAllRegionsAtLine(n,(t=>t.isCollapsed!==i));e.length>0&&s.push(e[0])}t.toggleCollapseState(s)}(i,!0,n):r==="up"?X9(i,!0,o||1,n):$9(i,!0,o||1,n)}}),Cu(class extends C7{constructor(){super({id:"editor.foldRecursively",label:st(0,"Fold Recursively"),alias:"Fold Recursively",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2140),weight:100}})}invoke(t,i,e){const s=this.getSelectedLines(e);$9(i,!0,Number.MAX_VALUE,s)}}),Cu(class extends C7{constructor(){super({id:"editor.foldAll",label:st(0,"Fold All"),alias:"Fold All",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2069),weight:100}})}invoke(t,i,e){$9(i,!0)}}),Cu(class extends C7{constructor(){super({id:"editor.unfoldAll",label:st(0,"Unfold All"),alias:"Unfold All",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2088),weight:100}})}invoke(t,i,e){$9(i,!1)}}),Cu(class extends C7{constructor(){super({id:"editor.foldAllBlockComments",label:st(0,"Fold All Block Comments"),alias:"Fold All Block Comments",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2138),weight:100}})}invoke(t,i,e,s,n){if(i.regions.hasTypes())t7(i,Vs.Comment.value,!0);else{const t=e.getModel();if(!t)return;const s=n.getLanguageConfiguration(t.getLanguageId()).comments;s&&s.blockCommentStartToken&&Z9(i,new RegExp("^\\s*"+Xn(s.blockCommentStartToken)),!0)}}}),Cu(class extends C7{constructor(){super({id:"editor.foldAllMarkerRegions",label:st(0,"Fold All Regions"),alias:"Fold All Regions",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2077),weight:100}})}invoke(t,i,e,s,n){if(i.regions.hasTypes())t7(i,Vs.Region.value,!0);else{const t=e.getModel();if(!t)return;const s=n.getLanguageConfiguration(t.getLanguageId()).foldingRules;s&&s.markers&&s.markers.start&&Z9(i,new RegExp(s.markers.start),!0)}}}),Cu(class extends C7{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:st(0,"Unfold All Regions"),alias:"Unfold All Regions",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2078),weight:100}})}invoke(t,i,e,s,n){if(i.regions.hasTypes())t7(i,Vs.Region.value,!1);else{const t=e.getModel();if(!t)return;const s=n.getLanguageConfiguration(t.getLanguageId()).foldingRules;s&&s.markers&&s.markers.start&&Z9(i,new RegExp(s.markers.start),!1)}}}),Cu(class extends C7{constructor(){super({id:"editor.foldAllExcept",label:st(0,"Fold All Except Selected"),alias:"Fold All Except Selected",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2136),weight:100}})}invoke(t,i,e){q9(i,!0,this.getSelectedLines(e))}}),Cu(class extends C7{constructor(){super({id:"editor.unfoldAllExcept",label:st(0,"Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2134),weight:100}})}invoke(t,i,e){q9(i,!1,this.getSelectedLines(e))}}),Cu(class extends C7{constructor(){super({id:"editor.toggleFold",label:st(0,"Toggle Fold"),alias:"Toggle Fold",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2090),weight:100}})}invoke(t,i,e){K9(i,1,this.getSelectedLines(e))}}),Cu(class extends C7{constructor(){super({id:"editor.gotoParentFold",label:st(0,"Go to Parent Fold"),alias:"Go to Parent Fold",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,weight:100}})}invoke(t,i,e){const s=this.getSelectedLines(e);if(s.length>0){const t=function(t,i){let e=null;const s=i.getRegionAtLine(t);if(s!==null&&(e=s.startLineNumber,t===e)){const t=s.parentIndex;e=t!==-1?i.regions.getStartLineNumber(t):null}return e}(s[0],i);t!==null&&e.setSelection({startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1})}}}),Cu(class extends C7{constructor(){super({id:"editor.gotoPreviousFold",label:st(0,"Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,weight:100}})}invoke(t,i,e){const s=this.getSelectedLines(e);if(s.length>0){const t=function(t,i){let e=i.getRegionAtLine(t);if(e!==null&&e.startLineNumber===t){if(t!==e.startLineNumber)return e.startLineNumber;{const t=e.parentIndex;let s=0;for(t!==-1&&(s=i.regions.getStartLineNumber(e.parentIndex));e!==null;){if(!(e.regionIndex>0)||(e=i.regions.toRegion(e.regionIndex-1),e.startLineNumber<=s))return null;if(e.parentIndex===t)return e.startLineNumber}}}else if(i.regions.length>0)for(e=i.regions.toRegion(i.regions.length-1);e!==null;){if(e.startLineNumber<t)return e.startLineNumber;e=e.regionIndex>0?i.regions.toRegion(e.regionIndex-1):null}return null}(s[0],i);t!==null&&e.setSelection({startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1})}}}),Cu(class extends C7{constructor(){super({id:"editor.gotoNextFold",label:st(0,"Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,weight:100}})}invoke(t,i,e){const s=this.getSelectedLines(e);if(s.length>0){const t=function(t,i){let e=i.getRegionAtLine(t);if(e!==null&&e.startLineNumber===t){const t=e.parentIndex;let s=0;if(t!==-1)s=i.regions.getEndLineNumber(e.parentIndex);else{if(i.regions.length===0)return null;s=i.regions.getEndLineNumber(i.regions.length-1)}for(;e!==null;){if(!(e.regionIndex<i.regions.length)||(e=i.regions.toRegion(e.regionIndex+1),e.startLineNumber>=s))return null;if(e.parentIndex===t)return e.startLineNumber}}else if(i.regions.length>0)for(e=i.regions.toRegion(0);e!==null;){if(e.startLineNumber>t)return e.startLineNumber;e=e.regionIndex<i.regions.length?i.regions.toRegion(e.regionIndex+1):null}return null}(s[0],i);t!==null&&e.setSelection({startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1})}}}),Cu(class extends C7{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:st(0,"Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2135),weight:100}})}invoke(t,i,e){var s;const n=[],o=e.getSelections();if(o){for(const t of o){let i=t.endLineNumber;t.endColumn===1&&--i,i>t.startLineNumber&&(n.push({startLineNumber:t.startLineNumber,endLineNumber:i,type:void 0,isCollapsed:!0,source:1}),e.setSelection({startLineNumber:t.startLineNumber,startColumn:1,endLineNumber:t.startLineNumber,endColumn:1}))}if(n.length>0){n.sort(((t,i)=>t.startLineNumber-i.startLineNumber));const t=V9.sanitizeAndMerge(i.regions,n,(s=e.getModel())===null||s===void 0?void 0:s.getLineCount());i.updatePost(V9.fromFoldRanges(t))}}}}),Cu(class extends C7{constructor(){super({id:"editor.removeManualFoldingRanges",label:st(0,"Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2137),weight:100}})}invoke(t,i,e){const s=e.getSelections();if(s){const e=[];for(const t of s){const{startLineNumber:i,endLineNumber:s}=t;e.push(s>=i?{startLineNumber:i,endLineNumber:s}:{endLineNumber:s,startLineNumber:i})}i.removeManualRanges(e),t.triggerFoldingModelChanged()}}});for(let t=1;t<=7;t++)D7=new B7({id:B7.ID(t),label:st(0,"Fold Level {0}",t),alias:`Fold Level ${t}`,precondition:y7,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2048|21+t),weight:100}}),Mu.INSTANCE.registerEditorAction(D7);var D7;Xa.registerCommand("_executeFoldingRangeProvider",(async function(t,...i){const[e]=i;if(!(e instanceof fs))throw Wi();const s=t.get(jA),n=t.get(Ha).getModel(e);if(!n)throw Wi();const o=t.get(Id);if(!o.getValue("editor.folding",{resource:e}))return[];const r=t.get(uf),h=o.getValue("editor.foldingStrategy",{resource:e}),c={get limit(){return o.getValue("editor.foldingMaximumRegions",{resource:e})},update:(t,i)=>{}},a=new s7(n,r,c);let l=a;if(h!=="indentation"){const t=k7.getFoldingRangeProviders(s,n);t.length&&(l=new p7(n,t,(()=>{}),c,a))}const u=await l.compute(ye.None),d=[];try{if(u)for(let t=0;t<u.length;t++){const i=u.getType(t);d.push({start:u.getStartLineNumber(t),end:u.getEndLineNumber(t),kind:i?Vs.fromValue(i):void 0})}return d}finally{l.dispose()}}));Cu(class extends vu{constructor(){super({id:"editor.action.fontZoomIn",label:st(0,"Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(t,i){Fa.setZoomLevel(Fa.getZoomLevel()+1)}}),Cu(class extends vu{constructor(){super({id:"editor.action.fontZoomOut",label:st(0,"Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(t,i){Fa.setZoomLevel(Fa.getZoomLevel()-1)}}),Cu(class extends vu{constructor(){super({id:"editor.action.fontZoomReset",label:st(0,"Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(t,i){Fa.setZoomLevel(0)}});var M7=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},S7=function(t,i){return function(e,s){i(e,s,t)}};let F7=class{constructor(t,i,e,s){this._editor=t,this._languageFeaturesService=i,this._workerService=e,this._accessibilitySignalService=s,this._disposables=new Zi,this._sessionDisposables=new Zi,this._disposables.add(i.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(t.onDidChangeModel((()=>this._update()))),this._disposables.add(t.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(t.onDidChangeConfiguration((t=>{t.hasChanged(56)&&this._update()}))),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;const t=this._editor.getModel(),[i]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(t);if(!i||!i.autoFormatTriggerCharacters)return;const e=new Of;for(const t of i.autoFormatTriggerCharacters)e.add(t.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType((t=>{const i=t.charCodeAt(t.length-1);e.has(i)&&this._trigger(String.fromCharCode(i))})))}_trigger(t){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const i=this._editor.getModel(),e=this._editor.getPosition(),s=new xe,n=this._editor.onDidChangeModelContent((t=>{if(t.isFlush)return s.cancel(),void n.dispose();for(let i=0,o=t.changes.length;i<o;i++)if(t.changes[i].range.endLineNumber<=e.lineNumber)return s.cancel(),void n.dispose()}));ZX(this._workerService,this._languageFeaturesService,i,e,t,i.getFormattingOptions(),s.token).then((t=>{s.token.isCancellationRequested||p(t)&&(this._accessibilitySignalService.playSignal(nJ.format,{userGesture:!1}),YX.execute(this._editor,t,!0))})).finally((()=>{n.dispose()}))}};F7.ID="editor.contrib.autoFormat",F7=M7([S7(1,jA),S7(2,tP),S7(3,iJ)],F7);let I7=class{constructor(t,i,e){this.editor=t,this._languageFeaturesService=i,this._instantiationService=e,this._callOnDispose=new Zi,this._callOnModel=new Zi,this._callOnDispose.add(t.onDidChangeConfiguration((()=>this._update()))),this._callOnDispose.add(t.onDidChangeModel((()=>this._update()))),this._callOnDispose.add(t.onDidChangeModelLanguage((()=>this._update()))),this._callOnDispose.add(i.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((({range:t})=>this._trigger(t))))}_trigger(t){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(KX,this.editor,t,2,kO.None,ye.None,!1).catch(Oi))}};I7.ID="editor.contrib.formatOnPaste",I7=M7([S7(1,jA),S7(2,Oa)],I7);Bu(F7.ID,F7,2),Bu(I7.ID,I7,2),Cu(class extends vu{constructor(){super({id:"editor.action.formatDocument",label:st(0,"Format Document"),alias:"Format Document",precondition:gl.and(QC.notInCompositeEditor,QC.writable,QC.hasDocumentFormattingProvider),kbOpts:{kbExpr:QC.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(t,i){if(i.hasModel()){const e=t.get(Oa);await t.get(xO).showWhile(e.invokeFunction(XX,i,1,kO.None,ye.None,!0),250)}}}),Cu(class extends vu{constructor(){super({id:"editor.action.formatSelection",label:st(0,"Format Selection"),alias:"Format Selection",precondition:gl.and(QC.writable,QC.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2084),weight:100},contextMenuOpts:{when:QC.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(t,i){if(!i.hasModel())return;const e=t.get(Oa),s=i.getModel(),n=i.getSelections().map((t=>t.isEmpty()?new Es(t.startLineNumber,1,t.startLineNumber,s.getLineMaxColumn(t.startLineNumber)):t));await t.get(xO).showWhile(e.invokeFunction(KX,i,n,1,kO.None,ye.None,!0),250)}}),Xa.registerCommand("editor.action.format",(async t=>{const i=t.get(Ua).getFocusedCodeEditor();if(!i||!i.hasModel())return;const e=t.get($a);i.getSelection().isEmpty()?await e.executeCommand("editor.action.formatDocument"):await e.executeCommand("editor.action.formatSelection")}));var L7=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},R7=function(t,i){return function(e,s){i(e,s,t)}};class T7{remove(){var t;(t=this.parent)===null||t===void 0||t.children.delete(this.id)}static findId(t,i){let e;typeof t=="string"?e=`${i.id}/${t}`:(e=`${i.id}/${t.name}`,i.children.get(e)!==void 0&&(e=`${i.id}/${t.name}_${t.range.startLineNumber}_${t.range.startColumn}`));let s=e;for(let t=0;i.children.get(s)!==void 0;t++)s=`${e}_${t}`;return s}static empty(t){return t.children.size===0}}class N7 extends T7{constructor(t,i,e){super(),this.id=t,this.parent=i,this.symbol=e,this.children=new Map}}class Q7 extends T7{constructor(t,i,e,s){super(),this.id=t,this.parent=i,this.label=e,this.order=s,this.children=new Map}}class O7 extends T7{static create(t,i,e){const s=new xe(e),n=new O7(i.uri),o=t.ordered(i),r=o.map(((t,e)=>{var o;const r=T7.findId(`provider_${e}`,n),h=new Q7(r,n,(o=t.displayName)!==null&&o!==void 0?o:"Unknown Outline Provider",e);return Promise.resolve(t.provideDocumentSymbols(i,s.token)).then((t=>{for(const i of t||[])O7._makeOutlineElement(i,h);return h}),(t=>(zi(t),h))).then((t=>{T7.empty(t)?t.remove():n._groups.set(r,t)}))})),c=t.onDidChange((()=>{h(t.ordered(i),o)||s.cancel()}));return Promise.all(r).then((()=>s.token.isCancellationRequested&&!e.isCancellationRequested?O7.create(t,i,e):n._compact())).finally((()=>{s.dispose(),c.dispose(),s.dispose()}))}static _makeOutlineElement(t,i){const e=T7.findId(t,i),s=new N7(e,i,t);if(t.children)for(const i of t.children)O7._makeOutlineElement(i,s);i.children.set(s.id,s)}constructor(t){super(),this.uri=t,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let t=0;for(const[i,e]of this._groups)e.children.size===0?this._groups.delete(i):t+=1;if(t!==1)this.children=this._groups;else{const t=Wt.first(this._groups.values());for(const[,i]of t.children)i.parent=this,this.children.set(i.id,i)}return this}getTopLevelSymbols(){const t=[];for(const i of this.children.values())i instanceof N7?t.push(i.symbol):t.push(...Wt.map(i.children.values(),(t=>t.symbol)));return t.sort(((t,i)=>Es.compareRangesUsingStarts(t.range,i.range)))}asListOfDocumentSymbols(){const t=this.getTopLevelSymbols(),i=[];return O7._flattenDocumentSymbols(i,t,""),i.sort(((t,i)=>Cs.compare(Es.getStartPosition(t.range),Es.getStartPosition(i.range))||Cs.compare(Es.getEndPosition(i.range),Es.getEndPosition(t.range))))}static _flattenDocumentSymbols(t,i,e){for(const s of i)t.push({kind:s.kind,tags:s.tags,name:s.name,detail:s.detail,containerName:s.containerName||e,range:s.range,selectionRange:s.selectionRange,children:void 0}),s.children&&O7._flattenDocumentSymbols(t,s.children,s.name)}}const z7=za("IOutlineModelService");let U7=class{constructor(t,i,e){this._languageFeaturesService=t,this._disposables=new Zi,this._cache=new Kf(10,.7),this._debounceInformation=i.for(t.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(e.onModelRemoved((t=>{this._cache.delete(t.id)})))}dispose(){this._disposables.dispose()}async getOrCreate(t,i){const e=this._languageFeaturesService.documentSymbolProvider,s=e.ordered(t);let n=this._cache.get(t.id);if(!n||n.versionId!==t.getVersionId()||!h(n.provider,s)){const i=new xe;n={versionId:t.getVersionId(),provider:s,promiseCnt:0,source:i,promise:O7.create(e,t,i.token),model:void 0},this._cache.set(t.id,n);const o=Date.now();n.promise.then((i=>{n.model=i,this._debounceInformation.update(t,Date.now()-o)})).catch((i=>{this._cache.delete(t.id)}))}if(n.model)return n.model;n.promiseCnt+=1;const o=i.onCancellationRequested((()=>{--n.promiseCnt==0&&(n.source.cancel(),this._cache.delete(t.id))}));try{return await n.promise}finally{o.dispose()}}};U7=L7([R7(0,jA),R7(1,dR),R7(2,Ha)],U7),Hd(z7,U7,1),Xa.registerCommand("_executeDocumentSymbolProvider",(async function(t,...i){const[e]=i;Y(fs.isUri(e));const s=t.get(z7),n=t.get(Pa),o=await n.createModelReference(e);try{return(await s.getOrCreate(o.object.textEditorModel,ye.None)).getTopLevelSymbols()}finally{o.dispose()}}));class H7 extends te{constructor(t,i){super(),this.contextKeyService=t,this.model=i,this.inlineCompletionVisible=H7.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=H7.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=H7.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=H7.suppressSuggestions.bindTo(this.contextKeyService),this._register(Zz((t=>{const i=this.model.read(t),e=i==null?void 0:i.state.read(t),s=!!(e!=null&&e.inlineCompletion)&&(e==null?void 0:e.primaryGhostText)!==void 0&&!(e!=null&&e.primaryGhostText.isEmpty());this.inlineCompletionVisible.set(s),e!=null&&e.primaryGhostText&&(e!=null&&e.inlineCompletion)&&this.suppressSuggestions.set(e.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)}))),this._register(Zz((t=>{const i=this.model.read(t);let e=!1,s=!0;const n=i==null?void 0:i.primaryGhostText.read(t);if(i!=null&&i.selectedSuggestItem&&n&&n.parts.length>0){const{column:t,lines:o}=n.parts[0],r=o[0];if(t<=i.textModel.getLineIndentColumn(n.lineNumber)){let t=so(r);t===-1&&(t=r.length-1),e=t>0;const n=i.textModel.getOptions().tabSize;s=Ey.visibleColumnFromColumn(r,t+1,n)<n}}this.inlineCompletionSuggestsIndentation.set(e),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(s)})))}}H7.inlineSuggestionVisible=new Tl("inlineSuggestionVisible",!1,st(0,"Whether an inline suggestion is visible")),H7.inlineSuggestionHasIndentation=new Tl("inlineSuggestionHasIndentation",!1,st(0,"Whether the inline suggestion starts with whitespace")),H7.inlineSuggestionHasIndentationLessThanTabSize=new Tl("inlineSuggestionHasIndentationLessThanTabSize",!0,st(0,"Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),H7.suppressSuggestions=new Tl("inlineSuggestionSuppressSuggestions",void 0,st(0,"Whether suggestions should be suppressed for the current suggestion"));class P7{constructor(t,i){this.lineNumber=t,this.parts=i}equals(t){return this.lineNumber===t.lineNumber&&this.parts.length===t.parts.length&&this.parts.every(((i,e)=>i.equals(t.parts[e])))}renderForScreenReader(t){if(this.parts.length===0)return"";const i=this.parts[this.parts.length-1],e=t.substr(0,i.column-1);return new wK([...this.parts.map((t=>new mK(Es.fromPositions(new Cs(1,t.column)),t.lines.join(`\n`))))]).applyToString(e).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every((t=>t.lines.length===0))}get lineCount(){return 1+this.parts.reduce(((t,i)=>t+i.lines.length-1),0)}}class j7{constructor(t,i,e){this.column=t,this.text=i,this.preview=e,this.lines=eo(this.text)}equals(t){return this.column===t.column&&this.lines.length===t.lines.length&&this.lines.every(((i,e)=>i===t.lines[e]))}}class W7{constructor(t,i,e,s=0){this.lineNumber=t,this.columnRange=i,this.text=e,this.additionalReservedLineCount=s,this.parts=[new j7(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=eo(this.text)}renderForScreenReader(t){return this.newLines.join(`\n`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every((t=>t.lines.length===0))}equals(t){return this.lineNumber===t.lineNumber&&this.columnRange.equals(t.columnRange)&&this.newLines.length===t.newLines.length&&this.newLines.every(((i,e)=>i===t.newLines[e]))&&this.additionalReservedLineCount===t.additionalReservedLineCount}}function Y7(t,i){return h(t,i,_7)}function _7(t,i){return t===i||!(!t||!i)&&(t instanceof P7&&i instanceof P7||t instanceof W7&&i instanceof W7)&&t.equals(i)}const V7=[];class J7{constructor(t,i){if(this.startColumn=t,this.endColumnExclusive=i,t>i)throw new Ji(`startColumn ${t} cannot be after endColumnExclusive ${i}`)}toRange(t){return new Es(t,this.startColumn,t,this.endColumnExclusive)}equals(t){return this.startColumn===t.startColumn&&this.endColumnExclusive===t.endColumnExclusive}}function G7(t,i){const e=new Zi,s=t.createDecorationsCollection();return e.add(tU({debugName:()=>`Apply decorations from ${i.debugName}`},(t=>{const e=i.read(t);s.set(e)}))),e.add({dispose:()=>{s.clear()}}),e}function K7(t,i){return new Cs(t.lineNumber-i.lineNumber+1,t.lineNumber-i.lineNumber==0?t.column-i.column+1:t.column)}var $7=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},X7=function(t,i){return function(e,s){i(e,s,t)}};const q7="ghost-text";let Z7=class extends te{constructor(t,i,e){super(),this.editor=t,this.model=i,this.languageService=e,this.isDisposed=Wz(this,!1),this.currentTextModel=rU(this.editor.onDidChangeModel,(()=>this.editor.getModel())),this.uiState=Gz(this,(t=>{if(this.isDisposed.read(t))return;const i=this.currentTextModel.read(t);if(i!==this.model.targetTextModel.read(t))return;const e=this.model.ghostText.read(t);if(!e)return;const s=e instanceof W7?e.columnRange:void 0,n=[],o=[];function r(t,i){if(o.length>0){const e=o[o.length-1];i&&e.decorations.push(new cp(e.content.length+1,e.content.length+1+t[0].length,i,0)),e.content+=t[0],t=t.slice(1)}for(const e of t)o.push({content:e,decorations:i?[new cp(1,e.length+1,i,0)]:[]})}const h=i.getLineContent(e.lineNumber);let c,a=0;for(const t of e.parts){let i=t.lines;c===void 0?(n.push({column:t.column,text:i[0],preview:t.preview}),i=i.slice(1)):r([h.substring(a,t.column-1)],void 0),i.length>0&&(r(i,q7),c===void 0&&t.column<=h.length&&(c=t.column)),a=t.column-1}c!==void 0&&r([h.substring(a)],void 0);const l=c!==void 0?new J7(c,h.length+1):void 0;return{replacedRange:s,inlineTexts:n,additionalLines:o,hiddenRange:l,lineNumber:e.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(t),targetTextModel:i}})),this.decorations=Gz(this,(t=>{const i=this.uiState.read(t);if(!i)return[];const e=[];i.replacedRange&&e.push({range:i.replacedRange.toRange(i.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),i.hiddenRange&&e.push({range:i.hiddenRange.toRange(i.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const t of i.inlineTexts)e.push({range:Es.fromPositions(new Cs(i.lineNumber,t.column)),options:{description:q7,after:{content:t.text,inlineClassName:t.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:sg.Left},showIfCollapsed:!0}});return e})),this.additionalLinesWidget=this._register(new ttt(this.editor,this.languageService.languageIdCodec,Gz((t=>{const i=this.uiState.read(t);return i?{lineNumber:i.lineNumber,additionalLines:i.additionalLines,minReservedLineCount:i.additionalReservedLineCount,targetTextModel:i.targetTextModel}:void 0})))),this._register(qi((()=>{this.isDisposed.set(!0,void 0)}))),this._register(G7(this.editor,this.decorations))}ownsViewZone(t){return this.additionalLinesWidget.viewZoneId===t}};Z7=$7([X7(2,Od)],Z7);class ttt extends te{get viewZoneId(){return this._viewZoneId}constructor(t,i,e){super(),this.editor=t,this.languageIdCodec=i,this.lines=e,this._viewZoneId=void 0,this.editorOptionsChanged=cU("editorOptionChanged",he.filter(this.editor.onDidChangeConfiguration,(t=>t.hasChanged(33)||t.hasChanged(117)||t.hasChanged(99)||t.hasChanged(94)||t.hasChanged(51)||t.hasChanged(50)||t.hasChanged(67)))),this._register(Zz((t=>{const i=this.lines.read(t);this.editorOptionsChanged.read(t),i?this.updateLines(i.lineNumber,i.additionalLines,i.minReservedLineCount):this.clear()})))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones((t=>{this._viewZoneId&&(t.removeZone(this._viewZoneId),this._viewZoneId=void 0)}))}updateLines(t,i,e){const s=this.editor.getModel();if(!s)return;const{tabSize:n}=s.getOptions();this.editor.changeViewZones((s=>{this._viewZoneId&&(s.removeZone(this._viewZoneId),this._viewZoneId=void 0);const o=Math.max(i.length,e);if(o>0){const e=document.createElement("div");(function(t,i,e,s,n){const o=s.get(33),r=s.get(117),h="none",c=s.get(94),a=s.get(51),l=s.get(50),u=s.get(67),d=new wd(1e4);d.appendString('<div class="suggest-preview-text">');for(let t=0,s=e.length;t<s;t++){const s=e[t],f=s.content;d.appendString('<div class="view-line'),d.appendString('" style="top:'),d.appendString(String(t*u)),d.appendString('px;width:1000000px;">');const g=So(f),A=Do(f),p=rp.createEmpty(f,n);mp(new gp(l.isMonospace&&!o,l.canUseHalfwidthRightwardsArrow,f,!1,g,A,0,p,s.decorations,i,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,r,h,c,a!==wi.OFF,null),d),d.appendString("</div>")}d.appendString("</div>"),Da(t,l);const f=d.build(),g=itt?itt.createHTML(f):f;t.innerHTML=g})(e,n,i,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=s.addZone({afterLineNumber:t,heightInLines:o,domNode:e,afterColumnAffinity:1})}}))}}const itt=Yu("editorGhostText",{createHTML:t=>t});class ett{constructor(t){this.lines=t,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(t){return this.lines[t-1].getLineContent().length}}async function stt(t,i,e,s,n=ye.None,o){const r=function(t,i){const e=i.getWordAtPosition(t),s=i.getLineMaxColumn(t.lineNumber);return e?new Es(t.lineNumber,e.startColumn,t.lineNumber,s):Es.fromPositions(t,t.with(void 0,s))}(i,e),h=t.all(e),c=new Xf;for(const t of h)t.groupId&&c.add(t.groupId,t);function a(t){if(!t.yieldsToGroupIds)return[];const i=[];for(const e of t.yieldsToGroupIds||[]){const t=c.get(e);for(const e of t)i.push(e)}return i}const l=new Map,u=new Set;function d(t,i){if(i=[...i,t],u.has(t))return i;u.add(t);try{const e=a(t);for(const t of e){const e=d(t,i);if(e)return e}}finally{u.delete(t)}}function f(t){const o=l.get(t);if(o)return o;const r=d(t,[]);r&&zi(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${r.map((t=>t.toString?t.toString():""+t)).join(" -> ")}`));const h=new Fr;return l.set(t,h.p),(async()=>{if(!r){const i=a(t);for(const t of i){const i=await f(t);if(i&&i.items.length>0)return}}try{return await t.provideInlineCompletions(e,i,s,n)}catch(t){return void zi(t)}})().then((t=>h.complete(t)),(t=>h.error(t))),h.p}const g=await Promise.all(h.map((async t=>({provider:t,completions:await f(t)})))),A=new Map,p=[];for(const t of g){const i=t.completions;if(!i)continue;const s=new ott(i,t.provider);p.push(s);for(const t of i.items){const i=rtt.from(t,s,r,e,o);A.set(i.hash(),i)}}return new ntt(Array.from(A.values()),new Set(A.keys()),p)}class ntt{constructor(t,i,e){this.completions=t,this.hashs=i,this.providerResults=e}has(t){return this.hashs.has(t.hash())}dispose(){for(const t of this.providerResults)t.removeRef()}}class ott{constructor(t,i){this.inlineCompletions=t,this.provider=i,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class rtt{static from(t,i,e,s,n){let o,r,h=t.range?Es.lift(t.range):e;if(typeof t.insertText=="string"){if(o=t.insertText,n&&t.completeBracketPairs){o=htt(o,h.getStartPosition(),s,n);const i=o.length-t.insertText.length;i!==0&&(h=new Es(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn+i))}r=void 0}else if("snippet"in t.insertText){const i=t.insertText.snippet.length;if(n&&t.completeBracketPairs){t.insertText.snippet=htt(t.insertText.snippet,h.getStartPosition(),s,n);const e=t.insertText.snippet.length-i;e!==0&&(h=new Es(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn+e))}const e=(new C0).parse(t.insertText.snippet);e.children.length===1&&e.children[0]instanceof A0?(o=e.children[0].value,r=void 0):(o=e.toString(),r={snippet:t.insertText.snippet,range:h})}else jl();return new rtt(o,t.command,h,o,r,t.additionalTextEdits||V7,t,i)}constructor(t,i,e,s,n,o,r,h){this.filterText=t,this.command=i,this.range=e,this.insertText=s,this.snippetInfo=n,this.additionalTextEdits=o,this.sourceInlineCompletion=r,this.source=h,s=(t=t.replace(/\r\n|\r/g,`\n`)).replace(/\r\n|\r/g,`\n`)}withRange(t){return new rtt(this.filterText,this.command,t,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}}function htt(t,i,e,s){const n=e.getLineContent(i.lineNumber).substring(0,i.column-1)+t,o=e.tokenization.tokenizeLineWithEdit(i,n.length-(i.column-1),t),r=o==null?void 0:o.sliceAndInflate(i.column-1,n.length,0);return r?function(t,i){const e=new BD,s=new YD(e,(t=>i.getLanguageConfiguration(t))),n=XD(new HD(new ett([t]),s),[],void 0,!0);let o="";const r=t.getLineContent();return function t(i,e){if(i.kind===2)if(t(i.openingBracket,e),e=uD(e,i.openingBracket.length),i.child&&(t(i.child,e),e=uD(e,i.child.length)),i.closingBracket)t(i.closingBracket,e),e=uD(e,i.closingBracket.length);else{const t=s.getSingleLanguageBracketTokens(i.openingBracket.languageId).findClosingTokenText(i.openingBracket.bracketIds);o+=t}else if(i.kind!==3){if(i.kind===0||i.kind===1)o+=r.substring(e,uD(e,i.length));else if(i.kind===4)for(const s of i.children)t(s,e),e=uD(e,s.length)}}(n,rD),o}(r,s):t}function ctt(t,i,e){const s=e?t.range.intersectRanges(e):t.range;if(!s)return t;const n=i.getValueInRange(s,1),o=po(n,t.text),r=oD.ofText(n.substring(0,o)).addToPosition(t.range.getStartPosition()),h=t.text.substring(o),c=Es.fromPositions(r,t.range.getEndPosition());return new mK(c,h)}function att(t,i){return t.text.startsWith(i.text)&&(e=t.range,(s=i.range).getStartPosition().equals(e.getStartPosition())&&s.getEndPosition().isBeforeOrEqual(e.getEndPosition()));var e,s}function ltt(t,i,e,s,n=0){let o=ctt(t,i);if(o.range.endLineNumber!==o.range.startLineNumber)return;const r=i.getLineContent(o.range.startLineNumber),h=no(r).length;if(o.range.startColumn-1<=h){const t=no(o.text).length,i=r.substring(o.range.startColumn-1,h),[e,s]=[o.range.getStartPosition(),o.range.getEndPosition()],n=e.column+i.length<=s.column?e.delta(0,i.length):s,c=Es.fromPositions(n,s),a=o.text.startsWith(i)?o.text.substring(i.length):o.text.substring(t);o=new mK(c,a)}const c=i.getValueInRange(o.range),a=function(t,i){if((utt==null?void 0:utt.originalValue)===t&&(utt==null?void 0:utt.newValue)===i)return utt==null?void 0:utt.changes;{let e=ftt(t,i,!0);if(e){const s=dtt(e);if(s>0){const n=ftt(t,i,!1);n&&dtt(n)<s&&(e=n)}}return utt={originalValue:t,newValue:i,changes:e},e}}(c,o.text);if(!a)return;const l=o.range.startLineNumber,u=new Array;if(e==="prefix"){const t=a.filter((t=>t.originalLength===0));if(t.length>1||t.length===1&&t[0].originalStart!==c.length)return}const d=o.text.length-n;for(const t of a){const i=o.range.startColumn+t.originalStart+t.originalLength;if(e==="subwordSmart"&&s&&s.lineNumber===o.range.startLineNumber&&i<s.column||t.originalLength>0)return;if(t.modifiedLength===0)continue;const n=t.modifiedStart+t.modifiedLength,r=Math.max(t.modifiedStart,Math.min(n,d)),h=o.text.substring(t.modifiedStart,r),c=o.text.substring(r,Math.max(t.modifiedStart,n));h.length>0&&u.push(new j7(i,h,!1)),c.length>0&&u.push(new j7(i,c,!0))}return new P7(l,u)}let utt;function dtt(t){let i=0;for(const e of t)i+=e.originalLength;return i}function ftt(t,i,e){if(t.length>5e3||i.length>5e3)return;function s(t){let i=0;for(let e=0,s=t.length;e<s;e++){const s=t.charCodeAt(e);s>i&&(i=s)}return i}const n=Math.max(s(t),s(i));function o(t){if(t<0)throw new Error("unexpected");return n+t+1}function r(t){let i=0,s=0;const n=new Int32Array(t.length);for(let r=0,h=t.length;r<h;r++)if(e&&t[r]==="("){const t=100*s+i;n[r]=o(2*t),i++}else if(e&&t[r]===")"){i=Math.max(i-1,0);const t=100*s+i;n[r]=o(2*t+1),i===0&&s++}else n[r]=t.charCodeAt(r);return n}const h=r(t),c=r(i);return new Sf({getElements:()=>h},{getElements:()=>c}).ComputeDiff(!1).changes}var gtt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Att=function(t,i){return function(e,s){i(e,s,t)}};let ptt=class extends te{constructor(t,i,e,s,n){super(),this.textModel=t,this.versionId=i,this._debounceValue=e,this.languageFeaturesService=s,this.languageConfigurationService=n,this._updateOperation=this._register(new ie),this.inlineCompletions=_z("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=_z("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent((()=>{this._updateOperation.clear()})))}fetch(t,i,e){var s,n;const o=new wtt(t,i,this.textModel.getVersionId()),r=i.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(!((s=this._updateOperation.value)===null||s===void 0)&&s.request.satisfies(o))return this._updateOperation.value.promise;if(!((n=r.get())===null||n===void 0)&&n.request.satisfies(o))return Promise.resolve(!0);const h=!!this._updateOperation.value;this._updateOperation.clear();const c=new xe,a=(async()=>{var s,n;if((h||i.triggerKind===Qs.Automatic)&&await(s=this._debounceValue.get(this.textModel),n=c.token,new Promise((t=>{let i;const e=setTimeout((()=>{i&&i.dispose(),t()}),s);n&&(i=n.onCancellationRequested((()=>{clearTimeout(e),i&&i.dispose(),t()})))}))),c.token.isCancellationRequested||this.textModel.getVersionId()!==o.versionId)return!1;const a=new Date,l=await stt(this.languageFeaturesService.inlineCompletionsProvider,t,this.textModel,i,c.token,this.languageConfigurationService);if(c.token.isCancellationRequested||this.textModel.getVersionId()!==o.versionId)return!1;const u=new Date;this._debounceValue.update(this.textModel,u.getTime()-a.getTime());const d=new vtt(l,o,this.textModel,this.versionId);if(e){const i=e.toInlineCompletion(void 0);e.canBeReused(this.textModel,t)&&!l.has(i)&&d.prepend(e.inlineCompletion,i.range,!0)}return this._updateOperation.clear(),Uz((t=>{r.set(d,t)})),!0})(),l=new mtt(o,c,a);return this._updateOperation.value=l,a}clear(t){this._updateOperation.clear(),this.inlineCompletions.set(void 0,t),this.suggestWidgetInlineCompletions.set(void 0,t)}clearSuggestWidgetInlineCompletions(t){var i;!((i=this._updateOperation.value)===null||i===void 0)&&i.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,t)}cancelUpdate(){this._updateOperation.clear()}};ptt=gtt([Att(3,jA),Att(4,uf)],ptt);class wtt{constructor(t,i,e){this.position=t,this.context=i,this.versionId=e}satisfies(t){return this.position.equals(t.position)&&function(t,i,e){return!t||!i?t===i:e(t,i)}(this.context.selectedSuggestionInfo,t.context.selectedSuggestionInfo,((t,i)=>t.equals(i)))&&(t.context.triggerKind===Qs.Automatic||this.context.triggerKind===Qs.Explicit)&&this.versionId===t.versionId}}class mtt{constructor(t,i,e){this.request=t,this.cancellationTokenSource=i,this.promise=e}dispose(){this.cancellationTokenSource.cancel()}}class vtt{get inlineCompletions(){return this._inlineCompletions}constructor(t,i,e,s){this.inlineCompletionProviderResult=t,this.request=i,this.textModel=e,this.versionId=s,this._refCount=1,this._prependedInlineCompletionItems=[],this._rangeVersionIdValue=0,this._rangeVersionId=Gz(this,(t=>{this.versionId.read(t);let i=!1;for(const t of this._inlineCompletions)i=i||t._updateRange(this.textModel);return i&&this._rangeVersionIdValue++,this._rangeVersionIdValue}));const n=e.deltaDecorations([],t.completions.map((t=>({range:t.range,options:{description:"inline-completion-tracking-range"}}))));this._inlineCompletions=t.completions.map(((t,i)=>new btt(t,n[i],this._rangeVersionId)))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout((()=>{this.textModel.isDisposed()||this.textModel.deltaDecorations(this._inlineCompletions.map((t=>t.decorationId)),[])}),0),this.inlineCompletionProviderResult.dispose();for(const t of this._prependedInlineCompletionItems)t.source.removeRef()}}prepend(t,i,e){e&&t.source.addRef();const s=this.textModel.deltaDecorations([],[{range:i,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new btt(t,s,this._rangeVersionId,i)),this._prependedInlineCompletionItems.push(t)}}class btt{get forwardStable(){var t;return(t=this.inlineCompletion.source.inlineCompletions.enableForwardStability)!==null&&t!==void 0&&t}constructor(t,i,e,s){this.inlineCompletion=t,this.decorationId=i,this.rangeVersion=e,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._isValid=!0,this._updatedRange=s??t.range}toInlineCompletion(t){return this.inlineCompletion.withRange(this._getUpdatedRange(t))}toSingleTextEdit(t){return new mK(this._getUpdatedRange(t),this.inlineCompletion.insertText)}isVisible(t,i,e){const s=ctt(this._toFilterTextReplacement(e),t);if(!this._isValid||!this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(e).getStartPosition())||i.lineNumber!==s.range.startLineNumber)return!1;const n=t.getValueInRange(s.range,1),o=s.text,r=Math.max(0,i.column-s.range.startColumn);let h=o.substring(0,r),c=o.substring(r),a=n.substring(0,r),l=n.substring(r);const u=t.getLineIndentColumn(s.range.startLineNumber);return s.range.startColumn<=u&&(a=a.trimStart(),a.length===0&&(l=l.trimStart()),h=h.trimStart(),h.length===0&&(c=c.trimStart())),h.startsWith(a)&&!!QT(l,c)}canBeReused(t,i){return this._isValid&&this._getUpdatedRange(void 0).containsPosition(i)&&this.isVisible(t,i,void 0)&&!this._isSmallerThanOriginal(void 0)}_toFilterTextReplacement(t){return new mK(this._getUpdatedRange(t),this.inlineCompletion.filterText)}_isSmallerThanOriginal(t){return ytt(this._getUpdatedRange(t)).isBefore(ytt(this.inlineCompletion.range))}_getUpdatedRange(t){return this.rangeVersion.read(t),this._updatedRange}_updateRange(t){const i=t.getDecorationRange(this.decorationId);return i?!this._updatedRange.equalsRange(i)&&(this._updatedRange=i,!0):(this._isValid=!1,!0)}}function ytt(t){return t.startLineNumber===t.endLineNumber?new Cs(1,1+t.endColumn-t.startColumn):new Cs(1+t.endLineNumber-t.startLineNumber,t.endColumn)}const ktt={Visible:_6,HasFocusedSuggestion:new Tl("suggestWidgetHasFocusedSuggestion",!1,st(0,"Whether any suggestion is focused")),DetailsVisible:new Tl("suggestWidgetDetailsVisible",!1,st(0,"Whether suggestion details are visible")),MultipleSuggestions:new Tl("suggestWidgetMultipleSuggestions",!1,st(0,"Whether there are multiple suggestions to pick from")),MakesTextEdit:new Tl("suggestionMakesTextEdit",!0,st(0,"Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new Tl("acceptSuggestionOnEnter",!0,st(0,"Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new Tl("suggestionHasInsertAndReplaceRange",!1,st(0,"Whether the current suggestion has insert and replace behaviour")),InsertMode:new Tl("suggestionInsertMode",void 0,{type:"string",description:st(0,"Whether the default behaviour is to insert or replace")}),CanResolve:new Tl("suggestionCanResolve",!1,st(0,"Whether the current suggestion supports to resolve further details"))},xtt=new tu("suggestWidgetStatusBar");class Ctt{constructor(t,i,e,s){var n;this.position=t,this.completion=i,this.container=e,this.provider=s,this.isInvalid=!1,this.score=mN.Default,this.distance=0,this.textLabel=typeof i.label=="string"?i.label:(n=i.label)===null||n===void 0?void 0:n.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=i.sortText&&i.sortText.toLowerCase(),this.filterTextLow=i.filterText&&i.filterText.toLowerCase(),this.extensionId=i.extensionId,Es.isIRange(i.range)?(this.editStart=new Cs(i.range.startLineNumber,i.range.startColumn),this.editInsertEnd=new Cs(i.range.endLineNumber,i.range.endColumn),this.editReplaceEnd=new Cs(i.range.endLineNumber,i.range.endColumn),this.isInvalid=this.isInvalid||Es.spansMultipleLines(i.range)||i.range.startLineNumber!==t.lineNumber):(this.editStart=new Cs(i.range.insert.startLineNumber,i.range.insert.startColumn),this.editInsertEnd=new Cs(i.range.insert.endLineNumber,i.range.insert.endColumn),this.editReplaceEnd=new Cs(i.range.replace.endLineNumber,i.range.replace.endColumn),this.isInvalid=this.isInvalid||Es.spansMultipleLines(i.range.insert)||Es.spansMultipleLines(i.range.replace)||i.range.insert.startLineNumber!==t.lineNumber||i.range.replace.startLineNumber!==t.lineNumber||i.range.insert.startColumn!==i.range.replace.startColumn),typeof s.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(t){if(!this._resolveCache){const i=t.onCancellationRequested((()=>{this._resolveCache=void 0,this._resolveDuration=void 0})),e=new re(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,t)).then((t=>{Object.assign(this.completion,t),this._resolveDuration=e.elapsed()}),(t=>{Pi(t)&&(this._resolveCache=void 0,this._resolveDuration=void 0)})).finally((()=>{i.dispose()}))}return this._resolveCache}}class Ett{constructor(t=2,i=new Set,e=new Set,s=new Map,n=!0){this.snippetSortOrder=t,this.kindFilter=i,this.providerFilter=e,this.providerItemsToReuse=s,this.showDeprecated=n}}Ett.default=new Ett;class Btt{constructor(t,i,e,s){this.items=t,this.needsClipboard=i,this.durations=e,this.disposable=s}}async function Dtt(t,i,e,s=Ett.default,n={triggerKind:0},o=ye.None){const r=new re;e=e.clone();const h=i.getWordAtPosition(e),c=h?new Es(e.lineNumber,h.startColumn,e.lineNumber,h.endColumn):Es.fromPositions(e),a={replace:c,insert:c.setEndPosition(e.lineNumber,e.column)},l=[],u=new Zi,d=[];let f=!1;const g=(t,i,n)=>{var o,r,h;let c=!1;if(!i)return c;for(const n of i.suggestions)if(!s.kindFilter.has(n.kind)){if(!s.showDeprecated&&(!((o=n==null?void 0:n.tags)===null||o===void 0)&&o.includes(1)))continue;n.range||(n.range=a),n.sortText||(n.sortText=typeof n.label=="string"?n.label:n.label.label),!f&&n.insertTextRules&&4&n.insertTextRules&&(f=C0.guessNeedsClipboard(n.insertText)),l.push(new Ctt(e,n,i,t)),c=!0}return Ki(i)&&u.add(i),d.push({providerName:(r=t._debugDisplayName)!==null&&r!==void 0?r:"unknown_provider",elapsedProvider:(h=i.duration)!==null&&h!==void 0?h:-1,elapsedOverall:n.elapsed()}),c},A=(async()=>{})();for(const r of t.orderedGroups(i)){let t=!1;if(await Promise.all(r.map((async r=>{if(s.providerItemsToReuse.has(r)){const i=s.providerItemsToReuse.get(r);return i.forEach((t=>l.push(t))),void(t=t||i.length>0)}if(!(s.providerFilter.size>0)||s.providerFilter.has(r))try{const s=new re,h=await r.provideCompletionItems(i,e,n,o);t=g(r,h,s)||t}catch(t){zi(t)}}))),t||o.isCancellationRequested)break}return await A,o.isCancellationRequested?(u.dispose(),Promise.reject(new ji)):new Btt(l.sort((p=s.snippetSortOrder,Stt.get(p))),f,{entries:d,elapsed:r.elapsed()},u);var p}function Mtt(t,i){if(t.sortTextLow&&i.sortTextLow){if(t.sortTextLow<i.sortTextLow)return-1;if(t.sortTextLow>i.sortTextLow)return 1}return t.textLabel<i.textLabel?-1:t.textLabel>i.textLabel?1:t.completion.kind-i.completion.kind}const Stt=new Map;Stt.set(0,(function(t,i){if(t.completion.kind!==i.completion.kind){if(t.completion.kind===27)return-1;if(i.completion.kind===27)return 1}return Mtt(t,i)})),Stt.set(2,(function(t,i){if(t.completion.kind!==i.completion.kind){if(t.completion.kind===27)return 1;if(i.completion.kind===27)return-1}return Mtt(t,i)})),Stt.set(1,Mtt),Xa.registerCommand("_executeCompletionItemProvider",(async(t,...i)=>{const[e,s,n,o]=i;Y(fs.isUri(e)),Y(Cs.isIPosition(s)),Y(typeof n=="string"||!n),Y(typeof o=="number"||!o);const{completionProvider:r}=t.get(jA),h=await t.get(Pa).createModelReference(e);try{const t={incomplete:!1,suggestions:[]},i=[],e=h.object.textEditorModel.validatePosition(s),c=await Dtt(r,h.object.textEditorModel,e,void 0,{triggerCharacter:n??void 0,triggerKind:n?1:0});for(const e of c.items)i.length<(o??0)&&i.push(e.resolve(ye.None)),t.incomplete=t.incomplete||e.container.incomplete,t.suggestions.push(e.completion);try{return await Promise.all(i),t}finally{setTimeout((()=>c.disposable.dispose()),100)}}finally{h.dispose()}}));class Ftt{static isAllOff(t){return t.other==="off"&&t.comments==="off"&&t.strings==="off"}static isAllOn(t){return t.other==="on"&&t.comments==="on"&&t.strings==="on"}static valueFor(t,i){switch(i){case 1:return t.comments;case 2:return t.strings;default:return t.other}}}function Itt(t,i=yt){return function(t,i=yt){return!!i&&yM(t.charCodeAt(0))&&t.charCodeAt(1)===58}(t,i)?t.charAt(0).toUpperCase()+t.slice(1):t}var Ltt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Rtt=function(t,i){return function(e,s){i(e,s,t)}};class Ttt{constructor(t){this._delegates=t}resolve(t){for(const i of this._delegates){const e=i.resolve(t);if(e!==void 0)return e}}}class Ntt{constructor(t,i,e,s){this._model=t,this._selection=i,this._selectionIdx=e,this._overtypingCapturer=s}resolve(t){const{name:i}=t;if(i==="SELECTION"||i==="TM_SELECTED_TEXT"){let i=this._model.getValueInRange(this._selection)||void 0,e=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){const t=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);t&&(i=t.value,e=t.multiline)}if(i&&e&&t.snippet){const e=no(this._model.getLineContent(this._selection.startLineNumber),0,this._selection.startColumn-1);let s=e;t.snippet.walk((i=>i!==t&&(i instanceof A0&&(s=no(eo(i.value).pop())),!0)));const n=po(s,e);i=i.replace(/(\r\n|\r|\n)(.*)/g,((t,i,e)=>`${i}${s.substr(n)}${e}`))}return i}if(i==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(i==="TM_CURRENT_WORD"){const t=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return t&&t.word||void 0}return i==="TM_LINE_INDEX"?String(this._selection.positionLineNumber-1):i==="TM_LINE_NUMBER"?String(this._selection.positionLineNumber):i==="CURSOR_INDEX"?String(this._selectionIdx):i==="CURSOR_NUMBER"?String(this._selectionIdx+1):void 0}}class Qtt{constructor(t,i){this._labelService=t,this._model=i}resolve(t){const{name:i}=t;if(i==="TM_FILENAME")return ns(this._model.uri.fsPath);if(i==="TM_FILENAME_BASE"){const t=ns(this._model.uri.fsPath),i=t.lastIndexOf(".");return i<=0?t:t.slice(0,i)}return i==="TM_DIRECTORY"?ss(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(MM(this._model.uri)):i==="TM_FILEPATH"?this._labelService.getUriLabel(this._model.uri):i==="RELATIVE_FILEPATH"?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}}class Ott{constructor(t,i,e,s){this._readClipboardText=t,this._selectionIdx=i,this._selectionCount=e,this._spread=s}resolve(t){if(t.name!=="CLIPBOARD")return;const i=this._readClipboardText();if(i){if(this._spread){const t=i.split(/\r\n|\n|\r/).filter((t=>!Jn(t)));if(t.length===this._selectionCount)return t[this._selectionIdx]}return i}}}let ztt=class{constructor(t,i,e){this._model=t,this._selection=i,this._languageConfigurationService=e}resolve(t){const{name:i}=t,e=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),s=this._languageConfigurationService.getLanguageConfiguration(e).comments;if(s)return i==="LINE_COMMENT"?s.lineCommentToken||void 0:i==="BLOCK_COMMENT_START"?s.blockCommentStartToken||void 0:i==="BLOCK_COMMENT_END"&&s.blockCommentEndToken||void 0}};ztt=Ltt([Rtt(2,uf)],ztt);class Utt{constructor(){this._date=new Date}resolve(t){const{name:i}=t;if(i==="CURRENT_YEAR")return String(this._date.getFullYear());if(i==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(i==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(i==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(i==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(i==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(i==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(i==="CURRENT_DAY_NAME")return Utt.dayNames[this._date.getDay()];if(i==="CURRENT_DAY_NAME_SHORT")return Utt.dayNamesShort[this._date.getDay()];if(i==="CURRENT_MONTH_NAME")return Utt.monthNames[this._date.getMonth()];if(i==="CURRENT_MONTH_NAME_SHORT")return Utt.monthNamesShort[this._date.getMonth()];if(i==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(i==="CURRENT_TIMEZONE_OFFSET"){const t=this._date.getTimezoneOffset(),i=t>0?"-":"+",e=Math.trunc(Math.abs(t/60)),s=e<10?"0"+e:e,n=Math.abs(t)-60*e;return i+s+":"+(n<10?"0"+n:n)}}}Utt.dayNames=[st(0,"Sunday"),st(0,"Monday"),st(0,"Tuesday"),st(0,"Wednesday"),st(0,"Thursday"),st(0,"Friday"),st(0,"Saturday")],Utt.dayNamesShort=[st(0,"Sun"),st(0,"Mon"),st(0,"Tue"),st(0,"Wed"),st(0,"Thu"),st(0,"Fri"),st(0,"Sat")],Utt.monthNames=[st(0,"January"),st(0,"February"),st(0,"March"),st(0,"April"),st(0,"May"),st(0,"June"),st(0,"July"),st(0,"August"),st(0,"September"),st(0,"October"),st(0,"November"),st(0,"December")],Utt.monthNamesShort=[st(0,"Jan"),st(0,"Feb"),st(0,"Mar"),st(0,"Apr"),st(0,"May"),st(0,"Jun"),st(0,"Jul"),st(0,"Aug"),st(0,"Sep"),st(0,"Oct"),st(0,"Nov"),st(0,"Dec")];class Htt{constructor(t){this._workspaceService=t}resolve(t){if(!this._workspaceService)return;const i=function(t,i){if(typeof t=="string"||t===void 0)return typeof t=="string"?{id:ns(t)}:i?RO:TO;const e=t;return e.configuration?{id:e.id,configPath:e.configuration}:e.folders.length===1?{id:e.id,uri:e.folders[0].uri}:{id:e.id}}(this._workspaceService.getWorkspace());return LO(i)?void 0:t.name==="WORKSPACE_NAME"?this._resolveWorkspaceName(i):t.name==="WORKSPACE_FOLDER"?this._resoveWorkspacePath(i):void 0}_resolveWorkspaceName(t){if(IO(t))return ns(t.uri.path);let i=ns(t.configPath.path);return i.endsWith(QO)&&(i=i.substr(0,i.length-14-1)),i}_resoveWorkspacePath(t){if(IO(t))return Itt(t.uri.fsPath);const i=ns(t.configPath.path);let e=t.configPath.fsPath;return e.endsWith(i)&&(e=e.substr(0,e.length-i.length-1)),e?Itt(e):"/"}}class Ptt{resolve(t){const{name:i}=t;return i==="RANDOM"?Math.random().toString().slice(-6):i==="RANDOM_HEX"?Math.random().toString(16).slice(-6):i==="UUID"?jZ():void 0}}var jtt,Wtt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Ytt=function(t,i){return function(e,s){i(e,s,t)}};class _tt{constructor(t,i,e){this._editor=t,this._snippet=i,this._snippetLineLeadingWhitespace=e,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=l(i.placeholders,w0.compareByIndex),this._placeholderGroupsIdx=-1}initialize(t){this._offset=t.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const t=this._editor.getModel();this._editor.changeDecorations((i=>{for(const e of this._snippet.placeholders){const s=this._snippet.offset(e),n=this._snippet.fullLen(e),o=Es.fromPositions(t.getPositionAt(this._offset+s),t.getPositionAt(this._offset+s+n)),r=e.isFinalTabstop?_tt._decor.inactiveFinal:_tt._decor.inactive,h=i.addDecoration(o,r);this._placeholderDecorations.set(e,h)}}))}move(t){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const t=[];for(const i of this._placeholderGroups[this._placeholderGroupsIdx])if(i.transform){const e=this._placeholderDecorations.get(i),s=this._editor.getModel().getDecorationRange(e),n=this._editor.getModel().getValueInRange(s),o=i.transform.resolve(n).split(/\r\n|\r|\n/);for(let t=1;t<o.length;t++)o[t]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+o[t]);t.push(KQ.replace(s,o.join(this._editor.getModel().getEOL())))}t.length>0&&this._editor.executeEdits("snippet.placeholderTransform",t)}let i=!1;t===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,i=!0):t===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,i=!0);const e=this._editor.getModel().changeDecorations((t=>{const e=new Set,s=[];for(const n of this._placeholderGroups[this._placeholderGroupsIdx]){const o=this._placeholderDecorations.get(n),r=this._editor.getModel().getDecorationRange(o);s.push(new Bs(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn)),i=i&&this._hasPlaceholderBeenCollapsed(n),t.changeDecorationOptions(o,n.isFinalTabstop?_tt._decor.activeFinal:_tt._decor.active),e.add(n);for(const i of this._snippet.enclosingPlaceholders(n)){const s=this._placeholderDecorations.get(i);t.changeDecorationOptions(s,i.isFinalTabstop?_tt._decor.activeFinal:_tt._decor.active),e.add(i)}}for(const[i,s]of this._placeholderDecorations)e.has(i)||t.changeDecorationOptions(s,i.isFinalTabstop?_tt._decor.inactiveFinal:_tt._decor.inactive);return s}));return i?this.move(t):e??[]}_hasPlaceholderBeenCollapsed(t){let i=t;for(;i;){if(i instanceof w0){const t=this._placeholderDecorations.get(i);if(this._editor.getModel().getDecorationRange(t).isEmpty()&&i.toString().length>0)return!0}i=i.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[t]=this._snippet.placeholders;if(t.isFinalTabstop&&this._snippet.rightMostDescendant===t)return!0}return!1}computePossibleSelections(){const t=new Map;for(const i of this._placeholderGroups){let e;for(const s of i){if(s.isFinalTabstop)break;e||(e=[],t.set(s.index,e));const i=this._placeholderDecorations.get(s),n=this._editor.getModel().getDecorationRange(i);if(!n){t.delete(s.index);break}e.push(n)}}return t}get activeChoice(){if(!this._placeholderDecorations)return;const t=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(t!=null&&t.choice))return;const i=this._placeholderDecorations.get(t);if(!i)return;const e=this._editor.getModel().getDecorationRange(i);return e?{range:e,choice:t.choice}:void 0}get hasChoice(){let t=!1;return this._snippet.walk((i=>(t=i instanceof m0,!t))),t}merge(t){const i=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((e=>{for(const s of this._placeholderGroups[this._placeholderGroupsIdx]){const n=t.shift();console.assert(n._offset!==-1),console.assert(!n._placeholderDecorations);const o=n._snippet.placeholderInfo.last.index;for(const t of n._snippet.placeholderInfo.all)t.isFinalTabstop?t.index=s.index+(o+1)/this._nestingLevel:t.index=s.index+t.index/this._nestingLevel;this._snippet.replace(s,n._snippet.children);const r=this._placeholderDecorations.get(s);e.removeDecoration(r),this._placeholderDecorations.delete(s);for(const t of n._snippet.placeholders){const s=n._snippet.offset(t),o=n._snippet.fullLen(t),r=Es.fromPositions(i.getPositionAt(n._offset+s),i.getPositionAt(n._offset+s+o)),h=e.addDecoration(r,_tt._decor.inactive);this._placeholderDecorations.set(t,h)}}this._placeholderGroups=l(this._snippet.placeholders,w0.compareByIndex)}))}}_tt._decor={active:DF.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:DF.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:DF.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:DF.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const Vtt={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Jtt=jtt=class{static adjustWhitespace(t,i,e,s,n){const o=no(t.getLineContent(i.lineNumber),0,i.column-1);let r;return s.walk((i=>{if(!(i instanceof A0)||i.parent instanceof m0||n&&!n.has(i))return!0;const h=i.value.split(/\r\n|\r|\n/);if(e){const e=s.offset(i);if(e===0)h[0]=t.normalizeIndentation(h[0]);else{r=r??s.toString();const i=r.charCodeAt(e-1);i!==10&&i!==13||(h[0]=t.normalizeIndentation(o+h[0]))}for(let i=1;i<h.length;i++)h[i]=t.normalizeIndentation(o+h[i])}const c=h.join(t.getEOL());return c!==i.value&&(i.parent.replace(i,[new A0(c)]),r=void 0),!0})),o}static adjustSelection(t,i,e,s){if(e!==0||s!==0){const{positionLineNumber:n,positionColumn:o}=i,r=o-e,h=o+s,c=t.validateRange({startLineNumber:n,startColumn:r,endLineNumber:n,endColumn:h});i=Bs.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,i.getDirection())}return i}static createEditsAndSnippetsFromSelections(t,i,e,s,n,o,r,h,c){const a=[],l=[];if(!t.hasModel())return{edits:a,snippets:l};const u=t.getModel(),d=t.invokeWithinContext((t=>t.get(FO))),f=t.invokeWithinContext((t=>new Qtt(t.get(bO),u))),g=()=>r,A=u.getValueInRange(jtt.adjustSelection(u,t.getSelection(),e,0)),p=u.getValueInRange(jtt.adjustSelection(u,t.getSelection(),0,s)),w=u.getLineFirstNonWhitespaceColumn(t.getSelection().positionLineNumber),m=t.getSelections().map(((t,i)=>({selection:t,idx:i}))).sort(((t,i)=>Es.compareRangesUsingStarts(t.selection,i.selection)));for(const{selection:r,idx:v}of m){let b=jtt.adjustSelection(u,r,e,0),y=jtt.adjustSelection(u,r,0,s);A!==u.getValueInRange(b)&&(b=r),p!==u.getValueInRange(y)&&(y=r);const k=r.setStartPosition(b.startLineNumber,b.startColumn).setEndPosition(y.endLineNumber,y.endColumn),x=(new C0).parse(i,!0,n),C=k.getStartPosition(),E=jtt.adjustWhitespace(u,C,o||v>0&&w!==u.getLineFirstNonWhitespaceColumn(r.positionLineNumber),x);x.resolveVariables(new Ttt([f,new Ott(g,v,m.length,t.getOption(79)==="spread"),new Ntt(u,r,v,h),new ztt(u,r,c),new Utt,new Htt(d),new Ptt])),a[v]=KQ.replace(k,x.toString()),a[v].identifier={major:v,minor:0},a[v]._isTracked=!0,l[v]=new _tt(t,x,E)}return{edits:a,snippets:l}}static createEditsAndSnippetsFromEdits(t,i,e,s,n,o,r){if(!t.hasModel()||i.length===0)return{edits:[],snippets:[]};const h=[],c=t.getModel(),a=new C0,l=new x0,u=new Ttt([t.invokeWithinContext((t=>new Qtt(t.get(bO),c))),new Ott((()=>n),0,t.getSelections().length,t.getOption(79)==="spread"),new Ntt(c,t.getSelection(),0,o),new ztt(c,t.getSelection(),r),new Utt,new Htt(t.invokeWithinContext((t=>t.get(FO)))),new Ptt]);i=i.sort(((t,i)=>Es.compareRangesUsingStarts(t.range,i.range)));let d=0;for(let t=0;t<i.length;t++){const{range:e,template:s}=i[t];if(t>0){const s=i[t-1].range,n=Es.fromPositions(s.getEndPosition(),e.getStartPosition()),o=new A0(c.getValueInRange(n));l.appendChild(o),d+=o.value.length}const n=a.parseFragment(s,l);jtt.adjustWhitespace(c,e.getStartPosition(),!0,l,new Set(n)),l.resolveVariables(u);const o=l.toString(),r=o.slice(d);d=o.length;const f=KQ.replace(e,r);f.identifier={major:t,minor:0},f._isTracked=!0,h.push(f)}return a.ensureFinalTabstop(l,e,!0),{edits:h,snippets:[new _tt(t,l,"")]}}constructor(t,i,e=Vtt,s){this._editor=t,this._template=i,this._options=e,this._languageConfigurationService=s,this._templateMerges=[],this._snippets=[]}dispose(){$i(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:t,snippets:i}=typeof this._template=="string"?jtt.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):jtt.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=i,this._editor.executeEdits("snippet",t,(t=>{const e=t.filter((t=>!!t.identifier));for(let t=0;t<i.length;t++)i[t].initialize(e[t].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):e.map((t=>Bs.fromPositions(t.range.getEndPosition())))})),this._editor.revealRange(this._editor.getSelections()[0])}merge(t,i=Vtt){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,t]);const{edits:e,snippets:s}=jtt.createEditsAndSnippetsFromSelections(this._editor,t,i.overwriteBefore,i.overwriteAfter,!0,i.adjustWhitespace,i.clipboardText,i.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",e,(t=>{const i=t.filter((t=>!!t.identifier));for(let t=0;t<s.length;t++)s[t].initialize(i[t].textChange);const e=s[0].isTrivialSnippet;if(!e){for(const t of this._snippets)t.merge(s);console.assert(s.length===0)}return this._snippets[0].hasPlaceholder&&!e?this._move(void 0):i.map((t=>Bs.fromPositions(t.range.getEndPosition())))}))}next(){const t=this._move(!0);this._editor.setSelections(t),this._editor.revealPositionInCenterIfOutsideViewport(t[0].getPosition())}prev(){const t=this._move(!1);this._editor.setSelections(t),this._editor.revealPositionInCenterIfOutsideViewport(t[0].getPosition())}_move(t){const i=[];for(const e of this._snippets){const s=e.move(t);i.push(...s)}return i}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const t=this._editor.getSelections();if(t.length<this._snippets.length)return!1;const i=new Map;for(const e of this._snippets){const s=e.computePossibleSelections();if(i.size===0)for(const[e,n]of s){n.sort(Es.compareRangesUsingStarts);for(const s of t)if(n[0].containsRange(s)){i.set(e,[]);break}}if(i.size===0)return!1;i.forEach(((t,i)=>{t.push(...s.get(i))}))}t.sort(Es.compareRangesUsingStarts);for(const[e,s]of i)if(s.length===t.length){s.sort(Es.compareRangesUsingStarts);for(let n=0;n<s.length;n++)s[n].containsRange(t[n])||i.delete(e)}else i.delete(e);return i.size>0}};Jtt=jtt=Wtt([Ytt(3,uf)],Jtt);var Gtt,Ktt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},$tt=function(t,i){return function(e,s){i(e,s,t)}};const Xtt={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let qtt=Gtt=class{static get(t){return t.getContribution(Gtt.ID)}constructor(t,i,e,s,n){this._editor=t,this._logService=i,this._languageFeaturesService=e,this._languageConfigurationService=n,this._snippetListener=new Zi,this._modelVersionId=-1,this._inSnippet=Gtt.InSnippetMode.bindTo(s),this._hasNextTabstop=Gtt.HasNextTabstop.bindTo(s),this._hasPrevTabstop=Gtt.HasPrevTabstop.bindTo(s)}dispose(){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(t=this._session)===null||t===void 0||t.dispose(),this._snippetListener.dispose()}insert(t,i){try{this._doInsert(t,i===void 0?Xtt:{...Xtt,...i})}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_template=",t),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(t,i){var e;if(this._editor.hasModel()){if(this._snippetListener.clear(),i.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof t!="string"&&this.cancel(),this._session?(Y(typeof t=="string"),this._session.merge(t,i)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new Jtt(this._editor,t,i,this._languageConfigurationService),this._session.insert()),i.undoStopAfter&&this._editor.getModel().pushStackElement(),(e=this._session)===null||e===void 0?void 0:e.hasChoice){const t={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(t,i)=>{if(!this._session||t!==this._editor.getModel()||!Cs.equals(this._editor.getPosition(),i))return;const{activeChoice:e}=this._session;if(!e||e.choice.options.length===0)return;const s=t.getValueInRange(e.range),n=!!e.choice.options.find((t=>t.value===s)),o=[];for(let t=0;t<e.choice.options.length;t++){const i=e.choice.options[t];o.push({kind:13,label:i.value,insertText:i.value,sortText:"a".repeat(t+1),range:e.range,filterText:n?`${s}_${i.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:st(0,"Go to next placeholder...")}})}return{suggestions:o}}},i=this._editor.getModel();let e,s=!1;const n=()=>{e==null||e.dispose(),s=!1},o=()=>{s||(e=this._languageFeaturesService.completionProvider.register({language:i.getLanguageId(),pattern:i.uri.fsPath,scheme:i.uri.scheme,exclusive:!0},t),this._snippetListener.add(e),s=!0)};this._choiceCompletions={provider:t,enable:o,disable:n}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((t=>t.isFlush&&this.cancel()))),this._snippetListener.add(this._editor.onDidChangeModel((()=>this.cancel()))),this._snippetListener.add(this._editor.onDidChangeCursorSelection((()=>this._updateState())))}}_updateState(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){var t;if(!this._session||!this._editor.hasModel())return void(this._currentChoice=void 0);const{activeChoice:i}=this._session;if(!i||!this._choiceCompletions)return(t=this._choiceCompletions)===null||t===void 0||t.disable(),void(this._currentChoice=void 0);this._currentChoice!==i.choice&&(this._currentChoice=i.choice,this._choiceCompletions.enable(),queueMicrotask((()=>{(function(t,i){var e;(e=t.getContribution("editor.contrib.suggestController"))===null||e===void 0||e.triggerSuggest((new Set).add(i),void 0,!0)})(this._editor,this._choiceCompletions.provider)})))}finish(){for(;this._inSnippet.get();)this.next()}cancel(t=!1){var i;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(i=this._session)===null||i===void 0||i.dispose(),this._session=void 0,this._modelVersionId=-1,t&&this._editor.setSelections([this._editor.getSelection()])}prev(){var t;(t=this._session)===null||t===void 0||t.prev(),this._updateState()}next(){var t;(t=this._session)===null||t===void 0||t.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};qtt.ID="snippetController2",qtt.InSnippetMode=new Tl("inSnippetMode",!1,st(0,"Whether the editor in current in snippet mode")),qtt.HasNextTabstop=new Tl("hasNextTabstop",!1,st(0,"Whether there is a next tab stop when in snippet mode")),qtt.HasPrevTabstop=new Tl("hasPrevTabstop",!1,st(0,"Whether there is a previous tab stop when in snippet mode")),qtt=Gtt=Ktt([$tt(1,au),$tt(2,jA),$tt(3,Nl),$tt(4,uf)],qtt),Bu(qtt.ID,qtt,4);const Ztt=mu.bindToContribution(qtt.get);xu(new Ztt({id:"jumpToNextSnippetPlaceholder",precondition:gl.and(qtt.InSnippetMode,qtt.HasNextTabstop),handler:t=>t.next(),kbOpts:{weight:130,kbExpr:QC.editorTextFocus,primary:2}})),xu(new Ztt({id:"jumpToPrevSnippetPlaceholder",precondition:gl.and(qtt.InSnippetMode,qtt.HasPrevTabstop),handler:t=>t.prev(),kbOpts:{weight:130,kbExpr:QC.editorTextFocus,primary:1026}})),xu(new Ztt({id:"leaveSnippet",precondition:qtt.InSnippetMode,handler:t=>t.cancel(!0),kbOpts:{weight:130,kbExpr:QC.editorTextFocus,primary:9,secondary:[1033]}})),xu(new Ztt({id:"acceptSnippet",precondition:qtt.InSnippetMode,handler:t=>t.finish()}));var tit,iit=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},eit=function(t,i){return function(e,s){i(e,s,t)}};(function(t){t[t.Undo=0]="Undo",t[t.Redo=1]="Redo",t[t.AcceptWord=2]="AcceptWord",t[t.Other=3]="Other"})(tit||(tit={}));let sit=class extends te{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(t,i,e,s,n,o,r,h,c,a,l,u){let d;super(),this.textModel=t,this.selectedSuggestItem=i,this.textModelVersionId=e,this._positions=s,this._debounceValue=n,this._suggestPreviewEnabled=o,this._suggestPreviewMode=r,this._inlineSuggestMode=h,this._enabled=c,this._instantiationService=a,this._commandService=l,this._languageConfigurationService=u,this._source=this._register(this._instantiationService.createInstance(ptt,this.textModel,this.textModelVersionId,this._debounceValue)),this._isActive=Wz(this,!1),this._forceUpdateSignal=lU("forceUpdate"),this._selectedInlineCompletionId=Wz(this,void 0),this._primaryPosition=Gz(this,(t=>{var i;return(i=this._positions.read(t)[0])!==null&&i!==void 0?i:new Cs(1,1)})),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([tit.Redo,tit.Undo,tit.AcceptWord]),this._fetchInlineCompletions=function(t,i){var e;return new qz(new Mz(t.owner,t.debugName,void 0),i,t.createEmptyChangeSummary,t.handleChange,void 0,(e=t.equalityComparer)!==null&&e!==void 0?e:Jz)}({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Qs.Automatic}),handleChange:(t,i)=>(t.didChange(this.textModelVersionId)&&this._preserveCurrentCompletionReasons.has(t.change)?i.preserveCurrentCompletion=!0:t.didChange(this._forceUpdateSignal)&&(i.inlineCompletionTriggerKind=t.change),!0)},((t,i)=>{if(this._forceUpdateSignal.read(t),!(this._enabled.read(t)&&this.selectedSuggestItem.read(t)||this._isActive.read(t)))return void this._source.cancelUpdate();this.textModelVersionId.read(t);const e=this.selectedInlineCompletion.get(),s=i.preserveCurrentCompletion||e!=null&&e.forwardStable?e:void 0,n=this._source.suggestWidgetInlineCompletions.get(),o=this.selectedSuggestItem.read(t);if(n&&!o){const t=this._source.inlineCompletions.get();Uz((i=>{(!t||n.request.versionId>t.request.versionId)&&this._source.inlineCompletions.set(n.clone(),i),this._source.clearSuggestWidgetInlineCompletions(i)}))}const r=this._primaryPosition.read(t),h={triggerKind:i.inlineCompletionTriggerKind,selectedSuggestionInfo:o==null?void 0:o.toSelectedSuggestionInfo()};return this._source.fetch(r,h,s)})),this._filteredInlineCompletionItems=Gz(this,(t=>{const i=this._source.inlineCompletions.read(t);if(!i)return[];const e=this._primaryPosition.read(t);return i.inlineCompletions.filter((i=>i.isVisible(this.textModel,e,t)))})),this.selectedInlineCompletionIndex=Gz(this,(t=>{const i=this._selectedInlineCompletionId.read(t),e=this._filteredInlineCompletionItems.read(t),s=this._selectedInlineCompletionId===void 0?-1:e.findIndex((t=>t.semanticId===i));return s===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):s})),this.selectedInlineCompletion=Gz(this,(t=>this._filteredInlineCompletionItems.read(t)[this.selectedInlineCompletionIndex.read(t)])),this.lastTriggerKind=this._source.inlineCompletions.map(this,(t=>t==null?void 0:t.request.context.triggerKind)),this.inlineCompletionsCount=Gz(this,(t=>this.lastTriggerKind.read(t)===Qs.Explicit?this._filteredInlineCompletionItems.read(t).length:void 0)),this.state=Kz({owner:this,equalityComparer:(t,i)=>t&&i?Y7(t.ghostTexts,i.ghostTexts)&&t.inlineCompletion===i.inlineCompletion&&t.suggestItem===i.suggestItem:t===i},(t=>{var i,e;const s=this.textModel,n=this.selectedSuggestItem.read(t);if(n){const o=ctt(n.toSingleTextEdit(),s),r=this._computeAugmentation(o,t);if(!this._suggestPreviewEnabled.read(t)&&!r)return;const h=(i=r==null?void 0:r.edit)!==null&&i!==void 0?i:o,c=r?r.edit.text.length-o.text.length:0,a=this._suggestPreviewMode.read(t),l=this._positions.read(t),u=[h,...nit(this.textModel,l,h)],d=u.map(((t,i)=>ltt(t,s,a,l[i],c))).filter(j);return{edits:u,primaryGhostText:(e=d[0])!==null&&e!==void 0?e:new P7(h.range.endLineNumber,[]),ghostTexts:d,inlineCompletion:r==null?void 0:r.completion,suggestItem:n}}{if(!this._isActive.read(t))return;const i=this.selectedInlineCompletion.read(t);if(!i)return;const e=i.toSingleTextEdit(t),n=this._inlineSuggestMode.read(t),o=this._positions.read(t),r=[e,...nit(this.textModel,o,e)],h=r.map(((t,i)=>ltt(t,s,n,o[i],0))).filter(j);return h[0]?{edits:r,primaryGhostText:h[0],ghostTexts:h,inlineCompletion:i,suggestItem:void 0}:void 0}})),this.ghostTexts=Kz({owner:this,equalityComparer:Y7},(t=>{const i=this.state.read(t);if(i)return i.ghostTexts})),this.primaryGhostText=Kz({owner:this,equalityComparer:_7},(t=>{const i=this.state.read(t);if(i)return i==null?void 0:i.primaryGhostText})),this._register(dU(this._fetchInlineCompletions)),this._register(Zz((t=>{var i,e;const s=this.state.read(t),n=s==null?void 0:s.inlineCompletion;if((n==null?void 0:n.semanticId)!==(d==null?void 0:d.semanticId)&&(d=n,n)){const t=n.inlineCompletion,s=t.source;(e=(i=s.provider).handleItemDidShow)===null||e===void 0||e.call(i,s.inlineCompletions,t.sourceInlineCompletion,t.insertText)}})))}async trigger(t){this._isActive.set(!0,t),await this._fetchInlineCompletions.get()}async triggerExplicitly(t){Pz(t,(t=>{this._isActive.set(!0,t),this._forceUpdateSignal.trigger(t,Qs.Explicit)})),await this._fetchInlineCompletions.get()}stop(t){Pz(t,(t=>{this._isActive.set(!1,t),this._source.clear(t)}))}_computeAugmentation(t,i){const e=this.textModel,s=this._source.suggestWidgetInlineCompletions.read(i);return function(t,i){for(const e of t){const t=i(e);if(t!==void 0)return t}}(s?s.inlineCompletions:[this.selectedInlineCompletion.read(i)].filter(j),(s=>{let n=s.toSingleTextEdit(i);return n=ctt(n,e,Es.fromPositions(n.range.getStartPosition(),t.range.getEndPosition())),att(n,t)?{completion:s,edit:n}:void 0}))}async _deltaSelectedInlineCompletionIndex(t){await this.triggerExplicitly();const i=this._filteredInlineCompletionItems.get()||[];if(i.length>0){const e=(this.selectedInlineCompletionIndex.get()+t+i.length)%i.length;this._selectedInlineCompletionId.set(i[e].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(t){var i;if(t.getModel()!==this.textModel)throw new Ji;const e=this.state.get();if(!e||e.primaryGhostText.isEmpty()||!e.inlineCompletion)return;const s=e.inlineCompletion.toInlineCompletion(void 0);if(t.pushUndoStop(),s.snippetInfo)t.executeEdits("inlineSuggestion.accept",[KQ.replaceMove(s.range,""),...s.additionalTextEdits]),t.setPosition(s.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),(i=qtt.get(t))===null||i===void 0||i.insert(s.snippetInfo.snippet,{undoStopBefore:!1});else{const i=e.edits,n=oit(i).map((t=>Bs.fromPositions(t)));t.executeEdits("inlineSuggestion.accept",[...i.map((t=>KQ.replaceMove(t.range,t.text))),...s.additionalTextEdits]),t.setSelections(n,"inlineCompletionAccept")}s.command&&s.source.addRef(),Uz((t=>{this._source.clear(t),this._isActive.set(!1,t)})),s.command&&(await this._commandService.executeCommand(s.command.id,...s.command.arguments||[]).then(void 0,zi),s.source.removeRef())}async acceptNextWord(t){await this._acceptNext(t,((t,i)=>{const e=this.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),s=this._languageConfigurationService.getLanguageConfiguration(e),n=new RegExp(s.wordDefinition.source,s.wordDefinition.flags.replace("g","")),o=i.match(n);let r=0;r=o&&o.index!==void 0?o.index===0?o[0].length:o.index:i.length;const h=/\s+/g.exec(i);return h&&h.index!==void 0&&h.index+h[0].length<r&&(r=h.index+h[0].length),r}),0)}async acceptNextLine(t){await this._acceptNext(t,((t,i)=>{const e=i.match(/\n/);return e&&e.index!==void 0?e.index+1:i.length}),1)}async _acceptNext(t,i,e){if(t.getModel()!==this.textModel)throw new Ji;const s=this.state.get();if(!s||s.primaryGhostText.isEmpty()||!s.inlineCompletion)return;const n=s.primaryGhostText,o=s.inlineCompletion.toInlineCompletion(void 0);if(o.snippetInfo||o.filterText!==o.insertText)return void await this.accept(t);const r=n.parts[0],h=new Cs(n.lineNumber,r.column),c=r.text,a=i(h,c);if(a===c.length&&n.parts.length===1)return void this.accept(t);const l=c.substring(0,a),u=this._positions.get(),d=u[0];o.source.addRef();try{this._isAcceptingPartially=!0;try{t.pushUndoStop();const i=Es.fromPositions(d,h),e=t.getModel().getValueInRange(i)+l,s=new mK(i,e),n=[s,...nit(this.textModel,u,s)],o=oit(n).map((t=>Bs.fromPositions(t)));t.executeEdits("inlineSuggestion.accept",n.map((t=>KQ.replaceMove(t.range,t.text)))),t.setSelections(o,"inlineCompletionPartialAccept")}finally{this._isAcceptingPartially=!1}if(o.source.provider.handlePartialAccept){const i=Es.fromPositions(o.range.getStartPosition(),oD.ofText(l).addToPosition(h)),s=t.getModel().getValueInRange(i,1);o.source.provider.handlePartialAccept(o.source.inlineCompletions,o.sourceInlineCompletion,s.length,{kind:e})}}finally{o.source.removeRef()}}handleSuggestAccepted(t){var i,e;const s=ctt(t.toSingleTextEdit(),this.textModel),n=this._computeAugmentation(s,void 0);if(!n)return;const o=n.completion.inlineCompletion;(e=(i=o.source.provider).handlePartialAccept)===null||e===void 0||e.call(i,o.source.inlineCompletions,o.sourceInlineCompletion,s.text.length,{kind:2})}};function nit(t,i,e){if(i.length===1)return[];const s=i[0],n=i.slice(1),o=e.range.getStartPosition(),r=e.range.getEndPosition(),h=t.getValueInRange(Es.fromPositions(s,r)),c=K7(s,o);if(c.lineNumber<1)return Oi(new Ji(`positionWithinTextEdit line number should be bigger than 0.\n\t\t\tInvalid subtraction between ${s.toString()} and ${o.toString()}`)),[];const a=function(t,i){let e="";const s=function(t){var i;const e=[],s=t.split(/(\r\n|\r|\n)/);for(let t=0;t<Math.ceil(s.length/2);t++)e.push(s[2*t]+((i=s[2*t+1])!==null&&i!==void 0?i:""));return e}(t);for(let t=i.lineNumber-1;t<s.length;t++)e+=s[t].substring(t===i.lineNumber-1?i.column-1:0);return e}(e.text,c);return n.map((i=>{const e=(s=K7(i,o),n=r,new Cs(s.lineNumber+n.lineNumber-1,n.lineNumber===1?s.column+n.column-1:n.column));var s,n;const c=t.getValueInRange(Es.fromPositions(i,e)),l=po(h,c),u=Es.fromPositions(i,i.delta(0,l));return new mK(u,a)}))}function oit(t){const i=T.createSortPermutation(t,((t,i)=>Es.compareRangesUsingStarts(t.range,i.range))),e=new wK(i.apply(t)).getNewRanges();return i.inverse().apply(e).map((t=>t.getEndPosition()))}sit=iit([eit(9,Oa),eit(10,$a),eit(11,uf)],sit);var rit,hit=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},cit=function(t,i){return function(e,s){i(e,s,t)}};class ait{constructor(t){this.name=t}select(t,i,e){if(e.length===0)return 0;const s=e[0].score[0];for(let t=0;t<e.length;t++){const{score:i,completion:n}=e[t];if(i[0]!==s)break;if(n.preselect)return t}return 0}}class lit extends ait{constructor(){super("first")}memorize(t,i,e){}toJSON(){}fromJSON(){}}let uit=rit=class{constructor(t,i){this._storageService=t,this._configService=i,this._disposables=new Zi,this._persistSoon=new Er((()=>this._saveState()),500),this._disposables.add(t.onWillSaveState((t=>{t.reason===aH.SHUTDOWN&&this._saveState()})))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(t,i,e){this._withStrategy(t,i).memorize(t,i,e),this._persistSoon.schedule()}select(t,i,e){return this._withStrategy(t,i).select(t,i,e)}_withStrategy(t,i){var e;const s=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:t.getLanguageIdAtPosition(i.lineNumber,i.column),resource:t.uri});if(((e=this._strategy)===null||e===void 0?void 0:e.name)!==s){this._saveState();const t=rit._strategyCtors.get(s)||lit;this._strategy=new t;try{const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=this._storageService.get(`${rit._storagePrefix}/${s}`,t);i&&this._strategy.fromJSON(JSON.parse(i))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${rit._storagePrefix}/${this._strategy.name}`,i,t,1)}}};uit._strategyCtors=new Map([["recentlyUsedByPrefix",class extends ait{constructor(){super("recentlyUsedByPrefix"),this._trie=SO.forStrings(),this._seq=0}memorize(t,i,e){const{word:s}=t.getWordUntilPosition(i),n=`${t.getLanguageId()}/${s}`;this._trie.set(n,{type:e.completion.kind,insertText:e.completion.insertText,touch:this._seq++})}select(t,i,e){const{word:s}=t.getWordUntilPosition(i);if(!s)return super.select(t,i,e);const n=`${t.getLanguageId()}/${s}`;let o=this._trie.get(n);if(o||(o=this._trie.findSubstr(n)),o)for(let t=0;t<e.length;t++){const{kind:i,insertText:s}=e[t].completion;if(i===o.type&&s===o.insertText)return t}return super.select(t,i,e)}toJSON(){const t=[];return this._trie.forEach(((i,e)=>t.push([e,i]))),t.sort(((t,i)=>-(t[1].touch-i[1].touch))).forEach(((t,i)=>t[1].touch=i)),t.slice(0,200)}fromJSON(t){if(this._trie.clear(),t.length>0){this._seq=t[0][1].touch+1;for(const[i,e]of t)e.type=typeof e.type=="number"?e.type:Ns.fromString(e.type),this._trie.set(i,e)}}}],["recentlyUsed",class extends ait{constructor(){super("recentlyUsed"),this._cache=new Kf(300,.66),this._seq=0}memorize(t,i,e){const s=`${t.getLanguageId()}/${e.textLabel}`;this._cache.set(s,{touch:this._seq++,type:e.completion.kind,insertText:e.completion.insertText})}select(t,i,e){if(e.length===0)return 0;const s=t.getLineContent(i.lineNumber).substr(i.column-10,i.column-1);if(/\s$/.test(s))return super.select(t,i,e);const n=e[0].score[0];let o=-1,r=-1,h=-1;for(let i=0;i<e.length&&e[i].score[0]===n;i++){const s=`${t.getLanguageId()}/${e[i].textLabel}`,n=this._cache.peek(s);if(n&&n.touch>h&&n.type===e[i].completion.kind&&n.insertText===e[i].completion.insertText&&(h=n.touch,r=i),e[i].completion.preselect&&o===-1)return i}return r!==-1?r:o!==-1?o:0}toJSON(){return this._cache.toJSON()}fromJSON(t){this._cache.clear();for(const[i,e]of t)e.touch=0,e.type=typeof e.type=="number"?e.type:Ns.fromString(e.type),this._cache.set(i,e);this._seq=this._cache.size}}],["first",lit]]),uit._storagePrefix="suggest/memories",uit=rit=hit([cit(0,cH),cit(1,Id)],uit);const dit=za("ISuggestMemories");Hd(dit,uit,1);var fit,git=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Ait=function(t,i){return function(e,s){i(e,s,t)}};let pit=fit=class{constructor(t,i){this._editor=t,this._enabled=!1,this._ckAtEnd=fit.AtEnd.bindTo(i),this._configListener=this._editor.onDidChangeConfiguration((t=>t.hasChanged(123)&&this._update())),this._update()}dispose(){var t;this._configListener.dispose(),(t=this._selectionListener)===null||t===void 0||t.dispose(),this._ckAtEnd.reset()}_update(){const t=this._editor.getOption(123)==="on";if(this._enabled!==t)if(this._enabled=t,this._enabled){const t=()=>{if(!this._editor.hasModel())return void this._ckAtEnd.set(!1);const t=this._editor.getModel(),i=this._editor.getSelection(),e=t.getWordAtPosition(i.getStartPosition());e?this._ckAtEnd.set(e.endColumn===i.getStartPosition().column):this._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};pit.AtEnd=new Tl("atEndOfWord",!1),pit=fit=git([Ait(1,Nl)],pit);var wit,mit=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},vit=function(t,i){return function(e,s){i(e,s,t)}};let bit=wit=class{constructor(t,i){this._editor=t,this._index=0,this._ckOtherSuggestions=wit.OtherSuggestions.bindTo(i)}dispose(){this.reset()}reset(){var t;this._ckOtherSuggestions.reset(),(t=this._listener)===null||t===void 0||t.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:t,index:i},e){if(t.items.length===0)return void this.reset();wit._moveIndex(!0,t,i)!==i?(this._acceptNext=e,this._model=t,this._index=i,this._listener=this._editor.onDidChangeCursorPosition((()=>{this._ignore||this.reset()})),this._ckOtherSuggestions.set(!0)):this.reset()}static _moveIndex(t,i,e){let s=e;for(let n=i.items.length;n>0&&(s=(s+i.items.length+(t?1:-1))%i.items.length,s!==e)&&i.items[s].completion.additionalTextEdits;n--);return s}next(){this._move(!0)}prev(){this._move(!1)}_move(t){if(this._model)try{this._ignore=!0,this._index=wit._moveIndex(t,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};bit.OtherSuggestions=new Tl("hasOtherSuggestions",!1),bit=wit=mit([vit(1,Nl)],bit);class yit{constructor(t,i,e,s){this._disposables=new Zi,this._disposables.add(e.onDidSuggest((t=>{t.completionModel.items.length===0&&this.reset()}))),this._disposables.add(e.onDidCancel((t=>{this.reset()}))),this._disposables.add(i.onDidShow((()=>this._onItem(i.getFocusedItem())))),this._disposables.add(i.onDidFocus(this._onItem,this)),this._disposables.add(i.onDidHide(this.reset,this)),this._disposables.add(t.onWillType((n=>{if(this._active&&!i.isFrozen()&&e.state!==0){const i=n.charCodeAt(n.length-1);this._active.acceptCharacters.has(i)&&t.getOption(0)&&s(this._active.item)}})))}_onItem(t){if(!t||!p(t.item.completion.commitCharacters))return void this.reset();if(this._active&&this._active.item.item===t.item)return;const i=new Of;for(const e of t.item.completion.commitCharacters)e.length>0&&i.add(e.charCodeAt(0));this._active={acceptCharacters:i,item:t}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}class kit{async provideSelectionRanges(t,i){const e=[];for(const s of i){const i=[];e.push(i);const n=new Map;await new Promise((i=>kit._bracketsRightYield(i,0,t,s,n))),await new Promise((e=>kit._bracketsLeftYield(e,0,t,s,n,i)))}return e}static _bracketsRightYield(t,i,e,s,n){const o=new Map,r=Date.now();for(;;){if(i>=kit._maxRounds){t();break}if(!s){t();break}const h=e.bracketPairs.findNextBracket(s);if(!h){t();break}if(Date.now()-r>kit._maxDuration){setTimeout((()=>kit._bracketsRightYield(t,i+1,e,s,n)));break}if(h.bracketInfo.isOpeningBracket){const t=h.bracketInfo.bracketText,i=o.has(t)?o.get(t):0;o.set(t,i+1)}else{const t=h.bracketInfo.getOpeningBrackets()[0].bracketText;let i=o.has(t)?o.get(t):0;if(i-=1,o.set(t,Math.max(0,i)),i<0){let i=n.get(t);i||(i=new _t,n.set(t,i)),i.push(h.range)}}s=h.range.getEndPosition()}}static _bracketsLeftYield(t,i,e,s,n,o){const r=new Map,h=Date.now();for(;;){if(i>=kit._maxRounds&&n.size===0){t();break}if(!s){t();break}const c=e.bracketPairs.findPrevBracket(s);if(!c){t();break}if(Date.now()-h>kit._maxDuration){setTimeout((()=>kit._bracketsLeftYield(t,i+1,e,s,n,o)));break}if(c.bracketInfo.isOpeningBracket){const t=c.bracketInfo.bracketText;let i=r.has(t)?r.get(t):0;if(i-=1,r.set(t,Math.max(0,i)),i<0){const i=n.get(t);if(i){const s=i.shift();i.size===0&&n.delete(t);const r=Es.fromPositions(c.range.getEndPosition(),s.getStartPosition()),h=Es.fromPositions(c.range.getStartPosition(),s.getEndPosition());o.push({range:r}),o.push({range:h}),kit._addBracketLeading(e,h,o)}}}else{const t=c.bracketInfo.getOpeningBrackets()[0].bracketText,i=r.has(t)?r.get(t):0;r.set(t,i+1)}s=c.range.getStartPosition()}}static _addBracketLeading(t,i,e){if(i.startLineNumber===i.endLineNumber)return;const s=i.startLineNumber,n=t.getLineFirstNonWhitespaceColumn(s);n!==0&&n!==i.startColumn&&(e.push({range:Es.fromPositions(new Cs(s,n),i.getEndPosition())}),e.push({range:Es.fromPositions(new Cs(s,1),i.getEndPosition())}));const o=s-1;if(o>0){const s=t.getLineFirstNonWhitespaceColumn(o);s===i.startColumn&&s!==t.getLineLastNonWhitespaceColumn(o)&&(e.push({range:Es.fromPositions(new Cs(o,s),i.getEndPosition())}),e.push({range:Es.fromPositions(new Cs(o,1),i.getEndPosition())}))}}}kit._maxDuration=30,kit._maxRounds=2;class xit{static async create(t,i){if(!i.getOption(118).localityBonus||!i.hasModel())return xit.None;const e=i.getModel(),s=i.getPosition();if(!t.canComputeWordRanges(e.uri))return xit.None;const[n]=await(new kit).provideSelectionRanges(e,[s]);if(n.length===0)return xit.None;const o=await t.computeWordRanges(e.uri,n[0].range);if(!o)return xit.None;const r=e.getWordUntilPosition(s);return delete o[r.word],new class extends xit{distance(t,e){if(!s.equals(i.getPosition()))return 0;if(e.kind===17)return 2<<20;const r=typeof e.label=="string"?e.label:e.label.label,h=o[r];if(A(h))return 2<<20;const a=c(h,Es.fromPositions(t),Es.compareRangesUsingStarts),l=a>=0?h[a]:h[Math.max(0,~a-1)];let u=n.length;for(const t of n){if(!Es.containsRange(t.range,l))break;u-=1}return u}}}}xit.None=new class extends xit{distance(){return 0}};let Cit=class{constructor(t,i){this.leadingLineContent=t,this.characterCountDelta=i}};class Eit{constructor(t,i,e,s,n,o,r=vN.default,h=void 0){this.clipboardText=h,this._snippetCompareFn=Eit._compareCompletionItems,this._items=t,this._column=i,this._wordDistance=s,this._options=n,this._refilterKind=1,this._lineContext=e,this._fuzzyScoreOptions=r,o==="top"?this._snippetCompareFn=Eit._compareCompletionItemsSnippetsUp:o==="bottom"&&(this._snippetCompareFn=Eit._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(t){this._lineContext.leadingLineContent===t.leadingLineContent&&this._lineContext.characterCountDelta===t.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<t.characterCountDelta&&this._filteredItems?2:1,this._lineContext=t)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const t=new Set;for(const[i,e]of this.getItemsByProvider())e.length>0&&e[0].container.incomplete&&t.add(i);return t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const t=[],{leadingLineContent:i,characterCountDelta:e}=this._lineContext;let s="",n="";const o=this._refilterKind===1?this._items:this._filteredItems,r=[],h=!this._options.filterGraceful||o.length>2e3?bN:kN;for(let c=0;c<o.length;c++){const a=o[c];if(a.isInvalid)continue;const l=this._itemsByProvider.get(a.provider);l?l.push(a):this._itemsByProvider.set(a.provider,[a]);const u=a.position.column-a.editStart.column,d=u+e-(a.position.column-this._column);if(s.length!==d&&(s=d===0?"":i.slice(-d),n=s.toLowerCase()),a.word=s,d===0)a.score=mN.Default;else{let t=0;for(;t<u;){const i=s.charCodeAt(t);if(i!==32&&i!==9)break;t+=1}if(t>=d)a.score=mN.Default;else if(typeof a.completion.filterText=="string"){const i=h(s,n,t,a.completion.filterText,a.filterTextLow,0,this._fuzzyScoreOptions);if(!i)continue;co(a.completion.filterText,a.textLabel)===0?a.score=i:(a.score=oN(s,n,t,a.textLabel,a.labelLow,0),a.score[0]=i[0])}else{const i=h(s,n,t,a.textLabel,a.labelLow,0,this._fuzzyScoreOptions);if(!i)continue;a.score=i}}a.idx=c,a.distance=this._wordDistance.distance(a.position,a.completion),r.push(a),t.push(a.textLabel.length)}this._filteredItems=r.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:t.length?a(t.length-.85,t,((t,i)=>t-i)):0}}static _compareCompletionItems(t,i){return t.score[0]>i.score[0]?-1:t.score[0]<i.score[0]?1:t.distance<i.distance?-1:t.distance>i.distance?1:t.idx<i.idx?-1:t.idx>i.idx?1:0}static _compareCompletionItemsSnippetsDown(t,i){if(t.completion.kind!==i.completion.kind){if(t.completion.kind===27)return 1;if(i.completion.kind===27)return-1}return Eit._compareCompletionItems(t,i)}static _compareCompletionItemsSnippetsUp(t,i){if(t.completion.kind!==i.completion.kind){if(t.completion.kind===27)return-1;if(i.completion.kind===27)return 1}return Eit._compareCompletionItems(t,i)}}var Bit,Dit=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Mit=function(t,i){return function(e,s){i(e,s,t)}};class Sit{static shouldAutoTrigger(t){if(!t.hasModel())return!1;const i=t.getModel(),e=t.getPosition();i.tokenization.tokenizeIfCheap(e.lineNumber);const s=i.getWordAtPosition(e);return!!s&&(s.endColumn===e.column||s.startColumn+1===e.column)&&!!isNaN(Number(s.word))}constructor(t,i,e){this.leadingLineContent=t.getLineContent(i.lineNumber).substr(0,i.column-1),this.leadingWord=t.getWordUntilPosition(i),this.lineNumber=i.lineNumber,this.column=i.column,this.triggerOptions=e}}let Fit=Bit=class{constructor(t,i,e,s,n,o,r,h,c){this._editor=t,this._editorWorkerService=i,this._clipboardService=e,this._telemetryService=s,this._logService=n,this._contextKeyService=o,this._configurationService=r,this._languageFeaturesService=h,this._envService=c,this._toDispose=new Zi,this._triggerCharacterListener=new Zi,this._triggerQuickSuggest=new xr,this._triggerState=void 0,this._completionDisposables=new Zi,this._onDidCancel=new de,this._onDidTrigger=new de,this._onDidSuggest=new de,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Bs(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeModelLanguage((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeConfiguration((()=>{this._updateTriggerCharacters()}))),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange((()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})));let a=!1;this._toDispose.add(this._editor.onDidCompositionStart((()=>{a=!0}))),this._toDispose.add(this._editor.onDidCompositionEnd((()=>{a=!1,this._onCompositionEnd()}))),this._toDispose.add(this._editor.onDidChangeCursorSelection((t=>{a||this._onCursorChange(t)}))),this._toDispose.add(this._editor.onDidChangeModelContent((()=>{a||this._triggerState===void 0||this._refilterCompletionItems()}))),this._updateTriggerCharacters()}dispose(){$i(this._triggerCharacterListener),$i([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(91)||!this._editor.hasModel()||!this._editor.getOption(121))return;const t=new Map;for(const i of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const e of i.triggerCharacters||[]){let s=t.get(e);s||(s=new Set,s.add(void 0),t.set(e,s)),s.add(i)}const i=i=>{var e;if(!function(t,i,e){if(!i.getContextKeyValue("inlineSuggestionVisible"))return!0;const s=i.getContextKeyValue(H7.suppressSuggestions.key);return s!==void 0?!s:!t.getOption(62).suppressSuggestions}(this._editor,this._contextKeyService)||Sit.shouldAutoTrigger(this._editor))return;if(!i){const t=this._editor.getPosition();i=this._editor.getModel().getLineContent(t.lineNumber).substr(0,t.column-1)}let s="";vo(i.charCodeAt(i.length-1))?mo(i.charCodeAt(i.length-2))&&(s=i.substr(i.length-2)):s=i.charAt(i.length-1);const n=t.get(s);if(n){const t=new Map;if(this._completionModel)for(const[i,e]of this._completionModel.getItemsByProvider())n.has(i)||t.set(i,e);this.trigger({auto:!0,triggerKind:1,triggerCharacter:s,retrigger:!!this._completionModel,clipboardText:(e=this._completionModel)===null||e===void 0?void 0:e.clipboardText,completionOptions:{providerFilter:n,providerItemsToReuse:t}})}};this._triggerCharacterListener.add(this._editor.onDidType(i)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd((()=>i())))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(t=!1){var i;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(i=this._requestToken)===null||i===void 0||i.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:t}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(this._editor.hasModel()&&this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.trigger({auto:this._triggerState.auto,retrigger:!0}):this.cancel())}_onCursorChange(t){if(!this._editor.hasModel())return;const i=this._currentSelection;this._currentSelection=this._editor.getSelection(),!t.selection.isEmpty()||t.reason!==0&&t.reason!==3||t.source!=="keyboard"&&t.source!=="deleteLeft"?this.cancel():this._triggerState===void 0&&t.reason===0?(i.containsRange(this._currentSelection)||i.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&t.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var t;Ftt.isAllOff(this._editor.getOption(89))||this._editor.getOption(118).snippetsPreventQuickSuggestions&&(!((t=qtt.get(this._editor))===null||t===void 0)&&t.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet((()=>{if(this._triggerState!==void 0||!Sit.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),i=this._editor.getPosition(),e=this._editor.getOption(89);if(!Ftt.isAllOff(e)){if(!Ftt.isAllOn(e)){t.tokenization.tokenizeIfCheap(i.lineNumber);const s=t.tokenization.getLineTokens(i.lineNumber),n=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if(Ftt.valueFor(e,n)!=="on")return}(function(t,i,e){if(!i.getContextKeyValue(H7.inlineSuggestionVisible.key))return!0;const s=i.getContextKeyValue(H7.suppressSuggestions.key);return s!==void 0?!s:!t.getOption(62).suppressSuggestions})(this._editor,this._contextKeyService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0})}}),this._editor.getOption(90)))}_refilterCompletionItems(){Y(this._editor.hasModel()),Y(this._triggerState!==void 0);const t=this._editor.getModel(),i=this._editor.getPosition(),e=new Sit(t,i,{...this._triggerState,refilter:!0});this._onNewContext(e)}trigger(t){var i,e,s,n,o,r;if(!this._editor.hasModel())return;const h=this._editor.getModel(),c=new Sit(h,this._editor.getPosition(),t);this.cancel(t.retrigger),this._triggerState=t,this._onDidTrigger.fire({auto:t.auto,shy:(i=t.shy)!==null&&i!==void 0&&i,position:this._editor.getPosition()}),this._context=c;let a={triggerKind:(e=t.triggerKind)!==null&&e!==void 0?e:0};t.triggerCharacter&&(a={triggerKind:1,triggerCharacter:t.triggerCharacter}),this._requestToken=new xe;let l=1;switch(this._editor.getOption(112)){case"top":l=0;break;case"bottom":l=2}const{itemKind:u,showDeprecated:d}=Bit.createSuggestFilter(this._editor),f=new Ett(l,(n=(s=t.completionOptions)===null||s===void 0?void 0:s.kindFilter)!==null&&n!==void 0?n:u,(o=t.completionOptions)===null||o===void 0?void 0:o.providerFilter,(r=t.completionOptions)===null||r===void 0?void 0:r.providerItemsToReuse,d),g=xit.create(this._editorWorkerService,this._editor),A=Dtt(this._languageFeaturesService.completionProvider,h,this._editor.getPosition(),f,a,this._requestToken.token);Promise.all([A,g]).then((async([i,e])=>{var s;if((s=this._requestToken)===null||s===void 0||s.dispose(),!this._editor.hasModel())return;let n=t==null?void 0:t.clipboardText;if(!n&&i.needsClipboard&&(n=await this._clipboardService.readText()),this._triggerState===void 0)return;const o=this._editor.getModel(),r=new Sit(o,this._editor.getPosition(),t),h={...vN.default,firstMatchCanBeWeak:!this._editor.getOption(118).matchOnWordStartOnly};if(this._completionModel=new Eit(i.items,this._context.column,{leadingLineContent:r.leadingLineContent,characterCountDelta:r.column-this._context.column},e,this._editor.getOption(118),this._editor.getOption(112),h,n),this._completionDisposables.add(i.disposable),this._onNewContext(r),this._reportDurationsTelemetry(i.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const t of i.items)t.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${t.provider._debugDisplayName}`,t.completion)})).catch(Oi)}_reportDurationsTelemetry(t){this._telemetryGate++%230==0&&setTimeout((()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(t)}),this._logService.debug("suggest.durations.json",t)}))}static createSuggestFilter(t){const i=new Set;t.getOption(112)==="none"&&i.add(27);const e=t.getOption(118);return e.showMethods||i.add(0),e.showFunctions||i.add(1),e.showConstructors||i.add(2),e.showFields||i.add(3),e.showVariables||i.add(4),e.showClasses||i.add(5),e.showStructs||i.add(6),e.showInterfaces||i.add(7),e.showModules||i.add(8),e.showProperties||i.add(9),e.showEvents||i.add(10),e.showOperators||i.add(11),e.showUnits||i.add(12),e.showValues||i.add(13),e.showConstants||i.add(14),e.showEnums||i.add(15),e.showEnumMembers||i.add(16),e.showKeywords||i.add(17),e.showWords||i.add(18),e.showColors||i.add(19),e.showFiles||i.add(20),e.showReferences||i.add(21),e.showColors||i.add(22),e.showFolders||i.add(23),e.showTypeParameters||i.add(24),e.showSnippets||i.add(27),e.showUsers||i.add(25),e.showIssues||i.add(26),{itemKind:i,showDeprecated:e.showDeprecated}}_onNewContext(t){if(this._context)if(t.lineNumber===this._context.lineNumber)if(no(t.leadingLineContent)===no(this._context.leadingLineContent)){if(t.column<this._context.column)t.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();else if(this._completionModel)if(t.leadingWord.word.length!==0&&t.leadingWord.startColumn>this._context.leadingWord.startColumn){if(Sit.shouldAutoTrigger(this._editor)&&this._context){const t=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:t}})}}else if(t.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&t.leadingWord.word.length!==0){const t=new Map,i=new Set;for(const[e,s]of this._completionModel.getItemsByProvider())s.length>0&&s[0].container.incomplete?i.add(e):t.set(e,s);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:i,providerItemsToReuse:t}})}else{const i=this._completionModel.lineContext;let e=!1;if(this._completionModel.lineContext={leadingLineContent:t.leadingLineContent,characterCountDelta:t.column-this._context.column},this._completionModel.items.length===0){const s=Sit.shouldAutoTrigger(this._editor);if(!this._context)return void this.cancel();if(s&&this._context.leadingWord.endColumn<t.leadingWord.startColumn)return void this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});if(this._context.triggerOptions.auto)return void this.cancel();if(this._completionModel.lineContext=i,e=this._completionModel.items.length>0,e&&t.leadingWord.word.length===0)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:t.triggerOptions,isFrozen:e})}}else this.cancel();else this.cancel()}};Fit=Bit=Dit([Mit(1,tP),Mit(2,IV),Mit(3,cu),Mit(4,au),Mit(5,Nl),Mit(6,Id),Mit(7,jA),Mit(8,aR)],Fit);class Iit{constructor(t,i){this._disposables=new Zi,this._lastOvertyped=[],this._locked=!1,this._disposables.add(t.onWillType((()=>{if(this._locked||!t.hasModel())return;const i=t.getSelections(),e=i.length;let s=!1;for(let t=0;t<e;t++)if(!i[t].isEmpty()){s=!0;break}if(!s)return void(this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0));this._lastOvertyped=[];const n=t.getModel();for(let t=0;t<e;t++){const e=i[t];if(n.getValueLengthInRange(e)>Iit._maxSelectionLength)return;this._lastOvertyped[t]={value:n.getValueInRange(e),multiline:e.startLineNumber!==e.endLineNumber}}}))),this._disposables.add(i.onDidTrigger((t=>{this._locked=!0}))),this._disposables.add(i.onDidCancel((t=>{this._locked=!1})))}getLastOvertypedInfo(t){if(t>=0&&t<this._lastOvertyped.length)return this._lastOvertyped[t]}dispose(){this._disposables.dispose()}}Iit._maxSelectionLength=51200;var Lit=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Rit=function(t,i){return function(e,s){i(e,s,t)}};let Tit=class t extends MH{updateLabel(){const i=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!i)return super.updateLabel();this.label&&(this.label.textContent=st(0,"{0} ({1})",this._action.label,t.symbolPrintEnter(i)))}static symbolPrintEnter(t){var i;return(i=t.getLabel())===null||i===void 0?void 0:i.replace(/\benter\b/gi,"⏎")}},Nit=class{constructor(t,i,e,s,n){this._menuId=i,this._menuService=s,this._contextKeyService=n,this._menuDisposables=new Zi,this.element=ia(t,ha(".suggest-status-bar"));const o=t=>t instanceof ou?e.createInstance(Tit,t,void 0):void 0;this._leftActions=new RH(this.element,{actionViewItemProvider:o}),this._rightActions=new RH(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){const t=this._menuService.createMenu(this._menuId,this._contextKeyService),i=()=>{const i=[],e=[];for(const[s,n]of t.getActions())s==="left"?i.push(...n):e.push(...n);this._leftActions.clear(),this._leftActions.push(i),this._rightActions.clear(),this._rightActions.push(e)};this._menuDisposables.add(t.onDidChange((()=>i()))),this._menuDisposables.add(t)}hide(){this._menuDisposables.clear()}};Nit=Lit([Rit(2,Oa),Rit(3,iu),Rit(4,Nl)],Nit);var Qit=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Oit=function(t,i){return function(e,s){i(e,s,t)}};function zit(t){return!!t&&!!(t.completion.documentation||t.completion.detail&&t.completion.detail!==t.completion.label)}let Uit=class{constructor(t,i){this._editor=t,this._onDidClose=new de,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new de,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new Zi,this._renderDisposeable=new Zi,this._borderWidth=1,this._size=new vc(330,0),this.domNode=ha(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=i.createInstance(pQ,{editor:t}),this._body=ha(".body"),this._scrollbar=new ck(this._body,{alwaysConsumeMouseWheel:!0}),ia(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=ia(this._body,ha(".header")),this._close=ia(this._header,ha("span"+Ka.asCSSSelector(Fs.close))),this._close.title=st(0,"Close"),this._type=ia(this._header,ha("p.type")),this._docs=ia(this._body,ha("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration((t=>{t.hasChanged(50)&&this._configureFont()})))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const t=this._editor.getOptions(),i=t.get(50),e=i.getMassagedFontFamily(),s=t.get(119)||i.fontSize,n=t.get(120)||i.lineHeight,o=i.fontWeight,r=`${s}px`,h=`${n}px`;this.domNode.style.fontSize=r,this.domNode.style.lineHeight=""+n/s,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=i.fontFeatureSettings,this._type.style.fontFamily=e,this._close.style.height=h,this._close.style.width=h}getLayoutInfo(){const t=this._editor.getOption(120)||this._editor.getOption(50).lineHeight,i=this._borderWidth;return{lineHeight:t,borderWidth:i,borderHeight:2*i,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=st(0,"Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}renderItem(t,i){var e,s;this._renderDisposeable.clear();let{detail:n,documentation:o}=t.completion;if(i){let i="";i+=`score: ${t.score[0]}\n`,i+=`prefix: ${(e=t.word)!==null&&e!==void 0?e:"(no prefix)"}\n`,i+=`word: ${t.completion.filterText?t.completion.filterText+" (filterText)":t.textLabel}\n`,i+=`distance: ${t.distance} (localityBonus-setting)\n`,i+=`index: ${t.idx}, based on ${t.completion.sortText&&`sortText: "${t.completion.sortText}"`||"label"}\n`,i+=`commit_chars: ${(s=t.completion.commitCharacters)===null||s===void 0?void 0:s.join("")}\n`,o=(new RN).appendCodeblock("empty",i),n=`Provider: ${t.provider._debugDisplayName}`}if(i||zit(t)){if(this.domNode.classList.remove("no-docs","no-type"),n){const t=n.length>1e5?`${n.substr(0,1e5)}…`:n;this._type.textContent=t,this._type.title=t,ca(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test(t))}else nc(this._type),this._type.title="",aa(this._type),this.domNode.classList.add("no-type");if(nc(this._docs),typeof o=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=o;else if(o){this._docs.classList.add("markdown-docs"),nc(this._docs);const t=this._markdownRenderer.render(o);this._docs.appendChild(t.element),this._renderDisposeable.add(t),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync((()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)})))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=t=>{t.preventDefault(),t.stopPropagation()},this._close.onclick=t=>{t.preventDefault(),t.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(t,i){const e=new vc(t,i);vc.equals(e,this._size)||(this._size=e,function(t,i,e){typeof i=="number"&&(t.style.width=`${i}px`),typeof e=="number"&&(t.style.height=`${e}px`)}(this.domNode,t,i)),this._scrollbar.scanDomNode()}scrollDown(t=8){this._body.scrollTop+=t}scrollUp(t=8){this._body.scrollTop-=t}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(t){this._borderWidth=t}get borderWidth(){return this._borderWidth}};Uit=Qit([Oit(1,Oa)],Uit);class Hit{constructor(t,i){let e,s;this.widget=t,this._editor=i,this.allowEditorOverflow=!0,this._disposables=new Zi,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new K3,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(t.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n=0,o=0;this._disposables.add(this._resizable.onDidWillResize((()=>{e=this._topLeft,s=this._resizable.size}))),this._disposables.add(this._resizable.onDidResize((t=>{if(e&&s){this.widget.layout(t.dimension.width,t.dimension.height);let i=!1;t.west&&(o=s.width-t.dimension.width,i=!0),t.north&&(n=s.height-t.dimension.height,i=!0),i&&this._applyTopLeft({top:e.top+n,left:e.left+o})}t.done&&(e=void 0,s=void 0,n=0,o=0,this._userSize=t.dimension)}))),this._disposables.add(this.widget.onDidChangeContents((()=>{var t;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(t=this._userSize)!==null&&t!==void 0?t:this.widget.size,this._preferAlignAtTop)})))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(t=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),t&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(t,i){var e;const s=t.getBoundingClientRect();this._anchorBox=s,this._preferAlignAtTop=i,this._placeAtAnchor(this._anchorBox,(e=this._userSize)!==null&&e!==void 0?e:this.widget.size,i)}_placeAtAnchor(t,i,e){var s;const n=wc(this.getDomNode().ownerDocument.body),o=this.widget.getLayoutInfo(),r=new vc(220,2*o.lineHeight),h=t.top,c=function(){const e=n.width-(t.left+t.width+o.borderWidth+o.horizontalPadding),s=-o.borderWidth+t.left+t.width,c=new vc(e,n.height-t.top-o.borderHeight-o.verticalPadding),a=c.with(void 0,t.top+t.height-o.borderHeight-o.verticalPadding);return{top:h,left:s,fit:e-i.width,maxSizeTop:c,maxSizeBottom:a,minSize:r.with(Math.min(e,r.width))}}(),a=function(){const e=t.left-o.borderWidth-o.horizontalPadding,s=Math.max(o.horizontalPadding,t.left-i.width-o.borderWidth),c=new vc(e,n.height-t.top-o.borderHeight-o.verticalPadding),a=c.with(void 0,t.top+t.height-o.borderHeight-o.verticalPadding);return{top:h,left:s,fit:e-i.width,maxSizeTop:c,maxSizeBottom:a,minSize:r.with(Math.min(e,r.width))}}(),l=function(){const e=t.left,s=-o.borderWidth+t.top+t.height,h=new vc(t.width-o.borderHeight,n.height-t.top-t.height-o.verticalPadding);return{top:s,left:e,fit:h.height-i.height,maxSizeBottom:h,maxSizeTop:h,minSize:r.with(h.width)}}(),u=[c,a,l],d=(s=u.find((t=>t.fit>=0)))!==null&&s!==void 0?s:u.sort(((t,i)=>i.fit-t.fit))[0],f=t.top+t.height-o.borderHeight;let g,A=i.height;const p=Math.max(d.maxSizeTop.height,d.maxSizeBottom.height);let w;A>p&&(A=p),e?A<=d.maxSizeTop.height?(g=!0,w=d.maxSizeTop):(g=!1,w=d.maxSizeBottom):A<=d.maxSizeBottom.height?(g=!1,w=d.maxSizeBottom):(g=!0,w=d.maxSizeTop);let{top:m,left:v}=d;!g&&A>t.height&&(m=f-A);const b=this._editor.getDomNode();if(b){const t=b.getBoundingClientRect();m-=t.top,v-=t.left}this._applyTopLeft({left:v,top:m}),this._resizable.enableSashes(!g,d===c,g,d!==c),this._resizable.minSize=d.minSize,this._resizable.maxSize=w,this._resizable.layout(A,Math.min(w.width,i.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(t){this._topLeft=t,this._editor.layoutOverlayWidget(this)}}var Pit;(function(t){t[t.FILE=0]="FILE",t[t.FOLDER=1]="FOLDER",t[t.ROOT_FOLDER=2]="ROOT_FOLDER"})(Pit||(Pit={}));const jit=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function Wit(t,i,e,s,n){if(n)return[`codicon-${n.id}`,"predefined-file-icon"];const o=s===Pit.ROOT_FOLDER?["rootfolder-icon"]:s===Pit.FOLDER?["folder-icon"]:["file-icon"];if(e){let n;if(e.scheme===Lh.data)n=NM.parseMetaData(e).get(NM.META_DATA_LABEL);else{const t=e.path.match(jit);t?(n=Yit(t[2].toLowerCase()),t[1]&&o.push(`${Yit(t[1].toLowerCase())}-name-dir-icon`)):n=Yit(e.authority.toLowerCase())}if(s===Pit.ROOT_FOLDER)o.push(`${n}-root-name-folder-icon`);else if(s===Pit.FOLDER)o.push(`${n}-name-folder-icon`);else{if(n){if(o.push(`${n}-name-file-icon`),o.push("name-file-icon"),n.length<=255){const t=n.split(".");for(let i=1;i<t.length;i++)o.push(`${t.slice(i).join(".")}-ext-file-icon`)}o.push("ext-file-icon")}const s=function(t,i,e){if(!e)return null;let s=null;if(e.scheme===Lh.data){const t=NM.parseMetaData(e).get(NM.META_DATA_MIME);t&&(s=i.getLanguageIdByMimeType(t))}else{const i=t.getModel(e);i&&(s=i.getLanguageId())}return s&&s!==ef?s:i.guessLanguageIdByFilepathOrFirstLine(e)}(t,i,e);s&&o.push(`${Yit(s)}-lang-file-icon`)}}return o}function Yit(t){return t.replace(/[\11\12\14\15\40]/g,"/")}var _it,Vit=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Jit=function(t,i){return function(e,s){i(e,s,t)}};function Git(t){return`suggest-aria-id:${t}`}const Kit=X_("suggest-more-info",Fs.chevronRight,st(0,"Icon for more information in the suggest widget.")),$it=new(_it=class{extract(t,i){if(t.textLabel.match(_it._regexStrict))return i[0]=t.textLabel,!0;if(t.completion.detail&&t.completion.detail.match(_it._regexStrict))return i[0]=t.completion.detail,!0;if(t.completion.documentation){const e=typeof t.completion.documentation=="string"?t.completion.documentation:t.completion.documentation.value,s=_it._regexRelaxed.exec(e);if(s&&(s.index===0||s.index+s[0].length===e.length))return i[0]=s[0],!0}return!1}},_it._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,_it._regexStrict=new RegExp(`^${_it._regexRelaxed.source}$`,"i"),_it);let Xit=class{constructor(t,i,e,s){this._editor=t,this._modelService=i,this._languageService=e,this._themeService=s,this._onDidToggleDetails=new de,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(t){const i=new Zi,e=t;e.classList.add("show-file-icons");const s=ia(t,ha(".icon")),n=ia(s,ha("span.colorspan")),o=ia(t,ha(".contents")),r=ia(o,ha(".main")),h=ia(r,ha(".icon-label.codicon")),c=ia(r,ha("span.left")),a=ia(r,ha("span.right")),l=new QY(c,{supportHighlights:!0,supportIcons:!0});i.add(l);const u=ia(c,ha("span.signature-label")),d=ia(c,ha("span.qualifier-label")),f=ia(a,ha("span.details-label")),g=ia(a,ha("span.readMore"+Ka.asCSSSelector(Kit)));return g.title=st(0,"Read More"),{root:e,left:c,right:a,icon:s,colorspan:n,iconLabel:l,iconContainer:h,parametersLabel:u,qualifierLabel:d,detailsLabel:f,readMore:g,disposables:i,configureFont:()=>{const t=this._editor.getOptions(),i=t.get(50),n=i.getMassagedFontFamily(),o=i.fontFeatureSettings,h=t.get(119)||i.fontSize,c=t.get(120)||i.lineHeight,a=i.fontWeight,l=`${h}px`,u=`${c}px`,d=`${i.letterSpacing}px`;e.style.fontSize=l,e.style.fontWeight=a,e.style.letterSpacing=d,r.style.fontFamily=n,r.style.fontFeatureSettings=o,r.style.lineHeight=u,s.style.height=u,s.style.width=u,g.style.height=u,g.style.width=u}}}renderElement(t,i,e){e.configureFont();const{completion:s}=t;e.root.id=Git(i),e.colorspan.style.backgroundColor="";const n={labelEscapeNewLines:!0,matches:rN(t.score)},o=[];if(s.kind===19&&$it.extract(t,o))e.icon.className="icon customcolor",e.iconContainer.className="icon hide",e.colorspan.style.backgroundColor=o[0];else if(s.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){e.icon.className="icon hide",e.iconContainer.className="icon hide";const i=Wit(this._modelService,this._languageService,fs.from({scheme:"fake",path:t.textLabel}),Pit.FILE),o=Wit(this._modelService,this._languageService,fs.from({scheme:"fake",path:s.detail}),Pit.FILE);n.extraClasses=i.length>o.length?i:o}else s.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(e.icon.className="icon hide",e.iconContainer.className="icon hide",n.extraClasses=[Wit(this._modelService,this._languageService,fs.from({scheme:"fake",path:t.textLabel}),Pit.FOLDER),Wit(this._modelService,this._languageService,fs.from({scheme:"fake",path:s.detail}),Pit.FOLDER)].flat()):(e.icon.className="icon hide",e.iconContainer.className="",e.iconContainer.classList.add("suggest-icon",...Ka.asClassNameArray(Ns.toIcon(s.kind))));s.tags&&s.tags.indexOf(1)>=0&&(n.extraClasses=(n.extraClasses||[]).concat(["deprecated"]),n.matches=[]),e.iconLabel.setLabel(t.textLabel,void 0,n),typeof s.label=="string"?(e.parametersLabel.textContent="",e.detailsLabel.textContent=qit(s.detail||""),e.root.classList.add("string-label")):(e.parametersLabel.textContent=qit(s.label.detail||""),e.detailsLabel.textContent=qit(s.label.description||""),e.root.classList.remove("string-label")),this._editor.getOption(118).showInlineDetails?ca(e.detailsLabel):aa(e.detailsLabel),zit(t)?(e.right.classList.add("can-expand-details"),ca(e.readMore),e.readMore.onmousedown=t=>{t.stopPropagation(),t.preventDefault()},e.readMore.onclick=t=>{t.stopPropagation(),t.preventDefault(),this._onDidToggleDetails.fire()}):(e.right.classList.remove("can-expand-details"),aa(e.readMore),e.readMore.onmousedown=null,e.readMore.onclick=null)}disposeTemplate(t){t.disposables.dispose()}};function qit(t){return t.replace(/\r\n|\r|\n/g,"")}Xit=Vit([Jit(1,Ha),Jit(2,Od),Jit(3,Fk)],Xit);var Zit,tet=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},iet=function(t,i){return function(e,s){i(e,s,t)}};Ow("editorSuggestWidget.background",{dark:cm,light:cm,hcDark:cm,hcLight:cm},st(0,"Background color of the suggest widget.")),Ow("editorSuggestWidget.border",{dark:lm,light:lm,hcDark:lm,hcLight:lm},st(0,"Border color of the suggest widget."));const eet=Ow("editorSuggestWidget.foreground",{dark:hm,light:hm,hcDark:hm,hcLight:hm},st(0,"Foreground color of the suggest widget."));Ow("editorSuggestWidget.selectedForeground",{dark:zb,light:zb,hcDark:zb,hcLight:zb},st(0,"Foreground color of the selected entry in the suggest widget.")),Ow("editorSuggestWidget.selectedIconForeground",{dark:Ub,light:Ub,hcDark:Ub,hcLight:Ub},st(0,"Icon foreground color of the selected entry in the suggest widget."));const set=Ow("editorSuggestWidget.selectedBackground",{dark:Hb,light:Hb,hcDark:Hb,hcLight:Hb},st(0,"Background color of the selected entry in the suggest widget."));Ow("editorSuggestWidget.highlightForeground",{dark:db,light:db,hcDark:db,hcLight:db},st(0,"Color of the match highlights in the suggest widget.")),Ow("editorSuggestWidget.focusHighlightForeground",{dark:fb,light:fb,hcDark:fb,hcLight:fb},st(0,"Color of the match highlights in the suggest widget when an item is focused.")),Ow("editorSuggestWidgetStatus.foreground",{dark:Hw(eet,.5),light:Hw(eet,.5),hcDark:Hw(eet,.5),hcLight:Hw(eet,.5)},st(0,"Foreground color of the suggest widget status."));class net{constructor(t,i){this._service=t,this._key=`suggestWidget.size/${i.getEditorType()}/${i instanceof w4}`}restore(){var t;const i=(t=this._service.get(this._key,0))!==null&&t!==void 0?t:"";try{const t=JSON.parse(i);if(vc.is(t))return vc.lift(t)}catch{}}store(t){this._service.store(this._key,JSON.stringify(t),0,1)}reset(){this._service.remove(this._key,0)}}let oet=Zit=class{constructor(t,i,e,s,n){this.editor=t,this._storageService=i,this._state=0,this._isAuto=!1,this._pendingLayout=new ie,this._pendingShowDetails=new ie,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new xr,this._disposables=new Zi,this._onDidSelect=new ge,this._onDidFocus=new ge,this._onDidHide=new de,this._onDidShow=new de,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new de,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new K3,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new ret(this,t),this._persistedSize=new net(i,t);class o{constructor(t,i,e=!1,s=!1){this.persistedSize=t,this.currentSize=i,this.persistHeight=e,this.persistWidth=s}}let r;this._disposables.add(this.element.onDidWillResize((()=>{this._contentWidget.lockPreference(),r=new o(this._persistedSize.restore(),this.element.size)}))),this._disposables.add(this.element.onDidResize((t=>{var i,e,s,n;if(this._resize(t.dimension.width,t.dimension.height),r&&(r.persistHeight=r.persistHeight||!!t.north||!!t.south,r.persistWidth=r.persistWidth||!!t.east||!!t.west),t.done){if(r){const{itemHeight:t,defaultSize:o}=this.getLayoutInfo(),h=Math.round(t/2);let{width:c,height:a}=this.element.size;(!r.persistHeight||Math.abs(r.currentSize.height-a)<=h)&&(a=(e=(i=r.persistedSize)===null||i===void 0?void 0:i.height)!==null&&e!==void 0?e:o.height),(!r.persistWidth||Math.abs(r.currentSize.width-c)<=h)&&(c=(n=(s=r.persistedSize)===null||s===void 0?void 0:s.width)!==null&&n!==void 0?n:o.width),this._persistedSize.store(new vc(c,a))}this._contentWidget.unlockPreference(),r=void 0}}))),this._messageElement=ia(this.element.domNode,ha(".message")),this._listElement=ia(this.element.domNode,ha(".tree"));const h=this._disposables.add(n.createInstance(Uit,this.editor));h.onDidClose(this.toggleDetails,this,this._disposables),this._details=new Hit(h,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(118).showIcons);c();const a=n.createInstance(Xit,this.editor);this._disposables.add(a),this._disposables.add(a.onDidToggleDetails((()=>this.toggleDetails()))),this._list=new YU("SuggestWidget",this._listElement,{getHeight:t=>this.getLayoutInfo().itemHeight,getTemplateId:t=>"suggestion"},[a],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>st(0,"Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:t=>{let i=t.textLabel;if(typeof t.completion.label!="string"){const{detail:e,description:s}=t.completion.label;e&&s?i=st(0,"{0} {1}, {2}",i,e,s):e?i=st(0,"{0} {1}",i,e):s&&(i=st(0,"{0}, {1}",i,s))}if(!t.isResolved||!this._isDetailsVisible())return i;const{documentation:e,detail:s}=t.completion;return st(0,"{0}, docs: {1}",i,Kn("{0}{1}",s||"",e?typeof e=="string"?e:e.value:""))}}}),this._list.style(vH({listInactiveFocusBackground:set,listInactiveFocusOutline:Xw})),this._status=n.createInstance(Nit,this.element.domNode,xtt);const l=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(118).showStatusBar);l(),this._disposables.add(s.onDidColorThemeChange((t=>this._onThemeChange(t)))),this._onThemeChange(s.getColorTheme()),this._disposables.add(this._list.onMouseDown((t=>this._onListMouseDownOrTap(t)))),this._disposables.add(this._list.onTap((t=>this._onListMouseDownOrTap(t)))),this._disposables.add(this._list.onDidChangeSelection((t=>this._onListSelection(t)))),this._disposables.add(this._list.onDidChangeFocus((t=>this._onListFocus(t)))),this._disposables.add(this.editor.onDidChangeCursorSelection((()=>this._onCursorSelectionChanged()))),this._disposables.add(this.editor.onDidChangeConfiguration((t=>{t.hasChanged(118)&&(l(),c()),this._completionModel&&(t.hasChanged(50)||t.hasChanged(119)||t.hasChanged(120))&&this._list.splice(0,this._list.length,this._completionModel.items)}))),this._ctxSuggestWidgetVisible=ktt.Visible.bindTo(e),this._ctxSuggestWidgetDetailsVisible=ktt.DetailsVisible.bindTo(e),this._ctxSuggestWidgetMultipleSuggestions=ktt.MultipleSuggestions.bindTo(e),this._ctxSuggestWidgetHasFocusedSuggestion=ktt.HasFocusedSuggestion.bindTo(e),this._disposables.add(cc(this._details.widget.domNode,"keydown",(t=>{this._onDetailsKeydown.fire(t)}))),this._disposables.add(this.editor.onMouseDown((t=>this._onEditorMouseDown(t))))}dispose(){var t;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(t=this._loadingTimeout)===null||t===void 0||t.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(t){this._details.widget.domNode.contains(t.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(t.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(t){t.element!==void 0&&t.index!==void 0&&(t.browserEvent.preventDefault(),t.browserEvent.stopPropagation(),this._select(t.element,t.index))}_onListSelection(t){t.elements.length&&this._select(t.elements[0],t.indexes[0])}_select(t,i){const e=this._completionModel;e&&(this._onDidSelect.fire({item:t,index:i,model:e}),this.editor.focus())}_onThemeChange(t){this._details.widget.borderWidth=dy(t.type)?2:1}_onListFocus(t){var i;if(this._ignoreFocusEvents)return;if(!t.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),void this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const e=t.elements[0],s=t.indexes[0];e!==this._focusedItem&&((i=this._currentSuggestionDetails)===null||i===void 0||i.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=e,this._list.reveal(s),this._currentSuggestionDetails=Ar((async t=>{const i=yr((()=>{this._isDetailsVisible()&&this.showDetails(!0)}),250),s=t.onCancellationRequested((()=>i.dispose()));try{return await e.resolve(t)}finally{i.dispose(),s.dispose()}})),this._currentSuggestionDetails.then((()=>{s>=this._list.length||e!==this._list.element(s)||(this._ignoreFocusEvents=!0,this._list.splice(s,1,[e]),this._list.setFocus([s]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:Git(s)}))})).catch(Oi)),this._onDidFocus.fire({item:e,index:s,model:this._completionModel})}_setState(t){if(this._state!==t)switch(this._state=t,this.element.domNode.classList.toggle("frozen",t===4),this.element.domNode.classList.remove("message"),t){case 0:aa(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=Zit.LOADING_MESSAGE,aa(this._listElement,this._status.element),ca(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,aw(Zit.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=Zit.NO_SUGGESTIONS_MESSAGE,aa(this._listElement,this._status.element),ca(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,aw(Zit.NO_SUGGESTIONS_MESSAGE);break;case 3:case 4:aa(this._messageElement),ca(this._listElement,this._status.element),this._show();break;case 5:aa(this._messageElement),ca(this._listElement,this._status.element),this._details.show(),this._show()}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet((()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)}),100)}showTriggered(t,i){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!t,this._isAuto||(this._loadingTimeout=yr((()=>this._setState(1)),i)))}showSuggestions(t,i,e,s,n){var o,r;if(this._contentWidget.setPosition(this.editor.getPosition()),(o=this._loadingTimeout)===null||o===void 0||o.dispose(),(r=this._currentSuggestionDetails)===null||r===void 0||r.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==t&&(this._completionModel=t),e&&this._state!==2&&this._state!==0)return void this._setState(4);const h=this._completionModel.items.length,c=h===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(h>1),c)return this._setState(s?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(e?4:3),this._list.reveal(i,0),this._list.setFocus(n?[]:[i])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=dc(Gh(this.element.domNode),(()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}))}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!zit(this._list.getFocusedElements()[0])&&!this._explainMode||this._state!==3&&this._state!==5&&this._state!==4||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(t){this._pendingShowDetails.value=dc(Gh(this.element.domNode),(()=>{this._pendingShowDetails.clear(),this._details.show(),t?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()}))}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var t;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(t=this._loadingTimeout)===null||t===void 0||t.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const i=this._persistedSize.restore(),e=Math.ceil(4.3*this.getLayoutInfo().itemHeight);i&&i.height<e&&this._persistedSize.store(i.with(void 0,e))}isFrozen(){return this._state===4}_afterRender(t){t!==null?this._state!==2&&this._state!==1&&(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}_layout(t){var i,e,s;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const n=wc(this.element.domNode.ownerDocument.body),o=this.getLayoutInfo();t||(t=o.defaultSize);let r=t.height,h=t.width;if(this._status.element.style.height=`${o.itemHeight}px`,this._state===2||this._state===1)r=o.itemHeight+o.borderHeight,h=o.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new vc(h,r),this._contentWidget.setPreference(2);else{const c=n.width-o.borderHeight-2*o.horizontalPadding;h>c&&(h=c);const a=this._completionModel?this._completionModel.stats.pLabelLen*o.typicalHalfwidthCharacterWidth:h,l=o.statusBarHeight+this._list.contentHeight+o.borderHeight,u=o.itemHeight+o.statusBarHeight,d=yc(this.editor.getDomNode()),f=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),g=d.top+f.top+f.height,A=Math.min(n.height-g-o.verticalPadding,l),p=d.top+f.top-o.verticalPadding,w=Math.min(p,l);let m=Math.min(Math.max(w,A)+o.borderHeight,l);r===((i=this._cappedHeight)===null||i===void 0?void 0:i.capped)&&(r=this._cappedHeight.wanted),r<u&&(r=u),r>m&&(r=m),r>A||this._forceRenderingAbove&&p>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),m=w):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),m=A),this.element.preferredSize=new vc(a,o.defaultSize.height),this.element.maxSize=new vc(c,m),this.element.minSize=new vc(220,u),this._cappedHeight=r===l?{wanted:(s=(e=this._cappedHeight)===null||e===void 0?void 0:e.wanted)!==null&&s!==void 0?s:t.height,capped:r}:void 0}this._resize(h,r)}_resize(t,i){const{width:e,height:s}=this.element.maxSize;t=Math.min(e,t),i=Math.min(s,i);const{statusBarHeight:n}=this.getLayoutInfo();this._list.layout(i-n,t),this._listElement.style.height=i-n+"px",this.element.layout(i,t),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var t;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((t=this._contentWidget.getPosition())===null||t===void 0?void 0:t.preference[0])===2)}getLayoutInfo(){const t=this.editor.getOption(50),i=rR(this.editor.getOption(120)||t.lineHeight,8,1e3),e=this.editor.getOption(118).showStatusBar&&this._state!==2&&this._state!==1?i:0,s=this._details.widget.borderWidth,n=2*s;return{itemHeight:i,statusBarHeight:e,borderWidth:s,borderHeight:n,typicalHalfwidthCharacterWidth:t.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new vc(430,e+12*i+n)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(t){this._storageService.store("expandSuggestionDocs",t,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};oet.LOADING_MESSAGE=st(0,"Loading..."),oet.NO_SUGGESTIONS_MESSAGE=st(0,"No suggestions."),oet=Zit=tet([iet(1,cH),iet(2,Nl),iet(3,Fk),iet(4,Oa)],oet);class ret{constructor(t,i){this._widget=t,this._editor=i,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}beforeRender(){const{height:t,width:i}=this._widget.element.size,{borderWidth:e,horizontalPadding:s}=this._widget.getLayoutInfo();return new vc(i+2*e+s,t+2*e)}afterRender(t){this._widget._afterRender(t)}setPreference(t){this._preferenceLocked||(this._preference=t)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(t){this._position=t}}var het,cet=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},aet=function(t,i){return function(e,s){i(e,s,t)}};class uet{constructor(t,i){if(this._model=t,this._position=i,this._decorationOptions=DF.register({description:"suggest-line-suffix",stickiness:1}),t.getLineMaxColumn(i.lineNumber)!==i.column){const e=t.getOffsetAt(i),s=t.getPositionAt(e+1);t.changeDecorations((t=>{this._marker&&t.removeDecoration(this._marker),this._marker=t.addDecoration(Es.fromPositions(i,s),this._decorationOptions)}))}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations((t=>{t.removeDecoration(this._marker),this._marker=void 0}))}delta(t){if(this._model.isDisposed()||this._position.lineNumber!==t.lineNumber)return 0;if(this._marker){const i=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(i.getStartPosition())-this._model.getOffsetAt(t)}return this._model.getLineMaxColumn(t.lineNumber)-t.column}}let det=het=class{static get(t){return t.getContribution(het.ID)}constructor(t,i,e,s,n,o,r){this._memoryService=i,this._commandService=e,this._contextKeyService=s,this._instantiationService=n,this._logService=o,this._telemetryService=r,this._lineSuffix=new ie,this._toDispose=new Zi,this._selectors=new fet((t=>t.priority)),this._onWillInsertSuggestItem=new de,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=t,this.model=n.createInstance(Fit,this.editor),this._selectors.register({priority:0,select:(t,i,e)=>this._memoryService.select(t,i,e)});const h=ktt.InsertMode.bindTo(s);h.set(t.getOption(118).insertMode),this._toDispose.add(this.model.onDidTrigger((()=>h.set(t.getOption(118).insertMode)))),this.widget=this._toDispose.add(new uc(Gh(t.getDomNode()),(()=>{const t=this._instantiationService.createInstance(oet,this.editor);this._toDispose.add(t),this._toDispose.add(t.onDidSelect((t=>this._insertSuggestion(t,0)),this));const i=new yit(this.editor,t,this.model,(t=>this._insertSuggestion(t,2)));this._toDispose.add(i);const e=ktt.MakesTextEdit.bindTo(this._contextKeyService),s=ktt.HasInsertAndReplaceRange.bindTo(this._contextKeyService),n=ktt.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(qi((()=>{e.reset(),s.reset(),n.reset()}))),this._toDispose.add(t.onDidFocus((({item:t})=>{const i=this.editor.getPosition(),o=t.editStart.column,r=i.column;let h=!0;this.editor.getOption(1)!=="smart"||this.model.state!==2||t.completion.additionalTextEdits||4&t.completion.insertTextRules||r-o!==t.completion.insertText.length||(h=this.editor.getModel().getValueInRange({startLineNumber:i.lineNumber,startColumn:o,endLineNumber:i.lineNumber,endColumn:r})!==t.completion.insertText),e.set(h),s.set(!Cs.equals(t.editInsertEnd,t.editReplaceEnd)),n.set(!!t.provider.resolveCompletionItem||!!t.completion.documentation||t.completion.detail!==t.completion.label)}))),this._toDispose.add(t.onDetailsKeyDown((t=>{t.toKeyCodeChord().equals(new ir(!0,!1,!1,!1,33))||kt&&t.toKeyCodeChord().equals(new ir(!1,!1,!1,!0,33))?t.stopPropagation():t.toKeyCodeChord().isModifierKey()||this.editor.focus()}))),t}))),this._overtypingCapturer=this._toDispose.add(new uc(Gh(t.getDomNode()),(()=>this._toDispose.add(new Iit(this.editor,this.model))))),this._alternatives=this._toDispose.add(new uc(Gh(t.getDomNode()),(()=>this._toDispose.add(new bit(this.editor,this._contextKeyService))))),this._toDispose.add(n.createInstance(pit,t)),this._toDispose.add(this.model.onDidTrigger((t=>{this.widget.value.showTriggered(t.auto,t.shy?250:50),this._lineSuffix.value=new uet(this.editor.getModel(),t.position)}))),this._toDispose.add(this.model.onDidSuggest((t=>{if(t.triggerOptions.shy)return;let i=-1;for(const e of this._selectors.itemsOrderedByPriorityDesc)if(i=e.select(this.editor.getModel(),this.editor.getPosition(),t.completionModel.items),i!==-1)break;if(i===-1&&(i=0),this.model.state===0)return;let e=!1;if(t.triggerOptions.auto){const i=this.editor.getOption(118);i.selectionMode==="never"||i.selectionMode==="always"?e=i.selectionMode==="never":i.selectionMode==="whenTriggerCharacter"?e=t.triggerOptions.triggerKind!==1:i.selectionMode==="whenQuickSuggestion"&&(e=t.triggerOptions.triggerKind===1&&!t.triggerOptions.refilter)}this.widget.value.showSuggestions(t.completionModel,i,t.isFrozen,t.triggerOptions.auto,e)}))),this._toDispose.add(this.model.onDidCancel((t=>{t.retrigger||this.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((()=>{this.model.cancel(),this.model.clear()})));const c=ktt.AcceptSuggestionsOnEnter.bindTo(s),a=()=>{const t=this.editor.getOption(1);c.set(t==="on"||t==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration((()=>a()))),a()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(t,i){if(!t||!t.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(!this.editor.hasModel())return;const e=qtt.get(this.editor);if(!e)return;this._onWillInsertSuggestItem.fire({item:t.item});const s=this.editor.getModel(),n=s.getAlternativeVersionId(),{item:o}=t,r=[],h=new xe;1&i||this.editor.pushUndoStop();const c=this.getOverwriteInfo(o,!!(8&i));this._memoryService.memorize(s,this.editor.getPosition(),o);const a=o.isResolved;let l=-1,u=-1;if(Array.isArray(o.completion.additionalTextEdits)){this.model.cancel();const t=MJ.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",o.completion.additionalTextEdits.map((t=>{let i=Es.lift(t.range);if(i.startLineNumber===o.position.lineNumber&&i.startColumn>o.position.column){const t=this.editor.getPosition().column-o.position.column,e=t,s=Es.spansMultipleLines(i)?0:t;i=new Es(i.startLineNumber,i.startColumn+e,i.endLineNumber,i.endColumn+s)}return KQ.replaceMove(i,t.text)}))),t.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!a){const t=new re;let e;const n=s.onDidChangeContent((t=>{if(t.isFlush)return h.cancel(),void n.dispose();for(const i of t.changes){const t=Es.getEndPosition(i.range);e&&!Cs.isBefore(t,e)||(e=t)}})),c=i;i|=2;let a=!1;const l=this.editor.onWillType((()=>{l.dispose(),a=!0,2&c||this.editor.pushUndoStop()}));r.push(o.resolve(h.token).then((()=>{if(!o.completion.additionalTextEdits||h.token.isCancellationRequested)return;if(e&&o.completion.additionalTextEdits.some((t=>Cs.isBefore(e,Es.getStartPosition(t.range)))))return!1;a&&this.editor.pushUndoStop();const t=MJ.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",o.completion.additionalTextEdits.map((t=>KQ.replaceMove(Es.lift(t.range),t.text)))),t.restoreRelativeVerticalPositionOfCursor(this.editor),!a&&2&c||this.editor.pushUndoStop(),!0})).then((i=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",t.elapsed(),i),u=i===!0?1:i===!1?0:-2})).finally((()=>{n.dispose(),l.dispose()})))}let{insertText:d}=o.completion;if(4&o.completion.insertTextRules||(d=C0.escape(d)),this.model.cancel(),e.insert(d,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&o.completion.insertTextRules),clipboardText:t.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&i||this.editor.pushUndoStop(),o.completion.command)if(o.completion.command.id===get.id)this.model.trigger({auto:!0,retrigger:!0});else{const t=new re;r.push(this._commandService.executeCommand(o.completion.command.id,...o.completion.command.arguments?[...o.completion.command.arguments]:[]).catch((t=>{o.completion.extensionId?zi(t):Oi(t)})).finally((()=>{l=t.elapsed()})))}4&i&&this._alternatives.value.set(t,(t=>{for(h.cancel();s.canUndo();){n!==s.getAlternativeVersionId()&&s.undo(),this._insertSuggestion(t,3|(8&i?8:0));break}})),this._alertCompletionItem(o),Promise.all(r).finally((()=>{this._reportSuggestionAcceptedTelemetry(o,s,a,l,u),this.model.clear(),h.dispose()}))}_reportSuggestionAcceptedTelemetry(t,i,e,s,n){var o,r,h;Math.floor(100*Math.random())!==0&&this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:(r=(o=t.extensionId)===null||o===void 0?void 0:o.value)!==null&&r!==void 0?r:"unknown",providerId:(h=t.provider._debugDisplayName)!==null&&h!==void 0?h:"unknown",kind:t.completion.kind,basenameHash:Uh(BM(i.uri)).toString(16),languageId:i.getLanguageId(),fileExtension:DM(i.uri),resolveInfo:t.provider.resolveCompletionItem?e?1:0:-1,resolveDuration:t.resolveDuration,commandDuration:s,additionalEditsAsync:n})}getOverwriteInfo(t,i){Y(this.editor.hasModel());let e=this.editor.getOption(118).insertMode==="replace";i&&(e=!e);const s=t.position.column-t.editStart.column,n=(e?t.editReplaceEnd.column:t.editInsertEnd.column)-t.position.column;return{overwriteBefore:s+(this.editor.getPosition().column-t.position.column),overwriteAfter:n+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}}_alertCompletionItem(t){p(t.completion.additionalTextEdits)&&cw(st(0,"Accepting '{0}' made {1} additional edits",t.textLabel,t.completion.additionalTextEdits.length))}triggerSuggest(t,i,e){this.editor.hasModel()&&(this.model.trigger({auto:i!=null&&i,completionOptions:{providerFilter:t,kindFilter:e?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(t){if(!this.editor.hasModel())return;const i=this.editor.getPosition(),e=()=>{i.equals(this.editor.getPosition())&&this._commandService.executeCommand(t.fallback)},s=t=>{if(4&t.completion.insertTextRules||t.completion.additionalTextEdits)return!0;const i=this.editor.getPosition(),e=t.editStart.column,s=i.column;return s-e!==t.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:i.lineNumber,startColumn:e,endLineNumber:i.lineNumber,endColumn:s})!==t.completion.insertText};he.once(this.model.onDidTrigger)((t=>{const i=[];he.any(this.model.onDidTrigger,this.model.onDidCancel)((()=>{$i(i),e()}),void 0,i),this.model.onDidSuggest((({completionModel:t})=>{if($i(i),t.items.length===0)return void e();const n=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),t.items),o=t.items[n];s(o)?(this.editor.pushUndoStop(),this._insertSuggestion({index:n,item:o,model:t},7)):e()}),void 0,i)})),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(i,0),this.editor.focus()}acceptSelectedSuggestion(t,i){const e=this.widget.value.getFocusedItem();let s=0;t&&(s|=4),i&&(s|=8),this._insertSuggestion(e,s)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(t){return this._selectors.register(t)}};det.ID="editor.contrib.suggestController",det=het=cet([aet(1,dit),aet(2,$a),aet(3,Nl),aet(4,Oa),aet(5,au),aet(6,cu)],det);class fet{constructor(t){this.prioritySelector=t,this._items=new Array}register(t){if(this._items.indexOf(t)!==-1)throw new Error("Value is already registered");return this._items.push(t),this._items.sort(((t,i)=>this.prioritySelector(i)-this.prioritySelector(t))),{dispose:()=>{const i=this._items.indexOf(t);i>=0&&this._items.splice(i,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class get extends vu{constructor(){super({id:get.id,label:st(0,"Trigger Suggest"),alias:"Trigger Suggest",precondition:gl.and(QC.writable,QC.hasCompletionItemProvider,ktt.Visible.toNegated()),kbOpts:{kbExpr:QC.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(t,i,e){const s=det.get(i);if(!s)return;let n;e&&typeof e=="object"&&e.auto===!0&&(n=!0),s.triggerSuggest(void 0,n,void 0)}}get.id="editor.action.triggerSuggest",Bu(det.ID,det,2),Cu(get);const Aet=190,pet=mu.bindToContribution(det.get);xu(new pet({id:"acceptSelectedSuggestion",precondition:gl.and(ktt.Visible,ktt.HasFocusedSuggestion),handler(t){t.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:gl.and(ktt.Visible,QC.textInputFocus),weight:Aet},{primary:3,kbExpr:gl.and(ktt.Visible,QC.textInputFocus,ktt.AcceptSuggestionsOnEnter,ktt.MakesTextEdit),weight:Aet}],menuOpts:[{menuId:xtt,title:st(0,"Insert"),group:"left",order:1,when:ktt.HasInsertAndReplaceRange.toNegated()},{menuId:xtt,title:st(0,"Insert"),group:"left",order:1,when:gl.and(ktt.HasInsertAndReplaceRange,ktt.InsertMode.isEqualTo("insert"))},{menuId:xtt,title:st(0,"Replace"),group:"left",order:1,when:gl.and(ktt.HasInsertAndReplaceRange,ktt.InsertMode.isEqualTo("replace"))}]})),xu(new pet({id:"acceptAlternativeSelectedSuggestion",precondition:gl.and(ktt.Visible,QC.textInputFocus,ktt.HasFocusedSuggestion),kbOpts:{weight:Aet,kbExpr:QC.textInputFocus,primary:1027,secondary:[1026]},handler(t){t.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:xtt,group:"left",order:2,when:gl.and(ktt.HasInsertAndReplaceRange,ktt.InsertMode.isEqualTo("insert")),title:st(0,"Replace")},{menuId:xtt,group:"left",order:2,when:gl.and(ktt.HasInsertAndReplaceRange,ktt.InsertMode.isEqualTo("replace")),title:st(0,"Insert")}]})),Xa.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),xu(new pet({id:"hideSuggestWidget",precondition:ktt.Visible,handler:t=>t.cancelSuggestWidget(),kbOpts:{weight:Aet,kbExpr:QC.textInputFocus,primary:9,secondary:[1033]}})),xu(new pet({id:"selectNextSuggestion",precondition:gl.and(ktt.Visible,gl.or(ktt.MultipleSuggestions,ktt.HasFocusedSuggestion.negate())),handler:t=>t.selectNextSuggestion(),kbOpts:{weight:Aet,kbExpr:QC.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),xu(new pet({id:"selectNextPageSuggestion",precondition:gl.and(ktt.Visible,gl.or(ktt.MultipleSuggestions,ktt.HasFocusedSuggestion.negate())),handler:t=>t.selectNextPageSuggestion(),kbOpts:{weight:Aet,kbExpr:QC.textInputFocus,primary:12,secondary:[2060]}})),xu(new pet({id:"selectLastSuggestion",precondition:gl.and(ktt.Visible,gl.or(ktt.MultipleSuggestions,ktt.HasFocusedSuggestion.negate())),handler:t=>t.selectLastSuggestion()})),xu(new pet({id:"selectPrevSuggestion",precondition:gl.and(ktt.Visible,gl.or(ktt.MultipleSuggestions,ktt.HasFocusedSuggestion.negate())),handler:t=>t.selectPrevSuggestion(),kbOpts:{weight:Aet,kbExpr:QC.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),xu(new pet({id:"selectPrevPageSuggestion",precondition:gl.and(ktt.Visible,gl.or(ktt.MultipleSuggestions,ktt.HasFocusedSuggestion.negate())),handler:t=>t.selectPrevPageSuggestion(),kbOpts:{weight:Aet,kbExpr:QC.textInputFocus,primary:11,secondary:[2059]}})),xu(new pet({id:"selectFirstSuggestion",precondition:gl.and(ktt.Visible,gl.or(ktt.MultipleSuggestions,ktt.HasFocusedSuggestion.negate())),handler:t=>t.selectFirstSuggestion()})),xu(new pet({id:"focusSuggestion",precondition:gl.and(ktt.Visible,ktt.HasFocusedSuggestion.negate()),handler:t=>t.focusSuggestion(),kbOpts:{weight:Aet,kbExpr:QC.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}})),xu(new pet({id:"focusAndAcceptSuggestion",precondition:gl.and(ktt.Visible,ktt.HasFocusedSuggestion.negate()),handler:t=>{t.focusSuggestion(),t.acceptSelectedSuggestion(!0,!1)}})),xu(new pet({id:"toggleSuggestionDetails",precondition:gl.and(ktt.Visible,ktt.HasFocusedSuggestion),handler:t=>t.toggleSuggestionDetails(),kbOpts:{weight:Aet,kbExpr:QC.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:xtt,group:"right",order:1,when:gl.and(ktt.DetailsVisible,ktt.CanResolve),title:st(0,"show less")},{menuId:xtt,group:"right",order:1,when:gl.and(ktt.DetailsVisible.toNegated(),ktt.CanResolve),title:st(0,"show more")}]})),xu(new pet({id:"toggleExplainMode",precondition:ktt.Visible,handler:t=>t.toggleExplainMode(),kbOpts:{weight:100,primary:2138}})),xu(new pet({id:"toggleSuggestionFocus",precondition:ktt.Visible,handler:t=>t.toggleSuggestionFocus(),kbOpts:{weight:Aet,kbExpr:QC.textInputFocus,primary:2570,mac:{primary:778}}})),xu(new pet({id:"insertBestCompletion",precondition:gl.and(QC.textInputFocus,gl.equals("config.editor.tabCompletion","on"),pit.AtEnd,ktt.Visible.toNegated(),bit.OtherSuggestions.toNegated(),qtt.InSnippetMode.toNegated()),handler:(t,i)=>{t.triggerSuggestAndAcceptBest(Q(i)?{fallback:"tab",...i}:{fallback:"tab"})},kbOpts:{weight:Aet,primary:2}})),xu(new pet({id:"insertNextSuggestion",precondition:gl.and(QC.textInputFocus,gl.equals("config.editor.tabCompletion","on"),bit.OtherSuggestions,ktt.Visible.toNegated(),qtt.InSnippetMode.toNegated()),handler:t=>t.acceptNextSuggestion(),kbOpts:{weight:Aet,kbExpr:QC.textInputFocus,primary:2}})),xu(new pet({id:"insertPrevSuggestion",precondition:gl.and(QC.textInputFocus,gl.equals("config.editor.tabCompletion","on"),bit.OtherSuggestions,ktt.Visible.toNegated(),qtt.InSnippetMode.toNegated()),handler:t=>t.acceptPrevSuggestion(),kbOpts:{weight:Aet,kbExpr:QC.textInputFocus,primary:1026}})),Cu(class extends vu{constructor(){super({id:"editor.action.resetSuggestSize",label:st(0,"Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(t,i){var e;(e=det.get(i))===null||e===void 0||e.resetWidgetSize()}});class wet extends te{get selectedItem(){return this._selectedItem}constructor(t,i,e,s){super(),this.editor=t,this.suggestControllerPreselector=i,this.checkModelVersion=e,this.onWillAccept=s,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._selectedItem=Wz(this,void 0),this._register(t.onKeyDown((t=>{t.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))}))),this._register(t.onKeyUp((t=>{t.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))})));const n=det.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(t,i,e)=>{Uz((t=>this.checkModelVersion(t)));const s=this.editor.getModel();if(!s)return-1;const o=this.suggestControllerPreselector(),r=o?ctt(o,s):void 0;if(!r)return-1;const h=Cs.lift(i),c=Mg(e.map(((t,i)=>{const e=ctt(met.fromSuggestion(n,s,h,t,this.isShiftKeyPressed).toSingleTextEdit(),s);return{index:i,valid:att(r,e),prefixLength:e.text.length,suggestItem:t}})).filter((t=>t&&t.valid&&t.prefixLength>0)),M((t=>t.prefixLength),S));return c?c.index:-1}}));let t=!1;const i=()=>{t||(t=!0,this._register(n.widget.value.onDidShow((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))),this._register(n.widget.value.onDidHide((()=>{this.isSuggestWidgetVisible=!1,this.update(!1)}))),this._register(n.widget.value.onDidFocus((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))))};this._register(he.once(n.model.onDidTrigger)((t=>{i()}))),this._register(n.onWillInsertSuggestItem((t=>{const i=this.editor.getPosition(),e=this.editor.getModel();if(!i||!e)return;const s=met.fromSuggestion(n,e,i,t.item,this.isShiftKeyPressed);this.onWillAccept(s)})))}this.update(this._isActive)}update(t){const i=this.getSuggestItemInfo();this._isActive===t&&function(t,i){return t===i?!0:!t||!i?!1:t.equals(i)}(this._currentSuggestItemInfo,i)||(this._isActive=t,this._currentSuggestItemInfo=i,Uz((t=>{this.checkModelVersion(t),this._selectedItem.set(this._isActive?this._currentSuggestItemInfo:void 0,t)})))}getSuggestItemInfo(){const t=det.get(this.editor);if(!t||!this.isSuggestWidgetVisible)return;const i=t.widget.value.getFocusedItem(),e=this.editor.getPosition(),s=this.editor.getModel();return i&&e&&s?met.fromSuggestion(t,s,e,i.item,this.isShiftKeyPressed):void 0}stopForceRenderingAbove(){const t=det.get(this.editor);t==null||t.stopForceRenderingAbove()}forceRenderingAbove(){const t=det.get(this.editor);t==null||t.forceRenderingAbove()}}class met{static fromSuggestion(t,i,e,s,n){let{insertText:o}=s.completion,r=!1;if(4&s.completion.insertTextRules){const t=(new C0).parse(o);t.children.length<100&&Jtt.adjustWhitespace(i,e,!0,t),o=t.toString(),r=!0}const h=t.getOverwriteInfo(s,n);return new met(Es.fromPositions(e.delta(0,-h.overwriteBefore),e.delta(0,Math.max(h.overwriteAfter,0))),o,s.completion.kind,r)}constructor(t,i,e,s){this.range=t,this.insertText=i,this.completionItemKind=e,this.isSnippetText=s}equals(t){return this.range.equalsRange(t.range)&&this.insertText===t.insertText&&this.completionItemKind===t.completionItemKind&&this.isSnippetText===t.isSnippetText}toSelectedSuggestionInfo(){return new Hs(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new mK(this.range,this.insertText)}}var vet,bet=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},yet=function(t,i){return function(e,s){i(e,s,t)}};let ket=vet=class extends te{static get(t){return t.getContribution(vet.ID)}constructor(t,i,e,s,n,o,r,h,c){super(),this.editor=t,this._instantiationService=i,this._contextKeyService=e,this._configurationService=s,this._commandService=n,this._debounceService=o,this._languageFeaturesService=r,this._accessibilitySignalService=h,this._keybindingService=c,this.model=this._register(_z("inlineCompletionModel",void 0)),this._textModelVersionId=Wz(this,-1),this._positions=Wz(this,[new Cs(1,1)]),this._suggestWidgetAdaptor=this._register(new wet(this.editor,(()=>{var t,i;return(i=(t=this.model.get())===null||t===void 0?void 0:t.selectedInlineCompletion.get())===null||i===void 0?void 0:i.toSingleTextEdit(void 0)}),(t=>this.updateObservables(t,tit.Other)),(t=>{Uz((i=>{var e;this.updateObservables(i,tit.Other),(e=this.model.get())===null||e===void 0||e.handleSuggestAccepted(t)}))}))),this._enabled=rU(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(62).enabled)),this._fontFamily=rU(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(62).fontFamily)),this._ghostTexts=Gz(this,(t=>{var i;const e=this.model.read(t);return(i=e==null?void 0:e.ghostTexts.read(t))!==null&&i!==void 0?i:[]})),this._stablizedGhostTexts=function(t,i){const e=Wz("result",[]),s=[];return i.add(Zz((i=>{const n=t.read(i);Uz((t=>{if(n.length!==s.length){s.length=n.length;for(let t=0;t<s.length;t++)s[t]||(s[t]=Wz("item",n[t]));e.set([...s],t)}s.forEach(((i,e)=>i.set(n[e],t)))}))}))),e}(this._ghostTexts,this._store),this._ghostTextWidgets=function(t,i,e,s){let n=new gU(e,s);return Kz({debugReferenceFn:e,owner:t,onLastObserverRemoved:()=>{n.dispose(),n=new gU(e)}},(t=>(n.setItems(i.read(t)),n.getItems())))}(this,this._stablizedGhostTexts,((t,i)=>i.add(this._instantiationService.createInstance(Z7,this.editor,{ghostText:t,minReservedLineCount:nU(0),targetTextModel:this.model.map((t=>t==null?void 0:t.textModel))})))).recomputeInitiallyAndOnChange(this._store),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._playAccessibilitySignal=lU(this),this._isReadonly=rU(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(91))),this._textModel=rU(this.editor.onDidChangeModel,(()=>this.editor.getModel())),this._textModelIfWritable=Gz((t=>this._isReadonly.read(t)?void 0:this._textModel.read(t))),this._register(new H7(this._contextKeyService,this.model)),this._register(Zz((e=>{const s=this._textModelIfWritable.read(e);Uz((e=>{if(this.model.set(void 0,e),this.updateObservables(e,tit.Other),s){const n=i.createInstance(sit,s,this._suggestWidgetAdaptor.selectedItem,this._textModelVersionId,this._positions,this._debounceValue,rU(t.onDidChangeConfiguration,(()=>t.getOption(118).preview)),rU(t.onDidChangeConfiguration,(()=>t.getOption(118).previewMode)),rU(t.onDidChangeConfiguration,(()=>t.getOption(62).mode)),this._enabled);this.model.set(n,e)}}))})));const a=this._register(Oc());this._register(Zz((t=>{const i=this._fontFamily.read(t);a.setStyle(i===""||i==="default"?"":`\n.monaco-editor .ghost-text-decoration,\n.monaco-editor .ghost-text-decoration-preview,\n.monaco-editor .ghost-text {\n\tfont-family: ${i};\n}`)})));const l=t=>{var i;return t.isUndoing?tit.Undo:t.isRedoing?tit.Redo:!((i=this.model.get())===null||i===void 0)&&i.isAcceptingPartially?tit.AcceptWord:tit.Other};let u;this._register(t.onDidChangeModelContent((t=>Uz((i=>this.updateObservables(i,l(t))))))),this._register(t.onDidChangeCursorPosition((t=>Uz((i=>{var e;this.updateObservables(i,tit.Other),t.reason!==3&&t.source!=="api"||(e=this.model.get())===null||e===void 0||e.stop(i)}))))),this._register(t.onDidType((()=>Uz((t=>{var i;this.updateObservables(t,tit.Other),this._enabled.get()&&((i=this.model.get())===null||i===void 0||i.trigger(t))}))))),this._register(this._commandService.onDidExecuteCommand((i=>{new Set([_C.Tab.id,_C.DeleteLeft.id,_C.DeleteRight.id,s8,"acceptSelectedSuggestion"]).has(i.commandId)&&t.hasTextFocus()&&this._enabled.get()&&Uz((t=>{var i;(i=this.model.get())===null||i===void 0||i.trigger(t)}))}))),this._register(this.editor.onDidBlurEditorWidget((()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||t.getOption(62).keepOnBlur||d8.dropDownVisible||Uz((t=>{var i;(i=this.model.get())===null||i===void 0||i.stop(t)}))}))),this._register(Zz((t=>{var i;const e=(i=this.model.read(t))===null||i===void 0?void 0:i.state.read(t);e!=null&&e.suggestItem?e.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()}))),this._register(qi((()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()}))),this._register(iU({handleChange:(t,i)=>(t.didChange(this._playAccessibilitySignal)&&(u=void 0),!0)},(async t=>{this._playAccessibilitySignal.read(t);const i=this.model.read(t),e=i==null?void 0:i.state.read(t);if(i&&e&&e.inlineCompletion){if(e.inlineCompletion.semanticId!==u){u=e.inlineCompletion.semanticId;const t=i.textModel.getLineContent(e.primaryGhostText.lineNumber);this._accessibilitySignalService.playSignal(nJ.inlineSuggestion).then((()=>{this.editor.getOption(8)&&this.provideScreenReaderUpdate(e.primaryGhostText.renderForScreenReader(t))}))}}else u=void 0}))),this._register(new a8(this.editor,this.model,this._instantiationService)),this._register(this._configurationService.onDidChangeConfiguration((t=>{t.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}))),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(t){this._playAccessibilitySignal.trigger(t)}provideScreenReaderUpdate(t){const i=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),e=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let s;!i&&e&&this.editor.getOption(149)&&(s=st(0,"Inspect this in the accessible view ({0})",e.getAriaLabel())),cw(s?t+", "+s:t)}updateObservables(t,i){var e,s,n;const o=this.editor.getModel();this._textModelVersionId.set((e=o==null?void 0:o.getVersionId())!==null&&e!==void 0?e:-1,t,i),this._positions.set((n=(s=this.editor.getSelections())===null||s===void 0?void 0:s.map((t=>t.getPosition())))!==null&&n!==void 0?n:[new Cs(1,1)],t)}shouldShowHoverAt(t){var i;const e=(i=this.model.get())===null||i===void 0?void 0:i.primaryGhostText.get();return!!e&&e.parts.some((i=>t.containsPosition(new Cs(e.lineNumber,i.column))))}shouldShowHoverAtViewZone(t){var i,e;return(e=(i=this._ghostTextWidgets.get()[0])===null||i===void 0?void 0:i.ownsViewZone(t))!==null&&e!==void 0&&e}};ket.ID="editor.contrib.inlineCompletionsController",ket=vet=bet([yet(1,Oa),yet(2,Nl),yet(3,Id),yet(4,$a),yet(5,dR),yet(6,jA),yet(7,iJ),yet(8,Hx)],ket);class xet extends vu{constructor(){super({id:xet.ID,label:st(0,"Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:gl.and(QC.writable,H7.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(t,i){var e;const s=ket.get(i);(e=s==null?void 0:s.model.get())===null||e===void 0||e.next()}}xet.ID=o8;class Cet extends vu{constructor(){super({id:Cet.ID,label:st(0,"Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:gl.and(QC.writable,H7.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(t,i){var e;const s=ket.get(i);(e=s==null?void 0:s.model.get())===null||e===void 0||e.previous()}}Cet.ID=n8;class Eet extends vu{constructor(){super({id:Eet.ID,label:st(0,"Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:H7.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(t,i){const e=ket.get(i);Uz((t=>{var i;(i=e==null?void 0:e.model.get())===null||i===void 0||i.stop(t)}))}}Eet.ID="editor.action.inlineSuggest.hide";class Bet extends ru{constructor(){super({id:Bet.ID,title:st(0,"Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:tu.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:gl.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(t,i){const e=t.get(Id),s=e.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";e.updateValue("editor.inlineSuggest.showToolbar",s)}}Bet.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var Det=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Met=function(t,i){return function(e,s){i(e,s,t)}};class Fet{constructor(t,i,e){this.owner=t,this.range=i,this.controller=e}isValidForHoverAnchor(t){return t.type===1&&this.range.startColumn<=t.range.startColumn&&this.range.endColumn>=t.range.endColumn}}let Iet=class{constructor(t,i,e,s,n,o){this._editor=t,this._languageService=i,this._openerService=e,this.accessibilityService=s,this._instantiationService=n,this._telemetryService=o,this.hoverOrdinal=4}suggestHoverAnchor(t){const i=ket.get(this._editor);if(!i)return null;const e=t.target;if(e.type===8){const s=e.detail;if(i.shouldShowHoverAtViewZone(s.viewZoneId))return new J3(1e3,this,Es.fromPositions(this._editor.getModel().validatePosition(s.positionBefore||s.position)),t.event.posx,t.event.posy,!1)}return e.type===7&&i.shouldShowHoverAt(e.range)?new J3(1e3,this,e.range,t.event.posx,t.event.posy,!1):e.type===6&&e.detail.mightBeForeignElement&&i.shouldShowHoverAt(e.range)?new J3(1e3,this,e.range,t.event.posx,t.event.posy,!1):null}computeSync(t,i){if(this._editor.getOption(62).showToolbar!=="onHover")return[];const e=ket.get(this._editor);return e&&e.shouldShowHoverAt(t.range)?[new Fet(this,t.range,e)]:[]}renderHoverParts(t,i){const e=new Zi,s=i[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&this.renderScreenReaderText(t,s,e);const n=s.controller.model.get(),o=this._instantiationService.createInstance(d8,this._editor,!1,nU(null),n.selectedInlineCompletionIndex,n.inlineCompletionsCount,n.selectedInlineCompletion.map((t=>{var i;return(i=t==null?void 0:t.inlineCompletion.source.inlineCompletions.commands)!==null&&i!==void 0?i:[]})));return t.fragment.appendChild(o.getDomNode()),n.triggerExplicitly(),e.add(o),e}renderScreenReaderText(t,i,e){const s=ha,n=s("div.hover-row.markdown-hover"),o=ia(n,s("div.hover-contents",{"aria-live":"assertive"})),r=e.add(new pQ({editor:this._editor},this._languageService,this._openerService));e.add(Zz((s=>{var n;const h=(n=i.controller.model.read(s))===null||n===void 0?void 0:n.primaryGhostText.read(s);if(h){const i=this._editor.getModel().getLineContent(h.lineNumber);(i=>{e.add(r.onDidRenderAsync((()=>{o.className="hover-contents code-hover-contents",t.onContentsChanged()})));const s=st(0,"Suggestion:"),n=e.add(r.render((new RN).appendText(s).appendCodeblock("text",i)));o.replaceChildren(n.element)})(h.renderForScreenReader(i))}else sa(o)}))),t.fragment.appendChild(n)}};function Let(t,i){let e=0;for(let s=0;s<t.length;s++)t.charAt(s)==="\t"?e+=i:e++;return e}function Ret(t,i,e){t=t<0?0:t;let s="";if(!e){const e=Math.floor(t/i);t%=i;for(let t=0;t<e;t++)s+="\t"}for(let i=0;i<t;i++)s+=" ";return s}function Tet(t,i,e,s,n){if(t.getLineCount()===1&&t.getLineMaxColumn(1)===1)return[];const o=i.getLanguageConfiguration(t.getLanguageId()).indentationRules;if(!o)return[];for(s=Math.min(s,t.getLineCount());e<=s&&o.unIndentedLinePattern;){const i=t.getLineContent(e);if(!o.unIndentedLinePattern.test(i))break;e++}if(e>s-1)return[];const{tabSize:r,indentSize:h,insertSpaces:c}=t.getOptions(),a=(t,i)=>(i=i||1,xC.shiftIndent(t,t.length+i,r,h,c)),l=(t,i)=>(i=i||1,xC.unshiftIndent(t,t.length+i,r,h,c)),u=[];let d;const f=t.getLineContent(e);let g=f;if(n!=null){d=n;const t=no(f);g=d+f.substring(t.length),o.decreaseIndentPattern&&o.decreaseIndentPattern.test(g)&&(d=l(d),g=d+f.substring(t.length)),f!==g&&u.push(KQ.replaceMove(new Bs(e,1,e,t.length+1),Vx(d,h,c)))}else d=no(f);let A=d;o.increaseIndentPattern&&o.increaseIndentPattern.test(g)?(A=a(A),d=a(d)):o.indentNextLinePattern&&o.indentNextLinePattern.test(g)&&(A=a(A));for(let i=++e;i<=s;i++){const e=t.getLineContent(i),s=no(e),n=A+e.substring(s.length);o.decreaseIndentPattern&&o.decreaseIndentPattern.test(n)&&(A=l(A),d=l(d)),s!==A&&u.push(KQ.replaceMove(new Bs(i,1,i,s.length+1),Vx(A,h,c))),o.unIndentedLinePattern&&o.unIndentedLinePattern.test(e)||(o.increaseIndentPattern&&o.increaseIndentPattern.test(n)?(d=a(d),A=d):A=o.indentNextLinePattern&&o.indentNextLinePattern.test(n)?a(A):d)}return u}Iet=Det([Met(1,Od),Met(2,gT),Met(3,yw),Met(4,Oa),Met(5,cu)],Iet),Bu(ket.ID,ket,3),Cu(class extends vu{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:st(0,"Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:QC.writable})}async run(t,i){const e=ket.get(i);await async function(t,i){const e=new jz(t,i);try{await t(e)}finally{e.finish()}}((async t=>{var i;await((i=e==null?void 0:e.model.get())===null||i===void 0?void 0:i.triggerExplicitly(t)),e==null||e.playAccessibilitySignal(t)}))}}),Cu(xet),Cu(Cet),Cu(class extends vu{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:st(0,"Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:gl.and(QC.writable,H7.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:gl.and(QC.writable,H7.inlineSuggestionVisible)},menuOpts:[{menuId:tu.InlineSuggestionToolbar,title:st(0,"Accept Word"),group:"primary",order:2}]})}async run(t,i){var e;const s=ket.get(i);await((e=s==null?void 0:s.model.get())===null||e===void 0?void 0:e.acceptNextWord(s.editor))}}),Cu(class extends vu{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:st(0,"Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:gl.and(QC.writable,H7.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:tu.InlineSuggestionToolbar,title:st(0,"Accept Line"),group:"secondary",order:2}]})}async run(t,i){var e;const s=ket.get(i);await((e=s==null?void 0:s.model.get())===null||e===void 0?void 0:e.acceptNextLine(s.editor))}}),Cu(class extends vu{constructor(){super({id:s8,label:st(0,"Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:H7.inlineSuggestionVisible,menuOpts:[{menuId:tu.InlineSuggestionToolbar,title:st(0,"Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:gl.and(H7.inlineSuggestionVisible,QC.tabMovesFocus.toNegated(),H7.inlineSuggestionHasIndentationLessThanTabSize,ktt.Visible.toNegated(),QC.hoverFocused.toNegated())}})}async run(t,i){var e;const s=ket.get(i);s&&((e=s.model.get())===null||e===void 0||e.accept(s.editor),s.editor.focus())}}),Cu(Eet),hu(Bet),G3.register(Iet);var Net=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Qet=function(t,i){return function(e,s){i(e,s,t)}};class Oet extends vu{constructor(){super({id:Oet.ID,label:st(0,"Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:QC.writable})}run(t,i){const e=i.getModel();if(!e)return;const s=e.getOptions(),n=i.getSelection();if(!n)return;const o=new Jet(n,s.tabSize);i.pushUndoStop(),i.executeCommands(this.id,[o]),i.pushUndoStop(),e.updateOptions({insertSpaces:!0})}}Oet.ID="editor.action.indentationToSpaces";class zet extends vu{constructor(){super({id:zet.ID,label:st(0,"Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:QC.writable})}run(t,i){const e=i.getModel();if(!e)return;const s=e.getOptions(),n=i.getSelection();if(!n)return;const o=new Get(n,s.tabSize);i.pushUndoStop(),i.executeCommands(this.id,[o]),i.pushUndoStop(),e.updateOptions({insertSpaces:!1})}}zet.ID="editor.action.indentationToTabs";class Uet extends vu{constructor(t,i,e){super(e),this.insertSpaces=t,this.displaySizeOnly=i}run(t,i){const e=t.get(kP),s=t.get(Ha),n=i.getModel();if(!n)return;const o=s.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget),r=n.getOptions(),h=[1,2,3,4,5,6,7,8].map((t=>({id:t.toString(),label:t.toString(),description:t===o.tabSize&&t===r.tabSize?st(0,"Configured Tab Size"):t===o.tabSize?st(0,"Default Tab Size"):t===r.tabSize?st(0,"Current Tab Size"):void 0}))),c=Math.min(n.getOptions().tabSize-1,7);setTimeout((()=>{e.pick(h,{placeHolder:st(0,"Select Tab Size for Current File"),activeItem:h[c]}).then((t=>{if(t&&n&&!n.isDisposed()){const i=parseInt(t.label,10);this.displaySizeOnly?n.updateOptions({tabSize:i}):n.updateOptions({tabSize:i,indentSize:i,insertSpaces:this.insertSpaces})}}))}),50)}}class Het extends Uet{constructor(){super(!1,!1,{id:Het.ID,label:st(0,"Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}Het.ID="editor.action.indentUsingTabs";class Pet extends Uet{constructor(){super(!0,!1,{id:Pet.ID,label:st(0,"Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}Pet.ID="editor.action.indentUsingSpaces";class jet extends Uet{constructor(){super(!0,!0,{id:jet.ID,label:st(0,"Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0})}}jet.ID="editor.action.changeTabDisplaySize";class Wet extends vu{constructor(){super({id:Wet.ID,label:st(0,"Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(t,i){const e=t.get(Ha),s=i.getModel();if(!s)return;const n=e.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget);s.detectIndentation(n.insertSpaces,n.tabSize)}}Wet.ID="editor.action.detectIndentation";class Yet{constructor(t,i){this._initialSelection=i,this._edits=[],this._selectionId=null;for(const i of t)i.range&&typeof i.text=="string"&&this._edits.push(i)}getEditOperations(t,i){for(const t of this._edits)i.addEditOperation(Es.lift(t.range),t.text);let e=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(e=!0,this._selectionId=i.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(e=!0,this._selectionId=i.trackSelection(this._initialSelection,!1))),e||(this._selectionId=i.trackSelection(this._initialSelection))}computeCursorState(t,i){return i.getTrackedSelection(this._selectionId)}}let _et=class{constructor(t,i){this.editor=t,this._languageConfigurationService=i,this.callOnDispose=new Zi,this.callOnModel=new Zi,this.callOnDispose.add(t.onDidChangeConfiguration((()=>this.update()))),this.callOnDispose.add(t.onDidChangeModel((()=>this.update()))),this.callOnDispose.add(t.onDidChangeModelLanguage((()=>this.update())))}update(){this.callOnModel.clear(),this.editor.getOption(12)<4||this.editor.getOption(55)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((({range:t})=>{this.trigger(t)})))}trigger(t){const i=this.editor.getSelections();if(i===null||i.length>1)return;const e=this.editor.getModel();if(!e||!e.tokenization.isCheapToTokenize(t.getStartPosition().lineNumber))return;const s=this.editor.getOption(12),{tabSize:n,indentSize:o,insertSpaces:r}=e.getOptions(),h=[],c={shiftIndent:t=>xC.shiftIndent(t,t.length+1,n,o,r),unshiftIndent:t=>xC.unshiftIndent(t,t.length+1,n,o,r)};let a=t.startLineNumber;for(;a<=t.endLineNumber&&this.shouldIgnoreLine(e,a);)a++;if(a>t.endLineNumber)return;let l=e.getLineContent(a);if(!/\S/.test(l.substring(0,t.startColumn-1))){const t=DC(s,e,e.getLanguageId(),a,c,this._languageConfigurationService);if(t!==null){const i=no(l),s=Let(t,n);if(s!==Let(i,n)){const t=Ret(s,n,r);h.push({range:new Es(a,1,a,i.length+1),text:t}),l=t+l.substr(i.length)}else{const t=MC(e,a,this._languageConfigurationService);if(t===0||t===8)return}}}const u=a;for(;a<t.endLineNumber&&!/\S/.test(e.getLineContent(a+1));)a++;if(a!==t.endLineNumber){const i=DC(s,{tokenization:{getLineTokens:t=>e.tokenization.getLineTokens(t),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(t,i)=>e.getLanguageIdAtPosition(t,i)},getLineContent:t=>t===u?l:e.getLineContent(t)},e.getLanguageId(),a+1,c,this._languageConfigurationService);if(i!==null){const s=Let(i,n),o=Let(no(e.getLineContent(a+1)),n);if(s!==o){const i=s-o;for(let s=a+1;s<=t.endLineNumber;s++){const t=no(e.getLineContent(s)),o=Ret(Let(t,n)+i,n,r);o!==t&&h.push({range:new Es(s,1,s,t.length+1),text:o})}}}}if(h.length>0){this.editor.pushUndoStop();const t=new Yet(h,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",t),this.editor.pushUndoStop()}}shouldIgnoreLine(t,i){t.tokenization.forceTokenization(i);const e=t.getLineFirstNonWhitespaceColumn(i);if(e===0)return!0;const s=t.tokenization.getLineTokens(i);if(s.getCount()>0){const t=s.findTokenIndexAtOffset(e);if(t>=0&&s.getStandardTokenType(t)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};function Vet(t,i,e,s){if(t.getLineCount()===1&&t.getLineMaxColumn(1)===1)return;let n="";for(let t=0;t<e;t++)n+=" ";const o=new RegExp(n,"gi");for(let e=1,r=t.getLineCount();e<=r;e++){let r=t.getLineFirstNonWhitespaceColumn(e);if(r===0&&(r=t.getLineMaxColumn(e)),r===1)continue;const h=new Es(e,1,e,r),c=t.getValueInRange(h),a=s?c.replace(/\t/gi,n):c.replace(o,"\t");i.addEditOperation(h,a)}}_et.ID="editor.contrib.autoIndentOnPaste",_et=Net([Qet(1,uf)],_et);class Jet{constructor(t,i){this.selection=t,this.tabSize=i,this.selectionId=null}getEditOperations(t,i){this.selectionId=i.trackSelection(this.selection),Vet(t,i,this.tabSize,!0)}computeCursorState(t,i){return i.getTrackedSelection(this.selectionId)}}class Get{constructor(t,i){this.selection=t,this.tabSize=i,this.selectionId=null}getEditOperations(t,i){this.selectionId=i.trackSelection(this.selection),Vet(t,i,this.tabSize,!1)}computeCursorState(t,i){return i.getTrackedSelection(this.selectionId)}}Bu(_et.ID,_et,2),Cu(Oet),Cu(zet),Cu(Het),Cu(Pet),Cu(jet),Cu(Wet),Cu(class extends vu{constructor(){super({id:"editor.action.reindentlines",label:st(0,"Reindent Lines"),alias:"Reindent Lines",precondition:QC.writable})}run(t,i){const e=t.get(uf),s=i.getModel();if(!s)return;const n=Tet(s,e,1,s.getLineCount());n.length>0&&(i.pushUndoStop(),i.executeEdits(this.id,n),i.pushUndoStop())}}),Cu(class extends vu{constructor(){super({id:"editor.action.reindentselectedlines",label:st(0,"Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:QC.writable})}run(t,i){const e=t.get(uf),s=i.getModel();if(!s)return;const n=i.getSelections();if(n===null)return;const o=[];for(const t of n){let i=t.startLineNumber,n=t.endLineNumber;if(i!==n&&t.endColumn===1&&n--,i===1){if(i===n)continue}else i--;const r=Tet(s,e,i,n);o.push(...r)}o.length>0&&(i.pushUndoStop(),i.executeEdits(this.id,o),i.pushUndoStop())}});class Ket{constructor(t,i){this.range=t,this.direction=i}}class $et{constructor(t,i,e){this.hint=t,this.anchor=i,this.provider=e,this._isResolved=!1}with(t){const i=new $et(this.hint,t.anchor,this.provider);return i._isResolved=this._isResolved,i._currentResolve=this._currentResolve,i}async resolve(t){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return await this._currentResolve,t.isCancellationRequested?void 0:this.resolve(t);this._isResolved||(this._currentResolve=this._doResolve(t).finally((()=>this._currentResolve=void 0))),await this._currentResolve}}async _doResolve(t){var i,e,s;try{const n=await Promise.resolve(this.provider.resolveInlayHint(this.hint,t));this.hint.tooltip=(i=n==null?void 0:n.tooltip)!==null&&i!==void 0?i:this.hint.tooltip,this.hint.label=(e=n==null?void 0:n.label)!==null&&e!==void 0?e:this.hint.label,this.hint.textEdits=(s=n==null?void 0:n.textEdits)!==null&&s!==void 0?s:this.hint.textEdits,this._isResolved=!0}catch(t){zi(t),this._isResolved=!1}}}class Xet{static async create(t,i,e,s){const n=[],o=t.ordered(i).reverse().map((t=>e.map((async e=>{try{const o=await t.provideInlayHints(i,e,s);(o!=null&&o.hints.length||t.onDidChangeInlayHints)&&n.push([o??Xet._emptyInlayHintList,t])}catch(t){zi(t)}}))));if(await Promise.all(o.flat()),s.isCancellationRequested||i.isDisposed())throw new ji;return new Xet(e,n,i)}constructor(t,i,e){this._disposables=new Zi,this.ranges=t,this.provider=new Set;const s=[];for(const[t,n]of i){this._disposables.add(t),this.provider.add(n);for(const i of t.hints){const t=e.validatePosition(i.position);let o="before";const r=Xet._getRangeAtPosition(e,t);let h;r.getStartPosition().isBefore(t)?(h=Es.fromPositions(r.getStartPosition(),t),o="after"):(h=Es.fromPositions(t,r.getEndPosition()),o="before"),s.push(new $et(i,new Ket(h,o),n))}}this.items=s.sort(((t,i)=>Cs.compare(t.hint.position,i.hint.position)))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(t,i){const e=i.lineNumber,s=t.getWordAtPosition(i);if(s)return new Es(e,s.startColumn,e,s.endColumn);t.tokenization.tokenizeIfCheap(e);const n=t.tokenization.getLineTokens(e),o=i.column-1,r=n.findTokenIndexAtOffset(o);let h=n.getStartOffset(r),c=n.getEndOffset(r);return c-h==1&&(h===o&&r>1?(h=n.getStartOffset(r-1),c=n.getEndOffset(r-1)):c===o&&r<n.getCount()-1&&(h=n.getStartOffset(r+1),c=n.getEndOffset(r+1))),new Es(e,h+1,e,c+1)}}async function qet(t,i,e,s){var n;const o=t.get(Pa),r=t.get(aT),h=t.get($a),c=t.get(Oa),a=t.get(wL);if(await s.item.resolve(ye.None),!s.part.location)return;const l=s.part.location,u=[],d=new Set(su.getMenuItems(tu.EditorContext).map((t=>Zl(t)?t.command.id:jZ())));for(const t of R3.all())d.has(t.desc.id)&&u.push(new ja(t.desc.id,ou.label(t.desc,{renderShortTitle:!0}),void 0,!0,(async()=>{const e=await o.createModelReference(l.uri);try{const n=new L3(e.object.textEditorModel,Es.getStartPosition(l.range)),o=s.item.anchor.range;await c.invokeFunction(t.runEditorCommand.bind(t),i,n,o)}finally{e.dispose()}})));if(s.part.command){const{command:t}=s.part;u.push(new Ya),u.push(new ja(t.id,t.title,void 0,!0,(async()=>{var i;try{await h.executeCommand(t.id,...(i=t.arguments)!==null&&i!==void 0?i:[])}catch(t){a.notify({severity:pL.Error,source:s.item.provider.displayName,message:t})}})))}const f=i.getOption(127);r.showContextMenu({domForShadowRoot:f&&(n=i.getDomNode())!==null&&n!==void 0?n:void 0,getAnchor:()=>{const t=yc(e);return{x:t.left,y:t.top+t.height+8}},getActions:()=>u,onHide:()=>{i.focus()},autoSelectFirstItem:!0})}async function Zet(t,i,e,s){const n=t.get(Pa),o=await n.createModelReference(s.uri);await e.invokeWithinContext((async t=>{const n=i.hasSideBySideModifier,r=t.get(Nl),h=D4.inPeekEditor.getValue(r),c=!n&&e.getOption(88)&&!h;return new T3({openToSide:n,openInPeek:c,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(t,new L3(o.object.textEditorModel,Es.getStartPosition(s.range)),Es.lift(s.range))})),o.dispose()}Xet._emptyInlayHintList=Object.freeze({dispose(){},hints:[]});var tst,ist=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},est=function(t,i){return function(e,s){i(e,s,t)}};class sst{constructor(){this._entries=new Kf(50)}get(t){const i=sst._key(t);return this._entries.get(i)}set(t,i){const e=sst._key(t);this._entries.set(e,i)}static _key(t){return`${t.uri.toString()}/${t.getVersionId()}`}}const nst=za("IInlayHintsCache");Hd(nst,sst,1);class ost{constructor(t,i){this.item=t,this.index=i}get part(){const t=this.item.hint.label;return typeof t=="string"?{label:t}:t[this.index]}}class rst{constructor(t,i){this.part=t,this.hasTriggerModifier=i}}let hst=tst=class{static get(t){var i;return(i=t.getContribution(tst.ID))!==null&&i!==void 0?i:void 0}constructor(t,i,e,s,n,o,r){this._editor=t,this._languageFeaturesService=i,this._inlayHintsCache=s,this._commandService=n,this._notificationService=o,this._instaService=r,this._disposables=new Zi,this._sessionDisposables=new Zi,this._decorationsMetadata=new Map,this._ruleFactory=new Xb(this._editor),this._activeRenderMode=0,this._debounceInfo=e.for(i.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(i.inlayHintsProvider.onDidChange((()=>this._update()))),this._disposables.add(t.onDidChangeModel((()=>this._update()))),this._disposables.add(t.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(t.onDidChangeConfiguration((t=>{t.hasChanged(141)&&this._update()}))),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const t=this._editor.getOption(141);if(t.enabled==="off")return;const i=this._editor.getModel();if(!i||!this._languageFeaturesService.inlayHintsProvider.has(i))return;if(t.enabled==="on")this._activeRenderMode=0;else{let i,e;t.enabled==="onUnlessPressed"?(i=0,e=1):(i=1,e=0),this._activeRenderMode=i,this._sessionDisposables.add(pa.getInstance().event((t=>{if(!this._editor.hasModel())return;const s=t.altKey&&t.ctrlKey&&!t.shiftKey&&!t.metaKey?e:i;if(s!==this._activeRenderMode){this._activeRenderMode=s;const t=this._editor.getModel(),i=this._copyInlayHintsWithCurrentAnchor(t);this._updateHintsDecorators([t.getFullModelRange()],i),o.schedule(0)}})))}const e=this._inlayHintsCache.get(i);let s;e&&this._updateHintsDecorators([i.getFullModelRange()],e),this._sessionDisposables.add(qi((()=>{i.isDisposed()||this._cacheHintsForFastRestore(i)})));const n=new Set,o=new Er((async()=>{const t=Date.now();s==null||s.dispose(!0),s=new xe;const e=i.onWillDispose((()=>s==null?void 0:s.cancel()));try{const e=s.token,r=await Xet.create(this._languageFeaturesService.inlayHintsProvider,i,this._getHintsRanges(),e);if(o.delay=this._debounceInfo.update(i,Date.now()-t),e.isCancellationRequested)return void r.dispose();for(const t of r.provider)typeof t.onDidChangeInlayHints!="function"||n.has(t)||(n.add(t),this._sessionDisposables.add(t.onDidChangeInlayHints((()=>{o.isScheduled()||o.schedule()}))));this._sessionDisposables.add(r),this._updateHintsDecorators(r.ranges,r.items),this._cacheHintsForFastRestore(i)}catch(t){Oi(t)}finally{s.dispose(),e.dispose()}}),this._debounceInfo.get(i));this._sessionDisposables.add(o),this._sessionDisposables.add(qi((()=>s==null?void 0:s.dispose(!0)))),o.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange((t=>{!t.scrollTopChanged&&o.isScheduled()||o.schedule()}))),this._sessionDisposables.add(this._editor.onDidChangeModelContent((t=>{s==null||s.cancel();const i=Math.max(o.delay,1250);o.schedule(i)}))),this._sessionDisposables.add(this._installDblClickGesture((()=>o.schedule(0)))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const t=new Zi,i=t.add(new g4(this._editor)),e=new Zi;return t.add(e),t.add(i.onMouseMoveOrRelevantKeyDown((t=>{const[i]=t,s=this._getInlayHintLabelPart(i),n=this._editor.getModel();if(!s||!n)return void e.clear();const o=new xe;e.add(qi((()=>o.dispose(!0)))),s.item.resolve(o.token),this._activeInlayHintPart=s.part.command||s.part.location?new rst(s,i.hasTriggerModifier):void 0;const r=n.validatePosition(s.item.hint.position).lineNumber,h=new Es(r,1,r,n.getLineMaxColumn(r)),c=this._getInlineHintsForRange(h);this._updateHintsDecorators([h],c),e.add(qi((()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([h],c)})))}))),t.add(i.onCancel((()=>e.clear()))),t.add(i.onExecute((async t=>{const i=this._getInlayHintLabelPart(t);if(i){const e=i.part;e.location?this._instaService.invokeFunction(Zet,t,this._editor,e.location):Ys.is(e.command)&&await this._invokeCommand(e.command,i.item)}}))),t}_getInlineHintsForRange(t){const i=new Set;for(const e of this._decorationsMetadata.values())t.containsRange(e.item.anchor.range)&&i.add(e.item);return Array.from(i)}_installDblClickGesture(t){return this._editor.onMouseUp((async i=>{if(i.event.detail!==2)return;const e=this._getInlayHintLabelPart(i);if(e&&(i.event.preventDefault(),await e.item.resolve(ye.None),p(e.item.hint.textEdits))){const i=e.item.hint.textEdits.map((t=>KQ.replace(Es.lift(t.range),t.text)));this._editor.executeEdits("inlayHint.default",i),t()}}))}_installContextMenu(){return this._editor.onContextMenu((async t=>{if(!(t.event.target instanceof HTMLElement))return;const i=this._getInlayHintLabelPart(t);i&&await this._instaService.invokeFunction(qet,this._editor,t.event.target,i)}))}_getInlayHintLabelPart(t){var i;if(t.target.type!==6)return;const e=(i=t.target.detail.injectedText)===null||i===void 0?void 0:i.options;return e instanceof BF&&(e==null?void 0:e.attachedData)instanceof ost?e.attachedData:void 0}async _invokeCommand(t,i){var e;try{await this._commandService.executeCommand(t.id,...(e=t.arguments)!==null&&e!==void 0?e:[])}catch(t){this._notificationService.notify({severity:pL.Error,source:i.provider.displayName,message:t})}}_cacheHintsForFastRestore(t){const i=this._copyInlayHintsWithCurrentAnchor(t);this._inlayHintsCache.set(t,i)}_copyInlayHintsWithCurrentAnchor(t){const i=new Map;for(const[e,s]of this._decorationsMetadata){if(i.has(s.item))continue;const n=t.getDecorationRange(e);if(n){const t=new Ket(n,s.item.anchor.direction),e=s.item.with({anchor:t});i.set(s.item,e)}}return Array.from(i.values())}_getHintsRanges(){const t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),e=[];for(const s of i.sort(Es.compareRangesUsingStarts)){const i=t.validateRange(new Es(s.startLineNumber-30,s.startColumn,s.endLineNumber+30,s.endColumn));e.length!==0&&Es.areIntersectingOrTouching(e[e.length-1],i)?e[e.length-1]=Es.plusRange(e[e.length-1],i):e.push(i)}return e}_updateHintsDecorators(t,i){var e,s;const n=[],o=(t,i,e,s,o)=>{const r={content:e,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:i.className,cursorStops:s,attachedData:o};n.push({item:t,classNameRef:i,decoration:{range:t.anchor.range,options:{description:"InlayHint",showIfCollapsed:t.anchor.range.isEmpty(),collapseOnReplaceEdit:!t.anchor.range.isEmpty(),stickiness:0,[t.anchor.direction]:this._activeRenderMode===0?r:void 0}}})},r=(t,i)=>{const e=this._ruleFactory.createClassNameRef({width:(h/3|0)+"px",display:"inline-block"});o(t,e," ",i?sg.Right:sg.None)},{fontSize:h,fontFamily:c,padding:a,isUniform:l}=this._getLayoutInfo(),u="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(u,c);let d={line:0,totalLen:0};for(const t of i){if(d.line!==t.anchor.range.startLineNumber&&(d={line:t.anchor.range.startLineNumber,totalLen:0}),d.totalLen>tst._MAX_LABEL_LEN)continue;t.hint.paddingLeft&&r(t,!1);const i=typeof t.hint.label=="string"?[{label:t.hint.label}]:t.hint.label;for(let s=0;s<i.length;s++){const n=i[s],r=s===0,c=s===i.length-1,f={fontSize:`${h}px`,fontFamily:`var(${u}), ${Li.fontFamily}`,verticalAlign:l?"baseline":"middle",unicodeBidi:"isolate"};p(t.hint.textEdits)&&(f.cursor="default"),this._fillInColors(f,t.hint),(n.command||n.location)&&((e=this._activeInlayHintPart)===null||e===void 0?void 0:e.part.item)===t&&this._activeInlayHintPart.part.index===s&&(f.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(f.color=Ik(vm),f.cursor="pointer")),a&&(r&&c?(f.padding=`1px ${0|Math.max(1,h/4)}px`,f.borderRadius=(h/4|0)+"px"):r?(f.padding=`1px 0 1px ${0|Math.max(1,h/4)}px`,f.borderRadius=`${h/4|0}px 0 0 ${h/4|0}px`):c?(f.padding=`1px ${0|Math.max(1,h/4)}px 1px 0`,f.borderRadius=`0 ${h/4|0}px ${h/4|0}px 0`):f.padding="1px 0 1px 0");let g=n.label;d.totalLen+=g.length;let A=!1;const w=d.totalLen-tst._MAX_LABEL_LEN;if(w>0&&(g=g.slice(0,-w)+"…",A=!0),o(t,this._ruleFactory.createClassNameRef(f),cst(g),c&&!t.hint.paddingRight?sg.Right:sg.None,new ost(t,s)),A)break}if(t.hint.paddingRight&&r(t,!0),n.length>tst._MAX_DECORATORS)break}const f=[];for(const[i,e]of this._decorationsMetadata){const n=(s=this._editor.getModel())===null||s===void 0?void 0:s.getDecorationRange(i);n&&t.some((t=>t.containsRange(n)))&&(f.push(i),e.classNameRef.dispose(),this._decorationsMetadata.delete(i))}const g=MJ.capture(this._editor);this._editor.changeDecorations((t=>{const i=t.deltaDecorations(f,n.map((t=>t.decoration)));for(let t=0;t<i.length;t++){const e=n[t];this._decorationsMetadata.set(i[t],e)}})),g.restore(this._editor)}_fillInColors(t,i){i.kind===_s.Parameter?(t.backgroundColor=Ik(Tm),t.color=Ik(Rm)):i.kind===_s.Type?(t.backgroundColor=Ik(Lm),t.color=Ik(Im)):(t.backgroundColor=Ik(Fm),t.color=Ik(Sm))}_getLayoutInfo(){const t=this._editor.getOption(141),i=t.padding,e=this._editor.getOption(52),s=this._editor.getOption(49);let n=t.fontSize;(!n||n<5||n>e)&&(n=e);const o=t.fontFamily||s;return{fontSize:n,fontFamily:o,padding:i,isUniform:!i&&o===s&&n===e}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const t of this._decorationsMetadata.values())t.classNameRef.dispose();this._decorationsMetadata.clear()}};function cst(t){return t.replace(/[ \t]/g," ")}hst.ID="editor.contrib.InlayHints",hst._MAX_DECORATORS=1500,hst._MAX_LABEL_LEN=43,hst=tst=ist([est(1,jA),est(2,dR),est(3,nst),est(4,$a),est(5,wL),est(6,Oa)],hst),Xa.registerCommand("_executeInlayHintProvider",(async(t,...i)=>{const[e,s]=i;Y(fs.isUri(e)),Y(Es.isIRange(s));const{inlayHintsProvider:n}=t.get(jA),o=await t.get(Pa).createModelReference(e);try{const t=await Xet.create(n,o.object.textEditorModel,[Es.lift(s)],ye.None),i=t.items.map((t=>t.hint));return setTimeout((()=>t.dispose()),0),i}finally{o.dispose()}}));var ast=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},lst=function(t,i){return function(e,s){i(e,s,t)}};class ust extends J3{constructor(t,i,e,s){super(10,i,t.item.anchor.range,e,s,!0),this.part=t}}let dst=class extends v5{constructor(t,i,e,s,n,o){super(t,i,e,s,o),this._resolverService=n,this.hoverOrdinal=6}suggestHoverAnchor(t){var i;if(!hst.get(this._editor)||t.target.type!==6)return null;const e=(i=t.target.detail.injectedText)===null||i===void 0?void 0:i.options;return e instanceof BF&&e.attachedData instanceof ost?new ust(e.attachedData,this,t.event.posx,t.event.posy):null}computeSync(){return[]}computeAsync(t,i,e){return t instanceof ust?new Lr((async i=>{const{part:s}=t;if(await s.item.resolve(e),e.isCancellationRequested)return;let n,o;if(typeof s.item.hint.tooltip=="string"?n=(new RN).appendText(s.item.hint.tooltip):s.item.hint.tooltip&&(n=s.item.hint.tooltip),n&&i.emitOne(new m5(this,t.range,[n],!1,0)),p(s.item.hint.textEdits)&&i.emitOne(new m5(this,t.range,[(new RN).appendText(st(0,"Double-click to insert"))],!1,10001)),typeof s.part.tooltip=="string"?o=(new RN).appendText(s.part.tooltip):s.part.tooltip&&(o=s.part.tooltip),o&&i.emitOne(new m5(this,t.range,[o],!1,1)),s.part.location||s.part.command){let e;const n=st(0,this._editor.getOption(78)==="altKey"?kt?"cmd + click":"ctrl + click":kt?"option + click":"alt + click");s.part.location&&s.part.command?e=(new RN).appendText(st(0,"Go to Definition ({0}), right click for more",n)):s.part.location?e=(new RN).appendText(st(0,"Go to Definition ({0})",n)):s.part.command&&(e=new RN(`[${st(0,"Execute Command")}](${r=s.part.command,fs.from({scheme:Lh.command,path:r.id,query:r.arguments&&encodeURIComponent(JSON.stringify(r.arguments))}).toString()} "${s.part.command.title}") (${n})`,{isTrusted:!0})),e&&i.emitOne(new m5(this,t.range,[e],!1,1e4))}var r;const h=await this._resolveInlayHintLabelPartHover(s,e);for await(const t of h)i.emitOne(t)})):Lr.EMPTY}async _resolveInlayHintLabelPartHover(t,i){if(!t.part.location)return Lr.EMPTY;const{uri:e,range:s}=t.part.location,n=await this._resolverService.createModelReference(e);try{const e=n.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(e)?g5(this._languageFeaturesService.hoverProvider,e,new Cs(s.startLineNumber,s.startColumn),i).filter((t=>!TN(t.hover.contents))).map((i=>new m5(this,t.item.anchor.range,i.hover.contents,!1,2+i.ordinal))):Lr.EMPTY}finally{n.dispose()}}};dst=ast([lst(1,Od),lst(2,gT),lst(3,Id),lst(4,Pa),lst(5,jA)],dst),Bu(hst.ID,hst,1),G3.register(dst);class fst{constructor(t,i,e){this._editRange=t,this._originalSelection=i,this._text=e}getEditOperations(t,i){i.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(t,i){const e=i.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new Bs(e.endLineNumber,Math.min(this._originalSelection.positionColumn,e.endColumn),e.endLineNumber,Math.min(this._originalSelection.positionColumn,e.endColumn)):new Bs(e.endLineNumber,e.endColumn-this._text.length,e.endLineNumber,e.endColumn)}}var gst,Ast=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},pst=function(t,i){return function(e,s){i(e,s,t)}};let wst=gst=class{static get(t){return t.getContribution(gst.ID)}constructor(t,i){this.editor=t,this.editorWorkerService=i,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(t,i){var e;(e=this.currentRequest)===null||e===void 0||e.cancel();const s=this.editor.getSelection(),n=this.editor.getModel();if(!n||!s)return;let o=s;if(o.startLineNumber!==o.endLineNumber)return;const r=new zX(this.editor,5),h=n.uri;return this.editorWorkerService.canNavigateValueSet(h)?(this.currentRequest=Ar((t=>this.editorWorkerService.navigateValueSet(h,o,i))),this.currentRequest.then((i=>{var e;if(!i||!i.range||!i.value||!r.validate(this.editor))return;const s=Es.lift(i.range);let n=i.range;const h=i.value.length-(o.endColumn-o.startColumn);n={startLineNumber:n.startLineNumber,startColumn:n.startColumn,endLineNumber:n.endLineNumber,endColumn:n.startColumn+i.value.length},h>1&&(o=new Bs(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+h-1));const c=new fst(s,o,i.value);this.editor.pushUndoStop(),this.editor.executeCommand(t,c),this.editor.pushUndoStop(),this.decorations.set([{range:n,options:gst.DECORATION}]),(e=this.decorationRemover)===null||e===void 0||e.cancel(),this.decorationRemover=br(350),this.decorationRemover.then((()=>this.decorations.clear())).catch(Oi)})).catch(Oi)):Promise.resolve(void 0)}};wst.ID="editor.contrib.inPlaceReplaceController",wst.DECORATION=DF.register({description:"in-place-replace",className:"valueSetReplacement"}),wst=gst=Ast([pst(1,tP)],wst);Bu(wst.ID,wst,4),Cu(class extends vu{constructor(){super({id:"editor.action.inPlaceReplace.up",label:st(0,"Replace with Previous Value"),alias:"Replace with Previous Value",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:3159,weight:100}})}run(t,i){const e=wst.get(i);return e?e.run(this.id,!1):Promise.resolve(void 0)}}),Cu(class extends vu{constructor(){super({id:"editor.action.inPlaceReplace.down",label:st(0,"Replace with Next Value"),alias:"Replace with Next Value",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:3161,weight:100}})}run(t,i){const e=wst.get(i);return e?e.run(this.id,!0):Promise.resolve(void 0)}});Cu(class extends vu{constructor(){super({id:"expandLineSelection",label:st(0,"Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:QC.textInputFocus,primary:2090}})}run(t,i,e){if(e=e||{},!i.hasModel())return;const s=i._getViewModel();s.model.pushStackElement(),s.setCursorStates(e.source,3,AC.expandLineSelection(s,s.getCursorStates())),s.revealAllCursors(e.source,!0)}});class mst{constructor(t,i,e){this._selection=t,this._cursors=i,this._selectionId=null,this._trimInRegexesAndStrings=e}getEditOperations(t,i){const e=function(t,i,e){i.sort(((t,i)=>t.lineNumber===i.lineNumber?t.column-i.column:t.lineNumber-i.lineNumber));for(let t=i.length-2;t>=0;t--)i[t].lineNumber===i[t+1].lineNumber&&i.splice(t,1);const s=[];let n=0,o=0;const r=i.length;for(let h=1,c=t.getLineCount();h<=c;h++){const c=t.getLineContent(h),a=c.length+1;let l=0;if(o<r&&i[o].lineNumber===h&&(l=i[o].column,o++,l===a)||c.length===0)continue;const u=oo(c);let d=0;if(u===-1)d=1;else{if(u===c.length-1)continue;d=u+2}if(!e){if(!t.tokenization.hasAccurateTokensForLine(h))continue;const i=t.tokenization.getLineTokens(h),e=i.getStandardTokenType(i.findTokenIndexAtOffset(d));if(e===2||e===3)continue}d=Math.max(l,d),s[n++]=KQ.delete(new Es(h,d,h,a))}return s}(t,this._cursors,this._trimInRegexesAndStrings);for(let t=0,s=e.length;t<s;t++){const s=e[t];i.addEditOperation(s.range,s.text)}this._selectionId=i.trackSelection(this._selection)}computeCursorState(t,i){return i.getTrackedSelection(this._selectionId)}}class vst{constructor(t,i,e){this._selection=t,this._isCopyingDown=i,this._noop=e||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(t,i){let e=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,e.startLineNumber<e.endLineNumber&&e.endColumn===1&&(this._endLineNumberDelta=1,e=e.setEndPosition(e.endLineNumber-1,t.getLineMaxColumn(e.endLineNumber-1)));const s=[];for(let i=e.startLineNumber;i<=e.endLineNumber;i++)s.push(t.getLineContent(i));const n=s.join(`\n`);n===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?i.addEditOperation(new Es(e.endLineNumber,t.getLineMaxColumn(e.endLineNumber),e.endLineNumber+1,1),e.endLineNumber===t.getLineCount()?"":`\n`):this._isCopyingDown?i.addEditOperation(new Es(e.startLineNumber,1,e.startLineNumber,1),n+`\n`):i.addEditOperation(new Es(e.endLineNumber,t.getLineMaxColumn(e.endLineNumber),e.endLineNumber,t.getLineMaxColumn(e.endLineNumber)),`\n`+n),this._selectionId=i.trackSelection(e),this._selectionDirection=this._selection.getDirection()}computeCursorState(t,i){let e=i.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let t=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,n=e.endColumn;this._startLineNumberDelta!==0&&(t+=this._startLineNumberDelta,i=1),this._endLineNumberDelta!==0&&(s+=this._endLineNumberDelta,n=1),e=Bs.createWithDirection(t,i,s,n,this._selectionDirection)}return e}}var bst=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},yst=function(t,i){return function(e,s){i(e,s,t)}};let kst=class{constructor(t,i,e,s){this._languageConfigurationService=s,this._selection=t,this._isMovingDown=i,this._autoIndent=e,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(t,i){const e=t.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===e)return void(this._selectionId=i.trackSelection(this._selection));if(!this._isMovingDown&&this._selection.startLineNumber===1)return void(this._selectionId=i.trackSelection(this._selection));this._moveEndPositionDown=!1;let s=this._selection;s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(this._moveEndPositionDown=!0,s=s.setEndPosition(s.endLineNumber-1,t.getLineMaxColumn(s.endLineNumber-1)));const{tabSize:n,indentSize:o,insertSpaces:r}=t.getOptions(),h=this.buildIndentConverter(n,o,r),c={tokenization:{getLineTokens:i=>t.tokenization.getLineTokens(i),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(i,e)=>t.getLanguageIdAtPosition(i,e)},getLineContent:null};if(s.startLineNumber===s.endLineNumber&&t.getLineMaxColumn(s.startLineNumber)===1){const e=s.startLineNumber,n=this._isMovingDown?e+1:e-1;t.getLineMaxColumn(n)===1?i.addEditOperation(new Es(1,1,1,1),null):(i.addEditOperation(new Es(e,1,e,1),t.getLineContent(n)),i.addEditOperation(new Es(n,1,n,t.getLineMaxColumn(n)),null)),s=new Bs(n,1,n,1)}else{let e,o;if(this._isMovingDown){e=s.endLineNumber+1,o=t.getLineContent(e),i.addEditOperation(new Es(e-1,t.getLineMaxColumn(e-1),e,t.getLineMaxColumn(e)),null);let a=o;if(this.shouldAutoIndent(t,s)){const l=this.matchEnterRule(t,h,n,e,s.startLineNumber-1);if(l!==null)a=Ret(l+Let(no(t.getLineContent(e)),n),n,r)+this.trimStart(o);else{c.getLineContent=i=>i===s.startLineNumber?t.getLineContent(e):t.getLineContent(i);const i=DC(this._autoIndent,c,t.getLanguageIdAtPosition(e,1),s.startLineNumber,h,this._languageConfigurationService);if(i!==null){const s=no(t.getLineContent(e)),h=Let(i,n);h!==Let(s,n)&&(a=Ret(h,n,r)+this.trimStart(o))}}i.addEditOperation(new Es(s.startLineNumber,1,s.startLineNumber,1),a+`\n`);const u=this.matchEnterRuleMovingDown(t,h,n,s.startLineNumber,e,a);if(u!==null)u!==0&&this.getIndentEditsOfMovingBlock(t,i,s,n,r,u);else{c.getLineContent=i=>i===s.startLineNumber?a:i>=s.startLineNumber+1&&i<=s.endLineNumber+1?t.getLineContent(i-1):t.getLineContent(i);const o=DC(this._autoIndent,c,t.getLanguageIdAtPosition(e,1),s.startLineNumber+1,h,this._languageConfigurationService);if(o!==null){const e=no(t.getLineContent(s.startLineNumber)),h=Let(o,n),c=Let(e,n);if(h!==c){const e=h-c;this.getIndentEditsOfMovingBlock(t,i,s,n,r,e)}}}}else i.addEditOperation(new Es(s.startLineNumber,1,s.startLineNumber,1),a+`\n`)}else if(e=s.startLineNumber-1,o=t.getLineContent(e),i.addEditOperation(new Es(e,1,e+1,1),null),i.addEditOperation(new Es(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber),s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),`\n`+o),this.shouldAutoIndent(t,s)){c.getLineContent=i=>i===e?t.getLineContent(s.startLineNumber):t.getLineContent(i);const o=this.matchEnterRule(t,h,n,s.startLineNumber,s.startLineNumber-2);if(o!==null)o!==0&&this.getIndentEditsOfMovingBlock(t,i,s,n,r,o);else{const o=DC(this._autoIndent,c,t.getLanguageIdAtPosition(s.startLineNumber,1),e,h,this._languageConfigurationService);if(o!==null){const e=no(t.getLineContent(s.startLineNumber)),h=Let(o,n),c=Let(e,n);if(h!==c){const e=h-c;this.getIndentEditsOfMovingBlock(t,i,s,n,r,e)}}}}}this._selectionId=i.trackSelection(s)}buildIndentConverter(t,i,e){return{shiftIndent:s=>xC.shiftIndent(s,s.length+1,t,i,e),unshiftIndent:s=>xC.unshiftIndent(s,s.length+1,t,i,e)}}parseEnterResult(t,i,e,s,n){if(n){let o=n.indentation;n.indentAction===Gu.None||n.indentAction===Gu.Indent?o=n.indentation+n.appendText:n.indentAction===Gu.IndentOutdent?o=n.indentation:n.indentAction===Gu.Outdent&&(o=i.unshiftIndent(n.indentation)+n.appendText);const r=t.getLineContent(s);if(this.trimStart(r).indexOf(this.trimStart(o))>=0){const n=no(t.getLineContent(s));let r=no(o);const h=MC(t,s,this._languageConfigurationService);return h!==null&&2&h&&(r=i.unshiftIndent(r)),Let(r,e)-Let(n,e)}}return null}matchEnterRuleMovingDown(t,i,e,s,n,o){if(oo(o)>=0){const o=t.getLineMaxColumn(n),r=wC(this._autoIndent,t,new Es(n,o,n,o),this._languageConfigurationService);return this.parseEnterResult(t,i,e,s,r)}{let n=s-1;for(;n>=1&&!(oo(t.getLineContent(n))>=0);)n--;if(n<1||s>t.getLineCount())return null;const o=t.getLineMaxColumn(n),r=wC(this._autoIndent,t,new Es(n,o,n,o),this._languageConfigurationService);return this.parseEnterResult(t,i,e,s,r)}}matchEnterRule(t,i,e,s,n,o){let r=n;for(;r>=1;){let i;if(i=r===n&&o!==void 0?o:t.getLineContent(r),oo(i)>=0)break;r--}if(r<1||s>t.getLineCount())return null;const h=t.getLineMaxColumn(r),c=wC(this._autoIndent,t,new Es(r,h,r,h),this._languageConfigurationService);return this.parseEnterResult(t,i,e,s,c)}trimStart(t){return t.replace(/^\s+/,"")}shouldAutoIndent(t,i){if(this._autoIndent<4||!t.tokenization.isCheapToTokenize(i.startLineNumber))return!1;const e=t.getLanguageIdAtPosition(i.startLineNumber,1);return e===t.getLanguageIdAtPosition(i.endLineNumber,1)&&this._languageConfigurationService.getLanguageConfiguration(e).indentRulesSupport!==null}getIndentEditsOfMovingBlock(t,i,e,s,n,o){for(let r=e.startLineNumber;r<=e.endLineNumber;r++){const h=no(t.getLineContent(r)),c=Ret(Let(h,s)+o,s,n);c!==h&&(i.addEditOperation(new Es(r,1,r,h.length+1),c),r===e.endLineNumber&&e.endColumn<=h.length+1&&c===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(t,i){let e=i.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(e=e.setEndPosition(e.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&e.startLineNumber<e.endLineNumber&&(e=e.setEndPosition(e.endLineNumber,2)),e}};kst=bst([yst(3,uf)],kst);class xst{static getCollator(){return xst._COLLATOR||(xst._COLLATOR=new Intl.Collator),xst._COLLATOR}constructor(t,i){this.selection=t,this.descending=i,this.selectionId=null}getEditOperations(t,i){const e=function(t,i,e){const s=Cst(t,i,e);return s?KQ.replace(new Es(s.startLineNumber,1,s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),s.after.join(`\n`)):null}(t,this.selection,this.descending);e&&i.addEditOperation(e.range,e.text),this.selectionId=i.trackSelection(this.selection)}computeCursorState(t,i){return i.getTrackedSelection(this.selectionId)}static canRun(t,i,e){if(t===null)return!1;const s=Cst(t,i,e);if(!s)return!1;for(let t=0,i=s.before.length;t<i;t++)if(s.before[t]!==s.after[t])return!0;return!1}}function Cst(t,i,e){const s=i.startLineNumber;let n=i.endLineNumber;if(i.endColumn===1&&n--,s>=n)return null;const o=[];for(let i=s;i<=n;i++)o.push(t.getLineContent(i));let r=o.slice(0);return r.sort(xst.getCollator().compare),e===!0&&(r=r.reverse()),{startLineNumber:s,endLineNumber:n,before:o,after:r}}xst._COLLATOR=null;class Est extends vu{constructor(t,i){super(i),this.down=t}run(t,i){if(!i.hasModel())return;const e=i.getSelections().map(((t,i)=>({selection:t,index:i,ignore:!1})));e.sort(((t,i)=>Es.compareRangesUsingStarts(t.selection,i.selection)));let s=e[0];for(let t=1;t<e.length;t++){const i=e[t];s.selection.endLineNumber===i.selection.startLineNumber&&(s.index<i.index?i.ignore=!0:(s.ignore=!0,s=i))}const n=[];for(const t of e)n.push(new vst(t.selection,this.down,t.ignore));i.pushUndoStop(),i.executeCommands(this.id,n),i.pushUndoStop()}}class Bst extends vu{constructor(t,i){super(i),this.down=t}run(t,i){const e=t.get(uf),s=[],n=i.getSelections()||[],o=i.getOption(12);for(const t of n)s.push(new kst(t,this.down,o,e));i.pushUndoStop(),i.executeCommands(this.id,s),i.pushUndoStop()}}class Dst extends vu{constructor(t,i){super(i),this.descending=t}run(t,i){if(!i.hasModel())return;const e=i.getModel();let s=i.getSelections();s.length===1&&s[0].isEmpty()&&(s=[new Bs(1,1,e.getLineCount(),e.getLineMaxColumn(e.getLineCount()))]);for(const t of s)if(!xst.canRun(i.getModel(),t,this.descending))return;const n=[];for(let t=0,i=s.length;t<i;t++)n[t]=new xst(s[t],this.descending);i.pushUndoStop(),i.executeCommands(this.id,n),i.pushUndoStop()}}class Mst extends vu{constructor(){super({id:Mst.ID,label:st(0,"Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:Re(2089,2102),weight:100}})}run(t,i,e){let s=[];e.reason==="auto-save"&&(s=(i.getSelections()||[]).map((t=>new Cs(t.positionLineNumber,t.positionColumn))));const n=i.getSelection();if(n===null)return;const o=t.get(Id),r=i.getModel(),h=o.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:r==null?void 0:r.getLanguageId(),resource:r==null?void 0:r.uri}),c=new mst(n,s,h);i.pushUndoStop(),i.executeCommands(this.id,[c]),i.pushUndoStop()}}Mst.ID="editor.action.trimTrailingWhitespace";class Sst extends vu{run(t,i){if(!i.hasModel())return;const e=i.getSelection(),s=this._getRangesToDelete(i),n=[];for(let t=0,i=s.length-1;t<i;t++){const i=s[t],e=s[t+1];Es.intersectRanges(i,e)===null?n.push(i):s[t+1]=Es.plusRange(i,e)}n.push(s[s.length-1]);const o=this._getEndCursorState(e,n),r=n.map((t=>KQ.replace(t,"")));i.pushUndoStop(),i.executeEdits(this.id,r,o),i.pushUndoStop()}}class Fst extends vu{run(t,i){const e=i.getSelections();if(e===null)return;const s=i.getModel();if(s===null)return;const n=i.getOption(131),o=[];for(const t of e)if(t.isEmpty()){const e=t.getStartPosition(),r=i.getConfiguredWordAtPosition(e);if(!r)continue;const h=new Es(e.lineNumber,r.startColumn,e.lineNumber,r.endColumn),c=s.getValueInRange(h);o.push(KQ.replace(h,this._modifyText(c,n)))}else{const i=s.getValueInRange(t);o.push(KQ.replace(t,this._modifyText(i,n)))}i.pushUndoStop(),i.executeEdits(this.id,o),i.pushUndoStop()}}class Ist{constructor(t,i){this._pattern=t,this._flags=i,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class Lst extends Fst{constructor(){super({id:"editor.action.transformToTitlecase",label:st(0,"Transform to Title Case"),alias:"Transform to Title Case",precondition:QC.writable})}_modifyText(t,i){const e=Lst.titleBoundary.get();return e?t.toLocaleLowerCase().replace(e,(t=>t.toLocaleUpperCase())):t}}Lst.titleBoundary=new Ist("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class Rst extends Fst{constructor(){super({id:"editor.action.transformToSnakecase",label:st(0,"Transform to Snake Case"),alias:"Transform to Snake Case",precondition:QC.writable})}_modifyText(t,i){const e=Rst.caseBoundary.get(),s=Rst.singleLetters.get();return e&&s?t.replace(e,"$1_$2").replace(s,"$1_$2$3").toLocaleLowerCase():t}}Rst.caseBoundary=new Ist("(\\p{Ll})(\\p{Lu})","gmu"),Rst.singleLetters=new Ist("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class Tst extends Fst{constructor(){super({id:"editor.action.transformToCamelcase",label:st(0,"Transform to Camel Case"),alias:"Transform to Camel Case",precondition:QC.writable})}_modifyText(t,i){const e=Tst.wordBoundary.get();if(!e)return t;const s=t.split(e);return s.shift()+s.map((t=>t.substring(0,1).toLocaleUpperCase()+t.substring(1))).join("")}}Tst.wordBoundary=new Ist("[_\\s-]","gm");class Nst extends Fst{constructor(){super({id:"editor.action.transformToPascalcase",label:st(0,"Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:QC.writable})}_modifyText(t,i){const e=Nst.wordBoundary.get(),s=Nst.wordBoundaryToMaintain.get();return!e||!s?t:t.split(s).map((t=>t.split(e))).flat().map((t=>t.substring(0,1).toLocaleUpperCase()+t.substring(1))).join("")}}Nst.wordBoundary=new Ist("[_\\s-]","gm"),Nst.wordBoundaryToMaintain=new Ist("(?<=\\.)","gm");class Qst extends Fst{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every((t=>t.isSupported()))}constructor(){super({id:"editor.action.transformToKebabcase",label:st(0,"Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:QC.writable})}_modifyText(t,i){const e=Qst.caseBoundary.get(),s=Qst.singleLetters.get(),n=Qst.underscoreBoundary.get();return e&&s&&n?t.replace(n,"$1-$3").replace(e,"$1-$2").replace(s,"$1-$2").toLocaleLowerCase():t}}Qst.caseBoundary=new Ist("(\\p{Ll})(\\p{Lu})","gmu"),Qst.singleLetters=new Ist("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),Qst.underscoreBoundary=new Ist("(\\S)(_)(\\S)","gm"),Cu(class extends Est{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:st(0,"Copy Line Up"),alias:"Copy Line Up",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:tu.MenubarSelectionMenu,group:"2_line",title:st(0,"&&Copy Line Up"),order:1}})}}),Cu(class extends Est{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:st(0,"Copy Line Down"),alias:"Copy Line Down",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:tu.MenubarSelectionMenu,group:"2_line",title:st(0,"Co&&py Line Down"),order:2}})}}),Cu(class extends vu{constructor(){super({id:"editor.action.duplicateSelection",label:st(0,"Duplicate Selection"),alias:"Duplicate Selection",precondition:QC.writable,menuOpts:{menuId:tu.MenubarSelectionMenu,group:"2_line",title:st(0,"&&Duplicate Selection"),order:5}})}run(t,i,e){if(!i.hasModel())return;const s=[],n=i.getSelections(),o=i.getModel();for(const t of n)if(t.isEmpty())s.push(new vst(t,!0));else{const i=new Bs(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn);s.push(new oC(i,o.getValueInRange(t)))}i.pushUndoStop(),i.executeCommands(this.id,s),i.pushUndoStop()}}),Cu(class extends Bst{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:st(0,"Move Line Up"),alias:"Move Line Up",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:tu.MenubarSelectionMenu,group:"2_line",title:st(0,"Mo&&ve Line Up"),order:3}})}}),Cu(class extends Bst{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:st(0,"Move Line Down"),alias:"Move Line Down",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:tu.MenubarSelectionMenu,group:"2_line",title:st(0,"Move &&Line Down"),order:4}})}}),Cu(class extends Dst{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:st(0,"Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:QC.writable})}}),Cu(class extends Dst{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:st(0,"Sort Lines Descending"),alias:"Sort Lines Descending",precondition:QC.writable})}}),Cu(class extends vu{constructor(){super({id:"editor.action.removeDuplicateLines",label:st(0,"Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:QC.writable})}run(t,i){if(!i.hasModel())return;const e=i.getModel();if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return;const s=[],n=[];let o=0,r=!0,h=i.getSelections();h.length===1&&h[0].isEmpty()&&(h=[new Bs(1,1,e.getLineCount(),e.getLineMaxColumn(e.getLineCount()))],r=!1);for(const t of h){const i=new Set,r=[];for(let s=t.startLineNumber;s<=t.endLineNumber;s++){const t=e.getLineContent(s);i.has(t)||(r.push(t),i.add(t))}const h=new Bs(t.startLineNumber,1,t.endLineNumber,e.getLineMaxColumn(t.endLineNumber)),c=t.startLineNumber-o,a=new Bs(c,1,c+r.length-1,r[r.length-1].length);s.push(KQ.replace(h,r.join(`\n`))),n.push(a),o+=t.endLineNumber-t.startLineNumber+1-r.length}i.pushUndoStop(),i.executeEdits(this.id,s,r?n:void 0),i.pushUndoStop()}}),Cu(Mst),Cu(class extends vu{constructor(){super({id:"editor.action.deleteLines",label:st(0,"Delete Line"),alias:"Delete Line",precondition:QC.writable,kbOpts:{kbExpr:QC.textInputFocus,primary:3113,weight:100}})}run(t,i){if(!i.hasModel())return;const e=this._getLinesToRemove(i),s=i.getModel();if(s.getLineCount()===1&&s.getLineMaxColumn(1)===1)return;let n=0;const o=[],r=[];for(let t=0,i=e.length;t<i;t++){const i=e[t];let h=i.startLineNumber,c=i.endLineNumber,a=1,l=s.getLineMaxColumn(c);c<s.getLineCount()?(c+=1,l=1):h>1&&(h-=1,a=s.getLineMaxColumn(h)),o.push(KQ.replace(new Bs(h,a,c,l),"")),r.push(new Bs(h-n,i.positionColumn,h-n,i.positionColumn)),n+=i.endLineNumber-i.startLineNumber+1}i.pushUndoStop(),i.executeEdits(this.id,o,r),i.pushUndoStop()}_getLinesToRemove(t){const i=t.getSelections().map((t=>{let i=t.endLineNumber;return t.startLineNumber<t.endLineNumber&&t.endColumn===1&&(i-=1),{startLineNumber:t.startLineNumber,selectionStartColumn:t.selectionStartColumn,endLineNumber:i,positionColumn:t.positionColumn}}));i.sort(((t,i)=>t.startLineNumber===i.startLineNumber?t.endLineNumber-i.endLineNumber:t.startLineNumber-i.startLineNumber));const e=[];let s=i[0];for(let t=1;t<i.length;t++)s.endLineNumber+1>=i[t].startLineNumber?s.endLineNumber=i[t].endLineNumber:(e.push(s),s=i[t]);return e.push(s),e}}),Cu(class extends vu{constructor(){super({id:"editor.action.indentLines",label:st(0,"Indent Line"),alias:"Indent Line",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:2142,weight:100}})}run(t,i){const e=i._getViewModel();e&&(i.pushUndoStop(),i.executeCommands(this.id,SC.indent(e.cursorConfig,i.getModel(),i.getSelections())),i.pushUndoStop())}}),Cu(class extends vu{constructor(){super({id:"editor.action.outdentLines",label:st(0,"Outdent Line"),alias:"Outdent Line",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:2140,weight:100}})}run(t,i){_C.Outdent.runEditorCommand(t,i,null)}}),Cu(class extends vu{constructor(){super({id:"editor.action.insertLineBefore",label:st(0,"Insert Line Above"),alias:"Insert Line Above",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:3075,weight:100}})}run(t,i){const e=i._getViewModel();e&&(i.pushUndoStop(),i.executeCommands(this.id,SC.lineInsertBefore(e.cursorConfig,i.getModel(),i.getSelections())))}}),Cu(class extends vu{constructor(){super({id:"editor.action.insertLineAfter",label:st(0,"Insert Line Below"),alias:"Insert Line Below",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:2051,weight:100}})}run(t,i){const e=i._getViewModel();e&&(i.pushUndoStop(),i.executeCommands(this.id,SC.lineInsertAfter(e.cursorConfig,i.getModel(),i.getSelections())))}}),Cu(class extends Sst{constructor(){super({id:"deleteAllLeft",label:st(0,"Delete All Left"),alias:"Delete All Left",precondition:QC.writable,kbOpts:{kbExpr:QC.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(t,i){let e=null;const s=[];let n=0;return i.forEach((i=>{let o;if(i.endColumn===1&&n>0){const t=i.startLineNumber-n;o=new Bs(t,i.startColumn,t,i.startColumn)}else o=new Bs(i.startLineNumber,i.startColumn,i.startLineNumber,i.startColumn);n+=i.endLineNumber-i.startLineNumber,i.intersectRanges(t)?e=o:s.push(o)})),e&&s.unshift(e),s}_getRangesToDelete(t){const i=t.getSelections();if(i===null)return[];let e=i;const s=t.getModel();return s===null?[]:(e.sort(Es.compareRangesUsingStarts),e=e.map((t=>{if(t.isEmpty()){if(t.startColumn===1){const i=Math.max(1,t.startLineNumber-1),e=t.startLineNumber===1?1:s.getLineLength(i)+1;return new Es(i,e,t.startLineNumber,1)}return new Es(t.startLineNumber,1,t.startLineNumber,t.startColumn)}return new Es(t.startLineNumber,1,t.endLineNumber,t.endColumn)})),e)}}),Cu(class extends Sst{constructor(){super({id:"deleteAllRight",label:st(0,"Delete All Right"),alias:"Delete All Right",precondition:QC.writable,kbOpts:{kbExpr:QC.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(t,i){let e=null;const s=[];for(let n=0,o=i.length,r=0;n<o;n++){const o=i[n],h=new Bs(o.startLineNumber-r,o.startColumn,o.startLineNumber-r,o.startColumn);o.intersectRanges(t)?e=h:s.push(h)}return e&&s.unshift(e),s}_getRangesToDelete(t){const i=t.getModel();if(i===null)return[];const e=t.getSelections();if(e===null)return[];const s=e.map((t=>{if(t.isEmpty()){const e=i.getLineMaxColumn(t.startLineNumber);return t.startColumn===e?new Es(t.startLineNumber,t.startColumn,t.startLineNumber+1,1):new Es(t.startLineNumber,t.startColumn,t.startLineNumber,e)}return t}));return s.sort(Es.compareRangesUsingStarts),s}}),Cu(class extends vu{constructor(){super({id:"editor.action.joinLines",label:st(0,"Join Lines"),alias:"Join Lines",precondition:QC.writable,kbOpts:{kbExpr:QC.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(t,i){const e=i.getSelections();if(e===null)return;let s=i.getSelection();if(s===null)return;e.sort(Es.compareRangesUsingStarts);const n=[],o=e.reduce(((t,i)=>t.isEmpty()?t.endLineNumber===i.startLineNumber?(s.equalsSelection(t)&&(s=i),i):i.startLineNumber>t.endLineNumber+1?(n.push(t),i):new Bs(t.startLineNumber,t.startColumn,i.endLineNumber,i.endColumn):i.startLineNumber>t.endLineNumber?(n.push(t),i):new Bs(t.startLineNumber,t.startColumn,i.endLineNumber,i.endColumn)));n.push(o);const r=i.getModel();if(r===null)return;const h=[],c=[];let a=s,l=0;for(let t=0,i=n.length;t<i;t++){const i=n[t],e=i.startLineNumber,o=1;let u,d,f=0;const g=r.getLineLength(i.endLineNumber)-i.endColumn;if(i.isEmpty()||i.startLineNumber===i.endLineNumber){const t=i.getStartPosition();t.lineNumber<r.getLineCount()?(u=e+1,d=r.getLineMaxColumn(u)):(u=t.lineNumber,d=r.getLineMaxColumn(t.lineNumber))}else u=i.endLineNumber,d=r.getLineMaxColumn(u);let A=r.getLineContent(e);for(let t=e+1;t<=u;t++){const i=r.getLineContent(t),e=r.getLineFirstNonWhitespaceColumn(t);if(e>=1){let t=!0;A===""&&(t=!1),!t||A.charAt(A.length-1)!==" "&&A.charAt(A.length-1)!=="\t"||(t=!1,A=A.replace(/[\s\uFEFF\xA0]+$/g," "));const s=i.substr(e-1);A+=(t?" ":"")+s,f=t?s.length+1:s.length}else f=0}const p=new Es(e,o,u,d);if(!p.isEmpty()){let t;i.isEmpty()?(h.push(KQ.replace(p,A)),t=new Bs(p.startLineNumber-l,A.length-f+1,e-l,A.length-f+1)):i.startLineNumber===i.endLineNumber?(h.push(KQ.replace(p,A)),t=new Bs(i.startLineNumber-l,i.startColumn,i.endLineNumber-l,i.endColumn)):(h.push(KQ.replace(p,A)),t=new Bs(i.startLineNumber-l,i.startColumn,i.startLineNumber-l,A.length-g)),Es.intersectRanges(p,s)!==null?a=t:c.push(t)}l+=p.endLineNumber-p.startLineNumber}c.unshift(a),i.pushUndoStop(),i.executeEdits(this.id,h,c),i.pushUndoStop()}}),Cu(class extends vu{constructor(){super({id:"editor.action.transpose",label:st(0,"Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:QC.writable})}run(t,i){const e=i.getSelections();if(e===null)return;const s=i.getModel();if(s===null)return;const n=[];for(let t=0,i=e.length;t<i;t++){const i=e[t];if(!i.isEmpty())continue;const o=i.getStartPosition(),r=s.getLineMaxColumn(o.lineNumber);if(o.column>=r){if(o.lineNumber===s.getLineCount())continue;const t=new Es(o.lineNumber,Math.max(1,o.column-1),o.lineNumber+1,1),i=s.getValueInRange(t).split("").reverse().join("");n.push(new nC(new Bs(o.lineNumber,Math.max(1,o.column-1),o.lineNumber+1,1),i))}else{const t=new Es(o.lineNumber,Math.max(1,o.column-1),o.lineNumber,o.column+1),i=s.getValueInRange(t).split("").reverse().join("");n.push(new cC(t,i,new Bs(o.lineNumber,o.column+1,o.lineNumber,o.column+1)))}}i.pushUndoStop(),i.executeCommands(this.id,n),i.pushUndoStop()}}),Cu(class extends Fst{constructor(){super({id:"editor.action.transformToUppercase",label:st(0,"Transform to Uppercase"),alias:"Transform to Uppercase",precondition:QC.writable})}_modifyText(t,i){return t.toLocaleUpperCase()}}),Cu(class extends Fst{constructor(){super({id:"editor.action.transformToLowercase",label:st(0,"Transform to Lowercase"),alias:"Transform to Lowercase",precondition:QC.writable})}_modifyText(t,i){return t.toLocaleLowerCase()}}),Rst.caseBoundary.isSupported()&&Rst.singleLetters.isSupported()&&Cu(Rst),Tst.wordBoundary.isSupported()&&Cu(Tst),Nst.wordBoundary.isSupported()&&Cu(Nst),Lst.titleBoundary.isSupported()&&Cu(Lst),Qst.isSupported()&&Cu(Qst);var Ost,zst=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Ust=function(t,i){return function(e,s){i(e,s,t)}};const Hst=new Tl("LinkedEditingInputVisible",!1);let Pst=Ost=class extends te{static get(t){return t.getContribution(Ost.ID)}constructor(t,i,e,s,n){super(),this.languageConfigurationService=s,this._syncRangesToken=0,this._localToDispose=this._register(new Zi),this._editor=t,this._providers=e.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=Hst.bindTo(i),this._debounceInformation=n.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new Zi),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel((()=>this.reinitialize(!0)))),this._register(this._editor.onDidChangeConfiguration((t=>{(t.hasChanged(70)||t.hasChanged(93))&&this.reinitialize(!1)}))),this._register(this._providers.onDidChange((()=>this.reinitialize(!1)))),this._register(this._editor.onDidChangeModelLanguage((()=>this.reinitialize(!0)))),this.reinitialize(!0)}reinitialize(t){const i=this._editor.getModel(),e=i!==null&&(this._editor.getOption(70)||this._editor.getOption(93))&&this._providers.has(i);if(e===this._enabled&&!t||(this._enabled=e,this.clearRanges(),this._localToDispose.clear(),!e||i===null))return;this._localToDispose.add(he.runAndSubscribe(i.onDidChangeLanguageConfiguration,(()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition()})));const s=new mr(this._debounceInformation.get(i)),n=()=>{var t;this._rangeUpdateTriggerPromise=s.trigger((()=>this.updateRanges()),(t=this._debounceDuration)!==null&&t!==void 0?t:this._debounceInformation.get(i))},o=new mr(0),r=t=>{this._rangeSyncTriggerPromise=o.trigger((()=>this._syncRanges(t)))};this._localToDispose.add(this._editor.onDidChangeCursorPosition((()=>{n()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((t=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const i=this._currentDecorations.getRange(0);if(i&&t.changes.every((t=>i.intersectRanges(t.range))))return void r(this._syncRangesToken)}n()}))),this._localToDispose.add({dispose:()=>{s.dispose(),o.dispose()}}),this.updateRanges()}_syncRanges(t){if(!this._editor.hasModel()||t!==this._syncRangesToken||this._currentDecorations.length===0)return;const i=this._editor.getModel(),e=this._currentDecorations.getRange(0);if(!e||e.startLineNumber!==e.endLineNumber)return this.clearRanges();const s=i.getValueInRange(e);if(this._currentWordPattern){const t=s.match(this._currentWordPattern);if((t?t[0].length:0)!==s.length)return this.clearRanges()}const n=[];for(let t=1,e=this._currentDecorations.length;t<e;t++){const e=this._currentDecorations.getRange(t);if(e)if(e.startLineNumber!==e.endLineNumber)n.push({range:e,text:s});else{let t=i.getValueInRange(e),o=s,r=e.startColumn,h=e.endColumn;const c=po(t,o);r+=c,t=t.substr(c),o=o.substr(c);const a=wo(t,o);h-=a,t=t.substr(0,t.length-a),o=o.substr(0,o.length-a),r===h&&o.length===0||n.push({range:new Es(e.startLineNumber,r,e.endLineNumber,h),text:o})}}if(n.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const t=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",n),this._editor._getViewModel().setPrevEditOperationType(t)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(t=!1){if(!this._editor.hasModel())return void this.clearRanges();const i=this._editor.getPosition();if(!this._enabled&&!t||this._editor.getSelections().length>1)return void this.clearRanges();const e=this._editor.getModel(),s=e.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===s){if(i.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const t=this._currentDecorations.getRange(0);if(t&&t.containsPosition(i))return}}this.clearRanges(),this._currentRequestPosition=i,this._currentRequestModelVersion=s;const n=this._currentRequestCts=new xe;try{const t=new re(!1),o=await jst(this._providers,e,i,n.token);if(this._debounceInformation.update(e,t.elapsed()),n!==this._currentRequestCts||(this._currentRequestCts=null,s!==e.getVersionId()))return;let r=[];o!=null&&o.ranges&&(r=o.ranges),this._currentWordPattern=(o==null?void 0:o.wordPattern)||this._languageWordPattern;let h=!1;for(let t=0,e=r.length;t<e;t++)if(Es.containsPosition(r[t],i)){if(h=!0,t!==0){const i=r[t];r.splice(t,1),r.unshift(i)}break}if(!h)return void this.clearRanges();const c=r.map((t=>({range:t,options:Ost.DECORATION})));this._visibleContextKey.set(!0),this._currentDecorations.set(c),this._syncRangesToken++}catch(t){Pi(t)||Oi(t),this._currentRequestCts!==n&&this._currentRequestCts||this.clearRanges()}}};Pst.ID="editor.contrib.linkedEditing",Pst.DECORATION=DF.register({description:"linked-editing",stickiness:0,className:"linked-editing-decoration"}),Pst=Ost=zst([Ust(1,Nl),Ust(2,jA),Ust(3,uf),Ust(4,dR)],Pst);function jst(t,i,e,s){return kr(t.ordered(i).map((t=>async()=>{try{return await t.provideLinkedEditingRanges(i,e,s)}catch(t){return void zi(t)}})),(t=>!!t&&p(t==null?void 0:t.ranges)))}xu(new(mu.bindToContribution(Pst.get))({id:"cancelLinkedEditingInput",precondition:Hst,handler:t=>t.clearRanges(),kbOpts:{kbExpr:QC.editorTextFocus,weight:199,primary:9,secondary:[1033]}})),Ow("editor.linkedEditingBackground",{dark:CA.fromHex("#f00").transparent(.3),light:CA.fromHex("#f00").transparent(.3),hcDark:CA.fromHex("#f00").transparent(.3),hcLight:CA.white},st(0,"Background color when the editor auto renames on type.")),ku("_executeLinkedEditingProvider",((t,i,e)=>{const{linkedEditingRangeProvider:s}=t.get(jA);return jst(s,i,e,ye.None)})),Bu(Pst.ID,Pst,1),Cu(class extends vu{constructor(){super({id:"editor.action.linkedEditing",label:st(0,"Start Linked Editing"),alias:"Start Linked Editing",precondition:gl.and(QC.writable,QC.hasRenameProvider),kbOpts:{kbExpr:QC.editorTextFocus,primary:3132,weight:100}})}runCommand(t,i){const e=t.get(Ua),[s,n]=Array.isArray(i)&&i||[void 0,void 0];return fs.isUri(s)&&Cs.isIPosition(n)?e.openCodeEditor({resource:s},e.getActiveCodeEditor()).then((t=>{t&&(t.setPosition(n),t.invokeWithinContext((i=>(this.reportTelemetry(i,t),this.run(i,t)))))}),Oi):super.runCommand(t,i)}run(t,i){const e=Pst.get(i);return e?Promise.resolve(e.updateRanges(!0)):Promise.resolve()}});let Wst=class{constructor(t,i){this._link=t,this._provider=i}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(t){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,t)).then((i=>(this._link=i||this._link,this._link.url?this.resolve(t):Promise.reject(new Error("missing"))))):Promise.reject(new Error("missing"))}};class Yst{constructor(t){this._disposables=new Zi;let i=[];for(const[e,s]of t){const t=e.links.map((t=>new Wst(t,s)));i=Yst._union(i,t),Ki(e)&&this._disposables.add(e)}this.links=i}dispose(){this._disposables.dispose(),this.links.length=0}static _union(t,i){const e=[];let s,n,o,r;for(s=0,o=0,n=t.length,r=i.length;s<n&&o<r;){const n=t[s],r=i[o];if(Es.areIntersectingOrTouching(n.range,r.range)){s++;continue}Es.compareRangesUsingStarts(n.range,r.range)<0?(e.push(n),s++):(e.push(r),o++)}for(;s<n;s++)e.push(t[s]);for(;o<r;o++)e.push(i[o]);return e}}function _st(t,i,e){const s=[],n=t.ordered(i).reverse().map(((t,n)=>Promise.resolve(t.provideLinks(i,e)).then((i=>{i&&(s[n]=[i,t])}),zi)));return Promise.all(n).then((()=>{const t=new Yst(f(s));return e.isCancellationRequested?(t.dispose(),new Yst([])):t}))}Xa.registerCommand("_executeLinkProvider",(async(t,...i)=>{let[e,s]=i;Y(e instanceof fs),typeof s!="number"&&(s=0);const{linkProvider:n}=t.get(jA),o=t.get(Ha).getModel(e);if(!o)return[];const r=await _st(n,o,ye.None);if(!r)return[];for(let t=0;t<Math.min(s,r.links.length);t++)await r.links[t].resolve(ye.None);const h=r.links.slice(0);return r.dispose(),h}));var Vst,Jst=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Gst=function(t,i){return function(e,s){i(e,s,t)}};let Kst=Vst=class extends te{static get(t){return t.getContribution(Vst.ID)}constructor(t,i,e,s,n){super(),this.editor=t,this.openerService=i,this.notificationService=e,this.languageFeaturesService=s,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=n.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new Er((()=>this.computeLinksNow()),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const o=this._register(new g4(t));this._register(o.onMouseMoveOrRelevantKeyDown((([t,i])=>{this._onEditorMouseMove(t,i)}))),this._register(o.onExecute((t=>{this.onEditorMouseUp(t)}))),this._register(o.onCancel((t=>{this.cleanUpActiveLinkDecoration()}))),this._register(t.onDidChangeConfiguration((t=>{t.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))}))),this._register(t.onDidChangeModelContent((t=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))}))),this._register(t.onDidChangeModel((t=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)}))),this._register(t.onDidChangeModelLanguage((t=>{this.stop(),this.computeLinks.schedule(0)}))),this._register(this.providers.onDidChange((t=>{this.stop(),this.computeLinks.schedule(0)}))),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;const t=this.editor.getModel();if(!t.isTooLargeForSyncing()&&this.providers.has(t)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Ar((i=>_st(this.providers,t,i)));try{const i=new re(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(t,i.elapsed()),t.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){Oi(t)}finally{this.computePromise=null}}}updateDecorations(t){const i=this.editor.getOption(78)==="altKey",e=[],s=Object.keys(this.currentOccurrences);for(const t of s){const i=this.currentOccurrences[t];e.push(i.decorationId)}const n=[];if(t)for(const e of t)n.push(qst.decoration(e,i));this.editor.changeDecorations((i=>{const s=i.deltaDecorations(e,n);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let i=0,e=s.length;i<e;i++){const e=new qst(t[i],s[i]);this.currentOccurrences[e.decorationId]=e}}))}_onEditorMouseMove(t,i){const e=this.editor.getOption(78)==="altKey";if(this.isEnabled(t,i)){this.cleanUpActiveLinkDecoration();const i=this.getLinkOccurrence(t.target.position);i&&this.editor.changeDecorations((t=>{i.activate(t,e),this.activeLinkDecorationId=i.decorationId}))}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const t=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){const i=this.currentOccurrences[this.activeLinkDecorationId];i&&this.editor.changeDecorations((e=>{i.deactivate(e,t)})),this.activeLinkDecorationId=null}}onEditorMouseUp(t){if(!this.isEnabled(t))return;const i=this.getLinkOccurrence(t.target.position);i&&this.openLinkOccurrence(i,t.hasSideBySideModifier,!0)}openLinkOccurrence(t,i,e=!1){if(!this.openerService)return;const{link:s}=t;s.resolve(ye.None).then((t=>{if(typeof t=="string"&&this.editor.hasModel()){const i=this.editor.getModel().uri;if(i.scheme===Lh.file&&t.startsWith(`${Lh.file}:`)){const e=fs.parse(t);if(e.scheme===Lh.file){const s=kM(e);let n=null;s.startsWith("/./")||s.startsWith("\\.\\")?n=`.${s.substr(1)}`:(s.startsWith("//./")||s.startsWith("\\\\.\\"))&&(n=`.${s.substr(2)}`),n&&(t=SM(i,n))}}}return this.openerService.open(t,{openToSide:i,fromUserGesture:e,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})}),(t=>{const i=t instanceof Error?t.message:t;i==="invalid"?this.notificationService.warn(st(0,"Failed to open this link because it is not well-formed: {0}",s.url.toString())):i==="missing"?this.notificationService.warn(st(0,"Failed to open this link because its target is missing.")):Oi(t)}))}getLinkOccurrence(t){if(!this.editor.hasModel()||!t)return null;const i=this.editor.getModel().getDecorationsInRange({startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:t.lineNumber,endColumn:t.column},0,!0);for(const t of i){const i=this.currentOccurrences[t.id];if(i)return i}return null}isEnabled(t,i){return!!(t.target.type===6&&(t.hasTriggerModifier||i&&i.keyCodeIsTriggerKey))}stop(){var t;this.computeLinks.cancel(),this.activeLinksList&&((t=this.activeLinksList)===null||t===void 0||t.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};Kst.ID="editor.linkDetector",Kst=Vst=Jst([Gst(1,gT),Gst(2,wL),Gst(3,jA),Gst(4,dR)],Kst);const $st=DF.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),Xst=DF.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"});class qst{static decoration(t,i){return{range:t.range,options:qst._getOptions(t,i,!1)}}static _getOptions(t,i,e){const s={...e?Xst:$st};return s.hoverMessage=function(t,i){const e=t.url&&/^command:/i.test(t.url.toString()),s=t.tooltip?t.tooltip:st(0,e?"Execute command":"Follow link"),n=st(0,i?kt?"cmd + click":"ctrl + click":kt?"option + click":"alt + click");if(t.url){let i="";if(/^command:/i.test(t.url.toString())){const e=t.url.toString().match(/^command:([^?#]+)/);e&&(i=st(0,"Execute command {0}",e[1]))}return new RN("",!0).appendLink(t.url.toString(!0).replace(/ /g,"%20"),s,i).appendMarkdown(` (${n})`)}return(new RN).appendText(`${s} (${n})`)}(t,i),s}constructor(t,i){this.link=t,this.decorationId=i}activate(t,i){t.changeDecorationOptions(this.decorationId,qst._getOptions(this.link,i,!0))}deactivate(t,i){t.changeDecorationOptions(this.decorationId,qst._getOptions(this.link,i,!1))}}Bu(Kst.ID,Kst,1),Cu(class extends vu{constructor(){super({id:"editor.action.openLink",label:st(0,"Open Link"),alias:"Open Link",precondition:void 0})}run(t,i){const e=Kst.get(i);if(!e||!i.hasModel())return;const s=i.getSelections();for(const t of s){const i=e.getLinkOccurrence(t.getEndPosition());i&&e.openLinkOccurrence(i,!1)}}});class Zst extends te{constructor(t){super(),this._editor=t,this._register(this._editor.onMouseDown((t=>{const i=this._editor.getOption(117);i>=0&&t.target.type===6&&t.target.position.column>=i&&this._editor.updateOptions({stopRenderingLineAfter:-1})})))}}Zst.ID="editor.contrib.longLinesHelper",Bu(Zst.ID,Zst,2);const tnt=Ow("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},st(0,"Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);Ow("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},st(0,"Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),Ow("editor.wordHighlightTextBackground",{light:tnt,dark:tnt,hcDark:tnt,hcLight:tnt},st(0,"Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const int=Ow("editor.wordHighlightBorder",{light:null,dark:null,hcDark:Xw,hcLight:Xw},st(0,"Border color of a symbol during read-access, like reading a variable."));Ow("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:Xw,hcLight:Xw},st(0,"Border color of a symbol during write-access, like writing to a variable.")),Ow("editor.wordHighlightTextBorder",{light:int,dark:int,hcDark:int,hcLight:int},st(0,"Border color of a textual occurrence for a symbol."));const ent=Ow("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},st(0,"Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),snt=Ow("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},st(0,"Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),nnt=Ow("editorOverviewRuler.wordHighlightTextForeground",{dark:nv,light:nv,hcDark:nv,hcLight:nv},st(0,"Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),ont=DF.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Ik(snt),position:ig.Center},minimap:{color:Ik(av),position:1}}),rnt=DF.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:Ik(nnt),position:ig.Center},minimap:{color:Ik(av),position:1}}),hnt=DF.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Ik(nv),position:ig.Center},minimap:{color:Ik(av),position:1}}),cnt=DF.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),ant=DF.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Ik(ent),position:ig.Center},minimap:{color:Ik(av),position:1}});function lnt(t){return t?cnt:hnt}Nk(((t,i)=>{const e=t.getColor(xm);e&&i.addRule(`.monaco-editor .selectionHighlight { background-color: ${e.transparent(.5)}; }`)}));var unt,dnt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},fnt=function(t,i){return function(e,s){i(e,s,t)}};function gnt(t,i){const e=i.filter((i=>!t.find((t=>t.equals(i)))));if(e.length>=1){const t=e.map((t=>`line ${t.viewState.position.lineNumber} column ${t.viewState.position.column}`)).join(", ");aw(e.length===1?st(0,"Cursor added: {0}",t):st(0,"Cursors added: {0}",t))}}class Ant{constructor(t,i,e){this.selections=t,this.revealRange=i,this.revealScrollType=e}}class pnt{static create(t,i){if(!t.hasModel())return null;const e=i.getState();if(!t.hasTextFocus()&&e.isRevealed&&e.searchString.length>0)return new pnt(t,i,!1,e.searchString,e.wholeWord,e.matchCase,null);let s,n,o=!1;const r=t.getSelections();r.length===1&&r[0].isEmpty()?(o=!0,s=!0,n=!0):(s=e.wholeWord,n=e.matchCase);const h=t.getSelection();let c,a=null;if(h.isEmpty()){const i=t.getConfiguredWordAtPosition(h.getStartPosition());if(!i)return null;c=i.word,a=new Bs(h.startLineNumber,i.startColumn,h.startLineNumber,i.endColumn)}else c=t.getModel().getValueInRange(h).replace(/\r\n/g,`\n`);return new pnt(t,i,o,c,s,n,a)}constructor(t,i,e,s,n,o,r){this._editor=t,this.findController=i,this.isDisconnectedFromFindController=e,this.searchText=s,this.wholeWord=n,this.matchCase=o,this.currentMatch=r}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const t=this._getNextMatch();if(!t)return null;const i=this._editor.getSelections();return new Ant(i.concat(t),t,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const t=this._getNextMatch();if(!t)return null;const i=this._editor.getSelections();return new Ant(i.slice(0,i.length-1).concat(t),t,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const t=this.currentMatch;return this.currentMatch=null,t}this.findController.highlightFindOptions();const t=this._editor.getSelections(),i=t[t.length-1],e=this._editor.getModel().findNextMatch(this.searchText,i.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return e?new Bs(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const t=this._getPreviousMatch();if(!t)return null;const i=this._editor.getSelections();return new Ant(i.concat(t),t,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const t=this._getPreviousMatch();if(!t)return null;const i=this._editor.getSelections();return new Ant(i.slice(0,i.length-1).concat(t),t,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const t=this.currentMatch;return this.currentMatch=null,t}this.findController.highlightFindOptions();const t=this._editor.getSelections(),i=t[t.length-1],e=this._editor.getModel().findPreviousMatch(this.searchText,i.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return e?new Bs(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn):null}selectAll(t){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const i=this._editor.getModel();return t?i.findMatches(this.searchText,t,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824):i.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824)}}class wnt extends te{static get(t){return t.getContribution(wnt.ID)}constructor(t){super(),this._sessionDispose=this._register(new Zi),this._editor=t,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(t){if(!this._session){const i=pnt.create(this._editor,t);if(!i)return;this._session=i;const e={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(e.wholeWordOverride=1,e.matchCaseOverride=1,e.isRegexOverride=2),t.getState().change(e,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((t=>{this._ignoreSelectionChange||this._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((()=>{this._endSession()}))),this._sessionDispose.add(t.getState().onFindReplaceStateChange((t=>{(t.matchCase||t.wholeWord)&&this._endSession()})))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const t={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(t,!1)}this._session=null}_setSelections(t){this._ignoreSelectionChange=!0,this._editor.setSelections(t),this._ignoreSelectionChange=!1}_expandEmptyToWord(t,i){if(!i.isEmpty())return i;const e=this._editor.getConfiguredWordAtPosition(i.getStartPosition());return e?new Bs(i.startLineNumber,e.startColumn,i.startLineNumber,e.endColumn):i}_applySessionResult(t){t&&(this._setSelections(t.selections),t.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(t.revealRange,t.revealScrollType))}getSession(t){return this._session}addSelectionToNextFindMatch(t){if(this._editor.hasModel()){if(!this._session){const i=this._editor.getSelections();if(i.length>1){const e=t.getState().matchCase;if(!ynt(this._editor.getModel(),i,e)){const t=this._editor.getModel(),e=[];for(let s=0,n=i.length;s<n;s++)e[s]=this._expandEmptyToWord(t,i[s]);return void this._editor.setSelections(e)}}}this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(t){if(!this._editor.hasModel())return;let i=null;const e=t.getState();if(e.isRevealed&&e.searchString.length>0&&e.isRegex){const t=this._editor.getModel();i=e.searchScope?t.findMatches(e.searchString,e.searchScope,e.isRegex,e.matchCase,e.wholeWord?this._editor.getOption(131):null,!1,1073741824):t.findMatches(e.searchString,!0,e.isRegex,e.matchCase,e.wholeWord?this._editor.getOption(131):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(t),!this._session)return;i=this._session.selectAll(e.searchScope)}if(i.length>0){const t=this._editor.getSelection();for(let e=0,s=i.length;e<s;e++){const s=i[e];if(s.range.intersectRanges(t)){i[e]=i[0],i[0]=s;break}}this._setSelections(i.map((t=>new Bs(t.range.startLineNumber,t.range.startColumn,t.range.endLineNumber,t.range.endColumn))))}}}wnt.ID="editor.contrib.multiCursorController";class mnt extends vu{run(t,i){const e=wnt.get(i);if(!e)return;const s=i._getViewModel();if(s){const n=s.getCursorStates(),o=Q9.get(i);if(o)this._run(e,o);else{const s=t.get(Oa).createInstance(Q9,i);this._run(e,s),s.dispose()}gnt(n,s.getCursorStates())}}}class vnt{constructor(t,i,e,s,n){this._model=t,this._searchText=i,this._matchCase=e,this._wordSeparators=s,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,n&&this._model===n._model&&this._searchText===n._searchText&&this._matchCase===n._matchCase&&this._wordSeparators===n._wordSeparators&&this._modelVersionId===n._modelVersionId&&(this._cachedFindMatches=n._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map((t=>t.range)),this._cachedFindMatches.sort(Es.compareRangesUsingStarts)),this._cachedFindMatches}}let bnt=unt=class extends te{constructor(t,i){super(),this._languageFeaturesService=i,this.editor=t,this._isEnabled=t.getOption(108),this._decorations=t.createDecorationsCollection(),this.updateSoon=this._register(new Er((()=>this._update()),300)),this.state=null,this._register(t.onDidChangeConfiguration((i=>{this._isEnabled=t.getOption(108)}))),this._register(t.onDidChangeCursorSelection((t=>{this._isEnabled&&(t.selection.isEmpty()?t.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())}))),this._register(t.onDidChangeModel((t=>{this._setState(null)}))),this._register(t.onDidChangeModelContent((t=>{this._isEnabled&&this.updateSoon.schedule()})));const e=Q9.get(t);e&&this._register(e.getState().onFindReplaceStateChange((t=>{this._update()}))),this.updateSoon.schedule()}_update(){this._setState(unt._createState(this.state,this._isEnabled,this.editor))}static _createState(t,i,e){if(!i||!e.hasModel())return null;const s=e.getSelection();if(s.startLineNumber!==s.endLineNumber)return null;const n=wnt.get(e);if(!n)return null;const o=Q9.get(e);if(!o)return null;let r=n.getSession(o);if(!r){const t=e.getSelections();if(t.length>1){const i=o.getState().matchCase;if(!ynt(e.getModel(),t,i))return null}r=pnt.create(e,o)}if(!r||r.currentMatch||/^[ \t]+$/.test(r.searchText)||r.searchText.length>200)return null;const h=o.getState(),c=h.matchCase;if(h.isRevealed){let t=h.searchString;c||(t=t.toLowerCase());let i=r.searchText;if(c||(i=i.toLowerCase()),t===i&&r.matchCase===h.matchCase&&r.wholeWord===h.wholeWord&&!h.isRegex)return null}return new vnt(e.getModel(),r.searchText,r.matchCase,r.wholeWord?e.getOption(131):null,t)}_setState(t){if(this.state=t,!this.state)return void this._decorations.clear();if(!this.editor.hasModel())return;const i=this.editor.getModel();if(i.isTooLargeForTokenization())return;const e=this.state.findMatches(),s=this.editor.getSelections();s.sort(Es.compareRangesUsingStarts);const n=[];for(let t=0,i=0,o=e.length,r=s.length;t<o;){const o=e[t];if(i>=r)n.push(o),t++;else{const e=Es.compareRangesUsingStarts(o,s[i]);e<0?(!s[i].isEmpty()&&Es.areIntersecting(o,s[i])||n.push(o),t++):(e>0||t++,i++)}}const o=this.editor.getOption(81)!=="off",r=this._languageFeaturesService.documentHighlightProvider.has(i)&&o,h=n.map((t=>({range:t,options:lnt(r)})));this._decorations.set(h)}dispose(){this._setState(null),super.dispose()}};function ynt(t,i,e){const s=knt(t,i[0],!e);for(let n=1,o=i.length;n<o;n++){const o=i[n];if(o.isEmpty()||s!==knt(t,o,!e))return!1}return!0}function knt(t,i,e){const s=t.getValueInRange(i);return e?s.toLowerCase():s}bnt.ID="editor.contrib.selectionHighlighter",bnt=unt=dnt([fnt(1,jA)],bnt);Bu(wnt.ID,wnt,4),Bu(bnt.ID,bnt,1),Cu(class extends vu{constructor(){super({id:"editor.action.insertCursorAbove",label:st(0,"Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:QC.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:tu.MenubarSelectionMenu,group:"3_multi",title:st(0,"&&Add Cursor Above"),order:2}})}run(t,i,e){if(!i.hasModel())return;let s=!0;e&&e.logicalLine===!1&&(s=!1);const n=i._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const o=n.getCursorStates();n.setCursorStates(e.source,3,AC.addCursorUp(n,o,s)),n.revealTopMostCursor(e.source),gnt(o,n.getCursorStates())}}),Cu(class extends vu{constructor(){super({id:"editor.action.insertCursorBelow",label:st(0,"Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:QC.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:tu.MenubarSelectionMenu,group:"3_multi",title:st(0,"A&&dd Cursor Below"),order:3}})}run(t,i,e){if(!i.hasModel())return;let s=!0;e&&e.logicalLine===!1&&(s=!1);const n=i._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const o=n.getCursorStates();n.setCursorStates(e.source,3,AC.addCursorDown(n,o,s)),n.revealBottomMostCursor(e.source),gnt(o,n.getCursorStates())}}),Cu(class extends vu{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:st(0,"Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:QC.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:tu.MenubarSelectionMenu,group:"3_multi",title:st(0,"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(t,i,e){if(!t.isEmpty()){for(let s=t.startLineNumber;s<t.endLineNumber;s++){const t=i.getLineMaxColumn(s);e.push(new Bs(s,t,s,t))}t.endColumn>1&&e.push(new Bs(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn))}}run(t,i){if(!i.hasModel())return;const e=i.getModel(),s=i.getSelections(),n=i._getViewModel(),o=n.getCursorStates(),r=[];s.forEach((t=>this.getCursorsForSelection(t,e,r))),r.length>0&&i.setSelections(r),gnt(o,n.getCursorStates())}}),Cu(class extends mnt{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:st(0,"Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:QC.focus,primary:2082,weight:100},menuOpts:{menuId:tu.MenubarSelectionMenu,group:"3_multi",title:st(0,"Add &&Next Occurrence"),order:5}})}_run(t,i){t.addSelectionToNextFindMatch(i)}}),Cu(class extends mnt{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:st(0,"Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:tu.MenubarSelectionMenu,group:"3_multi",title:st(0,"Add P&&revious Occurrence"),order:6}})}_run(t,i){t.addSelectionToPreviousFindMatch(i)}}),Cu(class extends mnt{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:st(0,"Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:QC.focus,primary:Re(2089,2082),weight:100}})}_run(t,i){t.moveSelectionToNextFindMatch(i)}}),Cu(class extends mnt{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:st(0,"Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(t,i){t.moveSelectionToPreviousFindMatch(i)}}),Cu(class extends mnt{constructor(){super({id:"editor.action.selectHighlights",label:st(0,"Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:QC.focus,primary:3114,weight:100},menuOpts:{menuId:tu.MenubarSelectionMenu,group:"3_multi",title:st(0,"Select All &&Occurrences"),order:7}})}_run(t,i){t.selectAll(i)}}),Cu(class extends mnt{constructor(){super({id:"editor.action.changeAll",label:st(0,"Change All Occurrences"),alias:"Change All Occurrences",precondition:gl.and(QC.writable,QC.editorTextFocus),kbOpts:{kbExpr:QC.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(t,i){t.selectAll(i)}}),Cu(class extends vu{constructor(){super({id:"editor.action.addCursorsToBottom",label:st(0,"Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(t,i){if(!i.hasModel())return;const e=i.getSelections(),s=i.getModel().getLineCount(),n=[];for(let t=e[0].startLineNumber;t<=s;t++)n.push(new Bs(t,e[0].startColumn,t,e[0].endColumn));const o=i._getViewModel(),r=o.getCursorStates();n.length>0&&i.setSelections(n),gnt(r,o.getCursorStates())}}),Cu(class extends vu{constructor(){super({id:"editor.action.addCursorsToTop",label:st(0,"Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(t,i){if(!i.hasModel())return;const e=i.getSelections(),s=[];for(let t=e[0].startLineNumber;t>=1;t--)s.push(new Bs(t,e[0].startColumn,t,e[0].endColumn));const n=i._getViewModel(),o=n.getCursorStates();s.length>0&&i.setSelections(s),gnt(o,n.getCursorStates())}}),Cu(class extends vu{constructor(){super({id:"editor.action.focusNextCursor",label:st(0,"Focus Next Cursor"),metadata:{description:st(0,"Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(t,i,e){if(!i.hasModel())return;const s=i._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const n=Array.from(s.getCursorStates()),o=n.shift();o&&(n.push(o),s.setCursorStates(e.source,3,n),s.revealPrimaryCursor(e.source,!0),gnt(n,s.getCursorStates()))}}),Cu(class extends vu{constructor(){super({id:"editor.action.focusPreviousCursor",label:st(0,"Focus Previous Cursor"),metadata:{description:st(0,"Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(t,i,e){if(!i.hasModel())return;const s=i._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const n=Array.from(s.getCursorStates()),o=n.pop();o&&(n.unshift(o),s.setCursorStates(e.source,3,n),s.revealPrimaryCursor(e.source,!0),gnt(n,s.getCursorStates()))}});var xnt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Cnt=function(t,i){return function(e,s){i(e,s,t)}};const Ent="inline-edit";let Bnt=class extends te{constructor(t,i,e){super(),this.editor=t,this.model=i,this.languageService=e,this.isDisposed=Wz(this,!1),this.currentTextModel=rU(this.editor.onDidChangeModel,(()=>this.editor.getModel())),this.uiState=Gz(this,(t=>{var i;if(this.isDisposed.read(t))return;const e=this.currentTextModel.read(t);if(e!==this.model.targetTextModel.read(t))return;const s=this.model.ghostText.read(t);if(!s)return;let n=(i=this.model.range)===null||i===void 0?void 0:i.read(t);n&&n.startLineNumber===n.endLineNumber&&n.startColumn===n.endColumn&&(n=void 0);const o=(!n||n.startLineNumber===n.endLineNumber)&&s.parts.length===1&&s.parts[0].lines.length===1,r=s.parts.length===1&&s.parts[0].lines.every((t=>t.length===0)),h=[],c=[];function a(t,i){if(c.length>0){const e=c[c.length-1];i&&e.decorations.push(new cp(e.content.length+1,e.content.length+1+t[0].length,i,0)),e.content+=t[0],t=t.slice(1)}for(const e of t)c.push({content:e,decorations:i?[new cp(1,e.length+1,i,0)]:[]})}const l=e.getLineContent(s.lineNumber);let u,d=0;if(!r){for(const t of s.parts){let i=t.lines;n&&!o&&(a(i,Ent),i=[]),u===void 0?(h.push({column:t.column,text:i[0],preview:t.preview}),i=i.slice(1)):a([l.substring(d,t.column-1)],void 0),i.length>0&&(a(i,Ent),u===void 0&&t.column<=l.length&&(u=t.column)),d=t.column-1}u!==void 0&&a([l.substring(d)],void 0)}const f=u!==void 0?new J7(u,l.length+1):void 0,g=o||!n?s.lineNumber:n.endLineNumber-1;return{inlineTexts:h,additionalLines:c,hiddenRange:f,lineNumber:g,additionalReservedLineCount:this.model.minReservedLineCount.read(t),targetTextModel:e,range:n,isSingleLine:o,isPureRemove:r,backgroundColoring:this.model.backgroundColoring.read(t)}})),this.decorations=Gz(this,(t=>{const i=this.uiState.read(t);if(!i)return[];const e=[];if(i.hiddenRange&&e.push({range:i.hiddenRange.toRange(i.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),i.range){const t=[];if(i.isSingleLine)t.push(i.range);else if(i.isPureRemove){const e=i.range.endLineNumber-i.range.startLineNumber;for(let s=0;s<e;s++){const e=i.range.startLineNumber+s,n=i.targetTextModel.getLineFirstNonWhitespaceColumn(e),o=i.targetTextModel.getLineLastNonWhitespaceColumn(e),r=new Es(e,n,e,o);t.push(r)}}else{const e=i.range.endLineNumber-i.range.startLineNumber;for(let s=0;s<e;s++){const e=i.range.startLineNumber+s,n=i.targetTextModel.getLineFirstNonWhitespaceColumn(e),o=i.targetTextModel.getLineLastNonWhitespaceColumn(e),r=new Es(e,n,e,o);t.push(r)}}const s=i.backgroundColoring?"inline-edit-remove backgroundColoring":"inline-edit-remove";for(const i of t)e.push({range:i,options:{inlineClassName:s,description:"inline-edit-remove"}})}for(const t of i.inlineTexts)e.push({range:Es.fromPositions(new Cs(i.lineNumber,t.column)),options:{description:Ent,after:{content:t.text,inlineClassName:t.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:sg.Left},showIfCollapsed:!0}});return e})),this.additionalLinesWidget=this._register(new ttt(this.editor,this.languageService.languageIdCodec,Gz((t=>{const i=this.uiState.read(t);return i&&!i.isPureRemove?{lineNumber:i.lineNumber,additionalLines:i.additionalLines,minReservedLineCount:i.additionalReservedLineCount,targetTextModel:i.targetTextModel}:void 0})))),this._register(qi((()=>{this.isDisposed.set(!0,void 0)}))),this._register(G7(this.editor,this.decorations))}ownsViewZone(t){return this.additionalLinesWidget.viewZoneId===t}};Bnt=xnt([Cnt(2,Od)],Bnt);var Dnt,Mnt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Snt=function(t,i){return function(e,s){i(e,s,t)}};let Fnt=class extends te{constructor(t,i,e){super(),this.editor=t,this.model=i,this.instantiationService=e,this.alwaysShowToolbar=rU(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(63).showToolbar==="always")),this.sessionPosition=void 0,this.position=Gz(this,(t=>{var i,e,s;const n=(i=this.model.read(t))===null||i===void 0?void 0:i.widget.model.ghostText.read(t);if(!this.alwaysShowToolbar.read(t)||!n||n.parts.length===0)return this.sessionPosition=void 0,null;const o=n.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==n.lineNumber&&(this.sessionPosition=void 0);const r=new Cs(n.lineNumber,Math.min(o,(s=(e=this.sessionPosition)===null||e===void 0?void 0:e.column)!==null&&s!==void 0?s:Number.MAX_SAFE_INTEGER));return this.sessionPosition=r,r})),this._register(eU(((i,e)=>{if(!this.model.read(i)||!this.alwaysShowToolbar.read(i))return;const s=e.add(this.instantiationService.createInstance(Int,this.editor,!0,this.position));t.addContentWidget(s),e.add(qi((()=>t.removeContentWidget(s))))})))}};Fnt=Mnt([Snt(2,Oa)],Fnt);let Int=Dnt=class extends te{constructor(t,i,e,s,n,o){super(),this.editor=t,this.withBorder=i,this._position=e,this._contextKeyService=n,this._menuService=o,this.id="InlineEditHintsContentWidget"+Dnt.id++,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=va("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[va("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(tu.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(s.createInstance(Rnt,this.nodes.toolBar,this.editor,tu.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:t=>t.startsWith("primary")},actionViewItemProvider:(t,i)=>{if(t instanceof ou)return s.createInstance(Lnt,t,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility((t=>{Dnt._dropDownVisible=t}))),this._register(Zz((t=>{this._position.read(t),this.editor.layoutContentWidget(this)}))),this._register(Zz((t=>{const i=[];for(const[t,e]of this.inlineCompletionsActionsMenus.getActions())for(const t of e)t instanceof ou&&i.push(t);i.length>0&&i.unshift(new Ya),this.toolBar.setAdditionalSecondaryActions(i)})))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};Int._dropDownVisible=!1,Int.id=0,Int=Dnt=Mnt([Snt(3,Oa),Snt(4,Nl),Snt(5,iu)],Int);class Lnt extends MH{updateLabel(){const t=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!t)return super.updateLabel();if(this.label){const i=va("div.keybinding").root;this._register(new PY(i,Rt,{disableTitle:!0,...HY})).set(t),this.label.textContent=this._action.label,this.label.appendChild(i),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}}let Rnt=class extends DK{constructor(t,i,e,s,n,o,r,h,c){super(t,{resetMenu:e,...s},n,o,r,h,c),this.editor=i,this.menuId=e,this.options2=s,this.menuService=n,this.contextKeyService=o,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange((()=>this.updateToolbar()))),this._store.add(this.editor.onDidChangeCursorPosition((()=>this.updateToolbar()))),this.updateToolbar()}updateToolbar(){var t,i,e,s,n,o,r;const h=[],c=[];BH(this.menu,(t=this.options2)===null||t===void 0?void 0:t.menuOptions,{primary:h,secondary:c},(e=(i=this.options2)===null||i===void 0?void 0:i.toolbarOptions)===null||e===void 0?void 0:e.primaryGroup,(n=(s=this.options2)===null||s===void 0?void 0:s.toolbarOptions)===null||n===void 0?void 0:n.shouldInlineSubmenu,(r=(o=this.options2)===null||o===void 0?void 0:o.toolbarOptions)===null||r===void 0?void 0:r.useSeparatorsInPrimaryActions),c.push(...this.additionalActions),h.unshift(...this.prependedPrimaryActions),this.setActions(h,c)}setAdditionalSecondaryActions(t){h(this.additionalActions,t,((t,i)=>t===i))||(this.additionalActions=t,this.updateToolbar())}};Rnt=Mnt([Snt(4,iu),Snt(5,Nl),Snt(6,aT),Snt(7,Hx),Snt(8,cu)],Rnt);var Tnt,Nnt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Qnt=function(t,i){return function(e,s){i(e,s,t)}};class Ont{constructor(t,i){this.widget=t,this.edit=i}dispose(){this.widget.dispose()}}let znt=Tnt=class extends te{static get(t){return t.getContribution(Tnt.ID)}constructor(t,i,e,s,n,o){super(),this.editor=t,this.instantiationService=i,this.contextKeyService=e,this.languageFeaturesService=s,this._commandService=n,this._configurationService=o,this._isVisibleContext=Tnt.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=Tnt.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=this._register(_z(this,void 0)),this._isAccepting=Wz(this,!1),this._enabled=rU(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(63).enabled)),this._fontFamily=rU(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(63).fontFamily)),this._backgroundColoring=rU(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(63).backgroundColoring));const r=cU("InlineEditController.modelContentChangedSignal",t.onDidChangeModelContent);this._register(Zz((i=>{this._enabled.read(i)&&(r.read(i),this._isAccepting.read(i)||this.getInlineEdit(t,!0))})));const h=rU(t.onDidChangeCursorPosition,(()=>t.getPosition()));this._register(Zz((t=>{if(!this._enabled.read(t))return;const i=h.read(t);i&&this.checkCursorPosition(i)}))),this._register(Zz((i=>{const e=this._currentEdit.read(i);if(this._isCursorAtInlineEditContext.set(!1),!e)return void this._isVisibleContext.set(!1);this._isVisibleContext.set(!0);const s=t.getPosition();s&&this.checkCursorPosition(s)})));const c=cU("InlineEditController.editorBlurSignal",t.onDidBlurEditorWidget);this._register(Zz((async i=>{var e;this._enabled.read(i)&&(c.read(i),this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||t.getOption(63).keepOnBlur||((e=this._currentRequestCts)===null||e===void 0||e.dispose(!0),this._currentRequestCts=void 0,await this.clear(!1)))})));const a=cU("InlineEditController.editorFocusSignal",t.onDidFocusEditorText);this._register(Zz((i=>{this._enabled.read(i)&&(a.read(i),this.getInlineEdit(t,!0))})));const l=this._register(Oc());this._register(Zz((t=>{const i=this._fontFamily.read(t);l.setStyle(i===""||i==="default"?"":`\n.monaco-editor .inline-edit-decoration,\n.monaco-editor .inline-edit-decoration-preview,\n.monaco-editor .inline-edit {\n\tfont-family: ${i};\n}`)}))),this._register(new Fnt(this.editor,this._currentEdit,this.instantiationService))}checkCursorPosition(t){var i;if(!this._currentEdit)return void this._isCursorAtInlineEditContext.set(!1);const e=(i=this._currentEdit.get())===null||i===void 0?void 0:i.edit;e?this._isCursorAtInlineEditContext.set(Es.containsPosition(e.range,t)):this._isCursorAtInlineEditContext.set(!1)}validateInlineEdit(t,i){var e,s;if(i.text.includes(`\n`)&&i.range.startLineNumber!==i.range.endLineNumber&&i.range.startColumn!==i.range.endColumn){if(i.range.startColumn!==1)return!1;const n=i.range.endLineNumber;if(i.range.endColumn!==((s=(e=t.getModel())===null||e===void 0?void 0:e.getLineLength(n))!==null&&s!==void 0?s:0)+1)return!1}return!0}async fetchInlineEdit(t,i){this._currentRequestCts&&this._currentRequestCts.dispose(!0);const e=t.getModel();if(!e)return;const s=e.getVersionId(),n=this.languageFeaturesService.inlineEditProvider.all(e);if(n.length===0)return;const o=n[0];this._currentRequestCts=new xe;const r=this._currentRequestCts.token,h=i?Ks.Automatic:Ks.Invoke;var c,a;if(i&&await(c=50,a=r,new Promise((t=>{let i;const e=setTimeout((()=>{i&&i.dispose(),t()}),c);a&&(i=a.onCancellationRequested((()=>{clearTimeout(e),i&&i.dispose(),t()})))}))),r.isCancellationRequested||e.isDisposed()||e.getVersionId()!==s)return;const l=await o.provideInlineEdit(e,{triggerKind:h},r);return l&&!r.isCancellationRequested&&!e.isDisposed()&&e.getVersionId()===s&&this.validateInlineEdit(t,l)?l:void 0}async getInlineEdit(t,i){var e;this._isCursorAtInlineEditContext.set(!1),await this.clear();const s=await this.fetchInlineEdit(t,i);if(!s)return;const n=s.range.endLineNumber,o=s.range.endColumn,r=new P7(n,[new j7(o,s.text,!1)]),h=this.instantiationService.createInstance(Bnt,this.editor,{ghostText:nU(r),minReservedLineCount:nU(0),targetTextModel:nU((e=this.editor.getModel())!==null&&e!==void 0?e:void 0),range:nU(s.range),backgroundColoring:this._backgroundColoring});this._currentEdit.set(new Ont(h,s),void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}async accept(){var t;this._isAccepting.set(!0,void 0);const i=(t=this._currentEdit.get())===null||t===void 0?void 0:t.edit;if(!i)return;let e=i.text;i.text.startsWith(`\n`)&&(e=i.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[KQ.replace(Es.lift(i.range),e)]),i.accepted&&await this._commandService.executeCommand(i.accepted.id,...i.accepted.arguments||[]).then(void 0,zi),this.freeEdit(i),Uz((t=>{this._currentEdit.set(void 0,t),this._isAccepting.set(!1,t)}))}jumpToCurrent(){var t,i;this._jumpBackPosition=(t=this.editor.getSelection())===null||t===void 0?void 0:t.getStartPosition();const e=(i=this._currentEdit.get())===null||i===void 0?void 0:i.edit;if(!e)return;const s=Cs.lift({lineNumber:e.range.startLineNumber,column:e.range.startColumn});this.editor.setPosition(s),this.editor.revealPositionInCenterIfOutsideViewport(s)}async clear(t=!0){var i;const e=(i=this._currentEdit.get())===null||i===void 0?void 0:i.edit;e&&(e!=null&&e.rejected)&&t&&await this._commandService.executeCommand(e.rejected.id,...e.rejected.arguments||[]).then(void 0,zi),e&&this.freeEdit(e),this._currentEdit.set(void 0,void 0)}freeEdit(t){const i=this.editor.getModel();if(!i)return;const e=this.languageFeaturesService.inlineEditProvider.all(i);e.length!==0&&e[0].freeInlineEdit(t)}shouldShowHoverAt(t){const i=this._currentEdit.get();if(!i)return!1;const e=i.edit,s=i.widget.model;if(Es.containsPosition(e.range,t.getStartPosition())||Es.containsPosition(e.range,t.getEndPosition()))return!0;const n=s.ghostText.get();return!!n&&n.parts.some((i=>t.containsPosition(new Cs(n.lineNumber,i.column))))}shouldShowHoverAtViewZone(t){var i,e;return(e=(i=this._currentEdit.get())===null||i===void 0?void 0:i.widget.ownsViewZone(t))!==null&&e!==void 0&&e}};znt.ID="editor.contrib.inlineEditController",znt.inlineEditVisibleKey="inlineEditVisible",znt.inlineEditVisibleContext=new Tl(Tnt.inlineEditVisibleKey,!1),znt.cursorAtInlineEditKey="cursorAtInlineEdit",znt.cursorAtInlineEditContext=new Tl(Tnt.cursorAtInlineEditKey,!1),znt=Tnt=Nnt([Qnt(1,Oa),Qnt(2,Nl),Qnt(3,jA),Qnt(4,$a),Qnt(5,Id)],znt);var Unt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Hnt=function(t,i){return function(e,s){i(e,s,t)}};class Pnt{constructor(t,i,e){this.owner=t,this.range=i,this.controller=e}isValidForHoverAnchor(t){return t.type===1&&this.range.startColumn<=t.range.startColumn&&this.range.endColumn>=t.range.endColumn}}let jnt=class{constructor(t,i,e){this._editor=t,this._instantiationService=i,this._telemetryService=e,this.hoverOrdinal=5}suggestHoverAnchor(t){const i=znt.get(this._editor);if(!i)return null;const e=t.target;if(e.type===8){const s=e.detail;if(i.shouldShowHoverAtViewZone(s.viewZoneId)){const i=e.range;return new J3(1e3,this,i,t.event.posx,t.event.posy,!1)}}return e.type===7&&i.shouldShowHoverAt(e.range)?new J3(1e3,this,e.range,t.event.posx,t.event.posy,!1):e.type===6&&e.detail.mightBeForeignElement&&i.shouldShowHoverAt(e.range)?new J3(1e3,this,e.range,t.event.posx,t.event.posy,!1):null}computeSync(t,i){if(this._editor.getOption(63).showToolbar!=="onHover")return[];const e=znt.get(this._editor);return e&&e.shouldShowHoverAt(t.range)?[new Pnt(this,t.range,e)]:[]}renderHoverParts(t,i){const e=new Zi;this._telemetryService.publicLog2("inlineEditHover.shown");const s=this._instantiationService.createInstance(Int,this._editor,!1,nU(null));return t.fragment.appendChild(s.getDomNode()),e.add(s),e}};jnt=Unt([Hnt(1,Oa),Hnt(2,cu)],jnt),Cu(class extends vu{constructor(){super({id:"editor.action.inlineEdit.accept",label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:gl.and(QC.writable,znt.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:gl.and(QC.writable,znt.inlineEditVisibleContext,znt.cursorAtInlineEditContext)}],menuOpts:[{menuId:tu.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(t,i){const e=znt.get(i);await(e==null?void 0:e.accept())}}),Cu(class extends vu{constructor(){const t=gl.and(QC.writable,znt.inlineEditVisibleContext);super({id:"editor.action.inlineEdit.reject",label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:t,kbOpts:{weight:100,primary:9,kbExpr:t},menuOpts:[{menuId:tu.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(t,i){const e=znt.get(i);await(e==null?void 0:e.clear())}}),Cu(class extends vu{constructor(){const t=gl.and(QC.writable,znt.inlineEditVisibleContext,gl.not(znt.cursorAtInlineEditKey));super({id:"editor.action.inlineEdit.jumpTo",label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:t,kbOpts:{weight:101,primary:2646,kbExpr:t},menuOpts:[{menuId:tu.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:t}]})}async run(t,i){const e=znt.get(i);e==null||e.jumpToCurrent()}}),Cu(class extends vu{constructor(){const t=gl.and(QC.writable,znt.cursorAtInlineEditContext);super({id:"editor.action.inlineEdit.jumpBack",label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:t,kbOpts:{weight:110,primary:2646,kbExpr:t},menuOpts:[{menuId:tu.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:t}]})}async run(t,i){const e=znt.get(i);e==null||e.jumpBack()}}),Cu(class extends vu{constructor(){const t=gl.and(QC.writable,gl.not(znt.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:t,kbOpts:{weight:101,primary:2646,kbExpr:t}})}async run(t,i){const e=znt.get(i);e==null||e.trigger()}}),Bu(znt.ID,znt,3),G3.register(jnt);const Wnt={Visible:new Tl("parameterHintsVisible",!1),MultipleSignatures:new Tl("parameterHintsMultipleSignatures",!1)};async function Ynt(t,i,e,s,n){const o=t.ordered(i);for(const t of o)try{const o=await t.provideSignatureHelp(i,e,n,s);if(o)return o}catch(t){zi(t)}}var _nt;Xa.registerCommand("_executeSignatureHelpProvider",(async(t,...i)=>{const[e,s,n]=i;Y(fs.isUri(e)),Y(Cs.isIPosition(s)),Y(typeof n=="string"||!n);const o=t.get(jA),r=await t.get(Pa).createModelReference(e);try{const t=await Ynt(o.signatureHelpProvider,r.object.textEditorModel,Cs.lift(s),{triggerKind:zs.Invoke,isRetrigger:!1,triggerCharacter:n},ye.None);return t?(setTimeout((()=>t.dispose()),0),t.value):void 0}finally{r.dispose()}})),function(t){t.Default={type:0},t.Pending=class{constructor(t,i){this.request=t,this.previouslyActiveHints=i,this.type=2}},t.Active=class{constructor(t){this.hints=t,this.type=1}}}(_nt||(_nt={}));class Vnt extends te{constructor(t,i,e=Vnt.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new de),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=_nt.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new ie),this.triggerChars=new Of,this.retriggerChars=new Of,this.triggerId=0,this.editor=t,this.providers=i,this.throttledDelayer=new mr(e),this._register(this.editor.onDidBlurEditorWidget((()=>this.cancel()))),this._register(this.editor.onDidChangeConfiguration((()=>this.onEditorConfigurationChange()))),this._register(this.editor.onDidChangeModel((t=>this.onModelChanged()))),this._register(this.editor.onDidChangeModelLanguage((t=>this.onModelChanged()))),this._register(this.editor.onDidChangeCursorSelection((t=>this.onCursorChange(t)))),this._register(this.editor.onDidChangeModelContent((t=>this.onModelContentChange()))),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType((t=>this.onDidType(t)))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(t){this._state.type===2&&this._state.request.cancel(),this._state=t}cancel(t=!1){this.state=_nt.Default,this.throttledDelayer.cancel(),t||this._onChangedHints.fire(void 0)}trigger(t,i){const e=this.editor.getModel();if(!e||!this.providers.has(e))return;const s=++this.triggerId;this._pendingTriggers.push(t),this.throttledDelayer.trigger((()=>this.doTrigger(s)),i).catch(Oi)}next(){if(this.state.type!==1)return;const t=this.state.hints.signatures.length,i=this.state.hints.activeSignature,e=i%t==t-1,s=this.editor.getOption(86).cycle;!(t<2||e)||s?this.updateActiveSignature(e&&s?0:i+1):this.cancel()}previous(){if(this.state.type!==1)return;const t=this.state.hints.signatures.length,i=this.state.hints.activeSignature,e=i===0,s=this.editor.getOption(86).cycle;!(t<2||e)||s?this.updateActiveSignature(e&&s?t-1:i-1):this.cancel()}updateActiveSignature(t){this.state.type===1&&(this.state=new _nt.Active({...this.state.hints,activeSignature:t}),this._onChangedHints.fire(this.state.hints))}async doTrigger(t){const i=this.state.type===1||this.state.type===2,e=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const s=this._pendingTriggers.reduce(Jnt);this._pendingTriggers=[];const n={triggerKind:s.triggerKind,triggerCharacter:s.triggerCharacter,isRetrigger:i,activeSignatureHelp:e};if(!this.editor.hasModel())return!1;const o=this.editor.getModel(),r=this.editor.getPosition();this.state=new _nt.Pending(Ar((t=>Ynt(this.providers,o,r,n,t))),e);try{const i=await this.state.request;return t!==this.triggerId?(i==null||i.dispose(),!1):i&&i.value.signatures&&i.value.signatures.length!==0?(this.state=new _nt.Active(i.value),this._lastSignatureHelpResult.value=i,this._onChangedHints.fire(this.state.hints),!0):(i==null||i.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1)}catch(i){return t===this.triggerId&&(this.state=_nt.Default),Oi(i),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const t=this.editor.getModel();if(t)for(const i of this.providers.ordered(t)){for(const t of i.signatureHelpTriggerCharacters||[])if(t.length){const i=t.charCodeAt(0);this.triggerChars.add(i),this.retriggerChars.add(i)}for(const t of i.signatureHelpRetriggerCharacters||[])t.length&&this.retriggerChars.add(t.charCodeAt(0))}}onDidType(t){if(!this.triggerOnType)return;const i=t.length-1,e=t.charCodeAt(i);(this.triggerChars.has(e)||this.isTriggered&&this.retriggerChars.has(e))&&this.trigger({triggerKind:zs.TriggerCharacter,triggerCharacter:t.charAt(i)})}onCursorChange(t){t.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:zs.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:zs.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}function Jnt(t,i){switch(i.triggerKind){case zs.Invoke:return i;case zs.ContentChange:return t;case zs.TriggerCharacter:default:return i}}Vnt.DEFAULT_DELAY=120;var Gnt,Knt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},$nt=function(t,i){return function(e,s){i(e,s,t)}};const Xnt=ha,qnt=X_("parameter-hints-next",Fs.chevronDown,st(0,"Icon for show next parameter hint.")),Znt=X_("parameter-hints-previous",Fs.chevronUp,st(0,"Icon for show previous parameter hint."));let tot=Gnt=class extends te{constructor(t,i,e,s,n){super(),this.editor=t,this.model=i,this.renderDisposeables=this._register(new Zi),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new pQ({editor:t},n,s)),this.keyVisible=Wnt.Visible.bindTo(e),this.keyMultipleSignatures=Wnt.MultipleSignatures.bindTo(e)}createParameterHintDOMNodes(){const t=Xnt(".editor-widget.parameter-hints-widget"),i=ia(t,Xnt(".phwrapper"));i.tabIndex=-1;const e=ia(i,Xnt(".controls")),s=ia(e,Xnt(".button"+Ka.asCSSSelector(Znt))),n=ia(e,Xnt(".overloads")),o=ia(e,Xnt(".button"+Ka.asCSSSelector(qnt)));this._register(rc(s,"click",(t=>{qc(t),this.previous()}))),this._register(rc(o,"click",(t=>{qc(t),this.next()})));const r=Xnt(".body"),h=new ck(r,{alwaysConsumeMouseWheel:!0});this._register(h),i.appendChild(h.getDomNode());const c=ia(r,Xnt(".signature")),a=ia(r,Xnt(".docs"));t.style.userSelect="text",this.domNodes={element:t,signature:c,overloads:n,docs:a,scrollbar:h},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection((t=>{this.visible&&this.editor.layoutContentWidget(this)})));const l=()=>{if(!this.domNodes)return;const t=this.editor.getOption(50);this.domNodes.element.style.fontSize=`${t.fontSize}px`,this.domNodes.element.style.lineHeight=""+t.lineHeight/t.fontSize};l(),this._register(he.chain(this.editor.onDidChangeConfiguration.bind(this.editor),(t=>t.filter((t=>t.hasChanged(50)))))(l)),this._register(this.editor.onDidLayoutChange((t=>this.updateMaxHeight()))),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout((()=>{var t;(t=this.domNodes)===null||t===void 0||t.element.classList.add("visible")}),100),this.editor.layoutContentWidget(this))}hide(){var t;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(t=this.domNodes)===null||t===void 0||t.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(t){var i;if(this.renderDisposeables.clear(),!this.domNodes)return;const e=t.signatures.length>1;this.domNodes.element.classList.toggle("multiple",e),this.keyMultipleSignatures.set(e),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const s=t.signatures[t.activeSignature];if(!s)return;const n=ia(this.domNodes.signature,Xnt(".code")),o=this.editor.getOption(50);n.style.fontSize=`${o.fontSize}px`,n.style.fontFamily=o.fontFamily;const r=s.parameters.length>0,h=(i=s.activeParameter)!==null&&i!==void 0?i:t.activeParameter;r?this.renderParameters(n,s,h):ia(n,Xnt("span")).textContent=s.label;const c=s.parameters[h];if(c!=null&&c.documentation){const t=Xnt("span.documentation");if(typeof c.documentation=="string")t.textContent=c.documentation;else{const i=this.renderMarkdownDocs(c.documentation);t.appendChild(i.element)}ia(this.domNodes.docs,Xnt("p",{},t))}if(s.documentation!==void 0)if(typeof s.documentation=="string")ia(this.domNodes.docs,Xnt("p",{},s.documentation));else{const t=this.renderMarkdownDocs(s.documentation);ia(this.domNodes.docs,t.element)}const a=this.hasDocs(s,c);if(this.domNodes.signature.classList.toggle("has-docs",a),this.domNodes.docs.classList.toggle("empty",!a),this.domNodes.overloads.textContent=String(t.activeSignature+1).padStart(t.signatures.length.toString().length,"0")+"/"+t.signatures.length,c){let t="";const i=s.parameters[h];t=Array.isArray(i.label)?s.label.substring(i.label[0],i.label[1]):i.label,i.documentation&&(t+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),s.documentation&&(t+=typeof s.documentation=="string"?`, ${s.documentation}`:`, ${s.documentation.value}`),this.announcedLabel!==t&&(cw(st(0,"{0}, hint",t)),this.announcedLabel=t)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(t){const i=this.renderDisposeables.add(this.markdownRenderer.render(t,{asyncRenderCallback:()=>{var t;(t=this.domNodes)===null||t===void 0||t.scrollbar.scanDomNode()}}));return i.element.classList.add("markdown-docs"),i}hasDocs(t,i){return!!(i&&typeof i.documentation=="string"&&_(i.documentation).length>0)||!!(i&&typeof i.documentation=="object"&&_(i.documentation).value.length>0)||!!(t.documentation&&typeof t.documentation=="string"&&_(t.documentation).length>0)||!!(t.documentation&&typeof t.documentation=="object"&&_(t.documentation.value).length>0)}renderParameters(t,i,e){const[s,n]=this.getParameterLabelOffsets(i,e),o=document.createElement("span");o.textContent=i.label.substring(0,s);const r=document.createElement("span");r.textContent=i.label.substring(s,n),r.className="parameter active";const h=document.createElement("span");h.textContent=i.label.substring(n),ia(t,o,r,h)}getParameterLabelOffsets(t,i){const e=t.parameters[i];if(e){if(Array.isArray(e.label))return e.label;if(e.label.length){const i=new RegExp(`(\\W|^)${Xn(e.label)}(?=\\W|$)`,"g");i.test(t.label);const s=i.lastIndex-e.label.length;return s>=0?[s,i.lastIndex]:[0,0]}return[0,0]}return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return Gnt.ID}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}};tot.ID="editor.widget.parameterHintsWidget",tot=Gnt=Knt([$nt(2,Nl),$nt(3,gT),$nt(4,Od)],tot),Ow("editorHoverWidget.highlightForeground",{dark:db,light:db,hcDark:db,hcLight:db},st(0,"Foreground color of the active item in the parameter hint."));var iot,eot=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},sot=function(t,i){return function(e,s){i(e,s,t)}};let not=iot=class extends te{static get(t){return t.getContribution(iot.ID)}constructor(t,i,e){super(),this.editor=t,this.model=this._register(new Vnt(t,e.signatureHelpProvider)),this._register(this.model.onChangedHints((t=>{var i;t?(this.widget.value.show(),this.widget.value.render(t)):(i=this.widget.rawValue)===null||i===void 0||i.hide()}))),this.widget=new _n((()=>this._register(i.createInstance(tot,this.editor,this.model))))}cancel(){this.model.cancel()}previous(){var t;(t=this.widget.rawValue)===null||t===void 0||t.previous()}next(){var t;(t=this.widget.rawValue)===null||t===void 0||t.next()}trigger(t){this.model.trigger(t,0)}};not.ID="editor.controller.parameterHints",not=iot=eot([sot(1,Oa),sot(2,jA)],not);Bu(not.ID,not,2),Cu(class extends vu{constructor(){super({id:"editor.action.triggerParameterHints",label:st(0,"Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:QC.hasSignatureHelpProvider,kbOpts:{kbExpr:QC.editorTextFocus,primary:3082,weight:100}})}run(t,i){const e=not.get(i);e==null||e.trigger({triggerKind:zs.Invoke})}});const oot=mu.bindToContribution(not.get);xu(new oot({id:"closeParameterHints",precondition:Wnt.Visible,handler:t=>t.cancel(),kbOpts:{weight:175,kbExpr:QC.focus,primary:9,secondary:[1033]}})),xu(new oot({id:"showPrevParameterHint",precondition:gl.and(Wnt.Visible,Wnt.MultipleSignatures),handler:t=>t.previous(),kbOpts:{weight:175,kbExpr:QC.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),xu(new oot({id:"showNextParameterHint",precondition:gl.and(Wnt.Visible,Wnt.MultipleSignatures),handler:t=>t.next(),kbOpts:{weight:175,kbExpr:QC.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var rot=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},hot=function(t,i){return function(e,s){i(e,s,t)}};const cot=new Tl("renameInputVisible",!1,st(0,"Whether the rename input widget is visible"));new Tl("renameInputFocused",!1,st(0,"Whether the rename input widget is focused"));let aot=class{constructor(t,i,e,s,n,o){this._editor=t,this._acceptKeybindings=i,this._themeService=e,this._keybindingService=s,this._logService=o,this.allowEditorOverflow=!0,this._disposables=new Zi,this._visibleContextKey=cot.bindTo(n),this._isEditingRenameCandidate=!1,this._beforeFirstInputFieldEditSW=new re,this._input=new uot,this._disposables.add(this._input),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((t=>{t.hasChanged(50)&&this._updateFont()}))),this._disposables.add(e.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._input.domNode),this._renameCandidateListView=this._disposables.add(new lot(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:t=>{this._input.domNode.value=t,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._input.onDidChange((()=>{var t,i,e,s;((t=this._renameCandidateListView)===null||t===void 0?void 0:t.focusedCandidate)!==void 0&&(this._isEditingRenameCandidate=!0),(i=this._timeBeforeFirstInputFieldEdit)!==null&&i!==void 0||(this._timeBeforeFirstInputFieldEdit=this._beforeFirstInputFieldEditSW.elapsed()),((e=this._renameCandidateProvidersCts)===null||e===void 0?void 0:e.token.isCancellationRequested)===!1&&this._renameCandidateProvidersCts.cancel(),(s=this._renameCandidateListView)===null||s===void 0||s.clearFocus()}))),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(t){var i,e,s,n;if(!this._domNode)return;const o=t.getColor(jm),r=t.getColor(Wm);this._domNode.style.backgroundColor=String((i=t.getColor(cm))!==null&&i!==void 0?i:""),this._domNode.style.boxShadow=o?` 0 0 8px 2px ${o}`:"",this._domNode.style.border=r?`1px solid ${r}`:"",this._domNode.style.color=String((e=t.getColor(wv))!==null&&e!==void 0?e:""),this._input.domNode.style.backgroundColor=String((s=t.getColor(pv))!==null&&s!==void 0?s:"");const h=t.getColor(mv);this._input.domNode.style.borderWidth=h?"1px":"0px",this._input.domNode.style.borderStyle=h?"solid":"none",this._input.domNode.style.borderColor=(n=h==null?void 0:h.toString())!==null&&n!==void 0?n:"none"}_updateFont(){if(this._domNode===void 0)return;Y(this._label!==void 0,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._input.domNode);const t=this._editor.getOption(50);this._label.style.fontSize=`${this._computeLabelFontSize(t.fontSize)}px`}_computeLabelFontSize(t){return.8*t}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;const t=wc(this.getDomNode().ownerDocument.body),i=yc(this._editor.getDomNode()),e=this._getTopForPosition();this._nPxAvailableAbove=e+i.top,this._nPxAvailableBelow=t.height-this._nPxAvailableAbove;const s=this._editor.getOption(67),{totalHeight:n}=dot.getLayoutInfo({lineHeight:s}),o=this._nPxAvailableBelow>6*n?[2,1]:[1,2];return{position:this._position,preference:o}}beforeRender(){var t,i;const[e,s]=this._acceptKeybindings;return this._label.innerText=st(0,"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(e))===null||t===void 0?void 0:t.getLabel(),(i=this._keybindingService.lookupKeybinding(s))===null||i===void 0?void 0:i.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(t){if(this._trace("invoking afterRender, position: ",t?"not null":"null"),t===null)return void this.cancelInput(!0,"afterRender (because position is null)");if(!this._editor.hasModel()||!this._editor.getDomNode())return;Y(this._renameCandidateListView),Y(this._nPxAvailableAbove!==void 0),Y(this._nPxAvailableBelow!==void 0);const i=Bc(this._input.domNode),e=Bc(this._label);let s;s=t===2?this._nPxAvailableBelow:this._nPxAvailableAbove,this._renameCandidateListView.layout({height:s-e-i,width:xc(this._input.domNode)})}acceptInput(t){var i;this._trace("invoking acceptInput"),(i=this._currentAcceptInput)===null||i===void 0||i.call(this,t)}cancelInput(t,i){var e;this._trace(`invoking cancelInput, caller: ${i}, _currentCancelInput: ${this._currentAcceptInput?"not undefined":"undefined"}`),(e=this._currentCancelInput)===null||e===void 0||e.call(this,t)}focusNextRenameSuggestion(){var t;!((t=this._renameCandidateListView)===null||t===void 0)&&t.focusNext()||(this._input.domNode.value=this._currentName)}focusPreviousRenameSuggestion(){var t;!((t=this._renameCandidateListView)===null||t===void 0)&&t.focusPrevious()||(this._input.domNode.value=this._currentName)}getInput(t,i,e,s,n){const{start:o,end:r}=this._getSelection(t,i);this._renameCandidateProvidersCts=new xe;const h=s(this._renameCandidateProvidersCts.token);this._updateRenameCandidates(h,i,n.token),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",e),this._position=new Cs(t.startLineNumber,t.startColumn),this._currentName=i,this._input.domNode.value=i,this._input.domNode.setAttribute("selectionStart",o.toString()),this._input.domNode.setAttribute("selectionEnd",r.toString()),this._input.domNode.size=Math.max(1.1*(t.endColumn-t.startColumn),20),this._beforeFirstInputFieldEditSW.reset();const c=new Zi;c.add(qi((()=>n.dispose(!0)))),c.add(qi((()=>{this._renameCandidateProvidersCts!==void 0&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)})));const a=new Fr;return a.p.finally((()=>{c.dispose(),this._hide()})),this._currentCancelInput=t=>{var i;return this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,(i=this._renameCandidateListView)===null||i===void 0||i.clearCandidates(),a.complete(t),!0},this._currentAcceptInput=t=>{this._trace("invoking _currentAcceptInput"),Y(this._renameCandidateListView!==void 0);const s=this._renameCandidateListView.nCandidates;let n,o;const r=this._renameCandidateListView.focusedCandidate;r!==void 0?(this._trace("using new name from renameSuggestion"),n=r,o={k:"renameSuggestion"}):(this._trace("using new name from inputField"),n=this._input.domNode.value,o=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),n!==i&&n.trim().length!==0?(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),a.complete({newName:n,wantsPreview:e&&t,stats:{source:o,nRenameSuggestions:s,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit}})):this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)")},c.add(n.token.onCancellationRequested((()=>this.cancelInput(!0,"cts.token.onCancellationRequested")))),c.add(this._editor.onDidBlurEditorWidget((()=>{var t;return this.cancelInput(!(!((t=this._domNode)===null||t===void 0)&&t.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")}))),this._show(),a.p}_getSelection(t,i){Y(this._editor.hasModel());const e=this._editor.getSelection();let s=0,n=i.length;return Es.isEmpty(e)||Es.spansMultipleLines(e)||!Es.containsRange(t,e)||(s=Math.max(0,e.startColumn-t.startColumn),n=Math.min(t.endColumn,e.endColumn)-t.startColumn),{start:s,end:n}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((()=>{this._input.domNode.focus(),this._input.domNode.setSelectionRange(parseInt(this._input.domNode.getAttribute("selectionStart")),parseInt(this._input.domNode.getAttribute("selectionEnd")))}),100)}async _updateRenameCandidates(t,i,e){const s=(...t)=>this._trace("_updateRenameCandidates",...t);s("start");const n=await pr(Promise.allSettled(t),e);if(n===void 0)return void s("returning early - received updateRenameCandidates results - undefined");const o=n.flatMap((t=>t.status==="fulfilled"&&j(t.value)?t.value:[]));s(`received updateRenameCandidates results - total (unfiltered) ${o.length} candidates.`);const r=w(o,(t=>t.newSymbolName));s(`distinct candidates - ${r.length} candidates.`);const h=r.filter((({newSymbolName:t})=>t.trim().length>0&&t!==this._input.domNode.value&&t!==i));s(`valid distinct candidates - ${o.length} candidates.`),h.length<1?s("returning early - no valid distinct candidates"):(s("setting candidates"),this._renameCandidateListView.setCandidates(h),s("asking editor to re-layout"),this._editor.layoutContentWidget(this))}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){const t=this._editor.getVisibleRanges();let i;return t.length>0?i=t[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),i=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(i)}_trace(...t){this._logService.trace("RenameWidget",...t)}};aot=rot([hot(2,Fk),hot(3,Hx),hot(4,Nl),hot(5,au)],aot);class lot{constructor(t,i){this._disposables=new Zi,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=i.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=i.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),t.appendChild(this._listContainer),this._listWidget=lot._createListWidget(this._listContainer,this._candidateViewHeight,i.fontInfo),this._listWidget.onDidChangeFocus((t=>{t.elements.length===1&&i.onFocusChange(t.elements[0].newSymbolName)}),this._disposables),this._listWidget.onDidChangeSelection((t=>{t.elements.length===1&&i.onSelectionChange()}),this._disposables),this._disposables.add(this._listWidget.onDidBlur((t=>{this._listWidget.setFocus([])}))),this._listWidget.style(vH({listInactiveFocusForeground:zb,listInactiveFocusBackground:Hb}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:t,width:i}){this._availableHeight=t,this._minimumWidth=i}setCandidates(t){this._listWidget.splice(0,0,t);const i=this._pickListHeight(t.length),e=this._pickListWidth(t);this._listWidget.layout(i,e),this._listContainer.style.height=`${i}px`,this._listContainer.style.width=`${e}px`,aw(st(0,"Received {0} rename suggestions",t.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(this._listWidget.length===0)return;const t=this._listWidget.getSelectedElements()[0];if(t!==void 0)return t.newSymbolName;const i=this._listWidget.getFocusedElements()[0];return i!==void 0?i.newSymbolName:void 0}focusNext(){if(this._listWidget.length===0)return!1;const t=this._listWidget.getFocus();return t.length===0?(this._listWidget.focusFirst(),!0):t[0]===this._listWidget.length-1?(this._listWidget.setFocus([]),!1):(this._listWidget.focusNext(),!0)}focusPrevious(){if(this._listWidget.length===0)return!1;const t=this._listWidget.getFocus();return t.length===0?(this._listWidget.focusLast(),!0):t[0]===0?(this._listWidget.setFocus([]),!1):(this._listWidget.focusPrevious(),!0)}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){const{totalHeight:t}=dot.getLayoutInfo({lineHeight:this._lineHeight});return t}_pickListHeight(t){const i=this._candidateViewHeight*t;return Math.min(i,this._availableHeight,7*this._candidateViewHeight)}_pickListWidth(t){const i=Math.ceil(Math.max(...t.map((t=>t.newSymbolName.length)))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+i+10)}static _createListWidget(t,i,e){const s=new class{getTemplateId(t){return"candidate"}getHeight(t){return i}},n=new class{constructor(){this.templateId="candidate"}renderTemplate(t){return new dot(t,e)}renderElement(t,i,e){e.populate(t)}disposeTemplate(t){t.dispose()}};return new YU("NewSymbolNameCandidates",t,s,[n],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}class uot{constructor(){this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._disposables=new Zi}get domNode(){return this._domNode||(this._domNode=document.createElement("input"),this._domNode.className="rename-input",this._domNode.type="text",this._domNode.setAttribute("aria-label",st(0,"Rename input. Type new name and press Enter to commit.")),this._disposables.add(rc(this._domNode,"input",(()=>this._onDidChange.fire())))),this._domNode}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}}class dot{constructor(t,i){this._domNode=document.createElement("div"),this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height=`${i.lineHeight}px`,this._domNode.style.padding=`${dot._PADDING}px`;const e=document.createElement("div");e.style.display="flex",e.style.alignItems="center",e.style.width=e.style.height=.8*i.lineHeight+"px",this._domNode.appendChild(e),this._icon=xT(Fs.sparkle),this._icon.style.display="none",e.appendChild(this._icon),this._label=document.createElement("div"),Da(this._label,i),this._domNode.appendChild(this._label),t.appendChild(this._domNode)}populate(t){this._updateIcon(t),this._updateLabel(t)}_updateIcon(t){var i;const e=!!(!((i=t.tags)===null||i===void 0)&&i.includes(Ws.AIGenerated));this._icon.style.display=e?"inherit":"none"}_updateLabel(t){this._label.innerText=t.newSymbolName}static getLayoutInfo({lineHeight:t}){return{totalHeight:t+2*dot._PADDING}}dispose(){}}dot._PADDING=2;var fot,got=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Aot=function(t,i){return function(e,s){i(e,s,t)}};class pot{constructor(t,i,e){this.model=t,this.position=i,this._providerRenameIdx=0,this._providers=e.ordered(t)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(t){const i=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const e=this._providers[this._providerRenameIdx];if(!e.resolveRenameLocation)break;const s=await e.resolveRenameLocation(this.model,this.position,t);if(s){if(!s.rejectReason)return s;i.push(s.rejectReason)}}this._providerRenameIdx=0;const e=this.model.getWordAtPosition(this.position);return e?{range:new Es(this.position.lineNumber,e.startColumn,this.position.lineNumber,e.endColumn),text:e.word,rejectReason:i.length>0?i.join(`\n`):void 0}:{range:Es.fromPositions(this.position),text:"",rejectReason:i.length>0?i.join(`\n`):void 0}}async provideRenameEdits(t,i){return this._provideRenameEdits(t,this._providerRenameIdx,[],i)}async _provideRenameEdits(t,i,e,s){const n=this._providers[i];if(!n)return{edits:[],rejectReason:e.join(`\n`)};const o=await n.provideRenameEdits(this.model,this.position,t,s);return o?o.rejectReason?this._provideRenameEdits(t,i+1,e.concat(o.rejectReason),s):o:this._provideRenameEdits(t,i+1,e.concat(st(0,"No result.")),s)}}let wot=fot=class{static get(t){return t.getContribution(fot.ID)}constructor(t,i,e,s,n,o,r,h,c){this.editor=t,this._instaService=i,this._notificationService=e,this._bulkEditService=s,this._progressService=n,this._logService=o,this._configService=r,this._languageFeaturesService=h,this._telemetryService=c,this._disposableStore=new Zi,this._cts=new xe,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(aot,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){var t,i;const e=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new xe,!this.editor.hasModel())return void e("editor has no model");const s=this.editor.getPosition(),n=new pot(this.editor.getModel(),s,this._languageFeaturesService.renameProvider);if(!n.hasProvider())return void e("skeleton has no provider");const o=new UX(this.editor,5,void 0,this._cts.token);let r;try{e("resolving rename location");const t=n.resolveRenameLocation(o.token);this._progressService.showWhile(t,250),r=await t,e("resolved rename location")}catch(i){return void(i instanceof ji?e("resolve rename location cancelled",JSON.stringify(i,null,"\t")):(e("resolve rename location failed",i instanceof Error?i:JSON.stringify(i,null,"\t")),(typeof i=="string"||NN(i))&&((t=N0.get(this.editor))===null||t===void 0||t.showMessage(i||st(0,"An unknown error occurred while resolving rename location"),s))))}finally{o.dispose()}if(!r)return void e("returning early - no loc");if(r.rejectReason)return e(`returning early - rejected with reason: ${r.rejectReason}`,r.rejectReason),void((i=N0.get(this.editor))===null||i===void 0||i.showMessage(r.rejectReason,s));if(o.token.isCancellationRequested)return void e("returning early - cts1 cancelled");const h=new UX(this.editor,5,r.range,this._cts.token),c=this.editor.getModel(),a=this._languageFeaturesService.newSymbolNamesProvider.all(c);e("creating rename input field and awaiting its result");const l=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),u=await this._renameWidget.getInput(r.range,r.text,l,(t=>a.map((i=>i.provideNewSymbolNames(c,r.range,t)))),h);if(e("received response from rename input field"),a.length>0&&this._reportTelemetry(a.length,c.getLanguageId(),u),typeof u=="boolean")return e(`returning early - rename input field response - ${u}`),u&&this.editor.focus(),void h.dispose();this.editor.focus(),e("requesting rename edits");const d=pr(n.provideRenameEdits(u.newName,h.token),h.token).then((async t=>{if(t)if(this.editor.hasModel()){if(t.rejectReason)return e(`returning early - rejected with reason: ${t.rejectReason}`),void this._notificationService.info(t.rejectReason);this.editor.setSelection(Es.fromPositions(this.editor.getSelection().getPosition())),e("applying edits"),this._bulkEditService.apply(t,{editor:this.editor,showPreview:u.wantsPreview,label:st(0,"Renaming '{0}' to '{1}'",r==null?void 0:r.text,u.newName),code:"undoredo.rename",quotableLabel:st(0,"Renaming {0} to {1}",r==null?void 0:r.text,u.newName),respectAutoSaveConfig:!0}).then((t=>{e("edits applied"),t.ariaSummary&&cw(st(0,"Successfully renamed '{0}' to '{1}'. Summary: {2}",r.text,u.newName,t.ariaSummary))})).catch((t=>{e(`error when applying edits ${JSON.stringify(t,null,"\t")}`),this._notificationService.error(st(0,"Rename failed to apply edits")),this._logService.error(t)}))}else e("returning early - no model after rename edits are provided");else e("returning early - no rename edits result")}),(t=>{e("error when providing rename edits",JSON.stringify(t,null,"\t")),this._notificationService.error(st(0,"Rename failed to compute edits")),this._logService.error(t)})).finally((()=>{h.dispose()}));return e("returning rename operation"),this._progressService.showWhile(d,250),d}acceptRenameInput(t){this._renameWidget.acceptInput(t)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(t,i,e){const s=typeof e=="boolean"?{kind:"cancelled",languageId:i,nRenameSuggestionProviders:t}:{kind:"accepted",languageId:i,nRenameSuggestionProviders:t,source:e.stats.source.k,nRenameSuggestions:e.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:e.stats.timeBeforeFirstInputFieldEdit,wantsPreview:e.wantsPreview};this._telemetryService.publicLog2("renameInvokedEvent",s)}};wot.ID="editor.contrib.renameController",wot=fot=got([Aot(1,Oa),Aot(2,wL),Aot(3,UQ),Aot(4,xO),Aot(5,au),Aot(6,HA),Aot(7,jA),Aot(8,cu)],wot);Bu(wot.ID,wot,4),Cu(class extends vu{constructor(){super({id:"editor.action.rename",label:st(0,"Rename Symbol"),alias:"Rename Symbol",precondition:gl.and(QC.writable,QC.hasRenameProvider),kbOpts:{kbExpr:QC.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(t,i){const e=t.get(Ua),[s,n]=Array.isArray(i)&&i||[void 0,void 0];return fs.isUri(s)&&Cs.isIPosition(n)?e.openCodeEditor({resource:s},e.getActiveCodeEditor()).then((t=>{t&&(t.setPosition(n),t.invokeWithinContext((i=>(this.reportTelemetry(i,t),this.run(i,t)))))}),Oi):super.runCommand(t,i)}run(t,i){const e=t.get(au),s=wot.get(i);return s?(e.trace("[RenameAction] got controller, running..."),s.run()):(e.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}});const mot=mu.bindToContribution(wot.get);xu(new mot({id:"acceptRenameInput",precondition:cot,handler:t=>t.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:gl.and(QC.focus,gl.not("isComposing")),primary:3}})),xu(new mot({id:"acceptRenameInputWithPreview",precondition:gl.and(cot,gl.has("config.editor.rename.enablePreview")),handler:t=>t.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:gl.and(QC.focus,gl.not("isComposing")),primary:2051}})),xu(new mot({id:"cancelRenameInput",precondition:cot,handler:t=>t.cancelRenameInput(),kbOpts:{weight:199,kbExpr:QC.focus,primary:9,secondary:[1033]}})),hu(class extends ru{constructor(){super({id:"focusNextRenameSuggestion",title:{...nt(0,"Focus Next Rename Suggestion")},precondition:cot,keybinding:[{primary:2,secondary:[18],weight:199}]})}run(t){const i=t.get(Ua).getFocusedCodeEditor();if(!i)return;const e=wot.get(i);e&&e.focusNextRenameSuggestion()}}),hu(class extends ru{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...nt(0,"Focus Previous Rename Suggestion")},precondition:cot,keybinding:[{primary:1026,secondary:[16],weight:199}]})}run(t){const i=t.get(Ua).getFocusedCodeEditor();if(!i)return;const e=wot.get(i);e&&e.focusPreviousRenameSuggestion()}}),ku("_executeDocumentRenameProvider",(function(t,i,e,...s){const[n]=s;Y(typeof n=="string");const{renameProvider:o}=t.get(jA);return async function(t,i,e,s){const n=new pot(i,e,t),o=await n.resolveRenameLocation(ye.None);return o!=null&&o.rejectReason?{edits:[],rejectReason:o.rejectReason}:n.provideRenameEdits(s,ye.None)}(o,i,e,n)})),ku("_executePrepareRename",(async function(t,i,e){const{renameProvider:s}=t.get(jA),n=new pot(i,e,s),o=await n.resolveRenameLocation(ye.None);if(o!=null&&o.rejectReason)throw new Error(o.rejectReason);return o})),Vl.as(_d).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:st(0,"Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var vot=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},bot=function(t,i){return function(e,s){i(e,s,t)}};let yot=class extends te{constructor(t,i,e){super(),this.editor=t,this.languageConfigurationService=i,this.editorWorkerService=e,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(t.getOption(73)),this.computePromise=null,this.currentOccurrences={},this._register(t.onDidChangeModel((i=>{this.currentOccurrences={},this.options=this.createOptions(t.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)}))),this._register(t.onDidChangeModelLanguage((i=>{this.currentOccurrences={},this.options=this.createOptions(t.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)}))),this._register(i.onDidChange((i=>{var e;const s=(e=this.editor.getModel())===null||e===void 0?void 0:e.getLanguageId();s&&i.affects(s)&&(this.currentOccurrences={},this.options=this.createOptions(t.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0))}))),this._register(t.onDidChangeConfiguration((i=>{this.options&&!i.hasChanged(73)||(this.options=this.createOptions(t.getOption(73)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))}))),this._register(this.editor.onDidChangeModelContent((t=>{this.computeSectionHeaders.schedule()}))),this.computeSectionHeaders=this._register(new Er((()=>{this.findSectionHeaders()}),250)),this.computeSectionHeaders.schedule(0)}createOptions(t){if(!t||!this.editor.hasModel())return;const i=this.editor.getModel().getLanguageId();if(!i)return;const e=this.languageConfigurationService.getLanguageConfiguration(i).comments,s=this.languageConfigurationService.getLanguageConfiguration(i).foldingRules;return e||s!=null&&s.markers?{foldingRules:s,findMarkSectionHeaders:t.showMarkSectionHeaders,findRegionSectionHeaders:t.showRegionSectionHeaders}:void 0}findSectionHeaders(){var t,i;if(!this.editor.hasModel()||!(!((t=this.options)===null||t===void 0)&&t.findMarkSectionHeaders)&&!(!((i=this.options)===null||i===void 0)&&i.findRegionSectionHeaders))return;const e=this.editor.getModel();if(e.isDisposed()||e.isTooLargeForSyncing())return;const s=e.getVersionId();this.editorWorkerService.findSectionHeaders(e.uri,this.options).then((t=>{e.isDisposed()||e.getVersionId()!==s||this.updateDecorations(t)}))}updateDecorations(t){const i=this.editor.getModel();i&&(t=t.filter((t=>{if(!t.shouldBeInComments)return!0;const e=i.validateRange(t.range),s=i.tokenization.getLineTokens(e.startLineNumber),n=s.findTokenIndexAtOffset(e.startColumn-1),o=s.getStandardTokenType(n);return s.getLanguageId(n)===i.getLanguageId()&&o===1})));const e=Object.values(this.currentOccurrences).map((t=>t.decorationId)),s=t.map((t=>function(t){return{range:t.range,options:DF.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:t.hasSeparatorLine?2:1,sectionHeaderText:t.text}})}}(t)));this.editor.changeDecorations((i=>{const n=i.deltaDecorations(e,s);this.currentOccurrences={};for(let i=0,e=n.length;i<e;i++){const e={sectionHeader:t[i],decorationId:n[i]};this.currentOccurrences[e.decorationId]=e}}))}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}};function kot(t){const i=new Uint32Array(function(t){let i=0;if(i+=2,t.type==="full")i+=1+t.data.length;else{i+=1,i+=3*t.deltas.length;for(const e of t.deltas)e.data&&(i+=e.data.length)}return i}(t));let e=0;if(i[e++]=t.id,t.type==="full")i[e++]=1,i[e++]=t.data.length,i.set(t.data,e),e+=t.data.length;else{i[e++]=2,i[e++]=t.deltas.length;for(const s of t.deltas)i[e++]=s.start,i[e++]=s.deleteCount,s.data?(i[e++]=s.data.length,i.set(s.data,e),e+=s.data.length):i[e++]=0}return function(t){const i=new Uint8Array(t.buffer,t.byteOffset,4*t.length);return Qt()||function(t){for(let i=0,e=t.length;i<e;i+=4){const e=t[i+0],s=t[i+1],n=t[i+2],o=t[i+3];t[i+0]=o,t[i+1]=n,t[i+2]=s,t[i+3]=e}}(i),hd.wrap(i)}(i)}function xot(t){return t&&!!t.data}function Cot(t){return t&&Array.isArray(t.edits)}yot.ID="editor.sectionHeaderDetector",yot=vot([bot(1,uf),bot(2,tP)],yot),Bu(yot.ID,yot,1);class Eot{constructor(t,i,e){this.provider=t,this.tokens=i,this.error=e}}function Bot(t,i){return t.has(i)}async function Dot(t,i,e,s,n){const o=function(t,i){const e=t.orderedGroups(i);return e.length>0?e[0]:[]}(t,i),r=await Promise.all(o.map((async t=>{let o,r=null;try{o=await t.provideDocumentSemanticTokens(i,t===e?s:null,n)}catch(t){r=t,o=null}return o&&(xot(o)||Cot(o))||(o=null),new Eot(t,o,r)})));for(const t of r){if(t.error)throw t.error;if(t.tokens)return t}return r.length>0?r[0]:null}class Mot{constructor(t,i){this.provider=t,this.tokens=i}}function Sot(t,i){const e=t.orderedGroups(i);return e.length>0?e[0]:[]}async function Fot(t,i,e,s){const n=Sot(t,i),o=await Promise.all(n.map((async t=>{let n;try{n=await t.provideDocumentRangeSemanticTokens(i,e,s)}catch(t){zi(t),n=null}return n&&xot(n)||(n=null),new Mot(t,n)})));for(const t of o)if(t.tokens)return t;return o.length>0?o[0]:null}Xa.registerCommand("_provideDocumentSemanticTokensLegend",(async(t,...i)=>{const[e]=i;Y(e instanceof fs);const s=t.get(Ha).getModel(e);if(!s)return;const{documentSemanticTokensProvider:n}=t.get(jA),o=function(t,i){const e=t.orderedGroups(i);return e.length>0?e[0]:null}(n,s);return o?o[0].getLegend():t.get($a).executeCommand("_provideDocumentRangeSemanticTokensLegend",e)})),Xa.registerCommand("_provideDocumentSemanticTokens",(async(t,...i)=>{const[e]=i;Y(e instanceof fs);const s=t.get(Ha).getModel(e);if(!s)return;const{documentSemanticTokensProvider:n}=t.get(jA);if(!Bot(n,s))return t.get($a).executeCommand("_provideDocumentRangeSemanticTokens",e,s.getFullModelRange());const o=await Dot(n,s,null,null,ye.None);if(!o)return;const{provider:r,tokens:h}=o;if(!h||!xot(h))return;const c=kot({id:0,type:"full",data:h.data});return h.resultId&&r.releaseDocumentSemanticTokens(h.resultId),c})),Xa.registerCommand("_provideDocumentRangeSemanticTokensLegend",(async(t,...i)=>{const[e,s]=i;Y(e instanceof fs);const n=t.get(Ha).getModel(e);if(!n)return;const{documentRangeSemanticTokensProvider:o}=t.get(jA),r=Sot(o,n);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!s||!Es.isIRange(s))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const h=await Fot(o,n,Es.lift(s),ye.None);return h?h.provider.getLegend():void 0})),Xa.registerCommand("_provideDocumentRangeSemanticTokens",(async(t,...i)=>{const[e,s]=i;Y(e instanceof fs),Y(Es.isIRange(s));const n=t.get(Ha).getModel(e);if(!n)return;const{documentRangeSemanticTokensProvider:o}=t.get(jA),r=await Fot(o,n,Es.lift(s),ye.None);return r&&r.tokens?kot({id:0,type:"full",data:r.tokens.data}):void 0}));const Iot="editor.semanticHighlighting";function Lot(t,i,e){var s;const n=(s=e.getValue(Iot,{overrideIdentifier:t.getLanguageId(),resource:t.uri}))===null||s===void 0?void 0:s.enabled;return typeof n=="boolean"?n:i.getColorTheme().semanticHighlighting}var Rot,Tot=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Not=function(t,i){return function(e,s){i(e,s,t)}};let Qot=class extends te{constructor(t,i,e,s,n,o){super(),this._watchers=Object.create(null);const r=i=>{this._watchers[i.uri.toString()]=new Oot(i,t,e,n,o)},h=(t,i)=>{i.dispose(),delete this._watchers[t.uri.toString()]},c=()=>{for(const t of i.getModels()){const i=this._watchers[t.uri.toString()];Lot(t,e,s)?i||r(t):i&&h(t,i)}};i.getModels().forEach((t=>{Lot(t,e,s)&&r(t)})),this._register(i.onModelAdded((t=>{Lot(t,e,s)&&r(t)}))),this._register(i.onModelRemoved((t=>{const i=this._watchers[t.uri.toString()];i&&h(t,i)}))),this._register(s.onDidChangeConfiguration((t=>{t.affectsConfiguration(Iot)&&c()}))),this._register(e.onDidColorThemeChange(c))}dispose(){for(const t of Object.values(this._watchers))t.dispose();super.dispose()}};Qot=Tot([Not(0,BR),Not(1,Ha),Not(2,Fk),Not(3,Id),Not(4,dR),Not(5,jA)],Qot);let Oot=Rot=class extends te{constructor(t,i,e,s,n){super(),this._semanticTokensStylingService=i,this._isDisposed=!1,this._model=t,this._provider=n.documentSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentSemanticTokens",{min:Rot.REQUEST_MIN_DELAY,max:Rot.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new Er((()=>this._fetchDocumentSemanticTokensNow()),Rot.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent((()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))}))),this._register(this._model.onDidChangeAttached((()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))}))),this._register(this._model.onDidChangeLanguage((()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)})));const o=()=>{$i(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const i of this._provider.all(t))typeof i.onDidChange=="function"&&this._documentProvidersChangeListeners.push(i.onDidChange((()=>{this._currentDocumentRequestCancellationTokenSource?this._providersChangedDuringRequest=!0:this._fetchDocumentSemanticTokens.schedule(0)})))};o(),this._register(this._provider.onDidChange((()=>{o(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))}))),this._register(e.onDidColorThemeChange((t=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))}))),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),$i(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!Bot(this._provider,this._model))return void(this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1));if(!this._model.isAttachedToEditor())return;const t=new xe,i=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,e=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,s=Dot(this._provider,this._model,i,e,t.token);this._currentDocumentRequestCancellationTokenSource=t,this._providersChangedDuringRequest=!1;const n=[],o=this._model.onDidChangeContent((t=>{n.push(t)})),r=new re(!1);s.then((t=>{if(this._debounceInformation.update(this._model,r.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),t){const{provider:i,tokens:e}=t,s=this._semanticTokensStylingService.getStyling(i);this._setDocumentSemanticTokens(i,e||null,s,n)}else this._setDocumentSemanticTokens(null,null,null,n)}),(t=>{t&&(Pi(t)||typeof t.message=="string"&&t.message.indexOf("busy")!==-1)||Oi(t),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),(n.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))}))}static _copy(t,i,e,s,n){n=Math.min(n,e.length-s,t.length-i);for(let o=0;o<n;o++)e[s+o]=t[i+o]}_setDocumentSemanticTokens(t,i,e,s){const n=this._currentDocumentResponse,o=()=>{(s.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed)t&&i&&t.releaseDocumentSemanticTokens(i.resultId);else if(t&&e){if(!i)return this._model.tokenization.setSemanticTokens(null,!0),void o();if(Cot(i)){if(!n)return void this._model.tokenization.setSemanticTokens(null,!0);if(i.edits.length===0)i={resultId:i.resultId,data:n.data};else{let t=0;for(const e of i.edits)t+=(e.data?e.data.length:0)-e.deleteCount;const s=n.data,o=new Uint32Array(s.length+t);let r=s.length,h=o.length;for(let t=i.edits.length-1;t>=0;t--){const c=i.edits[t];if(c.start>s.length)return e.warnInvalidEditStart(n.resultId,i.resultId,t,c.start,s.length),void this._model.tokenization.setSemanticTokens(null,!0);const a=r-(c.start+c.deleteCount);a>0&&(Rot._copy(s,r-a,o,h-a,a),h-=a),c.data&&(Rot._copy(c.data,0,o,h-c.data.length,c.data.length),h-=c.data.length),r=c.start}r>0&&Rot._copy(s,0,o,0,r),i={resultId:i.resultId,data:o}}}if(xot(i)){this._currentDocumentResponse=new zot(t,i.resultId,i.data);const n=xR(i,e,this._model.getLanguageId());if(s.length>0)for(const t of s)for(const i of n)for(const e of t.changes)i.applyEdit(e.range,e.text);this._model.tokenization.setSemanticTokens(n,!0)}else this._model.tokenization.setSemanticTokens(null,!0);o()}else this._model.tokenization.setSemanticTokens(null,!1)}};Oot.REQUEST_MIN_DELAY=300,Oot.REQUEST_MAX_DELAY=2e3,Oot=Rot=Tot([Not(1,BR),Not(2,Fk),Not(3,dR),Not(4,jA)],Oot);class zot{constructor(t,i,e){this.provider=t,this.resultId=i,this.data=e}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}hJ(Qot);var Uot=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Hot=function(t,i){return function(e,s){i(e,s,t)}};let Pot=class extends te{constructor(t,i,e,s,n,o){super(),this._semanticTokensStylingService=i,this._themeService=e,this._configurationService=s,this._editor=t,this._provider=o.documentRangeSemanticTokensProvider,this._debounceInformation=n.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new Er((()=>this._tokenizeViewportNow()),100)),this._outstandingRequests=[];const r=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange((()=>{r()}))),this._register(this._editor.onDidChangeModel((()=>{this._cancelAll(),r()}))),this._register(this._editor.onDidChangeModelContent((t=>{this._cancelAll(),r()}))),this._register(this._provider.onDidChange((()=>{this._cancelAll(),r()}))),this._register(this._configurationService.onDidChangeConfiguration((t=>{t.affectsConfiguration(Iot)&&(this._cancelAll(),r())}))),this._register(this._themeService.onDidColorThemeChange((()=>{this._cancelAll(),r()}))),r()}_cancelAll(){for(const t of this._outstandingRequests)t.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(t){for(let i=0,e=this._outstandingRequests.length;i<e;i++)if(this._outstandingRequests[i]===t)return void this._outstandingRequests.splice(i,1)}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const t=this._editor.getModel();if(t.tokenization.hasCompleteSemanticTokens())return;if(!Lot(t,this._themeService,this._configurationService)||!function(t,i){return t.has(i)}(this._provider,t))return void(t.tokenization.hasSomeSemanticTokens()&&t.tokenization.setSemanticTokens(null,!1));const i=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(i.map((i=>this._requestRange(t,i))))}_requestRange(t,i){const e=t.getVersionId(),s=Ar((e=>Promise.resolve(Fot(this._provider,t,i,e)))),n=new re(!1);return s.then((s=>{if(this._debounceInformation.update(t,n.elapsed()),!s||!s.tokens||t.isDisposed()||t.getVersionId()!==e)return;const{provider:o,tokens:r}=s,h=this._semanticTokensStylingService.getStyling(o);t.tokenization.setPartialSemanticTokens(i,xR(r,h,t.getLanguageId()))})).then((()=>this._removeOutstandingRequest(s)),(()=>this._removeOutstandingRequest(s))),s}};Pot.ID="editor.contrib.viewportSemanticTokens",Pot=Uot([Hot(1,BR),Hot(2,Fk),Hot(3,Id),Hot(4,dR),Hot(5,jA)],Pot),Bu(Pot.ID,Pot,1);class jot{constructor(t=!0){this.selectSubwords=t}provideSelectionRanges(t,i){const e=[];for(const s of i){const i=[];e.push(i),this.selectSubwords&&this._addInWordRanges(i,t,s),this._addWordRanges(i,t,s),this._addWhitespaceLine(i,t,s),i.push({range:t.getFullModelRange()})}return e}_addInWordRanges(t,i,e){const s=i.getWordAtPosition(e);if(!s)return;const{word:n,startColumn:o}=s,r=e.column-o;let h=r,c=r,a=0;for(;h>=0;h--){const t=n.charCodeAt(h);if(h!==r&&(t===95||t===45)||uo(t)&&fo(a))break;a=t}for(h+=1;c<n.length;c++){const t=n.charCodeAt(c);if(fo(t)&&uo(a)||t===95||t===45)break;a=t}h<c&&t.push({range:new Es(e.lineNumber,o+h,e.lineNumber,o+c)})}_addWordRanges(t,i,e){const s=i.getWordAtPosition(e);s&&t.push({range:new Es(e.lineNumber,s.startColumn,e.lineNumber,s.endColumn)})}_addWhitespaceLine(t,i,e){i.getLineLength(e.lineNumber)>0&&i.getLineFirstNonWhitespaceColumn(e.lineNumber)===0&&i.getLineLastNonWhitespaceColumn(e.lineNumber)===0&&t.push({range:new Es(e.lineNumber,1,e.lineNumber,i.getLineMaxColumn(e.lineNumber))})}}var Wot,Yot=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},_ot=function(t,i){return function(e,s){i(e,s,t)}};class Vot{constructor(t,i){this.index=t,this.ranges=i}mov(t){const i=this.index+(t?1:-1);if(i<0||i>=this.ranges.length)return this;const e=new Vot(i,this.ranges);return e.ranges[i].equalsRange(this.ranges[this.index])?e.mov(t):e}}let Jot=Wot=class{static get(t){return t.getContribution(Wot.ID)}constructor(t,i){this._editor=t,this._languageFeaturesService=i,this._ignoreSelection=!1}dispose(){var t;(t=this._selectionListener)===null||t===void 0||t.dispose()}async run(t){if(!this._editor.hasModel())return;const i=this._editor.getSelections(),e=this._editor.getModel();if(this._state||await Kot(this._languageFeaturesService.selectionRangeProvider,e,i.map((t=>t.getPosition())),this._editor.getOption(113),ye.None).then((t=>{var e;if(p(t)&&t.length===i.length&&this._editor.hasModel()&&h(this._editor.getSelections(),i,((t,i)=>t.equalsSelection(i)))){for(let e=0;e<t.length;e++)t[e]=t[e].filter((t=>t.containsPosition(i[e].getStartPosition())&&t.containsPosition(i[e].getEndPosition()))),t[e].unshift(i[e]);this._state=t.map((t=>new Vot(0,t))),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition((()=>{var t;this._ignoreSelection||((t=this._selectionListener)===null||t===void 0||t.dispose(),this._state=void 0)}))}})),!this._state)return;this._state=this._state.map((i=>i.mov(t)));const s=this._state.map((t=>Bs.fromPositions(t.ranges[t.index].getStartPosition(),t.ranges[t.index].getEndPosition())));this._ignoreSelection=!0;try{this._editor.setSelections(s)}finally{this._ignoreSelection=!1}}};Jot.ID="editor.contrib.smartSelectController",Jot=Wot=Yot([_ot(1,jA)],Jot);class Got extends vu{constructor(t,i){super(i),this._forward=t}async run(t,i){const e=Jot.get(i);e&&await e.run(this._forward)}}Xa.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");async function Kot(t,i,e,s,n){const o=t.all(i).concat(new jot(s.selectSubwords));o.length===1&&o.unshift(new kit);const r=[],h=[];for(const t of o)r.push(Promise.resolve(t.provideSelectionRanges(i,e,n)).then((t=>{if(p(t)&&t.length===e.length)for(let i=0;i<e.length;i++){h[i]||(h[i]=[]);for(const s of t[i])Es.isIRange(s.range)&&Es.containsPosition(s.range,e[i])&&h[i].push(Es.lift(s.range))}}),zi));return await Promise.all(r),h.map((t=>{if(t.length===0)return[];t.sort(((t,i)=>Cs.isBefore(t.getStartPosition(),i.getStartPosition())?1:Cs.isBefore(i.getStartPosition(),t.getStartPosition())||Cs.isBefore(t.getEndPosition(),i.getEndPosition())?-1:Cs.isBefore(i.getEndPosition(),t.getEndPosition())?1:0));const e=[];let n;for(const i of t)(!n||Es.containsRange(i,n)&&!Es.equalsRange(i,n))&&(e.push(i),n=i);if(!s.selectLeadingAndTrailingWhitespace)return e;const o=[e[0]];for(let t=1;t<e.length;t++){const s=e[t-1],n=e[t];if(n.startLineNumber!==s.startLineNumber||n.endLineNumber!==s.endLineNumber){const t=new Es(s.startLineNumber,i.getLineFirstNonWhitespaceColumn(s.startLineNumber),s.endLineNumber,i.getLineLastNonWhitespaceColumn(s.endLineNumber));t.containsRange(s)&&!t.equalsRange(s)&&n.containsRange(t)&&!n.equalsRange(t)&&o.push(t);const e=new Es(s.startLineNumber,1,s.endLineNumber,i.getLineMaxColumn(s.endLineNumber));e.containsRange(s)&&!e.equalsRange(t)&&n.containsRange(e)&&!n.equalsRange(e)&&o.push(e)}o.push(n)}return o}))}Bu(Jot.ID,Jot,4),Cu(class extends Got{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:st(0,"Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:QC.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:tu.MenubarSelectionMenu,group:"1_basic",title:st(0,"&&Expand Selection"),order:2}})}}),Cu(class extends Got{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:st(0,"Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:QC.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:tu.MenubarSelectionMenu,group:"1_basic",title:st(0,"&&Shrink Selection"),order:3}})}}),Xa.registerCommand("_executeSelectionRangeProvider",(async function(t,...i){const[e,s]=i;Y(fs.isUri(e));const n=t.get(jA).selectionRangeProvider,o=await t.get(Pa).createModelReference(e);try{return Kot(n,o.object.textEditorModel,s,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},ye.None)}finally{o.dispose()}}));const $ot=Object.freeze({View:nt(0,"View"),Help:nt(0,"Help"),Test:nt(0,"Test"),File:nt(0,"File"),Preferences:nt(0,"Preferences"),Developer:nt(0,"Developer")});class Xot{constructor(t,i,e,s=null){this.startLineNumbers=t,this.endLineNumbers=i,this.lastLineRelativePosition=e,this.showEndForLine=s}equals(t){return!!t&&this.lastLineRelativePosition===t.lastLineRelativePosition&&this.showEndForLine===t.showEndForLine&&h(this.startLineNumbers,t.startLineNumbers)&&h(this.endLineNumbers,t.endLineNumbers)}}const qot=Yu("stickyScrollViewLayer",{createHTML:t=>t}),Zot="data-sticky-line-index",trt="data-sticky-is-line",irt="data-sticky-is-folding-icon";class ert extends te{constructor(t){super(),this._editor=t,this._foldingIconStore=new Zi,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(67),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",t instanceof w4),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);const i=()=>{this._linesDomNode.style.left=this._editor.getOption(115).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration((t=>{t.hasChanged(115)&&i(),t.hasChanged(67)&&(this._lineHeight=this._editor.getOption(67))}))),this._register(this._editor.onDidScrollChange((t=>{t.scrollLeftChanged&&i(),t.scrollWidthChanged&&this._updateWidgetWidth()}))),this._register(this._editor.onDidChangeModel((()=>{i(),this._updateWidgetWidth()}))),this._register(this._foldingIconStore),i(),this._register(this._editor.onDidLayoutChange((t=>{this._updateWidgetWidth()}))),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(t){return this._renderedStickyLines.find((i=>i.lineNumber===t))}getCurrentLines(){return this._lineNumbers}setState(t,i,e){if(e===void 0&&(!this._previousState&&!t||this._previousState&&this._previousState.equals(t)))return;const s=this._isWidgetHeightZero(t),n=s?void 0:t,o=s?0:this._findLineToRebuildWidgetFrom(t,e);this._renderRootNode(n,i,o),this._previousState=t}_isWidgetHeightZero(t){if(!t)return!0;const i=t.startLineNumbers.length*this._lineHeight+t.lastLineRelativePosition;if(i>0){this._lastLineRelativePosition=t.lastLineRelativePosition;const i=[...t.startLineNumbers];t.showEndForLine!==null&&(i[t.showEndForLine]=t.endLineNumbers[t.showEndForLine]),this._lineNumbers=i}else this._lastLineRelativePosition=0,this._lineNumbers=[];return i===0}_findLineToRebuildWidgetFrom(t,i){if(!t||!this._previousState)return 0;if(i!==void 0)return i;const e=this._previousState,s=t.startLineNumbers.findIndex((t=>!e.startLineNumbers.includes(t)));return s===-1?0:s}_updateWidgetWidth(){const t=this._editor.getLayoutInfo(),i=t.contentLeft;this._lineNumbersDomNode.style.width=`${i}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",this._editor.getScrollWidth()-t.verticalScrollbarWidth+"px"),this._rootDomNode.style.width=t.width-t.verticalScrollbarWidth+"px"}_clearStickyLinesFromLine(t){this._foldingIconStore.clear();for(let i=t;i<this._renderedStickyLines.length;i++){const t=this._renderedStickyLines[i];t.lineNumberDomNode.remove(),t.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,t),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(t){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${t?.5:0}s`)}_setFoldingIconsVisibility(t){for(const i of this._renderedStickyLines){const e=i.foldingIcon;e&&e.setVisible(!!t||e.isCollapsed)}}async _renderRootNode(t,i,e){if(this._clearStickyLinesFromLine(e),!t)return;for(const t of this._renderedStickyLines)this._updateTopAndZIndexOfStickyLine(t);const s=this._editor.getLayoutInfo(),n=this._lineNumbers.slice(e);for(const[t,o]of n.entries()){const n=this._renderChildNode(t+e,o,i,s);n&&(this._linesDomNode.appendChild(n.lineDomNode),this._lineNumbersDomNode.appendChild(n.lineNumberDomNode),this._renderedStickyLines.push(n))}i&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));const o=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${o}px`,this._linesDomNodeScrollable.style.height=`${o}px`,this._rootDomNode.style.height=`${o}px`,this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map((t=>t.scrollWidth)))+s.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this)}_setFoldingHoverListeners(){this._editor.getOption(110)==="mouseover"&&(this._foldingIconStore.add(rc(this._lineNumbersDomNode,$c.MOUSE_ENTER,(()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)}))),this._foldingIconStore.add(rc(this._lineNumbersDomNode,$c.MOUSE_LEAVE,(()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)}))))}_renderChildNode(t,i,e,s){const n=this._editor._getViewModel();if(!n)return;const o=n.coordinatesConverter.convertModelPositionToViewPosition(new Cs(i,1)).lineNumber,r=n.getViewLineRenderingData(o),h=this._editor.getOption(68);let c;try{c=cp.filter(r.inlineDecorations,o,r.minColumn,r.maxColumn)}catch{c=[]}const a=new gp(!0,!0,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,0,r.tokens,c,r.tabSize,r.startVisibleColumn,1,1,1,500,"none",!0,!0,null),l=new wd(2e3),u=mp(a,l);let d;d=qot?qot.createHTML(l.build()):l.build();const f=document.createElement("span");f.setAttribute(Zot,String(t)),f.setAttribute(trt,""),f.setAttribute("role","listitem"),f.tabIndex=0,f.className="sticky-line-content",f.classList.add(`stickyLine${i}`),f.style.lineHeight=`${this._lineHeight}px`,f.innerHTML=d;const g=document.createElement("span");g.setAttribute(Zot,String(t)),g.setAttribute("data-sticky-is-line-number",""),g.className="sticky-line-number",g.style.lineHeight=`${this._lineHeight}px`;const A=s.contentLeft;g.style.width=`${A}px`;const p=document.createElement("span");h.renderType===1||h.renderType===3&&i%10==0?p.innerText=i.toString():h.renderType===2&&(p.innerText=Math.abs(i-this._editor.getPosition().lineNumber).toString()),p.className="sticky-line-number-inner",p.style.lineHeight=`${this._lineHeight}px`,p.style.width=`${s.lineNumbersWidth}px`,p.style.paddingLeft=`${s.lineNumbersLeft}px`,g.appendChild(p);const w=this._renderFoldingIconForLine(e,i);w&&g.appendChild(w.domNode),this._editor.applyFontInfo(f),this._editor.applyFontInfo(p),g.style.lineHeight=`${this._lineHeight}px`,f.style.lineHeight=`${this._lineHeight}px`,g.style.height=`${this._lineHeight}px`,f.style.height=`${this._lineHeight}px`;const m=new srt(t,i,f,g,w,u.characterMapping,f.scrollWidth);return this._updateTopAndZIndexOfStickyLine(m)}_updateTopAndZIndexOfStickyLine(t){var i;const e=t.index,s=t.lineDomNode,n=t.lineNumberDomNode,o=e===this._lineNumbers.length-1;s.style.zIndex=o?"0":"1",n.style.zIndex=o?"0":"1";const r=`${e*this._lineHeight+this._lastLineRelativePosition+(!((i=t.foldingIcon)===null||i===void 0)&&i.isCollapsed?1:0)}px`,h=e*this._lineHeight+"px";return s.style.top=o?r:h,n.style.top=o?r:h,t}_renderFoldingIconForLine(t,i){const e=this._editor.getOption(110);if(!t||e==="never")return;const s=t.regions,n=s.findRange(i),o=s.getStartLineNumber(n);if(i!==o)return;const r=s.isCollapsed(n),h=new nrt(r,o,s.getEndLineNumber(n),this._lineHeight);return h.setVisible(!!this._isOnGlyphMargin||r||e==="always"),h.domNode.setAttribute(irt,""),h}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:null}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(t){0<=t&&t<this._renderedStickyLines.length&&this._renderedStickyLines[t].lineDomNode.focus()}getEditorPositionFromNode(t){if(!t||t.children.length>0)return null;const i=this._getRenderedStickyLineFromChildDomNode(t);if(!i)return null;const e=Cy(i.characterMapping,t,0);return new Cs(i.lineNumber,e)}getLineNumberFromChildDomNode(t){var i,e;return(e=(i=this._getRenderedStickyLineFromChildDomNode(t))===null||i===void 0?void 0:i.lineNumber)!==null&&e!==void 0?e:null}_getRenderedStickyLineFromChildDomNode(t){const i=this.getLineIndexFromChildDomNode(t);return i===null||i<0||i>=this._renderedStickyLines.length?null:this._renderedStickyLines[i]}getLineIndexFromChildDomNode(t){const i=this._getAttributeValue(t,Zot);return i?parseInt(i,10):null}isInStickyLine(t){return this._getAttributeValue(t,trt)!==void 0}isInFoldingIconDomNode(t){return this._getAttributeValue(t,irt)!==void 0}_getAttributeValue(t,i){for(;t&&t!==this._rootDomNode;){const e=t.getAttribute(i);if(e!==null)return e;t=t.parentElement}}}class srt{constructor(t,i,e,s,n,o,r){this.index=t,this.lineNumber=i,this.lineDomNode=e,this.lineNumberDomNode=s,this.foldingIcon=n,this.characterMapping=o,this.scrollWidth=r}}class nrt{constructor(t,i,e,s){this.isCollapsed=t,this.foldingStartLine=i,this.foldingEndLine=e,this.dimension=s,this.domNode=document.createElement("div"),this.domNode.style.width=`${s}px`,this.domNode.style.height=`${s}px`,this.domNode.className=Ka.asClassName(t?c7:h7)}setVisible(t){this.domNode.style.cursor=t?"pointer":"default",this.domNode.style.opacity=t?"1":"0"}}class ort{constructor(t,i){this.startLineNumber=t,this.endLineNumber=i}}class rrt{constructor(t,i,e){this.range=t,this.children=i,this.parent=e}}class hrt{constructor(t,i,e,s){this.uri=t,this.version=i,this.element=e,this.outlineProviderId=s}}var crt,art,lrt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},urt=function(t,i){return function(e,s){i(e,s,t)}};(function(t){t.OUTLINE_MODEL="outlineModel",t.FOLDING_PROVIDER_MODEL="foldingProviderModel",t.INDENTATION_MODEL="indentationModel"})(crt||(crt={})),function(t){t[t.VALID=0]="VALID",t[t.INVALID=1]="INVALID",t[t.CANCELED=2]="CANCELED"}(art||(art={}));let drt=class extends te{constructor(t,i,e,s){switch(super(),this._editor=t,this._languageConfigurationService=e,this._languageFeaturesService=s,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new mr(300)),this._updateOperation=this._register(new Zi),this._editor.getOption(115).defaultModel){case crt.OUTLINE_MODEL:this._modelProviders.push(new grt(this._editor,s));case crt.FOLDING_PROVIDER_MODEL:this._modelProviders.push(new wrt(this._editor,i,s));case crt.INDENTATION_MODEL:this._modelProviders.push(new prt(this._editor,e))}}dispose(){this._modelProviders.forEach((t=>t.dispose())),this._updateOperation.clear(),this._cancelModelPromise(),super.dispose()}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}async update(t){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger((async()=>{for(const i of this._modelProviders){const{statusPromise:e,modelPromise:s}=i.computeStickyModel(t);this._modelPromise=s;const n=await e;if(this._modelPromise!==s)return null;switch(n){case art.CANCELED:return this._updateOperation.clear(),null;case art.VALID:return i.stickyModel}}return null})).catch((t=>(Oi(t),null)))}};drt=lrt([urt(2,Oa),urt(3,jA)],drt);class frt extends te{constructor(t){super(),this._editor=t,this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,art.INVALID}computeStickyModel(t){if(t.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};const i=Ar((t=>this.createModelFromProvider(t)));return{statusPromise:i.then((i=>this.isModelValid(i)?t.isCancellationRequested?art.CANCELED:(this._stickyModel=this.createStickyModel(t,i),art.VALID):this._invalid())).then(void 0,(t=>(Oi(t),art.CANCELED))),modelPromise:i}}isModelValid(t){return!0}isProviderValid(){return!0}}let grt=class extends frt{constructor(t,i){super(t),this._languageFeaturesService=i}createModelFromProvider(t){return O7.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),t)}createStickyModel(t,i){var e;const{stickyOutlineElement:s,providerID:n}=this._stickyModelFromOutlineModel(i,(e=this._stickyModel)===null||e===void 0?void 0:e.outlineProviderId),o=this._editor.getModel();return new hrt(o.uri,o.getVersionId(),s,n)}isModelValid(t){return t&&t.children.size>0}_stickyModelFromOutlineModel(t,i){let e;if(Wt.first(t.children.values())instanceof Q7){const s=Wt.find(t.children.values(),(t=>t.id===i));if(s)e=s.children;else{let s,n="",o=-1;for(const[i,e]of t.children.entries()){const t=this._findSumOfRangesOfGroup(e);t>o&&(s=e,o=t,n=e.id)}i=n,e=s.children}}else e=t.children;const s=[],n=Array.from(e.values()).sort(((t,i)=>{const e=new ort(t.symbol.range.startLineNumber,t.symbol.range.endLineNumber),s=new ort(i.symbol.range.startLineNumber,i.symbol.range.endLineNumber);return this._comparator(e,s)}));for(const t of n)s.push(this._stickyModelFromOutlineElement(t,t.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new rrt(void 0,s,void 0),providerID:i}}_stickyModelFromOutlineElement(t,i){const e=[];for(const s of t.children.values())if(s.symbol.selectionRange.startLineNumber!==s.symbol.range.endLineNumber)if(s.symbol.selectionRange.startLineNumber!==i)e.push(this._stickyModelFromOutlineElement(s,s.symbol.selectionRange.startLineNumber));else for(const t of s.children.values())e.push(this._stickyModelFromOutlineElement(t,s.symbol.selectionRange.startLineNumber));e.sort(((t,i)=>this._comparator(t.range,i.range)));const s=new ort(t.symbol.selectionRange.startLineNumber,t.symbol.range.endLineNumber);return new rrt(s,e,void 0)}_comparator(t,i){return t.startLineNumber!==i.startLineNumber?t.startLineNumber-i.startLineNumber:i.endLineNumber-t.endLineNumber}_findSumOfRangesOfGroup(t){let i=0;for(const e of t.children.values())i+=this._findSumOfRangesOfGroup(e);return t instanceof N7?i+t.symbol.range.endLineNumber-t.symbol.selectionRange.startLineNumber:i}};grt=lrt([urt(1,jA)],grt);class Art extends frt{constructor(t){super(t),this._foldingLimitReporter=new x7(t)}createStickyModel(t,i){const e=this._fromFoldingRegions(i),s=this._editor.getModel();return new hrt(s.uri,s.getVersionId(),e,void 0)}isModelValid(t){return t!==null}_fromFoldingRegions(t){const i=t.length,e=[],s=new rrt(void 0,[],void 0);for(let n=0;n<i;n++){const i=t.getParentIndex(n);let o;o=i!==-1?e[i]:s;const r=new rrt(new ort(t.getStartLineNumber(n),t.getEndLineNumber(n)+1),[],o);o.children.push(r),e.push(r)}return s}}let prt=class extends Art{constructor(t,i){super(t),this._languageConfigurationService=i,this.provider=this._register(new s7(t.getModel(),this._languageConfigurationService,this._foldingLimitReporter))}async createModelFromProvider(t){return this.provider.compute(t)}};prt=lrt([urt(1,uf)],prt);let wrt=class extends Art{constructor(t,i,e){super(t),this._languageFeaturesService=e;const s=k7.getFoldingRangeProviders(this._languageFeaturesService,t.getModel());s.length>0&&(this.provider=this._register(new p7(t.getModel(),s,i,this._foldingLimitReporter,void 0)))}isProviderValid(){return this.provider!==void 0}async createModelFromProvider(t){var i,e;return(e=(i=this.provider)===null||i===void 0?void 0:i.compute(t))!==null&&e!==void 0?e:null}};wrt=lrt([urt(2,jA)],wrt);var mrt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},vrt=function(t,i){return function(e,s){i(e,s,t)}};class brt{constructor(t,i,e){this.startLineNumber=t,this.endLineNumber=i,this.nestingDepth=e}}let yrt=class extends te{constructor(t,i,e){super(),this._languageFeaturesService=i,this._languageConfigurationService=e,this._onDidChangeStickyScroll=this._register(new de),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=t,this._sessionStore=this._register(new Zi),this._updateSoon=this._register(new Er((()=>this.update()),50)),this._register(this._editor.onDidChangeConfiguration((t=>{t.hasChanged(115)&&this.readConfiguration()}))),this.readConfiguration()}readConfiguration(){this._sessionStore.clear(),this._editor.getOption(115).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel((()=>{this._model=null,this.updateStickyModelProvider(),this._onDidChangeStickyScroll.fire(),this.update()}))),this._sessionStore.add(this._editor.onDidChangeHiddenAreas((()=>this.update()))),this._sessionStore.add(this._editor.onDidChangeModelContent((()=>this._updateSoon.schedule()))),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((()=>this.update()))),this._sessionStore.add(qi((()=>{var t;(t=this._stickyModelProvider)===null||t===void 0||t.dispose(),this._stickyModelProvider=null}))),this.updateStickyModelProvider(),this.update())}getVersionId(){var t;return(t=this._model)===null||t===void 0?void 0:t.version}updateStickyModelProvider(){var t;(t=this._stickyModelProvider)===null||t===void 0||t.dispose(),this._stickyModelProvider=null;const i=this._editor;i.hasModel()&&(this._stickyModelProvider=new drt(i,(()=>this._updateSoon.schedule()),this._languageConfigurationService,this._languageFeaturesService))}async update(){var t;(t=this._cts)===null||t===void 0||t.dispose(!0),this._cts=new xe,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(t){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization())return void(this._model=null);const i=await this._stickyModelProvider.update(t);t.isCancellationRequested||(this._model=i)}updateIndex(t){return t===-1?t=0:t<0&&(t=-t-2),t}getCandidateStickyLinesIntersectingFromStickyModel(t,i,e,s,n){if(i.children.length===0)return;let o=n;const r=[];for(let t=0;t<i.children.length;t++){const e=i.children[t];e.range&&r.push(e.range.startLineNumber)}const h=this.updateIndex(c(r,t.startLineNumber,((t,i)=>t-i))),a=this.updateIndex(c(r,t.startLineNumber+s,((t,i)=>t-i)));for(let r=h;r<=a;r++){const h=i.children[r];if(!h)return;if(h.range){const i=h.range.startLineNumber,n=h.range.endLineNumber;t.startLineNumber<=n+1&&i-1<=t.endLineNumber&&i!==o&&(o=i,e.push(new brt(i,n-1,s+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(t,h,e,s+1,i))}else this.getCandidateStickyLinesIntersectingFromStickyModel(t,h,e,s,n)}}getCandidateStickyLinesIntersecting(t){var i,e;if(!(!((i=this._model)===null||i===void 0)&&i.element))return[];let s=[];this.getCandidateStickyLinesIntersectingFromStickyModel(t,this._model.element,s,0,-1);const n=(e=this._editor._getViewModel())===null||e===void 0?void 0:e.getHiddenAreas();if(n)for(const t of n)s=s.filter((i=>!(i.startLineNumber>=t.startLineNumber&&i.endLineNumber<=t.endLineNumber+1)));return s}};yrt=mrt([vrt(1,jA),vrt(2,uf)],yrt);var krt,xrt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Crt=function(t,i){return function(e,s){i(e,s,t)}};let Ert=krt=class extends te{constructor(t,i,e,s,n,o,r){super(),this._editor=t,this._contextMenuService=i,this._languageFeaturesService=e,this._instaService=s,this._contextKeyService=r,this._sessionStore=new Zi,this._foldingModel=null,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._showEndForLine=null,this._stickyScrollWidget=new ert(this._editor),this._stickyLineCandidateProvider=new yrt(this._editor,e,n),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=new Xot([],[],0),this._onDidResize(),this._readConfiguration();const h=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration((t=>{(t.hasChanged(115)||t.hasChanged(73)||t.hasChanged(67)||t.hasChanged(110))&&this._readConfiguration()}))),this._register(rc(h,$c.CONTEXT_MENU,(async t=>{this._onContextMenu(Gh(h),t)}))),this._stickyScrollFocusedContextKey=QC.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=QC.stickyScrollVisible.bindTo(this._contextKeyService);const c=this._register(ta(h));this._register(c.onDidBlur((t=>{this._positionRevealed===!1&&h.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()}))),this._register(c.onDidFocus((t=>{this.focus()}))),this._registerMouseListeners(),this._register(rc(h,$c.MOUSE_DOWN,(t=>{this._onMouseDown=!0})))}static get(t){return t.getContribution(krt.ID)}_disposeFocusStickyScrollStore(){var t;this._stickyScrollFocusedContextKey.set(!1),(t=this._focusDisposableStore)===null||t===void 0||t.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown)return this._onMouseDown=!1,void this._editor.focus();this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new Zi,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(t){this._focusedStickyElementIndex=t?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){const t=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:t[this._focusedStickyElementIndex],column:1})}_revealPosition(t){this._reveaInEditor(t,(()=>this._editor.revealPosition(t)))}_revealLineInCenterIfOutsideViewport(t){this._reveaInEditor(t,(()=>this._editor.revealLineInCenterIfOutsideViewport(t.lineNumber,0)))}_reveaInEditor(t,i){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,i(),this._editor.setSelection(Es.fromPositions(t)),this._editor.focus()}_registerMouseListeners(){const t=this._register(new Zi),i=this._register(new g4(this._editor,{extractLineNumberFromMouseEvent:t=>{const i=this._stickyScrollWidget.getEditorPositionFromNode(t.target.element);return i?i.lineNumber:0}})),e=t=>{if(!this._editor.hasModel()||t.target.type!==12||t.target.detail!==this._stickyScrollWidget.getId())return null;const i=t.target.element;if(!i||i.innerText!==i.innerHTML)return null;const e=this._stickyScrollWidget.getEditorPositionFromNode(i);return e?{range:new Es(e.lineNumber,e.column,e.lineNumber,e.column+i.innerText.length),textElement:i}:null},s=this._stickyScrollWidget.getDomNode();this._register(cc(s,$c.CLICK,(t=>{if(t.ctrlKey||t.altKey||t.metaKey||!t.leftButton)return;if(t.shiftKey){const i=this._stickyScrollWidget.getLineIndexFromChildDomNode(t.target);if(i===null)return;const e=new Cs(this._endLineNumbers[i],1);return void this._revealLineInCenterIfOutsideViewport(e)}if(this._stickyScrollWidget.isInFoldingIconDomNode(t.target)){const i=this._stickyScrollWidget.getLineNumberFromChildDomNode(t.target);return void this._toggleFoldingRegionForLine(i)}if(!this._stickyScrollWidget.isInStickyLine(t.target))return;let i=this._stickyScrollWidget.getEditorPositionFromNode(t.target);if(!i){const e=this._stickyScrollWidget.getLineNumberFromChildDomNode(t.target);if(e===null)return;i=new Cs(e,1)}this._revealPosition(i)}))),this._register(cc(s,$c.MOUSE_MOVE,(t=>{if(t.shiftKey){const i=this._stickyScrollWidget.getLineIndexFromChildDomNode(t.target);return i===null||this._showEndForLine!==null&&this._showEndForLine===i?void 0:(this._showEndForLine=i,void this._renderStickyScroll())}this._showEndForLine!==null&&(this._showEndForLine=null,this._renderStickyScroll())}))),this._register(rc(s,$c.MOUSE_LEAVE,(t=>{this._showEndForLine!==null&&(this._showEndForLine=null,this._renderStickyScroll())}))),this._register(i.onMouseMoveOrRelevantKeyDown((([i,s])=>{const n=e(i);if(!n||!i.hasTriggerModifier||!this._editor.hasModel())return void t.clear();const{range:o,textElement:r}=n;if(o.equalsRange(this._stickyRangeProjectedOnEditor)){if(r.style.textDecoration==="underline")return}else this._stickyRangeProjectedOnEditor=o,t.clear();const h=new xe;let c;t.add(qi((()=>h.dispose(!0)))),m3(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new Cs(o.startLineNumber,o.startColumn+1),h.token).then((i=>{if(!h.token.isCancellationRequested)if(i.length!==0){this._candidateDefinitionsLength=i.length;const e=r;c!==e?(t.clear(),c=e,c.style.textDecoration="underline",t.add(qi((()=>{c.style.textDecoration="none"})))):c||(c=e,c.style.textDecoration="underline",t.add(qi((()=>{c.style.textDecoration="none"}))))}else t.clear()}))}))),this._register(i.onCancel((()=>{t.clear()}))),this._register(i.onExecute((async t=>{if(t.target.type!==12||t.target.detail!==this._stickyScrollWidget.getId())return;const i=this._stickyScrollWidget.getEditorPositionFromNode(t.target.element);i&&this._editor.hasModel()&&this._stickyRangeProjectedOnEditor&&(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:i.lineNumber,column:1})),this._instaService.invokeFunction(Zet,t,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor}))})))}_onContextMenu(t,i){const e=new ur(t,i);this._contextMenuService.showContextMenu({menuId:tu.StickyScrollContext,getAnchor:()=>e})}_toggleFoldingRegionForLine(t){if(!this._foldingModel||t===null)return;const i=this._stickyScrollWidget.getRenderedStickyLine(t),e=i==null?void 0:i.foldingIcon;if(!e)return;K9(this._foldingModel,Number.MAX_VALUE,[t]),e.isCollapsed=!e.isCollapsed;const s=(e.isCollapsed?this._editor.getTopForLineNumber(e.foldingEndLine):this._editor.getTopForLineNumber(e.foldingStartLine))-this._editor.getOption(67)*i.index+1;this._editor.setScrollTop(s),this._renderStickyScroll(t)}_readConfiguration(){const t=this._editor.getOption(115);if(t.enabled===!1)return this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),void(this._enabled=!1);t.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange((t=>{t.scrollTopChanged&&(this._showEndForLine=null,this._renderStickyScroll())}))),this._sessionStore.add(this._editor.onDidLayoutChange((()=>this._onDidResize()))),this._sessionStore.add(this._editor.onDidChangeModelTokens((t=>this._onTokensChange(t)))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll((()=>{this._showEndForLine=null,this._renderStickyScroll()}))),this._enabled=!0),this._editor.getOption(68).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition((()=>{this._showEndForLine=null,this._renderStickyScroll(0)})))}_needsUpdate(t){const i=this._stickyScrollWidget.getCurrentLines();for(const e of i)for(const i of t.ranges)if(e>=i.fromLineNumber&&e<=i.toLineNumber)return!0;return!1}_onTokensChange(t){this._needsUpdate(t)&&this._renderStickyScroll(0)}_onDidResize(){const t=this._editor.getLayoutInfo().height/this._editor.getOption(67);this._maxStickyLines=Math.round(.25*t)}async _renderStickyScroll(t){var i,e;const s=this._editor.getModel();if(!s||s.isTooLargeForTokenization())return this._foldingModel=null,void this._stickyScrollWidget.setState(void 0,null);const n=this._stickyLineCandidateProvider.getVersionId();if(n===void 0||n===s.getVersionId())if(this._foldingModel=(e=await((i=k7.get(this._editor))===null||i===void 0?void 0:i.getFoldingModel()))!==null&&e!==void 0?e:null,this._widgetState=this.findScrollWidgetState(),this._stickyScrollVisibleContextKey.set(this._widgetState.startLineNumbers.length!==0),this._focused)if(this._focusedStickyElementIndex===-1)this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,t),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{const i=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,t),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(i)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}else this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,t)}findScrollWidgetState(){const t=this._editor.getOption(67),i=Math.min(this._maxStickyLines,this._editor.getOption(115).maxLineCount),e=this._editor.getScrollTop();let s=0;const n=[],o=[],r=this._editor.getVisibleRanges();if(r.length!==0){const h=new ort(r[0].startLineNumber,r[r.length-1].endLineNumber),c=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(h);for(const r of c){const h=r.startLineNumber,c=r.endLineNumber,a=r.nestingDepth;if(c-h>0){const r=(a-1)*t,l=a*t,u=this._editor.getBottomForLineNumber(h)-e,d=this._editor.getTopForLineNumber(c)-e,f=this._editor.getBottomForLineNumber(c)-e;if(r>d&&r<=f){n.push(h),o.push(c+1),s=f-l;break}if(l>u&&l<=f&&(n.push(h),o.push(c+1)),n.length===i)break}}}return this._endLineNumbers=o,new Xot(n,o,s,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}};Ert.ID="store.contrib.stickyScrollController",Ert=krt=xrt([Crt(1,aT),Crt(2,jA),Crt(3,Oa),Crt(4,uf),Crt(5,dR),Crt(6,Nl)],Ert);const Brt=100;Bu(Ert.ID,Ert,1),hu(class extends ru{constructor(){super({id:"editor.action.toggleStickyScroll",title:{...nt(0,"Toggle Editor Sticky Scroll"),mnemonicTitle:st(0,"&&Toggle Editor Sticky Scroll")},category:$ot.View,toggled:{condition:gl.equals("config.editor.stickyScroll.enabled",!0),title:st(0,"Sticky Scroll"),mnemonicTitle:st(0,"&&Sticky Scroll")},menu:[{id:tu.CommandPalette},{id:tu.MenubarAppearanceMenu,group:"4_editor",order:3},{id:tu.StickyScrollContext}]})}async run(t){const i=t.get(Id),e=!i.getValue("editor.stickyScroll.enabled");return i.updateValue("editor.stickyScroll.enabled",e)}}),hu(class extends yu{constructor(){super({id:"editor.action.focusStickyScroll",title:{...nt(0,"Focus Sticky Scroll"),mnemonicTitle:st(0,"&&Focus Sticky Scroll")},precondition:gl.and(gl.has("config.editor.stickyScroll.enabled"),QC.stickyScrollVisible),menu:[{id:tu.CommandPalette}]})}runEditorCommand(t,i){var e;(e=Ert.get(i))===null||e===void 0||e.focus()}}),hu(class extends yu{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:nt(0,"Select previous sticky scroll line"),precondition:QC.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Brt,primary:16}})}runEditorCommand(t,i){var e;(e=Ert.get(i))===null||e===void 0||e.focusPrevious()}}),hu(class extends yu{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:nt(0,"Select next sticky scroll line"),precondition:QC.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Brt,primary:18}})}runEditorCommand(t,i){var e;(e=Ert.get(i))===null||e===void 0||e.focusNext()}}),hu(class extends yu{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:nt(0,"Go to focused sticky scroll line"),precondition:QC.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Brt,primary:3}})}runEditorCommand(t,i){var e;(e=Ert.get(i))===null||e===void 0||e.goToFocused()}}),hu(class extends yu{constructor(){super({id:"editor.action.selectEditor",title:nt(0,"Select Editor"),precondition:QC.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Brt,primary:9}})}runEditorCommand(t,i){var e;(e=Ert.get(i))===null||e===void 0||e.selectEditor()}});var Drt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Mrt=function(t,i){return function(e,s){i(e,s,t)}};class Srt{constructor(t,i,e,s,n,o){this.range=t,this.insertText=i,this.filterText=e,this.additionalTextEdits=s,this.command=n,this.completion=o}}let Frt=class extends ee{constructor(t,i,e,s,n,o){super(n.disposable),this.model=t,this.line=i,this.word=e,this.completionModel=s,this._suggestMemoryService=o}canBeReused(t,i,e){return this.model===t&&this.line===i&&this.word.word.length>0&&this.word.startColumn===e.startColumn&&this.word.endColumn<e.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){var t;const i=[],{items:e}=this.completionModel,s=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},e),n=Wt.slice(e,s),o=Wt.slice(e,0,s);let r=5;for(const e of Wt.concat(n,o)){if(e.score===mN.Default)continue;const s=new Es(e.editStart.lineNumber,e.editStart.column,e.editInsertEnd.lineNumber,e.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),n=e.completion.insertTextRules&&4&e.completion.insertTextRules?{snippet:e.completion.insertText}:e.completion.insertText;i.push(new Srt(s,n,(t=e.filterTextLow)!==null&&t!==void 0?t:e.labelLow,e.completion.additionalTextEdits,e.completion.command,e)),r-- >=0&&e.resolve(ye.None)}return i}};Frt=Drt([Mrt(5,dit)],Frt);let Irt=class extends te{constructor(t,i,e,s){super(),this._languageFeatureService=t,this._clipboardService=i,this._suggestMemoryService=e,this._editorService=s,this._store.add(t.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(t,i,e,s){var n;if(e.selectedSuggestionInfo)return;let o;for(const i of this._editorService.listCodeEditors())if(i.getModel()===t){o=i;break}if(!o)return;const r=o.getOption(89);if(Ftt.isAllOff(r))return;t.tokenization.tokenizeIfCheap(i.lineNumber);const h=t.tokenization.getLineTokens(i.lineNumber),c=h.getStandardTokenType(h.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if(Ftt.valueFor(r,c)!=="inline")return;let a,l,u=t.getWordAtPosition(i);if(u!=null&&u.word||(a=this._getTriggerCharacterInfo(t,i)),!(u!=null&&u.word)&&!a||(u||(u=t.getWordUntilPosition(i)),u.endColumn!==i.column))return;const d=t.getValueInRange(new Es(i.lineNumber,1,i.lineNumber,i.column));if(!a&&(!((n=this._lastResult)===null||n===void 0)&&n.canBeReused(t,i.lineNumber,u))){const t=new Cit(d,i.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=t,this._lastResult.acquire(),l=this._lastResult}else{const e=await Dtt(this._languageFeatureService.completionProvider,t,i,new Ett(void 0,Fit.createSuggestFilter(o).itemKind,a==null?void 0:a.providers),a&&{triggerKind:1,triggerCharacter:a.ch},s);let n;e.needsClipboard&&(n=await this._clipboardService.readText());const r=new Eit(e.items,i.column,new Cit(d,0),xit.None,o.getOption(118),o.getOption(112),{boostFullMatch:!1,firstMatchCanBeWeak:!1},n);l=new Frt(t,i.lineNumber,u,r,e,this._suggestMemoryService)}return this._lastResult=l,l}handleItemDidShow(t,i){i.completion.resolve(ye.None)}freeInlineCompletions(t){t.release()}_getTriggerCharacterInfo(t,i){var e;const s=t.getValueInRange(Es.fromPositions({lineNumber:i.lineNumber,column:i.column-1},i)),n=new Set;for(const i of this._languageFeatureService.completionProvider.all(t))!((e=i.triggerCharacters)===null||e===void 0)&&e.includes(s)&&n.add(i);if(n.size!==0)return{providers:n,ch:s}}};Irt=Drt([Mrt(0,jA),Mrt(1,IV),Mrt(2,dit),Mrt(3,Ua)],Irt),hJ(Irt);Cu(class extends vu{constructor(){super({id:"editor.action.forceRetokenize",label:st(0,"Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(t,i){if(!i.hasModel())return;const e=i.getModel();e.tokenization.resetTokenization();const s=new re;e.tokenization.forceTokenization(e.getLineCount()),s.stop(),console.log(`tokenization took ${s.elapsed()}`)}});class Lrt extends ru{constructor(){super({id:Lrt.ID,title:nt(0,"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},f1:!0})}run(){const t=!bw.getTabFocusMode();bw.setTabFocusMode(t),cw(st(0,t?"Pressing Tab will now move focus to the next focusable element":"Pressing Tab will now insert the tab character"))}}Lrt.ID="editor.action.toggleTabFocusMode",hu(Lrt);var Rrt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Trt=function(t,i){return function(e,s){i(e,s,t)}};let Nrt=class extends te{get enabled(){return this._enabled}set enabled(t){t?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=t}constructor(t,i,e={},s){var n,o;super(),this._link=i,this._enabled=!0,this.el=ia(t,ha("a.monaco-link",{tabIndex:(n=i.tabIndex)!==null&&n!==void 0?n:0,href:i.href},i.label)),this.hoverDelegate=(o=e.hoverDelegate)!==null&&o!==void 0?o:az("mouse"),this.setTooltip(i.title),this.el.setAttribute("role","button");const r=this._register(new gk(this.el,"click")),h=this._register(new gk(this.el,"keypress")),c=he.chain(h.event,(t=>t.map((t=>new hr(t))).filter((t=>t.keyCode===3)))),a=this._register(new gk(this.el,Py.Tap)).event;this._register(Wy.addTarget(this.el));const l=he.any(r.event,c,a);this._register(l((t=>{this.enabled&&(qc(t,!0),e!=null&&e.opener?e.opener(this._link.href):s.open(this._link.href,{allowCommands:!0}))}))),this.enabled=!0}setTooltip(t){this.hoverDelegate.showNativeHover?this.el.title=t??"":!this.hover&&t?this.hover=this._register(fz(this.hoverDelegate,this.el,t)):this.hover&&this.hover.update(t)}};Nrt=Rrt([Trt(3,gT)],Nrt);var Qrt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Ort=function(t,i){return function(e,s){i(e,s,t)}};let zrt=class extends te{constructor(t,i){super(),this._editor=t,this.instantiationService=i,this.banner=this._register(this.instantiationService.createInstance(Urt))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(t){this.banner.show({...t,onClose:()=>{var i;this.hide(),(i=t.onClose)===null||i===void 0||i.call(t)}}),this._editor.setBanner(this.banner.element,26)}};zrt=Qrt([Ort(1,Oa)],zrt);let Urt=class extends te{constructor(t){super(),this.instantiationService=t,this.markdownRenderer=this.instantiationService.createInstance(pQ,{}),this.element=ha("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(t){return t.ariaLabel?t.ariaLabel:typeof t.message=="string"?t.message:void 0}getBannerMessage(t){if(typeof t=="string"){const i=ha("span");return i.innerText=t,i}return this.markdownRenderer.render(t).element}clear(){nc(this.element)}show(t){nc(this.element);const i=this.getAriaLabel(t);i&&this.element.setAttribute("aria-label",i);const e=ia(this.element,ha("div.icon-container"));e.setAttribute("aria-hidden","true"),t.icon&&e.appendChild(ha(`div${Ka.asCSSSelector(t.icon)}`));const s=ia(this.element,ha("div.message-container"));if(s.setAttribute("aria-hidden","true"),s.appendChild(this.getBannerMessage(t.message)),this.messageActionsContainer=ia(this.element,ha("div.message-actions-container")),t.actions)for(const i of t.actions)this._register(this.instantiationService.createInstance(Nrt,this.messageActionsContainer,{...i,tabIndex:-1},{}));const n=ia(this.element,ha("div.action-container"));this.actionBar=this._register(new RH(n)),this.actionBar.push(this._register(new ja("banner.close","Close Banner",Ka.asClassName(eV),!0,(()=>{typeof t.onClose=="function"&&t.onClose()}))),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};Urt=Qrt([Ort(0,Oa)],Urt);var Hrt=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Prt=function(t,i){return function(e,s){i(e,s,t)}};const jrt=X_("extensions-warning-message",Fs.warning,st(0,"Icon shown with a warning message in the extensions editor."));let Wrt=class extends te{constructor(t,i,e,s){super(),this._editor=t,this._editorWorkerService=i,this._workspaceTrustService=e,this._highlighter=null,this._bannerClosed=!1,this._updateState=t=>{if(t&&t.hasMore){if(this._bannerClosed)return;const i=Math.max(t.ambiguousCharacterCount,t.nonBasicAsciiCharacterCount,t.invisibleCharacterCount);let e;if(t.nonBasicAsciiCharacterCount>=i)e={message:st(0,"This document contains many non-basic ASCII unicode characters"),command:new eht};else if(t.ambiguousCharacterCount>=i)e={message:st(0,"This document contains many ambiguous unicode characters"),command:new tht};else{if(!(t.invisibleCharacterCount>=i))throw new Error("Unreachable");e={message:st(0,"This document contains many invisible unicode characters"),command:new iht}}this._bannerController.show({id:"unicodeHighlightBanner",message:e.message,icon:jrt,actions:[{label:e.command.shortLabel,href:`command:${e.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(s.createInstance(zrt,t)),this._register(this._editor.onDidChangeModel((()=>{this._bannerClosed=!1,this._updateHighlighter()}))),this._options=t.getOption(125),this._register(e.onDidChangeTrust((t=>{this._updateHighlighter()}))),this._register(t.onDidChangeConfiguration((i=>{i.hasChanged(125)&&(this._options=t.getOption(125),this._updateHighlighter())}))),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const t=function(t,i){return{nonBasicASCII:i.nonBasicASCII===xi?!t:i.nonBasicASCII,ambiguousCharacters:i.ambiguousCharacters,invisibleCharacters:i.invisibleCharacters,includeComments:i.includeComments===xi?!t:i.includeComments,includeStrings:i.includeStrings===xi?!t:i.includeStrings,allowedCharacters:i.allowedCharacters,allowedLocales:i.allowedLocales}}(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([t.nonBasicASCII,t.ambiguousCharacters,t.invisibleCharacters].every((t=>t===!1)))return;const i={nonBasicASCII:t.nonBasicASCII,ambiguousCharacters:t.ambiguousCharacters,invisibleCharacters:t.invisibleCharacters,includeComments:t.includeComments,includeStrings:t.includeStrings,allowedCodePoints:Object.keys(t.allowedCharacters).map((t=>t.codePointAt(0))),allowedLocales:Object.keys(t.allowedLocales).map((t=>t==="_os"?(new Intl.NumberFormat).resolvedOptions().locale:t==="_vscode"?Ft:t))};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new Yrt(this._editor,i,this._updateState,this._editorWorkerService):this._highlighter=new _rt(this._editor,i,this._updateState)}getDecorationInfo(t){return this._highlighter?this._highlighter.getDecorationInfo(t):null}};Wrt.ID="editor.contrib.unicodeHighlighter",Wrt=Hrt([Prt(1,tP),Prt(2,VO),Prt(3,Oa)],Wrt);let Yrt=class extends te{constructor(t,i,e,s){super(),this._editor=t,this._options=i,this._updateState=e,this._editorWorkerService=s,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Er((()=>this._update()),250)),this._register(this._editor.onDidChangeModelContent((()=>{this._updateSoon.schedule()}))),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII())return void this._decorations.clear();const t=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then((i=>{if(this._model.isDisposed()||this._model.getVersionId()!==t)return;this._updateState(i);const e=[];if(!i.hasMore)for(const t of i.ranges)e.push({range:t,options:Xrt.instance.getDecorationFromOptions(this._options)});this._decorations.set(e)}))}getDecorationInfo(t){if(!this._decorations.has(t))return null;const i=this._editor.getModel();return jI(i,t)?{reason:$rt(i.getValueInRange(t.range),this._options),inComment:WI(i,t),inString:YI(i,t)}:null}};Yrt=Hrt([Prt(3,tP)],Yrt);class _rt extends te{constructor(t,i,e){super(),this._editor=t,this._options=i,this._updateState=e,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Er((()=>this._update()),250)),this._register(this._editor.onDidLayoutChange((()=>{this._updateSoon.schedule()}))),this._register(this._editor.onDidScrollChange((()=>{this._updateSoon.schedule()}))),this._register(this._editor.onDidChangeHiddenAreas((()=>{this._updateSoon.schedule()}))),this._register(this._editor.onDidChangeModelContent((()=>{this._updateSoon.schedule()}))),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII())return void this._decorations.clear();const t=this._editor.getVisibleRanges(),i=[],e={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const i of t){const t=pg.computeUnicodeHighlights(this._model,this._options,i);for(const i of t.ranges)e.ranges.push(i);e.ambiguousCharacterCount+=e.ambiguousCharacterCount,e.invisibleCharacterCount+=e.invisibleCharacterCount,e.nonBasicAsciiCharacterCount+=e.nonBasicAsciiCharacterCount,e.hasMore=e.hasMore||t.hasMore}if(!e.hasMore)for(const t of e.ranges)i.push({range:t,options:Xrt.instance.getDecorationFromOptions(this._options)});this._updateState(e),this._decorations.set(i)}getDecorationInfo(t){if(!this._decorations.has(t))return null;const i=this._editor.getModel(),e=i.getValueInRange(t.range);return jI(i,t)?{reason:$rt(e,this._options),inComment:WI(i,t),inString:YI(i,t)}:null}}const Vrt=st(0,"Configure Unicode Highlight Options");let Jrt=class{constructor(t,i,e){this._editor=t,this._languageService=i,this._openerService=e,this.hoverOrdinal=5}computeSync(t,i){if(!this._editor.hasModel()||t.type!==1)return[];const e=this._editor.getModel(),s=this._editor.getContribution(Wrt.ID);if(!s)return[];const n=[],o=new Set;let r=300;for(const t of i){const i=s.getDecorationInfo(t);if(!i)continue;const h=e.getValueInRange(t.range).codePointAt(0),c=Krt(h);let a;switch(i.reason.kind){case 0:a=So(i.reason.confusableWith)?st(0,"The character {0} could be confused with the ASCII character {1}, which is more common in source code.",c,Krt(i.reason.confusableWith.codePointAt(0))):st(0,"The character {0} could be confused with the character {1}, which is more common in source code.",c,Krt(i.reason.confusableWith.codePointAt(0)));break;case 1:a=st(0,"The character {0} is invisible.",c);break;case 2:a=st(0,"The character {0} is not a basic ASCII character.",c)}if(o.has(a))continue;o.add(a);const l={codePoint:h,reason:i.reason,inComment:i.inComment,inString:i.inString},u=st(0,"Adjust settings"),d=`command:${sht.ID}?${encodeURIComponent(JSON.stringify(l))}`,f=new RN("",!0).appendMarkdown(a).appendText(" ").appendLink(d,u,Vrt);n.push(new m5(this,t.range,[f],!1,r++))}return n}renderHoverParts(t,i){return b5(t,i,this._editor,this._languageService,this._openerService)}};function Grt(t){return`U+${t.toString(16).padStart(4,"0")}`}function Krt(t){let i=`\`${Grt(t)}\``;return jo.isInvisibleCharacter(t)||(i+=` "${function(t){return t===96?"`` ` ``":"`"+String.fromCodePoint(t)+"`"}(t)}"`),i}function $rt(t,i){return pg.computeUnicodeHighlightReason(t,i)}Jrt=Hrt([Prt(1,Od),Prt(2,gT)],Jrt);class Xrt{constructor(){this.map=new Map}getDecorationFromOptions(t){return this.getDecoration(!t.includeComments,!t.includeStrings)}getDecoration(t,i){const e=`${t}${i}`;let s=this.map.get(e);return s||(s=DF.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:t,hideInStringTokens:i}),this.map.set(e,s)),s}}Xrt.instance=new Xrt;class qrt extends vu{constructor(){super({id:tht.ID,label:st(0,"Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=st(0,"Disable Highlight In Comments")}async run(t,i,e){const s=t==null?void 0:t.get(Id);s&&this.runAction(s)}async runAction(t){await t.updateValue(Mi,!1,2)}}class Zrt extends vu{constructor(){super({id:tht.ID,label:st(0,"Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=st(0,"Disable Highlight In Strings")}async run(t,i,e){const s=t==null?void 0:t.get(Id);s&&this.runAction(s)}async runAction(t){await t.updateValue(Si,!1,2)}}class tht extends vu{constructor(){super({id:tht.ID,label:st(0,"Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=st(0,"Disable Ambiguous Highlight")}async run(t,i,e){const s=t==null?void 0:t.get(Id);s&&this.runAction(s)}async runAction(t){await t.updateValue(Di,!1,2)}}tht.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class iht extends vu{constructor(){super({id:iht.ID,label:st(0,"Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=st(0,"Disable Invisible Highlight")}async run(t,i,e){const s=t==null?void 0:t.get(Id);s&&this.runAction(s)}async runAction(t){await t.updateValue(Ei,!1,2)}}iht.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class eht extends vu{constructor(){super({id:eht.ID,label:st(0,"Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=st(0,"Disable Non ASCII Highlight")}async run(t,i,e){const s=t==null?void 0:t.get(Id);s&&this.runAction(s)}async runAction(t){await t.updateValue(Bi,!1,2)}}eht.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class sht extends vu{constructor(){super({id:sht.ID,label:st(0,"Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}async run(t,i,e){const{codePoint:s,reason:n,inString:o,inComment:r}=e,h=String.fromCodePoint(s),c=t.get(kP),a=t.get(Id),l=[];if(n.kind===0)for(const t of n.notAmbiguousInLocales)l.push({label:st(0,'Allow unicode characters that are more common in the language "{0}".',t),run:async()=>{nht(a,[t])}});if(l.push({label:function(t){return jo.isInvisibleCharacter(t)?st(0,"Exclude {0} (invisible character) from being highlighted",Grt(t)):st(0,"Exclude {0} from being highlighted",`${Grt(t)} "${h}"`)}(s),run:()=>async function(t,i){const e=t.getValue(Ci);let s;s=typeof e=="object"&&e?e:{};for(const t of i)s[String.fromCodePoint(t)]=!0;await t.updateValue(Ci,s,2)}(a,[s])}),r){const t=new qrt;l.push({label:t.label,run:async()=>t.runAction(a)})}else if(o){const t=new Zrt;l.push({label:t.label,run:async()=>t.runAction(a)})}if(n.kind===0){const t=new tht;l.push({label:t.label,run:async()=>t.runAction(a)})}else if(n.kind===1){const t=new iht;l.push({label:t.label,run:async()=>t.runAction(a)})}else if(n.kind===2){const t=new eht;l.push({label:t.label,run:async()=>t.runAction(a)})}else(function(t){throw new Error(`Unexpected value: ${t}`)})(n);const u=await c.pick(l,{title:Vrt});u&&await u.run()}}async function nht(t,i){var e;const s=(e=t.inspect(Fi).user)===null||e===void 0?void 0:e.value;let n;n=typeof s=="object"&&s?Object.assign({},s):{};for(const t of i)n[t]=!0;await t.updateValue(Fi,n,2)}sht.ID="editor.action.unicodeHighlight.showExcludeOptions",Cu(tht),Cu(iht),Cu(eht),Cu(sht),Bu(Wrt.ID,Wrt,1),G3.register(Jrt);var oht=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},rht=function(t,i){return function(e,s){i(e,s,t)}};const hht="ignoreUnusualLineTerminators";let cht=class extends te{constructor(t,i,e){super(),this._editor=t,this._dialogService=i,this._codeEditorService=e,this._isPresentingDialog=!1,this._config=this._editor.getOption(126),this._register(this._editor.onDidChangeConfiguration((t=>{t.hasChanged(126)&&(this._config=this._editor.getOption(126),this._checkForUnusualLineTerminators())}))),this._register(this._editor.onDidChangeModel((()=>{this._checkForUnusualLineTerminators()}))),this._register(this._editor.onDidChangeModelContent((t=>{t.isUndoing||this._checkForUnusualLineTerminators()}))),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){if(this._config==="off"||!this._editor.hasModel())return;const t=this._editor.getModel();if(!t.mightContainUnusualLineTerminators()||function(t,i){return t.getModelProperty(i.uri,hht)}(this._codeEditorService,t)===!0||this._editor.getOption(91))return;if(this._config==="auto")return void t.removeUnusualLineTerminators(this._editor.getSelections());if(this._isPresentingDialog)return;let i;try{this._isPresentingDialog=!0,i=await this._dialogService.confirm({title:st(0,"Unusual Line Terminators"),message:st(0,"Detected unusual line terminators"),detail:st(0,"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",BM(t.uri)),primaryButton:st(0,"&&Remove Unusual Line Terminators"),cancelButton:st(0,"Ignore")})}finally{this._isPresentingDialog=!1}i.confirmed?t.removeUnusualLineTerminators(this._editor.getSelections()):function(t,i,e){t.setModelProperty(i.uri,hht,e)}(this._codeEditorService,t,!0)}};cht.ID="editor.contrib.unusualLineTerminatorsDetector",cht=oht([rht(1,VL),rht(2,Ua)],cht),Bu(cht.ID,cht,1);var aht,lht,uht=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},dht=function(t,i){return function(e,s){i(e,s,t)}};const fht=new Tl("hasWordHighlights",!1);function ght(t,i,e,s){return kr(t.ordered(i).map((t=>()=>Promise.resolve(t.provideDocumentHighlights(i,e,s)).then(void 0,zi))),p).then((t=>{if(t){const e=new Jf;return e.set(i.uri,t),e}return new Jf}))}class Aht{constructor(t,i,e){this._model=t,this._selection=i,this._wordSeparators=e,this._wordRange=this._getCurrentWordRange(t,i),this._result=null}get result(){return this._result||(this._result=Ar((t=>this._compute(this._model,this._selection,this._wordSeparators,t)))),this._result}_getCurrentWordRange(t,i){const e=t.getWordAtPosition(i.getPosition());return e?new Es(i.startLineNumber,e.startColumn,i.startLineNumber,e.endColumn):null}isValid(t,i,e){const s=i.startLineNumber,n=i.startColumn,o=i.endColumn,r=this._getCurrentWordRange(t,i);let h=!!(this._wordRange&&this._wordRange.equalsRange(r));for(let t=0,i=e.length;!h&&t<i;t++){const i=e.getRange(t);i&&i.startLineNumber===s&&i.startColumn<=n&&i.endColumn>=o&&(h=!0)}return h}cancel(){this.result.cancel()}}class pht extends Aht{constructor(t,i,e,s){super(t,i,e),this._providers=s}_compute(t,i,e,s){return ght(this._providers,t,i.getPosition(),s).then((t=>t||new Jf))}}class wht extends Aht{constructor(t,i,e,s,n){super(t,i,e),this._providers=s,this._otherModels=n}_compute(t,i,e,s){return function(t,i,e,s,n,o){return kr(t.ordered(i).map((t=>()=>{const s=o.filter((t=>ag(t))).filter((i=>ZR(t.selector,i.uri,i.getLanguageId(),!0,void 0,void 0)>0));return Promise.resolve(t.provideMultiDocumentHighlights(i,e,s,n)).then(void 0,zi)})),(t=>t instanceof Jf&&t.size>0))}(this._providers,t,i.getPosition(),0,s,this._otherModels).then((t=>t||new Jf))}}class mht extends Aht{constructor(t,i,e,s,n){super(t,i,s),this._otherModels=n,this._selectionIsEmpty=i.isEmpty(),this._word=e}_compute(t,i,e,s){return br(250,s).then((()=>{const s=new Jf;let n;if(n=this._word?this._word:t.getWordAtPosition(i.getPosition()),!n)return new Jf;const o=[t,...this._otherModels];for(const t of o){if(t.isDisposed())continue;const i=t.findMatches(n.word,!0,!1,!0,e,!1).map((t=>({range:t.range,kind:Us.Text})));i&&s.set(t.uri,i)}return s}))}isValid(t,i,e){const s=i.isEmpty();return this._selectionIsEmpty===s&&super.isValid(t,i,e)}}ku("_executeDocumentHighlights",(async(t,i,e)=>{const s=t.get(jA),n=await ght(s.documentHighlightProvider,i,e,ye.None);return n==null?void 0:n.get(i.uri)}));let vht=aht=class{constructor(t,i,e,s,n){this.toUnhook=new Zi,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new Jf,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=t,this.providers=i,this.multiDocumentProviders=e,this.codeEditorService=n,this._hasWordHighlights=fht.bindTo(s),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(t.onDidChangeCursorPosition((t=>{this._ignorePositionChangeEvent||this.occurrencesHighlight!=="off"&&this._onPositionChanged(t)}))),this.toUnhook.add(t.onDidFocusEditorText((t=>{this.occurrencesHighlight!=="off"&&(this.workerRequest||this._run())}))),this.toUnhook.add(t.onDidChangeModelContent((t=>{this._stopAll()}))),this.toUnhook.add(t.onDidChangeModel((t=>{!t.newModelUrl&&t.oldModelUrl?this._stopSingular():aht.query&&this._run()}))),this.toUnhook.add(t.onDidChangeConfiguration((t=>{const i=this.editor.getOption(81);this.occurrencesHighlight!==i&&(this.occurrencesHighlight=i,this._stopAll())}))),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,aht.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight!=="off"&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(Es.compareRangesUsingStarts)}moveNext(){const t=this._getSortedHighlights(),i=t.findIndex((t=>t.containsPosition(this.editor.getPosition()))),e=(i+1)%t.length,s=t[e];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const i=this._getWord();i&&cw(`${this.editor.getModel().getLineContent(s.startLineNumber)}, ${e+1} of ${t.length} for '${i.word}'`)}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const t=this._getSortedHighlights(),i=t.findIndex((t=>t.containsPosition(this.editor.getPosition()))),e=(i-1+t.length)%t.length,s=t[e];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const i=this._getWord();i&&cw(`${this.editor.getModel().getLineContent(s.startLineNumber)}, ${e+1} of ${t.length} for '${i.word}'`)}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;const t=aht.storedDecorations.get(this.editor.getModel().uri);t&&(this.editor.removeDecorations(t),aht.storedDecorations.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(){const t=this.codeEditorService.listCodeEditors(),i=[];for(const e of t){if(!e.hasModel())continue;const t=aht.storedDecorations.get(e.getModel().uri);if(!t)continue;e.removeDecorations(t),i.push(e.getModel().uri);const s=bht.get(e);s!=null&&s.wordHighlighter&&s.wordHighlighter.decorations.length>0&&(s.wordHighlighter.decorations.clear(),s.wordHighlighter.workerRequest=null,s.wordHighlighter._hasWordHighlights.set(!1))}for(const t of i)aht.storedDecorations.delete(t)}_stopSingular(){var t,i,e,s;this._removeSingleDecorations(),this.editor.hasTextFocus()&&(((t=this.editor.getModel())===null||t===void 0?void 0:t.uri.scheme)!==Lh.vscodeNotebookCell&&((e=(i=aht.query)===null||i===void 0?void 0:i.modelInfo)===null||e===void 0?void 0:e.model.uri.scheme)!==Lh.vscodeNotebookCell?(aht.query=null,this._run()):!((s=aht.query)===null||s===void 0)&&s.modelInfo&&(aht.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(){this._removeAllDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(t){var i;this.occurrencesHighlight!=="off"&&(t.reason===3||((i=this.editor.getModel())===null||i===void 0?void 0:i.uri.scheme)===Lh.vscodeNotebookCell)?this._run():this._stopAll()}_getWord(){const t=this.editor.getSelection(),i=t.startLineNumber,e=t.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:i,column:e})}getOtherModelsToHighlight(t){if(!t)return[];if(t.uri.scheme===Lh.vscodeNotebookCell){const i=[],e=this.codeEditorService.listCodeEditors();for(const s of e){const e=s.getModel();e&&e!==t&&e.uri.scheme===Lh.vscodeNotebookCell&&i.push(e)}return i}const i=[],e=this.codeEditorService.listCodeEditors();for(const s of e){if(!jX(s))continue;const e=s.getModel();e&&t===e.modified&&i.push(e.modified)}if(i.length)return i;if(this.occurrencesHighlight==="singleFile")return[];for(const s of e){const e=s.getModel();e&&e!==t&&i.push(e)}return i}_run(){var t;let i;if(this.editor.hasTextFocus()){const t=this.editor.getSelection();if(!t||t.startLineNumber!==t.endLineNumber)return aht.query=null,void this._stopAll();const e=t.startColumn,s=t.endColumn,n=this._getWord();if(!n||n.startColumn>e||n.endColumn<s)return aht.query=null,void this._stopAll();i=this.workerRequest&&this.workerRequest.isValid(this.model,t,this.decorations),aht.query={modelInfo:{model:this.model,selection:t},word:n}}else if(!aht.query)return;if(this.lastCursorPositionChangeTime=(new Date).getTime(),i)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();const i=++this.workerRequestTokenId;this.workerRequestCompleted=!1;const e=this.getOtherModelsToHighlight(this.editor.getModel());if(!aht.query.modelInfo||aht.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(aht.query.modelInfo.model,aht.query.modelInfo.selection,aht.query.word,e),(t=this.workerRequest)===null||t===void 0||t.result.then((t=>{i===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=t||[],this._beginRenderDecorations())}),Oi)}}computeWithModel(t,i,e,s){return s.length?function(t,i,e,s,n,o){return t.has(i)?new wht(i,e,n,t,o):new mht(i,e,s,n,o)}(this.multiDocumentProviders,t,i,e,this.editor.getOption(131),s):function(t,i,e,s,n){return t.has(i)?new pht(i,e,n,t):new mht(i,e,s,n,[])}(this.providers,t,i,e,this.editor.getOption(131))}_beginRenderDecorations(){const t=(new Date).getTime(),i=this.lastCursorPositionChangeTime+250;t>=i?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout((()=>{this.renderDecorations()}),i-t)}renderDecorations(){var t,i,e;this.renderDecorationsTimer=-1;const s=this.codeEditorService.listCodeEditors();for(const o of s){const s=bht.get(o);if(!s)continue;const r=[],h=(t=o.getModel())===null||t===void 0?void 0:t.uri;if(h&&this.workerRequestValue.has(h)){const t=aht.storedDecorations.get(h),c=this.workerRequestValue.get(h);if(c)for(const t of c)t.range&&r.push({range:t.range,options:(n=t.kind,n===Us.Write?ont:n===Us.Text?rnt:ant)});let a=[];o.changeDecorations((i=>{a=i.deltaDecorations(t??[],r)})),aht.storedDecorations=aht.storedDecorations.set(h,a),r.length>0&&((i=s.wordHighlighter)===null||i===void 0||i.decorations.set(r),(e=s.wordHighlighter)===null||e===void 0||e._hasWordHighlights.set(!0))}}var n}dispose(){this._stopSingular(),this.toUnhook.dispose()}};vht.storedDecorations=new Jf,vht.query=null,vht=aht=uht([dht(4,Ua)],vht);let bht=lht=class extends te{static get(t){return t.getContribution(lht.ID)}constructor(t,i,e,s){super(),this._wordHighlighter=null;const n=()=>{t.hasModel()&&!t.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new vht(t,e.documentHighlightProvider,e.multiDocumentHighlightProvider,i,s))};this._register(t.onDidChangeModel((t=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),n()}))),n()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!(!this._wordHighlighter||!this._wordHighlighter.hasDecorations())}moveNext(){var t;(t=this._wordHighlighter)===null||t===void 0||t.moveNext()}moveBack(){var t;(t=this._wordHighlighter)===null||t===void 0||t.moveBack()}restoreViewState(t){this._wordHighlighter&&t&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}};bht.ID="editor.contrib.wordHighlighter",bht=lht=uht([dht(1,Nl),dht(2,jA),dht(3,Ua)],bht);class yht extends vu{constructor(t,i){super(i),this._isNext=t}run(t,i){const e=bht.get(i);e&&(this._isNext?e.moveNext():e.moveBack())}}Bu(bht.ID,bht,0),Cu(class extends yht{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:st(0,"Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:fht,kbOpts:{kbExpr:QC.editorTextFocus,primary:65,weight:100}})}}),Cu(class extends yht{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:st(0,"Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:fht,kbOpts:{kbExpr:QC.editorTextFocus,primary:1089,weight:100}})}}),Cu(class extends vu{constructor(){super({id:"editor.action.wordHighlight.trigger",label:st(0,"Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:fht.toNegated(),kbOpts:{kbExpr:QC.editorTextFocus,primary:0,weight:100}})}run(t,i,e){const s=bht.get(i);s&&s.restoreViewState(!0)}});class kht extends mu{constructor(t){super(t),this._inSelectionMode=t.inSelectionMode,this._wordNavigationType=t.wordNavigationType}runEditorCommand(t,i,e){if(!i.hasModel())return;const s=tg(i.getOption(131),i.getOption(130)),n=i.getModel(),o=i.getSelections().map((t=>{const i=new Cs(t.positionLineNumber,t.positionColumn),e=this._move(s,n,i,this._wordNavigationType);return this._moveTo(t,e,this._inSelectionMode)}));if(n.pushStackElement(),i._getViewModel().setCursorStates("moveWordCommand",3,o.map((t=>Xx.fromModelSelection(t)))),o.length===1){const t=new Cs(o[0].positionLineNumber,o[0].positionColumn);i.revealPosition(t,0)}}_moveTo(t,i,e){return e?new Bs(t.selectionStartLineNumber,t.selectionStartColumn,i.lineNumber,i.column):new Bs(i.lineNumber,i.column,i.lineNumber,i.column)}}class xht extends kht{_move(t,i,e,s){return dC.moveWordLeft(t,i,e,s)}}class Cht extends kht{_move(t,i,e,s){return dC.moveWordRight(t,i,e,s)}}class Eht extends mu{constructor(t){super(t),this._whitespaceHeuristics=t.whitespaceHeuristics,this._wordNavigationType=t.wordNavigationType}runEditorCommand(t,i,e){const s=t.get(uf);if(!i.hasModel())return;const n=tg(i.getOption(131),i.getOption(130)),o=i.getModel(),r=i.getSelections(),h=i.getOption(6),c=i.getOption(11),a=s.getLanguageConfiguration(o.getLanguageId()).getAutoClosingPairs(),l=i._getViewModel(),u=r.map((t=>{const e=this._delete({wordSeparators:n,model:o,selection:t,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:i.getOption(9),autoClosingBrackets:h,autoClosingQuotes:c,autoClosingPairs:a,autoClosedCharacters:l.getCursorAutoClosedCharacters()},this._wordNavigationType);return new nC(e,"")}));i.pushUndoStop(),i.executeCommands(this.id,u),i.pushUndoStop()}}class Bht extends Eht{_delete(t,i){return dC.deleteWordLeft(t,i)||new Es(1,1,1,1)}}class Dht extends Eht{_delete(t,i){const e=dC.deleteWordRight(t,i);if(e)return e;const s=t.model.getLineCount(),n=t.model.getLineMaxColumn(s);return new Es(s,n,s,n)}}xu(new class extends xht{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}),xu(new class extends xht{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}),xu(new class extends xht{constructor(){var t;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:gl.and(QC.textInputFocus,(t=gl.and(kw,BW))===null||t===void 0?void 0:t.negate()),primary:2063,mac:{primary:527},weight:100}})}}),xu(new class extends xht{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}),xu(new class extends xht{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}),xu(new class extends xht{constructor(){var t;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:gl.and(QC.textInputFocus,(t=gl.and(kw,BW))===null||t===void 0?void 0:t.negate()),primary:3087,mac:{primary:1551},weight:100}})}}),xu(new class extends Cht{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}),xu(new class extends Cht{constructor(){var t;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:gl.and(QC.textInputFocus,(t=gl.and(kw,BW))===null||t===void 0?void 0:t.negate()),primary:2065,mac:{primary:529},weight:100}})}}),xu(new class extends Cht{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}),xu(new class extends Cht{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}),xu(new class extends Cht{constructor(){var t;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:gl.and(QC.textInputFocus,(t=gl.and(kw,BW))===null||t===void 0?void 0:t.negate()),primary:3089,mac:{primary:1553},weight:100}})}}),xu(new class extends Cht{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}),xu(new class extends xht{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(t,i,e,s){return super._move(tg(Ni.wordSeparators.defaultValue,t.intlSegmenterLocales),i,e,s)}}),xu(new class extends xht{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(t,i,e,s){return super._move(tg(Ni.wordSeparators.defaultValue,t.intlSegmenterLocales),i,e,s)}}),xu(new class extends Cht{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(t,i,e,s){return super._move(tg(Ni.wordSeparators.defaultValue,t.intlSegmenterLocales),i,e,s)}}),xu(new class extends Cht{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(t,i,e,s){return super._move(tg(Ni.wordSeparators.defaultValue,t.intlSegmenterLocales),i,e,s)}}),xu(new class extends Bht{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:QC.writable})}}),xu(new class extends Bht{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:QC.writable})}}),xu(new class extends Bht{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:QC.writable,kbOpts:{kbExpr:QC.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}),xu(new class extends Dht{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:QC.writable})}}),xu(new class extends Dht{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:QC.writable})}}),xu(new class extends Dht{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:QC.writable,kbOpts:{kbExpr:QC.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}),Cu(class extends vu{constructor(){super({id:"deleteInsideWord",precondition:QC.writable,label:st(0,"Delete Word"),alias:"Delete Word"})}run(t,i,e){if(!i.hasModel())return;const s=tg(i.getOption(131),i.getOption(130)),n=i.getModel(),o=i.getSelections().map((t=>{const i=dC.deleteInsideWord(s,n,t);return new nC(i,"")}));i.pushUndoStop(),i.executeCommands(this.id,o),i.pushUndoStop()}});class Mht extends kht{_move(t,i,e,s){return fC.moveWordPartLeft(t,i,e)}}Xa.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");Xa.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class Sht extends kht{_move(t,i,e,s){return fC.moveWordPartRight(t,i,e)}}xu(new class extends Eht{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:QC.writable,kbOpts:{kbExpr:QC.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(t,i){return fC.deleteWordPartLeft(t)||new Es(1,1,1,1)}}),xu(new class extends Eht{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:QC.writable,kbOpts:{kbExpr:QC.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(t,i){const e=fC.deleteWordPartRight(t);if(e)return e;const s=t.model.getLineCount(),n=t.model.getLineMaxColumn(s);return new Es(s,n,s,n)}}),xu(new class extends Mht{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:QC.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}),xu(new class extends Mht{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:QC.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}),xu(new class extends Sht{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:QC.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}),xu(new class extends Sht{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:QC.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}});class Fht extends te{constructor(t){super(),this.editor=t,this._register(this.editor.onDidAttemptReadOnlyEdit((()=>this._onDidAttemptReadOnlyEdit())))}_onDidAttemptReadOnlyEdit(){const t=N0.get(this.editor);if(t&&this.editor.hasModel()){let i=this.editor.getOptions().get(92);i||(i=this.editor.isSimpleWidget?new RN(st(0,"Cannot edit in read-only input")):new RN(st(0,"Cannot edit in read-only editor"))),t.showMessage(i,this.editor.getPosition())}}}Fht.ID="editor.contrib.readOnlyMessageController",Bu(Fht.ID,Fht,2);var Iht=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Lht=function(t,i){return function(e,s){i(e,s,t)}};let Rht=class extends te{constructor(t,i,e){super(),this._textModel=t,this._languageFeaturesService=i,this._outlineModelService=e,this._currentModel=Wz(this,void 0);const s=cU("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),n=cU("_textModel.onDidChangeContent",he.debounce((t=>this._textModel.onDidChangeContent(t)),(()=>{}),100));this._register(eU((async(t,i)=>{s.read(t),n.read(t);const e=i.add(new jJ),o=await this._outlineModelService.getOrCreate(this._textModel,e.token);i.isDisposed||this._currentModel.set(o,void 0)})))}getBreadcrumbItems(t,i){const e=this._currentModel.read(i);if(!e)return[];const s=e.asListOfDocumentSymbols().filter((i=>t.contains(i.range.startLineNumber)&&!t.contains(i.range.endLineNumber)));return s.sort(I(M((t=>t.range.endLineNumber-t.range.startLineNumber),S))),s.map((t=>({name:t.name,kind:t.kind,startLineNumber:t.range.startLineNumber})))}};Rht=Iht([Lht(1,jA),Lht(2,z7)],Rht),$G.setBreadcrumbsSourceFactory(((t,i)=>i.createInstance(Rht,t)));class Tht extends te{constructor(t){super(),this.editor=t,this.widget=null,Dt&&(this._register(t.onDidChangeConfiguration((()=>this.update()))),this.update())}update(){const t=!this.editor.getOption(91);!this.widget&&t?this.widget=new Nht(this.editor):this.widget&&!t&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}Tht.ID="editor.contrib.iPadShowKeyboard";class Nht extends te{constructor(t){super(),this.editor=t,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(rc(this._domNode,"touchstart",(t=>{this.editor.focus()}))),this._register(rc(this._domNode,"focus",(t=>{this.editor.focus()}))),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return Nht.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}Nht.ID="editor.contrib.ShowKeyboardWidget",Bu(Tht.ID,Tht,3);var Qht,Oht=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},zht=function(t,i){return function(e,s){i(e,s,t)}};let Uht=Qht=class extends te{static get(t){return t.getContribution(Qht.ID)}constructor(t,i,e){super(),this._editor=t,this._languageService=e,this._widget=null,this._register(this._editor.onDidChangeModel((t=>this.stop()))),this._register(this._editor.onDidChangeModelLanguage((t=>this.stop()))),this._register(Gs.onDidChange((t=>this.stop()))),this._register(this._editor.onKeyUp((t=>t.keyCode===9&&this.stop())))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new Hht(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};Uht.ID="editor.contrib.inspectTokens",Uht=Qht=Oht([zht(1,gV),zht(2,Od)],Uht);class Hht extends te{constructor(t,i){super(),this.allowEditorOverflow=!0,this._editor=t,this._languageService=i,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=function(t,i){const e=Gs.get(i);if(e)return e;const s=t.encodeLanguageId(i);return{getInitialState:()=>ep,tokenize:(t,e,s)=>sp(i,s),tokenizeEncoded:(t,i,e)=>np(s,e)}}(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition((t=>this._compute(this._editor.getPosition())))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return Hht._ID}_compute(t){const i=this._getTokensAtLine(t.lineNumber);let e=0;for(let s=i.tokens1.length-1;s>=0;s--){const n=i.tokens1[s];if(t.column-1>=n.offset){e=s;break}}let s=0;for(let e=i.tokens2.length>>>1;e>=0;e--)if(t.column-1>=i.tokens2[e<<1]){s=e;break}const n=this._model.getLineContent(t.lineNumber);let o="";if(e<i.tokens1.length){const t=i.tokens1[e].offset,s=e+1<i.tokens1.length?i.tokens1[e+1].offset:n.length;o=n.substring(t,s)}sa(this._domNode,ha("h2.tm-token",void 0,function(t){let i="";for(let e=0,s=t.length;e<s;e++){const s=t.charCodeAt(e);switch(s){case 9:i+="→";break;case 32:i+="·";break;default:i+=String.fromCharCode(s)}}return i}(o),ha("span.tm-token-length",void 0,`${o.length} ${o.length===1?"char":"chars"}`))),ia(this._domNode,ha("hr.tokens-inspect-separator",{style:"clear:both"}));const r=1+(s<<1)<i.tokens2.length?this._decodeMetadata(i.tokens2[1+(s<<1)]):null;ia(this._domNode,ha("table.tm-metadata-table",void 0,ha("tbody",void 0,ha("tr",void 0,ha("td.tm-metadata-key",void 0,"language"),ha("td.tm-metadata-value",void 0,`${r?r.languageId:"-?-"}`)),ha("tr",void 0,ha("td.tm-metadata-key",void 0,"token type"),ha("td.tm-metadata-value",void 0,`${r?this._tokenTypeToString(r.tokenType):"-?-"}`)),ha("tr",void 0,ha("td.tm-metadata-key",void 0,"font style"),ha("td.tm-metadata-value",void 0,`${r?this._fontStyleToString(r.fontStyle):"-?-"}`)),ha("tr",void 0,ha("td.tm-metadata-key",void 0,"foreground"),ha("td.tm-metadata-value",void 0,`${r?CA.Format.CSS.formatHex(r.foreground):"-?-"}`)),ha("tr",void 0,ha("td.tm-metadata-key",void 0,"background"),ha("td.tm-metadata-value",void 0,`${r?CA.Format.CSS.formatHex(r.background):"-?-"}`))))),ia(this._domNode,ha("hr.tokens-inspect-separator")),e<i.tokens1.length&&ia(this._domNode,ha("span.tm-token-type",void 0,i.tokens1[e].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(t){const i=Gs.getColorMap(),e=op.getLanguageId(t),s=op.getTokenType(t),n=op.getFontStyle(t),o=op.getForeground(t),r=op.getBackground(t);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(e),tokenType:s,fontStyle:n,foreground:i[o],background:i[r]}}_tokenTypeToString(t){switch(t){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(t){let i="";return 1&t&&(i+="italic "),2&t&&(i+="bold "),4&t&&(i+="underline "),8&t&&(i+="strikethrough "),i.length===0&&(i="---"),i}_getTokensAtLine(t){const i=this._getStateBeforeLine(t),e=this._tokenizationSupport.tokenize(this._model.getLineContent(t),!0,i),s=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(t),!0,i);return{startState:i,tokens1:e.tokens,tokens2:s.tokens,endState:e.endState}}_getStateBeforeLine(t){let i=this._tokenizationSupport.getInitialState();for(let e=1;e<t;e++)i=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,i).endState;return i}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}Hht._ID="editor.contrib.inspectTokensWidget",Bu(Uht.ID,Uht,4),Cu(class extends vu{constructor(){super({id:"editor.action.inspectTokens",label:zO.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(t,i){const e=Uht.get(i);e==null||e.launch()}});var Pht,jht=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Wht=function(t,i){return function(e,s){i(e,s,t)}};let Yht=Pht=class{constructor(t,i){this.quickInputService=t,this.keybindingService=i,this.registry=Vl.as(mP)}provide(t){const i=new Zi;return i.add(t.onDidAccept((()=>{const[i]=t.selectedItems;i&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})}))),i.add(t.onDidChangeValue((t=>{const i=this.registry.getQuickAccessProvider(t.substr(Pht.PREFIX.length));i&&i.prefix&&i.prefix!==Pht.PREFIX&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})}))),t.items=this.getQuickAccessProviders().filter((t=>t.prefix!==Pht.PREFIX)),i}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort(((t,i)=>t.prefix.localeCompare(i.prefix))).flatMap((t=>this.createPicks(t)))}createPicks(t){return t.helpEntries.map((i=>{const e=i.prefix||t.prefix,s=e||"…";return{prefix:e,label:s,keybinding:i.commandId?this.keybindingService.lookupKeybinding(i.commandId):void 0,ariaLabel:st(0,"{0}, {1}",s,i.description),description:i.description}}))}};Yht.PREFIX="?",Yht=Pht=jht([Wht(0,kP),Wht(1,Hx)],Yht),Vl.as(mP).registerQuickAccessProvider({ctor:Yht,prefix:"",helpEntries:[{description:HO.helpQuickAccessActionLabel}]});class _ht{constructor(t){this.options=t,this.rangeHighlightDecorationId=void 0}provide(t,i){var e;const s=new Zi;t.canAcceptInBackground=!!(!((e=this.options)===null||e===void 0)&&e.canAcceptInBackground),t.matchOnLabel=t.matchOnDescription=t.matchOnDetail=t.sortByLabel=!1;const n=s.add(new ie);return n.value=this.doProvide(t,i),s.add(this.onDidActiveTextEditorControlChange((()=>{n.value=void 0,n.value=this.doProvide(t,i)}))),s}doProvide(t,i){var e;const s=new Zi,n=this.activeTextEditorControl;if(n&&this.canProvideWithTextEditor(n)){const o={editor:n},r=WX(n);if(r){let t=(e=n.saveViewState())!==null&&e!==void 0?e:void 0;s.add(r.onDidChangeCursorPosition((()=>{var i;t=(i=n.saveViewState())!==null&&i!==void 0?i:void 0}))),o.restoreViewState=()=>{t&&n===this.activeTextEditorControl&&n.restoreViewState(t)},s.add(Gi(i.onCancellationRequested)((()=>{var t;return(t=o.restoreViewState)===null||t===void 0?void 0:t.call(o)})))}s.add(qi((()=>this.clearDecorations(n)))),s.add(this.provideWithTextEditor(o,t,i))}else s.add(this.provideWithoutTextEditor(t,i));return s}canProvideWithTextEditor(t){return!0}gotoLocation({editor:t},i){t.setSelection(i.range,"code.jump"),t.revealRangeInCenter(i.range,0),i.preserveFocus||t.focus();const e=t.getModel();e&&"getLineContent"in e&&aw(`${e.getLineContent(i.range.startLineNumber)}`)}getModel(t){var i;return jX(t)?(i=t.getModel())===null||i===void 0?void 0:i.modified:t.getModel()}addDecorations(t,i){t.changeDecorations((t=>{const e=[];this.rangeHighlightDecorationId&&(e.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),e.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const s=[{range:i,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:i,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Ik(fx),position:ig.Full}}}],[n,o]=t.deltaDecorations(e,s);this.rangeHighlightDecorationId={rangeHighlightId:n,overviewRulerDecorationId:o}}))}clearDecorations(t){const i=this.rangeHighlightDecorationId;i&&(t.changeDecorations((t=>{t.deltaDecorations([i.overviewRulerDecorationId,i.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}}class Vht extends _ht{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(t){const i=st(0,"Open a text editor first to go to a line.");return t.items=[{label:i}],t.ariaLabel=i,te.None}provideWithTextEditor(t,i,e){const s=t.editor,n=new Zi;n.add(i.onDidAccept((e=>{const[n]=i.selectedItems;if(n){if(!this.isValidLineNumber(s,n.lineNumber))return;this.gotoLocation(t,{range:this.toRange(n.lineNumber,n.column),keyMods:i.keyMods,preserveFocus:e.inBackground}),e.inBackground||i.hide()}})));const o=()=>{const t=this.parsePosition(s,i.value.trim().substr(Vht.PREFIX.length)),e=this.getPickLabel(s,t.lineNumber,t.column);if(i.items=[{lineNumber:t.lineNumber,column:t.column,label:e}],i.ariaLabel=e,!this.isValidLineNumber(s,t.lineNumber))return void this.clearDecorations(s);const n=this.toRange(t.lineNumber,t.column);s.revealRangeInCenter(n,0),this.addDecorations(s,n)};o(),n.add(i.onDidChangeValue((()=>o())));const r=WX(s);return r&&r.getOptions().get(68).renderType===2&&(r.updateOptions({lineNumbers:"on"}),n.add(qi((()=>r.updateOptions({lineNumbers:"relative"}))))),n}toRange(t=1,i=1){return{startLineNumber:t,startColumn:i,endLineNumber:t,endColumn:i}}parsePosition(t,i){const e=i.split(/,|:|#/).map((t=>parseInt(t,10))).filter((t=>!isNaN(t))),s=this.lineCount(t)+1;return{lineNumber:e[0]>0?e[0]:s+e[0],column:e[1]}}getPickLabel(t,i,e){if(this.isValidLineNumber(t,i))return this.isValidColumn(t,i,e)?st(0,"Go to line {0} and character {1}.",i,e):st(0,"Go to line {0}.",i);const s=t.getPosition()||{lineNumber:1,column:1},n=this.lineCount(t);return n>1?st(0,"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",s.lineNumber,s.column,n):st(0,"Current Line: {0}, Character: {1}. Type a line number to navigate to.",s.lineNumber,s.column)}isValidLineNumber(t,i){return!(!i||typeof i!="number")&&i>0&&i<=this.lineCount(t)}isValidColumn(t,i,e){if(!e||typeof e!="number")return!1;const s=this.getModel(t);if(!s)return!1;const n={lineNumber:i,column:e};return s.validatePosition(n).equals(n)}lineCount(t){var i,e;return(e=(i=this.getModel(t))===null||i===void 0?void 0:i.getLineCount())!==null&&e!==void 0?e:0}}Vht.PREFIX=":";var Jht=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Ght=function(t,i){return function(e,s){i(e,s,t)}};let Kht=class extends Vht{constructor(t){super(),this.editorService=t,this.onDidActiveTextEditorControlChange=he.None}get activeTextEditorControl(){var t;return(t=this.editorService.getFocusedCodeEditor())!==null&&t!==void 0?t:void 0}};Kht=Jht([Ght(0,Ua)],Kht);let $ht=class t extends vu{constructor(){super({id:t.ID,label:UO.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:QC.focus,primary:2085,mac:{primary:293},weight:100}})}run(t){t.get(kP).quickAccess.show(Kht.PREFIX)}};$ht.ID="editor.action.gotoLine",Cu($ht),Vl.as(mP).registerQuickAccessProvider({ctor:Kht,prefix:Kht.PREFIX,helpEntries:[{description:UO.gotoLineActionLabel,commandId:$ht.ID}]});const Xht=[void 0,[]];function qht(t,i,e=0,s=0){const n=i;return n.values&&n.values.length>1?function(t,i,e,s){let n=0;const o=[];for(const r of i){const[i,h]=Zht(t,r,e,s);if(typeof i!="number")return Xht;n+=i,o.push(...h)}return[n,tct(o)]}(t,n.values,e,s):Zht(t,i,e,s)}function Zht(t,i,e,s){const n=bN(i.original,i.originalLowercase,e,t,t.toLowerCase(),s,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return n?[n[0],rN(n)]:Xht}function tct(t){const i=t.sort(((t,i)=>t.start-i.start)),e=[];let s;for(const t of i)s&&ict(s,t)?(s.start=Math.min(s.start,t.start),s.end=Math.max(s.end,t.end)):(s=t,e.push(t));return e}function ict(t,i){return!(t.end<i.start)&&!(i.end<t.start)}function ect(t){return t.startsWith('"')&&t.endsWith('"')}const sct=" ";function nct(t){typeof t!="string"&&(t="");const i=t.toLowerCase(),{pathNormalized:e,normalized:s,normalizedLowercase:n}=oct(t),o=e.indexOf(rs)>=0,r=ect(t);let h;const c=t.split(sct);if(c.length>1)for(const t of c){const i=ect(t),{pathNormalized:e,normalized:s,normalizedLowercase:n}=oct(t);s&&(h||(h=[]),h.push({original:t,originalLowercase:t.toLowerCase(),pathNormalized:e,normalized:s,normalizedLowercase:n,expectContiguousMatch:i}))}return{original:t,originalLowercase:i,pathNormalized:e,normalized:s,normalizedLowercase:n,values:h,containsPathSeparator:o,expectContiguousMatch:r}}function oct(t){let i;i=yt?t.replace(/\//g,rs):t.replace(/\\/g,rs);const e=(s=i,s.replace(/\*/g,"")).replace(/\s|"/g,"");var s;return{pathNormalized:i,normalized:e,normalizedLowercase:e.toLowerCase()}}function rct(t){return Array.isArray(t)?nct(t.map((t=>t.original)).join(sct)):nct(t.original)}var hct,cct=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},act=function(t,i){return function(e,s){i(e,s,t)}};let lct=hct=class extends _ht{constructor(t,i,e=Object.create(null)){super(e),this._languageFeaturesService=t,this._outlineModelService=i,this.options=e,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(t){return this.provideLabelPick(t,st(0,"To go to a symbol, first open a text editor with symbol information.")),te.None}provideWithTextEditor(t,i,e){const s=t.editor,n=this.getModel(s);return n?this._languageFeaturesService.documentSymbolProvider.has(n)?this.doProvideWithEditorSymbols(t,n,i,e):this.doProvideWithoutEditorSymbols(t,n,i,e):te.None}doProvideWithoutEditorSymbols(t,i,e,s){const n=new Zi;return this.provideLabelPick(e,st(0,"The active text editor does not provide symbol information.")),(async()=>await this.waitForLanguageSymbolRegistry(i,n)&&!s.isCancellationRequested&&n.add(this.doProvideWithEditorSymbols(t,i,e,s)))(),n}provideLabelPick(t,i){t.items=[{label:i,index:0,kind:14}],t.ariaLabel=i}async waitForLanguageSymbolRegistry(t,i){if(this._languageFeaturesService.documentSymbolProvider.has(t))return!0;const e=new Fr,s=i.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((()=>{this._languageFeaturesService.documentSymbolProvider.has(t)&&(s.dispose(),e.complete(!0))})));return i.add(qi((()=>e.complete(!1)))),e.p}doProvideWithEditorSymbols(t,i,e,s){var n;const o=t.editor,r=new Zi;r.add(e.onDidAccept((i=>{const[s]=e.selectedItems;s&&s.range&&(this.gotoLocation(t,{range:s.range.selection,keyMods:e.keyMods,preserveFocus:i.inBackground}),i.inBackground||e.hide())}))),r.add(e.onDidTriggerItemButton((({item:i})=>{i&&i.range&&(this.gotoLocation(t,{range:i.range.selection,keyMods:e.keyMods,forceSideBySide:!0}),e.hide())})));const h=this.getDocumentSymbols(i,s);let c;const a=async t=>{c==null||c.dispose(!0),e.busy=!1,c=new xe(s),e.busy=!0;try{const i=nct(e.value.substr(hct.PREFIX.length).trim()),n=await this.doGetSymbolPicks(h,i,void 0,c.token);if(s.isCancellationRequested)return;if(n.length>0){if(e.items=n,t&&i.original.length===0){const i=xg(n,(i=>!!(i.type!=="separator"&&i.range&&Es.containsPosition(i.range.decoration,t))));i&&(e.activeItems=[i])}}else i.original.length>0?this.provideLabelPick(e,st(0,"No matching editor symbols")):this.provideLabelPick(e,st(0,"No editor symbols"))}finally{s.isCancellationRequested||(e.busy=!1)}};return r.add(e.onDidChangeValue((()=>a(void 0)))),a((n=o.getSelection())===null||n===void 0?void 0:n.getPosition()),r.add(e.onDidChangeActive((()=>{const[t]=e.activeItems;t&&t.range&&(o.revealRangeInCenter(t.range.selection,0),this.addDecorations(o,t.range.decoration))}))),r}async doGetSymbolPicks(t,i,e,s){var n,o;const r=await t;if(s.isCancellationRequested)return[];const h=i.original.indexOf(hct.SCOPE_PREFIX)===0,c=h?1:0;let a,l,u;i.values&&i.values.length>1?(a=rct(i.values[0]),l=rct(i.values.slice(1))):a=i;const d=(o=(n=this.options)===null||n===void 0?void 0:n.openSideBySideDirection)===null||o===void 0?void 0:o.call(n);d&&(u=[{iconClass:d==="right"?Ka.asClassName(Fs.splitHorizontal):Ka.asClassName(Fs.splitVertical),tooltip:st(0,d==="right"?"Open to the Side":"Open to the Bottom")}]);const f=[];for(let t=0;t<r.length;t++){const s=r[t],n=qn(s.name),o=`$(${js.toIcon(s.kind).id}) ${n}`,h=o.length-n.length;let d,p,w,m,v=s.containerName;if(e!=null&&e.extraContainerLabel&&(v=v?`${e.extraContainerLabel} • ${v}`:e.extraContainerLabel),i.original.length>c){let t=!1;if(a!==i&&([d,p]=qht(o,{...i,values:void 0},c,h),typeof d=="number"&&(t=!0)),typeof d!="number"&&([d,p]=qht(o,a,c,h),typeof d!="number"))continue;if(!t&&l){if(v&&l.original.length>0&&([w,m]=qht(v,l)),typeof w!="number")continue;typeof d=="number"&&(d+=w)}}const b=s.tags&&s.tags.indexOf(1)>=0;f.push({index:t,kind:s.kind,score:d,label:o,ariaLabel:(g=s.name,A=s.kind,st(0,"{0} ({1})",g,Ps[A])),description:v,highlights:b?void 0:{label:p,description:m},range:{selection:Es.collapseToStart(s.selectionRange),decoration:s.range},strikethrough:b,buttons:u})}var g,A;const p=f.sort(((t,i)=>h?this.compareByKindAndScore(t,i):this.compareByScore(t,i)));let w=[];if(h){let t=function(){e&&typeof i=="number"&&s>0&&(e.label=Kn(dct[i]||uct,s))},i,e,s=0;for(const n of p)i!==n.kind?(t(),i=n.kind,s=1,e={type:"separator"},w.push(e)):s++,w.push(n);t()}else p.length>0&&(w=[{label:st(0,"symbols ({0})",f.length),type:"separator"},...p]);return w}compareByScore(t,i){if(typeof t.score!="number"&&typeof i.score=="number")return 1;if(typeof t.score=="number"&&typeof i.score!="number")return-1;if(typeof t.score=="number"&&typeof i.score=="number"){if(t.score>i.score)return-1;if(t.score<i.score)return 1}return t.index<i.index?-1:t.index>i.index?1:0}compareByKindAndScore(t,i){const e=dct[t.kind]||uct,s=dct[i.kind]||uct,n=e.localeCompare(s);return n===0?this.compareByScore(t,i):n}async getDocumentSymbols(t,i){const e=await this._outlineModelService.getOrCreate(t,i);return i.isCancellationRequested?[]:e.asListOfDocumentSymbols()}};lct.PREFIX="@",lct.SCOPE_PREFIX=":",lct.PREFIX_BY_CATEGORY=`${hct.PREFIX}${hct.SCOPE_PREFIX}`,lct=hct=cct([act(0,jA),act(1,z7)],lct);const uct=st(0,"properties ({0})"),dct={5:st(0,"methods ({0})"),11:st(0,"functions ({0})"),8:st(0,"constructors ({0})"),12:st(0,"variables ({0})"),4:st(0,"classes ({0})"),22:st(0,"structs ({0})"),23:st(0,"events ({0})"),24:st(0,"operators ({0})"),10:st(0,"interfaces ({0})"),2:st(0,"namespaces ({0})"),3:st(0,"packages ({0})"),25:st(0,"type parameters ({0})"),1:st(0,"modules ({0})"),6:st(0,"properties ({0})"),9:st(0,"enumerations ({0})"),21:st(0,"enumeration members ({0})"),14:st(0,"strings ({0})"),0:st(0,"files ({0})"),17:st(0,"arrays ({0})"),15:st(0,"numbers ({0})"),16:st(0,"booleans ({0})"),18:st(0,"objects ({0})"),19:st(0,"keys ({0})"),7:st(0,"fields ({0})"),13:st(0,"constants ({0})")};var fct=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},gct=function(t,i){return function(e,s){i(e,s,t)}};let Act=class extends lct{constructor(t,i,e){super(i,e),this.editorService=t,this.onDidActiveTextEditorControlChange=he.None}get activeTextEditorControl(){var t;return(t=this.editorService.getFocusedCodeEditor())!==null&&t!==void 0?t:void 0}};Act=fct([gct(0,Ua),gct(1,jA),gct(2,z7)],Act);class pct extends vu{constructor(){super({id:pct.ID,label:jO.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:QC.hasDocumentSymbolProvider,kbOpts:{kbExpr:QC.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(t){t.get(kP).quickAccess.show(lct.PREFIX,{itemActivation:yP.NONE})}}function wct(t,i){return i&&(t.stack||t.stacktrace)?st(0,"{0}: {1}",vct(t),mct(t.stack)||mct(t.stacktrace)):vct(t)}function mct(t){return Array.isArray(t)?t.join(`\n`):t}function vct(t){return t.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${t.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof t.code=="string"&&typeof t.errno=="number"&&typeof t.syscall=="string"?st(0,"A system error occurred ({0})",t.message):t.message||st(0,"An unknown error occurred. Please consult the log for more details.")}function bct(t=null,i=!1){if(!t)return st(0,"An unknown error occurred. Please consult the log for more details.");if(Array.isArray(t)){const e=f(t),s=bct(e[0],i);return e.length>1?st(0,"{0} ({1} errors in total)",s,e.length):s}if(N(t))return t;if(t.detail){const e=t.detail;if(e.error)return wct(e.error,i);if(e.exception)return wct(e.exception,i)}return t.stack?wct(t,i):t.message?t.message:st(0,"An unknown error occurred. Please consult the log for more details.")}pct.ID="editor.action.quickOutline",Cu(pct),Vl.as(mP).registerQuickAccessProvider({ctor:Act,prefix:lct.PREFIX,helpEntries:[{description:jO.quickOutlineActionLabel,prefix:lct.PREFIX,commandId:pct.ID},{description:jO.quickOutlineByCategoryActionLabel,prefix:lct.PREFIX_BY_CATEGORY}]});class yct{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(t,i){const e=this.computeEmbedding(t),s=new Map,n=[];for(const[t,o]of this.documents){if(i.isCancellationRequested)return[];for(const i of o.chunks){const o=this.computeSimilarityScore(i,e,s);o>0&&n.push({key:t,score:o})}}return n}static termFrequencies(t){return function(t){var i;const e=new Map;for(const s of t)e.set(s,((i=e.get(s))!==null&&i!==void 0?i:0)+1);return e}(yct.splitTerms(t))}static*splitTerms(t){const i=t=>t.toLowerCase();for(const[e]of t.matchAll(new RegExp("\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b","gu"))){yield i(e);const t=e.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(t.length>1)for(const e of t)e.length>2&&new RegExp("\\p{Letter}{3,}","gu").test(e)&&(yield i(e))}}updateDocuments(t){var i;for(const{key:i}of t)this.deleteDocument(i);for(const e of t){const t=[];for(const s of e.textChunks){const e=yct.termFrequencies(s);for(const t of e.keys())this.chunkOccurrences.set(t,((i=this.chunkOccurrences.get(t))!==null&&i!==void 0?i:0)+1);t.push({text:s,tf:e})}this.chunkCount+=t.length,this.documents.set(e.key,{chunks:t})}return this}deleteDocument(t){const i=this.documents.get(t);if(i){this.documents.delete(t),this.chunkCount-=i.chunks.length;for(const t of i.chunks)for(const i of t.tf.keys()){const t=this.chunkOccurrences.get(i);if(typeof t=="number"){const e=t-1;e<=0?this.chunkOccurrences.delete(i):this.chunkOccurrences.set(i,e)}}}}computeSimilarityScore(t,i,e){let s=0;for(const[n,o]of Object.entries(i)){const i=t.tf.get(n);if(!i)continue;let r=e.get(n);typeof r!="number"&&(r=this.computeIdf(n),e.set(n,r)),s+=i*r*o}return s}computeEmbedding(t){const i=yct.termFrequencies(t);return this.computeTfidf(i)}computeIdf(t){var i;const e=(i=this.chunkOccurrences.get(t))!==null&&i!==void 0?i:0;return e>0?Math.log((this.chunkCount+1)/e):0}computeTfidf(t){const i=Object.create(null);for(const[e,s]of t){const t=this.computeIdf(e);t>0&&(i[e]=s*t)}return i}}var kct;function xct(t){const i=t;return Array.isArray(i.items)}function Cct(t){const i=t;return!!i.picks&&i.additionalPicks instanceof Promise}(function(t){t[t.NO_ACTION=0]="NO_ACTION",t[t.CLOSE_PICKER=1]="CLOSE_PICKER",t[t.REFRESH_PICKER=2]="REFRESH_PICKER",t[t.REMOVE_ITEM=3]="REMOVE_ITEM"})(kct||(kct={}));class Ect extends te{constructor(t,i){super(),this.prefix=t,this.options=i}provide(t,i,e){var s;const n=new Zi;let o;t.canAcceptInBackground=!!(!((s=this.options)===null||s===void 0)&&s.canAcceptInBackground),t.matchOnLabel=t.matchOnDescription=t.matchOnDetail=t.sortByLabel=!1;const r=n.add(new ie),h=async()=>{var s;const n=r.value=new Zi;o==null||o.dispose(!0),t.busy=!1,o=new xe(i);const h=o.token;let c=t.value.substring(this.prefix.length);!((s=this.options)===null||s===void 0)&&s.shouldSkipTrimPickFilter||(c=c.trim());const a=this._getPicks(c,n,h,e),l=(i,e)=>{var s;let n,o;if(xct(i)?(n=i.items,o=i.active):n=i,n.length===0){if(e)return!1;(c.length>0||t.hideInput)&&(!((s=this.options)===null||s===void 0)&&s.noResultsPick)&&(n=V(this.options.noResultsPick)?[this.options.noResultsPick(c)]:[this.options.noResultsPick])}return t.items=n,o&&(t.activeItems=[o]),!0},u=async i=>{let e=!1,s=!1;await Promise.all([(async()=>{typeof i.mergeDelay=="number"&&(await br(i.mergeDelay),h.isCancellationRequested)||s||(e=l(i.picks,!0))})(),(async()=>{t.busy=!0;try{const s=await i.additionalPicks;if(h.isCancellationRequested)return;let n,o,r,c;if(xct(i.picks)?(n=i.picks.items,o=i.picks.active):n=i.picks,xct(s)?(r=s.items,c=s.active):r=s,r.length>0||!e){let i;if(!o&&!c){const e=t.activeItems[0];e&&n.indexOf(e)!==-1&&(i=e)}l({items:[...n,...r],active:o||c||i})}}finally{h.isCancellationRequested||(t.busy=!1),s=!0}})()])};if(a!==null)if(Cct(a))await u(a);else if(a instanceof Promise){t.busy=!0;try{const t=await a;if(h.isCancellationRequested)return;Cct(t)?await u(t):l(t)}finally{h.isCancellationRequested||(t.busy=!1)}}else l(a)};n.add(t.onDidChangeValue((()=>h()))),h(),n.add(t.onDidAccept((i=>{const[e]=t.selectedItems;typeof(e==null?void 0:e.accept)=="function"&&(i.inBackground||t.hide(),e.accept(t.keyMods,i))})));const c=async(e,s)=>{var n,o;if(typeof s.trigger!="function")return;const r=(o=(n=s.buttons)===null||n===void 0?void 0:n.indexOf(e))!==null&&o!==void 0?o:-1;if(r>=0){const e=s.trigger(r,t.keyMods),n=typeof e=="number"?e:await e;if(i.isCancellationRequested)return;switch(n){case kct.NO_ACTION:break;case kct.CLOSE_PICKER:t.hide();break;case kct.REFRESH_PICKER:h();break;case kct.REMOVE_ITEM:{const i=t.items.indexOf(s);if(i!==-1){const e=t.items.slice(),s=e.splice(i,1),n=t.activeItems.filter((t=>t!==s[0])),o=t.keepScrollPosition;t.keepScrollPosition=!0,t.items=e,n&&(t.activeItems=n),t.keepScrollPosition=o}break}}}};return n.add(t.onDidTriggerItemButton((({button:t,item:i})=>c(t,i)))),n.add(t.onDidTriggerSeparatorButton((({button:t,separator:i})=>c(t,i)))),n}}var Bct,Dct,Mct=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Sct=function(t,i){return function(e,s){i(e,s,t)}};let Fct=Bct=class extends Ect{constructor(t,i,e,s,n,o){super(Bct.PREFIX,t),this.instantiationService=i,this.keybindingService=e,this.commandService=s,this.telemetryService=n,this.dialogService=o,this.commandsHistory=this._register(this.instantiationService.createInstance(Ict)),this.options=t}async _getPicks(t,i,e,s){var n,o,r,h;const c=await this.getCommandPicks(e);if(e.isCancellationRequested)return[];const a=Gi((()=>{const i=new yct;return i.updateDocuments(c.map((t=>({key:t.commandId,textChunks:[this.getTfIdfChunk(t)]})))),function(t){var i,e;const s=t.slice(0);s.sort(((t,i)=>i.score-t.score));const n=(e=(i=s[0])===null||i===void 0?void 0:i.score)!==null&&e!==void 0?e:0;if(n>0)for(const t of s)t.score/=n;return s}(i.calculateScores(t,e)).filter((t=>t.score>Bct.TFIDF_THRESHOLD)).slice(0,Bct.TFIDF_MAX_RESULTS)})),l=[];for(const i of c){const s=(n=Bct.WORD_FILTER(t,i.label))!==null&&n!==void 0?n:void 0,r=i.commandAlias&&(o=Bct.WORD_FILTER(t,i.commandAlias))!==null&&o!==void 0?o:void 0;if(s||r)i.highlights={label:s,detail:this.options.showAlias?r:void 0},l.push(i);else if(t===i.commandId)l.push(i);else if(t.length>=3){const t=a();if(e.isCancellationRequested)return[];const s=t.find((t=>t.key===i.commandId));s&&(i.tfIdfScore=s.score,l.push(i))}}const u=new Map;for(const t of l){const i=u.get(t.label);i?(t.description=t.commandId,i.description=i.commandId):u.set(t.label,t)}l.sort(((t,i)=>{if(t.tfIdfScore&&i.tfIdfScore)return t.tfIdfScore===i.tfIdfScore?t.label.localeCompare(i.label):i.tfIdfScore-t.tfIdfScore;if(t.tfIdfScore)return 1;if(i.tfIdfScore)return-1;const e=this.commandsHistory.peek(t.commandId),s=this.commandsHistory.peek(i.commandId);if(e&&s)return e>s?-1:1;if(e)return-1;if(s)return 1;if(this.options.suggestedCommandIds){const e=this.options.suggestedCommandIds.has(t.commandId),s=this.options.suggestedCommandIds.has(i.commandId);if(e&&s)return 0;if(e)return-1;if(s)return 1}return t.label.localeCompare(i.label)}));const d=[];let f=!1,g=!0,A=!!this.options.suggestedCommandIds;for(let t=0;t<l.length;t++){const i=l[t];t===0&&this.commandsHistory.peek(i.commandId)&&(d.push({type:"separator",label:st(0,"recently used")}),f=!0),g&&i.tfIdfScore!==void 0&&(d.push({type:"separator",label:st(0,"similar commands")}),g=!1),A&&i.tfIdfScore===void 0&&!this.commandsHistory.peek(i.commandId)&&(!((r=this.options.suggestedCommandIds)===null||r===void 0)&&r.has(i.commandId))&&(d.push({type:"separator",label:st(0,"commonly used")}),f=!0,A=!1),!f||i.tfIdfScore!==void 0||this.commandsHistory.peek(i.commandId)||!((h=this.options.suggestedCommandIds)===null||h===void 0)&&h.has(i.commandId)||(d.push({type:"separator",label:st(0,"other commands")}),f=!1),d.push(this.toCommandPick(i,s))}return this.hasAdditionalCommandPicks(t,e)?{picks:d,additionalPicks:(async()=>{var i;const n=await this.getAdditionalCommandPicks(c,l,t,e);if(e.isCancellationRequested)return[];const o=n.map((t=>this.toCommandPick(t,s)));return g&&((i=o[0])===null||i===void 0?void 0:i.type)!=="separator"&&o.unshift({type:"separator",label:st(0,"similar commands")}),o})()}:d}toCommandPick(t,i){if(t.type==="separator")return t;const e=this.keybindingService.lookupKeybinding(t.commandId),s=e?st(0,"{0}, {1}",t.label,e.getAriaLabel()):t.label;return{...t,ariaLabel:s,detail:this.options.showAlias&&t.commandAlias!==t.label?t.commandAlias:void 0,keybinding:e,accept:async()=>{var e,s;this.commandsHistory.push(t.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:t.commandId,from:(e=i==null?void 0:i.from)!==null&&e!==void 0?e:"quick open"});try{!((s=t.args)===null||s===void 0)&&s.length?await this.commandService.executeCommand(t.commandId,...t.args):await this.commandService.executeCommand(t.commandId)}catch(i){Pi(i)||this.dialogService.error(st(0,"Command '{0}' resulted in an error",t.label),bct(i))}}}}getTfIdfChunk({label:t,commandAlias:i,commandDescription:e}){let s=t;return i&&i!==t&&(s+=` - ${i}`),e&&e.value!==t&&(s+=` - ${e.value===e.original?e.value:`${e.value} (${e.original})`}`),s}};Fct.PREFIX=">",Fct.TFIDF_THRESHOLD=.5,Fct.TFIDF_MAX_RESULTS=5,Fct.WORD_FILTER=LT(RT,(function(t,i,e=!1){if(!i||i.length===0)return null;let s=null,n=0;for(t=t.toLowerCase(),i=i.toLowerCase();n<i.length&&(s=qT(t,i,0,n,e),s===null);)n=ZT(i,n+1);return s}),NT),Fct=Bct=Mct([Sct(1,Oa),Sct(2,Hx),Sct(3,$a),Sct(4,cu),Sct(5,VL)],Fct);let Ict=Dct=class extends te{constructor(t,i,e){super(),this.storageService=t,this.configurationService=i,this.logService=e,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((t=>this.updateConfiguration(t)))),this._register(this.storageService.onWillSaveState((t=>{t.reason===aH.SHUTDOWN&&this.saveState()})))}updateConfiguration(t){t&&!t.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=Dct.getConfiguredCommandHistoryLength(this.configurationService),Dct.cache&&Dct.cache.limit!==this.configuredCommandsHistoryLength&&(Dct.cache.limit=this.configuredCommandsHistoryLength,Dct.hasChanges=!0))}load(){const t=this.storageService.get(Dct.PREF_KEY_CACHE,0);let i;if(t)try{i=JSON.parse(t)}catch(t){this.logService.error(`[CommandsHistory] invalid data: ${t}`)}const e=Dct.cache=new Kf(this.configuredCommandsHistoryLength,1);if(i){let t;t=i.usesLRU?i.entries:i.entries.sort(((t,i)=>t.value-i.value)),t.forEach((t=>e.set(t.key,t.value)))}Dct.counter=this.storageService.getNumber(Dct.PREF_KEY_COUNTER,0,Dct.counter)}push(t){Dct.cache&&(Dct.cache.set(t,Dct.counter++),Dct.hasChanges=!0)}peek(t){var i;return(i=Dct.cache)===null||i===void 0?void 0:i.peek(t)}saveState(){if(!Dct.cache||!Dct.hasChanges)return;const t={usesLRU:!0,entries:[]};Dct.cache.forEach(((i,e)=>t.entries.push({key:e,value:i}))),this.storageService.store(Dct.PREF_KEY_CACHE,JSON.stringify(t),0,0),this.storageService.store(Dct.PREF_KEY_COUNTER,Dct.counter,0,0),Dct.hasChanges=!1}static getConfiguredCommandHistoryLength(t){var i,e;const s=(e=(i=t.getValue().workbench)===null||i===void 0?void 0:i.commandPalette)===null||e===void 0?void 0:e.history;return typeof s=="number"?s:Dct.DEFAULT_COMMANDS_HISTORY_LENGTH}};Ict.DEFAULT_COMMANDS_HISTORY_LENGTH=50,Ict.PREF_KEY_CACHE="commandPalette.mru.cache",Ict.PREF_KEY_COUNTER="commandPalette.mru.counter",Ict.counter=1,Ict.hasChanges=!1,Ict=Dct=Mct([Sct(0,cH),Sct(1,Id),Sct(2,au)],Ict);class Lct extends Fct{constructor(t,i,e,s,n,o){super(t,i,e,s,n,o)}getCodeEditorCommandPicks(){const t=this.activeTextEditorControl;if(!t)return[];const i=[];for(const e of t.getSupportedActions())i.push({commandId:e.id,commandAlias:e.alias,label:SN(e.label)||e.id});return i}}var Rct=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},Tct=function(t,i){return function(e,s){i(e,s,t)}};let Nct=class extends Lct{get activeTextEditorControl(){var t;return(t=this.codeEditorService.getFocusedCodeEditor())!==null&&t!==void 0?t:void 0}constructor(t,i,e,s,n,o){super({showAlias:!1},t,e,s,n,o),this.codeEditorService=i}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}};Nct=Rct([Tct(0,Oa),Tct(1,Ua),Tct(2,Hx),Tct(3,$a),Tct(4,cu),Tct(5,VL)],Nct);class Qct extends vu{constructor(){super({id:Qct.ID,label:PO.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:QC.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(t){t.get(kP).quickAccess.show(Nct.PREFIX)}}Qct.ID="editor.action.quickCommand",Cu(Qct),Vl.as(mP).registerQuickAccessProvider({ctor:Nct,prefix:Nct.PREFIX,helpEntries:[{description:PO.quickCommandHelp,commandId:Qct.ID}]});var Oct=function(t,i,e,s){var n,o=arguments.length,r=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r},zct=function(t,i){return function(e,s){i(e,s,t)}};let Uct=class extends a3{constructor(t,i,e,s,n,o,r){super(!0,t,i,e,s,n,o,r)}};Uct=Oct([zct(1,Nl),zct(2,Ua),zct(3,wL),zct(4,Oa),zct(5,cH),zct(6,Id)],Uct),Bu(a3.ID,Uct,4);Cu(class extends vu{constructor(){super({id:"editor.action.toggleHighContrast",label:YO.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(t,i){const e=t.get(gV),s=e.getColorTheme();dy(s.type)?(e.setTheme(this._originalThemeName||(fy(s.type)?oV:nV)),this._originalThemeName=null):(e.setTheme(fy(s.type)?rV:hV),this._originalThemeName=s.themeName)}});const Hct=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:iq,Emitter:eq,KeyCode:sq,KeyMod:nq,MarkerSeverity:aq,MarkerTag:lq,Position:oq,Range:rq,Selection:hq,SelectionDirection:cq,Token:dq,Uri:uq,editor:fq,languages:gq},Symbol.toStringTag,{value:"Module"}));function Pct(t){return new Worker("/assets/editor.worker-Bu4SOCSe.js",{name:t==null?void 0:t.name})}function jct(t){return new Worker("/assets/json.worker-COfS93H5.js",{name:t==null?void 0:t.name})}function Wct(t){return new Worker("/assets/css.worker-DPGEqLhk.js",{name:t==null?void 0:t.name})}function Yct(t){return new Worker("/assets/html.worker-FARQZwxe.js",{name:t==null?void 0:t.name})}function _ct(t){return new Worker("/assets/ts.worker-CbzFuCRc.js",{name:t==null?void 0:t.name})}function Vct(t){return new Worker("/assets/yaml.worker-tu3gFvVT.js",{name:t==null?void 0:t.name})}function Jct(t,i,e){const s=new Map,n=t=>{if(i==="*")return!0;const e=t.getLanguageId();return Array.isArray(i)?i.includes(e):i===e},o=async i=>{const s=i.getVersionId(),o=await e.provideMarkerData(i);s===i.getVersionId()&&!i.isDisposed()&&n(i)&&t.editor.setModelMarkers(i,e.owner,o??[])},r=t=>{if(!n(t))return;let i;s.set(t,t.onDidChangeContent((()=>{clearTimeout(i),i=setTimeout((()=>{o(t)}),500)}))),o(t)},h=i=>{t.editor.setModelMarkers(i,e.owner,[]);const n=s.get(i);n&&(n.dispose(),s.delete(i))},c=t.editor.onDidCreateModel(r),a=t.editor.onWillDisposeModel((t=>{var i;h(t),(i=e.doReset)==null||i.call(e,t)})),l=t.editor.onDidChangeModelLanguage((t=>{var i;h(t.model),r(t.model),(i=e.doReset)==null||i.call(e,t.model)}));for(const i of t.editor.getModels())r(i);return{dispose(){for(const t of s.keys())h(t);c.dispose(),a.dispose(),l.dispose()},async revalidate(){await Promise.all(t.editor.getModels().map(o))}}}var Gct;(()=>{var t={470:t=>{function i(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function e(t,i){for(var e,s="",n=0,o=-1,r=0,h=0;h<=t.length;++h){if(h<t.length)e=t.charCodeAt(h);else{if(e===47)break;e=47}if(e===47){if(!(o===h-1||r===1))if(o!==h-1&&r===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var c=s.lastIndexOf("/");if(c!==s.length-1){c===-1?(s="",n=0):n=(s=s.slice(0,c)).length-1-s.lastIndexOf("/"),o=h,r=0;continue}}else if(s.length===2||s.length===1){s="",n=0,o=h,r=0;continue}}i&&(s.length>0?s+="/..":s="..",n=2)}else s.length>0?s+="/"+t.slice(o+1,h):s=t.slice(o+1,h),n=h-o-1;o=h,r=0}else e===46&&r!==-1?++r:r=-1}return s}var s={resolve:function(){for(var t,s="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var r;o>=0?r=arguments[o]:(t===void 0&&(t=process.cwd()),r=t),i(r),r.length!==0&&(s=r+"/"+s,n=r.charCodeAt(0)===47)}return s=e(s,!n),n?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(t){if(i(t),t.length===0)return".";var s=t.charCodeAt(0)===47,n=t.charCodeAt(t.length-1)===47;return(t=e(t,!s)).length!==0||s||(t="."),t.length>0&&n&&(t+="/"),s?"/"+t:t},isAbsolute:function(t){return i(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var n=arguments[e];i(n),n.length>0&&(t===void 0?t=n:t+="/"+n)}return t===void 0?".":s.normalize(t)},relative:function(t,e){if(i(t),i(e),t===e||(t=s.resolve(t))===(e=s.resolve(e)))return"";for(var n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var o=t.length,r=o-n,h=1;h<e.length&&e.charCodeAt(h)===47;++h);for(var c=e.length-h,a=r<c?r:c,l=-1,u=0;u<=a;++u){if(u===a){if(c>a){if(e.charCodeAt(h+u)===47)return e.slice(h+u+1);if(u===0)return e.slice(h+u)}else r>a&&(t.charCodeAt(n+u)===47?l=u:u===0&&(l=0));break}var d=t.charCodeAt(n+u);if(d!==e.charCodeAt(h+u))break;d===47&&(l=u)}var f="";for(u=n+l+1;u<=o;++u)u!==o&&t.charCodeAt(u)!==47||(f.length===0?f+="..":f+="/..");return f.length>0?f+e.slice(h+l):(h+=l,e.charCodeAt(h)===47&&++h,e.slice(h))},_makeLong:function(t){return t},dirname:function(t){if(i(t),t.length===0)return".";for(var e=t.charCodeAt(0),s=e===47,n=-1,o=!0,r=t.length-1;r>=1;--r)if((e=t.charCodeAt(r))===47){if(!o){n=r;break}}else o=!1;return n===-1?s?"/":".":s&&n===1?"//":t.slice(0,n)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');i(t);var s,n=0,o=-1,r=!0;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var h=e.length-1,c=-1;for(s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(a===47){if(!r){n=s+1;break}}else c===-1&&(r=!1,c=s+1),h>=0&&(a===e.charCodeAt(h)?--h==-1&&(o=s):(h=-1,o=c))}return n===o?o=c:o===-1&&(o=t.length),t.slice(n,o)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!r){n=s+1;break}}else o===-1&&(r=!1,o=s+1);return o===-1?"":t.slice(n,o)},extname:function(t){i(t);for(var e=-1,s=0,n=-1,o=!0,r=0,h=t.length-1;h>=0;--h){var c=t.charCodeAt(h);if(c!==47)n===-1&&(o=!1,n=h+1),c===46?e===-1?e=h:r!==1&&(r=1):e!==-1&&(r=-1);else if(!o){s=h+1;break}}return e===-1||n===-1||r===0||r===1&&e===n-1&&e===s+1?"":t.slice(e,n)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,i){var e=i.dir||i.root,s=i.base||(i.name||"")+(i.ext||"");return e?e===i.root?e+s:e+"/"+s:s}(0,t)},parse:function(t){i(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var s,n=t.charCodeAt(0),o=n===47;o?(e.root="/",s=1):s=0;for(var r=-1,h=0,c=-1,a=!0,l=t.length-1,u=0;l>=s;--l)if((n=t.charCodeAt(l))!==47)c===-1&&(a=!1,c=l+1),n===46?r===-1?r=l:u!==1&&(u=1):r!==-1&&(u=-1);else if(!a){h=l+1;break}return r===-1||c===-1||u===0||u===1&&r===c-1&&r===h+1?c!==-1&&(e.base=e.name=h===0&&o?t.slice(1,c):t.slice(h,c)):(h===0&&o?(e.name=t.slice(1,r),e.base=t.slice(1,c)):(e.name=t.slice(h,r),e.base=t.slice(h,c)),e.ext=t.slice(r,c)),h>0?e.dir=t.slice(0,h-1):o&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,t.exports=s}},i={};function e(s){var n=i[s];if(n!==void 0)return n.exports;var o=i[s]={exports:{}};return t[s](o,o.exports,e),o.exports}e.d=(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};(()=>{let t;e.r(s),e.d(s,{URI:()=>u,Utils:()=>E}),typeof process=="object"?t=process.platform==="win32":typeof navigator=="object"&&(t=navigator.userAgent.indexOf("Windows")>=0);const i=/^\w[\w\d+.-]*$/,n=/^\//,r=/^\/\//;function h(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!i.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!n.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(r.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}const c="",a="/",l=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class u{constructor(t,i,e,s,n,r=!1){o(this,"scheme");o(this,"authority");o(this,"path");o(this,"query");o(this,"fragment");typeof t=="object"?(this.scheme=t.scheme||c,this.authority=t.authority||c,this.path=t.path||c,this.query=t.query||c,this.fragment=t.fragment||c):(this.scheme=function(t,i){return t||i?t:"file"}(t,r),this.authority=i||c,this.path=function(t,i){switch(t){case"https":case"http":case"file":i?i[0]!==a&&(i=a+i):i=a}return i}(this.scheme,e||c),this.query=s||c,this.fragment=n||c,h(this,r))}static isUri(t){return t instanceof u||!!t&&typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function"}get fsPath(){return w(this,!1)}with(t){if(!t)return this;let{scheme:i,authority:e,path:s,query:n,fragment:o}=t;return i===void 0?i=this.scheme:i===null&&(i=c),e===void 0?e=this.authority:e===null&&(e=c),s===void 0?s=this.path:s===null&&(s=c),n===void 0?n=this.query:n===null&&(n=c),o===void 0?o=this.fragment:o===null&&(o=c),i===this.scheme&&e===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new f(i,e,s,n,o)}static parse(t,i=!1){const e=l.exec(t);return e?new f(e[2]||c,y(e[4]||c),y(e[5]||c),y(e[7]||c),y(e[9]||c),i):new f(c,c,c,c,c)}static file(i){let e=c;if(t&&(i=i.replace(/\\/g,a)),i[0]===a&&i[1]===a){const t=i.indexOf(a,2);t===-1?(e=i.substring(2),i=a):(e=i.substring(2,t),i=i.substring(t)||a)}return new f("file",e,i,c,c)}static from(t){const i=new f(t.scheme,t.authority,t.path,t.query,t.fragment);return h(i,!0),i}toString(t=!1){return m(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof u)return t;{const i=new f(t);return i._formatted=t.external,i._fsPath=t._sep===d?t.fsPath:null,i}}return t}}const d=t?1:void 0;class f extends u{constructor(){super(...arguments);o(this,"_formatted",null);o(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=w(this,!1)),this._fsPath}toString(t=!1){return t?m(this,!0):(this._formatted||(this._formatted=m(this,!1)),this._formatted)}toJSON(){const t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=d),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t}}const g={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function A(t,i,e){let s,n=-1;for(let o=0;o<t.length;o++){const r=t.charCodeAt(o);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||i&&r===47||e&&r===91||e&&r===93||e&&r===58)n!==-1&&(s+=encodeURIComponent(t.substring(n,o)),n=-1),s!==void 0&&(s+=t.charAt(o));else{s===void 0&&(s=t.substr(0,o));const i=g[r];i!==void 0?(n!==-1&&(s+=encodeURIComponent(t.substring(n,o)),n=-1),s+=i):n===-1&&(n=o)}}return n!==-1&&(s+=encodeURIComponent(t.substring(n))),s!==void 0?s:t}function p(t){let i;for(let e=0;e<t.length;e++){const s=t.charCodeAt(e);s===35||s===63?(i===void 0&&(i=t.substr(0,e)),i+=g[s]):i!==void 0&&(i+=t[e])}return i!==void 0?i:t}function w(i,e){let s;return s=i.authority&&i.path.length>1&&i.scheme==="file"?`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?i.path.substr(1):i.path[1].toLowerCase()+i.path.substr(2):i.path,t&&(s=s.replace(/\//g,"\\")),s}function m(t,i){const e=i?p:A;let s="",{scheme:n,authority:o,path:r,query:h,fragment:c}=t;if(n&&(s+=n,s+=":"),(o||n==="file")&&(s+=a,s+=a),o){let t=o.indexOf("@");if(t!==-1){const i=o.substr(0,t);o=o.substr(t+1),t=i.lastIndexOf(":"),t===-1?s+=e(i,!1,!1):(s+=e(i.substr(0,t),!1,!1),s+=":",s+=e(i.substr(t+1),!1,!0)),s+="@"}o=o.toLowerCase(),t=o.lastIndexOf(":"),t===-1?s+=e(o,!1,!0):(s+=e(o.substr(0,t),!1,!0),s+=o.substr(t))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const t=r.charCodeAt(1);t>=65&&t<=90&&(r=`/${String.fromCharCode(t+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const t=r.charCodeAt(0);t>=65&&t<=90&&(r=`${String.fromCharCode(t+32)}:${r.substr(2)}`)}s+=e(r,!0,!1)}return h&&(s+="?",s+=e(h,!1,!1)),c&&(s+="#",s+=i?c:A(c,!1,!1)),s}function v(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+v(t.substr(3)):t}}const b=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function y(t){return t.match(b)?t.replace(b,(t=>v(t))):t}var k=e(470);const x=k.posix||k,C="/";var E;(function(t){t.joinPath=function(t,...i){return t.with({path:x.join(t.path,...i)})},t.resolvePath=function(t,...i){let e=t.path,s=!1;e[0]!==C&&(e=C+e,s=!0);let n=x.resolve(e,...i);return s&&n[0]===C&&!t.authority&&(n=n.substring(1)),t.with({path:n})},t.dirname=function(t){if(t.path.length===0||t.path===C)return t;let i=x.dirname(t.path);return i.length===1&&i.charCodeAt(0)===46&&(i=""),t.with({path:i})},t.basename=function(t){return x.basename(t.path)},t.extname=function(t){return x.extname(t.path)}})(E||(E={}))})(),Gct=s})();const{URI:Kct,Utils:$ct}=Gct;function Xct(t){return t}function qct(t){return t}function Zct(t){return{start:{line:t.startLineNumber-1,character:t.startColumn-1},end:{line:t.endLineNumber-1,character:t.endColumn-1}}}function tat(t){return{startLineNumber:t.start.line+1,startColumn:t.start.character+1,endLineNumber:t.end.line+1,endColumn:t.end.character+1}}function iat(t){return{location:{range:Zct(t),uri:String(t.resource)},message:t.message}}function eat(t){return{...tat(t.location.range),message:t.message,resource:Kct.parse(t.location.uri)}}function sat(t){const i={message:t.message,range:Zct(t),severity:(e=t.severity,e===8?1:e===4?2:e===2?3:4)};var e;return typeof t.code=="string"?i.code=t.code:t.code!=null&&(i.code=t.code.value,i.codeDescription={href:String(t.code.target)}),t.relatedInformation&&(i.relatedInformation=t.relatedInformation.map(iat)),t.tags&&(i.tags=t.tags.map(Xct)),t.source!=null&&(i.source=t.source),i}function nat(t,i){var e;const s={...tat(t.range),message:t.message,severity:t.severity?(n=t.severity,n===1?8:n===2?4:n===3?2:1):(e=i==null?void 0:i.defaultSeverity)!==null&&e!==void 0?e:8};var n;return t.code!=null&&(s.code=t.codeDescription==null?String(t.code):{value:String(t.code),target:Kct.parse(t.codeDescription.href)}),t.relatedInformation&&(s.relatedInformation=t.relatedInformation.map(eat)),t.tags&&(s.tags=t.tags.map(qct)),t.source!=null&&(s.source=t.source),s}function oat(t){return{range:tat(t.range),text:t.newText}}function rat(t){const i=t.kind==="create"?{newResource:Kct.parse(t.uri)}:t.kind==="delete"?{oldResource:Kct.parse(t.uri)}:{oldResource:Kct.parse(t.oldUri),newResource:Kct.parse(t.newUri)};return t.options&&(i.options=function(t){const i={};return t.ignoreIfExists!=null&&(i.ignoreIfExists=t.ignoreIfExists),t.ignoreIfNotExists!=null&&(i.ignoreIfNotExists=t.ignoreIfNotExists),t.overwrite!=null&&(i.overwrite=t.overwrite),t.recursive!=null&&(i.recursive=t.recursive),i}(t.options)),i}function hat(t,i,e){return{resource:Kct.parse(i),versionId:e,textEdit:oat(t)}}function cat(t,i){const e={title:t.title,isPreferred:t.isPreferred};return t.diagnostics&&(e.diagnostics=t.diagnostics.map((t=>nat(t,i)))),t.disabled&&(e.disabled=t.disabled.reason),t.edit&&(e.edit=function(t){var i;const e=[];if(t.changes)for(const[i,s]of Object.entries(t.changes))for(const t of s)e.push(hat(t,i));if(t.documentChanges)for(const s of t.documentChanges)if("textDocument"in s)for(const t of s.edits)e.push(hat(t,s.textDocument.uri,(i=s.textDocument.version)!==null&&i!==void 0?i:void 0));else e.push(rat(s));return{edits:e}}(t.edit)),t.isPreferred!=null&&(e.isPreferred=t.isPreferred),t.kind&&(e.kind=t.kind),e}function aat(t){return t}function lat(t){return{value:t.value}}function uat(t){return{range:tat(t.range),text:t.newText}}function dat(t,i){var e,s,n,o,r;const h=(e=i.itemDefaults)!==null&&e!==void 0?e:{},c=(s=t.textEdit)!==null&&s!==void 0?s:h.editRange,a=(n=t.commitCharacters)!==null&&n!==void 0?n:h.commitCharacters,l=(o=t.insertTextFormat)!==null&&o!==void 0?o:h.insertTextFormat,u=(r=t.insertTextMode)!==null&&r!==void 0?r:h.insertTextMode;let d,f=t.insertText;var g;c?(d="range"in(g=c)?tat(g.range):"insert"in g&&"replace"in g?{insert:tat(g.insert),replace:tat(g.replace)}:tat(g),"newText"in c&&(f=c.newText)):d={...i.range};const A={insertText:f??t.label,kind:t.kind==null?18:(p=t.kind,p===1?18:p===2?0:p===3?1:p===4?2:p===5?3:p===6?4:p===7?5:p===8?7:p===9?8:p===10?9:p===11?12:p===12?13:p===13?15:p===14?17:p===15?27:p===16?19:p===17?20:p===18?21:p===19?23:p===20?16:p===21?14:p===22?6:p===23?10:p===24?11:24),label:t.label,range:d};var p;return t.additionalTextEdits&&(A.additionalTextEdits=t.additionalTextEdits.map(uat)),t.command&&(A.command=function(t){const i={title:t.title,id:t.command};return t.arguments&&(i.arguments=t.arguments),i}(t.command)),a&&(A.commitCharacters=a),t.detail!=null&&(A.detail=t.detail),typeof t.documentation=="string"?A.documentation=t.documentation:t.documentation&&(A.documentation=lat(t.documentation)),t.filterText!=null&&(A.filterText=t.filterText),l===2?A.insertTextRules=4:u===2&&(A.insertTextRules=1),t.preselect!=null&&(A.preselect=t.preselect),t.sortText!=null&&(A.sortText=t.sortText),t.tags&&(A.tags=t.tags.map(aat)),A}function fat(t){return t}function gat(t){var i,e,s;const n={detail:(i=t.detail)!==null&&i!==void 0?i:"",kind:(o=t.kind,o===1?0:o===2?1:o===3?2:o===4?3:o===5?4:o===6?5:o===7?6:o===8?7:o===9?8:o===10?9:o===11?10:o===12?11:o===13?12:o===14?13:o===15?14:o===16?15:o===17?16:o===18?17:o===19?18:o===20?19:o===21?20:o===22?21:o===23?22:o===24?23:o===25?24:25),name:t.name,range:tat(t.range),selectionRange:tat(t.selectionRange),tags:(s=(e=t.tags)===null||e===void 0?void 0:e.map(fat))!==null&&s!==void 0?s:[]};var o;return t.children&&(n.children=t.children.map(gat)),n}function Aat(t){const i={start:t.startLine+1,end:t.endLine+1};return t.kind!=null&&(i.kind={value:t.kind}),i}function pat(t){return typeof t=="string"?{value:t}:{value:`\`\`\`${t.language}\n${t.value}\n\`\`\``}}function wat(t){return{character:t.column-1,line:t.lineNumber-1}}function mat(t){const i={range:tat(t.range)};return t.tooltip!=null&&(i.tooltip=t.tooltip),t.target!=null&&(i.url=Kct.parse(t.target)),i}function vat(t){const i={range:tat(t.targetRange),targetSelectionRange:tat(t.targetSelectionRange),uri:Kct.parse(t.targetUri)};return t.originSelectionRange&&(i.originSelectionRange=tat(t.originSelectionRange)),i}function bat(t){return{owner:"yaml",async provideMarkerData(i){const e=await t(i.uri),s=await e.doValidation(String(i.uri));return s==null?void 0:s.map((t=>nat(t)))},async doReset(i){await(await t(i.uri)).resetSchema(String(i.uri))}}}function yat(t){return{triggerCharacters:[" ",":"],async provideCompletionItems(i,e){const s=i.uri,n=i.getWordUntilPosition(e),o=await t(s),r=await o.doComplete(String(s),wat(e));if(r)return h=r,c={range:{startLineNumber:e.lineNumber,startColumn:n.startColumn,endLineNumber:e.lineNumber,endColumn:n.endColumn}},{incomplete:!!h.isIncomplete,suggestions:h.items.map((t=>dat(t,{range:c.range,itemDefaults:h.itemDefaults})))};var h,c}}}function kat(t){return{async provideDefinition(i,e){const s=i.uri,n=await t(s),o=await n.doDefinition(String(s),wat(e));return o==null?void 0:o.map(vat)}}}function xat(t){return{async provideHover(i,e){const s=i.uri,n=await t(s),o=await n.doHover(String(s),wat(e));if(o)return function(t){const i={contents:(e=t.contents,typeof e=="string"||"language"in e?[pat(e)]:Array.isArray(e)?e.map(pat):[lat(e)])};var e;return t.range&&(i.range=tat(t.range)),i}(o)}}}function Cat(t){return{displayName:"yaml",async provideDocumentSymbols(i){const e=i.uri,s=await t(e),n=await s.findDocumentSymbols(String(e));return n==null?void 0:n.map(gat)}}}function Eat(t){return{displayName:"yaml",async provideDocumentFormattingEdits(i){const e=i.uri,s=await t(e),n=await s.format(String(e));return n==null?void 0:n.map(oat)}}}function Bat(t){return{async provideLinks(i){const e=i.uri,s=await t(e),n=await s.findLinks(String(e));if(n)return{links:n.map(mat)}}}}function Dat(t){return{async provideCodeActions(i,e,s){const n=i.uri,o=await t(n),r=await o.getCodeAction(String(n),Zct(e),function(t){const i={diagnostics:t.markers.map(sat),triggerKind:t.trigger};return t.only!=null&&(i.only=[t.only]),i}(s));if(r)return{actions:r.map((t=>cat(t))),dispose(){}}}}}function Mat(t){return{async provideFoldingRanges(i){const e=i.uri,s=await t(e),n=await s.getFoldingRanges(String(e));return n==null?void 0:n.map(Aat)}}}function Sat(t,i){const e={completion:!0,customTags:[],enableSchemaRequest:!1,format:!0,isKubernetes:!1,hover:!0,schemas:[],validate:!0,yamlVersion:"1.2",...i};t.languages.register({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml"]});const s=function(t,i){let e,{createData:s,interval:n=3e4,label:o,moduleId:r,stopWhenIdleFor:h=12e4}=i,c=0,a=!1;const l=()=>{e&&(e.dispose(),e=void 0)},u=setInterval((()=>{e&&Date.now()-c>h&&l()}),n);return{dispose(){a=!0,clearInterval(u),l()},getWorker(...i){if(a)throw new Error("Worker manager has been disposed");return c=Date.now(),e||(e=t.editor.createWebWorker({createData:s,label:o,moduleId:r})),e.withSyncedResources(i)},updateCreateData(t){s=t,l()}}}(t,{label:"yaml",moduleId:"monaco-yaml/yaml.worker",createData:e});let n=Jct(t,"yaml",bat(s.getWorker));const o=[s,t.languages.registerCompletionItemProvider("yaml",yat(s.getWorker)),t.languages.registerHoverProvider("yaml",xat(s.getWorker)),t.languages.registerDefinitionProvider("yaml",kat(s.getWorker)),t.languages.registerDocumentSymbolProvider("yaml",Cat(s.getWorker)),t.languages.registerDocumentFormattingEditProvider("yaml",Eat(s.getWorker)),t.languages.registerLinkProvider("yaml",Bat(s.getWorker)),t.languages.registerCodeActionProvider("yaml",Dat(s.getWorker)),t.languages.registerFoldingRangeProvider("yaml",Mat(s.getWorker)),t.languages.setLanguageConfiguration("yaml",{comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],onEnterRules:[{beforeText:/:\s*$/,action:{indentAction:t.languages.IndentAction.Indent}}]})];return{dispose(){for(const t of o)t.dispose();n.dispose()},update(i){s.updateCreateData(Object.assign(e,i)),n.dispose(),n=Jct(t,"yaml",bat(s.getWorker))}}}self.MonacoEnvironment={getWorker:(t,i)=>i==="json"?new jct:i==="css"||i==="scss"||i==="less"?new Wct:i==="html"||i==="handlebars"||i==="razor"?new Yct:i==="typescript"||i==="javascript"?new _ct:i==="yaml"?new Vct:new Pct};const Fat='@charset "UTF-8";.monaco-editor{font-family:-apple-system, BlinkMacSystemFont, Segoe WPC, Segoe UI, HelveticaNeue-Light, system-ui, Ubuntu, Droid Sans, sans-serif;--monaco-monospace-font:"SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono",\n    "Liberation Mono", "DejaVu Sans Mono", "Courier New", monospace}.monaco-menu .monaco-action-bar.vertical .action-item .action-menu-item:focus .action-label{stroke-width:1.2px}.monaco-editor.vs-dark .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,.monaco-editor.hc-black .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,.monaco-editor.hc-light .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label{stroke-width:1.2px}.monaco-hover p{margin:0}.monaco-aria-container{position:absolute !important;top:0;height:1px;width:1px;margin:-1px;overflow:hidden;padding:0;clip:rect(1px, 1px, 1px, 1px);-webkit-clip-path:inset(50%);clip-path:inset(50%)}.monaco-editor,.monaco-diff-editor .synthetic-focus,.monaco-diff-editor [tabindex="0"]:focus,.monaco-diff-editor [tabindex="-1"]:focus,.monaco-diff-editor button:focus,.monaco-diff-editor input[type=button]:focus,.monaco-diff-editor input[type=checkbox]:focus,.monaco-diff-editor input[type=search]:focus,.monaco-diff-editor input[type=text]:focus,.monaco-diff-editor select:focus,.monaco-diff-editor textarea:focus{outline-width:1px;outline-style:solid;outline-offset:-1px;outline-color:var(--vscode-focusBorder);opacity:1}.monaco-aria-container{position:absolute;left:-999em}::-ms-clear{display:none}.monaco-editor .editor-widget input{color:inherit}.monaco-editor{position:relative;overflow:visible;-webkit-text-size-adjust:100%;color:var(--vscode-editor-foreground);background-color:var(--vscode-editor-background)}.monaco-editor-background{background-color:var(--vscode-editor-background)}.monaco-editor .rangeHighlight{background-color:var(--vscode-editor-rangeHighlightBackground);-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid var(--vscode-editor-rangeHighlightBorder)}.monaco-editor.hc-black .rangeHighlight,.monaco-editor.hc-light .rangeHighlight{border-style:dotted}.monaco-editor .symbolHighlight{background-color:var(--vscode-editor-symbolHighlightBackground);-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid var(--vscode-editor-symbolHighlightBorder)}.monaco-editor.hc-black .symbolHighlight,.monaco-editor.hc-light .symbolHighlight{border-style:dotted}.monaco-editor .overflow-guard{position:relative;overflow:hidden}.monaco-editor .view-overlays{position:absolute;top:0}.monaco-editor .view-overlays>div,.monaco-editor .margin-view-overlays>div{position:absolute;width:100%}.monaco-editor .view-overlays>div>div,.monaco-editor .margin-view-overlays>div>div{bottom:0}.monaco-editor .squiggly-error{border-bottom:4px double var(--vscode-editorError-border)}.monaco-editor .squiggly-error:before{display:block;content:"";width:100%;height:100%;background:var(--vscode-editorError-background)}.monaco-editor .squiggly-warning{border-bottom:4px double var(--vscode-editorWarning-border)}.monaco-editor .squiggly-warning:before{display:block;content:"";width:100%;height:100%;background:var(--vscode-editorWarning-background)}.monaco-editor .squiggly-info{border-bottom:4px double var(--vscode-editorInfo-border)}.monaco-editor .squiggly-info:before{display:block;content:"";width:100%;height:100%;background:var(--vscode-editorInfo-background)}.monaco-editor .squiggly-hint{border-bottom:2px dotted var(--vscode-editorHint-border)}.monaco-editor.showUnused .squiggly-unnecessary{border-bottom:2px dashed var(--vscode-editorUnnecessaryCode-border)}.monaco-editor.showDeprecated .squiggly-inline-deprecated{text-decoration:line-through;-webkit-text-decoration-color:var(--vscode-editor-foreground, inherit);text-decoration-color:var(--vscode-editor-foreground, inherit)}.monaco-scrollable-element>.scrollbar>.scra{cursor:pointer;font-size:11px !important}.monaco-scrollable-element>.visible{opacity:1;background:rgba(0, 0, 0, 0);-webkit-transition:opacity 0.1s linear;transition:opacity 0.1s linear;z-index:11}.monaco-scrollable-element>.invisible{opacity:0;pointer-events:none}.monaco-scrollable-element>.invisible.fade{-webkit-transition:opacity 0.8s linear;transition:opacity 0.8s linear}.monaco-scrollable-element>.shadow{position:absolute;display:none}.monaco-scrollable-element>.shadow.top{display:block;top:0;left:3px;height:3px;width:100%;-webkit-box-shadow:var(--vscode-scrollbar-shadow) 0 6px 6px -6px inset;box-shadow:var(--vscode-scrollbar-shadow) 0 6px 6px -6px inset}.monaco-scrollable-element>.shadow.left{display:block;top:3px;left:0;height:100%;width:3px;-webkit-box-shadow:var(--vscode-scrollbar-shadow) 6px 0 6px -6px inset;box-shadow:var(--vscode-scrollbar-shadow) 6px 0 6px -6px inset}.monaco-scrollable-element>.shadow.top-left-corner{display:block;top:0;left:0;height:3px;width:3px}.monaco-scrollable-element>.shadow.top.left{-webkit-box-shadow:var(--vscode-scrollbar-shadow) 6px 0 6px -6px inset;box-shadow:var(--vscode-scrollbar-shadow) 6px 0 6px -6px inset}.monaco-scrollable-element>.scrollbar>.slider{background:var(--vscode-scrollbarSlider-background)}.monaco-scrollable-element>.scrollbar>.slider:hover{background:var(--vscode-scrollbarSlider-hoverBackground)}.monaco-scrollable-element>.scrollbar>.slider.active{background:var(--vscode-scrollbarSlider-activeBackground)}.monaco-editor .inputarea{min-width:0;min-height:0;margin:0;padding:0;position:absolute;outline:none !important;resize:none;border:none;overflow:hidden;color:transparent;background-color:transparent;z-index:-10}.monaco-editor .inputarea.ime-input{z-index:10;caret-color:var(--vscode-editorCursor-foreground);color:var(--vscode-editor-foreground)}.monaco-editor .margin-view-overlays .line-numbers{bottom:0;font-variant-numeric:tabular-nums;position:absolute;text-align:right;display:inline-block;vertical-align:middle;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:default}.monaco-editor .relative-current-line-number{text-align:left;display:inline-block;width:100%}.monaco-editor .margin-view-overlays .line-numbers.lh-odd{margin-top:1px}.monaco-editor .line-numbers{color:var(--vscode-editorLineNumber-foreground)}.monaco-editor .line-numbers.active-line-number{color:var(--vscode-editorLineNumber-activeForeground)}.monaco-editor .margin{background-color:var(--vscode-editorGutter-background)}.monaco-mouse-cursor-text{cursor:text}.monaco-editor .blockDecorations-container{position:absolute;top:0;pointer-events:none}.monaco-editor .blockDecorations-block{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}.monaco-editor .view-overlays .current-line,.monaco-editor .margin-view-overlays .current-line{display:block;position:absolute;left:0;top:0;-webkit-box-sizing:border-box;box-sizing:border-box;height:100%}.monaco-editor .margin-view-overlays .current-line.current-line-margin.current-line-margin-both{border-right:0}.monaco-editor .lines-content .cdr{position:absolute;height:100%}.monaco-editor .glyph-margin{position:absolute;top:0}.monaco-editor .glyph-margin-widgets .cgmr{position:absolute;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.monaco-editor .glyph-margin-widgets .cgmr.codicon-modifier-spin:before{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.monaco-editor .lines-content .core-guide{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;height:100%}.mtkcontrol{color:#fff !important;background:#960000 !important}.mtkoverflow{background-color:var(--vscode-button-background, var(--vscode-editor-background));color:var(--vscode-button-foreground, var(--vscode-editor-foreground));border-width:1px;border-style:solid;border-color:var(--vscode-contrastBorder);border-radius:2px;padding:4px;cursor:pointer}.mtkoverflow:hover{background-color:var(--vscode-button-hoverBackground)}.monaco-editor.no-user-select .lines-content,.monaco-editor.no-user-select .view-line,.monaco-editor.no-user-select .view-lines{-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}.monaco-editor.mac .lines-content:hover,.monaco-editor.mac .view-line:hover,.monaco-editor.mac .view-lines:hover{-moz-user-select:text;user-select:text;-webkit-user-select:text;-ms-user-select:text}.monaco-editor.enable-user-select{-moz-user-select:initial;-ms-user-select:initial;user-select:initial;-webkit-user-select:initial}.monaco-editor .view-lines{white-space:nowrap}.monaco-editor .view-line{position:absolute;width:100%}.monaco-editor .lines-content>.view-lines>.view-line>span{top:0;bottom:0;position:absolute}.monaco-editor .mtkw{color:var(--vscode-editorWhitespace-foreground) !important}.monaco-editor .mtkz{display:inline-block;color:var(--vscode-editorWhitespace-foreground) !important}.monaco-editor .lines-decorations{position:absolute;top:0;background:#fff}.monaco-editor .margin-view-overlays .cldr{position:absolute;height:100%}.monaco-editor .margin-view-overlays .cmdr{position:absolute;left:0;width:100%;height:100%}.monaco-editor .minimap.slider-mouseover .minimap-slider{opacity:0;-webkit-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.monaco-editor .minimap.slider-mouseover:hover .minimap-slider,.monaco-editor .minimap.slider-mouseover .minimap-slider.active{opacity:1}.monaco-editor .minimap-slider .minimap-slider-horizontal{background:var(--vscode-minimapSlider-background)}.monaco-editor .minimap-slider:hover .minimap-slider-horizontal{background:var(--vscode-minimapSlider-hoverBackground)}.monaco-editor .minimap-slider.active .minimap-slider-horizontal{background:var(--vscode-minimapSlider-activeBackground)}.monaco-editor .minimap-shadow-visible{-webkit-box-shadow:var(--vscode-scrollbar-shadow) -6px 0 6px -6px inset;box-shadow:var(--vscode-scrollbar-shadow) -6px 0 6px -6px inset}.monaco-editor .minimap-shadow-hidden{position:absolute;width:0}.monaco-editor .minimap-shadow-visible{position:absolute;left:-6px;width:6px}.monaco-editor.no-minimap-shadow .minimap-shadow-visible{position:absolute;left:-1px;width:1px}.minimap.autohide{opacity:0;-webkit-transition:opacity 0.5s;transition:opacity 0.5s}.minimap.autohide:hover{opacity:1}.monaco-editor .minimap{z-index:5}.monaco-editor .overlayWidgets{position:absolute;top:0;left:0}.monaco-editor .view-ruler{position:absolute;top:0;-webkit-box-shadow:1px 0 0 0 var(--vscode-editorRuler-foreground) inset;box-shadow:1px 0 0 0 var(--vscode-editorRuler-foreground) inset}.monaco-editor .scroll-decoration{position:absolute;top:0;left:0;height:6px;-webkit-box-shadow:var(--vscode-scrollbar-shadow) 0 6px 6px -6px inset;box-shadow:var(--vscode-scrollbar-shadow) 0 6px 6px -6px inset}.monaco-editor .lines-content .cslr{position:absolute}.monaco-editor .focused .selected-text{background-color:var(--vscode-editor-selectionBackground)}.monaco-editor .selected-text{background-color:var(--vscode-editor-inactiveSelectionBackground)}.monaco-editor .top-left-radius{border-top-left-radius:3px}.monaco-editor .bottom-left-radius{border-bottom-left-radius:3px}.monaco-editor .top-right-radius{border-top-right-radius:3px}.monaco-editor .bottom-right-radius{border-bottom-right-radius:3px}.monaco-editor.hc-black .top-left-radius{border-top-left-radius:0}.monaco-editor.hc-black .bottom-left-radius{border-bottom-left-radius:0}.monaco-editor.hc-black .top-right-radius{border-top-right-radius:0}.monaco-editor.hc-black .bottom-right-radius{border-bottom-right-radius:0}.monaco-editor.hc-light .top-left-radius{border-top-left-radius:0}.monaco-editor.hc-light .bottom-left-radius{border-bottom-left-radius:0}.monaco-editor.hc-light .top-right-radius{border-top-right-radius:0}.monaco-editor.hc-light .bottom-right-radius{border-bottom-right-radius:0}.monaco-editor .cursors-layer{position:absolute;top:0}.monaco-editor .cursors-layer>.cursor{position:absolute;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.monaco-editor .cursors-layer.cursor-smooth-caret-animation>.cursor{-webkit-transition:all 80ms;transition:all 80ms}.monaco-editor .cursors-layer.cursor-block-outline-style>.cursor{background:transparent !important;border-style:solid;border-width:1px}.monaco-editor .cursors-layer.cursor-underline-style>.cursor{border-bottom-width:2px;border-bottom-style:solid;background:transparent !important}.monaco-editor .cursors-layer.cursor-underline-thin-style>.cursor{border-bottom-width:1px;border-bottom-style:solid;background:transparent !important}@-webkit-keyframes monaco-cursor-smooth{0%,20%{opacity:1}60%,to{opacity:0}}@keyframes monaco-cursor-smooth{0%,20%{opacity:1}60%,to{opacity:0}}@-webkit-keyframes monaco-cursor-phase{0%,20%{opacity:1}90%,to{opacity:0}}@keyframes monaco-cursor-phase{0%,20%{opacity:1}90%,to{opacity:0}}@-webkit-keyframes monaco-cursor-expand{0%,20%{-webkit-transform:scaleY(1);transform:scaleY(1)}80%,to{-webkit-transform:scaleY(0);transform:scaleY(0)}}@keyframes monaco-cursor-expand{0%,20%{-webkit-transform:scaleY(1);transform:scaleY(1)}80%,to{-webkit-transform:scaleY(0);transform:scaleY(0)}}.cursor-smooth{-webkit-animation:monaco-cursor-smooth 0.5s ease-in-out 0s 20 alternate;animation:monaco-cursor-smooth 0.5s ease-in-out 0s 20 alternate}.cursor-phase{-webkit-animation:monaco-cursor-phase 0.5s ease-in-out 0s 20 alternate;animation:monaco-cursor-phase 0.5s ease-in-out 0s 20 alternate}.cursor-expand>.cursor{-webkit-animation:monaco-cursor-expand 0.5s ease-in-out 0s 20 alternate;animation:monaco-cursor-expand 0.5s ease-in-out 0s 20 alternate}.monaco-editor .mwh{position:absolute;color:var(--vscode-editorWhitespace-foreground) !important}.monaco-workbench .workbench-hover{position:relative;font-size:13px;line-height:19px;z-index:40;overflow:hidden;max-width:700px;background:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);border-radius:3px;color:var(--vscode-editorHoverWidget-foreground);-webkit-box-shadow:0 2px 8px var(--vscode-widget-shadow);box-shadow:0 2px 8px var(--vscode-widget-shadow)}.monaco-workbench .workbench-hover hr{border-bottom:none}.monaco-workbench .workbench-hover:not(.skip-fade-in){-webkit-animation:fadein 0.1s linear;animation:fadein 0.1s linear}.monaco-workbench .workbench-hover.compact{font-size:12px}.monaco-workbench .workbench-hover.compact .hover-contents{padding:2px 8px}.monaco-workbench .workbench-hover-container.locked .workbench-hover{outline:1px solid var(--vscode-editorHoverWidget-border)}.monaco-workbench .workbench-hover-container.locked .workbench-hover:focus,.monaco-workbench .workbench-hover-lock:focus{outline:1px solid var(--vscode-focusBorder)}.monaco-workbench .workbench-hover-container.locked .workbench-hover-lock:hover{background:var(--vscode-toolbar-hoverBackground)}.monaco-workbench .workbench-hover-pointer{position:absolute;z-index:41;pointer-events:none}.monaco-workbench .workbench-hover-pointer:after{content:"";position:absolute;width:5px;height:5px;background-color:var(--vscode-editorHoverWidget-background);border-right:1px solid var(--vscode-editorHoverWidget-border);border-bottom:1px solid var(--vscode-editorHoverWidget-border)}.monaco-workbench .locked .workbench-hover-pointer:after{width:4px;height:4px;border-right-width:2px;border-bottom-width:2px}.monaco-workbench .workbench-hover-pointer.left{left:-3px}.monaco-workbench .workbench-hover-pointer.right{right:3px}.monaco-workbench .workbench-hover-pointer.top{top:-3px}.monaco-workbench .workbench-hover-pointer.bottom{bottom:3px}.monaco-workbench .workbench-hover-pointer.left:after{-webkit-transform:rotate(135deg);transform:rotate(135deg)}.monaco-workbench .workbench-hover-pointer.right:after{-webkit-transform:rotate(315deg);transform:rotate(315deg)}.monaco-workbench .workbench-hover-pointer.top:after{-webkit-transform:rotate(225deg);transform:rotate(225deg)}.monaco-workbench .workbench-hover-pointer.bottom:after{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.monaco-workbench .workbench-hover a{color:var(--vscode-textLink-foreground)}.monaco-workbench .workbench-hover a:focus{outline:1px solid;outline-offset:-1px;text-decoration:underline;outline-color:var(--vscode-focusBorder)}.monaco-workbench .workbench-hover a:hover,.monaco-workbench .workbench-hover a:active{color:var(--vscode-textLink-activeForeground)}.monaco-workbench .workbench-hover code{background:var(--vscode-textCodeBlock-background)}.monaco-workbench .workbench-hover .hover-row .actions{background:var(--vscode-editorHoverWidget-statusBarBackground)}.monaco-workbench .workbench-hover.right-aligned{left:1px}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions .action-container{margin-right:0;margin-left:16px}.monaco-hover{cursor:default;position:absolute;overflow:hidden;-moz-user-select:text;-ms-user-select:text;user-select:text;-webkit-user-select:text;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-animation:fadein 0.1s linear;animation:fadein 0.1s linear;line-height:1.5em;white-space:var(--vscode-hover-whiteSpace, normal)}.monaco-hover.hidden{display:none}.monaco-hover a:hover:not(.disabled){cursor:pointer}.monaco-hover .hover-contents:not(.html-hover-contents){padding:4px 8px}.monaco-hover .markdown-hover>.hover-contents:not(.code-hover-contents){max-width:var(--vscode-hover-maxWidth, 500px);word-wrap:break-word}.monaco-hover .markdown-hover>.hover-contents:not(.code-hover-contents) hr{min-width:100%}.monaco-hover p,.monaco-hover .code,.monaco-hover ul,.monaco-hover h1,.monaco-hover h2,.monaco-hover h3,.monaco-hover h4,.monaco-hover h5,.monaco-hover h6{margin:8px 0}.monaco-hover h1,.monaco-hover h2,.monaco-hover h3,.monaco-hover h4,.monaco-hover h5,.monaco-hover h6{line-height:1.1}.monaco-hover code{font-family:var(--monaco-monospace-font)}.monaco-hover hr{-webkit-box-sizing:border-box;box-sizing:border-box;border-left:0px;border-right:0px;margin:4px -8px -4px;height:1px}.monaco-hover p:first-child,.monaco-hover .code:first-child,.monaco-hover ul:first-child{margin-top:0}.monaco-hover p:last-child,.monaco-hover .code:last-child,.monaco-hover ul:last-child{margin-bottom:0}.monaco-hover ul,.monaco-hover ol{padding-left:20px}.monaco-hover li>p{margin-bottom:0}.monaco-hover li>ul{margin-top:0}.monaco-hover code{border-radius:3px;padding:0 0.4em}.monaco-hover .monaco-tokenized-source{white-space:var(--vscode-hover-sourceWhiteSpace, pre-wrap)}.monaco-hover .hover-row.status-bar{font-size:12px;line-height:22px}.monaco-hover .hover-row.status-bar .info{font-style:italic;padding:0 8px}.monaco-hover .hover-row.status-bar .actions{display:-ms-flexbox;display:flex;padding:0 8px}.monaco-hover .hover-row.status-bar .actions .action-container{margin-right:16px;cursor:pointer}.monaco-hover .hover-row.status-bar .actions .action-container .action .icon{padding-right:4px}.monaco-hover .markdown-hover .hover-contents .codicon{color:inherit;font-size:inherit;vertical-align:middle}.monaco-hover .hover-contents a.code-link:hover,.monaco-hover .hover-contents a.code-link{color:inherit}.monaco-hover .hover-contents a.code-link:before{content:"("}.monaco-hover .hover-contents a.code-link:after{content:")"}.monaco-hover .hover-contents a.code-link>span{text-decoration:underline;border-bottom:1px solid transparent;text-underline-position:under;color:var(--vscode-textLink-foreground)}.monaco-hover .hover-contents a.code-link>span:hover{color:var(--vscode-textLink-activeForeground)}.monaco-hover .markdown-hover .hover-contents:not(.code-hover-contents):not(.html-hover-contents) span{margin-bottom:4px;display:inline-block}.monaco-hover-content .action-container a{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.monaco-hover-content .action-container.disabled{pointer-events:none;opacity:0.4;cursor:default}.monaco-editor .rendered-markdown kbd{background-color:var(--vscode-keybindingLabel-background);color:var(--vscode-keybindingLabel-foreground);border-style:solid;border-width:1px;border-radius:3px;border-color:var(--vscode-keybindingLabel-border);border-bottom-color:var(--vscode-keybindingLabel-bottomBorder);-webkit-box-shadow:inset 0 -1px 0 var(--vscode-widget-shadow);box-shadow:inset 0 -1px 0 var(--vscode-widget-shadow);vertical-align:middle;padding:1px 3px}.rendered-markdown li:has(input[type=checkbox]){list-style-type:none}.context-view{position:absolute}.context-view.fixed{all:initial;font-family:inherit;font-size:13px;position:fixed;color:inherit}.monaco-list{position:relative;height:100%;width:100%;white-space:nowrap}.monaco-list.mouse-support{-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}.monaco-list>.monaco-scrollable-element{height:100%}.monaco-list-rows{position:relative;width:100%;height:100%}.monaco-list.horizontal-scrolling .monaco-list-rows{width:auto;min-width:100%}.monaco-list-row{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;width:100%}.monaco-list.mouse-support .monaco-list-row{cursor:pointer;-ms-touch-action:none;touch-action:none}.monaco-list .monaco-scrollable-element>.scrollbar.vertical,.monaco-pane-view>.monaco-split-view2.vertical>.monaco-scrollable-element>.scrollbar.vertical{z-index:14}.monaco-list-row.scrolling{display:none !important}.monaco-list.element-focused,.monaco-list.selection-single,.monaco-list.selection-multiple{outline:0 !important}.monaco-drag-image{display:inline-block;padding:1px 7px;border-radius:10px;font-size:12px;position:absolute;z-index:1000}.monaco-list-type-filter-message{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;top:0;left:0;padding:40px 1em 1em;text-align:center;white-space:normal;opacity:0.7;pointer-events:none}.monaco-list-type-filter-message:empty{display:none}.monaco-select-box-dropdown-padding{--dropdown-padding-top:1px;--dropdown-padding-bottom:1px}.hc-black .monaco-select-box-dropdown-padding,.hc-light .monaco-select-box-dropdown-padding{--dropdown-padding-top:3px;--dropdown-padding-bottom:4px}.monaco-select-box-dropdown-container{display:none;-webkit-box-sizing:border-box;box-sizing:border-box}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown *{margin:0}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown a:focus{outline:1px solid -webkit-focus-ring-color;outline-offset:-1px}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown code{line-height:15px;font-family:var(--monaco-monospace-font)}.monaco-select-box-dropdown-container.visible{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;text-align:left;width:1px;overflow:hidden;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container{-ms-flex:0 0 auto;flex:0 0 auto;-ms-flex-item-align:start;align-self:flex-start;padding-top:var(--dropdown-padding-top);padding-bottom:var(--dropdown-padding-bottom);padding-left:1px;padding-right:1px;width:100%;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.monaco-select-box-dropdown-container>.select-box-details-pane{padding:5px}.hc-black .monaco-select-box-dropdown-container>.select-box-dropdown-list-container{padding-top:var(--dropdown-padding-top);padding-bottom:var(--dropdown-padding-bottom)}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row{cursor:pointer}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-text{text-overflow:ellipsis;overflow:hidden;padding-left:3.5px;white-space:nowrap;float:left}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-detail{text-overflow:ellipsis;overflow:hidden;padding-left:3.5px;white-space:nowrap;float:left;opacity:0.7}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-decorator-right{text-overflow:ellipsis;overflow:hidden;padding-right:10px;white-space:nowrap;float:right}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.visually-hidden{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control{-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-item-align:start;align-self:flex-start;opacity:0}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control>.width-control-div{overflow:hidden;max-height:0px}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control>.width-control-div>.option-text-width-control{padding-left:4px;padding-right:8px;white-space:nowrap}.monaco-select-box{width:100%;cursor:pointer;border-radius:2px}.monaco-select-box-dropdown-container{font-size:13px;font-weight:400;text-transform:none}.monaco-action-bar .action-item.select-container{cursor:default}.monaco-action-bar .action-item .monaco-select-box{cursor:pointer;min-width:100px;min-height:18px;padding:2px 23px 2px 8px}.mac .monaco-action-bar .action-item .monaco-select-box{font-size:11px;border-radius:5px}.monaco-action-bar{white-space:nowrap;height:100%}.monaco-action-bar .actions-container{display:-ms-flexbox;display:flex;margin:0 auto;padding:0;height:100%;width:100%;-ms-flex-align:center;align-items:center}.monaco-action-bar.vertical .actions-container{display:inline-block}.monaco-action-bar .action-item{display:block;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;position:relative}.monaco-action-bar .action-item.disabled{cursor:default}.monaco-action-bar .action-item .icon,.monaco-action-bar .action-item .codicon{display:block}.monaco-action-bar .action-item .codicon{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:16px;height:16px}.monaco-action-bar .action-label{display:-ms-flexbox;display:flex;font-size:11px;padding:3px;border-radius:5px}.monaco-action-bar .action-item.disabled .action-label,.monaco-action-bar .action-item.disabled .action-label:before,.monaco-action-bar .action-item.disabled .action-label:hover{color:var(--vscode-disabledForeground)}.monaco-action-bar.vertical{text-align:left}.monaco-action-bar.vertical .action-item{display:block}.monaco-action-bar.vertical .action-label.separator{display:block;border-bottom:1px solid #bbb;padding-top:1px;margin-left:0.8em;margin-right:0.8em}.monaco-action-bar .action-item .action-label.separator{width:1px;height:16px;margin:5px 4px !important;cursor:default;min-width:1px;padding:0;background-color:#bbb}.secondary-actions .monaco-action-bar .action-label{margin-left:6px}.monaco-action-bar .action-item.select-container{overflow:hidden;-ms-flex:1;flex:1;max-width:170px;min-width:60px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.monaco-action-bar .action-item.action-dropdown-item{display:-ms-flexbox;display:flex}.monaco-action-bar .action-item.action-dropdown-item>.action-dropdown-item-separator{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;cursor:default}.monaco-action-bar .action-item.action-dropdown-item>.action-dropdown-item-separator>div{width:1px}.monaco-dropdown{height:100%;padding:0}.monaco-dropdown>.dropdown-label{cursor:pointer;height:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.monaco-dropdown>.dropdown-label>.action-label.disabled{cursor:default}.monaco-dropdown-with-primary{display:-ms-flexbox !important;display:flex !important;-ms-flex-direction:row;flex-direction:row;border-radius:5px}.monaco-dropdown-with-primary>.action-container>.action-label{margin-right:0}.monaco-dropdown-with-primary>.dropdown-action-container>.monaco-dropdown>.dropdown-label .codicon[class*=codicon-]{font-size:12px;padding-left:0;padding-right:0;line-height:16px;margin-left:-3px}.monaco-dropdown-with-primary>.dropdown-action-container>.monaco-dropdown>.dropdown-label>.action-label{display:block;background-size:16px;background-position:center center;background-repeat:no-repeat}.monaco-action-bar .action-item.menu-entry .action-label.icon{width:16px;height:16px;background-repeat:no-repeat;background-position:50%;background-size:16px}.monaco-dropdown-with-default{display:-ms-flexbox !important;display:flex !important;-ms-flex-direction:row;flex-direction:row;border-radius:5px}.monaco-dropdown-with-default>.action-container>.action-label{margin-right:0}.monaco-dropdown-with-default>.action-container.menu-entry>.action-label.icon{width:16px;height:16px;background-repeat:no-repeat;background-position:50%;background-size:16px}.monaco-dropdown-with-default:hover{background-color:var(--vscode-toolbar-hoverBackground)}.monaco-dropdown-with-default>.dropdown-action-container>.monaco-dropdown>.dropdown-label .codicon[class*=codicon-]{font-size:12px;padding-left:0;padding-right:0;line-height:16px;margin-left:-3px}.monaco-dropdown-with-default>.dropdown-action-container>.monaco-dropdown>.dropdown-label>.action-label{display:block;background-size:16px;background-position:center center;background-repeat:no-repeat}.quick-input-widget{font-size:13px}.quick-input-widget .monaco-highlighted-label .highlight{color:#0066bf}.vs .quick-input-widget .monaco-list-row.focused .monaco-highlighted-label .highlight{color:#9dddff}.vs-dark .quick-input-widget .monaco-highlighted-label .highlight{color:#0097fb}.hc-black .quick-input-widget .monaco-highlighted-label .highlight{color:#f38518}.hc-light .quick-input-widget .monaco-highlighted-label .highlight{color:#0f4a85}.monaco-keybinding>.monaco-keybinding-key{background-color:rgba(221, 221, 221, 0.4);border:solid 1px rgba(204, 204, 204, 0.4);border-bottom-color:rgba(187, 187, 187, 0.4);-webkit-box-shadow:inset 0 -1px rgba(187, 187, 187, 0.4);box-shadow:inset 0 -1px rgba(187, 187, 187, 0.4);color:#555}.hc-black .monaco-keybinding>.monaco-keybinding-key{background-color:transparent;border:solid 1px rgb(111, 195, 223);-webkit-box-shadow:none;box-shadow:none;color:#fff}.hc-light .monaco-keybinding>.monaco-keybinding-key{background-color:transparent;border:solid 1px #0f4a85;-webkit-box-shadow:none;box-shadow:none;color:#292929}.vs-dark .monaco-keybinding>.monaco-keybinding-key{background-color:rgba(128, 128, 128, 0.168627451);border:solid 1px rgba(51, 51, 51, 0.6);border-bottom-color:rgba(68, 68, 68, 0.6);-webkit-box-shadow:inset 0 -1px rgba(68, 68, 68, 0.6);box-shadow:inset 0 -1px rgba(68, 68, 68, 0.6);color:#ccc}.monaco-custom-toggle{margin-left:2px;float:left;cursor:pointer;overflow:hidden;width:20px;height:20px;border-radius:3px;border:1px solid transparent;padding:1px;-webkit-box-sizing:border-box;box-sizing:border-box;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}.monaco-custom-toggle:hover{background-color:var(--vscode-inputOption-hoverBackground)}.hc-black .monaco-custom-toggle:hover,.hc-light .monaco-custom-toggle:hover{border:1px dashed var(--vscode-focusBorder)}.hc-black .monaco-custom-toggle,.hc-light .monaco-custom-toggle,.hc-black .monaco-custom-toggle:hover,.hc-light .monaco-custom-toggle:hover{background:none}.monaco-custom-toggle.monaco-checkbox{height:18px;width:18px;border:1px solid transparent;border-radius:3px;margin-right:9px;margin-left:0;padding:0;opacity:1;background-size:16px !important}.monaco-action-bar .checkbox-action-item{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.monaco-action-bar .checkbox-action-item>.monaco-custom-toggle.monaco-checkbox{margin-right:4px}.monaco-action-bar .checkbox-action-item>.checkbox-label{font-size:12px}.monaco-custom-toggle.monaco-checkbox:not(.checked):before{visibility:hidden}.quick-input-widget{position:absolute;width:600px;z-index:2550;left:50%;margin-left:-300px;-webkit-app-region:no-drag;border-radius:6px}.quick-input-titlebar{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;border-radius:inherit}.quick-input-left-action-bar{display:-ms-flexbox;display:flex;margin-left:4px;-ms-flex:1;flex:1}.quick-input-title{padding:3px 0;text-align:center;text-overflow:ellipsis;overflow:hidden}.quick-input-right-action-bar{display:-ms-flexbox;display:flex;margin-right:4px;-ms-flex:1;flex:1}.quick-input-right-action-bar>.actions-container{-ms-flex-pack:end;justify-content:flex-end}.quick-input-titlebar .monaco-action-bar .action-label.codicon{background-position:center;background-repeat:no-repeat;padding:2px}.quick-input-description{margin:6px 6px 6px 11px}.quick-input-header .quick-input-description{margin:4px 2px;-ms-flex:1;flex:1}.quick-input-header{display:-ms-flexbox;display:flex;padding:8px 6px 2px}.quick-input-widget.hidden-input .quick-input-header{padding:0;margin-bottom:0}.quick-input-and-message{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-positive:1;flex-grow:1;min-width:0;position:relative}.quick-input-check-all{-ms-flex-item-align:center;align-self:center;margin:0}.quick-input-filter{-ms-flex-positive:1;flex-grow:1;display:-ms-flexbox;display:flex;position:relative}.quick-input-box{-ms-flex-positive:1;flex-grow:1}.quick-input-widget.show-checkboxes .quick-input-box,.quick-input-widget.show-checkboxes .quick-input-message{margin-left:5px}.quick-input-visible-count{position:absolute;left:-10000px}.quick-input-count{-ms-flex-item-align:center;align-self:center;position:absolute;right:4px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.quick-input-count .monaco-count-badge{vertical-align:middle;padding:2px 4px;border-radius:2px;min-height:auto;line-height:normal}.quick-input-action{margin-left:6px}.quick-input-action .monaco-text-button{font-size:11px;padding:0 6px;display:-ms-flexbox;display:flex;height:25px;-ms-flex-align:center;align-items:center}.quick-input-message{margin-top:-1px;padding:5px;overflow-wrap:break-word}.quick-input-message>.codicon{margin:0 0.2em;vertical-align:text-bottom}.quick-input-message a{color:inherit}.quick-input-progress.monaco-progress-container{position:relative}.quick-input-list{line-height:22px}.quick-input-widget.hidden-input .quick-input-list{margin-top:4px;padding-bottom:4px}.quick-input-list .monaco-list{overflow:hidden;max-height:440px;padding-bottom:5px}.quick-input-list .monaco-scrollable-element{padding:0 5px}.quick-input-list .quick-input-list-entry{-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;display:-ms-flexbox;display:flex;height:100%;padding:0 6px}.quick-input-list .quick-input-list-entry.quick-input-list-separator-border{border-top-width:1px;border-top-style:solid}.quick-input-list .monaco-list-row{border-radius:3px}.quick-input-list .monaco-list-row[data-index="0"] .quick-input-list-entry.quick-input-list-separator-border{border-top-style:none}.quick-input-list .quick-input-list-label{overflow:hidden;display:-ms-flexbox;display:flex;height:100%;-ms-flex:1;flex:1}.quick-input-list .quick-input-list-checkbox{-ms-flex-item-align:center;align-self:center;margin:0}.quick-input-list .quick-input-list-icon{background-size:16px;background-position:left center;background-repeat:no-repeat;padding-right:6px;width:16px;height:22px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.quick-input-list .quick-input-list-rows{overflow:hidden;text-overflow:ellipsis;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;-ms-flex:1;flex:1;margin-left:5px}.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-rows{margin-left:10px}.quick-input-widget .quick-input-list .quick-input-list-checkbox{display:none}.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-checkbox{display:inline}.quick-input-list .quick-input-list-rows>.quick-input-list-row{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.quick-input-list .quick-input-list-rows>.quick-input-list-row .monaco-icon-label,.quick-input-list .quick-input-list-rows>.quick-input-list-row .monaco-icon-label .monaco-icon-label-container>.monaco-icon-name-container{-ms-flex:1;flex:1}.quick-input-list .quick-input-list-rows>.quick-input-list-row .codicon[class*=codicon-]{vertical-align:text-bottom}.quick-input-list .quick-input-list-rows .monaco-highlighted-label>span{opacity:1}.quick-input-list .quick-input-list-entry .quick-input-list-entry-keybinding{margin-right:8px}.quick-input-list .quick-input-list-label-meta{opacity:0.7;line-height:normal;text-overflow:ellipsis;overflow:hidden}.quick-input-list .monaco-list .monaco-list-row .monaco-highlighted-label .highlight{font-weight:700;background-color:unset;color:var(--vscode-list-highlightForeground) !important}.quick-input-list .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight{color:var(--vscode-list-focusHighlightForeground) !important}.quick-input-list .quick-input-list-entry .quick-input-list-separator{margin-right:4px}.quick-input-list .quick-input-list-entry-action-bar{display:-ms-flexbox;display:flex;-ms-flex:0;flex:0;overflow:visible}.quick-input-list .quick-input-list-entry-action-bar .action-label{display:none}.quick-input-list .quick-input-list-entry-action-bar .action-label.codicon{margin-right:4px;padding:0 2px 2px}.quick-input-list .quick-input-list-entry-action-bar{margin-top:1px}.quick-input-list .quick-input-list-entry-action-bar{margin-right:4px}.quick-input-list .quick-input-list-entry .quick-input-list-entry-action-bar .action-label.always-visible,.quick-input-list .quick-input-list-entry:hover .quick-input-list-entry-action-bar .action-label,.quick-input-list .quick-input-list-entry.focus-inside .quick-input-list-entry-action-bar .action-label,.quick-input-list .monaco-list-row.focused .quick-input-list-entry-action-bar .action-label,.quick-input-list .monaco-list-row.passive-focused .quick-input-list-entry-action-bar .action-label{display:-ms-flexbox;display:flex}.quick-input-list .monaco-list-row.focused .monaco-keybinding-key,.quick-input-list .monaco-list-row.focused .quick-input-list-entry .quick-input-list-separator{color:inherit}.quick-input-list .monaco-list-row.focused .monaco-keybinding-key{background:none}.quick-input-list .quick-input-list-separator-as-item{padding:4px 6px;font-size:12px}.quick-input-list .quick-input-list-separator-as-item .label-name{font-weight:600}.quick-input-list .quick-input-list-separator-as-item .label-description{opacity:1 !important}.quick-input-list .monaco-tree-sticky-row .quick-input-list-entry.quick-input-list-separator-as-item.quick-input-list-separator-border{border-top-style:none}.quick-input-list .monaco-tree-sticky-row{padding:0 5px}.quick-input-list .monaco-tl-twistie{display:none !important}:root{--vscode-sash-size:4px;--vscode-sash-hover-size:4px}.monaco-sash{position:absolute;z-index:35;-ms-touch-action:none;touch-action:none}.monaco-sash.disabled{pointer-events:none}.monaco-sash.mac.vertical{cursor:col-resize}.monaco-sash.vertical.minimum{cursor:e-resize}.monaco-sash.vertical.maximum{cursor:w-resize}.monaco-sash.mac.horizontal{cursor:row-resize}.monaco-sash.horizontal.minimum{cursor:s-resize}.monaco-sash.horizontal.maximum{cursor:n-resize}.monaco-sash.disabled{cursor:default !important;pointer-events:none !important}.monaco-sash.vertical{cursor:ew-resize;top:0;width:var(--vscode-sash-size);height:100%}.monaco-sash.horizontal{cursor:ns-resize;left:0;width:100%;height:var(--vscode-sash-size)}.monaco-sash:not(.disabled)>.orthogonal-drag-handle{content:" ";height:calc(var(--vscode-sash-size) * 2);width:calc(var(--vscode-sash-size) * 2);z-index:100;display:block;cursor:all-scroll;position:absolute}.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)>.orthogonal-drag-handle.start,.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)>.orthogonal-drag-handle.end{cursor:nwse-resize}.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)>.orthogonal-drag-handle.end,.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)>.orthogonal-drag-handle.start{cursor:nesw-resize}.monaco-sash.vertical>.orthogonal-drag-handle.start{left:calc(var(--vscode-sash-size) * -0.5);top:calc(var(--vscode-sash-size) * -1)}.monaco-sash.vertical>.orthogonal-drag-handle.end{left:calc(var(--vscode-sash-size) * -0.5);bottom:calc(var(--vscode-sash-size) * -1)}.monaco-sash.horizontal>.orthogonal-drag-handle.start{top:calc(var(--vscode-sash-size) * -0.5);left:calc(var(--vscode-sash-size) * -1)}.monaco-sash.horizontal>.orthogonal-drag-handle.end{top:calc(var(--vscode-sash-size) * -0.5);right:calc(var(--vscode-sash-size) * -1)}.monaco-sash:before{content:"";pointer-events:none;position:absolute;width:100%;height:100%;background:transparent}.monaco-workbench:not(.reduce-motion) .monaco-sash:before{-webkit-transition:background-color 0.1s ease-out;transition:background-color 0.1s ease-out}.monaco-sash.hover:before,.monaco-sash.active:before{background:var(--vscode-sash-hoverBorder)}.monaco-sash.vertical:before{width:var(--vscode-sash-hover-size);left:calc(50% - var(--vscode-sash-hover-size) / 2)}.monaco-sash.horizontal:before{height:var(--vscode-sash-hover-size);top:calc(50% - var(--vscode-sash-hover-size) / 2)}.pointer-events-disabled{pointer-events:none !important}.monaco-sash.debug{background:#0ff}.monaco-sash.debug.disabled{background:rgba(0, 255, 255, 0.2)}.monaco-sash.debug:not(.disabled)>.orthogonal-drag-handle{background:red}.monaco-split-view2{position:relative;width:100%;height:100%}.monaco-split-view2>.sash-container{position:absolute;width:100%;height:100%;pointer-events:none}.monaco-split-view2>.sash-container>.monaco-sash{pointer-events:initial}.monaco-split-view2>.monaco-scrollable-element{width:100%;height:100%}.monaco-split-view2>.monaco-scrollable-element>.split-view-container{width:100%;height:100%;white-space:nowrap;position:relative}.monaco-split-view2>.monaco-scrollable-element>.split-view-container>.split-view-view{white-space:initial;position:absolute}.monaco-split-view2>.monaco-scrollable-element>.split-view-container>.split-view-view:not(.visible){display:none}.monaco-split-view2.vertical>.monaco-scrollable-element>.split-view-container>.split-view-view{width:100%}.monaco-split-view2.horizontal>.monaco-scrollable-element>.split-view-container>.split-view-view{height:100%}.monaco-split-view2.separator-border>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{content:" ";position:absolute;top:0;left:0;z-index:5;pointer-events:none;background-color:var(--separator-border)}.monaco-split-view2.separator-border.horizontal>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{height:100%;width:1px}.monaco-split-view2.separator-border.vertical>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{height:1px;width:100%}.monaco-table{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:relative;height:100%;width:100%;white-space:nowrap;overflow:hidden}.monaco-table>.monaco-split-view2{border-bottom:1px solid transparent}.monaco-table>.monaco-list{-ms-flex:1;flex:1}.monaco-table-tr{display:-ms-flexbox;display:flex;height:100%}.monaco-table-th{width:100%;height:100%;font-weight:700;overflow:hidden;text-overflow:ellipsis}.monaco-table-th,.monaco-table-td{-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.monaco-table>.monaco-split-view2 .monaco-sash.vertical:before{content:"";position:absolute;left:calc(var(--vscode-sash-size) / 2);width:0;border-left:1px solid transparent}.monaco-workbench:not(.reduce-motion) .monaco-table>.monaco-split-view2,.monaco-workbench:not(.reduce-motion) .monaco-table>.monaco-split-view2 .monaco-sash.vertical:before{-webkit-transition:border-color 0.2s ease-out;transition:border-color 0.2s ease-out}.monaco-inputbox{position:relative;display:block;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:2px;font-size:inherit}.monaco-inputbox>.ibwrapper>.input,.monaco-inputbox>.ibwrapper>.mirror{padding:4px 6px}.monaco-inputbox>.ibwrapper{position:relative;width:100%;height:100%}.monaco-inputbox>.ibwrapper>.input{display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;line-height:inherit;border:none;font-family:inherit;font-size:inherit;resize:none;color:inherit}.monaco-inputbox>.ibwrapper>input{text-overflow:ellipsis}.monaco-inputbox>.ibwrapper>textarea.input{display:block;scrollbar-width:none;outline:none}.monaco-inputbox>.ibwrapper>textarea.input::-webkit-scrollbar{display:none}.monaco-inputbox>.ibwrapper>textarea.input.empty{white-space:nowrap}.monaco-inputbox>.ibwrapper>.mirror{position:absolute;display:inline-block;width:100%;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;white-space:pre-wrap;visibility:hidden;word-wrap:break-word}.monaco-inputbox-container{text-align:right}.monaco-inputbox-container .monaco-inputbox-message{display:inline-block;overflow:hidden;text-align:left;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0.4em;font-size:12px;line-height:17px;margin-top:-1px;word-wrap:break-word}.monaco-inputbox .monaco-action-bar{position:absolute;right:2px;top:4px}.monaco-inputbox .monaco-action-bar .action-item{margin-left:2px}.monaco-inputbox .monaco-action-bar .action-item .codicon{background-repeat:no-repeat;width:16px;height:16px}.monaco-findInput{position:relative}.monaco-findInput .monaco-inputbox{font-size:13px;width:100%}.monaco-findInput>.controls{position:absolute;top:3px;right:2px}.vs .monaco-findInput.disabled{background-color:#e1e1e1}.vs-dark .monaco-findInput.disabled{background-color:#333}.monaco-findInput.highlight-0 .controls,.hc-light .monaco-findInput.highlight-0 .controls{-webkit-animation:monaco-findInput-highlight-0 0.1s linear 0s;animation:monaco-findInput-highlight-0 0.1s linear 0s}.monaco-findInput.highlight-1 .controls,.hc-light .monaco-findInput.highlight-1 .controls{-webkit-animation:monaco-findInput-highlight-1 0.1s linear 0s;animation:monaco-findInput-highlight-1 0.1s linear 0s}.hc-black .monaco-findInput.highlight-0 .controls,.vs-dark .monaco-findInput.highlight-0 .controls{-webkit-animation:monaco-findInput-highlight-dark-0 0.1s linear 0s;animation:monaco-findInput-highlight-dark-0 0.1s linear 0s}.hc-black .monaco-findInput.highlight-1 .controls,.vs-dark .monaco-findInput.highlight-1 .controls{-webkit-animation:monaco-findInput-highlight-dark-1 0.1s linear 0s;animation:monaco-findInput-highlight-dark-1 0.1s linear 0s}@-webkit-keyframes monaco-findInput-highlight-0{0%{background:rgba(253, 255, 0, 0.8)}to{background:transparent}}@keyframes monaco-findInput-highlight-0{0%{background:rgba(253, 255, 0, 0.8)}to{background:transparent}}@-webkit-keyframes monaco-findInput-highlight-1{0%{background:rgba(253, 255, 0, 0.8)}99%{background:transparent}}@keyframes monaco-findInput-highlight-1{0%{background:rgba(253, 255, 0, 0.8)}99%{background:transparent}}@-webkit-keyframes monaco-findInput-highlight-dark-0{0%{background:rgba(255, 255, 255, 0.4392156863)}to{background:transparent}}@keyframes monaco-findInput-highlight-dark-0{0%{background:rgba(255, 255, 255, 0.4392156863)}to{background:transparent}}@-webkit-keyframes monaco-findInput-highlight-dark-1{0%{background:rgba(255, 255, 255, 0.4392156863)}99%{background:transparent}}@keyframes monaco-findInput-highlight-dark-1{0%{background:rgba(255, 255, 255, 0.4392156863)}99%{background:transparent}}.monaco-tl-row{display:-ms-flexbox;display:flex;height:100%;-ms-flex-align:center;align-items:center;position:relative}.monaco-tl-row.disabled{cursor:default}.monaco-tl-indent{height:100%;position:absolute;top:0;left:16px;pointer-events:none}.hide-arrows .monaco-tl-indent{left:12px}.monaco-tl-indent>.indent-guide{display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;height:100%;border-left:1px solid transparent}.monaco-workbench:not(.reduce-motion) .monaco-tl-indent>.indent-guide{-webkit-transition:border-color 0.1s linear;transition:border-color 0.1s linear}.monaco-tl-twistie,.monaco-tl-contents{height:100%}.monaco-tl-twistie{font-size:10px;text-align:right;padding-right:6px;-ms-flex-negative:0;flex-shrink:0;width:16px;display:-ms-flexbox !important;display:flex !important;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-webkit-transform:translate(3px);transform:translate(3px)}.monaco-tl-contents{-ms-flex:1;flex:1;overflow:hidden}.monaco-tl-twistie:before{border-radius:20px}.monaco-tl-twistie.collapsed:before{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.monaco-tl-twistie.codicon-tree-item-loading:before{-webkit-animation:codicon-spin 1.25s steps(30) infinite;animation:codicon-spin 1.25s steps(30) infinite}.monaco-tree-type-filter{position:absolute;top:0;display:-ms-flexbox;display:flex;padding:3px;max-width:200px;z-index:100;margin:0 6px;border:1px solid var(--vscode-widget-border);border-bottom-left-radius:4px;border-bottom-right-radius:4px}.monaco-workbench:not(.reduce-motion) .monaco-tree-type-filter{-webkit-transition:top 0.3s;transition:top 0.3s}.monaco-tree-type-filter.disabled{top:-40px !important}.monaco-tree-type-filter-grab{display:-ms-flexbox !important;display:flex !important;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;cursor:-webkit-grab;cursor:grab;margin-right:2px}.monaco-tree-type-filter-grab.grabbing{cursor:-webkit-grabbing;cursor:grabbing}.monaco-tree-type-filter-input{-ms-flex:1;flex:1}.monaco-tree-type-filter-input .monaco-inputbox{height:23px}.monaco-tree-type-filter-input .monaco-inputbox>.ibwrapper>.input,.monaco-tree-type-filter-input .monaco-inputbox>.ibwrapper>.mirror{padding:2px 4px}.monaco-tree-type-filter-input .monaco-findInput>.controls{top:2px}.monaco-tree-type-filter-actionbar{margin-left:4px}.monaco-tree-type-filter-actionbar .monaco-action-bar .action-label{padding:2px}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container{position:absolute;top:0;left:0;width:100%;height:0;z-index:13;background-color:var(--vscode-sideBar-background)}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row.monaco-list-row{position:absolute;width:100%;opacity:1 !important;overflow:hidden;background-color:var(--vscode-sideBar-background)}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row:hover{background-color:var(--vscode-list-hoverBackground) !important;cursor:pointer}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container.empty,.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container.empty .monaco-tree-sticky-container-shadow{display:none}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow{position:absolute;bottom:-3px;left:0;height:3px;width:100%;-webkit-box-shadow:var(--vscode-scrollbar-shadow) 0 6px 6px -6px inset;box-shadow:var(--vscode-scrollbar-shadow) 0 6px 6px -6px inset}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container[tabindex="0"]:focus{outline:none}.monaco-icon-label{display:-ms-flexbox;display:flex;overflow:hidden;text-overflow:ellipsis}.monaco-icon-label:before{background-size:16px;background-position:left center;background-repeat:no-repeat;padding-right:6px;width:16px;height:22px;line-height:inherit !important;display:inline-block;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;vertical-align:top;-ms-flex-negative:0;flex-shrink:0}.monaco-icon-label-container.disabled{color:var(--vscode-disabledForeground)}.monaco-icon-label>.monaco-icon-label-container{min-width:0;overflow:hidden;text-overflow:ellipsis;-ms-flex:1;flex:1}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-name-container>.label-name{color:inherit;white-space:pre}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-name-container>.label-name>.label-separator{margin:0 2px;opacity:0.5}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-suffix-container>.label-suffix{opacity:0.7;white-space:pre}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{opacity:0.7;margin-left:0.5em;font-size:0.9em;white-space:pre}.monaco-icon-label.nowrap>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{white-space:nowrap}.vs .monaco-icon-label>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{opacity:0.95}.monaco-icon-label.italic>.monaco-icon-label-container>.monaco-icon-name-container>.label-name,.monaco-icon-label.italic>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{font-style:italic}.monaco-icon-label.deprecated{text-decoration:line-through;opacity:0.66}.monaco-icon-label.italic:after{font-style:italic}.monaco-icon-label.strikethrough>.monaco-icon-label-container>.monaco-icon-name-container>.label-name,.monaco-icon-label.strikethrough>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{text-decoration:line-through}.monaco-icon-label:after{opacity:0.75;font-size:90%;font-weight:600;margin:auto 16px 0 5px;text-align:center}.monaco-list:focus .selected .monaco-icon-label,.monaco-list:focus .selected .monaco-icon-label:after{color:inherit !important}.monaco-list-row.focused.selected .label-description,.monaco-list-row.selected .label-description{opacity:0.8}.monaco-keybinding{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;line-height:10px}.monaco-keybinding>.monaco-keybinding-key{display:inline-block;border-style:solid;border-width:1px;border-radius:3px;vertical-align:middle;font-size:11px;padding:3px 5px;margin:0 2px}.monaco-keybinding>.monaco-keybinding-key:first-child{margin-left:0}.monaco-keybinding>.monaco-keybinding-key:last-child{margin-right:0}.monaco-keybinding>.monaco-keybinding-key-separator{display:inline-block}.monaco-keybinding>.monaco-keybinding-key-chord-separator{width:6px}.monaco-text-button{-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;width:100%;padding:4px;border-radius:2px;text-align:center;cursor:pointer;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;border:1px solid var(--vscode-button-border, transparent);line-height:18px}.monaco-text-button:focus{outline-offset:2px !important}.monaco-text-button:hover{text-decoration:none !important}.monaco-button.disabled:focus,.monaco-button.disabled{opacity:0.4 !important;cursor:default}.monaco-text-button .codicon{margin:0 0.2em;color:inherit !important}.monaco-text-button.monaco-text-button-with-short-label{-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:0 4px;overflow:hidden;height:28px}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label{-ms-flex-preferred-size:100%;flex-basis:100%}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label-short{-ms-flex-positive:1;flex-grow:1;width:0;overflow:hidden}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label,.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label-short{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-weight:400;font-style:inherit;padding:4px 0}.monaco-button-dropdown{display:-ms-flexbox;display:flex;cursor:pointer}.monaco-button-dropdown.disabled{cursor:default}.monaco-button-dropdown>.monaco-button:focus{outline-offset:-1px !important}.monaco-button-dropdown.disabled>.monaco-button.disabled,.monaco-button-dropdown.disabled>.monaco-button.disabled:focus,.monaco-button-dropdown.disabled>.monaco-button-dropdown-separator{opacity:0.4 !important}.monaco-button-dropdown>.monaco-button.monaco-text-button{border-right-width:0 !important}.monaco-button-dropdown .monaco-button-dropdown-separator{padding:4px 0;cursor:default}.monaco-button-dropdown .monaco-button-dropdown-separator>div{height:100%;width:1px}.monaco-button-dropdown>.monaco-button.monaco-dropdown-button{border:1px solid var(--vscode-button-border, transparent);border-left-width:0 !important;border-radius:0 2px 2px 0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.monaco-button-dropdown>.monaco-button.monaco-text-button{border-radius:2px 0 0 2px}.monaco-description-button{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;margin:4px 5px}.monaco-description-button .monaco-button-description{font-style:italic;font-size:11px;padding:4px 20px}.monaco-description-button .monaco-button-label,.monaco-description-button .monaco-button-description{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.monaco-description-button .monaco-button-label>.codicon,.monaco-description-button .monaco-button-description>.codicon{margin:0 0.2em;color:inherit !important}.monaco-button.default-colors,.monaco-button-dropdown.default-colors>.monaco-button{color:var(--vscode-button-foreground);background-color:var(--vscode-button-background)}.monaco-button.default-colors:hover,.monaco-button-dropdown.default-colors>.monaco-button:hover{background-color:var(--vscode-button-hoverBackground)}.monaco-button.default-colors.secondary,.monaco-button-dropdown.default-colors>.monaco-button.secondary{color:var(--vscode-button-secondaryForeground);background-color:var(--vscode-button-secondaryBackground)}.monaco-button.default-colors.secondary:hover,.monaco-button-dropdown.default-colors>.monaco-button.secondary:hover{background-color:var(--vscode-button-secondaryHoverBackground)}.monaco-button-dropdown.default-colors .monaco-button-dropdown-separator{background-color:var(--vscode-button-background);border-top:1px solid var(--vscode-button-border);border-bottom:1px solid var(--vscode-button-border)}.monaco-button-dropdown.default-colors .monaco-button.secondary+.monaco-button-dropdown-separator{background-color:var(--vscode-button-secondaryBackground)}.monaco-button-dropdown.default-colors .monaco-button-dropdown-separator>div{background-color:var(--vscode-button-separator)}.monaco-count-badge{padding:3px 6px;border-radius:11px;font-size:11px;min-width:18px;min-height:18px;line-height:11px;font-weight:400;text-align:center;display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box}.monaco-count-badge.long{padding:2px 3px;border-radius:2px;min-height:auto;line-height:normal}.monaco-progress-container{width:100%;height:2px;overflow:hidden}.monaco-progress-container .progress-bit{width:2%;height:2px;position:absolute;left:0;display:none}.monaco-progress-container.active .progress-bit{display:inherit}.monaco-progress-container.discrete .progress-bit{left:0;-webkit-transition:width 0.1s linear;transition:width 0.1s linear}.monaco-progress-container.discrete.done .progress-bit{width:100%}.monaco-progress-container.infinite .progress-bit{-webkit-animation-name:progress;animation-name:progress;-webkit-animation-duration:4s;animation-duration:4s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation-timing-function:linear;animation-timing-function:linear}.monaco-progress-container.infinite.infinite-long-running .progress-bit{-webkit-animation-timing-function:steps(100);animation-timing-function:steps(100)}@-webkit-keyframes progress{0%{-webkit-transform:translate(0) scaleX(1);transform:translate(0) scaleX(1)}50%{-webkit-transform:translate(2500%) scaleX(3);transform:translate(2500%) scaleX(3)}to{-webkit-transform:translate(4900%) scaleX(1);transform:translate(4900%) scaleX(1)}}@keyframes progress{0%{-webkit-transform:translate(0) scaleX(1);transform:translate(0) scaleX(1)}50%{-webkit-transform:translate(2500%) scaleX(3);transform:translate(2500%) scaleX(3)}to{-webkit-transform:translate(4900%) scaleX(1);transform:translate(4900%) scaleX(1)}}.monaco-editor .diff-hidden-lines-widget{width:100%}.monaco-editor .diff-hidden-lines{height:0px;-webkit-transform:translateY(-10px);transform:translateY(-10px);font-size:13px;line-height:14px}.monaco-editor .diff-hidden-lines:not(.dragging) .top:hover,.monaco-editor .diff-hidden-lines:not(.dragging) .bottom:hover,.monaco-editor .diff-hidden-lines .top.dragging,.monaco-editor .diff-hidden-lines .bottom.dragging{background-color:var(--vscode-focusBorder)}.monaco-editor .diff-hidden-lines .top,.monaco-editor .diff-hidden-lines .bottom{-webkit-transition:background-color 0.1s ease-out;transition:background-color 0.1s ease-out;height:4px;background-color:transparent;background-clip:padding-box;border-bottom:2px solid transparent;border-top:4px solid transparent}.monaco-editor.draggingUnchangedRegion.canMoveTop:not(.canMoveBottom) *,.monaco-editor .diff-hidden-lines .top.canMoveTop:not(.canMoveBottom),.monaco-editor .diff-hidden-lines .bottom.canMoveTop:not(.canMoveBottom){cursor:n-resize !important}.monaco-editor.draggingUnchangedRegion:not(.canMoveTop).canMoveBottom *,.monaco-editor .diff-hidden-lines .top:not(.canMoveTop).canMoveBottom,.monaco-editor .diff-hidden-lines .bottom:not(.canMoveTop).canMoveBottom{cursor:s-resize !important}.monaco-editor.draggingUnchangedRegion.canMoveTop.canMoveBottom *,.monaco-editor .diff-hidden-lines .top.canMoveTop.canMoveBottom,.monaco-editor .diff-hidden-lines .bottom.canMoveTop.canMoveBottom{cursor:ns-resize !important}.monaco-editor .diff-hidden-lines .top{-webkit-transform:translateY(4px);transform:translateY(4px)}.monaco-editor .diff-hidden-lines .bottom{-webkit-transform:translateY(-6px);transform:translateY(-6px)}.monaco-editor .diff-unchanged-lines{background:var(--vscode-diffEditor-unchangedCodeBackground)}.monaco-editor .noModificationsOverlay{z-index:1;background:var(--vscode-editor-background);display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.monaco-editor .diff-hidden-lines .center{background:var(--vscode-diffEditor-unchangedRegionBackground);color:var(--vscode-diffEditor-unchangedRegionForeground);overflow:hidden;display:block;text-overflow:ellipsis;white-space:nowrap;height:24px;-webkit-box-shadow:inset 0 -5px 5px -7px var(--vscode-diffEditor-unchangedRegionShadow), inset 0 5px 5px -7px var(--vscode-diffEditor-unchangedRegionShadow);box-shadow:inset 0 -5px 5px -7px var(--vscode-diffEditor-unchangedRegionShadow), inset 0 5px 5px -7px var(--vscode-diffEditor-unchangedRegionShadow)}.monaco-editor .diff-hidden-lines .center span.codicon{vertical-align:middle}.monaco-editor .diff-hidden-lines .center a:hover .codicon{cursor:pointer;color:var(--vscode-editorLink-activeForeground) !important}.monaco-editor .diff-hidden-lines div.breadcrumb-item{cursor:pointer}.monaco-editor .diff-hidden-lines div.breadcrumb-item:hover{color:var(--vscode-editorLink-activeForeground)}.monaco-editor .movedOriginal,.monaco-editor .movedModified{border:2px solid var(--vscode-diffEditor-move-border)}.monaco-editor .movedOriginal.currentMove,.monaco-editor .movedModified.currentMove{border:2px solid var(--vscode-diffEditor-moveActive-border)}.monaco-diff-editor .moved-blocks-lines path.currentMove{stroke:var(--vscode-diffEditor-moveActive-border)}.monaco-diff-editor .moved-blocks-lines path{pointer-events:visiblestroke}.monaco-diff-editor .moved-blocks-lines .arrow{fill:var(--vscode-diffEditor-move-border)}.monaco-diff-editor .moved-blocks-lines .arrow.currentMove{fill:var(--vscode-diffEditor-moveActive-border)}.monaco-diff-editor .moved-blocks-lines .arrow-rectangle{fill:var(--vscode-editor-background)}.monaco-diff-editor .moved-blocks-lines{position:absolute;pointer-events:none}.monaco-diff-editor .moved-blocks-lines path{fill:none;stroke:var(--vscode-diffEditor-move-border);stroke-width:2}.monaco-editor .char-delete.diff-range-empty{margin-left:-1px;border-left:solid var(--vscode-diffEditor-removedTextBackground) 3px}.monaco-editor .char-insert.diff-range-empty{border-left:solid var(--vscode-diffEditor-insertedTextBackground) 3px}.monaco-editor .fold-unchanged{cursor:pointer}.monaco-diff-editor .diff-moved-code-block{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;margin-top:-4px}.monaco-diff-editor .diff-moved-code-block .action-bar .action-label.codicon{width:12px;height:12px;font-size:12px}.monaco-diff-editor .diffOverview{z-index:9}.monaco-diff-editor .diffOverview .diffViewport{z-index:10}.monaco-diff-editor.vs .diffOverview{background:rgba(0, 0, 0, 0.031372549)}.monaco-diff-editor.vs-dark .diffOverview{background:rgba(255, 255, 255, 0.0117647059)}.monaco-scrollable-element.modified-in-monaco-diff-editor.vs .scrollbar,.monaco-scrollable-element.modified-in-monaco-diff-editor.vs-dark .scrollbar{background:rgba(0, 0, 0, 0)}.monaco-scrollable-element.modified-in-monaco-diff-editor.hc-black .scrollbar,.monaco-scrollable-element.modified-in-monaco-diff-editor.hc-light .scrollbar{background:none}.monaco-scrollable-element.modified-in-monaco-diff-editor .slider{z-index:10}.modified-in-monaco-diff-editor .slider.active{background:rgba(171, 171, 171, 0.4)}.modified-in-monaco-diff-editor.hc-black .slider.active,.modified-in-monaco-diff-editor.hc-light .slider.active{background:none}.monaco-editor .insert-sign,.monaco-diff-editor .insert-sign,.monaco-editor .delete-sign,.monaco-diff-editor .delete-sign{font-size:11px !important;opacity:0.7 !important;display:-ms-flexbox !important;display:flex !important;-ms-flex-align:center;align-items:center}.monaco-editor.hc-black .insert-sign,.monaco-diff-editor.hc-black .insert-sign,.monaco-editor.hc-black .delete-sign,.monaco-diff-editor.hc-black .delete-sign,.monaco-editor.hc-light .insert-sign,.monaco-diff-editor.hc-light .insert-sign,.monaco-editor.hc-light .delete-sign,.monaco-diff-editor.hc-light .delete-sign{opacity:1}.monaco-editor .inline-deleted-margin-view-zone,.monaco-editor .inline-added-margin-view-zone{text-align:right}.monaco-editor .arrow-revert-change{z-index:10;position:absolute}.monaco-editor .arrow-revert-change:hover{cursor:pointer}.monaco-editor .view-zones .view-lines .view-line span{display:inline-block}.monaco-editor .margin-view-zones .lightbulb-glyph:hover{cursor:pointer}.monaco-editor .char-insert,.monaco-diff-editor .char-insert{background-color:var(--vscode-diffEditor-insertedTextBackground)}.monaco-editor .line-insert,.monaco-diff-editor .line-insert{background-color:var(--vscode-diffEditor-insertedLineBackground, var(--vscode-diffEditor-insertedTextBackground))}.monaco-editor .line-insert,.monaco-editor .char-insert{-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid var(--vscode-diffEditor-insertedTextBorder)}.monaco-editor.hc-black .line-insert,.monaco-editor.hc-light .line-insert,.monaco-editor.hc-black .char-insert,.monaco-editor.hc-light .char-insert{border-style:dashed}.monaco-editor .line-delete,.monaco-editor .char-delete{-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid var(--vscode-diffEditor-removedTextBorder)}.monaco-editor.hc-black .line-delete,.monaco-editor.hc-light .line-delete,.monaco-editor.hc-black .char-delete,.monaco-editor.hc-light .char-delete{border-style:dashed}.monaco-editor .inline-added-margin-view-zone,.monaco-editor .gutter-insert,.monaco-diff-editor .gutter-insert{background-color:var(--vscode-diffEditorGutter-insertedLineBackground, var(--vscode-diffEditor-insertedLineBackground), var(--vscode-diffEditor-insertedTextBackground))}.monaco-editor .char-delete,.monaco-diff-editor .char-delete{background-color:var(--vscode-diffEditor-removedTextBackground)}.monaco-editor .line-delete,.monaco-diff-editor .line-delete{background-color:var(--vscode-diffEditor-removedLineBackground, var(--vscode-diffEditor-removedTextBackground))}.monaco-editor .inline-deleted-margin-view-zone,.monaco-editor .gutter-delete,.monaco-diff-editor .gutter-delete{background-color:var(--vscode-diffEditorGutter-removedLineBackground, var(--vscode-diffEditor-removedLineBackground), var(--vscode-diffEditor-removedTextBackground))}.monaco-diff-editor.side-by-side .editor.modified{-webkit-box-shadow:-6px 0 5px -5px var(--vscode-scrollbar-shadow);box-shadow:-6px 0 5px -5px var(--vscode-scrollbar-shadow);border-left:1px solid var(--vscode-diffEditor-border)}.monaco-diff-editor.side-by-side .editor.original{-webkit-box-shadow:6px 0 5px -5px var(--vscode-scrollbar-shadow);box-shadow:6px 0 5px -5px var(--vscode-scrollbar-shadow);border-right:1px solid var(--vscode-diffEditor-border)}.monaco-diff-editor .diffViewport{background:var(--vscode-scrollbarSlider-background)}.monaco-diff-editor .diffViewport:hover{background:var(--vscode-scrollbarSlider-hoverBackground)}.monaco-diff-editor .diffViewport:active{background:var(--vscode-scrollbarSlider-activeBackground)}.monaco-editor .diagonal-fill{background-image:linear-gradient(-45deg, var(--vscode-diffEditor-diagonalFill) 12.5%, rgba(0, 0, 0, 0) 12.5%, rgba(0, 0, 0, 0) 50%, var(--vscode-diffEditor-diagonalFill) 50%, var(--vscode-diffEditor-diagonalFill) 62.5%, rgba(0, 0, 0, 0) 62.5%, rgba(0, 0, 0, 0) 100%);background-size:8px 8px}.monaco-diff-editor .gutter{position:relative;overflow:hidden;-ms-flex-negative:0;flex-shrink:0;-ms-flex-positive:0;flex-grow:0}.monaco-diff-editor .gutter .gutterItem{opacity:0;-webkit-transition:opacity 0.7s;transition:opacity 0.7s}.monaco-diff-editor .gutter .gutterItem.showAlways{opacity:1;-webkit-transition:none;transition:none}.monaco-diff-editor .gutter .gutterItem.noTransition{-webkit-transition:none;transition:none}.monaco-diff-editor .gutter:hover .gutterItem{opacity:1;-webkit-transition:opacity 0.1s ease-in-out;transition:opacity 0.1s ease-in-out}.monaco-diff-editor .gutter .gutterItem .background{position:absolute;height:100%;left:50%;width:1px;border-left:2px var(--vscode-menu-border) solid}.monaco-diff-editor .gutter .gutterItem .buttons{position:absolute;width:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.monaco-diff-editor .gutter .gutterItem .buttons .monaco-toolbar{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.monaco-diff-editor .gutter .gutterItem .buttons .monaco-toolbar .monaco-action-bar{line-height:1}.monaco-diff-editor .gutter .gutterItem .buttons .monaco-toolbar .monaco-action-bar .actions-container{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-radius:4px;border:1px var(--vscode-menu-border) solid;background:var(--vscode-editor-background)}.monaco-diff-editor .gutter .gutterItem .buttons .monaco-toolbar .monaco-action-bar .actions-container .action-item:hover{background:var(--vscode-toolbar-hoverBackground)}.monaco-diff-editor .gutter .gutterItem .buttons .monaco-toolbar .monaco-action-bar .actions-container .action-item .action-label{padding:0.5px 1px}.monaco-component.diff-review{-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none;z-index:99}.monaco-diff-editor .diff-review{position:absolute}.monaco-component.diff-review .diff-review-line-number{text-align:right;display:inline-block;color:var(--vscode-editorLineNumber-foreground)}.monaco-component.diff-review .diff-review-summary{padding-left:10px}.monaco-component.diff-review .diff-review-shadow{position:absolute;-webkit-box-shadow:var(--vscode-scrollbar-shadow) 0 -6px 6px -6px inset;box-shadow:var(--vscode-scrollbar-shadow) 0 -6px 6px -6px inset}.monaco-component.diff-review .diff-review-row{white-space:pre}.monaco-component.diff-review .diff-review-table{display:table;min-width:100%}.monaco-component.diff-review .diff-review-row{display:table-row;width:100%}.monaco-component.diff-review .diff-review-spacer{display:inline-block;width:10px;vertical-align:middle}.monaco-component.diff-review .diff-review-spacer>.codicon{font-size:9px !important}.monaco-component.diff-review .diff-review-actions{display:inline-block;position:absolute;right:10px;top:2px;z-index:100}.monaco-component.diff-review .diff-review-actions .action-label{width:16px;height:16px;margin:2px 0}.monaco-component.diff-review .revertButton{cursor:pointer}.monaco-toolbar{height:100%}.monaco-toolbar .toolbar-toggle-more{display:inline-block;padding:0}.monaco-component.multiDiffEditor{background:var(--vscode-multiDiffEditor-background);overflow-y:hidden}.monaco-component.multiDiffEditor .focused{--vscode-multiDiffEditor-border:var(--vscode-focusBorder)}.monaco-component.multiDiffEditor .multiDiffEntry{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex:1;flex:1;overflow:hidden}.monaco-component.multiDiffEditor .multiDiffEntry .collapse-button{margin:0 5px;cursor:pointer}.monaco-component.multiDiffEditor .multiDiffEntry .collapse-button a{display:block}.monaco-component.multiDiffEditor .multiDiffEntry .header{z-index:1000;background:var(--vscode-editor-background)}.monaco-component.multiDiffEditor .multiDiffEntry .header:not(.collapsed) .header-content{border-bottom:1px solid var(--vscode-sideBarSectionHeader-border)}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content{margin:8px 8px 0;padding:4px 5px;border-top:1px solid var(--vscode-multiDiffEditor-border);border-right:1px solid var(--vscode-multiDiffEditor-border);border-left:1px solid var(--vscode-multiDiffEditor-border);border-top-left-radius:2px;border-top-right-radius:2px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;color:var(--vscode-foreground);background:var(--vscode-multiDiffEditor-headerBackground)}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content.shadow{-webkit-box-shadow:var(--vscode-scrollbar-shadow) 0 6px 6px -6px;box-shadow:var(--vscode-scrollbar-shadow) 0 6px 6px -6px}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content .file-path{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;min-width:0}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content .file-path .title{font-size:14px;line-height:22px}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content .file-path .title.original{-ms-flex:1;flex:1;min-width:0;text-overflow:ellipsis}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content .file-path .status{font-weight:600;opacity:0.75;margin:0 10px;line-height:22px}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content .actions{padding:0 8px}.monaco-component.multiDiffEditor .multiDiffEntry .editorParent{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;margin-right:8px;margin-left:8px;border-right:1px solid var(--vscode-multiDiffEditor-border);border-left:1px solid var(--vscode-multiDiffEditor-border);border-bottom:1px solid var(--vscode-multiDiffEditor-border);border-radius:2px;overflow:hidden}.monaco-component.multiDiffEditor .multiDiffEntry .editorContainer{-ms-flex:1;flex:1}.monaco-editor .selection-anchor{background-color:#007acc;width:2px !important}.monaco-editor .bracket-match{-webkit-box-sizing:border-box;box-sizing:border-box;background-color:var(--vscode-editorBracketMatch-background);border:1px solid var(--vscode-editorBracketMatch-border)}.inline-editor-progress-decoration{display:inline-block;width:1em;height:1em}.inline-progress-widget{display:-ms-flexbox !important;display:flex !important;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.inline-progress-widget .icon{font-size:80% !important}.inline-progress-widget:hover .icon{font-size:90% !important;-webkit-animation:none;animation:none}.inline-progress-widget:hover .icon:before{content:"\\ea76"}.monaco-editor .monaco-editor-overlaymessage{padding-bottom:8px;z-index:10000}.monaco-editor .monaco-editor-overlaymessage.below{padding-bottom:0;padding-top:8px;z-index:10000}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.monaco-editor .monaco-editor-overlaymessage.fadeIn{-webkit-animation:fadeIn 0.15s ease-out;animation:fadeIn 0.15s ease-out}@-webkit-keyframes fadeOut{0%{opacity:1}to{opacity:0}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.monaco-editor .monaco-editor-overlaymessage.fadeOut{-webkit-animation:fadeOut 0.1s ease-out;animation:fadeOut 0.1s ease-out}.monaco-editor .monaco-editor-overlaymessage .message{padding:2px 4px;color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-inputValidation-infoBorder);border-radius:3px}.monaco-editor .monaco-editor-overlaymessage .message p{margin-block:0px}.monaco-editor .monaco-editor-overlaymessage .message a{color:var(--vscode-textLink-foreground)}.monaco-editor .monaco-editor-overlaymessage .message a:hover{color:var(--vscode-textLink-activeForeground)}.monaco-editor.hc-black .monaco-editor-overlaymessage .message,.monaco-editor.hc-light .monaco-editor-overlaymessage .message{border-width:2px}.monaco-editor .monaco-editor-overlaymessage .anchor{width:0 !important;height:0 !important;border-color:transparent;border-style:solid;z-index:1000;border-width:8px;position:absolute;left:2px}.monaco-editor .monaco-editor-overlaymessage .anchor.top{border-bottom-color:var(--vscode-inputValidation-infoBorder)}.monaco-editor .monaco-editor-overlaymessage .anchor.below{border-top-color:var(--vscode-inputValidation-infoBorder)}.monaco-editor .monaco-editor-overlaymessage:not(.below) .anchor.top,.monaco-editor .monaco-editor-overlaymessage.below .anchor.below{display:none}.monaco-editor .monaco-editor-overlaymessage.below .anchor.top{display:inherit;top:-8px}.post-edit-widget{-webkit-box-shadow:0 0 8px 2px var(--vscode-widget-shadow);box-shadow:0 0 8px 2px var(--vscode-widget-shadow);border:1px solid var(--vscode-widget-border, transparent);border-radius:4px;background-color:var(--vscode-editorWidget-background);overflow:hidden}.post-edit-widget .monaco-button{padding:2px;border:none;border-radius:0}.post-edit-widget .monaco-button:hover{background-color:var(--vscode-button-secondaryHoverBackground) !important}.post-edit-widget .monaco-button .codicon{margin:0}@font-face{font-family:codicon;font-display:block;src:url(data:font/ttf;base64,AAEAAAALAIAAAwAwR1NVQiCLJXoAAAE4AAAAVE9TLzI3T0tHAAABjAAAAGBjbWFwO462kQAACRgAABq0Z2x5ZkExNwYAACdkAAD1iGhlYWRYl6BTAAAA4AAAADZoaGVhAlsC9gAAALwAAAAkaG10eBi9//oAAAHsAAAHLGxvY2Ebh1ieAAAjzAAAA5htYXhwAuwBgQAAARgAAAAgbmFtZZP3uUsAARzsAAAB+HBvc3RMW9BGAAEe5AAAGP8AAQAAASwAAAAAASz////+AS4AAQAAAAAAAAAAAAAAAAAAAcsAAQAAAAEAANAcvqJfDzz1AAsBLAAAAAB8JbCAAAAAAHwlsID////9AS4BLQAAAAgAAgAAAAAAAAABAAABywF1ABcAAAAAAAIAAAAKAAoAAAD/AAAAAAAAAAEAAAAKADAAPgACREZMVAAObGF0bgAaAAQAAAAAAAAAAQAAAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAQBKwGQAAUAAADLANIAAAAqAMsA0gAAAJAADgBNAAACAAUDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBmRWQAwOpg8QEBLAAAABsBRwADAAAAAQAAAAAAAAAAAAAAAAACAAAAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASz//wEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEs//8BLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASz//wEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLP//ASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASz//wEsAAABLAAAASwAAAEs//8BLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAASwAAAEsAAABLAAAAAAABQAAAAMAAAAsAAAABAAABSAAAQAAAAAEGgADAAEAAAAsAAMACgAABSAABAPuAAAAEgAQAAMAAuqI6ozqx+rJ6wnrTuwx8QH//wAA6mDqiuqP6snqzOsL61DxAf//AAAAAAAAAAAAAAAAAAAAAAABABIAYgBmANYA1gFQAdYDmAAAAAMA7wFHAUQAswE0AZIBIgFrAQwBcQBNAcABXQFnAWYAkAA1AS0AhQDNAPwAQAGQAHgAFgG7AJoAhwFAARsBEgETAaUAxwClALsBnQF9AIoBjgF2AYUBgwF3AYYBjQGIAYEAvQF8AYoAAgAEAAUACgALAAwADQAOAA8AEAASABoAHAAdAB4AWwBcAF0AXgBhAGIAIQAiACMAJAAlACgAKgArACwALQAuAC8AMQAyADMANAA7ADgAPAA9AD4APwBBAEIARQBHAEgASgBUAFUAVgBXAGYAaABqAG0AcQBzAHQAdQB2AHcAeQB6AHsAfAB9AH4AgACBAIMAhACGAIgAiwCOAI8AkgCTAJQAlQCWAJcAmACZAJsAnQCeAJ8AoAChAKIApACnAKgAqQCTAKoAqwCtALcAuAC8AL4AwgDDAMYAyADJAMoAywDRANIA0wDUANUA1gDXANgA7QDwAPEA9AD3APgA+QD6AP4A/wEEAQUBBgELAQ0BDgEPAREBFQEWARkBGgEdAR4BJQEpASoBKwEsAS4BLwEwATEBMgEzATgBOQE6ATsBPAE9AT4BPwFBAUMBRQFGAUgBSQFLAUwBTQFOAU8BVgFXAVgBWQFaAVwBYQFiAWMBZQFoAWoBbgFvAXABcgFzAXgBeQF6AXsBfgF/AYABggGEAYcBiQGLAZQBlQGeAZ8BoQGjAaQBpgGnAagBqQGqAa4BsAGxAbIBtQG2AbcBuQG6AcEBwgHDAcQBxQHJAcoA8gDzAPUA9gBfAGAAbwA5AHAAYwGMAG4AcgBsAFoAJgAnAQcAjACRAMQBrwABABcAZADsARwBUgGPAScAuQFgAV8BIAF0ASgBNgBZAbgAQwEIAI0AvwD9ARgBNwApASYBHwA2ADcASQGRAbMBrQGrAawArwFQAVMBFwBrAcYByAHHAZcBmAGZAZoBmwGcAZYAEQBSASEAnAG/AGkAzwDbANoA2QBQAE8ATgAUANAArgCwAFgAZwFVAKMAZQAVAMAAwQEkAB8AIAD7ABMBtAEUAOsA3ADdAOIA4ADhAOQA5QDnAOkA6gDfAN4BkwDMATUAiQAGAAcACAAJAOgA4wDmABsAxQEDAQAAOgAZABgATACxALIBWwBLAV4BbQDOAQoBoAGiAEYBaQCmAbwAMAEjARABCQFCAFEA7gFKAWwAggB/AXUBZAC2ALQAtQG+Ab0ARAFUAVEAUwC6AQIBAQCsAAABBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAABWUAAAAAAAAAcsAAOpgAADqYAAAAAMAAOphAADqYQAAAO8AAOpiAADqYgAAAUcAAOpjAADqYwAAAUQAAOpkAADqZAAAALMAAOplAADqZQAAATQAAOpmAADqZgAAAZIAAOpnAADqZwAAASIAAOpoAADqaAAAAWsAAOppAADqaQAAAQwAAOpqAADqagAAAXEAAOprAADqawAAAE0AAOpsAADqbAAAAcAAAOptAADqbQAAAV0AAOpuAADqbgAAAWcAAOpvAADqbwAAAWYAAOpwAADqcAAAAJAAAOpxAADqcQAAADUAAOpyAADqcgAAAS0AAOpzAADqcwAAAIUAAOp0AADqdAAAAM0AAOp1AADqdQAAAPwAAOp2AADqdgAAAEAAAOp3AADqdwAAAZAAAOp4AADqeAAAAHgAAOp5AADqeQAAABYAAOp6AADqegAAAbsAAOp7AADqewAAAJoAAOp8AADqfAAAAIcAAOp9AADqfQAAAUAAAOp+AADqfgAAARsAAOp/AADqfwAAARIAAOqAAADqgAAAARMAAOqBAADqgQAAAaUAAOqCAADqggAAAMcAAOqDAADqgwAAAKUAAOqEAADqhAAAALsAAOqFAADqhQAAAZ0AAOqGAADqhgAAAX0AAOqHAADqhwAAAIoAAOqIAADqiAAAAY4AAOqKAADqigAAAXYAAOqLAADqiwAAAYUAAOqMAADqjAAAAYMAAOqPAADqjwAAAXcAAOqQAADqkAAAAYYAAOqRAADqkQAAAY0AAOqSAADqkgAAAYgAAOqTAADqkwAAAYEAAOqUAADqlAAAAL0AAOqVAADqlQAAAXwAAOqWAADqlgAAAYoAAOqXAADqlwAAAAIAAOqYAADqmAAAAAQAAOqZAADqmQAAAAUAAOqaAADqmgAAAAoAAOqbAADqmwAAAAsAAOqcAADqnAAAAAwAAOqdAADqnQAAAA0AAOqeAADqngAAAA4AAOqfAADqnwAAAA8AAOqgAADqoAAAABAAAOqhAADqoQAAABIAAOqiAADqogAAABoAAOqjAADqowAAABwAAOqkAADqpAAAAB0AAOqlAADqpQAAAB4AAOqmAADqpgAAAFsAAOqnAADqpwAAAFwAAOqoAADqqAAAAF0AAOqpAADqqQAAAF4AAOqqAADqqgAAAGEAAOqrAADqqwAAAGIAAOqsAADqrAAAACEAAOqtAADqrQAAACIAAOquAADqrgAAACMAAOqvAADqrwAAACQAAOqwAADqsAAAACUAAOqxAADqsQAAACgAAOqyAADqsgAAACoAAOqzAADqswAAACsAAOq0AADqtAAAACwAAOq1AADqtQAAAC0AAOq2AADqtgAAAC4AAOq3AADqtwAAAC8AAOq4AADquAAAADEAAOq5AADquQAAADIAAOq6AADqugAAADMAAOq7AADquwAAADQAAOq8AADqvAAAADsAAOq9AADqvQAAADgAAOq+AADqvgAAADwAAOq/AADqvwAAAD0AAOrAAADqwAAAAD4AAOrBAADqwQAAAD8AAOrCAADqwgAAAEEAAOrDAADqwwAAAEIAAOrEAADqxAAAAEUAAOrFAADqxQAAAEcAAOrGAADqxgAAAEgAAOrHAADqxwAAAEoAAOrJAADqyQAAAFQAAOrMAADqzAAAAFUAAOrNAADqzQAAAFYAAOrOAADqzgAAAFcAAOrPAADqzwAAAGYAAOrQAADq0AAAAGgAAOrRAADq0QAAAGoAAOrSAADq0gAAAG0AAOrTAADq0wAAAHEAAOrUAADq1AAAAHMAAOrVAADq1QAAAHQAAOrWAADq1gAAAHUAAOrXAADq1wAAAHYAAOrYAADq2AAAAHcAAOrZAADq2QAAAHkAAOraAADq2gAAAHoAAOrbAADq2wAAAHsAAOrcAADq3AAAAHwAAOrdAADq3QAAAH0AAOreAADq3gAAAH4AAOrfAADq3wAAAIAAAOrgAADq4AAAAIEAAOrhAADq4QAAAIMAAOriAADq4gAAAIQAAOrjAADq4wAAAIYAAOrkAADq5AAAAIgAAOrlAADq5QAAAIsAAOrmAADq5gAAAI4AAOrnAADq5wAAAI8AAOroAADq6AAAAJIAAOrpAADq6QAAAJMAAOrqAADq6gAAAJQAAOrrAADq6wAAAJUAAOrsAADq7AAAAJYAAOrtAADq7QAAAJcAAOruAADq7gAAAJgAAOrvAADq7wAAAJkAAOrwAADq8AAAAJsAAOrxAADq8QAAAJ0AAOryAADq8gAAAJ4AAOrzAADq8wAAAJ8AAOr0AADq9AAAAKAAAOr1AADq9QAAAKEAAOr2AADq9gAAAKIAAOr3AADq9wAAAKQAAOr4AADq+AAAAKcAAOr5AADq+QAAAKgAAOr6AADq+gAAAKkAAOr7AADq+wAAAJMAAOr8AADq/AAAAKoAAOr9AADq/QAAAKsAAOr+AADq/gAAAK0AAOr/AADq/wAAALcAAOsAAADrAAAAALgAAOsBAADrAQAAALwAAOsCAADrAgAAAL4AAOsDAADrAwAAAMIAAOsEAADrBAAAAMMAAOsFAADrBQAAAMYAAOsGAADrBgAAAMgAAOsHAADrBwAAAMkAAOsIAADrCAAAAMoAAOsJAADrCQAAAMsAAOsLAADrCwAAANEAAOsMAADrDAAAANIAAOsNAADrDQAAANMAAOsOAADrDgAAANQAAOsPAADrDwAAANUAAOsQAADrEAAAANYAAOsRAADrEQAAANcAAOsSAADrEgAAANgAAOsTAADrEwAAAO0AAOsUAADrFAAAAPAAAOsVAADrFQAAAPEAAOsWAADrFgAAAPQAAOsXAADrFwAAAPcAAOsYAADrGAAAAPgAAOsZAADrGQAAAPkAAOsaAADrGgAAAPoAAOsbAADrGwAAAP4AAOscAADrHAAAAP8AAOsdAADrHQAAAQQAAOseAADrHgAAAQUAAOsfAADrHwAAAQYAAOsgAADrIAAAAQsAAOshAADrIQAAAQ0AAOsiAADrIgAAAQ4AAOsjAADrIwAAAQ8AAOskAADrJAAAAREAAOslAADrJQAAARUAAOsmAADrJgAAARYAAOsnAADrJwAAARkAAOsoAADrKAAAARoAAOspAADrKQAAAR0AAOsqAADrKgAAAR4AAOsrAADrKwAAASUAAOssAADrLAAAASkAAOstAADrLQAAASoAAOsuAADrLgAAASsAAOsvAADrLwAAASwAAOswAADrMAAAAS4AAOsxAADrMQAAAS8AAOsyAADrMgAAATAAAOszAADrMwAAATEAAOs0AADrNAAAATIAAOs1AADrNQAAATMAAOs2AADrNgAAATgAAOs3AADrNwAAATkAAOs4AADrOAAAAToAAOs5AADrOQAAATsAAOs6AADrOgAAATwAAOs7AADrOwAAAT0AAOs8AADrPAAAAT4AAOs9AADrPQAAAT8AAOs+AADrPgAAAUEAAOs/AADrPwAAAUMAAOtAAADrQAAAAUUAAOtBAADrQQAAAUYAAOtCAADrQgAAAUgAAOtDAADrQwAAAUkAAOtEAADrRAAAAUsAAOtFAADrRQAAAUwAAOtGAADrRgAAAU0AAOtHAADrRwAAAU4AAOtIAADrSAAAAU8AAOtJAADrSQAAAVYAAOtKAADrSgAAAVcAAOtLAADrSwAAAVgAAOtMAADrTAAAAVkAAOtNAADrTQAAAVoAAOtOAADrTgAAAVwAAOtQAADrUAAAAWEAAOtRAADrUQAAAWIAAOtSAADrUgAAAWMAAOtTAADrUwAAAWUAAOtUAADrVAAAAWgAAOtVAADrVQAAAWoAAOtWAADrVgAAAW4AAOtXAADrVwAAAW8AAOtYAADrWAAAAXAAAOtZAADrWQAAAXIAAOtaAADrWgAAAXMAAOtbAADrWwAAAXgAAOtcAADrXAAAAXkAAOtdAADrXQAAAXoAAOteAADrXgAAAXsAAOtfAADrXwAAAX4AAOtgAADrYAAAAX8AAOthAADrYQAAAYAAAOtiAADrYgAAAYIAAOtjAADrYwAAAYQAAOtkAADrZAAAAYcAAOtlAADrZQAAAYkAAOtmAADrZgAAAYsAAOtnAADrZwAAAZQAAOtoAADraAAAAZUAAOtpAADraQAAAZ4AAOtqAADragAAAZ8AAOtrAADrawAAAaEAAOtsAADrbAAAAaMAAOttAADrbQAAAaQAAOtuAADrbgAAAaYAAOtvAADrbwAAAacAAOtwAADrcAAAAagAAOtxAADrcQAAAakAAOtyAADrcgAAAaoAAOtzAADrcwAAAa4AAOt0AADrdAAAAbAAAOt1AADrdQAAAbEAAOt2AADrdgAAAbIAAOt3AADrdwAAAbUAAOt4AADreAAAAbYAAOt5AADreQAAAbcAAOt6AADregAAAbkAAOt7AADrewAAAboAAOt8AADrfAAAAcEAAOt9AADrfQAAAcIAAOt+AADrfgAAAcMAAOt/AADrfwAAAcQAAOuAAADrgAAAAcUAAOuBAADrgQAAAckAAOuCAADrggAAAcoAAOuDAADrgwAAAPIAAOuEAADrhAAAAPMAAOuFAADrhQAAAPUAAOuGAADrhgAAAPYAAOuHAADrhwAAAF8AAOuIAADriAAAAGAAAOuJAADriQAAAG8AAOuKAADrigAAADkAAOuLAADriwAAAHAAAOuMAADrjAAAAGMAAOuNAADrjQAAAYwAAOuOAADrjgAAAG4AAOuPAADrjwAAAHIAAOuQAADrkAAAAGwAAOuRAADrkQAAAFoAAOuSAADrkgAAACYAAOuTAADrkwAAACcAAOuUAADrlAAAAQcAAOuVAADrlQAAAIwAAOuWAADrlgAAAJEAAOuXAADrlwAAAMQAAOuYAADrmAAAAa8AAOuZAADrmQAAAAEAAOuaAADrmgAAABcAAOubAADrmwAAAGQAAOucAADrnAAAAOwAAOudAADrnQAAARwAAOueAADrngAAAVIAAOufAADrnwAAAY8AAOugAADroAAAAScAAOuhAADroQAAALkAAOuiAADrogAAAWAAAOujAADrowAAAV8AAOukAADrpAAAASAAAOulAADrpQAAAXQAAOumAADrpgAAASgAAOunAADrpwAAATYAAOuoAADrqAAAAFkAAOupAADrqQAAAbgAAOuqAADrqgAAAEMAAOurAADrqwAAAQgAAOusAADrrAAAAI0AAOutAADrrQAAAL8AAOuuAADrrgAAAP0AAOuvAADrrwAAARgAAOuwAADrsAAAATcAAOuxAADrsQAAACkAAOuyAADrsgAAASYAAOuzAADrswAAAR8AAOu0AADrtAAAADYAAOu1AADrtQAAADcAAOu2AADrtgAAAEkAAOu3AADrtwAAAZEAAOu4AADruAAAAbMAAOu5AADruQAAAa0AAOu6AADrugAAAasAAOu7AADruwAAAawAAOu8AADrvAAAAK8AAOu9AADrvQAAAVAAAOu+AADrvgAAAVMAAOu/AADrvwAAARcAAOvAAADrwAAAAGsAAOvBAADrwQAAAcYAAOvCAADrwgAAAcgAAOvDAADrwwAAAccAAOvEAADrxAAAAZcAAOvFAADrxQAAAZgAAOvGAADrxgAAAZkAAOvHAADrxwAAAZoAAOvIAADryAAAAZsAAOvJAADryQAAAZwAAOvKAADrygAAAZYAAOvLAADrywAAABEAAOvMAADrzAAAAFIAAOvNAADrzQAAASEAAOvOAADrzgAAAJwAAOvPAADrzwAAAb8AAOvQAADr0AAAAGkAAOvRAADr0QAAAM8AAOvSAADr0gAAANsAAOvTAADr0wAAANoAAOvUAADr1AAAANkAAOvVAADr1QAAAFAAAOvWAADr1gAAAE8AAOvXAADr1wAAAE4AAOvYAADr2AAAABQAAOvZAADr2QAAANAAAOvaAADr2gAAAK4AAOvbAADr2wAAALAAAOvcAADr3AAAAFgAAOvdAADr3QAAAGcAAOveAADr3gAAAVUAAOvfAADr3wAAAKMAAOvgAADr4AAAAGUAAOvhAADr4QAAABUAAOviAADr4gAAAMAAAOvjAADr4wAAAMEAAOvkAADr5AAAASQAAOvlAADr5QAAAB8AAOvmAADr5gAAACAAAOvnAADr5wAAAPsAAOvoAADr6AAAABMAAOvpAADr6QAAAbQAAOvqAADr6gAAARQAAOvrAADr6wAAAOsAAOvsAADr7AAAANwAAOvtAADr7QAAAN0AAOvuAADr7gAAAOIAAOvvAADr7wAAAOAAAOvwAADr8AAAAOEAAOvxAADr8QAAAOQAAOvyAADr8gAAAOUAAOvzAADr8wAAAOcAAOv0AADr9AAAAOkAAOv1AADr9QAAAOoAAOv2AADr9gAAAN8AAOv3AADr9wAAAN4AAOv4AADr+AAAAZMAAOv5AADr+QAAAMwAAOv6AADr+gAAATUAAOv7AADr+wAAAIkAAOv8AADr/AAAAAYAAOv9AADr/QAAAAcAAOv+AADr/gAAAAgAAOv/AADr/wAAAAkAAOwAAADsAAAAAOgAAOwBAADsAQAAAOMAAOwCAADsAgAAAOYAAOwDAADsAwAAABsAAOwEAADsBAAAAMUAAOwFAADsBQAAAQMAAOwGAADsBgAAAQAAAOwHAADsBwAAADoAAOwIAADsCAAAABkAAOwJAADsCQAAABgAAOwKAADsCgAAAEwAAOwLAADsCwAAALEAAOwMAADsDAAAALIAAOwNAADsDQAAAVsAAOwOAADsDgAAAEsAAOwPAADsDwAAAV4AAOwQAADsEAAAAW0AAOwRAADsEQAAAM4AAOwSAADsEgAAAQoAAOwTAADsEwAAAaAAAOwUAADsFAAAAaIAAOwVAADsFQAAAEYAAOwWAADsFgAAAWkAAOwXAADsFwAAAKYAAOwYAADsGAAAAbwAAOwZAADsGQAAADAAAOwaAADsGgAAASMAAOwbAADsGwAAARAAAOwcAADsHAAAAQkAAOwdAADsHQAAAUIAAOweAADsHgAAAFEAAOwfAADsHwAAAO4AAOwgAADsIAAAAUoAAOwhAADsIQAAAWwAAOwiAADsIgAAAIIAAOwjAADsIwAAAH8AAOwkAADsJAAAAXUAAOwlAADsJQAAAWQAAOwmAADsJgAAALYAAOwnAADsJwAAALQAAOwoAADsKAAAALUAAOwpAADsKQAAAb4AAOwqAADsKgAAAb0AAOwrAADsKwAAAEQAAOwsAADsLAAAAVQAAOwtAADsLQAAAVEAAOwuAADsLgAAAFMAAOwvAADsLwAAALoAAOwwAADsMAAAAQIAAOwxAADsMQAAAQEAAPEBAADxAQAAAKwAAAAAAJQA1ADoARQBMgFsAaYB4AIaAi4CQgJWAmoCfgKSAqYCyALeAvwDTgOoA9QEKgSQBOAFLgUuBVwFrgXKBmoHHgdeB+gIBghuCOAJmApMCpIKugrMCxQLJgs4C0oLXAukC74L0AvcC/oMJgxUDLgM7g0CDSoNUg3ADfIOQA56DpQO6g9ED4wPxg/qEHYQohDIESYRYBG0EeoSDhJ8EtoTJBPYE/wUUhR8FIgU+hVOFbgWGBZ6FrAW1BbsFvwXDBcYFywXOhdeF9wX9hgQGF4Yzhj6GQwZRhmQGcAZ2hoCGh4aNBpmGogarBrgGvgbeBuoG84cHBw6HGAcgBykHN4c+h0cHUwdfh2qHcwd9B4gHkgegB7YH1ofjB+mH94gPCB+IOIhPiF2IcgiMCJ4Ir4i/iNkI4YjtCPGI+IkZiSEJKAkvCUKJUglfCWqJhwmjicGJ1InfCf8KCIoqCk8KbgqQCqKKs4rYiuiK9gsDixMLO4taC2MLiYuqC7mLvovQC9kL5Av0C/2MFQwhDDmMSIxUDGWMfYyJjJEMpIyxjLqM1gzrjPqNBo0aDUgNVI1uDYgNnQ2tjbkNvw3FDcyN1o3fjegN7433Df6OBI4MDhIOGY4fjiWONA5DDleOfg6ODpcOr461jryO4g7oDvAO/I8Vjx0PMY88j0gPWY9jD2sPcQ93j4KPjY+XD6MPuw/Bj9cP5I/3kAIQERAfEC8QPBBQEFyQaBB2kH4QjxCZELqQyRDnkPoRMxFBEU2RZxFwEYORnBGyEcER0pHnkgWSGpIvEjSSQJJSEmASZhJwEngSkBKdEr+S1xLvkvwTEBMbEzSTQJNKE2ATZxNqk5kTspO7k9oT+RQKlCaUNJRClFiUZBRwFJQUqpTBlNgU4hTrFPQVChUSFRsVMBVHFVWVZZVvFXwVipWdFbSVwRXIldeV+pYVFjOWTRZlFoKWkJafFrWW0pbkFv8XIRdSl1oXYZedF6mXrxe4l8sX3Jfkl/EYAhgmGC6YPRhNGFYYYRhpmHcYnJipmLSYxhj0GP6ZHpktmUgZUhlgmX4ZjRmeGa6ZvZnPGeIZ+BoBGhOaOZpPms+bPRtIG1EbbBt2G4EbhxuSm6cbspvHG+6b/RwBHAUcCRwNHCUcNRxFHFecaRyFHI+coxzEnOuc950MHRidJ509HU2dYJ1onYUdlh2mnb0dxR3Und+d9h39ni6eSp5zHpEeoh6xAAEAAD//wEsASwAEQAiADQAZAAAJTQuASIOARUUFh8BFjI/AT4BByInNz4EMzIeARcWFwYnJjQ+AjIeAhQOAQcGJy4BFzA9AS4BJyYnNjc2NzYnNi4CIg4CFRQeARcWFwYHDgEHFS4BNTQ+ATIeARUUBgEsKEVSRSgcGQ0mXCYOGByWKSIBAwoOEBUKDx0VBgMCIlgECA0SFhEOCAgOCRMUCA6HBBEMCQsFBAcFCgEBCxQaHRoTCwYICAQFCgkMEQUSFCM8SDwjE5YpRSgoRSkhPBUKGhoKFTxiGAcKEQ4KBQsVDggJGIsJFBINCQgOEhURDgQICAQOWwEBDhgJBwUDBAcIEBQOGhQKChQaDgoTDggEBAQHCRgPARIwGiQ8IyM8JBowAAAAAAIAAAAAARoBGgAaACgAACUWDgEHNCc+ATcuAw4BByYjPgIzMh4CByIOARQeATI+ATQuASMBGQEUIhYDGSIBARAdIx4TAgkKAxglFREfGAyyFycWFicuJxcXJxfFFiUYAgoJAyUaER4SAQ8cEQMVIhQMGB8aFycuJxYWJy4nFgAAAQAAAAABBwEaAAsAACUVIxUjNSM1MzUzFQEHcRNwcBOpE3BwE3BwAAQAAAAAARoBGgANABIAFgAaAAABIwcVFzMVFzM3NTM3NQcjNTMVBzUzFScjFTMBEPQJCQoJzgoJCRzX4c+8JnBwARkJOAqfCQmfCjgvJiaplpZxEwAAAAABAAAAAAESAMwADwAANxcHJzU3FwczJzcXFQcnNzgoDTg4DSi8KA04OA0ogygNOA05DigoDjkNOA0oAAADAAAAAAEHAQcACQAWACMAADcXNTMVNxcHIyc3NC4BIg4BFB4BMj4BJxQOASIuATQ+ATIeAWUoEyYOOA04sB8zPjMeHjM+Mx8TGSwyLBkZLDIsGZQobGomDTc3Dx8zHx8zPjMeHjMfGSwZGSwyLBkZLAAAAAMAAAAAAQcBBwAJABcAJAAANyczNSM3JwcVFzcyHgEUDgIuAj4BFxUiDgEUHgEyPgE0LgGUKGxqJg03Nw8fMx8fMz4zHgEfMx8ZLBkZLDIsGRksZSgTJg44DTiwHzM+Mx4BHzM+Mx8BEhksMiwZGSwyLBkAAwAAAAABBwEHAAkAFgAjAAA3FyMVMwcXNzUnBwYuAj4BMh4BFA4BJzI+ATQuASIOARQeAZgobGomDTc3Dx8zHgEfMz4zHx8zHxksGRksMiwZGSzHKBMmDjgNOK8BHzM+Mx8fMz4zHhIZLDIsGRksMiwZAAADAAAAAAEHAQcACQAWACMAAD8BFTM1FzcnIwcXFA4CLgI+ATIeAQc0LgEiDgEUHgEyPgFlKBMmDjgNOLAfMz4zHgEfMz4zHxMZLDIsGRksMiwZmChsaiYNNzcPHzMeAR8zPjMfHzMfGSwZGSwyLBkZLAAAAAEAAAAAAQQBBwAJAAA3FzM3Jwc1IxUnO14NXg1OE06DXV0OTsTETgABAAAAAAEHAPMACQAANwcVFzcnMzUjN4NdXQ5OxMRO8l4NXg5NE04AAQAAAAABBwDxAAkAAD8BNScHFyMVMwepXl4OTsPDTihdDl0NThJOAAEAAAAAAMkA4QAJAAA3ByMnNxc1MxU3yS8NLw0fEx+KLy8NHmhoHwABAAAAAADRAM8ACQAANyc1NxcHMxUjF3ovLw0faWkfYy8NLw0fEx4AAQAAAAAA0QDPAAkAADcXFQcnNyM1MyeiLy8NHmhoHs4vDS8OHhMfAAEAAAAAAMkA4QAJAAA/ATMXBycVIzUHXi8NLw0fEx+yLy8NH2lpHwACAAAAAAEaARsACQATAAA3JzU3FwczFSMXPwE1JwcXIxUzB088PA0s6eksgTw8DSzp6SwSPA08DSwTLHY8DTwNLBMsAAEAAAAAAQQBBwAJAAAlJyMHFzcVMzUXAQReDV4NThNNqV5eDk7Dw04AAAAAAgAAAAABGgEaAAcADwAAJRUHJxUnFzUXJxUPARUXNQEZQWY6qAFeVhol6KA1JSVLDZABOSUaIUsRYQAAAwAAAAABIgEaABsAJwA2AAAlJy4BByMiBg8BBh4COwEyNj8BFxY7ATI+AgciLwEzNxccAQ4BIzMjNi8BMx4BFRcWDgIjASBLAgoHWAYKAkwCAgUJBTcFCgIMOAUGWAQJBQJrAgJsORQqAgQBV0UCAkxFAgRMAQECAgIs4QUIAQcF4QUJCAMHBiErAwQHCQgBUDR9AQMDAQYH4QECAuEBAwICAAAEAAAAAAEaARoAHQAsADUAPQAANzMmJyM3MzQ3Izc1MxUXNjcnNTM1IxUzFQcGHgI3NjMyHgIVFA4BLgI2FxYXMjcnBhUUNxc2NTQmIyI4XgsISx0bAhMkJgEJCQETcBJJAgEFCHISFw8cFQsZKi0gCRIUERcSD08KGE4LIRgSEwgKOQkJSE5PAwQCAUsTEkuOBQkJBIkNDBUbDxcmEQkgLCpZEAELTg4SGEZPDxIXIQAAAAADAAAAAAEKARoADwAWABoAACUnNTM1IxUzFQcGFjsBMjYnNzUzFRcjBzczFwEESBJwE0oECwq8CguIAiYkbicdgh0ujUsTEkuOChERkAROT0dLOTkAAAAAAwAAAAABGgEbACoAMQA6AAA3BiMVFB8BIzc2PQE0PgIXMzY3JicmDgIdARQPARczFBYyNjUzNycmNQcyNicjFBY3MjY0JiIGFBb0CQoIB7UHCQ0XHw8DBQcGBxQmHRAHCwhCFh8WQgkLB14HDAElC1MXISEuISGYAgQaGRQVGRkpEB4VCgIJBwIBAg0bJBQpFhYhDQ8WFg8NIRYWbQsICAuEIS4hIS4hAAAAAAYAAAAAASoBJgAVACcALgAzADgAQQAAEwYHIgcOAh0BFA8BNzY9ATQ+Ah8BBgcWHwEjBzMUFjI2NTM3JyYHBiImNTMWNyYnNxcPARc3JhcyNjQmIgYUFqIKBwkKDxcNBBwGBxAdJhRVCQoCBgd6EgwWHxZCCQsGUgYPCyUBdQYHCw2ClA2VBzMXISEuISEBGAgKAwUVHhApEREdExYWKRQkGw0CkQMBExIUEw8WFg8NIRFMBgsICN0HBwoNZ5UNlQYBIS4hIS4hAAAAAAQAAAAAASoBJgAVACcALgAyAAATJicmDgIdARQHNzY9ATQ+AhcWFwczJyY9ATcVFB8BByMUBiImJxcyNicjFBYHARcBzxUbFCYdEAcZAQ0XHw8UED1sBwgTBwsJQhYfFQEmBwwBJQt7AQkN/vcBBRAEAg0bJBQpFhUZCQkpEB4VCgIDDKwUGRoWEykWFiENDxYVDxILCAgLCQEJDf73AAADAAAAAAEGARsAGgAhADQAADcmPQE0LgInJg4CHQEUDwEXMxQWMjY1MzcHBiImNTMWJzc2PQE0PgIXFhceAR0BFB8B+wcMGB8SFCYdEAcLCEIWHxZCCWMGDwslAW4HCQ0XHw8eEwkKCAdmFRcmEiEbEQICDRskFCkXFSENDxYWDw0aBgsICBsVGBopEB4VCgIEFgsbDiYaGRQAAAADAAAAAADhAPQADgAWAB4AADc1MzIWFRQGBx4BFRQGIycVMzI2NTQjJzMyNjQmKwFePx8gEA0QEiIeKioSFCUrJxAUEhMmOLwaGA0VBQQYERkdWEQSECIUEB0OAAkAAAAAARoBBwAQABcAHgAiACYAKgAuADIANgAAASMPAS8BIwcVFzMXMzczNzUHLwEjNTMfASMPATU3MwcjFTMVIxUzJzMVIzcjFTMHMxUjFTMVIwEQZwcMDAdnCQljEA4QYwmMBAZdWQ56XgcCDVqWOTk5OTk5Obw4ODg4ODg4AQcDDAwDCrsKEBAKu7gDA6kOmwMCoQ0mEjkSOBM4EhMTExIAAgAAAAAA9AEaAAgADgAAEyMHFRc3Fzc1BycjBzUz6qgKEU1NERNEDkSWARkJ9AZWVgb020tL0gADAAAAAAEaAQcARwBxAH0AADcxIyIOAh0BFA4CBx4DHQEUHgI7ARUjIi4BJzEmJzUmNzU0JzEmJzUmJzEmKwE1MzI+ATcxNj0BJjcxNjcxPgI7ARczNSMiJzEmJzUmJzEmPQE2JzUmJzEuAisBFTMyHgIdARQeAhcjFgciDgEeAj4BNTQmcQIGCgcEAgQHBQUHBAIEBwoGAgIJEA0DAwEBAQICBAMFBQYBAQYKBwICAQEBAwMNEAkClAICBgUFAwQCAgEBAQMDDRAJAQEGCgcEAgQHBQEPFxEcDQYYIh8TIfQECAoGGQYMCwgEBAgLDAYZBgoIBBIGDQgIBwEICBAGBQUDAQMCAxIFBwUFBhAICAgICA0HehIDAgMBAwUFBhAICAEHCAgNBxMECAoGGQYMCwgEAhETHyIYBg0cERchAAQAAAAAARoBBwBHAHEAfgCKAAA3MSMiDgIdARQOAgceAx0BFB4COwEVIyIuAScxJic1Jjc1NCcxJic1JicxJisBNTMyPgE3MTY9ASY3MTY3MT4COwEXMzUjIicxJic1JicxJj0BNic1JicxLgIrARUzMh4CHQEUHgIXIxYHNjMyFhUUDgEuAjYXBycHFwcXNxc3JzdxAgYKBwQCBAcFBQcEAgQHCgYCAgkQDQMDAQEBAgIEAwUFBgEBBgoHAgIBAQEDAw0QCQKUAgIGBQUDBAICAQEBAwMNEAkBAQYKBwQCBAcFAQ82DhEXIRMfIhgGDUIVFQ4WFg4VFQ4WFvQECAoGGQYMCwgEBAgLDAYZBgoIBBIGDQgIBwEICBAGBQUDAQMCAxIFBwUFBhAICAgICA0HehIDAgMBAwUFBhAICAEHCAgNBxMECAoGGQYMCwgEAhoJIRcRHA0GGCIfAhYWDhUVDhYWDhUVAAUAAAAAARoBBwANABEAGwAfACkAACUjNScjBxUjBxUXMzc1JzMVIxcVBzUnIwcVJzUXFSM1BzUXFRczNzU3FQEQQgleCUIJCfQJqEtLlksKOAlLgyZdSwk4CkvhHAoKHAmWCgqWHBMTDioJCgoJKw04ExNLYCsGCQkGKl8AAAAABAAAAAABBwEaACIAPwBbAGQAABM2MzIeARcOAQc1MTY9AT4CJicuAQ4CFhcVFBcVLgI2FwYjFRQGKwEwIzEuAT0BIiY9ATQ2OwEyFh0BFAc3FAcWHQE+AiYnLgEOAhYXNTQ3Jj4CHgEHIxQGIiY0NjIWWBwiHzMeAQEpIQkRFwkHChE2OSgJGhkJHigIG3ICBAUEFAEEBAQFCwgSCAsDGQkGCQsBCwkNJCMaCQsNBgkBFB4eEwEeCxALCxALAQYTHjQeJDoMAQkLAwkgJicQGRUMKzo1DgMMCAELMUA6pwMvBAUBBAQvBQQmCAsLCCYEAlsPDQkKAgkZHBkJDgoKGiQjDQILCQ0fGgkLGRAICwsQCwsAAwAAAAABGgEaAAcACwAPAAATMxcVByMnNRcVMzUnMzUjHPQJCfQJE+Hh4eEBGQnhCQnhQpaWEyYAAAAAAwAAAAABGAEaADEAOQBJAAA3NTQmIgYdASMnBxcHBh0BIxU7ARYfAQcXNxceATI2PwEXNyc1NjcxMzUjNTYvATcnByM1NDYyFh0BFxUWFRQOAiIuAjU0NzXMIC0gEB8LHgEJJigBBA0BJQsjAgwfIh8MASQLJQ4FKScBCgEeCx9tFyAXHQkNFhsdHBYMCNgLFiAgFgsfCx4BGhsMEBsVASULIwEOEA8OASQLJgEWGxAMGxoBHgsfCxAXFxALEAEWGRcnHA8PHCcXGRYBAAAAABEAAAAAARoBGgAPABMAFwAbAB8AIwAnACsALwAzADcAOwA/AEMARwBLAE8AAAEjNSMVIzUjFSMHFRczNzUHIzUzNSM1MwcjFTMHMxUjFyMVMzczFSMXIxUzBzMVIzcjFTMXMxUjFyMVMwczFSM3IxUzFzMVIxcjFTMnMxUjARAcE5YTHAkJ9AkS4eHh4bwTExMTExMTEyYSEhISEhISEhISEiYTExMTExMTExMTEyUTExMTExMTEwEHEhISEgrhCQnh16gTE14TEhMTE14TEhMTE4QTExMSExMThBMTExITXhMAAAMAAAAAARoBGgA9AHkAggAANy4BDgEPAgYmLwEmJy4CPwI+AjU0Jy4DIyIPAQ4CFRQeBjMyPgE/ATY1NCYvASYvASYHBiciJicmJy4DNSY+AT8BNjMyHwEWHwEWFA8BDgIUFh8BFjMyNzY/AT4BMh8CFh8BFhUUDwEOATcHMxUjNTMVN+sFCwoHAwYFAwgCKQsLBAYBAwQHAwYDCAULDA0IDAgOBQkDChEYHCAiIRAKEQ0GDggDAwcEBA8EDQcIDh4OHxoNFhAJAQQGBQsDBAIEBwoHBgMCCwQFBAQFRQkMBQUJBgYCBgUEBwkFAwYDBAoFCi9XPl4TV30CAQUFBAYEAwEDJwsMBQgFAwUGAwcJBgwJBQwLCAgOBg0RCg8iISAcGREKBAgFDggMBQoECAQEDgRUAgEJBxIaDRweHg8HDgkFCgQDBggJBwQFAwsDBwoLCgVFCQIEBwYDBAMGCAQFCAMCBAMLBAfjVxNePlcAAwAAAAABGgEaAAgARACAAAA/ASM1MxUjNQcXMh8DHgEVFA8BDgIjIi4GNTQ+AT8BNjMyHgIXFhUUDgEPAgYUFhcWHwEeAT8CPgIHMj4BPwE2JzYvASYvAiYiBg8BDgIjIi8BLgE0PgI/ATY0LwQmIyIPAQ4CBx4DFxYXHgGiVz1dElgxDAkPCAcDAwgOBQ4RChAiISAcGBEKAwgGDggMBw4NCgUIAwYDBwQCBgQLCykCCAMFBgMICQYJDAoFCgQBAQMGAwUJBwQFBgIGAwcKBQwJRQUEBAUHAwUCAwYICQcEAgQDCwQHAwEBCRAWDRofDh6vWBJdPVcjCA4ICAQKBQwIDgUIBAoSGBwgISEQCxANBg4ICAsNBAkMBQkIAwYFAwUIBQwLJwMBAwQGBAUFWgMGBQsDBAIDCAUECAYDBAMGBAUECUUECwwJBwYDBQMFBAcJCAYDBAoECw0HDh8eHA0aEQgJAAAABAAAAAABAgDhAAcADwAkAC8AADcjJyMHIzczFycmJyMGDwEXIzUxBiMiJjU0PwE0IyIHNTYzMhUPAQ4BFRQWMzI2NaYTDz0PEjcREBYBAQEBARe2EQsVDxIiHxUSDw8UJBEYDAwLCQwQUSgokFk+AwYGAz43EBMQDh0FBBoMEAomDwQBCAsHChENAAAEAAAAAAElAPQABgAKAAwAEwAAJQcjJzcXNwc3Jw8BFwcXByMnNxcBJZIOOg40i5BSDVASCikLDw46DjTprVMKSaRtYgteFg8VDxFTCkkAAAEAAAAAAQ8A+gAGAAAlBy8BNxc3AQ+fDz8POJfuvAFZC0+yAAgAAAAAARoBBwAGAAoADgASABYAHQAkACsAADcjJzcXNx8BMxUjFTMVIxcjFTMHMxUjJzM3JwcnBxcjJzcXNxcHMzcnBycHRg0TDQ0aDhuWlpaWlpaWlpaWSg0iDhoNDSANEw0NGg4vDSIOGg0N2BQNDRsOBRMlEyYSJhNoIQ0aDQ5MFA0NGw1aIQ0aDQ0AAAEAAAAAAPMAwQAGAAA/ARcHIyc3llEMWAtYDG9SDFdXDAAAAAEAAAAAAMEA9AAGAAA3FwcnNTcXb1IMV1cMllEMWAtYDAAAAAEAAAAAAM8A8wAGAAA3JzcXFQcnvVIMV1cMllEMWAtYDAAAAAEAAAAAAPQAzwAGAAA3Byc3MxcHllEMWAtYDL1SDFdXDAAAAAIAAAAAAQcBGgA3ADsAABMzFTM1MxUzNTMVMxcVMxUjFTMVIxUzFSMVByMVIzUjFSM1IxUjNSMnNSM1MzUjNTM1IzUzNTczBzM1I14TEhMTExITJiYmJiYmExITExMSExMTJSUlJSUlExMTg4MBGSUlJSUlExMSExMTEhMTJSUlJSUlExMSExMTEhMTloMAAAEAAAAAAP0A/QALAAA3Bxc3FzcnNycHJweFVRFVVRFVVRFVVRGWVRFVVRFVVRFVVREAAAACAAAAAAD0APQAAwAHAAA3FTM1ByM1Mzi8E5aW9Ly8qZYAAAABAAAAAAEHAJYAAwAAJRUjNQEHz5YTEwADAAAAAAEHAPQAAwAHABEAADcVMzUHIzUzJzM1MxUjFTM1IzipE4ODcBODEyapzqioloQSE4MTqQAAAAABAAAAAADiAOIAGQAANzIXHgEXFhQHDgEHBiInLgEnJjQ2NzY3PgGWCgoTHAUDAwUcEwoUChMcBQMFBQoRCRPhAwUcEwoUChMcBQMDBRwTChQTCREKBQUAAQAAAAABGgEaABoAABMyFx4BFxYUBgcGBw4BIi4ENDY3Njc+AZYSESExCgQJCREeDyEkIR4YEQkJCREeDyEBGQQKMSERJCEPHhEJCQkRGB4hJCEPHhEJCQAAAAACAAAAAAEaARoAKgBEAAATJiIHMQYHBgcxDgEWFxYXHgI+ATcxNjc2NzE2JicxJicxJicxJicxJicXBgcOASIuBDQ2NzY3PgEyFx4BFxYUBrQPHg8ODRkPCAgBAwgVCxkdHxwNGQ8IAwUBBAMIBwsKDA0OUxEeDyEkIR4YEQkJCREeDyEkESExCgQJAQIFBQMIDxkNHR8OHBYKDwgBBwgPGQ0ODx8ODg0MCgsHCAOuHhEJCQkRGB4hJCEPHhEJCQQKMSERJCEAAAMAAAAAARoBGgAMABYAHwAAEzIeARQOASIuATQ+AQcUFhc3LgEOARUzNCYnBx4BPgGWJDwjIzxIPCMjPEwNDZ8ZQjsk4g4NnxlCOyQBGSM8SDwjIzxIPCODFCUQnxUJHDchFCUQnxUJHDcAAAEAAAAAALwAvAAIAAA3FAYuATQ2Mha8FiAVFSAWlhAWARUgFhYAAAACAAAAAAC8ALwACgAXAAA3DgEuAj4BMhYUFzY1NCYjIg4BHgI2pgQKCwgCBAkOCwwHFhALEwkEERYVjAUEAggLCgcLDg8KCxAWDRUWEQQJAAMAAAAAAOEA4gAMABUAFgAANzI+ATQuASIOARQeATcUBiImNDYyFieWFCMUFCMoIxQUI0UdKB0dKB0xSxQjKCMUFCMoIxRLFB0dKB0dIAAABQAAAAABGgEaAAcANAA9AEYATwAAASMHFRczNzUHIzUzHgEzMjY0JiIGFSMVIzUzFQ4BFRQWMjY1MxQWMjY0JiMiBgcjLgEjNTMHNDYyFhQGIiYnMhYUBiImNDYzMhYUBiImNDYBEPQJCfQJEqkrBBIKDxYWHxY4JSUICxYfFiYWHxYWEAoRBTAFEQqpcQoRCwsRCjgICwsRCgp5CQoKEQoKARkJ9AkJ9OolCAsWHxYWDzjhLAQSCRAWFhAQFhYfFgoJCQomqQgLCxEKCnkKEQoKEQoKEQoKEQoAAAUAAAAAARoA9AALAA8AEwAYABwAADcXNxc3JzcnBycHFychNSEVITUhFzUjFTMVNSMVvA0eHg8gIA8eHg0exwEG/voBBv76lpaWlkANHh4NHh4PICAPHoMTSxNCCRI5ExMAAAAEAAAAAAEWARoAFgAiACwANgAANyM1MxUzNScjNSM0JiIGFSMVIwcVFzM1PgIeARQOAS4CFwc1IxUnBxczNyczFwcnFSM1ByeDOJYTChwSFiAVFBsKCkEBCQsKBwUKCwgFhhQTFA4lDSR8DSUOFBMUDSaoJS8JEw8WFg8TCbwJ5QUJAgQKCgoFAQYKrBRkZBQNJCRbJA0UZGQUDQAEAAAAAAEHAQcACwAZACAAJAAANycHJwcXBxc3FzcvATczFxUHIxUHIyc1NzsCFxUzNSMXIxUzog4aGw0bGw0bGg4bKRODExMmEoQSEiYTSxImg0uEhJQOGxsOGhsNGxsNG3oTE4MTJhIShBISS4M4hAAAAAEAAAAAAOgA6AALAAA3FzcnNycHJwcXBxeWRA5FRQ5ERA5FRQ6JRQ5ERA5FRQ5ERA4AAAACAAAAAAEaAPYALwA5AAA3Mx4BFAYjNTI2NCYnIycuAgYPAScmJyIHDgEeATsBFSMiJicuAT4BNzYXPgEeAQcXNTMVNxcHIyfgARchIRcPFRUPEQICFx8bBgYQBQUUDQoGCxgOCQkOGgkMBwsbEQ4OCSYrH18YExgNKA0ovAEgLyETFh4WARAPFgUQDg4DAQEOChwaEBMLCw0jIhcDAwQUFgYfdhhmZRcNKCgAAgAAAAABGgD2ADIAPAAANzMeARQGKwE1MzI2NCYnIycuAgYPAScmJwYHDgEeATsBFSMiJicuATc+Ahc+AR4BFwcnFSM1Byc3MxfgARchIRclJQ8VFQ8RAgIXHxsGBhAFBRQNCgYLGA4vLw4aCQ8ECwcXHA4JJisfAx8ZEhgNKA0ovAEgLyETFh4WARAPFgUQDg4DAQEBDQocGhATCwsQKxIMEQUEFBYGHxZIGWZlGA4oKAAAAgAAAAABGgD2ABUALgAANzMeARQGKwEiJicuAT4BNzYXPgEeAQczMjY0JisBJy4CBg8BJyYnIgcOAR4BM+ABFyEhF4wOGgkMBwsbEQ4OCSYrH3+DEBYWEBECAhcfGwYGEAUFFA0KBgsYDrwBIC8hCwsNIyIXAwMEFBYGH3MWHxYQDxYFEA4OAwEBDgocGhAABwAAAAABGgEaAAMABwALAA8AEwAXACcAABMzFSM3MxUjFzMVIxUzFSMVMxUjBzMVIycHFTM1MxUjNSMVFzM3NSdeExMlS0smS0tLS0tLJktLXRMT4eETE+ESEgEHz7wTExITExMSExPOEl5ez3FxEhLPEgADAAAAAAEUAPQABgANABEAADcHFwcnNTczBxcHFzc1Bxc3J1gxMQ04OJEOMjIOOLgRXhHDMTINOA05DjEyDTgNYAi7CQAAAAAGAAAAAAEsARoAFQArAEEAUwBdAGUAABMVFBYXMxYXFh0BIzU0Ji8BJicmPQEzFQYWFzMWFxYdASM1NCYnNSYnJj0BMxUUFhcxFhcWHQEjNTQmLwEmJyY9AQc3MzIWFAYrAQ4BKwEiLgE9ARc1IxUUFjsBMjY3FTMWNjQmIzgHCAEKBAgTBwgBCgQITAEHCAEKBAgTBgkKBQdLBgkKBQcSBwgBCgQIcBLFFBsbFAwGKBo4FSIVvKkhFzkXIRMJDBAQDAEZCQYIBwgFCgwKCgYIBgEHBgoMCQkGCAcIBQoMCgoGCAYBBwYKDAkJBggHCAUKDAoKBggGAQcGCgwJcBMcJxsZHxQiFDk4ODgYISFQOAERFxEAAAAABAAAAAABBwEHAAMAEQAYABwAADcjFTMnNzMXFQcjFQcjJzU3OwIXFTM1IxcjFTOpXl5LE4MTEyYShBISJhNLEiaDS4SEgxKDExODEyYSEoQSEkuDOIQAAAIAAAAAARoBGgAMABQAABMiDgEUHgEyPgE0LgEHNTIeARQOAZYkPCMjPEg8IyM8JB8zHx8zARkjPEg8IyM8SDwj8+EfMz4zHgAAAAAKAAAAAAEsARoABwALABMAFwAfACMAKwAvADMAPQAAEwcVFzM3NScHNTMVDwEVFzM3NScHNTMVBzczFxUHIyc3FTM1NwcVFzM3NScHIzUzFSM1MycjFTMHFzc1JwccCQk4CgouJS8JCTgKCi4lOAk4Cgo4CRMlnwkJOQkJCiUlJSVuOjoTDSIiDQEZCTgKCjgJOCYmJQo4CQk4CjkmJi8KCjgJCS8lJYMJcQkJcQk4Jl4lExMSDCINIg0AAAMAAAAAARoBGgASAB4AJwAAPwEVByc1Iyc1NzMXFSM1IxUzHwI3NTM3NScjBxUXNyM1MxUjBxUnSxMWEBwJCeEKE84cCXYjEBwJCZYJCUtChB0JFlgTGxUHLwmWCQlUS4QJQiIGHApdCgpdChNLSwkPFQAACgAAAAABGgEHAAYACgAOABQAGAAjACcALQAxADgAAAEjFTMVMzUnMxUjJzMVIxcdATM3NQc1IxUnIw8BNScjFRc3Mzc1IxUHNSMVFzM9ASMVNxUjNTczFQEQHBMScCUlSyUlqQkJOCUmCQcoCgkQNgWDEuETCQoTExMJHAEGEhMcCRISEoQSEwkcJRMTEwMoIQpCBzZLJSU4EhwJSyUlXhMcCRIAAAAAAgAAAAABGgEHABcAIwAAEzMXFSYnNSMVMxcVPwEzBhUjByc1Iyc1FyIOAR4CPgE1NCYc9AkICuEuCigHCwIFNhAvCc4RHA0GGCIfEyEBBwqACQZolgohKAMJCjYHLwmpehMfIhgGDRwRFyEAAgAAAAABGgEHAAsAFAAAASMHFRczFRc3Mzc1ByMPATUnIzUzARD0CQkvEDZ/CRJ6BygKLuEBBwqpCS8HNgmpnwMoIQqWAAAABQAA//0BLQEaACwAMgA2AEMASgAANwYjNSMVLgInMzUjPgI3FTM1HgIXIxUzBxYXNjU0LgEiDgEUHgEzMjcmNy8BHwEGLwIfATYXMhYVFA4BLgI2FzcnBycHF6sGBhIbLhwCEhICHS0bEhsuHAISEgEJCAMjPEg8IyM8JA4NBA03JkwbBg0SJBJHDxEXIRMfIhgHDS4iDxwQDBgnARISAh0tGxMbLRwCEhICHC4bEgwCBA0OJDwjIzxIPCMDCEobTCY3BA0kEiQmCgEgGBEcDQYZISA/LQslDg8TAAQAAAAAASwBGgAsADIANgA/AAA3BiM1IxUuAiczNSM+AjcVMzUeAhcjFTMHFhc2NTQuASIOARQeATMyNyY3LwEfAQYvAh8BFBYyNjQmIgarBgYSGy4cAhISAh0tGxIbLhwCEhIBCQgDIzxIPCMjPCQODQQNNyZMGwYNEiQSLyAvISEvICcBEhICHS0bExstHAISEgIcLhsSDAIEDQ4kPCMjPEg8IwMIShtMJjcEDSQSJFUXISEvISEAAAAABAAAAAABGgEaAAMABwAjADAAADcXLwEXLwEXMw4CBzUjFS4CJzM1Iz4CNxUzNR4CFyMVBzI+ATQuASIOARQeAakmTCZUEiQSeQIcLhsSGy4cAhISAh0tGxIbLhwCEl4kPCMjPEg8IyM8qUwmTFQkEiQbLhwCEhICHS0bExstHAISEgIcLhsSeiM8SDwjIzxIPCMAAAb//wAAASwBCwAMABgATgBnAHEAewAANzIWHQEUBiImPQE0Nhc0JiIGHQEUFjI2NScWFzc2FxYXFhUUBxczHgEdARQHDgEPAQYHBgcGIicmJyYvAS4BJyY9ATQ2NzM3JjU0NzY3Ng8BFRcWFxYyNzY/ATUnBiMiJyYnBgcGIyI3Jg4BFBYyNjc2NwYXHgEyNjQuAXUGCAgMCAhWCAwICAwIMgIBAxEmIxANBQMBDg8DAgcHCwYHDA0pUikNDAcGCwcHAgMPDgEDBQ0QIyZJAQEKDCRGJAwKAQEMFCESBgQEBhIhFDoIMA8MKhMCAycHAwITKgwPMHEJBhwGCAgGHAYJDwYJCQYcBggIBrIBAgMTBQQTER4TDBAHGQ4YBQYDCQUIBQQHBRISBQcEBQgFCQMGBRgOGQcQDBMeERMEBYICUAEGBQ8PBQYBUAIGEwYICAYTYggFEygOFBQWCAgWFBQOKBMFAAAAAAMAAAAAAQcBGgAHAAwAEwAAPwEzFxUHIyc3JyMVMycHFRc1MydLE2VEE5YTqThelrwSEnkT4RNDixMTgzi78xK8E88SAAAAAAQAAAAAAQcA9AAGABsAKAA2AAA3DwEnNxc3Fz4BNTQuASMiByYjNjMyHgEUBgc2ByIuATQ+Ah4CDgEHMj4BNC4BIg4BFB4BF6cvDhwNFShJCQoSHhINDA0PFx4XJxcZFAVlEh4SEh4kHhEBEh4SFycWFicuJxYWJxeQOAEcDhUwKwkYDRIeEgUFExcnLigLDisSHiQeEQESHiQeEhIWJy4nFhYnLicWAQAAAAAEAAAAAAEaAOIAAwAHABcAGwAAJRUjNRUzFSM3IyIGHQEUFjsBMjY9ATQmBzMVIwEH4eHh4eEICwsI4QcLC0AmJs4SEiVelgsIgwgLCwiDCAtwEwABAAAAAADPAJYAAwAANzMVI15wcJYTAAAGAAAAAAEJARwADAAcACgAMAA6AEgAABM+AR4CDgIuAjYXFjMyPgE1NC4CDgIeATcXBxYOAS4CPgEXBxY2NCYOARY3BxYVFAcXPgEvASYjIg4BFBcHJj4CF0kbQTskBB02QTolBBwmGiAcLxwWJTAuJBMDGIINKAQFERQPAgwUChIFCgcIBAFUDwUJDgwDCjQLDBIeEgkNEAMmOBoBBRIEHTZBOyQEHDdBOqgSHC8cGSoeCQwgLS8qig0pCRQMAg4VEQUEIQMECwUBBwcrDgsNEg8OEy4UFwUSHiQPDhg5KwwNAAADAAAAAAD0ARoAEwAkADUAADc0LgEiDgEVFyMVFx4BMjY/ATUjJzIXHgEUBgcGIicuATQ2NzYXBw4BBwYiJy4BLwE1FjcWN/QZLDIsGQEBAQQ1SDUEAQFdFRMQExMQEyoTEBMTEBNgAQETDxIqEg8TAQEjKCgj6g0WDAwWDQKmBxEXFxEHph4FBA4KDQQFBQQNCg4EBcQDBQwEBQUEDAUDjBQBARUAAAAFAAAAAAEoAQcAJQAsADUAPwBGAAA3By4BIgYHJwcXBxUjFTMVFhcHFzceATI2Nxc3JzY3NTM1IzUnNycyFhUjNDYXDgEHLgEnNTMnBxUzNRcHFTc1BzU3JzUXFYkRBBkgGQQRDRYDExMBBBgNFQcWGBYHFQ0YBAETEwMWSwwQOBAyAhUPDxUBSyoPE44wR0dpj6WDEA8UFA8QDRYCExMBCQkYDRUKCwsKFQ0YCQoBEhMCFg0QDAwQSw8VAQEVDxyzCFZEXyAXLxBkFkZfF24QAAAAAAQAAAAAARYBBwAlACwANQA/AAA3By4BIgYHJwcXBxUjFTMVFhcHFzceATI2Nxc3JzY3NTM1IzUnNycyFhUjNDYXDgEHLgEnNTMnNxcVBzU3JxUjiREEGSAZBBENFgMTEwEEGA0VBxYYFgcVDRgEARMTAxZLDBA4EDICFQ8PFQFLEw6pbFaOE4MQDxQUDxANFgITEwEJCRgNFQoLCwoVDRgJCgESEwIWDRAMDBBLDxUBARUPHKsIcRBIFzlfRAAAAAQAAAAAASkBLAAlACwANQBAAAA3By4BIgYHJwcXBxUjFTMVFhcHFzceATI2Nxc3JzY3NTM1IzUnNycyFhUjNDYXDgEHLgEnNTM3FQc1NycVJic1N4kRBBkgGQQRDRYDExMBBBgNFQcWGBYHFQ0YBAETEwIVSwwQOBAyAhUPDxUBS7iAaqIJCg6DEA8UFA8QDRUDExMBCQkYDRUKCwsKFQ0ZCAoBEhMDFQ0QDAwQSw8VAQEVDxxgEFEWQ2d2BgN+CAAAAAAEAAAAAADjAOMADAAYABwAIAAANz4BHgIOAi4CNhceAT4CJicmDgEWNyMVMxUjFTNsESgkFwISISgkFgMSHQwcGQ8CDQsSKRgISjg4ODjUDAIRIigkFwISISgkXggCDBccGQgLCCMqOxMSEwADAAAAAADhAOIADAAQABQAADciDgEUHgEyPgE0LgEXFSM1NxUjNZYUIxQUIygjFBQjEktLS+EUIygjFBQjKCMUXhISORMTAAACAAAAAADmAOEABQALAAA3IwcXMzcHIyc3Mxe6ViwsViw6Oh4eOh3hS0tLMzMzMwABAAAAAADmAOEABQAANwcjJzcz5StWLCxWlktLSwAAAAIAAAAAAOEA4QACAAUAADczJwczJ0uWSyNGI16DbD0AAQAAAAAA4QDhAAIAADcXI5ZLluGBAAAAAgAAAAAA9AD0AAMABwAAPwEXBzU3Jwc5XV1dNDQ0ll5eXSk0NTUAAAEAAAAAAPQA9AADAAA3Fwcnll5eXvReXl4AAAADAAAAAADjAOMADAAQABQAADc+AS4CDgIeAjYnIxUzJzUzFdQMAhEiKCQXAhEiKCQnFxcXF2wRKCQXAhEiKCQXAhEWEyVLSwAFAAAAAAEcARwAFQAeAEQATABWAAATNzMfAhUPASsBNTQnMzUjFSYjPQEXByYvATcnNxcHNxcHFxUzFSMVBgcXBycOASImJwcnNyYnNSM1MzU3JzcXPgEyFgcuAQ4BFTM0BzY3NSMVHgEXNlgCsQEPAQEPAVwHYKwJCoYjAgIGHC0KNFcRDRUCExMBBBgNFQcWGBYHFQ0YBAETEwMWDREEGSAZFQYREAk4AgoBSgEVDw8BGwEBDwGxAg8CCgesWwJcAWcjAwMFHC4KMzsQDRUDExIBCgkYDRUKCwsKFQ0ZCAkBExMDFQ0QDxQUBwYDBg4JDFQKDxwcDxUBAQADAAAAAAEMAQcAAwAJAAwAABMjFTM3BxUXNzUPATVLExM+Dw+DFmkBB+HVB7wHXRAITJgAAwAAAAABDwEHAAMACQAMAAATMxUjNwcVFzc1DwE1LxwcXBYWhCFdAQfh2Qu8C14WC0KEAAMAAAAAARYBBwAJAC4AOAAAPwEXFQc1NycVIxcOAR0BFA4CKwEiLgI9ATQuAjU0PgQyHgQVFAYHIxUUFjsBMjY1Xg6pbFaOExUFBgIDBQMQAwUDAgYLBwMGCAoMDAwKCAYEBxwWAgEQAQL/CHEQSBc5X0RgBQ0HEAMFAwICAwUDEAcNCxAKBgsLCAYDAwYICwsGChAZFgECAgEAAAQAAAAAAREBGgARAB8ANwBEAAA3Jic3JwcmJyYHBg8BFzc2NzYHBg8BJzc2NzYXHgEXFgc3JwcnNycHJwcOARQWFwcXNx4BMjY/AQcGIi4CNTQ/ARcHBv8DBRkLGgcJFBQLCB1RHQkECBcDBhI6EgYHEBAHCwQGYRwMGyMcDBwLHQkIBQYZCxoHEhUVCB02CBAPDAYMEjoSBuQJBxoLGQYCBwgECR1RHQgLFA4HBhI6EgYDBgYECwcQbh0MHSMdDB0LHQgVFREIGQwZBQYJCB0aBAcLDwgRDBI6EgUAAAAABgAAAAABGgEAAAMABwALAA8AFQAYAAA3NTMVJzMVIzcVIzUdATM1JTcXFQcnNxU3cahdXV1dqKj++g5lZQ4TSnESEksTSxMTqRMTrQdDD0QIdWMxAAAAAAIAAAAAANgA9AADAAcAADczFSM3FSM1VB0dhBz0vLy8vAAAAAIAAP/9ARYBBwAaACQAADcUDgEmJwceAT4CLgEGBzUjFRczNSM+AR4BJzcXFQc1NycVI4YZJyMIEgotMiMHGi8xDxMJLBgKIyUXKA6pWUOOE0sUHwgSEgcXGQclMiwTDRQXMgoTEQ4KHqEIcRA7Fi1fRAAABQAAAAABHAD0AAQACQAOABIALQAANzUzBgc3NjcjFRcmJyMVJRUhNRcyPgEuAQYHMxUjJzUzFT4BHgEOAiYnNx4BE2ECARcJC4lpBQNhAQb++scSGgYRISAJFCUIEA0qJxYGHiolCQ8GF3ESCQk4CggScQkKE7wTE7wWIh4MDA8QCCoTEQsRJCseBxUUBg0PAAAAAAEAAAAAAQwBDQAdAAA3FA4BJicHHgI+AjU0LgEGBzUjFRczNSM+AR4B7yY6NQwaCigyMykXKkRFFhwOQSMONTcjlh4uDRscCxghDQogLxokOxcVHCJLDhwZFg8tAAAAAAMAAAAAAP4BBwADAAkADAAAEyMVMycXFQcnNR8BNf0cHFwWFoQhXQEH4dkLvAteFgtChAADAAAAAAEQAQcACAASABcAADcUBi4BNDYyFjMvASMHFRczPwEHIzUzF7wWIBUVIBZUUBFfGBhfEVBhX19PlhAWARUgFhZZCBiyFwhZSrJZAAIAAAAAARABBwAJAA4AACUvASMHFRczPwEHIzUzFwEQUBFfGBhfEVBhX19PplkIGLIXCFlKslkAAgAAAAAA/AEAAAUACAAAPwEXFQcnNxU3UBaWlhYcbvQLZBdkDK2TSgAAAAACAAAAAAEMAQwAFwAgAAA3NTMVPgEzMh4BHwEjNS4CIgYHMxUjJxciJjQ2MhYUBiEcEDAbHTQgAgEdAhgnLikLNU4SdRAVFSAWFsBLLxMWGy4cBQQUIhQWExwSkBUgFhYgFQAAAgAAAAAA6gEaAAoAEwAANzM3Jwc1IxUnBx8BFAYiJjQ2MhaWCkkUMRwxFEkvFh8WFh8WeUkUMXR0MRRJQRAVFSAWFgACAAAAAADqARoACgATAAATIwcXNxUzNRc3JxcUBiImNDYyFpYKSRQxHDEUSRsWHxYWHxYBGUkUMXR0MRRJ4RAVFSAWFgAAAAACAAAAAAEMAQwAFwAhAAAlNSMVLgEjIg4BDwEzNT4CMhYXIxUzNwcyNjQuAQYUFjMBCxwQMBsdNCACAR0CGCcuKQs1ThJ1EBYWIBUVEMBLLxMWGy4cBQQUIhQWExwSkBUgFQEWIBYAAAIAAAAAAQcBBwAHAAsAABMXFQcjJzU3FyMVM/QTE7wSEreysgEHE7wSErwTGLIAAAUAAAAAASsBLAABAA0AQQBJAFkAADc1Fyc3FzcXBxcHJwcnNxUzNxcHFRYVBzMVIzEGDwEXBycHDgEiJi8BByc3JyYnKwE1MzU0NzUnNxczNTQ+ATIeAQcVMzU0JiIGFzUjBwYVFB4CMj4CNTQrWyYNKCcNJiYNKCcNdBAkDSIMASwuBg8BKw0pAQ4kJiQOASkMKgEPBQEuLAsjDSQSEB0iHRFrWRolGnqbAQkOGR8iHxkPiwEJJgwoKA0mJg0pKA2QDCQNIgEeHw4SHxkBKwwpAg8SEhACKAwqARkeEg4gHAEjDSQMER0RER0RDAwTGhoyAQEaHBktIRERIS0ZHQACAAAAAAEaAQcAFAAeAAA3NTI2NzY1Iyc1NzMXFSc1IxUzBxczNycHNSMVJwcXSxERAgJVCQn0CRLhawkuKC8NHxMeDi8TEwUFAwUKuwoKrRORqQkvLw0feXkfDS8AAAADAAAAAAEaAOEADQARABUAACUHNScjBxUXMzc1Fzc1ByM1MxcnNTcBCz0JqQkJqQk9Dl2Wlks5OdMjKAkJhAkJJiMJa21wXR8KIgAABQAAAAABGgEHAA0AFwAgACkAMgAANzMXFQcjJzU3Mz8BMxcHMzUjLwEjDwEjFyIGFBY+ATQmFzIWFAYuATQ2NyIGFBYyNjQmyUcJCfQJCUcQBzgHk+FCBxAwEAdBHAQGBggFBVAQFhYgFRUQFyEhLiEh9AqoCgqoChADA7mWAxAQAxMFCAYBBQgFEhYgFgEVIBYSIS4hIS4hAAAAAwAAAAAA9AEaAAcACwAPAAATMxcVByMnNRczNSMXMxUjVJYKCpYJE4ODLyUlARkJ9AkJ9OrhvBMAAAAAAwAAAAABBwEaAAcACwAXAAATMxcVByMnNRczNSMXIxUjFTMVMzUzNSMc4QoK4QkTzs5wEzg4Ezg4ARkJ4QkJ4djPJjgTODgTAAAAAAMAAAAAARoBGgAHAAsAEQAAEzMXFQcjJzUXMzUjFzMVByM1HPQJCfQJE+HhliVwJgEZCfQJCfTq4SYlcSYAAAADAAAAAAEaARoABwALABQAABMzFxUHIyc1FxUzNQcyNjQmIgYUFhz0CQn0CRPhcRchIS4hIQEZCfQJCfQJ4eGpIS4hIS4hAAAFAAAAAAEaARoACQAOABoAHgAlAAATHwEVByMnNTczBzM1JyMXIxUzFTM1MzUjNSMHMxUjNx8BFQcvAbY4BhOpExNxcak4cUslJRMmJhMlXl6LKwUSATgBFDgOqBMT4RLzqDlLEyYmEyWDE84rDbsTzjgAAAMAAAAAAQcBGgADAAsADwAANxUjNSczFxUHIyc1FzM1I7xeQuEKCuEJE87OqRMTcAnhCQnh2M8AAwAAAAABGgEaAAcACwASAAATMxcVByMnNRczNSMXMxU3JxUjHPQJCfQJE+HhJTheXjgBGQn0CQn06uGEOEtLOAAAAAAEAAAAAAEHARoACQAOABoAHgAAEx8BFQcjJzU3MwczNScjFyMVMxUzNTM1IzUjBzMVI8k4BRKpExNwcKk5cEslJRMlJRMlXV0BFDgOqBMT4RLzqDlLEyYmEyWDEwAAAAAGAAAAAAEaAPQABwALAA8AFwAbAB8AAD8BMxcVByMnNzM1IzUzNSM3MxcVByMnNRczNSM1MzUjJgleCQleCRJLS0tLel4JCV4JE0tLS0vqCgqoCgoJcRITEwqoCgqonyYlSwAAAQAAAAAA9wEKABkAABMVFzM1Izc+AR4CBg8BFzc+AS4CBg8BNUIJQjASDSIjGQoKDWENYhAMDCEsLBAOAQdCCRISDQkJGSMjDGINYREsLCELCxENJwAAAAMAAAAAARoBGgAJAAwAEAAAEyMPAhc/AjUHNxc3JzcX+BubAywaTQWa7B0bECGWIQEZmgVNGiwDmxvLOBsKIZYhAAAAAwAAAAABGgEaAA0AEQAYAAAlJyM1JyMHFRczFRczNyc1MxUXIzUzNzUzARkJjQleCQkvCbwJ80uWqRwJhLIKVAkJlwhVCQlncXFdSwgdAAADAAAAAAEHAKkACAARABoAADcUBiImNDYyFhcUBiImNDYyFhcUBiImNDYyFksLEAoKEAteCxALCxALXgsQCwsQC5YICwsQCwsICAsLEAsLCAgLCxALCwAAAgAAAAABGgEaAAsAHAAANzMVIxUjNSM1MzUzBzUzFTM1IzUzNSM1MxcVByNLODgTODgTOBPhcXFxegkJ9OETODgTOP1nXYMTJRMKzgkAAAADAAAAAADiAOEACwAYACEAADcnByc3JzcXNxcHFzcUDgEiLgE0PgEyHgEHNCYiBhQWMjasFhYRFhYRFhYRFhYkFCMoIxQUIygjFBMhLiEhLiFvFhYRFhYRFhYRFhYWFCMUFCMoIxQUIxQXISEuISEAAwAAAAABFgEbABUAKAA0AAATHgEXFhUUBw4BBwYnLgM3Njc+ARc2NzYnNCYnJicmBgcOARYXHgEnNxcHFwcnByc3JzehFikQJh4PJhYwJxQeEAMHDyYSKyEmGRkCEQ8dJhMmDyAXISIQJgQtDS0tDS0tDS0tDQEZARQQKTcrJxIXBAkWCyIqLhUuGQwM9AkfIiUXKhAdAwEJCxhOSBMKBnwvDS8vDS8vDS8vDQAAAAAEAAAAAAEdARoALwBDAFAAVAAAEyMHJwcXBxUXBxc3FzMmJyMvAQcnNy8BNT8BJzcXPwEzHwE3FwcfARUWFzUnNycPATIWFwYHLgEOAhYXBgcuAT4BHwE+AR4CDgIuAjYXFTM1sDQKJiYaLS0aJiYKJwoIBgkOJg8ZBiwsBhkPJg4JFgkOJg8ZBiwLCC0aJiYkDBMECQgBCw4KAQgHBgMNDQQVDhgOIyEXBQ0cIiAWBgwIXgEZLRomJgo0CiYmGi0ICywGGQ8mDgkWCQ4mDxkGLCwGGQ8mDgkGCAonCiYmGjAOCwMGBwgBCg4LAQgJBRcbEgE0DAYMHCMhFgUMGyIhHhMTAAUAAAAAAQcBBwADAAcAFQAcACAAADcjFTMHNSMVJzczFxUHIxUHIyc1NzsCFxUzNSMXIxUzqV5eJhITE4MTEyYShBISJhNLEiaDS4SEgxImXl6pExODEyYSEoQSEkuDOIQAAAACAAAAAAEaAOMACAAMAAA3JzcXByc3IzUnMxUj9SwNQ0MNLL0lExOpLQ1EQw0tEziDAAAABgAAAAABLAEsAAcACwAXABsAHwAjAAATNzMXFQcjJzcVMzUFNTczFxUzFxUHIyc3NSMVFyMVOwI1I6kTXRMTXRMTXf7nE14SXhMTzhNxXl5eXhJeXgEZExNdExNdXV2ocBMTXhJeExNwXl4SXl4AAAQAAAAAARQBFAAgACYANwA7AAATBhQfAQ4BBwYeATY3PgE3FwYUFjI3FxYyNjQvATEnJiIfAQYiJjQ3IgcXNjMyFhceAT4BJy4CBxcuARwDAjMSGgUBBAcHAQUXERYOHSkPSgMIBQKAaAMIYiwJGhIfExEPCwolOQkBBwcEAQcjMxowARsBEAIHAzMNJRYEBwIEBBQgCxcOKR4PSgMFBwOAaAN0LAkTGVEFEAMuIwQEAgcEGysYLC8TGwAAAwAAAAABEQDoAAgAEQAoAAA3MhYUBiImNDYXIgYUFjI2NCYnMh4BFxYOASYnLgEiBgcOAS4BNz4ClhUdHSodHRUNEhIaEhINHDMjBwEEBwcBCTlKOQkBBwcEAQcjM7sdKR4eKR0SExoSEhoTPhgrGwQHAgQEIy0tIwQEAgcEGysYAAAAA///AAABGgEaABUAOwBEAAATBxU3FzUzFSMHNSMXBzMVFzczNzUnBz4BNC4BIg4BFBYXDgEHBg8BMzU0PgI7ATIeAh0BMycmJy4BJyImNDYyFhQGVAkJCqkhGCYBARQQIiIJCZgOEBIeIx8REA0NFgcEAQETChIYDQENGBIKEwEBBQYWMhMbGycbGwEZCR0BARReGBgKCRwHIwlxCbEJHSMeEhIeIx0JBhYQCwwSCg0XEwoKExcNChMLCxAWDxsnGxsnGwAAAAAIAAAAAAEHARoACQAOABgAHQAnADEAOwBAAAATHwEVByMnNTczBxUzNScHFDMyNjU0IyIGFzQyFCIXMzUjNQcVNxUjByM1MzUHNTcVMzcUMzI2NTQjIgYXNDIUIsY+AwrOCQmRiLw4aBkNDhkNDhAUFDwtDx8QDxotDxAgDhQaDQ0ZDQ4QFBQBFz4HtgkJ9AkS4ag5TCUUEiUUEhoyCww9Bg0DLWoMLQMNBj0YJBMTJRQTGjIAAAAABQAAAAABBwEaAAkADAATABoAIQAAEx8BFQcjJzU3MwczJyMVMzUjJzUHNycHFRc/AhcVByc3xj4DCs4JCZEEODiEvEIJSiINKSkNJA0pKQ0iARc+B7YJCfQJSznhlglCjiMNKQ0pDUQOKQ0pDSIAAAcAAAAAARoBGgARABQAHAAlACkALQA2AAATMxUXMxUzNS8CIwcVFzM1IzcXIxcjBxUXMzc1BxUnIwcnIwc1FzcXKwE1Nxc3MjY0JiIGFBYmcAlCEwM+BpEJCUI4gzg4Z5YJCZYJEh8NFigNDU8PHR5dEy8lBAYGCAUFAQdCCRMpBz4CCfQJE+E5OAlxCQlxCkseFigMJ1APHBsTLkEGBwYGBwYACQAAAAABBwEaAA4AEQAZAB4AKAAuADcAPwBJAAAlLwEjBxUzNTMVFzMVMzUHNRcPARUXMzc1JwcVIzUzByMVIzUzMhUUBicjFTMyNBc2JzQHIxUzMic1MzYWFAYnNyMVIzUzFSMVMwEEPgaRCRJxCUITSzjFCQnOCgoJvLyWBg0UFQ0KBQUKQgkBHhQUDRQGBwsKCE0SDSEUEtk+AglnXkIJEykEOTk4CXEJCXEJXhJdOBM5EwgLGxERJgkMHAE4CyMBCw8LAQsWOQsOAAAAAAQAAAAAARoBBwADACEAKwAyAAA3MzUjNzU3Mx8BMxcVByMnNSMnNTczHwEzFxUjNSMvASMVFycjFTM/ATM1IwcjFTM1IwcmEhISClMICGsJCc4KHAkJUwgIawoTZwgIRHEIRDsICHFoE0G8awheSxMJCQQOCpYJCS8JqQoFDgouJQUOOA8POQ4FEzhLXQ4AAAQAAAAAARoBBwAKABIAHAAsAAA3MxcVByMnNTczHwE1NyMPASMVNzM3Iy8BIxUzNxcnNxcVByc3Iw4BFyM0NjeRfwkJ9AkJXgeFAXcQBlRmegF6BxBQUBAxGQ4pKw0bGg8VARMeF/QKuwkJzgoDzB1nEANxlhMDEDkQSRoNKg0qDhkBFQ4WIAEAAAAABQAAAAABBwEaABEAFAAcACAAKgAAEx8BFQcjNTM1Iyc1IxUjNTczBzMnByMHFRczNzUHIzUzBxUjNQcnNyM1M8Y+AwpBOEIJcRIJkQQ4OB2DCQmDChNwcBMSMg0xITgBFz4HtgkTlglCS1QJSzleCoMJCYN5cBw4ITENMhIAAAALAAAAAAEHARoACgAOACMAJwArAC8AMwA3ADsAPwBJAAATMxcVDwEVByMnNRcjFTMVMzUvATUjFQcjFSM1Iyc1IxUzNTM1FTM1JxUjNTczFSM1FSM1NzMVIzUVIzU7ATUjFzc1IxUfARUzNS/OCgMQCrsJSxMTSxADJgkJEwoJEyYTEhITExISExMSEhMTEhJzEDgPAxMBGQleBhF/CQn0CSa7dhAHVC8KEhIKL+ESExMTExMTExMlEhITEyYTExMWEFFRDwd6eQAAAAADAAAAAAEHARoACQAPABIAACUvASMHFRczNzUHIzUzFTMnNRcBATgNcRMTqRMTqV5LODjcOAUS4RMTqKjhSxI5OQAAAAQAAAAAARMBLAANABAAFwAdAAATIwcVIwcVFzM3NTM3NScXIwcjNTMVFzM3IzUzFTPbcRI5EhKXEjsQOB4eJpY5EktLll44ASwTOBO8EhI5EpceHuG7cRITuzgAAQAAAAABGgEHAAcAAAEVBxUjNSc1ARldS14BByBZaGhZIAAAAgAAAAABGgEHAAcADwAAARUHFSM1JzUXFTM1NzUjFQEZXUtecCZe4QEHIFloaFkgcV5eWQUFAAACAAAAAAD7ARoALQBTAAA3JzYmJyYnBgcGFxYXBy4CNzU2NzY3Nj8BNjc2NzYnNx4BBzY/ARUWFxYHDgEnFwYWFx4BBz4BNzYmJw4BLwE2JicGBwYPAQYHBhUxBhYXJjc2N6sKCQMLEgQOAgMGAwoLFB8RAQEDBAkKEAgJBwoDBAYNHxsJBgQRCgYLCwklOxABCQkNCgQMEgUFBAgGEwoGDAkUAhEJDwIXCQQBEA8KBQYcEw4LHAkPFhMRDg0IDg4EGCUUBwkJDQ0PDggKCw8MEQwMFkclBwgCARATJRsUGn8HDRkJCRwPBBELESMQCQkCDRs7FhYaDQ8CFBcMChIfChcVHB8AAAACAAAAAAELARoABgANAAABJwcnBxczNycHJwcXMwEKDXBxDXcNdw1wcQ13DQEMDXBwDXcGDnFxDncAAAACAAAAAAEOARoABgANAAA3FzcXNycjBxc3FzcnIxMNcHENdg14DXBxDXYNoQ1xcQ146A1wcA14AAIAAAAAAO4BAAAGAA0AADcHJwcXMzcHNxc3JyMH4EpLDFELUaNNTAxTC1L/SkoLUVHOTEwLUlIABAAA//8BLgEHABQAHgArADIAADczFxUmJzUjDwEjFTMWFyMnNTczHwEzNyMvASMVMzcXPgEeAg4CLgI2FzcnBycHF5F/CQgLdhAGVWACBG8JCV4HC3oBegcQUFAQMREoJBcCEiEoJBYDEjgtDycYDCD0ClQHBBsQA3EJCQnOCgM2EwMQORBCDAIRIigkFwISISgkUjsMNBMOGgAABQAAAAABGgEHABIAHAAgACQAKAAANzMXFSM1Iw8BIxUzFSMnNTczHwEzNyMvASMVMzcXMxUjNzMVIz8BFweRfwkSdxAHVF5nCQleBwt6AXoHEFBQEBATEyYSEiUSJhH0CkETEANxEgnOCgM2EwMQORA1cHBwaQdqBgAAAAMAAAAAASUBBwANABkAIAAANzM/AScjNScjLwEjBxU3Mx8BMxUjDwEjDwEXIzczPwEzHM4JMgkVCmwRBl4JE1AQB2dVBhBHCRO9uh9FBhBtJgaEDC4KEAMKzsUQAyUDEAc5MV4DEAAAAwAAAAABGgEHAAoAEgAcAAAlIy8BIwcVFzM3NQcVIzUzPwEzJyMPASM1Mx8BMwEQfxAHXgkJ9AkT4VUGEHcBegYQUFAQB3r0EAMKzgkJu5UdcQMQEgMQORADAAAFAAAAAAEsAPQAEwAjAEAASQBTAAA3MzIeAR0BFA4BKwEiLgE9ATQ+ARciBh0BFBY7ATI2PQE0JiMHIgYdASMiBhQWOwEVFBYyNj0BMzI2NCYrATU0JhcUBiImNDYeAQcUBiImPgEyFhVLlhQjFBQjFJYUIxQUIxQXISEXlhchIRd6BAUcBAYGBBwFCAYcBAUFBBwGiQsQCwsQCxMLEAsBChAL9BQjFDgVIhQUIhQ5FCMUEyEXOBghIRg4FyElBgQcBQgGHAQFBQQcBggFHAQGEwgLCxALAQpACAsLDwsLCAAAAAAEAAAAAAEaARoAHwA3AEAASQAANycjDwEnBxcPARUfAQcXNx8BMz8BFzcnPwE1LwE3JwcnFzcXBxcVBxcHJwcjJwcnNyc1Nyc3FzcXFAYiJjQ2MhYHMjY0JiIGFBarChYKDSURGAMtLQUYDyUPCBYKDyUPGAUsLQYYDyUICicmGy0tGyYnCjQKJyUaLS0ZJicIQBceFhYeFyYICwsQCwvaLS0GGA8lDQoWCg8lDxgFKy0FGA8lDwgWCg8lDxhDLRkmJwg0CiclGi0tGSYnCDQKJyYbLYMPFhYeFxciCxALCxALAAAFAAAAAAEHARoAIgAmADkATABQAAA3IzY1JicmLwEmIgYHBgcmJyYjIgcGBwYPARQXIwcVFzM3NQcjNTM1IzUmNTc2NzY3NjIXFhcWFxYVMzQ3Njc2NzYyFhcWHwEUBxUHIxcjNTP9HgIEAwYIBQgJCAMRDQ0RDAUJCAcGAwQBAh4JCeEKhF1dOAIBAgMCBwIPBAkGBAECEwICBAUKAw8IBQEBAgICNl5eXuEIDwsFCQMCAwECBRQUBQMFAwkDCwMOCAmpCQmpoJYTBAUKAwUBBAQCAgQIBQMFBQUFAwUIBAIEBgEDBQoFAgKplgAAAAAFAAAAAAEaARoAEwAWACYAMAA0AAA3MxUXIyc1NzMfAhUmJzUjJzUjFycVFxUzFxUHIyc1NzM1NDYyFgcGHQEzNTQuAQYHFTM1OEsCVgkJkQY+AwgLQglxvDhBEwkJcQkJExYfFjMFJQYKDCVeJhIBCfQJAj4HMAsHCAlCOTk5SxIKSwkJSwoSEBYWAgYIEhIGCQUCNzg4AAIAAAAAAOEBLAAPABgAABMzFR4BFAYHFSM1LgE0NjcXMjY0JiIGFBaNEhwmJhwSHCYmHAkUHR0oHR0BLEwDKjoqA0xMAyo6KgN7HSgdHSgdAAAAAAQAAP/+ARwBGgAfACoASQBVAAA3JzcXFQcnNyMGJj0BLgI+ATMyFxYXFhUUBgcVFBYzJxY+Ai4BDgIWFxYXHgEHDgEuAjY3Njc1NCYrARcHJzU3FwczMhYPAT4CLgIOAh4BixgMKCgNGCMTHA4UBQsXDwkJEggDFRAQDDUIFA4CChAQDQMHyA4KDAMJCBocFAYLDAgJEQsjGA4oKA4YIxMcAQYHDAcBCRARDAMHEDgYDSgNKA4YARwTaAMUHBoQAwgSCQkRGgNnDBGbBQIOFA8HAw0QEHsDCgwhDgwLBhQcGggFAmgMEBgNKA0oDRgbFLIBCA4ODgYDDBEQCgAAAAAEAAAAAAEEAQcAAwANABEAFQAAEyMVMwcnNxc1MxU3FwcnMxUjFyMVM6kTExBeDU4TTQ5eEBMTExMTAQcTzl0OThsbTg5dqBImEwAABAAAAAABCAEtADQAPwBKAFcAADcuAQcGBwYHLgEnMjc+ATU0JyYnJiMiDgEeARcVBgcOAR4CPgE1Ni4BJzUWFxYXHgE+ATQHHgEOAi4BPgInIi4BPgIeAQ4BFw4BLgI+Ah4CBvkMIQ4MBgEBHioDBAQNEAQHEgkKDhcLBRQOCQgLCwUUHBsPAQkSCw8WExQEHSQYqAgKAg4UDwcDDRADCA4HAw0QEQoED40FDg4LBgQMEQ4JAwSbDAMJCA0EBAMqHgIGFw4KCRIHBBAaHBQDXwIFCBsbFAYLFw8JFA8CLRULCgESFQMbJTIEDxQOAgoQEA0DggoPEQwDBxEUDXsFBAMJDhEMAwYLDQ4AAAYAAP/+ARoBGgAhAC0AOQBKAFUAYQAANwYPARUWFx4BFRQOAiMiLgE+ATc1LgI+ATMyHgIVFAcuASIOAR4CPgInFjI+AS4CDgIWFxYXFhUUDgEuAjY3Njc1Mxc+AS4BDgIeATYnBxc3FzcnNycHJwdpCA0IBAQNEAcNEgkPFwsFFA4OFAULFw8JEg0HFgQNEA4HAw0QEAkBLAcQDQgBCRARDAMHyA4KDhAaHBQGCwwHChILBwIKEBEMAwYQFB0fDR8gDR8fDSAfDdAMBgJeAQIFGA4KEQ4HEBocFANfAxQcGhAHDRIJD58HCAoPEQwDBg4PngUIDhANBwQMEBB7AwoOEw4YCwYUHBoIBQJDhQcUEAYDDBEPCwLYHw4gIA4fIA0fHw0AAAAABQAAAAABLAEaAB0AKgA2AEoAVgAANwYPARUWFxYVFAcOASIuAT4BNzUuAj4BMzYWBxQHLgEjIgYXHgI+AicWMj4BLgIOAhYXIzU0JisBFwcnNTcXBzMyFhcWBxUjNSM1MzUzFTMVI2kIDQgTCggDBhgdFwsFFA4OFAULFw8THQEWBA0IDREDAQ0QEAkBLAcQDQgBCRARDAMHyBIRCyMYDigoDhgjDhgFBAETODgTODjQDAYCXgQQDA4KCQ0QEBocFANfAxQcGhABHBQPnwcIFQ0IDAMGDg+eBQgOEA0HBAwQEC8cDBAYDSgNKA0YEA0JCcU4Ezg4EwAHAAAAAAEbARoAIAAsADgAQQBKAFMAXAAANz4BNTQuAiMiDgEeARcVDgIeATMyPgI1NCYnJic1Fx4BDgIuAj4BMiciLgE+Ah4CDgEXFAYiJjQ2MhYHMjY0JiIGFBYnFBYyNjQmIgY1FBYyNjQmIgZUDRAHDRIJDxcLBRQODhQFCxcPCRINBxANBAQFBggBCRAQDQMHDhAICA4HAwwREAkBCA3QGycbGycbLwwRERcREQcLDwsLDwsLDwsLDwu+BhcPCRINBxAaHBQDXwMUHBoQBw4RCg4YBQIBXnUEDg8OBgMMEQ8KgwoQEAwEBw0QDgifFBsbJxwcLxAYEBAYEIgICwsPCwtIBwsLDwsLAAAAAAT//wAAAQcBGgAPABsAHwA1AAA3FRczNzUvAiMVMxcVIzU3IzUjFSMVMxUzNTMHMxUjNwcnNyMiBhQWOwEVIyImNDY7ASc3FzgTqRIFOA4lJTmpgyUTJSUTJV1dXRMoDRg4DBAQDAkJFBsbFDgYDShxSxMTqA44BRI5qEtLJSUTJiZLE5koDRgQGBATGyccGA0oAAAEAAAAAAEaARoAEQAWACIALgAAJS8BIwcVFzMmJyM1MxcVFhc1ByMVMzQnMzUzFTMVIxUjNSMXIg4BHgI+ATU0JgEBOA5wExNkCQZVcDkKCG4nJSUlEyUlEyVwERwNBhgiHxMh3DgFEuETCAriOToDBUJwEwpnJSUTJiYmEx8iGAYNHBEXIQAABQAA//4BGgEaAB0AKgA2AFcAYwAANwYPARUWFxYVFAcOASIuAT4BNzUuAj4BMzYWBxQHLgEjIgYXHgI+AicWMj4BLgIOAhYXFhcWFRQOAS4CNjc2NzU0JisBFwcnNTcXBzMyFhcWBxc+AS4BDgIeAjZpCA0IEwoIAwYYHRcLBRQODhQFCxcPEx0BFgQNCA0RAwENEBAJASwHEA0IAQkQEQwDB8gOCg4QGhwUBgsMCAkRCyMYDigoDhgjDhgFBAELBwIKEBEMAwYLDQ7QDAYCXgQQDA4KCQ0QEBocFANfAxQcGhABHBQPnwcIFQ0IDAMGDg+eBQgOEA0HBAwQEHsDCg4TDhgLBhQcGggFAmgMEBgNKA0oDRgQDQkJqgcUEAYDDBEOCQMEAAAFAAAAAAEHAQ4ACQAXACEAJQApAAA3FTM1FzcnIwcXDwEVFzM3NScjDgEiJicXMxUjNTMeATI2JzMVIxUzFSODEzINQg1CDjYJCeEKCkIEGiEaA2kszisIICcgPRMTExPwIiIyDkFBDjsJXgkJXgkQFRUQEktLERUVXBMTEwAAAAMAAAAAAQcBDgAJABcAIQAANxUzNRc3JyMHFw8BFRczNzUnIw4BIiYnFzMVIzUzHgEyNoMTMg1CDUIONgkJ4QoKQgQaIRoDaSzOKwggJyDwbW0yDkFBDjsJXgkJXgkQFRUQEktLERUVAAAAAAMAAAAAAQcBGgAJABcAIQAANzUzFTcXByMnNw8BFRczNzUnIw4BIiYnFzMVIzUzHgEyNoMTMg1CDUIONgkJ4QoKQgQaIRoDaSzOKwggJyCtbGwxDUJCDVsJXgkJXgkQFRUQEktLERUVAAAAAAUAAAAAARoBGgAMABgAHwAjACcAADczFyMnNTczFxUnNSMXBzM3JyM3JyMPARc3MwczBzcjJyM1MwcjNTM5MA1GCgrhCRPOaBsqaQ0fDw82ESsRKzYjQmwfMwo2PxolLnETCakJCVohMKlBbCAbHQteGnA4bUg4EzkTAAABAAAAAAEYASEAbAAAJRYVFAcGBxYdARQGIiY9ATYmJzc2NzY3NjU0LwE2JwYPASYHJyYjBhcHDgEVFBcWFxYfAQYXFRYGIiY9AQYnJicmLwEuAScuAT4BFxYXFh8BFhcWNzUmNyYnJjU0NyY/ATYXFhc2FzY3Nh8BFgEHERcSIAYFBwUBBQUFFg0RCQsQAgcGERMHKSkHGgsGBwMICQsIEg0WBQsBAQYHBhENCwkFCAEFBwMCAwIGAwcHAwcBCggNFQIHIBEZEQUJBgQKEBUpKhQQCwQGCeoUGy0YEQUKES4EBQUELggNBg4DBgcPEh0WEQoQEgQNAgsLAhATEAkIFQodEQ8IBgMPCg8vBAYGBBoEBAMIBAsBBgYBAQYGBAIBBQMIAg0EBwUEDg0GERgrHBQaFQQCAQMNCgoNBAICBRkAAAAB//8AAAEtASwAVAAAEyIOARUUHgEXMjY9AQYnJicmLwEuAS8BJjc2MzEeAR8BFhcWNzY3JicmNTQ3MSY3MzIXFhc2MzIXNjc2FzEWDwEWFRQHBgceAR0BFBYzPgI1NC4BlilFKBouHgUFDgsJBwQDAwIIAwMJBAIEBgsDAwkOCgoBCB4QFhAHCQQGCAoNDxcRFBINBwMIBQEQFg8fBAYFBR4vGSlFASwoRSkgOioKBAQZAwMCBQQFBAgKAwEGAwEBBwQEDwEBBAwIBA0TJxcRExQDBAkFBQwDAgETFAERFycSDQQDDgopBAQKKzofKUUoAAAAAwAAAAABBwEHAAsAEwAXAAA3MzUzNSM1IxUjFTMnMxcVByMnNRczNSNxEnFxEjk5Qs4KCs4JEry8OHESOTkSXgrOCQnOxbwAAgAAAAABLQEsAAwAagAAEyIOARQeATI+ATQuAQMjIiY9ATQmJz4CNzY1NCYnPgE0JicjIgYPAiYHLwEuASsBDgEUFhcOARUUFx4CFw4BBw4BJi8CLgEjBwYUHwEWHwEeATczNxUUBisBLgI+AjIeAg4BB5YpRSgoRVJFKChFAQICBAQFDRcQAwQHBgEBAgICBQgECQcgIAcJBAkEAwECAQEGBwQDEBYNAwQBBw8LBAQEAwYDBQECCAICBgMRCgYHBAMBHSwTCiQ3PjckChMsHQEsKEVSRSgoRVJFKP7wAwMjBw0EAQkQCw0OCRIHBAcJCQUCAgUECQkEBQICBQkJBwQHEgkODQsQCQEDCQUDAQgHBAUBAwEBAgIGAgILCQoBARYDAwksOj4yHBwyPjosCQAAAAAKAAAAAAEaARoADAASAB4AKgAxADcAQQBIAE0AUwAAEzIeARQOASIuATQ+ARcuAScWHwE2NSYnIxYVFAczNic1NjQnIwYVFBczNicmJysBBgcjNjcOAQ8BBhQXMyY1NDcjFyMeARcmJxc2NyMWNwYHPgE3nyE4ISE4QjghITh9CR4SDAYyAQEDLAEELwJBAQJIAQRDAgMHEAoJEQYUBQ0THQkIBAQvBAEsNCwKJhcSCS8SCjcJQgkSFyULARkhOEI4ICA4QjghSxIaBhcbOAUEDw0KCBMTCQoBCRIJCQkTEwpBHhoaHhsYBxoSEg4dDhMTCApKFhwFGR0xFhsbHB4ZBRwWAAMAAAAAASwBGgAWACcAKgAAPwE1JwcXIyIGFBY7ATUjIi4BNjsBBxc3IyczHwIVByMnNRcVMzUjNxUzcSYoDRg4FBsbFAkJDBABEQw4GA1fMhNYDTkFE6gTE6hLEzi9Jw0oDRgcJxsTEBgQGA1LEgU4DqgTE4wQfJZLOQACAAAAAAEaALwAAwAHAAAlIRUhFSEVIQEZ/voBBv76AQa8EyYSAAAABwAAAAABGgEPAAkAEQAVAB0AIQApAC0AADcXByc1NxcHMxUHNTczFxUHIzc1IxU3NTczFxUHIzc1IxU3FRczNzUnIxcVIzUoEAsgIAsP8M4JJgkJJh0TOAkmCQkmHRM4CSYJCSYdE+ERCx8MHwwPE8arCAirCBGZmR2FCAiFCRF1dX1gCAhgCBBQUAACAAAAAAEgASwABgATAAAlFSMnNTMVNwcjJwcnNzMXNzMXBwEZ/QkTzmENH0QOSw4fYA0mDTgSCf30uGEfRA1LH2EmDQAAAAAGAAAAAAEaASwABgAKAA4AEgAWABoAACUVIyc1MxU3MxUjNzMVIwczFSMHMxUjNzMVIwEZ/QkTOCUlgyYmSyYmOCUlgyYmOBIJ/fTPJjglJiUmJTglAAAABwAAAAABGgEsAAYADgASABoAHgAmACoAADczNSM1IxU3NTczFxUHIzc1IxU3FRczNzUnIxcVIzUHNTczFxUHIzc1IxUc/fMTJQolCgolHBODCiUKCiUcE14KJQoKJRwTJhL0/SWWCgqWCRODg7K8CQm8CRKpqbNxCQlxCRNeXgAGAAAAAADPAPQAAwAHAAsADwATABcAADczFSMVMxUjFTMVIzczFSMVMxUjFTMVI14lJSUlJSVLJSUlJSUl9CYlJiUmvCYlJiUmAAAACwAAAAABBwEaAAkAEQAVAB0AIQApAC0ANQA5AD0AQQAAEzMVIxUzFSMnNRcjJzU3MxcVJzM1IxcjJzU3MxcVJzM1IwcjJzU3MxcVJzM1IxcjJzU3MxcVJzM1KwIVMzUjFTMcJhwcJgl6JgkJJgklEhKMOAkJOAo5JiZBJgkJJgklEhKMOAkJOAo5JiYSJiYmJgEZEuETCfRnCSYJCSYKEiUJOAoKOAollgkmCQkmChM5CjgJCTgJJhNwEgABAAAAAAEaAQcAHAAAJS4BJy4BIgYPAScuASIGBw4CFB4BHwE3PgI0ARcCCQcKGhsZCg0NChkbGgoHCQQECQdvbwcJBNIJEQYKCgoJDQ0JCgoKBxASEhIQB25uBxASEgACAAAAAAEaAQcAHQA9AAAlLgEnLgEiBg8BJy4BIgYHBgcGFB4BHwE3Njc2NTQHBg8BJy4CND4BNzY3NhcWHwE3Njc2FxYXFhcWFRQHARcCCQcKGhsZCg0NChkbGgoNBQIECQdvbwcECRUDCmFiBQcDAwcFBwoTFAkHGhkHChMUCQcFAwcB0gkRBgoLCwkNDQkLCwoNEwkSEhAGb28GCBATCRUNCmFhBQwMDg0LBQcECAgDCBkZBwQICAQHBQYLDgcGAAAAAgAAAAABHQEbAB4AJQAANz4BJicuAQ4BBzUjFRczNSM+AR4BDgImJwceAjYnNyc1IxUX/RINDBITPEE4EBMJQikTSEouAjFLRhIQDzhCPisONhMDRRc5ORcaHAQhHC1CCRIiHRU+TTwSISIJHSYGGywNNkdLBwAAAgAAAAABFAETABEAHAAAExcHJxUHIyc1IxUHIyc1Byc3BxUzNTczFxUzNSeddw0TCjgJJgk4ChIOd0QmCTgKJUsBEmwOEXoJCUJCCQl6EQ5sWIJCCQlCgkQAAAAEAAAAAAD0AOIACwAgACwAMAAANzM1IxUjNSMVMzUzFzMnNjc2NzY0LgEnJicmKwEVMzUzNwYrATUzMhYVFAcGFyMVM3kPDzEQEDFqERgDBAgDAgMFBAYHBAMuDxwJAwIgIAYKAQMXvLxxcDExcDAwMQEDBgkFCwoHAwUCAXAuEAEkCggFAwdmEwAAAAUAAAAAAQcBGgAkAC4AOwA/AEMAADczFxUzFxUHIxUHIwcnNSMnNSMnNTczNTczNS4BNTQ2MhYVBgcXNSMVFzMVPwEzJwYHMQYmJwceATI2NycjFTM3MxUjn0sJCgoKCgk6LxAvCgkJCQkKSwQGCxALAQlCli8JIgc1KAsODRgJDQoZHBkJTBMTOBMT4QkmChIJOQk0By0MNgkSCigHFQMIBgcLCwcLBWE4bgIpJgMuCgMDCAkOCQsLCTMTExMAAAMAAAAAARoBGgAJABMAHQAANzM3NS8BIw8BFTcjNTMfATM/ATMnIw8BIy8BIzczHPQJNAiNCTT04S8OCFYIDTEBNQkMSw4INTF/JglUkAYGi1kJOBcFBRcTBRcXBYQAAAEAAAAAAPQAzwARAAA3FRQWOwEnNxcVByc3IyImPQFLBQSBHg0wMA0egQsRziUEBR4OMAsvDR4QDCUAAAQAAAAAARkBGwATACcAKwAvAAATHgEXHgEGBw4BJicuAz4DFz4BNz4BJicuAQYHDgEeARceATcnMzUjFxUjNaEWKQ8YEgwVEzc8GxQeEQINGiYrIBIhDBILEBQSMTMVGRoDHxoRJhIfGBgYGAEZAxMQGD5AGhgZAg4LIiotLCQaC/MEFA8WNzUVEhEHDhE1OzIOCQYElBIlS0sAAAUAAAAAARoBGgAHAAsAEwAXAB0AAAEXFQcjJzU3FyMVMxUXFQcjJzU3FyMVMycXBxc3JwEHEhKWExOWlpYSEpYTE5aWlvQeHg0rKwEZEksTE0sSEks5EksTE0sSEkuOHh4NKysAAAAAAwAAAAABJwEHAAwAEAAUAAA/ATMXFSM1IxUzFSMnBScVNwc1FyMTE+ESEuFdXRMBFH4zID0l9BMTcXGWExMgfrEzBlY+AAAACQAAAAABBwEaAAcADQAVABsAJAAqADIAOABBAAA3FzY0JwcWFCc3JicHFic3JiIHFzYyBycGBxc2BzQ3FwYWFwcmFwcWFzcmFwceATcnBiI3FzY3JwYnMjY0JiIGFBbvEgYGEgULEBIjCR4sBRInEgYPIT8JIxIRDy0GEgYBBRIGHhESIwkeLQYSJxIFECE/CSMSEBBMBwsLDwsLfwUSJxIGDyE/CSMSEQ8VEgYGEgYMERIjCR5NFBIGDyEQBRIbCSMSEBAWEgUBBhIFCxASIwkeOgsPCwsPCwAAAAMAAAAAASMBGwAVADAAOQAANwcvATcXPgMeAxcjLgIGBzcfAQcnDgMuAyczNRQeAz4CNwcnNycUFjI2NCYiBmM9DRkRDwgbJCgpJRwQARIEMkg+DCytGREPCBskKSkkHBACEwwYHyQjIBcHKwc9fwsQCwsQC8IZBTwHJBMfFAgGFB4mFCQ0CSciEkM9CCUTHxQIBxQeJhUJEiIcEgYGEhwREhIZCggLCw8LCwADAAAAAAEHARoADQAbACQAABMiDgEeAj4BJzYuAgciLgE+Ah4BFRQOAicUFjI2NCYiBo0lPhwONUhEKgEBEyItGCA0GA0sPTojEB0mJwsPCwsPCwEZKURJNA4cPSUZLCMS4SM6PSwNGDQgFCYdEGcHCwsPCwsAAAABAAAAAADgAQcAHAAANwcjNzI3Njc2PwE2NTQuASM3MwcmDgEPAQYUHgGpAlwCDgUHAwYGJgUECQwCVgIKDQgGJgYECS0GBgIDBQgUhxAJBAcCBwcBBgwVhxMJBgMAAAACAAAAAAEaAQcAGwAxAAA3Iyc1Iy8BPwEXHgEXFhcWNzY/Ax8BDwEjFSczNTczNycHBgcOASImJyYvAQcXMxffkwkbCQwGUAwBBQIFBg4NBgUFBAxQBgwJG5OACR0IPwMDAwgUFRMHBAMDQAkcCiEKfQcyCxsGBQcCBQMFBgIFBQkGGwsyB30JfQkjFQQFAwgICAgDBQQVIwkAAAACAAAAAAEHAQcARgCNAAA3NSMiDgEHMQYHMQYXFRQHMQYHBisBFTMyFxUWFxUWFzEWHQEGFxUWFzEeAhczNSMiLgI9ATQmJyYnNjc+AT0BNDY3NjMXFTMyPgE3MTY3MTYnNTQ3MTY3NjsBNSMiJzUmJzUmJzEmPQE2JzUmJzEuAgcjFTMyHgIdARQWFxYXBgcOAR0BFAYHBiNxAgkRDAMDAQEBAgQKBQYBAQYFBQMEAgIBAQEDAw0QCQICBgoHBAICBQkJBQICCQcFBk0BCRANAwMBAQECBAoFBgICBgUFAwQCAgEBAQMDDRAJAQEGCgcEAgIFCQkFAgIJBwUG9BMHDQgICAgIEAYFCgUCEgIBAgMBAwUFBhAICAEHCAgNBgETBAgKBhkGDAULBwcLBQwGGQkNBAK8EgYNCAcJCAgQBgUKBQISAgECAwEDBQUGEAgIAQcICA0HARIECAoGGQYMBQsHBwsFDAYZCQ0EAgAAAAMAAAAAAKoBBwALABQAHQAANx4BPgImJyYOARY3IiY0NjIWFAYnIiY0NjIWFAaMBAoJBQEEBQYPCAIRCAsLEAsLCAgLCxALCykDAQUICgkDBAMND1YLEAsLEAteCxALCxALAAADAAAAAAEcARwAHAA5AEUAABMeAgcOASMiJw8BIxUHIxUHIyc1PwEmNTQ+Ahc2NzE2LgIHDgEVBhcPARUzNTczNTczPwEWMzI3PgEuAgYHBh4BNtUXIwwEBi8eDQsPBxMJHAo4CQJeBBEdJSwSBQMJGCARFh4BBQJeJQkdCRcRCgwMFwMDAQUICwkCBAMNDgEYBSArFh0mBBIDHAocCQkrB10NDhIjFwmKDhcRIBgJAwUkFw0MCl8eHQkcCRMDBEIECgkGAQUEBw8IAwAGAAAAAAEaARoALwA2ADkAPQBAAEcAACUnMzUjNSMVIxUzByMVMx4BMjY3MzUjJzMVIw8BFzM3LwEjNTMHIxUzHgEyNjczNQcGIiYnMwYnIzcfASM/ARcjFwYiJiczBgESHhNeE14THgcCBRgeGQUCCB86JQglB6kHJQglOh8IAgUYHxgFArcGDwwELwQBJhN2F4MXdhMmIAYPDAQvBKlLExISE0sTDhISDhNLlgQvDw8vBJZLEw4SEg4THQMHBgYZLYscHIotHAQIBgYAAAAABgAA//0BLQEYAAcACwAXAB8ALAAzAAATIwcVFzM3NQc3Fw8BJzMXNzMHIyIGDwEXBycjFzM3Jjc2FzIWFRQOAS4CNhc3JwcnBxeZCm9vCnPWXmFhBW0hUVQiDwcZJwgTEBVRIW0KFAQrDxEXIRMfIhgHDS4iDxwQDBgBGEwQSkoQCEFBP0JKNzcKHRYNDg43Sg0JPQoBIBgRHA0GGSEgPy0LJQ4PEwAABQAAAAABLAEYAAcACwAXAB8AKAAAEyMHFRczNzUHNxcPASczFzczByMiBg8BFwcnIxczNyY3FBYyNjQmIgaZCm9vCnPWXmFhBW0hUVQiDwcZJwgTEBVRIW0KFAQTIC8hIS8gARhMEEpKEAhBQT9CSjc3Ch0WDQ4ON0oNCQ4XISEvISEABAAAAAABDAEYAAcACwASABkAABMzFxUHIyc1NwcXNwcXMzcjBycXJzMXNzMHjwpzcwpvdF5eYdNtCnEiVFFMbSFRVCJxARhMEEpKEDlBPz83Sko3N3lKNzdKAAACAAAAAAEaARoABwALAAATBxUXMzc1JxUjNTMmExPhEhK8vAEZEuETE+ES8+EAAAACAAAAAAEaARoABwALAAATBxUXMzc1Jwc1MxUmExPhEhLhuwEZEuETE+ES8+HhAAADAAAAAAEaARoABwALAA8AABMHFRczNzUnBzUzFTM1MxUmExPhEhLhS0tLARkS4RMT4RLz4eHh4QAAAAAFAAAAAAEaARoABwALAA8AEwAXAAATNzMXFQcjJzcVMzUHMxUjNzMVIzcjFTMTE+ESEuETE+HPJiY5JSVdJSUBBhMT4RIS4eHhEhMTExMTAAQAAAAAARoBGgAHAAsADwATAAATBxUXMzc1Jwc1MxU3NTMVNzMVIyYTE+ESEuElE3ATJiYBGRLhExPhEvPh4UuWlpbhAAAAAAQAAAAAARoBGgAHAAsADwATAAATBxUXMzc1Jwc1MxUzNTMVMzUzFSYTE+ESEuElE3ATJgEZEuETE+ESqJaWlpaWlgAAAwAAAAABGgEaAAcACwAPAAATNzMXFQcjJzcVMzUzFTM1ExPhEhLhExOWEjkBBxIS4RMT4ZaW4eEAAAAAAwAAAAABGgEaAAcACwAPAAATBxUXMzc1Jwc1MxUHMxUjJhMT4RIS4eHh4eEBGRPhEhLhE6mWlhI5AAAAAwAAAAABGgEaAAcACwAPAAATNzMXFQcjJzcVMzUzFTM1ExPhEhLhExM4E5YBBxIS4RMT4eHhlpYAAAAAAgAAAAABGgEaAAcACwAAEwcVFzM3NScHNTMVJhMT4RIS4eEBGRLhExPhEqiWlgAAAwAAAAABGgEaAAcACwAPAAATBxUXMzc1Jwc1MxUzNTMVJhMT4RIS4UsShAEZE+ESEuET9OHh4eEAAAAAAgAAAAABGgEaAAcACwAAEwcVFzM3NScVIzUzJhMT4RIShIQBGRLhExPhEvPhAAAAAwAAAAABGgEaAAcACwAPAAATBxUXMzc1Jwc1MxUzNTMVJhMT4RIS4YMTSwEZE+ESEuET9OHh4eEAAAAAAgAAAAABGgEaAAcACwAAEwcVFzM3NScHNTMVJhMT4RIS4YMBGRLhExPhEvPh4QAAAgAAAAABGgEaAAcACwAAEwcVFzM3NScHNTMVJhMT4RIS4eEBGRPhEhLhE+HOzgAABgAAAAABGgEHAAcACwATABcAHwAjAAATBxUXMzc1Jwc1MxU/ATMXFQcjJzcVMzUHNzMXFQcjJzcVMzU4EhJLExNLSzkSORISORISOUsSORISORISOQEHE7wSErwTz7y8vBMTOBMTODg4gxISORISOTk5AAAGAAAAAAEoAQcABwALABMAFwAfACMAAD8BMxcVByMnNxUzNRc/AR8BDwEvARc3LwE3MxcVByMnNxUzNV4JJgkJJgkTEikGIwxGBSMMMkASQb8JJgkJJgkTEv0KCs4JCcW8vAcMDQXCDA0FwLAGsAwKCs4JCcW8vAADAAAAAAEaARoACAASADcAADciBhQWMjY0JhcnBzcnMzcXMwcnDgEHIxUUFjsBFhcjBiY9ATQmJy4BNTQ3PgMzMh4BFRQHBuEXISEuISECGRgJFhsKChwXHxIdByMDAxoDBSIKDwoJDA4MBRATFQwXJxcHBIMhLiEhLiFdEhIcEB8fEFIDGBIpAgQKCAEPCh4NGAkLHxEXEwoPCwYWJxcSDgkAAAMAAAAAAR0BGgA7AFgAbAAANzY3Nj8BNjc2NTQuBCIOBAceARceAR0BFB4COwEyPgI1JyMmJxUUBisBIiY9ATM+ATM3Mhc2NzY3NjMwMScmJyYnJicGBwYHBg8BFxYXFhcWFzY3NjIXFhcWFAcGBwYiJyYnJjSoBQgGBAICBwUGCxATFRgVEw8LBgEBDQwKCgMHCQUeBQkHBAECCQcDAx4CBCUDCwcCBDMGDgsNBwUHCAgLCAoEBQoICwcJBwcJBwsICh8JBgIHAgYJAgIJBgIHAgYJAngKCAUGBwgFDQ8MFRMPCwYGCw8TFQwSHQwKFw0eBQkHAwMHCQUIAQYPAgQEAikGCAFQGA8KBQIBAQUGCg4TEw4KBgUBAQECBAYLDQUGCQICCQYCBgIGCQMDCQYCBgAAAgAAAAAA9QEaACEAKwAANw4BHQEUBgcGJyMGJj0BNCYnLgE1NDc+AzMyHgEVFAYHIxUUFjsBMjY12wkLCAcEBR4LDgoJDA4MBQ8TFgwXJxYNMykDAx4CA4oJGA0eBw0DAgEBDwoeDRgJCx8RFxMKDwsGFicXEh4uKQIEAwMAAAACAAAAAAEaARoADAAWAAATMxUjFTM1MxUHIyc1IRUjNQcnNyM1MxxVS+ESCfQJAQYSfw1+Y3oBGRLhS1UJCfR6Y34NfxIAAAACAAAAAAEaAPQAJABJAAA3MzIeAR0BFA4BKwE1MzI2PQE0JisBIgYdAR4BFxUuAT0BND4BFzUeAR0BFA4BKwEiLgE9ATQ+ATsBFSMiBh0BFBY7ATI2NzUuAVM5Eh0RER0SCQkTGhoTORMbARUQGCARHaAYIBEdEToSHRERHRIJCRMaGhM6EhoBARX0ER4RBBEdEhMbEgQTGhoTBBAZAxMDJBgEER4RTBMDJBgEER4RER4RBBEdERIbEgQTGhoTBBAZAAAAAwAAAAABBwD0AAMABwALAAA3NTMVJzMVIzcVIzVxS3GWlrzhSxMTXhNeExMAAAAABAAAAAABBwD0AAMABwALAA8AADczFSMVMxUjNTMVIzUzFSMmqKiWluHhzs6DEiYThBNLEwAAAAAGAAAAAAEaAQcABgAKAA4AEgAzAGsAABM3MxUjNQc3MxUjFTMVIxcjFTMnPwE2NCcmJyYiBwYHBgcVMzU0PwEyMxcVFg8CFTM1IxcyFxYVFAcGBwYiLgEvASYnMTMVFxYzPwIvASsBNTczPwEnNCYPAQYdASM1NDc+AjIeAhQHKwcNDQczu7u7u7u7u9MBAQMBAgcFCAUGAgEBEAEBAQIBAQECEyURCwIBAwECBwUIBQQCAgEBEAECAQEBAQEBAQQEAQEBAQMBAQEPAwEEBgcGBgQDAQAHOSoGAhM4EzgTUgEBBQgEBwICAgIHAwMBAQECAQIBAwMDFQsNOgIEBgMDBwICAgMCBAMEAgIBAQICAwIMAQEDAgEBAQEBAgEBBgUCAwICAwcJBAAAAAADAAAAAAEaAPQAAwAHAAsAADc1MxUnIRUhNxUjNROpqQEG/vrOzksTE14TXhMTAAAFAAAAAAEHAPQAAwAHAAsADwATAAA3MxUjFTMVIzUzFSMnMxUjOwEVI0upqYODvLw4zs44ExODEiYThBNLE6kACAAAAAABGgD0AAMABwALAA8AEwAXABsAHwAANyMVMxUjFTMHMxUjFyMVMzczFSMXIxUzBzMVIxcjFTMmExMTExMTExMTEyXOzs7Ozs7Ozs7OzvQTJRMmEiYTvBMlEyYSJhMAAAQAAAAAASMBIAAWACcAMwA/AAATNxcVByc1IyIHBgcGBycmNz4DFzMXFTcnFSMmBgcGBzY3Njc2Mwc+AR4CBgcGLgE2Fx4BPgImJyYOARasEmRkEggfDxYUFRcTAQQEGSgwGg0WR0YkGC4RFQkUFBIWDxxCDB0aEAINDBMrGQkeBxEQCQIIBwwaDwYBFwlQEUwJIwMEDQ8eBg4OGSwgEQFBIzY4IQERERYdEwoIAwJKCQINGB0bBwwJJCw7BQIIDxEQBAgGFhoAAQAAAAABGAEaAA8AACUuAiIOAQcjPgIyHgEXAQUFHzA2MB8FEwUlOEA4JQWpGisYGCsaIDMdHTMgAAAABAAAAAAA4gEQABAAHgAnADMAADcuASMxIg4CHwEzNzYnNCYnOwEeARcUDwEnJjU+ARcmDgEeAT4BJic+AR4CBgcGLgE2ywocDxUiFAEMOwo7DAELQQECFiABCTAwCQEgIgYQCAMNDwkDJggVEgsBCQkMHhEF+goMFSIqEnd3EhYPGw4BIRcQDWFhDRAXISgFAw0PCQMNDxQGAgkRFRIFCAYZHgADAAAAAAD0AQcABwALABsAAD8BMxcVByMnNxUzNSc1NCYiBh0BMzU0NjIWHQE4E5YTE5YTE5YTIS4hExUgFZYTE14SEl5eXhMlGCEhGCUlEBYWECUAAAAAAwAAAAABBwEaABEAGQAdAAA3IzU0LgEiDgEdASMHFRczNzUnND4BFh0BIxcjNTP0ExQjKCMUExISvBOpIS4hcJa8vKklFSIUFCIVJRNwExNwOBggASEYJYNwAAAEAAAAAAEaARAAFgAaAB4AMAAAEyIOAR0BFzM3NTQ2MhYdARczNzU0LgEHIzUzFyM1Myc1NCYiBgcVIzU0PgEyHgEdAZYkPCMTOBMWHhcSORIjPFw4OKk5OTkgLiEBOB40PDQfARAjPCReExNeDxYWD14TE14kPCPhODg4ExMYIB8WFhMeNB4eNB4TAAMAAAAAARoBDwAHAAwAFAAAEyMHFRczNzUnFwcjJxcjNR8BMz8Bmwp+CfQJg2oaoBjZ4RQIqAgVAQ9LlQkJlTg/HR2FchoDAxoAAAADAAAAAAEaAPQABwANABAAAD8BMxcVByMnNxUzNQcjNyMXEwn0CQn0CRPhawxkvF7qCgqoCgqVjIxSXEkAAAAAAwAAAAABBwD0AAMABwALAAA3FTc1FzUnFRc1NxUmQUs4S0LFjSmNsI0jjSONKY0AAwAAAAAA9AEHAAMABwALAAATMwcjFyMnMxcjBzNnjSmNsI0jjSONKY0BB0JLOEtBAAAAAAQAAAAAAPwBEAADAAcAFQAZAAA3MwcjFTMXIz8BJyMPARUXBxczPwE1BzMHI2x3I3d3I3dkLAiNCC8sLAiNCC+QdyN3/TgTOEJGDgVLCUZHDgVLCQ44AAAEAAAAAAEQAPwAAwAHABUAGQAANxU3NTMVFzUPASc1PwEzFzcXFQ8BIzcVNzUvOBM4QUcOBUsJR0YOBUsJDjjAdyN3dyN3ZCwIjQgvLCwIjQgvkHcjdwAAAgAAAAABGgDPABAAFwAANzMVIzcHIycUFRcjNTMXFhc3NSMVIxc3dycbASEXIQEZKA8OAZwlJDc2znpjY2MHLy16KysEFkJCNjYAAAMAAAAAARoA7gAPABcAGwAAPwEXFQcnDgIuAjcvATUXBhUUHgE2NycXNQcm5wwMcgMPFRYPBgMmCEABCxAOAljX161ACqEKHgsPBgUQFQsKCiQ9AgIJDAIICCw5ij0AAAIAAAAAAO4A9QA4AEIAADcGJwYuAjc0PgIzMhcWFRQGIyI1DgEjIiY0PgEzNhYXNzMHBhYzMjY1NCYjIg4BFQYeAjcWNycUMzI2NzYjIgbEGh8RIRkMAQ4dJhQkFhkfFxUGEQoOEQ0XDQkPAwQRDwMDBg4VJR8YJRUBCRQbDhwZTBELEAQJGQ4SRA8BAQwZIBIUJx0QExUjHicSCQkTIh0SAQoIDzwNCh8WHSAYKRgPGhQKAQENOBcSESQeAAAAAAMAAAAAASwA4QADAAcACwAAJSE1IRUhNSE1ITUhASz+1AEs/tQBLP7UASzOE6kTOBMAAAACAAAAAADrAP4AJgA7AAA3JyMHFzcVMRUxFRQfARYXHgEfAR4CHQEzNTQuAi8BLgI3JxcHNjcmLwEGDwEOAx0BMzU0PgE3xSgOKA0VAQICAgQNBw4HDAcaBQsMBw0GCwYBARU0AwMHBAIFBg0HDAsFGgcMB9UoKA0UEwkGBQULBgYLEQgPBxETDRERDRgSEAcOBhAUCx0UUwQDCgwFBwYOBw8TGA0REQ0TEQcAAwAAAAAA/gEQAAsADwAjAAA3NDYyFh0BFAYiJjUXNTMVJwYuATUzFB4BOwEyPgE1MxQOASNeIS4hIS4hLxISGisZExQiFRIVIhQTGSsa2BchIRdLGCEhGI0mJiYBGisZFCMUFCMUGSsZAAAABAAAAAAA/gEaAAsAHAAgADQAADc1NDYyFh0BFAYiJjciDgEdARQeATI+AT0BNC4BAzUzFScGLgE1MxQeATsBMj4BNTMUDgEjZxwmHBwmHC8SHhISHiQeEhIeGxISGisZExQiFRIVIhQTGSsajUsTHBwTSxQbG6ARHxFLEh4SEh4SSxEfEf7nJiYmARorGRQjFBQjFBkrGQADAAAAAAEaARoAEQAWABoAABMjFSMHFRczFTM1Mz8BNS8BIxcjNTMXJzMVI5YTZwkJZxNUBygoB1RQwMAfp15eARklCksJg4MCJg4lA0s4HAkSAAADAAAAAAEaARoACgAVACUAABMfARUHJwcnNT8BHwE1JxUjNQcVNzE/ARcVByc3IxcHJzU3FwczoXQEDnV1DgR0FWdnE2dnIw4uLg0ecR4NLi4NH3IBGUsHrAhLSwisB0urQpZCNjZClkJaDS8NLg0eHg0uDS8NHwADAAAAAAEaAPQAEwAeACIAACUnIwcVMzUXBh0BHwEzPwE1NCc3BxUHJzU2NxczNxYvATcXARmABoATKw8FSwhJBg8/QkFCAQ0xBzANQWdnZ8IyMndeERUaCAciIggIGRUZRwEeHgEWEhMTEhEoKCgABAAAAAABEAEaAAkAEwAdACcAADcHNSMVJwcXMzcnFzcVMzUXNycjDwEzFSMXByc1NxczJzcXFQcnNyPAIRIhDTAOMG4NIRIhDTAONSFBQSENMTFlQSENMTENIUFjIEBAIA0wMJMNIEBAIA0wUCATIA4xDTAtIA0wDTEOIAAAAAAFAAAAAAEaARoADAAQABgAHAAgAAATNzMXFQcjNTM1IxUjNxUzNQ8BFRczNzUnBzUzFQczFSNxCZYJCS8mhBIShOsJCZYKCoyDg4ODARAJCYMKE0sTORMTXgqDCQmDCiYTExJLAAAAAAUAAAAAAQcBBwAMABUAJwArADQAACUjFSYjIgYUFj4BPQEHMhYUBiImPgE3DwEVJiMOARQWMjY9ATcVMzUHFQc1BzIWFAYiJjQ2AQcTDQ8UGxsnGy4LEREXEQEQMZYJDQ8UGxsnG4QTE4MvCxERFxAQqS8JGyccARsTVTgRFxERFxGVCQmNCgEbJxsbFHEIElQKJQkmjREXEBAXEQAAAAADAAAAAAEZARcACQARAB0AADczNxcVBycjJzUfATUPASMVMzcXBxcHJwcnNyc3Fxw0SRAQSTQJSDs7By4utw0gIA0hIA0gIA0gzkgG9AZICV5YO8c7AktJDSAhDSAgDSEgDSAAAwAAAAABLAEaABAAEwAfAAATHwEVIzUjNSMVMxUjJzU3MwcVMxcjNSM1MzUzFTMVI7JAAhNLXktUCQl+BDYVEzg4Ezg4ARdBCCUTS88SCeEJEjnOOBM4OBMAAAADAAAAAAEsARoAEgAcACgAAAEjLwEjBxUXMzUjNTM/ATMHMzUHIw8BIzUzHwEzByM1IzUzNTMVMxUjARB/EAdeCQlnXlUGEHcBExN6BhBQUBAHehMTODgTODgBBw8DCc4KE3ECECVUHAMQOBAC9DgTODgTAAEAAAAAAPQAxQARAAA3FRQGKwE3JwcVFzcnMzI2PQHhBQSBHg0wMA0egQsRxSUEBh8NMAowDR8QDCUAAAQAAAAAARoA0gAIAA8AFgAoAAA3Nh4BDgEuATYXLgEOARYfAR4BPgEmJzcVFAYrATcnBxUXNyczMjY9ASwTLhoJJy4aCUYJFBIKAQUNCRQSCgEFnAYETR4NMDANHk0MEMUNCScuGgknLgIFAQoSFAkNBQEKEhQJJSUEBR4OMAsvDR4QDCUAAAAFAAAAAAEaAQcABwALAA8AEwAXAAATMxcVByMnNRcVMzUHMxUjFyMVMwczFSMc9AkJ9AkT4byWlnFxcXFLSwEHCrsKCrsJqakmEhMTExIAABcAAAAAASwBLAADAAcACwAPABMAFwAbAB8AIwAnACsALwAzADcAOwA/AEMASwBPAFMAVwBbAF8AADcjNTMVIzUzFSM1MxUjNTMVIzUzHQEjNRczFSM3MxUjAyM1MxcjNTsCFSMzIzUzFyM1MxcjNTMVNTMdASM1MysBNTMXNzMXFQcjJzcVMzUXMxUjFTMVIxUzFSMnMxUjExMTExMTExMTExMTExMTJRMTJRMTJRISExMTOBISJhMTJRISExMTzhMTSxODExODExODJRMTExMTE5ZeXs4TOBM5EzgTORMlExMTExMTARkTExMTExMTExMlEhImExNLEhKpExOpqakTJhImEyWDEwAAAAAHAAAAAAEaARoABwALABMAFwAbAB8AIwAAEzczFxUHIyc3FTM1BzczFxUHIyc3FTM1FyMVMwczFSMXIxUzJhKpExOpEhKplhNeEhJeExNeXRISEhISEhISAQcSEuETE+Hh4SYTExMSEhMTExMlEyUTJgAAAAQAAAAAARoA+gAlAEAASQBSAAAlNjc2JyMmBwYHBgcmIgcmJyYHMQYXFhcGFRQXFhcWMjc2NzY1NAciJyYnJjU0NzY3MhcWMjc2MxYXFhUUBwYHBiciBhQWMjY0JjMiBhQWMjY0JgEEAwEBBwQEBggJDA4SQhIZEgkFBwEBAxURDx8aUxsfDxGDIRAYDA0RCA8KFhESEhUKDwgRDQwYEEoIDAwQDAxKCAwMEAwMwggKEhIBAgEFBQkFBRAEAgESEgoIFyApGBUKCAgKFRgpIHgDBAsMGRMPCAIBAQEBAggPExgNCwQDUhEYEREYEREYEREYEQAEAAAAAAEtARoADAAQACIALgAAEzMXFSYnNSMVByMnNRczNSMXIgcjDgEXBxc3HgE+Ai4CBwYuAT4CHgIOATjPEgkKXRVcEhJeXsMMCgERCQssDSwJFxUPBwQNFQgKDwcEDBAQCQEGDAEZEmQEAl7MFRLPz89xBwonESwNLAYDCBAVFhIKSwELDxEMAwYNDw4IAAAACgAAAAABGgEcAAsAFwAkAC0ASABiAHcAkgCeAKcAADcOAS4CNjc2HgEGJy4BDgIWFxY+ASY3NhYXHgEOAiYnJjYXFjI2NCYiBhQHMxUjIiY9ASImPQE0NjsBBgcjIgYdATMVFBY3JisBIgYdARQWMxUGFxYXMz4BPQEyNj0BNAcjFRQGKwEiJj0BIzUmNjsBMh4BFRcjNTMyNj0BMzU0JisBJiczMhYdARQGIxUUBiciDgEeAj4BNTQmByImNDYyFhQGqwkUEgsCCggNHhIGGAQKCQYBBQUGDwgDKwkUBwUEAwkOEQYJAhQDCAUFCAWcIiIJDgcLEw4iBwMYBgkTAosKDi4OEwsIAQcFByYICwcLEhMCAh4CAhIBCQYuBQcDNCIiAQMTCQYYAwciDhMLBw6uCQ4GAwwREAkQDAQFBQgFBdUGAgkRFBIGCAYZHyYDAQQJCgkDBAQMDwQFAgcFDQ4LBgMGChoWAwUIBgYIpRMNCiIMCCkNFAgLCQUqNQICegoUDjsIDCwJBwUBAgwILAwIPA1KPwECAgE/PQUJBQcCdhMCAjUqBQkLCBQNKQgMIgoN2QoQEQwDBg8IDBEmBQgGBggFAAAABQAAAAABBwEsABUAGQAdACEAJQAAExUXFQcjJzU3NTMVMzUzFTM1MxUzNQMzNSMXMxUjFyMVMwczFSP0ExO8EhITJhImEyWpvLwmcHBwcHBwcHABLBMS9BMT9BITExMTExMT/uf0JhM4EzgTAAAAAAQAAAAAARoA9AAKABAAFAAcAAA3HwEVDwEvATU/ARcHHwE/AQcXNScXFTc1BxUHNaFsDAdzcwYLawRLCkA5EbFeXnFeJhP0HQl+CSAgCX4JHRMTAxEPBXcabBkZbBprCjAFMAADAAAAAAESARoAIwAtAEIAACUnNSc1NCcmJyYjIgYdAQcGFB8BFhcWNzY/AQcUHgIyPgInJj4CHgEdAQcXDgEmLwEmND8BFQYUHgE+ASYnNRcBERZcAgQLBgUMEDkJCUQEBQsKBQRdDQEGBwoIBgKWAQEDBAYEEhMBBQYBRAMDUgUGCgkEAwRITzoBXBcGBQsEAhAMPTgIFwlEBAIEBAIEXSoECQcEBAcIswIEAwEBBQQXE6oCAgICRAIIA1E1BAsJAwUJCgM1SQAAAAACAAAAAAEaARoADAATAAA3Mj4BNC4BIg4BFB4BNyMnNxc3F5YkPCMjPEg8IyM8EQ0rDSRPDRMjPEg8IyM8SDwjTSsNJE8NAAADAAAAAAEWARsABgAcAC8AADczNycHJwc3HgEXFhUUBw4BBwYnLgM3Njc+ARc2NzYnNCYnJicmBgcOARYXHgF2DVUNTyQNVhYpECYeDyYWMCcUHhADBw8mEishJhkZAhEPHSYTJg8gFyEiECZgVg1PJA2OARQQKTcrJxIXBAkWCyIqLhUuGQwM9AkfIiUXKhAdAwEJCxhOSBMKBgAEAAAAAAEaARsACwAXACMARQAANyMVIxUzFTM1MzUjJy4BDgIWFxY+ASYnPgEeAgYHBi4BNhczMhYdASM1NCYrASIGHQEzFRQWOwEVIyImNzUiJjc1NDb0EyUlEyUlVAQKCQUBBAUGDwkDJgkUEgsCCggNHhEGCi4OExIJBi4GCRMCAg8PCQ4BCQsBE3EmEyUlE7gDAQUICgkDBAMNDxQGAQkRFBIFCQcZHkUTDg4OBggIBjM/AQITDQksDAgyDhMAAAAABAAAAAAAzwEaAAgAEQApAD0AABMyFhQGIiY0NjciBh4BMjY0JhcjIgYdAQYWMxUGFjsBMjY9ATI2JzU0Jgc1JjY7ATIWBxUjFRQGKwEiJj0BlggLCxALCwgQFgEVIBYWBy4OEwELCQEOCR4KDQgLARNKAQkGLgYJARICAh4CAgEHCxALCxALEhYfFhYfFlQTDjIIDCwJDQ0KKwwIMg4TVDMGCAgGMz8BAgIBPwAAAAABAAAAAAEsAQcALQAAEwcVMzUzFRczNzUzFRczNzUzFRczNzUzFSM1IxUjNSMVIzUjFSM1IxUXITc1JxMTEyUKEgolChIKJQoSCiU4Ey8SLxM4ExMBBhMTAQcTcXFnCgpnZwoKZ2cKCme8OTk5OTk5S0sSErwTAAAEAAAAAAEaARoABQAOABsALQAANzMuAScVNx4BFxYVIzUyBxczDgEjIi4BNTQ2NxcyPgE3NjUjNSIHDgIXFB4BvEkGKBwBIzMGAXAJLxNcBzMiGSwZKyATGzAgBAJxCQoaKxkBHjO8GygGSVwGMyMKCXCDEyArGSwZIjMHzBgrGgoJcQIEIDAbHzMeAAIAAAAAAQcA4QAcADcAACUVIyImJyMOAysBNSMnNzM1MzIWFxYXMz4BMwcGBwYPASMnJicuAScVPgE3Nj8BMxcWHwEWFwEHBgsTBzYEDA8SCgk8ExM8CQoRCBAINgcTCwkDAwUDBE0CBAkEDwYGDwQJBAJNBAECBQIEzoMKCQkOCgVLCglLBQUKEgkKFAECAwYFBgwIAwcBgwEHBAgLBwYDAgQCAQAAAAIAAAAAAS0BBwA2AFAAABMzFRQGBxUeARcGBzEmLwE1NzY/ATY3IxYXFh8BFQcGBw4BBzMGByMVByc1IzU0Njc2NzUuATUXPgIXHgEXFhQHDgEHBiInLgEnJjY3Njc2S4MJCgkNBAkICQwGBQMCBAIBWwIBBAUGBwsIBAcBXgUECgkKSwYEChIJCowHDg8IDhUEAgIEFQ4IDwcOFgQCAQEFDAQBBwYLEwc2BAsGAwUKBAJNBAECBQMDBAIFAwRNAgQJBA8GBwg8ExM8CQoRCBAINgcTC5gEAwEDAxUPBw8IDhUEAgIEFQ4IDwcQCwQAAAIAAAAAAOEBBwAcADcAABMzFRQGBxUeAx0BIxUHJzUjNTQ2NzY3NS4BNRcWFxYfARUHBgcOAQczLgEnJi8BNTc2PwE2N0uDCQoJDgoFSwkKSwYEChIJChQCAQQFBgcLCAQHAYMBBgQIDAYFAwIEAgEBBwYLEwc2BAwPEgoJPBMTPAkKEQgQCDYHEwsJBAIFAwRNAgQJBA8GBg8ECQQCTQQBAgUDAwAAAAQAAAAAARYBGwAVACgALgAxAAATHgEXFhUUBw4BBwYnLgM3Njc+ARc2NzYnNCYnJicmBgcOARYXHgEnNxcVByc3FTehFikQJh4PJhYwJxQeEAMHDyYSKyEmGRkCEQ8dJhMmDyAXISIQJicOVFQOEjoBGQEUECk3KycSFwQJFgsiKi4VLhkMDPQJHyIlFyoQHQMBCQsYTkgTCgarCDgQOAhfTicAAgAAAAAA8AEHAAUACAAAEwcVFzc1BzUXRw8PqaWPAQcI4QhwEGe+XwAAAAACAAAAAADiARoAFQAfAAATIxUjBxUUFhcVMzU+AT0BJyM1IxUjFw4BLgE9ATMVFIMSHQklHRIdJQkcEyY7DCIfE3ABGTgJQhwrAzk5AyscQgk4OHMMBg0cETg4FwAAAAAFAAAAAAENAO8ABwAPAB8AJwAvAAA3IycjByM3MxcnJicxBg8BFzUzMhYVFAYHFR4BFRQGIycVMzI2NTQjBxUzMjY1NCOgEw8+DhM4ERAXAQEBAhZuKRMWDgsOEhsUGREOEBwTFw8QI14oKJBZPgMHBwM+N5ASDwwSBAEBEw8SF4EvDgwVPjQODBoAAAgAAAAAARoBBwAHAAsADwATABcAGwAfACMAABMzFxUHIyc1FzM1IxcjFTMnIzUzBzM1IxczFSMnIxUzBzMVIybhEhLhExPh4c68vBOWljhLSxMlJTlLS0tLSwEHE7wSEry8vBM4ExKDSxMlOBMlEwACAAAAAADrAOsABwALAAA/ATMXFQcjJzcVMzVCCZYJCZYJEoThCQmWCQmNhIQAAAAFAAAAAAEaARoABwALAA8AEwAXAAATMxcVByMnNRczNSMXMxUjNyMVMzczFSMc9AkJ9AkT4eESJiZxJiYlJiYBGQn0CQn06uETvLxxcZYAAAEAAAAAARoA9AASAAA3JyMHJyMHIxUzPwEXMzcfATM13SETIxYSFjU8Cg0WEyMbCUODcX1dURIHMl+EWAYSAAAEAAAAAAEHARoADAAZADwAQAAAEyIOARQeATI+ATQuAQciLgE+AjIeARQOATcuASIOAgczND4BMh4CFAYPAQ4BFxUzNTQ2PwE+AjQmBzMVI40hOCEhOEI4ISE4IRwwHAEbMDgvHBwvAQUPEQ8KBAEXBQcGBQQCBAMOAwQBFgQDBwQGBAQuFRUBGSE4QjggIDhCOCHhHC84MBwcMDgvHJ4FBgYLDQcFBwMBAwUICQQQBAkFDAkECAQIBAoLDQxeFgACAAAAAAEKAQ0AEAAiAAA3DgEVMjMyFhQGIyImNTQ2NxcOARUyMzIWFAYjIiY1NDY3F4YjIAMFExwaFRsdLy+ZJCADBRMcGhUbHTAuFuoWMyQYKxsqJjVOGyMWMyQYKxsqJjVOGyMAAAgAAAAAARkBGgAMABkAJQAxAEMATgBSAFYAADc0NjcnDgEUFhc3LgE3FBYXNy4BNDY3Jw4BFyc+ATQmJzceARQGNwceARQGBxc+ATQmBxYPARcHJyMHJzcuAT4CHgEHDgIeATI2NC4BFyMHMxcnIwc4EA8OERMTEQ4PEBQNDA0JCgoJDQwNkA4KCgoKDgsNDQ4NDhAQDg0RExNLAQUFQBEOaA8RQAUEBw0PDQkeAgQBAgUGBgQFAgURJhkRNhDDFSYODREsMSwRDQ4mFBAfDA0JGBoYCQ4MH00OCRgaGAkNDB8hH4YNDiYpJg4NESwxLEIKCASRCCEhCJEGEBAJAQYMAQEEBQUDBQcEAickOCUlAAAAAAUAAAAAARoBCwAVAB4AKgAzAD8AADcUBzM2LgEOAh4BNzUGLgE+Ah4BBzI2NCYiBhQWFzI3Fw4BIiYnNx4BNzI2NCYiBhQWFzMVMxUjFSM1IzUz4QETAyA7QC4MHDkgGi4YBiMzMR56CAsLEAsLLhQODQkZGxkJDQcSLwgLCxALCzcTJSUTJSWfBAUgORwMLkA7IAMTAxgvNCcNEysRCw8LCw8LLw4NCQsLCg0HCC8LDwsLDws4JhMlJRMADgAAAAABGgD0AA8AEwAXABsAHwAjACcAKwAvADMANwA7AD8AQwAAJSMiBh0BFBY7ATI2PQE0JgcjNTMHIxUzByMVMzczFSMXIxUzJzMVIzcjFTMnMxUjFSMVMwczFSM1MxUjNyMVMwczFSMBB88ICgoIzwcLCwfPzzkSEhITEyUTExMTE4NdXYMmJl4TExMTSxMTExM4EhI4Jib0CwiDCAsLCIMIC5aDExITEzgSORISEjgTOBITExMSXRISEhMTAAAAAAMAAAAAAOIA4QAIABUAHgAANzI2NCYiBhQWNxQOASIuATQ+ATIeAQc0JiIGFBYyNpYICwsQCwtTFCMoIxQUIygjFBMhLiEhLiGDCxALCxALExQjFBQjKCMUFCMUFyEhLiEhAAADAAAAAAEWARsACAAeADEAADcyNjQmIgYeATceARcWFRQHDgEHBicuAzc2Nz4BFzY3Nic0JicmJyYGBw4BFhceAZYQFhYgFgEVGxYpECYeDyYWMCcUHhADBw8mEishJhkZAhEPHSYTJg8gFyEiECZxFSAWFiAVqAEUECk3KycSFwQJFgsiKi4VLhkMDPQJHyIlFyoQHQMBCQsYTkgTCgYAAQAAAAAA6wEKABkAABMVByM1MycuAQ4CFh8BBycuAT4CFh8BNeoJQjASDSIjGQoKDWENYhAMDCEsLBENAQdCCRISDQkJGSMjDGINYREsLCELCxENJwAAAAoAAAAAASoBLAAVAB0AIQAuADIANgA6AD4AQgBHAAA3Byc3IyIGFBY7ARUjLgE0NjczJzcXEyMnNTczFxUnMzUjNzMXFQcjNTM1IxUjNRcjFTMHMxUjFyMVMzczFSMXIxUzJzEzFSOLKw4aPA0REQ0LCxQcHBQ8Gg4rRXgKCngKeGRkRngKCjIoZBQUPDw8PDw8PDwUPDw8FBQqKhbzKw4aERkSFAEdKB0BGg4r/v8KoAoKoAqMeAqgChSMPEaCFBQUFBTIFDwUPBQAAAEAAAAAAQkBBwAdAAA3IzUzFxUjNQ4BHgE+AiYnNx4CDgMuAj4BWDJBChMaERo5QCsFJB8FGSUSBBorMzElEgQa9BMKQSUTPzwfCzBBNQoSCCMwMywdBxAjMDMsAAAAAAIAAAAAAQgBBwARABUAABMzFTcXBxcHJxUjNQcnNyc3FwczFSO8EjAJMDAJMBIwCTAwCTCWS0sBBzsdEB0eEB06Oh0QHh0QHVtLAAAFAAAAAAEtARIAEgAfACwAMgA4AAATMxcVJic1IxUzFBcjNTM1Iyc1FyIOARQeATI+ATQuAQciLgE0PgEyHgEUDgE3JzcXBxcnFwcXNycR/gkJCuphFE46awrXFSQVFSQqJBUVJBUQGxAQGyAbDw8bEBoaCRMTSxISCBsbAREJbAcFVrAgGhMUCcRsFSQqJBUVJCokFYgPGyAbEBAbIBsPJxsbCRITERITCBsbAAAAAAIAAAAAAPIBGgAGAA0AADcnNycHFRcnFwcXNzUn8ktLDFBQrk1NDFJSeUpLC1AMUFZNTAxTC1IAAQAAAAABGgCpAAMAACUhNSEBGf76AQaWEwAAAAsAAAAAARoBGgALABUAJgA6AEQAWABhAHMAewB/AIYAADc2MhYUBiInByM1MxUUFjI2NCYiBhUHJzcXNTQ2OwEVIyIGHQE3FzczNTQjIgYHFTYyDwEGFRQWMzI/ARUUBiImNTQ/AQcjNQYjIiY1ND8BNCIHNT4BNzIVBzUHBhUUFjI2FzI3NQYiJjQ2Mhc1JiciBhQWJzczFxUHIyc3FTM1JzczFxUHNdoEDggJDgMBCwsEBwQDBwWMJwwTDwssLAQFEgw7DRIECQMHDwELDgcGCAQBBQYDBgcsDAQIBgcOCw4HAwkEEQwHBgMGBDcJBQUMBwgLBAMIDA4NfRKpExOpEhKpcBKEEhL6CQ4YDwcGSjQEBwgOBwgFTigMEx0KEBEGAx0SDA0gFwMCDAUJAQMQBwkJEgQEBwQCBwEBrwcJCQcQAwEJBQwCAgEXCwQBAQcCBAYSAw4ECA4JBA4CARAaD0sTE10TE11dXSYTE14TcQAAAAYAAAAAAOIBGgAQAB0AJwA6AEIARgAANxc3Jwc1NDY7ATUjIgYdAScXMxY+ATQmIgcnIxUzPQE0NjIWFAYiJgcGIyImNSY2MzIXFSYiBhQWMjcnBxUXMzc1JwczFSM8KykNEwYDHRwMEBRvAQUVDQsWBgEQEAYLBgYLBhAHDhATARYRDAYHEQsKEQheExODExODg4PmKyoNEx4EBhIQDB4ULwkBEh4RCydcGwcHCAkRCgmWBRQQEhUDEwULEwsFWxNwExNwExNwAAAAAAEAAAAAAQcBBAAVAAATBxUXNyczMhYXFh0BMzU0LgIrATd2S0sOPSQnNBAeExEmPCkiOwEETA1LDTwQEB9HBgYnOSYTOgAAAAkAAAAAARoBGgAoACwAMAA0ADsASwBTAFcAWwAANyM1MzUjIg4CHQEGFhcWFzM1IyInJic0PQE0NTY3NjsBFSMVMzc1IycjFTMHMxUjFTMVIxcjNTMVIyc3MxcVByMVIzUjIiY9ATQ2FzM1IyIGHgE7ATUjJzM1I/SpS1AGDQkEAQsKBgYFBQMCBgICBgIDrktUChODExMTExMTEwUFOAUXQlQJCS8TEggLCxEJCQQGAQUgJiYTOTlxlhIFCgwGsgoQBAIBEwEDBQMCCgIDBQMBJhMKVHETExITE4M4OBzqCXEJExMLCF4HC3ATBggFExI5AAAHAAAAAAEaASwADwAfAC8APwBHAFcAYAAANzEyFhUxFAYjMSImNTE0NhcxMhYVMRQGIzEiJjUxNDY3MTIWFTEUBiMxIiY1MTQ2NzEyFhUxFAYjMSImNTE0NgczNxcHIyc3FyMVMx4BMjY3MzUjLgEiBhcUBiIuAT4BFp8EBgYEBAUFBAQGBgQEBQUEBAYGBAQFBQQEBgYEBAUFBRNEDVQNVQ4MODgEJTElAzk5AyUxJWwbJxsBHCcb4QUEBAYGBAQFJQYEBAUFBAQGSwYEBAUFBAQGJQUEBAYGBAQFeUUOVFQOrRMYICAYExggICEUGxsnGwEcAAAAAAQAAAAAARoBGgAJABMAIwAsAAA3FTM1FzcnIwcXNxUzNRc3JyMHHwEjFTMeATI2NzM1Iy4BIgYXFAYiLgE+ARaWE0QNVA1VDkQTRA1UDVUODDg4BCUxJQM5OQMlMSVsGycbARwnG/wSEkQNVFQNDC4uRQ5UVA40ExggIBgTGCAgIRQbGycbARwAAAAABAAAAAABBwEIAC8AOABBAEoAACU0LgEOARYXFRQPAScmPQE+AS4BIg4BFhcVFBYfARUOAR4BMj4BJic1Nz4BPQE+ASc0NjIWFAYiJhcUBiImNDYyFjciJjQ2MhYUBgEHFB4XBBAOBTQ0BQ4QBBUcFQQQDggHMw4QBBUdFQMQDTIICAwPuwsQCgoQC2cLEAsLEAsvCAsLEAsL4Q8VAxMcGQMUBgMaGgMGFAMYHBISHBgDFAgOAxsYBBccExMcFwQYGgQOCBQDFA0ICwsQCwuhCAoKEAsLjgsQCwsQCwAAAAADAAAAAAEaASwADwAYACIAADcjFTMeATI2NzM1Iy4BIgYXFAYiLgE+ARYnNTMVNxcHIyc3Xjg4BCUxJQM5OQMlMSVsGycbARwnGzgTRA1UDVUOSxMYICAYExggICEUGxsnGwEcXnl5RQ5UVA4AAAAAAwAAAAABGgEaAAkAGQAiAAA3FTM1FzcnIwcfASMVMx4BMjY3MzUjLgEiBhcUBiIuAT4BFpYTRA1UDVUODDg4BCUxJQM5OQMlMSVsGycbARwnG/xmZkQNVFQNbRMYICAYExggICEUGxsnGwEcAAAAAAYAAAAAAQcBGgAmACoALgAyADYAPQAAJTUnIyIHBgcGBxUUFxYXFjsBNSMiJyYnJj0BNDc2NzY7ARUjFTM3JzUzFSczFSMVMxUjFyMVMxcHIzUzFSMBBwq3BgYNBQIBAwUNBgYFBQMCBgIBAQIGAgOuS1QKvKmWExMTExMTEwkXBTgFcZ8JAgYNBgayBgYNBQISAQMFAwIKAgMFAwEmEglClpaDExMSExNnHDg4AAAABAAAAAABGgEaAAsAFAAYABwAABMzFxUHIwcnNSMnNRczNSMVMxcVPwEzFSMVMzUjHPQJCX82EC8JenrhLgooBxISEhIBGQm8CTYHLwm8sqmpCiEomV4lEgAAAAAEAAAAAAEHARoACQAOABoAHgAAEx8BFQcjJzU3MwczNScjFyMVMxUzNTM1IzUjBzMVI8k4BRKpExNwcKk5cEslJRMlJRMlXV0BFDgOqBMT4RLzqDlLEyYmEyWDEwAAAAAHAAAAAAEaASwACAARABoAIwAwAFYAZgAANxQGIiY0NjIWBxQWMjY0JiIGFxQWMjY0JiIGFxQGIiY0NjIWBzY3Fw4BIiYnNx4BPwEUBgcVMzIWHQEXFQcVFAYrASImPQEnNTc1NDY7ATUuATU0NjIWByIGHQEUFjsBPgE9ATQmI5YWHxYWHxY4Cw8LCw8LOBYfFhYfFjgLDwsLDwsuDgsNCRkcGQoNCRgNEgoJLxggExIhGHAYIBMTIBgvCQoQGBBUEBYWEHAQFhYQlhAVFSAVFRAICwsQCwsIEBUVIBUVEAgLCxALC0UDCw0KCgoKDQkHArcJDwMBIRcTEyUTExchIRcTEyUTExchAQMPCQwQEDsWD3EQFgEVEHEPFgAAAAAGAAAAAAEaARoAEQAWABsAKAAuADcAAAEiBwYHIwcVHwIzNzU2NzY1BzMGBycXJzY3FS8BNjc2NzY3BgcGBwYHNSM1IxU3Ni4BDgEeATYBEC8uJSROCQNwBzgJIRMX8zEXEwdqBxsXQEAQFSMkMC8DHhckF0glE7cGBRMXDQUTFwEZFxMhCTgHcQIJTiQlLi9UGBsHagcTFzEVQBgXJBceAy8wJCMVOBMlOJAJFw0FExcNBQAEAAAAAAElAQcAHgAoADUAPgAANzU3Mx8BMxcVMxcPASM2NzM3IyYnPwEzNSMvASMVBhcUBiImNDYyFhUzFA4BIi4BND4BMh4BBzI2NCYiBhQWEwleBhFsChUJMglGBwUzLWwGCAMGVWcHEFAKVREXEREXECYSHiMfEREfIx4SQhQbGycbG7dGCgMQCi4MhAYICnEHBgMDJQMQMQVXDBAQGBAQDBIeEREeJB4SEh5BHCcbGyccAAAABAAAAAABGgEHABwAJgAzADwAADczFxUHIzY3MzcjFSYnPwEzNyMvASMVBgc1NzMXBxQGIiY0NjIWFTMUDgEiLgE0PgEyHgEHMjY0JiIGFBaRfwkJbAcFVgF3CAkHBnoBegcQUAoJCV4HEBEXEREXECYSHiMfEREfIx4SQhQbGycbG/QKuwkICoQBBgQGAxMDEDEFB0YKA50MEBAYEBAMEh4RER4kHhISHkEcJxsbJxwAAAAAAwAAAAAA9AD0AAQADgAYAAA3IzUyFicVMh4BFTM0LgEHFTIeARUzNC4BXiYQFiYuTi0TM1YzGisZEx8zOCYWrBMtTi4zVjNLExkrGh8zHwADAAAAAAEaAPQACQAOABIAADcXMzc1LwEjDwEXJzczFyczFwcTfA58Pgd8Bz6DbzV0NW8yIlSlfHwOPgMDPnZvNTUiIlMAAAADAAAAAAEgARoABQAIABIAABMHFRc3NQc1HwEzFwcnFSM1BychDg6ppI4wDS8NHxMfDQEZCOEHcBBnvl8LLw0fZmYfDQAAAAAFAAAAAAEXAPgABgAQACAAMgA5AAA/ATUnFRcHJzcXFQc1NycVIxcmDgEeATY3MTY1NCcxLgEHNhcxFhceARUxFg4BLgE3MTYXByMnNxc3n3eahmNqDp9DLoYSIRgmDhEpLhAPEwgVLQ0TEQ0GCAEWIx4PBgVKIw0RDAwdL1AOZxVZQqwHag4tFR9ZQA4BGS0sFwgTFBYbFQgKGAoBAg0GEwsQHQgSIBIREyMRDQwdAAMAAAAAARYBBwAFAAgADwAAEwcVFzc1BzUXBzc1JxUXBzQODqmlj1akpI6OAQcI4QhwEGe+X3VtEG4XX18AAAADAAAAAAEgARoABQAIABIAABMHFRc3NQc1HwEjJzcXNTMVNxciDw+ppY49DS8NHxMfDQEZCOEHcBBnvl+OLw0fZmYfDgAAAAAEAAAAAAEWAQcACQAcAC4ANQAAPwEXFQc1NycVIwcmBgcGFhceATY3MTY1NCc1LgEHNhcxFhceARUxFg4BLgE3MTYXByMnNxc3Xg6pbFaOEwMZKAgEAgQJKzEREBQJFjAOFBIOBwgBGCQgEAYFTyUOEg0MH/8IcRBIFzlfRA8BGhkMGAwWGQoTFRceFQEICxkKAQINCBQLER8IEyETExUlEw0MHwAAAAAEAAAAAAEWAQcACQAcAC4AOgAAPwEXFQc1NycVIwcmBgcGFhceATY3MTY1NCc1LgEHNhcxFhceARUxFg4BLgE3MTYXJwcXBxc3FzcnNydeDqlsVo4TAxkoCAQCBAkrMREQFAkWMA4UEg4HCAEYJCAQBgUsFgwXFwwWFwwXFwz/CHEQSBc5X0QPARoZDBgMFhkKExUXHhUBCAsZCgECDQgUCxEfCBMhExMXFwwYFwwXFwwXGAwAAAAABAAAAAABGgEaAA8AGAAcACYAACUvASMHFSMHFRczNzUzNzUHIzUzFTM1MxcHNTMVFyM1LwIjNTMXARYcBqAJLwkJvAkvCUuoEnEPFl0lcSYDHAZekhf6HAMJLwm8CQkvCaDOqDk5Fg8lJUteBhwDJhcAAAAFAAAAAAEaARkAFAAYACAAIwAnAAATHwEVIwc1JyMVIzUjFTMHIyc1NzMHMzUjHwEVDwEnPwEPAT8BFzcnzx8GCgkfBnElOAouExOcPyYmehxyOQwccmcKEwMPYQ8BEx8OBgkPIEtLvBISvBNLOTkcDXIcDThyhxMJHQ9hDgAAAAMAAAAAARoBGgAJABIAFgAAEx8BFQcjJzU3MwcVMzUnIxUjNTMVMzX6HAMJ9AkJ2M7hFyKDSyYBFx0G2AkJ9AkS4coXS0s5OQAAAAAGAAAAAAEaAQcAAwAHAA4AFQAcACMAADczNSMXMxUjJyM1NzMVIzcVIzUjNTMHMxUHIzUzIzMVIyc1Mzi8vCZwcDgTCUI48xI5QgkSCUI54ThCCRNLliVLS0EKEwlBOBOWQgkSEglCAAYAAAAAARoBGgAGAA0AFAAbACMAJwAANyM1MzUzFTc1IxUXMzUHFTM1MzUrARUzFTM1JzcHIyc1NzMXByMVM0IvJROpEwkvOBMlL9clEwmfCYQJCYQJJUtL4RMlLwolLwkTsi8lExMlLwkcCQleCQkcJgAAAwAA//8BLAEQABIAHwAvAAATIg4BFRQWFwcXNxYzMj4BNC4BBzQ+ATIeARQOASIuARcHIyc3FzczFzczFxUnByOWFycWDAtFDUYVGhcnFhYnWRIeJB4SEh4kHhJVKA4cDRYoDSkoDR8lKQ0BEBcnFhEeDEUNRg4XJy0nF1QRHhISHiMeEhIegigcDRUoKCgfGiUoAAQAAAAAARsBHwAcACkAMgA6AAA3DgEXFhcGFxUnByc3LgE+AR4BFRQHJic1NC4BBhc+AR4CDgIuAjYXFjcWNycGFRQ3FzYnNiYjImwTCQsIDwIBCUcORxcFJEFCKQEICR0vMicQKSQWAxIiKCQWAhESERcSD08KGE4LAQEhGBLuEzUYEgwJCQMGRQ1FGUU6GRM3IwcIBwYCGioUCmQLAxIhKCQXAhEiKCRbEQEBC04OEhhGTw8SFyEAAAAAAgAAAAABLAEtAA8AHQAAEyIOARYXBxc3HgE+AS4BIxUiLgE0PgEyHgEUDgEjvx8zGQkUZA5kG0M4FhQ3IRcnFxcnLiYXFyYXASwhODwWcwxyFQImQEEouxYnLicWFicuJxcAAAIAAAAAARoBEAAGAA0AABM3FxUHJzcXBzcnHwEVEw74+A4dFBjR0RhlAQgIcBFwCG8JV2JfVgISAAAAAAYAAAAAARwBGgADAAcACwAdACEAKQAANzMVIxUzFSMVMxUjFyE3MzU0PgI7ATIeAh0BMwczNSMXJyMVIzUjB3FLS0tLS0ur/vQYIwMFBwRwBAcFAyOmcHCmDhWWFQ70E14SExNLXqkDBwUDAwUHBKgmz/Q4JSU4AAYAAAAAARoBBwAMABAALgA3AFUAXgAAEzMXFSM1IxUzFSMnNRczNSMXNSYnByc3JjcnNxc2NzUzFRYXNxcHFgcXBycGBxUnFBYyNjQmIgYXNSYnByc3JjcnNxc2NzUzFRYXNxcHFgcXBycGBxUnFBYyNjQmIgYc9AkS4YONCRPh4V0FBBEKEgEBEgoRBQQTBQQSCRIBARIJEgQFFwgLCQkLCWUFBBIJEQEBEQkSBAUSBQQSCREBAREJEgQFFwgMCAgMCAEHCno5hBIJzi8mqRUBAwoRCgUFChAKBAEVFQEEChAKBQUKEQsEARUvBggIDAgIbRQCAwoQCwUFChAKAwIVFQIDChAKBQULEAoDAhQvBgkJCwkJAAAGAAAAAAEHARoABwAbACMANwA/AFMAADcnNTczFxUHJyMVIzUjFSM1IxUjNSMVMzUjFSMHJzU3MxcVBycjFSM1IxUzNSMVIzUjFSM1IxUjFzc1JyMHFRc3NTMVMzUzFTM1MxUzNTMVMzUzFS8JCc4KCkETExMSExMTvCYSjQkJzgoKjBMTE7wmEhMTExKMCgrOCQkJExMTEhMTExImzgo4CQk4CjkTExMTExMmJhODCTgKCjgJOBMTJiYTExMTE4MJOAoKOAkTJRMTExMTExMTJQAAAAQAAAAAASwBLAAXADcAQwBOAAA3FxUHFwcnByMnByc3JzU3JzcXNzMXNxcHNzUvATcnBy8BIw8BJwcXDwEVHwEHFzcfATM/ARc3LwE2MzIWFRQOAS4BNhcWMzI2NC4BDgEW+DQ0HissCzwLLCodNDQdKiwLPAssKzEyMgccESsRChkKECsSHQcyMgcdEisQChkKESsRHGALDRIZFB4bCwgZBgYJDAkPDgYFvws8CywqHTQ0HissCzwLLCseNDQeK2wKGQsQKxIdBzIyBx0SKxALGQoQKxIdBzIyBx0SK0sHGRIPGAYOHR0tAwwRCwMHDg8AAAAEAAAAAAEHAP4AGQAjADwARgAANzIWFzMyFhQGByMOASImJyMiJj4BNzM+ATMXIgYUFjI2NCYjNzIWFzMyFhQGByMOASImJyMiJjQ2NzM+ARciBhQWMjY0JiNxDBUDaAQGBQNqAxUZFQMdBAYBBAMfAxUMAQgLCw8LCwhMDBUDHQQGBQMfAxUZFQNoBAUEA2oDFQ0ICwsPCwsIehAMBgcFAQwQEAwFCAUBDBATCw8LCw8LlhAMBQgFAQwQEAwGBwUBDBATCw8LCw8LAAAFAAAAAAEZARoADAAlAD0AQABCAAA3IwcVFzM3NSMVIzUzFyM1NDY3NTQ2Mh8BFQcGIiY9AQYHBg8BIzciDgEPATM2NzY3NjMXFBYyPwEnLgEGFQcyMCMxXkIJCc4KE7s4ExMqIQ8VB0VFBxUPFQoEAgETTBQhFQEBBAUKDxcJCQEDBgJERAIGAzkBAeEJvAkJOC+pcC8hNAYYCg8ISRlJCA8KFAURBwoGehMgEyEPCw8EASgDAwJJSAIBBAOiAAADAAAAAAEaARwAJABFAFEAADcuBTc1NzI+Ajc2NzYXFhcWFx4DMxcVFA4EBycVFB4DHwE2Nz4EPQEjJicmLwEmJyYHDgMHFz4BLgEiDgEWFwczmw8cGhYRCgEJChARDwcLDBITDAsGBQgPERAKCQkRFxkcD2wIDxUYDRYMCw0YFQ4JCwkKFBEJCAoODwkRExMKaAkKBBAUDwQJCgglGAkTFhkeIxI8CQIDBgUHBAUDAQYDAwUGAwIJPBIjHhkWEwnRMxAdGxcVCA8HCAkUFxsdEDMBAgQLBQQCAgQDCwgEAVEEEhMNDRMSBDEAAAMAAAAAARsBBwAVABkAIwAANzUXNScjBxUfATc1Mzc1BxUjNS8BMwcnNR8BMxUjFwcnNTcXzxIJqQkGXgxCCRI5BkSDTEtLOl1cHg4uLw3lARMqCgrKCSAJEwkqEw6cCBjUGa0ZLhMeDS4NLw0AAAADAAAAAAEbAQcAFwAbACUAADcVNzUnIwcVMRUfATc1Mzc1JxUjNS8BMwcnNR8BIzUzJzcXFQcnzxIJqQkGXgxCCRI5BkSDTEtLe15dHg0uLg3lHRMiCgoJwQkgCRMJIhMsnAgY1BmtGUATHg0uDi4NAAAAAAUAAAAAAR0BHQAMABkAIgArADgAABM+AR4CDgIuAjYXHgE+Ai4CDgIWNxQGIiY0NjIWFxQGIiY0NjIWByImJwceAT4BNycOAU0dRz8oBCA7RT8oBB4pGTw2IgQbMzs2IgQaPAsQCwsQC14LEAsLEAtCEBoIEAolKiMJEAccAQMUBR87RkAnBB48RT+3EAUbMj02IQQbMjw1XwgLCxALCwgICwsQCwtTEA0JEhUBFhMIDhEAAAMAAAAAARoBGgAIADEAWAAANxQGIiY0NjIWJyIGFRQXByMVMxUzNTcWFzMVIyIGFSIGHgE7AT4BNCYjNCYjNTQuASMHNDY7ATIWHQEXMzIWHQEzMhYUBisBIiY0NjsBNTQ2OwE3NScjIiaWBQgGBggFLxMcCBUiHRIVDA4cEhAWEBYBFRCpDxYWDxYQER8RQhAMJhMbCgkICxMICwsIqQgLCwgTCwgcCQkmDBDqBAUFCAYGKxsUDgsVExwhFQcBJRYPFiAWARUgFg8WQhEfES8MERwTSwoLCBILEAsLEAsTBwsKOAkRAAAHAAAAAAEaAQcACgAOABIAGgAeACIALAAAEwcVMzUzFTcXNScHMxUjByMVMycHFRczNzUnBzUzFScjFTM3IxUnBxczNycHgxIShAMPEnEmJjgmJjgTE4MTE4ODEyUlXhMWDSYNJg0WAQcTODguAw86EyYlOSVLE14SEl4TcV5eOSaWSBYOJiYOFgAAAAQAAP//AQcBLAAsADUAPgBHAAAlNC4BDgIeARcOASsBIgc1PgEuASIOARYXFQ4BHgI+ASYnPgE7ATI2Nz4BJzQ2MhYUBiImFxQGIiY0NjIWNyImNDYyFhQGAQcOGBoWCQQSDQUSCyUWEBIVAxskGwMVEhIWAxkkHAYSEgUSCyUSHQYRGM4QGBAQGBA4EBgQEBgQZwwQEBcREcUNFwwCEBkaEwQKCw9bAx0kGBgkHQNyBBwkGQIWJB4FCgsVEQIbSQwQEBcREcIMEBAXERFuERcQEBcRAAAAAAIAAAAAARoBGgAsAFcAADcWMjY/AT4BPwE+Ai4BLwEuAS8BLgIOAQ8BDgEPAQ4CHgEfARYXFh8BFhcWMjY/AT4BPwE+Ai4BLwEuAS8BLgIOAQ8BDgEPAQ4BFBYfAR4BHwEWZQUNCgIIBA4KGgUGAwIGBxkKDwMJAgkJCQYCCAMPCRoFBgMCBgYaDAkEAwgCeAQKCAEFAQcFDgUFAQMFAw8EBwEFAgYIBgUCBAIGBQ4FBQUFDgUHAQUBYQMHBhoKDgQIAgYJCQkCCQMOChoGBgIDBwQaCg4DCQEHCQkJAggECwYHGgZPAwUFDgUHAQUBBwcHBQEFAQcFDgUFAQMFAw4FBwEFAQgKCAEFAQcFDgUABAAAAAABGgEaACwAQABrAH8AADcWMjY/AT4BPwE+Ai4BLwEuAS8BLgIOAQ8BDgEPAQ4CHgEfARYXFh8BFj8BFx4BHwEHDgEPAScuAS8BNz4BFxYyNj8BPgE/AT4CLgEvAS4BLwEuAg4BDwEOAQ8BDgEUFh8BHgEfARYvATc+AT8BFx4BHwEHDgEPAScuAWUFDQoCCAQOChoFBgMCBgcZCg8DCQIJCQkGAggDDwkaBQYDAgYGGgwJBAMIAgcKCAUVDhoaDhUFCQkEFQ4aGg4UdgQKCAEFAQcFDgUFAQMFAw8EBwEFAgYIBgUCBAIGBQ4FBQUFDgUHAQUBDQMDCQ0DAQEDDQkDAwkNAwEBAw1hAwcGGgoOBAgCBgkJCQIJAw4KGgYGAgMHBBoKDgMJAQcJCQkCCAQLBgcaBocaGg4VBAoJBBUOGhoOFQUJCQUUyAMFBQ4FBwEFAQcHBwUBBQEHBQ4FBQEDBQMOBQYCBQEICggBBQEHBQ4FMgEBAw0JAwMJDQMBAQMNCQMDCQ0AAwAAAAABGgEaAAcACwAPAAABIwcVFzM3NQcjNTMXIzUzAQfPEhLPEoNeXnFeXgEZEs8SEs/Pz8/PAAAAAwAAAAABGgEaAAcACwAPAAABIwcVFzM3NQcjNTM1IzUzAQfPEhLPEhLPz8/PARkSzxISz89eE14AAAAAAwAAAAABGgESAE0AnACmAAA3JiMuASMVDgEHFRYXFhcyMQYHBgcGHQEUFjI3MwYHIw4BFQYWOwEWPgInJi8BLgE2PwEzMhcWFxY2NzY1NCcmJyYHBgcGByYnNTQmJxcWBwYHBisBNDY7ATUmNjcnBgcjIgcGJj4BOwEyNj8BBiYnPgE3MzIXFhcWHwEzNSY2Nz4BNzYXHgEXFRQOASYnJgcOAQcGFh8BHgEHJi8BIgYUFj4BNCYjaAEBAg8KFh4EBREICgEQCggEAwsPBycFAgYRFwEEBH0QHBYJAQENAgcFAwMCAwMDBgcKEgUCDQwRGBoSDQoFBQcPDGQCAgMOCAluCggYARIODAgDPAMCBQUECgcTBAUBBg8cCgQhFQIIBwoQCAYBAwECAQQTDhMQDRECBQcIBAoLBwkCAwcIAgoBBgEHgwQGBgcGBgT6AQkMGQkjFwgKBgQCAgcGCAYHBgcKAwkKAhsSBAUBCxcdEBYRAwgLCQIBAQQCAQkJBgcRFhILDQUDDgsOBwcDCxABuQ8JDggDBwsKDRQBEQMCAQIDCwgFAxgCCQoVHAEDBRULCgEBBxcGDBMCBAkIGwwCBwUCAgIGAwIKBwsXCAMMHg0NDHAFCAYBBQgFAAAFAAAAAAEaARoACQANAA8AEQAbAAA3JwcjFwc3Fyc3BzM3DwI3IwczNxczBxcnBze0Hh5lUh9QUB9S7VIYGBAYqlJSLA4OLCQOJCQOt2JiQGQ+PmRACU9PNFCEES0tHC0cHC0AAQAAAAABGgEaAAkAADcnByMXBzcXJze0Hh5lUh9QUB9St2JiQGQ+PmRAAAAEAAAAAAEaARoACQAPABAAEgAAPwEXMwcXJwc3Jx8BJzcjJzUXI3geHmVSH1BQH1KDJA4kLA5qUrdiYkBkPj5kQEccLRwtM08AAAAAAwAAAAABFgEbAAMAGQAsAAA3MxUjNx4BFxYVFAcOAQcGJy4DNzY3PgEXNjc2JzQmJyYnJgYHDgEWFx4BcUtLMBYpECYeDyYWMCcUHhADBw8mEishJhkZAhEPHSYTJg8gFyEiECa8S6gBFBApNysnEhcECRYLIiouFS4ZDAz0CR8iJRcqEB0DAQkLGE5IEwoGAAAAAAUAAAAAARoA9AAJABMAHAAlAC4AADczNSMHFRczNSM3IxUzFSMVMzc1BzI2NCYiBhQWNxQGIiY0NjIWFzI2NCYiBh4BJhIcCQkcEuocExMcCbsICwsQCwtTCxALCxALJQgLCxALAQrhEwqoChOpE5YTCqhnCxALCxALEwgLCxALCxsLEAsLEAsAAAAAAgAAAAABGgEHAAkAEwAAEwcVFzM1IzUzNRc3NScjFTMVIxUcCQkvJSXFCQkvJiYBBwrOCRK8E+EJzgoTvBIAAAIAAAAAARoA9AAHAB8AAD8BMxcVByMnNyMVIzcnBxUXNyczNTMnNxcVByc3IxUzEwn0CQn0CfRxTCcNODgNKE1JJw03Nw0nSXHqCgqoCgqfQScNNw43DSgSKA03DjcNJ0EAAAAEAAAAAAEUARoAIAAkACgALAAANzM3NScjByM1NzUnIwcVFzM3FRczFRczNzUnIwcjNTMVNxcHJx8BBy8CNxfVDTIZDSJeIyYNSyUOFQlYGA4yGQ0jXk84DCUMJQwlDJAYPRl2Mg0ZIhgiDiVLDSYWbQkKGTIOGSNLCSoLJgw4DCYMeBk9GAAABwAAAAABGgEaABkANQA+AEcAUABZAGIAABMiDgIdAR4BPgEeAg4BFhczMj4BNC4BIwcjLgE1Jjc2NCYiBwYnIiY9ATQ+ATIeARQOASM3FAYiJjQ2MhYXFAYiJj4BMhYnMjYuASIGFBY3FAYiJj4BMhYXFAYiJjQ2MhaWGjAlFAETGhQcFAEUAw4PCyM9IyM9IwEKBAUCCA8fLBAHCgIEHzM9NB4eNB4SCxALCxALOAsQCwEKEAuDCAsBChALC4sLEAsBChALEwsQCwsQCwEZFCUwGggODQQTARQbFRwVASQ8Rzwk9QEEBAwIECsgEAgCBAMHHzMfHzM9NB68CAsLEAsLiwgLCw8LC1YLEAsLEAsTCAsLEAsLQAgLCxALCwAABAAAAAABGgD0AAMABwAPABMAADczFSMXIxUzJzczFxUHIyc3FTM1S5aWlpaWzhPhEhLhExPhvBMmEnATE5YTE5aWlgAGAAAAAAEaAQcADAAVABkAHgAiACYAAD8BMxcVByM1MzUjFSMXNScjBxUXMzcnFSM1Nyc1MxUnMxUjByMVM4MTcRISS0txEyYTcBMTcBMTcIsIS0tLSyZLS/QTE14TE144ORMTE14SEl5eXhMICxM4E10TAAcAAAAAARoBBwAMABEAGgAeACIAJgAqAAABIwcVMzUzFSMVMzc1BzMVIycHIwcVFzM3NScVIzUzBzMVIxUzFSM3MxUjAQdxExNxS0sScEtEByZdExNwExNwcF5LS0tLcUtLAQcTODheExNeOBMHBxNeEhJeE3FeExITE5YTAAAAAgAAAAAA7wEaAAsAEgAAEzczFwczFwcnNyMnFwc3IzcjB4sRPg8pIQ6GHigXEUc2hUU+PkABDwodQCCJFkgbCWOJXoQAAAAABAAAAAABGgEHAAsADwATABcAACUnIw8BFR8BMz8BNQcnNRc3JzcfAQc1NwEPXhGDCgpeEYMKoFRUCVd9Vwd6etgvQhFUES9CEVSRKkYmECc/LFc9STkAAAMAAAAAAQcBGgAJAAwAEwAAJS8BIwcVFzM3NQcjNQc1MxUXMxUBBD4GkQkJzgoTOIRxCULZPgIJ9AkJtgQ54eFCCZYAAgAAAAABGwDiABcAIQAANyIGByMuAQ4BFB4BNjczHgI+Ai4CByImNDYyFhQGI9gZJQM6BBcdEhIdFwQ6AhUfIhwPAhIdERQbGycbGxPhIBgNEAMVHRUEEA4RGw4EEx4jHBFwGycbGyccAAAABQAAAAABGgDrABIAJQA/AEoAZQAANxY+ATc2JzYnLgEjIgc1IxUzNTc2FzYXFhUWBw4BJwYmNzUmNzYnDgEPARU3NjcyFhUHDgEUFjMyPwEVMzU2JhcUBiMiJjQ3Nj8BFxY3Fj8BNQcGIiY0NhcyHwE1JyYiBgcGFBcWhwoUEgYNAQEMBhAJEAwTExAFBgsGBwEJAwkGCw8BAQgEUAkRBwIICw8HCRcOFRMOCwkGEQETAQ8LBgkECAoTnAgKDgwDCQkXEBINCggIAwoWEwcPDgZfBgEICBEWFA8HBws0jwZMAwEBCQoNDw0EBgEBEQsLDAoEFgEFBQEXBwoBDAgEARIaEgYFCT8QFzkNEQgMBAUBAy8EAQEIARYGBxQcFgEFBRYBBQgHESoQBwAACAAAAAABGgEHAAMABwALAA8AEwAXABsAHwAAJSM1MwcjFTMnIxUzFyMVMycjFTM3IxUzJxUjNRcjFTMBGV1dEiYmS6mpJc7OXnBwll1dg4NwXV3hE0sTExNeEksTExOpOTkTEwAAAAAEAAAAAAEHARoACwAPABMAFwAANycjDwEVHwEzPwE1Byc1Fyc3FwcXBzU3/V0TXgkJXhNdCnpVVVBZWVleVFThODgQcRA4OBBxozJhLkE1NTFDMmUuAAAABQAAAAABHAEaAAgADAAQAB0AKQAAEzMVFhc1IxU3FycHMyc/ARc3PgEeAg4CLgI2Fx4BPgImJyYOARZLlgoJvBMoFUuWdiALKyoPIyAUAhAeIh8UAg8ZChkXDgIMChAmFggBB0sBBGKfISolgxM4E0t4CgIPHiMgEwIQHSIgVAcCCxUaFgcLCCAmAAACAAAAAAEHAQcARgCNAAA3NSMiDgEHMQYHMQYXFRQHMQYHBisBFTMyFxUWFxUWFzEWHQEGFxUWFzEeAhczNSMiLgI9ATQmJyYnNjc+AT0BNDY3NjMXFTMyPgE3MTY3MTYnNTQ3MTY3NjsBNSMiJzUmJzUmJzEmPQE2JzUmJzEuAgcjFTMyHgIdARQWFxYXBgcOAR0BFAcOASNxAgkRDAMDAQEBAgQKBQYBAQYFBQMEAgIBAQEDAw0QCQICBgoHBAICBQkJBQICCQcFBk0BCRANAwMBAQECBAoFBgICBgUFAwQCAgEBAQMDDBEJAQEGCgcEAgIFCQkFAgIIAwoG9BMHDQgICAgIEAYFCgUCEgIBAgMBAwUFBhAICAEHCAgNBgETBAgKBhkGDAULBwcLBQwGGQkNBAK8EgYNCAcJCAgQBgUKBQISAgECAwEDBQUGEAgIAQcICA0HARIECAoGGQYMBQsHBwsFDAYZDAgEBAAAAAIAAAAAARoBGgAbAB8AABMVMxUjFTMVIxUjNSMVIzUjNTM1IzUzNTMVMzUHFTM1zktLS0sSSxNLS0tLE0tLSwEZSxJLE0tLS0sTSxJLS0tdS0sAAAgAAAAAARoBHAAOABkAHQApADUAQgBPAFMAABMWFxYUDgEjIiY1NDY3Nhc2NzQuAQ4BFB4BNwcXNxczFTMVIxUjNSM1MycXBxcHJwcnNyc3FzcuASIOAR4DPgIHBgcGJy4BPgIWFxY3IxUzNgoEAgYMCAoPCAcKBAYBBQYGBAUGTGQNY1MSLy8SLy9sDSEhDSEhDSEhDSE6AwwQDQUBBwsNDAcBEQEEBgUCAgEFBgUBBY1LSwEXBAkFDAsIDwsHDQMEJQMHAwYCAwUHBQIiZAxjhy8SLy8SJQ0hIQ0hIQ0hIQ0hcAcJCQ0NCgYBBwoNCAQBAwUBBQYFAQICBTQTAAADAAAAAAEZAOEAGwAiACkAADcjNTQmKwEVFBY7ARUjNTMyNj0BIyIGBxUjNTMXJzcXFQcnIyc3JwcVF84SBgQTBQQKOQoEBRIEBQEScDccDiIhDqccGw4hIrwJBAVnBAUTEwUEZwUECSVMHA0iDiEOGxsNIQ4iAAACAAAAAAEaARsAHwBDAAA3Ii4BNzY3JjQ3Njc+AR8BBxc3FxYUBgcGBw4BJwYHBjciBwYHDgEfAQcGBwYeAjI3Nj8BFxY2NzY3PgE1NCcHJzcmNQ4TAggjQAUGChURKRIMNhc4BQYMCwYIECUSRCAJiRIQBgUOBwgDBEQjAwEHBggDHkkFBQ8gDgYFCQkBMTAwBhMTGQomPg4eDhgNCwQIBTgXNgwPIB4LBgULBAdFHgj1CwMFDiYSBgRCJQULBwIDG0sEAgcDCQMFCRcNBgYwMDEBAAIAAAAAAPQBGgAHABsAABMHFRczNzUnBzUzFSM1MzUjNTM1IzUzNSM1MzVLExOWExOWlpYmJktLJiZLARkS4RMT4RIlE+ESEyYSJhMlEwAACAAAAAABGgEaAAkADQARABUAGQAdACEAJQAAEwcVMzUzFTM1JwM1MxU3IxUzNzMVIzcjFTM3MxUjMzUjFSczFSMvCRLPEgnqEiYTExMSEjgTExMSEl0SJhMTARkJ2M/P2An++hMTExMTExMTExMTExMTAAAHAAAAAAEaAQcABwALAB8AKQA2AEAAUgAAEwcVFzM3NScHNTMVJzM1NCMiBgcVNjIVBwYVFBYzMj8BFRQGIiY1ND8BFyMVIzUzFzYyFhQGIicVFBYyNjQmIgYXMjc1BiImNDYyFzUmByYGFBYmExPhEhLh4aMNEgQJAwcPDA4HBggEAQUGAwYHKwELCwEEDggJDgQEBwQDBwVFCQUFCwcHDAQECAsODQEHE6kTE6kTvKmpOiAXAwIMBQkBAxAHCQkSBAQHBAIHAQEUBkofCQ4YDxwFBAcIDgcIIQMOBAgOCQQOAwEBEBoPAAAAAAYAAAAAARoBBwAHAAsAEwAYACAAJQAAEwcVFzM3NScHMxUjBzczFxUHIyc3IxUzNTM3MxcVByMnNyMVMzUmExPhEhLh4eETEzgTEzgTJRI4XhI5EhI5EiUTOQEHEzgTEzgTEzhLEhI5EhI5OTkSEjkSEjk5OQAAAAYAAAAAARoA4QAJABMAHwAjACcAKwAANzM1IwcVFzM1IzcjFTMVIxUzNzUHFxUPASMvATU/ATMHFzUnNxc3Jwc3NQcmJS8JCS8l6i8mJi8JPAQGVAkuBQZUCVAcHAsbPxsbQkLOEwmWChOWE4MTCpYnCC8JJRwILwgmVxEZEQ8QHBBXHRodAAADAAAAAAErAQgAEQAjACcAADcnPgEeARc3FwcjJzcXLgIGHwEGLgInByc3MxcHJx4DJzcXB2cPGj02IAEXDicPJw8XARosMUAPGjoyHgEXDycOKA8WAhgnLpIN3w3nDREDHDMfFg4nKA4XGCoYAbMNDgEdMR0XDicoDhYXJxcDvg3QDgACAAAAAAErAQ0AEQAjAAA3Byc3MxcHJx4CNjcXDgEuATcnBxczNycHLgIGBxc+AR4BJhcPJw4oDxYDKT05Dw8TRUkwzRcPJw8nDhcBLkhFFA8QOjwnkRcOJygOFh8vDRocCyEeETovFw4oJw4WJToTGyALGxgQMAALAAAAAAEHAQcABwALAA8AEwAXABsAHwAjACcAKwAvAAATIwcVFzM3NQczFSMXIzUzHQEjNSczFSMVMxUjFTUzFTM1MxUzIzUzNSM1Myc1MxX94QkJ4Qrhzs6DODg4Szg4ODg4EzhLODg4ODg4AQcKzgkJzgkTOCU4JSU4JRMlOSYmJiYmEyUTJSUAAAMAAAAAAScBBwARACMAMAAAEyMPARUXMzcWMj4BPwE0Jic1ByYjIgYUFjMyFxUHBg8BJzczFx4BFQYVDgMnPwH4YgZ9YQ0qEiolFwIBFBETDg4EBQUEDw1JAwIlVHNUEwkKAQIRGx4ORQMBBwN9DWIqChQiFQoVJQwqIQUFCAYGKEoBAyZUdDkKFw0FBQ8ZDwIGRQcAAAAABQAAAAABGgEaAAgAFQAeACsAOAAANzI2NCYiBhQWNxQOASIuATQ+ATIeAQcyNjQmIgYUFjcUDgEiLgE0PgEyHgEHMj4BNC4BIg4BFB4BlggLCxALC1MUIygjFBQjKCMUSxchIS4hIZojPEg8IyM8SDwjgx8zHx8zPjMeHjODCxALCxALExQjFBQjKCMUFCNMIS4hIS4hOCQ8IyM8SDwjIzyUHjM+Mx8fMz4zHgAAAAAEAAAAAAEaARoABgAKAA4AEgAAPwEnBycHFzcjNzMHMxUjFyMVM0NrDWQcDiLkmStuqKioqKiorl0OViIMKh8mSyYlJgAAAAAFAAAAAAEGARoAEwAXABsAIAAqAAATHwEPAS8BBy8BBy8BPwEnPwEnNwcXNyc3FzcnNxc3Jw8BFyMnFSM1ByM30wsnBD4LA0MKAzALDgUvAwRDAwVnBioHChU4FAojKyEuBTkWIxMjFSABGQRdCxoECBwEBxQFHwsUCAodCAtiEBEQFy4YLRhNE00Tc1s4S2FOSQAABAAAAAABEgEjABcARwBRAG4AACUnJiIPAQ4BHQEUFh8BFjI/AT4BPQE0JgcVFA8BBj0BBiciNTc0NzMWNzY0IiY1NDc1ND8BMh0BNhcyDwEUBzEmBhUUFjMyFDcUIwcjNTQ/ATE3Bw4BHQEUFyMiLwEuAT0BNDY/ATYyHwEWFy4BBwEAWQgSCFkICQkIWQgSCFkICQlNAQUBBQUBAgEBBQQHDQYKAQUBBAQCAQIBBQoEBAwkARYBARYQVAkJCAUHB1kGCAgGWQcPBlkLAgIJBuk1BQU1BRAJagkQBTUFBTUFEAlqCRCfCAEBAwECCAMCAQcBAQECAw0EBw0ICAEBAwEIAgECBgEBAQUHAgIaBAEOBgEBDXw0BQwJZwsDAzUEDgdqBw4ENQMDNQcNBAIDAAcAAAAAASwBGgADACAAJAAoADAANAA4AAA3FyMnByIOAhQeAjI3FwYjBiIuAjQ+AjIWFwcuARczFSMVMxUjNyEHFRchNzUHITUhNSE1IcwmDiVTCAwKBQUJDBIJAgQFBxAQDAcHDBISCgICBAklExMTE43+5gkJARoJE/76AQb++gEGqV5eCwUJDxANCQUDCQICBgwRFBEMBwICCQICCBMSE7sJ9AkJ9OqoEyYAAAAAD///AAAA8gEtAAQBFwEaAS0BNQE7AUoBUAFSAVcBXgFjAWQBbgF0AAATIisBNxc2NQc2PQEjLgEnLgEHPgEnDgEHBgcGMzcwByMOAQcUNjEHJgcGBzMGBzEGFQcGFRQXBxcjHgMXJicUFhcHFh8BJhcWHwE3BhczHgEzBxYXMxYXJxceAhcjJicuAjcmNzQnNTY3NTEWPwE2NzM2NzY3MTY3FTY3Nj8BBjM3BzYXMTIzBwYxFjcxNhcnFxYXMjcxNhcVFhcyJzEeARcmMRUWIxYXNSYnFCMxJgYXFjcxNDEXFh8BIicxJhUeARUxIhUUFjczBwYXJxQVMRYHNjQHFgcxBhUnBhYHNjUxNDciDwEOASc0JyYnJjc2NzY3PgIWFy4BDgEXNzI1FB4BNxU2PwEHBjY/ATY1MSY/AQcwOQEUFhcWNwYuAScyFzEWFyYnFhc3IiMyFiMwJxc0IgcXFAcGBzQmNjcUBzEGFD8BNgcuATcWNycPAhcWFycWHwEnJic3BwYHNicVMDMxMhQPATU2BxQHNTQ3hQQDAg5IAwICAQEbEA0jCQEGAQcIAwYGAQEGAwUFCAUEAggPDQUDAgQFAQIEAQMBAgQFBQQEAgUDAgIDAQQDAgYDAgEIBQEIAwMFAgEDBgMGBQ0OBQQUBxwyHAIBAQEHBwIDAwMBAgEFBAcHAgcMBw0IAQEPBwUEBAUFAgUFBgYBCwoKAgIEBQEIAQUPGgUDAQEEAgYGAwIBAgEBAgEBAQEBAgEDAQIBAQIDAQMBAgECAQUEAwQBAwEBAQUHECYUAhIGCQMCAgMFBBIWEgUJGhgOAQEBFR8OBQMJAQMFDgMBAQIEVAYDCxIJGxgGAQUIBAQGCQsDAQEGAgIENgIBAgMCBAQBBAICBAEDGQUGBAcFGgEnAQMEAwUCAgEBAwGMAQIGB+ACAQEEAgYCAwErAZAIBgUIEAoTJgcGAgQBAQEBAgIEAgEBAgEDBgECAwEPDAkFBwkEDBEIDQUHBwkEAQUJAQQCCQUCAwIBAgYDCAQCBQkDBwQBAgMCBAUGBQICAQIILUAhBgwPAgIWDgECBQUHBAQGBAcGAgMGBwMGAwECBAEBAQEBAgECAwQDBQEBAgEDBAUIHhEEBAULCgEUCQIBAwUCAQEEAgYFAgMBBAYBAwUDAQQJBwgDBAUGBgkDBwoIAwQHBQQCAQECBQcNBQcBAg4LDxcBBgsDBwwBCgcIBAsZDgECERsLBwEBAggCAwENAwICAgMDKQEEAgQBBAYQCgUKAQMICgW7AQF6BgQDAQsHBgEBBAUCAgQBAgEEEwECAQEBmQGfBAQGAxcEAgUCBgMYAg8NDlcBAQMDAQMVBAQCBAQAAAUAAAAAARIBLQBaALEAzwEZAT4AADceAR8BFh8BHgEUDgEPAQ4CBw4BIyImJyYvAiIPASIPAQ4BIiYnJi8BLgI0NjUnNDY3Nj8DJzQ+Ajc+ATUnNDU0PgIzMh4CHQEWFxYfAR4CFRQnMhYfARUPAQYPAQYUFxYfAR4BOwEyPwM0LwIuAS8BPQE0PgEzMhYUBhQXMzI2NScuAiMiBgcXJyYHIyI9AS4CIg4BFQcUHwEWMjY1IyIvASY2BzI+AyYvAi4CBg8BDgIVFxQGFBYfAhYXNzI3Njc2NzU/ATQ+ATc1ND8BNj8BLwEmLwEmNScmLwImIg8BBiImLwEmIh0BBwYHFxQXBw4BHQIyHwEWHwEWHwEUBgceAxcyPgE3Nj8CNj0BLwImIyIPAQYiJi8BBwYHBhUHBg8CFBb5BAUBAgEDAwIDAwYEBwYJCgYEBwQICwQCAQQdBwYNAQEEAwgLCgUJCRkDBQMDAQcHAwIFBwEBBwoMBggJAQULEg0OEgkDAQMDBA4HDAh+AgMBAQEEAQIGAgIDAQQBBgYBBgUOCwEBAgUDBwMBAgMCBQQCAQIDAwEBAwYECAYBAQUCAgICAQIEBgMDAQIBAQICAQEBAgEEHQQGBgMBAgINCgIEBQYDCgMIBQECBQQQCAMFQwQFCQkEBAIFAwYDAQIBAgMFAgICBwEBAgMDAwIFBRQFCQcDBQMCCAMBAQEFBgQDAwcEBAYEAQIFAwIICApAAwcIAwgKCgMBBQMFAwYDAgoDBQUBBAICAQICAQMBAQlbAgcFBgQFBAIGBwUEAQQDBwoEAgMGCAIBAQEBAgIFAgQCAwQCBAEDBggIBQ0HBwIBAgQJAgcKFBMSCAoYDgsGBgwSDgcMExcMDQoJBAYSCRQWDQqPAgEEBAIFAQEFAgMBAgQGAwUDCAgEAgECAQEEAQECBwIDAgcFBAIBAwMHBAgEBwgJAQEBAQYDBgUDBAMFBAMFAQIBAQUEBuQCAwYHBQISEAQGBAECCgMDBAQMBAcHAwEDAQEDDgECBAIDAQgfBAYFAgEBAgMBAQIXBgQCCgICBAcHBwUDAw0CBQQGAwIHDQcIBAICBwgTCQoEAgQDBAgDBAYEBQEEBgQCFQIFBAkFBQICAgIIBQ8EAQYBAwIKAwICBQURCAgFBQcKAAAAAAQAAAAAASsBGgAHAAsADwAVAAATHwEPAS8BNwcXNycXBxc3LwEHFwcXL/QIIgv0CCIO4SDhTQNeAj1FDTI9CQEZAwnyCQMK8egD3wKdEgITLzcPJycPAAAEAAAAAAEHARoABwAMABAAFAAAEyMHFRczNzUHFSM1MxcjNTM1IzUz/eEJCeEKhF1dcV5eXl4BGQn0CQn0cWfPz14TXgAAAAAG//8AAAEcARoACAARAB4AJwA0AEQAADcUBiImNDYyFgcUBiImNDYyFhcuAScGJx4BFxYzJjU3FAYiJjQ2MhYXNjc2JicGBxYHBgcWJyIxPgEXBg8BDgEHJicmI/YXIRcXIRemGCEXFyEYMhYiChESDTEgDg4LYRchGBghFxATBgYKDwYQEQgDCQ7SARJEJgkCARgpDggKBgbzERYWIRYWZREWFiEWFnQEGhMIBB4oBwIOEgEQFhYhFhYCFx0ZMhYRCR8iEA4LfCAjAwoNCAEVEwUCAQAAAAAEAAAAAAEaARoABwALABIAFgAAEzczFxUHIyc3FTM1DwEXBxc3NRUzFSMTE+ESEuETE+GvDTU1DT5LSwEHEhLhExPh4eE5DTU1DT0KMxMAAAQAAAAAARoA4QAHAAoAEgAYAAA3BzM3MxczJwc3FzcjBzM3MxczJzc2Nx8BPywZCSsKGSwbDw6FHj0eDj8OHWQWAgECF6lxHBxxQigoeqkrK0JDBgULQwADAAAAAAEHAPQAAwAHAAsAACUjNTMVIzUzBzM1IwEH4eHh4eHh4c4mcSZxJgAAAAABAAAAAAEaAQcAGwAANyIuAT8BIwYuAjc2Nz4BNzMeAR0BFAYrAQcGZggOBQQSNAcMBwEDIwgDDQinCw8PCxluCCMLEQkpAQYLDgZKFwcJAQEPC0IKD2cHAAAAAAIAAAAAARoBBwAbADYAADciLgE/ASMGLgI3Njc+ATczHgEdARQGKwEHBiciBwYHBhY3MxcVBwYeATI/AjMyNj0BNCYjZggOBQQSNAcMBwEDIwgDDQinCw8PCxluCBgFAgsgAgQFPgkUAQEEBQJyCRkDBQUDIwsRCSkBBgsOBkoXBwkBAQ8LQgoPZwfRBR9DBAcBDAkuAgUDAmgDBANCAwUAAAAAAQAAAAABGgEHABsAABMeAg8BMzYeAgcGBw4BKwEuAT0BNDY7ATc2xggOBQQSNAcMBwEDIwgDDQinCw8PCxptCAEHAQoRCSkBBwsNBkoXBwoBDwtCCg9nBgAAAAACAAAAAAEaAQcAGwA2AAATHgIPATM2HgIHBgcOASsBLgE9ATQ2OwE3NhcyNzY3NiYHIyc1NzYuASIPAiMiBhcVBhYzxggOBQQSNAcMBwEDIwgDDQinCw8PCxptCBgFAgshAQQFPQoUAQEEBQJyCRkDBQEBBQMBBwEKEQkpAQcLDQZKFwcKAQ8LQgoPZwbQBR9DBAcBDAkuAgUDAmgDBANCAwUAAAYAAAAAARkBGgAgAC8AQQBNAFIAaAAAJScHJzcnJiIOAhQXBgcGFhceATMyNzY3NjcWMj4CNAcGKwEiLgI3NjceARcGNxYGIicuATc+AjsBBxUXMzcHMxc3JzcvAQ8CFycXFSMnFzcXFhQHDgEnJi8BNxceAT4CNCYnARUPJxcnAw0bGhQLBTo5BgEIBAkFCQcVJCIaDRwaFAviAQICAgIDAgEqRgMGBEmpASAsDwwGBgQPFAoFIiMNIsocDgwMAQQ2Cw8CIworFByKDToICAYPCAUDOw06AgUFAgEBAesDJxcoDwQLFBsdDTo7CBUHBAUHEyUhGwYLFRoctwEBBAYCLEYEBwNLhRcfDwwgDwoQCCMNIyInDg0NHwgkAg8MNkAdFSx9DTwIFggGAwMCBDwNPAICAgMDBAMBAAAGAAAAAAD0ARoAEwAXABsAHwAjACcAADczFSMVByMnNSM1MzU0NjsBMhYVKwEVMwczNSMXIxUzNzMVIzczFSO8OBMTgxMSOAsIOAgLEzg4XoODJhMTEhMTJhMT9BOpEhKpExMHCwsHE7ypE4ODg4ODAAAAAAEAAAAAAQcAzwAFAAA/ATMXByMmB9IIahDECgpmAAAAAQAAAAAAzwEHAAUAABMXFQcnNcQKCmYBBwjSCGoQAAABAAAAAADPAQcABQAANyc1NxcVaAoKZiYH0ghqEAAAAAEAAAAAAQcAzwAFAAAlByMnNzMBBwjSB2kQaAoKZgAAAQAAAAABGgD/AD4AACUOAQcXFAYHDgMiJicWNjciJicmJxcWNy4BJyY1MRYzJicmJyY3NjcWFxYXFhcnNTQ3Njc2MhYXNjcGBzYBGQUOCAEHBwkdJCstKhIVKhAMFwcFAwUKCQkQBgwMDQsHAwIDBAEECg0ZHxAQAQQIFQoWFAgSEAYSEOUIDgYHEB8PFSIYDAwMAgsODAoHCAEBAwIJCA4UBgcMBgYODQcGDAoVCAQBBgYMCRUIBAkIBAkTCgEABAAAAAABBwEaAB4AIgAmACoAADcjJzM3NScjBxUXMwcjBxUXMzc1JyM3FyMHFRczNzUnNTMVBxUjNRcjNTP9ID8UCgpLCQkUPiEJCTgKCgE6OQEJCTgKljheJc4mJl5eCUsJCUsJXgo4CQk4ClZWCjgJCTh6OTmDJSUlJQAAAAAEAAAAAAEHARoAHgAiACYAKgAAEyMHFRczByczNzUnIwcVFzMXIwcVFzM3NScjNzM3NQc1MxUXFSM1NyM1M/04CQkBOToBCgo4CQkhPhQJCUsKChQ/IArhJV44gyYmARkJOApWVgo4CQk4Cl0KSwkJSwpdCjgvJiaDODiDJgAAAAUAAAAAAQcBGgAjACcAKwAvADMAADcjJzUnIzUzNzUnIwcVFzMVIwcVByMHFRczNzU3MxcVFzM3NSczFSMHMxUjByM1MxcjNTP9ISAKHAkKCiUJCQkcCSAiCQkmCSBDIAolCoQTExI4ODkSErwTE0sgRwolCSYJCSYJJQpHIAkmCQkiICAiCQkmxRNLOEsSEhIAAAADAAAAAAEHARoACQATAC0AADc1Byc3MxcHJxUHFScHFzM3Jwc1NxcHFwcjNTMnIwczFSMnNyc3MxUjFzM3IzWNEw0iDiINExITDSIOIg0TYgZFRQZOODg4OjlPBUVFBU85ODg6OLJLEw4hIg0TSzhLEw0iIg0TS2cTNzkTEy0tExM3ORMTLS0TAAAAAAwAAAAAARoBGgAJABMAGwAfACcAKwAzADcAPwBDAEcASwAAExcHJxUjNQcnNxc1IxUnBxczNyc3Iyc1NzMXFSczNSMXIyc1NzMXFSczNSMHIyc1NzMXFSczNSMXIyc1NzMXFSczNSsCFTM1IxUzNigPFxIXDScPEhcNJw0oDU4lCQklCiYTE404Cgo4CTgmJkIlCQklCiYTE404Cgo4CTgmJhMlJSUlARknDRZSVBgNJ+hSUhYNJycNYgkmCQkmChIlCTgKCjgKJZYJJgkJJgoTOQo4CQk4CSYTcBIAAAAAAgAAAAABBwEdABUAGgAANzU0PgEWFzMuAQ4BHQEjBxUXMzc1JwczFSM1XhopIwcUCC44JhMSErwTEyYmvKklFR8HFRMbIAcqHSUTcBMTcBMTcHAABQAAAAABGgEaAAkAEQAeACcALwAANzM3FxUHJyMnNR8BNQ8BIxUzNxQGByc+ASc2JzceAQcUByc2NCc3FgcUByc2JzcWHDRJEBBJNAlIOzsHLi7FDw4ODA0BARkODg8lEw0NDQ0TJggOBwcOCNFIBvQGSAleVzvGOgNLJRcqEg0PJBMnHw0RKxcfGQ0ULxMNGR8QDQ4PEA0NAAAABAAAAAABFQEUABcALwBbAF8AADczNzM3NTc1JzUnIycjByMHFQcVFxUXMzcjNS8BPwE1Mz8BHwEzFR8BDwEVIw8BJzcGDwEjNTY3PgMzMh4CFA4BDwEOAR0BIzU0Nj8BPgE0JzEuAScxJiIGFyM1M5ANIC0KICAJLiANHy8KHx8KLwMpAh0cAykGHB0GKAMdHQMoBxwcFQIBAREBAwIEBwkFCAsIAwQFAwYCBBEEAwsDAwEBAwIDBgYPEBAYIAotIA4gLgkgIAotIA4gLQoTKAccHAcoAxwcAygHHBwHKAMcHHEDAwYBCQcDBgQDBQgLDAkIBAcDBgMJCgUIAw4DCAcDAgQBAgRdEAAAAAYAAAAAASwBGgBCAE4AWgBiAGYAagAANzQ2HwEWMjY/AicuAiIHNTcWHwE3PgMWFRQjIiYiBgcGBxcWHwEWMjc2PwEXDgMiLgEvASYnDwEOAiImFz4BNCYnMxYVFAYHIy4BNTQ3Mw4BFRQXNyEHFRchNzUHITUhNSE1IWUHBAUBAwUDCwYHAQUGBwMbBgMFBQMJCQkGCAMFBgYDBQQIAQECAQQBBQMDAwEGBwgGBQMBBAEBCQYDCAcIBnMHCQkHDRIJCZ4JCRINCAgQz/7mCQkBGgkT/voBBv76AQZUBAUCBAEFAxANGwMFAwEEBQYIEAgGCQYBBAQIAwYEBggiBAMDAQEEBQQCAwgHBgQGAxQEAw8JBQYFBQUKGBoYChUaDhcKCRkNGhUKGQwbFM4J9AkJ9OqoEyYAAAIAAAAAARUBFAAXAB4AADcjJyMnNSc1NzU3MzczFzMXFRcVBxUHIyczNycHJwedDR8vCh8fCi8fDSAuCSAgCi0/DkYNQBoNGCAKLSAOIC0KICAJLiAOIC0KMEYOQRoNAAMAAAAAARUBFAAXAC8ANgAANzM3Mzc1NzUnNScjJyMHIwcVBxUXFRczNyM1LwE/ATUzPwEfATMVHwEPARUjDwEnNzM3JwcnB5ANIC0KICAJLiANHy8KHx8KLwMpAh0cAykGHB0GKAMdHQMoBxwcBA5GDUAaDRggCi0gDiAuCSAgCi0gDiAtChMoBxwcBygDHBwDKAccHAcoAxwcIEYOQRoNAAAABAAAAAABGgD0AAcACwAWACEAADcHFRczNzUnFSM1Mwc1MzUjBxUXMzUjJzUzNSMHFRczNSOWExNxEhJxcakTHQkJHRM4EhwJCRwS9BOWExOWE6mWXksTCYQJEzgmEgleCRMAAAMAAP//AS4BBwASAB8AJgAAEzMXFSYnNSMVMxQXIzUzNSMnNRc+AR4CDgIuAjYXNycHJwcXHPQJCAvgXRNLOGcJpBEoJBcCEiEoJBYDEjgtDycYDCABBwpnBwRTqR8ZExIKu3QMAhEiKCQXAhIhKCRSOww0Ew4aAAUAAAAAASwBBwASAB8AKwAxADcAABMzFxUmJzUjFTMUFyM1MzUjJzUXIg4BFB4BMj4BNC4BByIuATQ+ATMyFhQGJxc3JzcnByc3FwcnHPQJCAvgXRNLOGcJzhQjFBQjKCMUFCMUDxoPDxoPFyEhFRsJExMJMBIIGxsIAQcKZwcEU6kfGRMSCrtnFCMoIxQUIygjFIMPGh4aDyEuIUMbCBMSCC4SCBobCAAAAAADAAAAAAEsAQcAEgAfACsAABMzFxUmJzUjFTMUFyM1MzUjJzUXIg4BFB4BMj4BNC4BByIuATQ+ATMyFhQGHPQJCAvgXRNLOGcJzhQjFBQjKCMUFCMUDxoPDxoPFyEhAQcKZwcEU6kfGRMSCrtnFCMoIxQUIygjFIMPGh4aDyEuIQAAAAADAAD//gEuAQcAEgAuADEAABMzFxUmJzUjFTMUFyM1MzUjJzUXMh4CFx4BBw4CBw4BJy4CJy4BNz4CNzYXJxUc9AkIC+BdE0s4ZwnOChMRDgUHBAQCCg4IDR4PCREOBQcEBAIKDggSOjkBBwpnBwRTqR8ZExIKu2cFCg4IDR4PCREOBQcEBAIKDggNHg8JEQ4FCksmSwAAAAIAAAAAARoBBwAPABMAAAEjBxUXMxUjFTM1IzUzNzUHIzUzARD0CQlnOJY4ZwkS4eEBBwq7ChITExIKu7KpAAAGAAAAAAEsAPQAGQAzADcAOwBHAFMAADczMhYdARQGKwEiLwEmIg8BBisBIiY9ATQ2FyIGHQEeATsBMj8BNjIfARY7ATI2PQE0JiMHMxUjJTMVIycyFhQGKwEiJjQ2OwEyFhQGKwEiJjQ2M0uWFyEhFwcRDw8KFgoPDxEHFyEhFxAWARUQBwwJEA4iDhAJDAcQFhYQ4RMTARkTE58EBQUELwQFBQSWBAUFBC8EBQUE9CEXSxghCgoGBgoKIRhLFyETFg9LEBYGCwkJCwYWEEsPFjg4ODglBQgGBggFBQgGBggFAAAEAAAAAAEHARkABQARAB8AKQAAEwcXNzU0FScmIg8BDgEfATY1NxYdARQHNz4BPQE2JicHNxcHBiIvASY0t08oLIwCCAMNAwEEoQUOBAQ0BAQBBQToFh8bAggDDQMBEkgfITsGmmoCAwwDCQOUBQbhCQnPCQkZAggEpQQIAYEVHBUCAwwDCQAAAQAAAAABBwEaACoAADcGJyYvAQcGIi8BJjQ/AScmND8BNjIfATc+AR8BHgEdASM1Bxc1MxUUBgfMBgYDA2AqAggDDQMDJCQDAw0DCAIqYgQIBDIEBDxJST0FBCcDAwECWCACAwwDCQMhIgMJAwwDAiBZAwECGQEIBFxBODcuSQQIAgAABgAAAAABGgEaAAsAFwAjADAAOABAAAA3MzUzNSM1IxUjFTMXIxUjFTMVMzUzNSM3NSMVIxUzFTM1MzUHJiIPAQYUFjI/ATY0BwYiJjQ/ARc3Byc3NjIWFFITExMTExOWExISExMTHxMTExMSSggXCYwIEBgIjAiiAggGA3kOEwYNBgIIBs4TExMTE14SExMTE5YSEhMTExMuCAiNCBcRCYwIF54DBgcDeQ0TBg4GAgUIAAAABAAAAAABGQEaAAUACAAMABAAABMzFwcjJzcHMyc1IxU9ATMVjhB7CPYIg2vWXxgYARnmDQ3OyRMTEyZLSwAAAAMAAAAAAPQBGgAGABoAJwAANzM1IzUjFScOARQWFxUXMzc1PgE0Jic1JyMHFxQOASIuATQ+ATIeAY0lHBMcFhkZFgpLCRYZGRYJSwp6FCMoIxQUIygjFIMTLzhaDCwyLAwpCQkpDCwyLAwpCQl6FCMUFCMoIxQUIwAAAAADAAAAAADhARoAEQAZAB0AABM1IyIOARQeATsBFSMVMzUjNQcjIiY0NjsBFyM1M+FnEh4SEh4SHBNeEzgcFBsbFBwmExMBBxIRHyMeEl4SEs9eGyccz88ABQAAAAABLAD3AAcAHAAnADcAQwAANTMVITUzFSE3IzUjBiMiJjU0PwE0IyIHNTYzMhUPAQ4BFRQWMzI2NRcxFSM1MxUxNjMyFhUUBiInFRQWMzI2NTQmIgYTAQYT/tSAEAEKFRARIh8WEg8PFCQQGQwLCgkNED8REQwYFBYZKgsQDQ8REBwRXiYmODgQExENHQUEGgwRCSYPBAEICwcKEQ4bD5hDFBsYGh87Dg0SFxURExQAAwAAAAABGgEHAAcACwAPAAABIwcVFzM3NQcjNTM1IzUzARD0CQn0CRLh4eHhAQcKzgkJzsWEEiYAAAAABgAAAAABGgEaAB8ALwBFAFoAegCKAAA3JicmBwYPARU3PgEyFhcHDgIHBhYXFjMyNxUzNTQmBxUUBw4BJy4CPQE0PgEzNy4CIgcGBzUjFTM1FhcWMzI+AjQHFA4BBwYnLgI9AT4DFzYXHgEHPgEyFh8BNScmDgMUHgIyNj8BNQ8BBicuAjQ2NyM1MxcVByMXByc1NxcHM0kEBQkLBwYGBAQLCwUBEgcJBgEDBgkFBQsHEwMPAQIKBQICAQMEA2sBBgsOBQMCEhIDBgIEBwsHBBICBAIGBQIEAgECAwUDBgQBAl4DBggGAwcCCBIOCgUFCQ0OCgQCBgoGBgMFAwTcS1QJCXwnDjY2DiZy6wUCAwIBAwMUAwMFBgYCAQUHBAoSBAIJBzEHCx8FAwMGBQIBAgMCBAEDAhYGCwcEAgMudAUFAQEGDBAQBwcKBgEDAgIEBgQKBAgFAwEBBgIJYAMDAgIFFQEFAQYMDxEOCgYDAgERAgQBAgIGCAsJTRIJcQknDTYNNw4lAAADAAAAAAElAS0AJAA/AEwAABMyHgIXFhcWFxYzFRQOBA8BJy4FPQEyPgI3PgEXLgEnLgEiBgcOAQcVFB4EFz4FNS8BDwEvAQ8BHwI/AZcIDQ0MBwoLFRcMCwsTGR8hEQQFESIeGhMKCxgWFQoMGogVKRIJFhYVCRIpFgoRGBoeDxAdGxcSCTQICFEcCAgCJAQJBFsBLAIEBgQGBQgCAUoWJiMeGxcKAwMKFxseIycUTAEFCQYICDgBDAwGBgYGDAwBORIiIBsYFQkJFBkbICISGQcBYCcCBwczAgECawAAAAQAAAAAASUBLQAkAD8AaQBxAAATMh4CFxYXFhcyFxUUDgQPAScuBT0BFj4CNz4BFy4BJy4BIgYHDgEHFRQeBBc+BTUnHgEUDgEPAQ4BHQEHIyc1ND4BPwE+ATQmJyYiBw4BFQcjJzQ+ATc2FxYHNzMXFQcjJ5cIDQ0MBwoLFRYNCwsTGR8hEQUEESIeGhMKCxgWFQoMGogVKRIJFhYVCRIpFgoRGBoeDxAdGxcRCmAFBgUGBAYDAwMNAwUGBAYDAwMCBQ8FAgMDDQMGCgYODwYeAw0DAw0DASwCBAYEBgUIAgFKFiYjHhsXCgMDChcbHiMnFEwBAgUJBggIOAEMDAYGBgYMDAE5EiIgGxgVCQkUGRsgIhIZBgwOCwgDBgMGBAYDAwYHCwcDBgQGBwYDBQUDBgQCAggNCgIGBgNhAwMNAwMAAAMAAAAAASUBLQAkAD8AUwAAEzIeAhcWFxYXMhcVFA4EDwEnLgU9ARY+Ajc+ARcuAScuASIGBw4BBxUUHgQXPgU1LwEjBycjBxUXBxUXMzcXMzc1JzeXCA0NDAcKCxUWDQsLExkfIREFBBEiHhoTCgsYFhUKDBqIFSkSCRYWFQkSKRYKERgaHg8QHRsXEQpHBwQlJQQIJSUIBCUlBAclJQEsAgQGBAYFCAIBShYmIx4bFwoDAwoXGx4jJxRMAQIFCQYICDgBDAwGBgYGDAwBORIiIBsYFQkJFBkbICISCwgmJggEJSUECCYmCAQlJQAAAAMAAAAAARoBHgAOAB8AKwAANxYGBxcHJw4BLgE+AR4BBzI2Nwc+ATU0LgEiDgEUHgE3NSM1IxUjFTMVMzXiAQ0MUA5PHEg5Exw/RzBkER8MAQwOFycuJhcXJkUlEyYmE7kUJhBPDlAXAitFQiMMNYANDAEMHxEXJxcXJy0nF0sTJSUTJSUAAAADAAAAAAEaAR4ADgAfACMAADcWBgcXBycOAS4BPgEeAQcyNjcHPgE1NC4BIg4BFB4BJzMVI+IBDQxQDk8cSDkTHD9HMGQRHwwBDA4XJy4mFxcmGF1duRQmEE8OUBcCK0VCIww1gA0MAQwfERcnFxcnLScXXRIAAAAAABAAxgABAAAAAAABAAcAAAABAAAAAAACAAcABwABAAAAAAADAAcADgABAAAAAAAEAAcAFQABAAAAAAAFAAwAHAABAAAAAAAGAAcAKAABAAAAAAAKACQALwABAAAAAAALABMAUwADAAEECQABAA4AZgADAAEECQACAA4AdAADAAEECQADAA4AggADAAEECQAEAA4AkAADAAEECQAFABgAngADAAEECQAGAA4AtgADAAEECQAKAEgAxAADAAEECQALACYBDGNvZGljb25SZWd1bGFyY29kaWNvbmNvZGljb25WZXJzaW9uIDEuMTFjb2RpY29uVGhlIGljb24gZm9udCBmb3IgVmlzdWFsIFN0dWRpbyBDb2RlaHR0cDovL2ZvbnRlbGxvLmNvbQBjAG8AZABpAGMAbwBuAFIAZQBnAHUAbABhAHIAYwBvAGQAaQBjAG8AbgBjAG8AZABpAGMAbwBuAFYAZQByAHMAaQBvAG4AIAAxAC4AMQAxAGMAbwBkAGkAYwBvAG4AVABoAGUAIABpAGMAbwBuACAAZgBvAG4AdAAgAGYAbwByACAAVgBpAHMAdQBhAGwAIABTAHQAdQBkAGkAbwAgAEMAbwBkAGUAaAB0AHQAcAA6AC8ALwBmAG8AbgB0AGUAbABsAG8ALgBjAG8AbQACAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcsBAgEDAQQBBQEGAQcBCAEJAQoBCwEMAQ0BDgEPARABEQESARMBFAEVARYBFwEYARkBGgEbARwBHQEeAR8BIAEhASIBIwEkASUBJgEnASgBKQEqASsBLAEtAS4BLwEwATEBMgEzATQBNQE2ATcBOAE5AToBOwE8AT0BPgE/AUABQQFCAUMBRAFFAUYBRwFIAUkBSgFLAUwBTQFOAU8BUAFRAVIBUwFUAVUBVgFXAVgBWQFaAVsBXAFdAV4BXwFgAWEBYgFjAWQBZQFmAWcBaAFpAWoBawFsAW0BbgFvAXABcQFyAXMBdAF1AXYBdwF4AXkBegF7AXwBfQF+AX8BgAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcoBywHMAc0BzgHPAdAB0QHSAdMB1AHVAdYB1wHYAdkB2gHbAdwB3QHeAd8B4AHhAeIB4wHkAeUB5gHnAegB6QHqAesB7AHtAe4B7wHwAfEB8gHzAfQB9QH2AfcB+AH5AfoB+wH8Af0B/gH/AgACAQICAgMCBAIFAgYCBwIIAgkCCgILAgwCDQIOAg8CEAIRAhICEwIUAhUCFgIXAhgCGQIaAhsCHAIdAh4CHwIgAiECIgIjAiQCJQImAicCKAIpAioCKwIsAi0CLgIvAjACMQIyAjMCNAI1AjYCNwI4AjkCOgI7AjwCPQI+Aj8CQAJBAkICQwJEAkUCRgJHAkgCSQJKAksCTAJNAk4CTwJQAlECUgJTAlQCVQJWAlcCWAJZAloCWwJcAl0CXgJfAmACYQJiAmMCZAJlAmYCZwJoAmkCagJrAmwCbQJuAm8CcAJxAnICcwJ0AnUCdgJ3AngCeQJ6AnsCfAJ9An4CfwKAAoECggKDAoQChQKGAocCiAKJAooCiwKMAo0CjgKPApACkQKSApMClAKVApYClwKYApkCmgKbApwCnQKeAp8CoAKhAqICowKkAqUCpgKnAqgCqQKqAqsCrAKtAq4CrwKwArECsgKzArQCtQK2ArcCuAK5AroCuwK8Ar0CvgK/AsACwQLCAsMCxALFAsYCxwLIAskCygLLAswAB2FjY291bnQUYWN0aXZhdGUtYnJlYWtwb2ludHMDYWRkB2FyY2hpdmUKYXJyb3ctYm90aBFhcnJvdy1jaXJjbGUtZG93bhFhcnJvdy1jaXJjbGUtbGVmdBJhcnJvdy1jaXJjbGUtcmlnaHQPYXJyb3ctY2lyY2xlLXVwCmFycm93LWRvd24KYXJyb3ctbGVmdAthcnJvdy1yaWdodBBhcnJvdy1zbWFsbC1kb3duEGFycm93LXNtYWxsLWxlZnQRYXJyb3ctc21hbGwtcmlnaHQOYXJyb3ctc21hbGwtdXAKYXJyb3ctc3dhcAhhcnJvdy11cAxhenVyZS1kZXZvcHMFYXp1cmULYmVha2VyLXN0b3AGYmVha2VyCGJlbGwtZG90DmJlbGwtc2xhc2gtZG90CmJlbGwtc2xhc2gEYmVsbAVibGFuawRib2xkBGJvb2sIYm9va21hcmsLYnJhY2tldC1kb3QNYnJhY2tldC1lcnJvcglicmllZmNhc2UJYnJvYWRjYXN0B2Jyb3dzZXIDYnVnCGNhbGVuZGFyDWNhbGwtaW5jb21pbmcNY2FsbC1vdXRnb2luZw5jYXNlLXNlbnNpdGl2ZQljaGVjay1hbGwFY2hlY2sJY2hlY2tsaXN0DGNoZXZyb24tZG93bgxjaGV2cm9uLWxlZnQNY2hldnJvbi1yaWdodApjaGV2cm9uLXVwBGNoaXAMY2hyb21lLWNsb3NlD2Nocm9tZS1tYXhpbWl6ZQ9jaHJvbWUtbWluaW1pemUOY2hyb21lLXJlc3RvcmUNY2lyY2xlLWZpbGxlZBNjaXJjbGUtbGFyZ2UtZmlsbGVkDGNpcmNsZS1sYXJnZQxjaXJjbGUtc2xhc2gTY2lyY2xlLXNtYWxsLWZpbGxlZAxjaXJjbGUtc21hbGwGY2lyY2xlDWNpcmN1aXQtYm9hcmQJY2xlYXItYWxsBmNsaXBweQljbG9zZS1hbGwFY2xvc2UOY2xvdWQtZG93bmxvYWQMY2xvdWQtdXBsb2FkBWNsb3VkCGNvZGUtb3NzBGNvZGUGY29mZmVlDGNvbGxhcHNlLWFsbApjb2xvci1tb2RlB2NvbWJpbmUSY29tbWVudC1kaXNjdXNzaW9uDWNvbW1lbnQtZHJhZnQSY29tbWVudC11bnJlc29sdmVkB2NvbW1lbnQOY29tcGFzcy1hY3RpdmULY29tcGFzcy1kb3QHY29tcGFzcwdjb3BpbG90BGNvcHkIY292ZXJhZ2ULY3JlZGl0LWNhcmQEZGFzaAlkYXNoYm9hcmQIZGF0YWJhc2UJZGVidWctYWxsD2RlYnVnLWFsdC1zbWFsbAlkZWJ1Zy1hbHQnZGVidWctYnJlYWtwb2ludC1jb25kaXRpb25hbC11bnZlcmlmaWVkHGRlYnVnLWJyZWFrcG9pbnQtY29uZGl0aW9uYWwgZGVidWctYnJlYWtwb2ludC1kYXRhLXVudmVyaWZpZWQVZGVidWctYnJlYWtwb2ludC1kYXRhJGRlYnVnLWJyZWFrcG9pbnQtZnVuY3Rpb24tdW52ZXJpZmllZBlkZWJ1Zy1icmVha3BvaW50LWZ1bmN0aW9uH2RlYnVnLWJyZWFrcG9pbnQtbG9nLXVudmVyaWZpZWQUZGVidWctYnJlYWtwb2ludC1sb2ccZGVidWctYnJlYWtwb2ludC11bnN1cHBvcnRlZA1kZWJ1Zy1jb25zb2xlFGRlYnVnLWNvbnRpbnVlLXNtYWxsDmRlYnVnLWNvbnRpbnVlDmRlYnVnLWNvdmVyYWdlEGRlYnVnLWRpc2Nvbm5lY3QSZGVidWctbGluZS1ieS1saW5lC2RlYnVnLXBhdXNlC2RlYnVnLXJlcnVuE2RlYnVnLXJlc3RhcnQtZnJhbWUNZGVidWctcmVzdGFydBZkZWJ1Zy1yZXZlcnNlLWNvbnRpbnVlF2RlYnVnLXN0YWNrZnJhbWUtYWN0aXZlEGRlYnVnLXN0YWNrZnJhbWULZGVidWctc3RhcnQPZGVidWctc3RlcC1iYWNrD2RlYnVnLXN0ZXAtaW50bw5kZWJ1Zy1zdGVwLW91dA9kZWJ1Zy1zdGVwLW92ZXIKZGVidWctc3RvcAVkZWJ1ZxBkZXNrdG9wLWRvd25sb2FkE2RldmljZS1jYW1lcmEtdmlkZW8NZGV2aWNlLWNhbWVyYQ1kZXZpY2UtbW9iaWxlCmRpZmYtYWRkZWQMZGlmZi1pZ25vcmVkDWRpZmYtbW9kaWZpZWQNZGlmZi1tdWx0aXBsZQxkaWZmLXJlbW92ZWQMZGlmZi1yZW5hbWVkC2RpZmYtc2luZ2xlBGRpZmYHZGlzY2FyZARlZGl0DWVkaXRvci1sYXlvdXQIZWxsaXBzaXMMZW1wdHktd2luZG93C2Vycm9yLXNtYWxsBWVycm9yB2V4Y2x1ZGUKZXhwYW5kLWFsbAZleHBvcnQKZXh0ZW5zaW9ucwpleWUtY2xvc2VkA2V5ZQhmZWVkYmFjawtmaWxlLWJpbmFyeQlmaWxlLWNvZGUKZmlsZS1tZWRpYQhmaWxlLXBkZg5maWxlLXN1Ym1vZHVsZRZmaWxlLXN5bWxpbmstZGlyZWN0b3J5EWZpbGUtc3ltbGluay1maWxlCGZpbGUtemlwBGZpbGUFZmlsZXMNZmlsdGVyLWZpbGxlZAZmaWx0ZXIFZmxhbWUJZm9sZC1kb3duB2ZvbGQtdXAEZm9sZA1mb2xkZXItYWN0aXZlDmZvbGRlci1saWJyYXJ5DWZvbGRlci1vcGVuZWQGZm9sZGVyBGdhbWUEZ2VhcgRnaWZ0C2dpc3Qtc2VjcmV0CmdpdC1jb21taXQLZ2l0LWNvbXBhcmUJZ2l0LWZldGNoCWdpdC1tZXJnZRdnaXQtcHVsbC1yZXF1ZXN0LWNsb3NlZBdnaXQtcHVsbC1yZXF1ZXN0LWNyZWF0ZRZnaXQtcHVsbC1yZXF1ZXN0LWRyYWZ0HmdpdC1wdWxsLXJlcXVlc3QtZ28tdG8tY2hhbmdlcxxnaXQtcHVsbC1yZXF1ZXN0LW5ldy1jaGFuZ2VzEGdpdC1wdWxsLXJlcXVlc3QPZ2l0LXN0YXNoLWFwcGx5DWdpdC1zdGFzaC1wb3AJZ2l0LXN0YXNoDWdpdGh1Yi1hY3Rpb24KZ2l0aHViLWFsdA9naXRodWItaW52ZXJ0ZWQOZ2l0aHViLXByb2plY3QGZ2l0aHViBWdsb2JlCmdvLXRvLWZpbGUHZ3JhYmJlcgpncmFwaC1sZWZ0CmdyYXBoLWxpbmUNZ3JhcGgtc2NhdHRlcgVncmFwaAdncmlwcGVyEWdyb3VwLWJ5LXJlZi10eXBlDGhlYXJ0LWZpbGxlZAVoZWFydAdoaXN0b3J5BGhvbWUPaG9yaXpvbnRhbC1ydWxlBWh1Ym90BWluYm94BmluZGVudARpbmZvBmluc2VydAdpbnNwZWN0C2lzc3VlLWRyYWZ0Dmlzc3VlLXJlb3BlbmVkBmlzc3VlcwZpdGFsaWMGamVyc2V5BGpzb24Oa2ViYWItdmVydGljYWwDa2V5A2xhdw1sYXllcnMtYWN0aXZlCmxheWVycy1kb3QGbGF5ZXJzF2xheW91dC1hY3Rpdml0eWJhci1sZWZ0GGxheW91dC1hY3Rpdml0eWJhci1yaWdodA9sYXlvdXQtY2VudGVyZWQObGF5b3V0LW1lbnViYXITbGF5b3V0LXBhbmVsLWNlbnRlchRsYXlvdXQtcGFuZWwtanVzdGlmeRFsYXlvdXQtcGFuZWwtbGVmdBBsYXlvdXQtcGFuZWwtb2ZmEmxheW91dC1wYW5lbC1yaWdodAxsYXlvdXQtcGFuZWwXbGF5b3V0LXNpZGViYXItbGVmdC1vZmYTbGF5b3V0LXNpZGViYXItbGVmdBhsYXlvdXQtc2lkZWJhci1yaWdodC1vZmYUbGF5b3V0LXNpZGViYXItcmlnaHQQbGF5b3V0LXN0YXR1c2JhcgZsYXlvdXQHbGlicmFyeRFsaWdodGJ1bGItYXV0b2ZpeBFsaWdodGJ1bGItc3BhcmtsZQlsaWdodGJ1bGINbGluay1leHRlcm5hbARsaW5rC2xpc3QtZmlsdGVyCWxpc3QtZmxhdAxsaXN0LW9yZGVyZWQObGlzdC1zZWxlY3Rpb24JbGlzdC10cmVlDmxpc3QtdW5vcmRlcmVkCmxpdmUtc2hhcmUHbG9hZGluZwhsb2NhdGlvbgpsb2NrLXNtYWxsBGxvY2sGbWFnbmV0CW1haWwtcmVhZARtYWlsCm1hcC1maWxsZWQTbWFwLXZlcnRpY2FsLWZpbGxlZAxtYXAtdmVydGljYWwDbWFwCG1hcmtkb3duCW1lZ2FwaG9uZQdtZW50aW9uBG1lbnUFbWVyZ2UKbWljLWZpbGxlZANtaWMJbWlsZXN0b25lBm1pcnJvcgxtb3J0YXItYm9hcmQEbW92ZRBtdWx0aXBsZS13aW5kb3dzBW11c2ljBG11dGUIbmV3LWZpbGUKbmV3LWZvbGRlcgduZXdsaW5lCm5vLW5ld2xpbmUEbm90ZRFub3RlYm9vay10ZW1wbGF0ZQhub3RlYm9vawhvY3RvZmFjZQxvcGVuLXByZXZpZXcMb3JnYW5pemF0aW9uBm91dHB1dAdwYWNrYWdlCHBhaW50Y2FuC3Bhc3MtZmlsbGVkBHBhc3MKcGVyc29uLWFkZAZwZXJzb24FcGlhbm8JcGllLWNoYXJ0A3BpbgxwaW5uZWQtZGlydHkGcGlubmVkC3BsYXktY2lyY2xlBHBsYXkEcGx1Zw1wcmVzZXJ2ZS1jYXNlB3ByZXZpZXcQcHJpbWl0aXZlLXNxdWFyZQdwcm9qZWN0BXB1bHNlCHF1ZXN0aW9uBXF1b3RlC3JhZGlvLXRvd2VyCXJlYWN0aW9ucwtyZWNvcmQta2V5cwxyZWNvcmQtc21hbGwGcmVjb3JkBHJlZG8KcmVmZXJlbmNlcwdyZWZyZXNoBXJlZ2V4D3JlbW90ZS1leHBsb3JlcgZyZW1vdGUGcmVtb3ZlC3JlcGxhY2UtYWxsB3JlcGxhY2UFcmVwbHkKcmVwby1jbG9uZQpyZXBvLWZldGNoD3JlcG8tZm9yY2UtcHVzaAtyZXBvLWZvcmtlZAlyZXBvLXB1bGwJcmVwby1wdXNoBHJlcG8GcmVwb3J0D3JlcXVlc3QtY2hhbmdlcwVyb2JvdAZyb2NrZXQScm9vdC1mb2xkZXItb3BlbmVkC3Jvb3QtZm9sZGVyA3JzcwRydWJ5CXJ1bi1hYm92ZRBydW4tYWxsLWNvdmVyYWdlB3J1bi1hbGwJcnVuLWJlbG93DHJ1bi1jb3ZlcmFnZQpydW4tZXJyb3JzCHNhdmUtYWxsB3NhdmUtYXMEc2F2ZQtzY3JlZW4tZnVsbA1zY3JlZW4tbm9ybWFsDHNlYXJjaC1mdXp6eQtzZWFyY2gtc3RvcAZzZWFyY2gEc2VuZBJzZXJ2ZXItZW52aXJvbm1lbnQOc2VydmVyLXByb2Nlc3MGc2VydmVyDXNldHRpbmdzLWdlYXIIc2V0dGluZ3MFc2hhcmUGc2hpZWxkB3NpZ24taW4Ic2lnbi1vdXQGc21pbGV5BXNuYWtlD3NvcnQtcHJlY2VkZW5jZQ5zb3VyY2UtY29udHJvbA5zcGFya2xlLWZpbGxlZAdzcGFya2xlEHNwbGl0LWhvcml6b250YWwOc3BsaXQtdmVydGljYWwIc3F1aXJyZWwKc3Rhci1lbXB0eQlzdGFyLWZ1bGwJc3Rhci1oYWxmC3N0b3AtY2lyY2xlDXN1cnJvdW5kLXdpdGgMc3ltYm9sLWFycmF5DnN5bWJvbC1ib29sZWFuDHN5bWJvbC1jbGFzcwxzeW1ib2wtY29sb3IPc3ltYm9sLWNvbnN0YW50EnN5bWJvbC1lbnVtLW1lbWJlcgtzeW1ib2wtZW51bQxzeW1ib2wtZXZlbnQMc3ltYm9sLWZpZWxkC3N5bWJvbC1maWxlEHN5bWJvbC1pbnRlcmZhY2UKc3ltYm9sLWtleQ5zeW1ib2wta2V5d29yZA1zeW1ib2wtbWV0aG9kC3N5bWJvbC1taXNjEHN5bWJvbC1uYW1lc3BhY2UOc3ltYm9sLW51bWVyaWMPc3ltYm9sLW9wZXJhdG9yEHN5bWJvbC1wYXJhbWV0ZXIPc3ltYm9sLXByb3BlcnR5DHN5bWJvbC1ydWxlcg5zeW1ib2wtc25pcHBldA1zeW1ib2wtc3RyaW5nEHN5bWJvbC1zdHJ1Y3R1cmUPc3ltYm9sLXZhcmlhYmxlDHN5bmMtaWdub3JlZARzeW5jBXRhYmxlA3RhZwZ0YXJnZXQIdGFza2xpc3QJdGVsZXNjb3BlDXRlcm1pbmFsLWJhc2gMdGVybWluYWwtY21kD3Rlcm1pbmFsLWRlYmlhbg50ZXJtaW5hbC1saW51eBN0ZXJtaW5hbC1wb3dlcnNoZWxsDXRlcm1pbmFsLXRtdXgPdGVybWluYWwtdWJ1bnR1CHRlcm1pbmFsCXRleHQtc2l6ZQp0aHJlZS1iYXJzEXRodW1ic2Rvd24tZmlsbGVkCnRodW1ic2Rvd24PdGh1bWJzdXAtZmlsbGVkCHRodW1ic3VwBXRvb2xzBXRyYXNoDXRyaWFuZ2xlLWRvd24NdHJpYW5nbGUtbGVmdA50cmlhbmdsZS1yaWdodAt0cmlhbmdsZS11cAd0d2l0dGVyEnR5cGUtaGllcmFyY2h5LXN1YhR0eXBlLWhpZXJhcmNoeS1zdXBlcg50eXBlLWhpZXJhcmNoeQZ1bmZvbGQTdW5ncm91cC1ieS1yZWYtdHlwZQZ1bmxvY2sGdW5tdXRlCnVudmVyaWZpZWQOdmFyaWFibGUtZ3JvdXAPdmVyaWZpZWQtZmlsbGVkCHZlcmlmaWVkCHZlcnNpb25zCXZtLWFjdGl2ZQp2bS1jb25uZWN0CnZtLW91dGxpbmUKdm0tcnVubmluZwJ2bQJ2cg92c2NvZGUtaW5zaWRlcnMGdnNjb2RlBHdhbmQHd2FybmluZwV3YXRjaAp3aGl0ZXNwYWNlCndob2xlLXdvcmQGd2luZG93CXdvcmQtd3JhcBF3b3Jrc3BhY2UtdHJ1c3RlZBF3b3Jrc3BhY2UtdW5rbm93bhN3b3Jrc3BhY2UtdW50cnVzdGVkB3pvb20taW4Iem9vbS1vdXQAAAA=) format("truetype")}.codicon[class*=codicon-]{font:16px/1 codicon;display:inline-block;text-decoration:none;text-rendering:auto;text-align:center;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}.codicon-wrench-subaction{opacity:0.5}@-webkit-keyframes codicon-spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes codicon-spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.codicon-sync.codicon-modifier-spin,.codicon-loading.codicon-modifier-spin,.codicon-gear.codicon-modifier-spin,.codicon-notebook-state-executing.codicon-modifier-spin{-webkit-animation:codicon-spin 1.5s steps(30) infinite;animation:codicon-spin 1.5s steps(30) infinite}.codicon-modifier-disabled{opacity:0.4}.codicon-loading,.codicon-tree-item-loading:before{-webkit-animation-duration:1s !important;animation-duration:1s !important;-webkit-animation-timing-function:cubic-bezier(0.53, 0.21, 0.29, 0.67) !important;animation-timing-function:cubic-bezier(0.53, 0.21, 0.29, 0.67) !important}.monaco-editor .codicon.codicon-symbol-array,.monaco-workbench .codicon.codicon-symbol-array{color:var(--vscode-symbolIcon-arrayForeground)}.monaco-editor .codicon.codicon-symbol-boolean,.monaco-workbench .codicon.codicon-symbol-boolean{color:var(--vscode-symbolIcon-booleanForeground)}.monaco-editor .codicon.codicon-symbol-class,.monaco-workbench .codicon.codicon-symbol-class{color:var(--vscode-symbolIcon-classForeground)}.monaco-editor .codicon.codicon-symbol-method,.monaco-workbench .codicon.codicon-symbol-method{color:var(--vscode-symbolIcon-methodForeground)}.monaco-editor .codicon.codicon-symbol-color,.monaco-workbench .codicon.codicon-symbol-color{color:var(--vscode-symbolIcon-colorForeground)}.monaco-editor .codicon.codicon-symbol-constant,.monaco-workbench .codicon.codicon-symbol-constant{color:var(--vscode-symbolIcon-constantForeground)}.monaco-editor .codicon.codicon-symbol-constructor,.monaco-workbench .codicon.codicon-symbol-constructor{color:var(--vscode-symbolIcon-constructorForeground)}.monaco-editor .codicon.codicon-symbol-value,.monaco-workbench .codicon.codicon-symbol-value,.monaco-editor .codicon.codicon-symbol-enum,.monaco-workbench .codicon.codicon-symbol-enum{color:var(--vscode-symbolIcon-enumeratorForeground)}.monaco-editor .codicon.codicon-symbol-enum-member,.monaco-workbench .codicon.codicon-symbol-enum-member{color:var(--vscode-symbolIcon-enumeratorMemberForeground)}.monaco-editor .codicon.codicon-symbol-event,.monaco-workbench .codicon.codicon-symbol-event{color:var(--vscode-symbolIcon-eventForeground)}.monaco-editor .codicon.codicon-symbol-field,.monaco-workbench .codicon.codicon-symbol-field{color:var(--vscode-symbolIcon-fieldForeground)}.monaco-editor .codicon.codicon-symbol-file,.monaco-workbench .codicon.codicon-symbol-file{color:var(--vscode-symbolIcon-fileForeground)}.monaco-editor .codicon.codicon-symbol-folder,.monaco-workbench .codicon.codicon-symbol-folder{color:var(--vscode-symbolIcon-folderForeground)}.monaco-editor .codicon.codicon-symbol-function,.monaco-workbench .codicon.codicon-symbol-function{color:var(--vscode-symbolIcon-functionForeground)}.monaco-editor .codicon.codicon-symbol-interface,.monaco-workbench .codicon.codicon-symbol-interface{color:var(--vscode-symbolIcon-interfaceForeground)}.monaco-editor .codicon.codicon-symbol-key,.monaco-workbench .codicon.codicon-symbol-key{color:var(--vscode-symbolIcon-keyForeground)}.monaco-editor .codicon.codicon-symbol-keyword,.monaco-workbench .codicon.codicon-symbol-keyword{color:var(--vscode-symbolIcon-keywordForeground)}.monaco-editor .codicon.codicon-symbol-module,.monaco-workbench .codicon.codicon-symbol-module{color:var(--vscode-symbolIcon-moduleForeground)}.monaco-editor .codicon.codicon-symbol-namespace,.monaco-workbench .codicon.codicon-symbol-namespace{color:var(--vscode-symbolIcon-namespaceForeground)}.monaco-editor .codicon.codicon-symbol-null,.monaco-workbench .codicon.codicon-symbol-null{color:var(--vscode-symbolIcon-nullForeground)}.monaco-editor .codicon.codicon-symbol-number,.monaco-workbench .codicon.codicon-symbol-number{color:var(--vscode-symbolIcon-numberForeground)}.monaco-editor .codicon.codicon-symbol-object,.monaco-workbench .codicon.codicon-symbol-object{color:var(--vscode-symbolIcon-objectForeground)}.monaco-editor .codicon.codicon-symbol-operator,.monaco-workbench .codicon.codicon-symbol-operator{color:var(--vscode-symbolIcon-operatorForeground)}.monaco-editor .codicon.codicon-symbol-package,.monaco-workbench .codicon.codicon-symbol-package{color:var(--vscode-symbolIcon-packageForeground)}.monaco-editor .codicon.codicon-symbol-property,.monaco-workbench .codicon.codicon-symbol-property{color:var(--vscode-symbolIcon-propertyForeground)}.monaco-editor .codicon.codicon-symbol-reference,.monaco-workbench .codicon.codicon-symbol-reference{color:var(--vscode-symbolIcon-referenceForeground)}.monaco-editor .codicon.codicon-symbol-snippet,.monaco-workbench .codicon.codicon-symbol-snippet{color:var(--vscode-symbolIcon-snippetForeground)}.monaco-editor .codicon.codicon-symbol-string,.monaco-workbench .codicon.codicon-symbol-string{color:var(--vscode-symbolIcon-stringForeground)}.monaco-editor .codicon.codicon-symbol-struct,.monaco-workbench .codicon.codicon-symbol-struct{color:var(--vscode-symbolIcon-structForeground)}.monaco-editor .codicon.codicon-symbol-text,.monaco-workbench .codicon.codicon-symbol-text{color:var(--vscode-symbolIcon-textForeground)}.monaco-editor .codicon.codicon-symbol-type-parameter,.monaco-workbench .codicon.codicon-symbol-type-parameter{color:var(--vscode-symbolIcon-typeParameterForeground)}.monaco-editor .codicon.codicon-symbol-unit,.monaco-workbench .codicon.codicon-symbol-unit{color:var(--vscode-symbolIcon-unitForeground)}.monaco-editor .codicon.codicon-symbol-variable,.monaco-workbench .codicon.codicon-symbol-variable{color:var(--vscode-symbolIcon-variableForeground)}.monaco-editor .lightBulbWidget{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.monaco-editor .lightBulbWidget:hover{cursor:pointer}.monaco-editor .lightBulbWidget.codicon-light-bulb,.monaco-editor .lightBulbWidget.codicon-lightbulb-sparkle{color:var(--vscode-editorLightBulb-foreground)}.monaco-editor .lightBulbWidget.codicon-lightbulb-autofix,.monaco-editor .lightBulbWidget.codicon-lightbulb-sparkle-autofix{color:var(--vscode-editorLightBulbAutoFix-foreground, var(--vscode-editorLightBulb-foreground))}.monaco-editor .lightBulbWidget.codicon-sparkle-filled{color:var(--vscode-editorLightBulbAi-foreground, var(--vscode-icon-foreground))}.monaco-editor .lightBulbWidget:before{position:relative;z-index:2}.monaco-editor .lightBulbWidget:after{position:absolute;top:0;left:0;content:"";display:block;width:100%;height:100%;opacity:0.3;background-color:var(--vscode-editor-background);z-index:1}.action-widget{font-size:13px;min-width:160px;max-width:80vw;z-index:40;display:block;width:100%;border:1px solid var(--vscode-editorWidget-border) !important;border-radius:2px;background-color:var(--vscode-editorWidget-background);color:var(--vscode-editorWidget-foreground)}.context-view-block{position:fixed;cursor:initial;left:0;top:0;width:100%;height:100%;z-index:-1}.context-view-pointerBlock{position:fixed;cursor:initial;left:0;top:0;width:100%;height:100%;z-index:2}.action-widget .monaco-list{-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none;border:none !important;border-width:0 !important}.action-widget .monaco-list:focus:before{outline:0 !important}.action-widget .monaco-list .monaco-scrollable-element{overflow:visible}.action-widget .monaco-list .monaco-list-row{padding:0 10px;white-space:nowrap;cursor:pointer;-ms-touch-action:none;touch-action:none;width:100%}.action-widget .monaco-list .monaco-list-row.action.focused:not(.option-disabled){background-color:var(--vscode-quickInputList-focusBackground) !important;color:var(--vscode-quickInputList-focusForeground);outline:1px solid var(--vscode-menu-selectionBorder, transparent);outline-offset:-1px}.action-widget .monaco-list-row.group-header{color:var(--vscode-descriptionForeground) !important;font-weight:600}.action-widget .monaco-list .group-header,.action-widget .monaco-list .option-disabled,.action-widget .monaco-list .option-disabled:before,.action-widget .monaco-list .option-disabled .focused,.action-widget .monaco-list .option-disabled .focused:before{cursor:default !important;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent !important;outline:0 solid !important}.action-widget .monaco-list-row.action{display:-ms-flexbox;display:flex;gap:6px;-ms-flex-align:center;align-items:center}.action-widget .monaco-list-row.action.option-disabled,.action-widget .monaco-list:focus .monaco-list-row.focused.action.option-disabled,.action-widget .monaco-list-row.action.option-disabled .codicon,.action-widget .monaco-list:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused).option-disabled{color:var(--vscode-disabledForeground)}.action-widget .monaco-list-row.action:not(.option-disabled) .codicon{color:inherit}.action-widget .monaco-list-row.action .title{-ms-flex:1;flex:1;overflow:hidden;text-overflow:ellipsis}.action-widget .monaco-list-row.action .monaco-keybinding>.monaco-keybinding-key{background-color:var(--vscode-keybindingLabel-background);color:var(--vscode-keybindingLabel-foreground);border-style:solid;border-width:1px;border-radius:3px;border-color:var(--vscode-keybindingLabel-border);border-bottom-color:var(--vscode-keybindingLabel-bottomBorder);-webkit-box-shadow:inset 0 -1px 0 var(--vscode-widget-shadow);box-shadow:inset 0 -1px 0 var(--vscode-widget-shadow)}.action-widget .action-widget-action-bar{background-color:var(--vscode-editorHoverWidget-statusBarBackground);border-top:1px solid var(--vscode-editorHoverWidget-border)}.action-widget .action-widget-action-bar:before{display:block;content:"";width:100%}.action-widget .action-widget-action-bar .actions-container{padding:0 8px}.action-widget-action-bar .action-label{color:var(--vscode-textLink-activeForeground);font-size:12px;line-height:22px;padding:0;pointer-events:all}.action-widget-action-bar .action-item{margin-right:16px;pointer-events:none}.action-widget-action-bar .action-label:hover{background-color:transparent !important}.monaco-action-bar .actions-container.highlight-toggled .action-label.checked{background:var(--vscode-actionBar-toggledBackground) !important}.monaco-editor .codelens-decoration{overflow:hidden;display:inline-block;text-overflow:ellipsis;white-space:nowrap;color:var(--vscode-editorCodeLens-foreground);line-height:var(--vscode-editorCodeLens-lineHeight);font-size:var(--vscode-editorCodeLens-fontSize);padding-right:calc(var(--vscode-editorCodeLens-fontSize) * 0.5);-webkit-font-feature-settings:var(--vscode-editorCodeLens-fontFeatureSettings);font-feature-settings:var(--vscode-editorCodeLens-fontFeatureSettings);font-family:var(--vscode-editorCodeLens-fontFamily), var(--vscode-editorCodeLens-fontFamilyDefault)}.monaco-editor .codelens-decoration>span,.monaco-editor .codelens-decoration>a{-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none;white-space:nowrap;vertical-align:sub}.monaco-editor .codelens-decoration>a{text-decoration:none}.monaco-editor .codelens-decoration>a:hover{cursor:pointer;color:var(--vscode-editorLink-activeForeground) !important}.monaco-editor .codelens-decoration>a:hover .codicon{color:var(--vscode-editorLink-activeForeground) !important}.monaco-editor .codelens-decoration .codicon{vertical-align:middle;color:currentColor !important;color:var(--vscode-editorCodeLens-foreground);line-height:var(--vscode-editorCodeLens-lineHeight);font-size:var(--vscode-editorCodeLens-fontSize)}.monaco-editor .codelens-decoration>a:hover .codicon:before{cursor:pointer}@-webkit-keyframes fadein{0%{opacity:0;visibility:visible}to{opacity:1}}@keyframes fadein{0%{opacity:0;visibility:visible}to{opacity:1}}.monaco-editor .codelens-decoration.fadein{-webkit-animation:fadein 0.1s linear;animation:fadein 0.1s linear}.colorpicker-widget{height:190px;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}.colorpicker-color-decoration,.hc-light .colorpicker-color-decoration{border:solid 0.1em #000;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0.1em 0.2em 0;width:0.8em;height:0.8em;line-height:0.8em;display:inline-block;cursor:pointer}.hc-black .colorpicker-color-decoration,.vs-dark .colorpicker-color-decoration{border:solid 0.1em #eee}.colorpicker-header{display:-ms-flexbox;display:flex;height:24px;position:relative;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=);background-size:9px 9px;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:pixelated}.colorpicker-header .picked-color{width:240px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;line-height:24px;cursor:pointer;color:#fff;-ms-flex:1;flex:1;white-space:nowrap;overflow:hidden}.colorpicker-header .picked-color .picked-color-presentation{white-space:nowrap;margin-left:5px;margin-right:5px}.colorpicker-header .picked-color .codicon{color:inherit;font-size:14px}.colorpicker-header .picked-color.light{color:#000}.colorpicker-header .original-color{width:74px;z-index:inherit;cursor:pointer}.standalone-colorpicker{color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border)}.colorpicker-header.standalone-colorpicker{border-bottom:none}.colorpicker-header .close-button{cursor:pointer;background-color:var(--vscode-editorHoverWidget-background);border-left:1px solid var(--vscode-editorHoverWidget-border)}.colorpicker-header .close-button-inner-div{width:100%;height:100%;text-align:center}.colorpicker-header .close-button-inner-div:hover{background-color:var(--vscode-toolbar-hoverBackground)}.colorpicker-header .close-icon{padding:3px}.colorpicker-body{display:-ms-flexbox;display:flex;padding:8px;position:relative}.colorpicker-body .saturation-wrap{overflow:hidden;height:150px;position:relative;min-width:220px;-ms-flex:1;flex:1}.colorpicker-body .saturation-box{height:150px;position:absolute}.colorpicker-body .saturation-selection{width:9px;height:9px;margin:-5px 0 0 -5px;border:1px solid rgb(255, 255, 255);border-radius:100%;-webkit-box-shadow:0 0 2px rgba(0, 0, 0, 0.8);box-shadow:0 0 2px rgba(0, 0, 0, 0.8);position:absolute}.colorpicker-body .strip{width:25px;height:150px}.colorpicker-body .standalone-strip{width:25px;height:122px}.colorpicker-body .hue-strip{position:relative;margin-left:8px;cursor:-webkit-grab;cursor:grab;background:-webkit-gradient(linear, left top, left bottom, from(red), color-stop(17%, #ff0), color-stop(33%, #0f0), color-stop(#0ff), color-stop(67%, #00f), color-stop(83%, #f0f), to(red));background:linear-gradient(to bottom, red, #ff0 17%, #0f0 33%, #0ff, #00f 67%, #f0f 83%, red)}.colorpicker-body .opacity-strip{position:relative;margin-left:8px;cursor:-webkit-grab;cursor:grab;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=);background-size:9px 9px;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:pixelated}.colorpicker-body .strip.grabbing{cursor:-webkit-grabbing;cursor:grabbing}.colorpicker-body .slider{position:absolute;top:0;left:-2px;width:calc(100% + 4px);height:4px;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid rgba(255, 255, 255, 0.71);-webkit-box-shadow:0 0 1px rgba(0, 0, 0, 0.8509803922);box-shadow:0 0 1px rgba(0, 0, 0, 0.8509803922)}.colorpicker-body .strip .overlay{height:150px;pointer-events:none}.colorpicker-body .standalone-strip .standalone-overlay{height:122px;pointer-events:none}.standalone-colorpicker-body{display:block;border:1px solid transparent;border-bottom:1px solid var(--vscode-editorHoverWidget-border);overflow:hidden}.colorpicker-body .insert-button{position:absolute;height:20px;width:58px;padding:0;right:8px;bottom:8px;background:var(--vscode-button-background);color:var(--vscode-button-foreground);border-radius:2px;border:none;cursor:pointer}.colorpicker-body .insert-button:hover{background:var(--vscode-button-hoverBackground)}.monaco-editor .goto-definition-link{text-decoration:underline;cursor:pointer;color:var(--vscode-editorLink-activeForeground) !important}.monaco-editor .peekview-widget .head{-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.monaco-editor .peekview-widget .head .peekview-title{display:-ms-flexbox;display:flex;-ms-flex-align:baseline;align-items:baseline;font-size:13px;margin-left:20px;min-width:0;text-overflow:ellipsis;overflow:hidden}.monaco-editor .peekview-widget .head .peekview-title.clickable{cursor:pointer}.monaco-editor .peekview-widget .head .peekview-title .dirname:not(:empty){font-size:0.9em;margin-left:0.5em}.monaco-editor .peekview-widget .head .peekview-title .meta{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.monaco-editor .peekview-widget .head .peekview-title .dirname,.monaco-editor .peekview-widget .head .peekview-title .filename{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-editor .peekview-widget .head .peekview-title .meta:not(:empty):before{content:"-";padding:0 0.3em}.monaco-editor .peekview-widget .head .peekview-actions{-ms-flex:1;flex:1;text-align:right;padding-right:2px}.monaco-editor .peekview-widget .head .peekview-actions>.monaco-action-bar{display:inline-block}.monaco-editor .peekview-widget .head .peekview-actions>.monaco-action-bar,.monaco-editor .peekview-widget .head .peekview-actions>.monaco-action-bar>.actions-container{height:100%}.monaco-editor .peekview-widget>.body{border-top:1px solid;position:relative}.monaco-editor .peekview-widget .head .peekview-title .codicon{margin-right:4px;-ms-flex-item-align:center;align-self:center}.monaco-editor .peekview-widget .monaco-list .monaco-list-row.focused .codicon{color:inherit !important}.monaco-editor .zone-widget{position:absolute;z-index:10}.monaco-editor .zone-widget .zone-widget-container{border-top-style:solid;border-bottom-style:solid;border-top-width:0;border-bottom-width:0;position:relative}.monaco-editor .zone-widget .zone-widget-container.reference-zone-widget{border-top-width:1px;border-bottom-width:1px}.monaco-editor .reference-zone-widget .inline{display:inline-block;vertical-align:top}.monaco-editor .reference-zone-widget .messages{height:100%;width:100%;text-align:center;padding:3em 0}.monaco-editor .reference-zone-widget .ref-tree{line-height:23px;background-color:var(--vscode-peekViewResult-background);color:var(--vscode-peekViewResult-lineForeground)}.monaco-editor .reference-zone-widget .ref-tree .reference{text-overflow:ellipsis;overflow:hidden}.monaco-editor .reference-zone-widget .ref-tree .reference-file{display:-ms-inline-flexbox;display:inline-flex;width:100%;height:100%;color:var(--vscode-peekViewResult-fileForeground)}.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .selected .reference-file{color:inherit !important}.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows>.monaco-list-row.selected:not(.highlighted){background-color:var(--vscode-peekViewResult-selectionBackground);color:var(--vscode-peekViewResult-selectionForeground) !important}.monaco-editor .reference-zone-widget .ref-tree .reference-file .count{margin-right:12px;margin-left:auto}.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight{background-color:var(--vscode-peekViewResult-matchHighlightBackground)}.monaco-editor .reference-zone-widget .preview .reference-decoration{background-color:var(--vscode-peekViewEditor-matchHighlightBackground);border:2px solid var(--vscode-peekViewEditor-matchHighlightBorder);-webkit-box-sizing:border-box;box-sizing:border-box}.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input{background-color:var(--vscode-peekViewEditor-background)}.monaco-editor .reference-zone-widget .preview .monaco-editor .margin{background-color:var(--vscode-peekViewEditorGutter-background)}.monaco-editor.hc-black .reference-zone-widget .ref-tree .reference-file,.monaco-editor.hc-light .reference-zone-widget .ref-tree .reference-file{font-weight:700}.monaco-editor.hc-black .reference-zone-widget .ref-tree .referenceMatch .highlight,.monaco-editor.hc-light .reference-zone-widget .ref-tree .referenceMatch .highlight{border:1px dotted var(--vscode-contrastActiveBorder, transparent);-webkit-box-sizing:border-box;box-sizing:border-box}.monaco-editor .peekview-widget .head .peekview-title .severity-icon{display:inline-block;vertical-align:text-top;margin-right:4px}.monaco-editor .marker-widget{text-overflow:ellipsis;white-space:nowrap}.monaco-editor .marker-widget>.stale{opacity:0.6;font-style:italic}.monaco-editor .marker-widget .title{display:inline-block;padding-right:5px}.monaco-editor .marker-widget .descriptioncontainer{position:absolute;white-space:pre;-moz-user-select:text;-ms-user-select:text;user-select:text;-webkit-user-select:text;padding:8px 12px 0 20px}.monaco-editor .marker-widget .descriptioncontainer .message{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.monaco-editor .marker-widget .descriptioncontainer .message .details{padding-left:6px}.monaco-editor .marker-widget .descriptioncontainer .message .source,.monaco-editor .marker-widget .descriptioncontainer .message span.code{opacity:0.6}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link{opacity:0.6;color:inherit}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link:before{content:"("}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link:after{content:")"}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link>span{text-decoration:underline;border-bottom:1px solid transparent;text-underline-position:under;color:var(--vscode-textLink-activeForeground)}.monaco-editor .marker-widget .descriptioncontainer .filename{cursor:pointer;color:var(--vscode-textLink-activeForeground)}.monaco-editor .zone-widget .codicon.codicon-error,.markers-panel .marker-icon.error,.markers-panel .marker-icon .codicon.codicon-error,.text-search-provider-messages .providerMessage .codicon.codicon-error,.extensions-viewlet>.extensions .codicon.codicon-error,.extension-editor .codicon.codicon-error,.preferences-editor .codicon.codicon-error{color:var(--vscode-problemsErrorIcon-foreground)}.monaco-editor .zone-widget .codicon.codicon-warning,.markers-panel .marker-icon.warning,.markers-panel .marker-icon .codicon.codicon-warning,.text-search-provider-messages .providerMessage .codicon.codicon-warning,.extensions-viewlet>.extensions .codicon.codicon-warning,.extension-editor .codicon.codicon-warning,.preferences-editor .codicon.codicon-warning{color:var(--vscode-problemsWarningIcon-foreground)}.monaco-editor .zone-widget .codicon.codicon-info,.markers-panel .marker-icon.info,.markers-panel .marker-icon .codicon.codicon-info,.text-search-provider-messages .providerMessage .codicon.codicon-info,.extensions-viewlet>.extensions .codicon.codicon-info,.extension-editor .codicon.codicon-info,.preferences-editor .codicon.codicon-info{color:var(--vscode-problemsInfoIcon-foreground)}.monaco-editor .inlineSuggestionsHints.withBorder{z-index:39;color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border)}.monaco-editor .inlineSuggestionsHints a,.monaco-editor .inlineSuggestionsHints a:hover{color:var(--vscode-foreground)}.monaco-editor .inlineSuggestionsHints .keybinding{display:-ms-flexbox;display:flex;margin-left:4px;opacity:0.6}.monaco-editor .inlineSuggestionsHints .keybinding .monaco-keybinding-key{font-size:8px;padding:2px 3px}.monaco-editor .inlineSuggestionsHints .availableSuggestionCount a{display:-ms-flexbox;display:flex;min-width:19px;-ms-flex-pack:center;justify-content:center}.monaco-editor .inlineSuggestionStatusBarItemLabel{margin-right:2px}.monaco-editor .hoverHighlight{background-color:var(--vscode-editor-hoverHighlightBackground)}.monaco-editor .monaco-hover{color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);border-radius:3px}.monaco-editor .monaco-hover a{color:var(--vscode-textLink-foreground)}.monaco-editor .monaco-hover a:hover{color:var(--vscode-textLink-activeForeground)}.monaco-editor .monaco-hover .hover-row .actions{background-color:var(--vscode-editorHoverWidget-statusBarBackground)}.monaco-editor .monaco-hover code{background-color:var(--vscode-textCodeBlock-background)}.monaco-editor.vs .dnd-target,.monaco-editor.hc-light .dnd-target{border-right:2px dotted black;color:#fff}.monaco-editor.vs-dark .dnd-target{border-right:2px dotted #aeafad;color:#51504f}.monaco-editor.hc-black .dnd-target{border-right:2px dotted #fff;color:#000}.monaco-editor.mouse-default .view-lines,.monaco-editor.vs-dark.mac.mouse-default .view-lines,.monaco-editor.hc-black.mac.mouse-default .view-lines,.monaco-editor.hc-light.mac.mouse-default .view-lines{cursor:default}.monaco-editor.mouse-copy .view-lines,.monaco-editor.vs-dark.mac.mouse-copy .view-lines,.monaco-editor.hc-black.mac.mouse-copy .view-lines,.monaco-editor.hc-light.mac.mouse-copy .view-lines{cursor:copy}.monaco-editor .findOptionsWidget{background-color:var(--vscode-editorWidget-background);color:var(--vscode-editorWidget-foreground);-webkit-box-shadow:0 0 8px 2px var(--vscode-widget-shadow);box-shadow:0 0 8px 2px var(--vscode-widget-shadow);border:2px solid var(--vscode-contrastBorder)}.monaco-editor .find-widget{position:absolute;z-index:35;height:33px;overflow:hidden;line-height:19px;-webkit-transition:-webkit-transform 0.2s linear;transition:-webkit-transform 0.2s linear;transition:transform 0.2s linear;transition:transform 0.2s linear, -webkit-transform 0.2s linear;padding:0 4px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transform:translateY(calc(-100% - 10px));transform:translateY(calc(-100% - 10px));-webkit-box-shadow:0 0 8px 2px var(--vscode-widget-shadow);box-shadow:0 0 8px 2px var(--vscode-widget-shadow);color:var(--vscode-editorWidget-foreground);border-left:1px solid var(--vscode-widget-border);border-right:1px solid var(--vscode-widget-border);border-bottom:1px solid var(--vscode-widget-border);border-bottom-left-radius:4px;border-bottom-right-radius:4px;background-color:var(--vscode-editorWidget-background)}.monaco-workbench.reduce-motion .monaco-editor .find-widget{-webkit-transition:-webkit-transform 0ms linear;transition:-webkit-transform 0ms linear;transition:transform 0ms linear;transition:transform 0ms linear, -webkit-transform 0ms linear}.monaco-editor .find-widget textarea{margin:0}.monaco-editor .find-widget.hiddenEditor{display:none}.monaco-editor .find-widget.replaceToggled>.replace-part{display:-ms-flexbox;display:flex}.monaco-editor .find-widget.visible{-webkit-transform:translateY(0);transform:translateY(0)}.monaco-editor .find-widget .monaco-inputbox.synthetic-focus{outline:1px solid -webkit-focus-ring-color;outline-offset:-1px;outline-color:var(--vscode-focusBorder)}.monaco-editor .find-widget .monaco-inputbox .input{background-color:transparent;min-height:0}.monaco-editor .find-widget .monaco-findInput .input{font-size:13px}.monaco-editor .find-widget>.find-part,.monaco-editor .find-widget>.replace-part{margin:3px 25px 0 17px;font-size:12px;display:-ms-flexbox;display:flex}.monaco-editor .find-widget>.find-part .monaco-inputbox,.monaco-editor .find-widget>.replace-part .monaco-inputbox{min-height:25px}.monaco-editor .find-widget>.replace-part .monaco-inputbox>.ibwrapper>.mirror{padding-right:22px}.monaco-editor .find-widget>.find-part .monaco-inputbox>.ibwrapper>.input,.monaco-editor .find-widget>.find-part .monaco-inputbox>.ibwrapper>.mirror,.monaco-editor .find-widget>.replace-part .monaco-inputbox>.ibwrapper>.input,.monaco-editor .find-widget>.replace-part .monaco-inputbox>.ibwrapper>.mirror{padding-top:2px;padding-bottom:2px}.monaco-editor .find-widget>.find-part .find-actions{height:25px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.monaco-editor .find-widget>.replace-part .replace-actions{height:25px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.monaco-editor .find-widget .monaco-findInput{vertical-align:middle;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1}.monaco-editor .find-widget .monaco-findInput .monaco-scrollable-element{width:100%}.monaco-editor .find-widget .monaco-findInput .monaco-scrollable-element .scrollbar.vertical{opacity:0}.monaco-editor .find-widget .matchesCount{display:-ms-flexbox;display:flex;-ms-flex:initial;flex:initial;margin:0 0 0 3px;padding:2px 0 0 2px;height:25px;vertical-align:middle;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:center;line-height:23px}.monaco-editor .find-widget .button{width:16px;height:16px;padding:3px;border-radius:5px;-ms-flex:initial;flex:initial;margin-left:3px;background-position:center center;background-repeat:no-repeat;cursor:pointer;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.monaco-editor .find-widget .codicon-find-selection{width:22px;height:22px;padding:3px;border-radius:5px}.monaco-editor .find-widget .button.left{margin-left:0;margin-right:3px}.monaco-editor .find-widget .button.wide{width:auto;padding:1px 6px;top:-1px}.monaco-editor .find-widget .button.toggle{position:absolute;top:0;left:3px;width:18px;height:100%;border-radius:0;-webkit-box-sizing:border-box;box-sizing:border-box}.monaco-editor .find-widget .button.toggle.disabled{display:none}.monaco-editor .find-widget .disabled{color:var(--vscode-disabledForeground);cursor:default}.monaco-editor .find-widget>.replace-part{display:none}.monaco-editor .find-widget>.replace-part>.monaco-findInput{position:relative;display:-ms-flexbox;display:flex;vertical-align:middle;-ms-flex:auto;flex:auto;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0}.monaco-editor .find-widget>.replace-part>.monaco-findInput>.controls{position:absolute;top:3px;right:2px}.monaco-editor .find-widget.reduced-find-widget .matchesCount{display:none}.monaco-editor .find-widget.narrow-find-widget{max-width:257px !important}.monaco-editor .find-widget.collapsed-find-widget{max-width:170px !important}.monaco-editor .find-widget.collapsed-find-widget .button.previous,.monaco-editor .find-widget.collapsed-find-widget .button.next,.monaco-editor .find-widget.collapsed-find-widget .button.replace,.monaco-editor .find-widget.collapsed-find-widget .button.replace-all,.monaco-editor .find-widget.collapsed-find-widget>.find-part .monaco-findInput .controls{display:none}.monaco-editor .find-widget.no-results .matchesCount{color:var(--vscode-errorForeground)}.monaco-editor .findMatch{-webkit-animation-duration:0;animation-duration:0;-webkit-animation-name:inherit !important;animation-name:inherit !important;background-color:var(--vscode-editor-findMatchHighlightBackground)}.monaco-editor .currentFindMatch{background-color:var(--vscode-editor-findMatchBackground);border:2px solid var(--vscode-editor-findMatchBorder);padding:1px;-webkit-box-sizing:border-box;box-sizing:border-box}.monaco-editor .findScope{background-color:var(--vscode-editor-findRangeHighlightBackground)}.monaco-editor .find-widget .monaco-sash{left:0 !important;background-color:var(--vscode-editorWidget-resizeBorder, var(--vscode-editorWidget-border))}.monaco-editor.hc-black .find-widget .button:before{position:relative;top:1px;left:2px}.monaco-editor .find-widget .button:not(.disabled):hover,.monaco-editor .find-widget .codicon-find-selection:hover{background-color:var(--vscode-toolbar-hoverBackground) !important}.monaco-editor.findMatch{background-color:var(--vscode-editor-findMatchHighlightBackground)}.monaco-editor.currentFindMatch{background-color:var(--vscode-editor-findMatchBackground)}.monaco-editor.findScope{background-color:var(--vscode-editor-findRangeHighlightBackground)}.monaco-editor.findMatch{background-color:var(--vscode-editorWidget-background)}.monaco-editor .find-widget>.button.codicon-widget-close{position:absolute;top:5px;right:4px}.monaco-editor .margin-view-overlays .codicon-folding-manual-collapsed,.monaco-editor .margin-view-overlays .codicon-folding-manual-expanded,.monaco-editor .margin-view-overlays .codicon-folding-expanded,.monaco-editor .margin-view-overlays .codicon-folding-collapsed{cursor:pointer;opacity:0;-webkit-transition:opacity 0.5s;transition:opacity 0.5s;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;font-size:140%;margin-left:2px}.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-manual-collapsed,.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-manual-expanded,.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-expanded,.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-collapsed{-webkit-transition:initial;transition:initial}.monaco-editor .margin-view-overlays:hover .codicon,.monaco-editor .margin-view-overlays .codicon.codicon-folding-collapsed,.monaco-editor .margin-view-overlays .codicon.codicon-folding-manual-collapsed,.monaco-editor .margin-view-overlays .codicon.alwaysShowFoldIcons{opacity:1}.monaco-editor .inline-folded:after{color:gray;margin:0.1em 0.2em 0;content:"⋯";display:inline;line-height:1em;cursor:pointer}.monaco-editor .folded-background{background-color:var(--vscode-editor-foldBackground)}.monaco-editor .cldr.codicon.codicon-folding-expanded,.monaco-editor .cldr.codicon.codicon-folding-collapsed,.monaco-editor .cldr.codicon.codicon-folding-manual-expanded,.monaco-editor .cldr.codicon.codicon-folding-manual-collapsed{color:var(--vscode-editorGutter-foldingControlForeground) !important}.monaco-editor .suggest-preview-additional-widget{white-space:nowrap}.monaco-editor .suggest-preview-additional-widget .content-spacer{color:transparent;white-space:pre}.monaco-editor .suggest-preview-additional-widget .button{display:inline-block;cursor:pointer;text-decoration:underline;text-underline-position:under}.monaco-editor .ghost-text-hidden{opacity:0;font-size:0}.monaco-editor .ghost-text-decoration,.monaco-editor .suggest-preview-text .ghost-text{font-style:italic}.monaco-editor .ghost-text-decoration,.monaco-editor .ghost-text-decoration-preview,.monaco-editor .suggest-preview-text .ghost-text{color:var(--vscode-editorGhostText-foreground) !important;background-color:var(--vscode-editorGhostText-background);border:1px solid var(--vscode-editorGhostText-border)}.monaco-editor .snippet-placeholder{min-width:2px;outline-style:solid;outline-width:1px;background-color:var(--vscode-editor-snippetTabstopHighlightBackground, transparent);outline-color:var(--vscode-editor-snippetTabstopHighlightBorder, transparent)}.monaco-editor .finish-snippet-placeholder{outline-style:solid;outline-width:1px;background-color:var(--vscode-editor-snippetFinalTabstopHighlightBackground, transparent);outline-color:var(--vscode-editor-snippetFinalTabstopHighlightBorder, transparent)}.monaco-editor .suggest-widget{width:430px;z-index:40;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;border-radius:3px}.monaco-editor .suggest-widget.message{-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center}.monaco-editor .suggest-widget,.monaco-editor .suggest-details{-ms-flex:0 1 auto;flex:0 1 auto;width:100%;border-style:solid;border-width:1px;border-color:var(--vscode-editorSuggestWidget-border);background-color:var(--vscode-editorSuggestWidget-background)}.monaco-editor.hc-black .suggest-widget,.monaco-editor.hc-black .suggest-details,.monaco-editor.hc-light .suggest-widget,.monaco-editor.hc-light .suggest-details{border-width:2px}.monaco-editor .suggest-widget .suggest-status-bar{-webkit-box-sizing:border-box;box-sizing:border-box;display:none;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:justify;justify-content:space-between;width:100%;font-size:80%;padding:0 4px;border-top:1px solid var(--vscode-editorSuggestWidget-border);overflow:hidden}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar{display:-ms-flexbox;display:flex}.monaco-editor .suggest-widget .suggest-status-bar .left{padding-right:8px}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-label{color:var(--vscode-editorSuggestWidgetStatus-foreground)}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-item:not(:last-of-type) .action-label{margin-right:0}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-item:not(:last-of-type) .action-label:after{content:", ";margin-right:0.3em}.monaco-editor .suggest-widget.with-status-bar .monaco-list .monaco-list-row>.contents>.main>.right>.readMore,.monaco-editor .suggest-widget.with-status-bar .monaco-list .monaco-list-row.focused.string-label>.contents>.main>.right>.readMore{display:none}.monaco-editor .suggest-widget.with-status-bar:not(.docs-side) .monaco-list .monaco-list-row:hover>.contents>.main>.right.can-expand-details>.details-label{width:100%}.monaco-editor .suggest-widget>.message{padding-left:22px}.monaco-editor .suggest-widget>.tree{height:100%;width:100%}.monaco-editor .suggest-widget .monaco-list{-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row{display:-ms-flexbox;display:flex;-mox-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;padding-right:10px;background-repeat:no-repeat;background-position:2px 2px;white-space:nowrap;cursor:pointer;-ms-touch-action:none;touch-action:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused{color:var(--vscode-editorSuggestWidget-selectedForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon{color:var(--vscode-editorSuggestWidget-selectedIconForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents{-ms-flex:1;flex:1;height:100%;overflow:hidden;padding-left:2px}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main{display:-ms-flexbox;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:pre;-ms-flex-pack:justify;justify-content:space-between}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right{display:-ms-flexbox;display:flex}.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.focused)>.contents>.main .monaco-icon-label{color:var(--vscode-editorSuggestWidget-foreground)}.monaco-editor .suggest-widget:not(.frozen) .monaco-highlighted-label .highlight{font-weight:700}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main .monaco-highlighted-label .highlight{color:var(--vscode-editorSuggestWidget-highlightForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused>.contents>.main .monaco-highlighted-label .highlight{color:var(--vscode-editorSuggestWidget-focusHighlightForeground)}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore:before{color:inherit;opacity:1;font-size:14px;cursor:pointer}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close{position:absolute;top:6px;right:2px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close:hover,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore:hover{opacity:1}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{opacity:0.7}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.signature-label{overflow:hidden;text-overflow:ellipsis;opacity:0.6}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.qualifier-label{margin-left:12px;opacity:0.4;font-size:85%;line-height:initial;text-overflow:ellipsis;overflow:hidden;-ms-flex-item-align:center;align-self:center}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{font-size:85%;margin-left:1.1em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label>.monaco-tokenized-source{display:inline}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{display:none}.monaco-editor .suggest-widget:not(.shows-details) .monaco-list .monaco-list-row.focused>.contents>.main>.right>.details-label{display:inline}.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.string-label)>.contents>.main>.right>.details-label,.monaco-editor .suggest-widget.docs-side .monaco-list .monaco-list-row.focused:not(.string-label)>.contents>.main>.right>.details-label{display:inline}.monaco-editor .suggest-widget:not(.docs-side) .monaco-list .monaco-list-row.focused:hover>.contents>.main>.right.can-expand-details>.details-label{width:calc(100% - 26px)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left{-ms-flex-negative:1;flex-shrink:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.monaco-icon-label{-ms-flex-negative:0;flex-shrink:0}.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.string-label)>.contents>.main>.left>.monaco-icon-label{max-width:100%}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.string-label>.contents>.main>.left>.monaco-icon-label{-ms-flex-negative:1;flex-shrink:1}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right{overflow:hidden;-ms-flex-negative:4;flex-shrink:4;max-width:70%}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore{display:inline-block;position:absolute;right:10px;width:18px;height:18px;visibility:hidden}.monaco-editor .suggest-widget.docs-side .monaco-list .monaco-list-row>.contents>.main>.right>.readMore{display:none !important}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.string-label>.contents>.main>.right>.readMore{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused.string-label>.contents>.main>.right>.readMore{display:inline-block}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused:hover>.contents>.main>.right>.readMore{visibility:visible}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label.deprecated{opacity:0.66;text-decoration:unset}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label.deprecated>.monaco-icon-label-container>.monaco-icon-name-container{text-decoration:line-through}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label:before{height:100%}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon{display:block;height:16px;width:16px;margin-left:2px;background-repeat:no-repeat;background-size:80%;background-position:center}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon.hide{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .suggest-icon{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;margin-right:4px}.monaco-editor .suggest-widget.no-icons .monaco-list .monaco-list-row .icon,.monaco-editor .suggest-widget.no-icons .monaco-list .monaco-list-row .suggest-icon:before{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon.customcolor .colorspan{margin:0 0 0 0.3em;border:0.1em solid #000;width:0.7em;height:0.7em;display:inline-block}.monaco-editor .suggest-details-container{z-index:41}.monaco-editor .suggest-details{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;cursor:default;color:var(--vscode-editorSuggestWidget-foreground)}.monaco-editor .suggest-details.focused{border-color:var(--vscode-focusBorder)}.monaco-editor .suggest-details a{color:var(--vscode-textLink-foreground)}.monaco-editor .suggest-details a:hover{color:var(--vscode-textLink-activeForeground)}.monaco-editor .suggest-details code{background-color:var(--vscode-textCodeBlock-background)}.monaco-editor .suggest-details.no-docs{display:none}.monaco-editor .suggest-details>.monaco-scrollable-element{-ms-flex:1;flex:1}.monaco-editor .suggest-details>.monaco-scrollable-element>.body{-webkit-box-sizing:border-box;box-sizing:border-box;height:100%;width:100%}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.type{-ms-flex:2;flex:2;overflow:hidden;text-overflow:ellipsis;opacity:0.7;white-space:pre;margin:0 24px 0 0;padding:4px 0 12px 5px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.type.auto-wrap{white-space:normal;word-break:break-all}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs{margin:0;padding:4px 5px;white-space:pre-wrap}.monaco-editor .suggest-details.no-type>.monaco-scrollable-element>.body>.docs{margin-right:24px;overflow:hidden}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs{padding:0;white-space:initial;min-height:calc(1rem + 8px)}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div,.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>span:not(:empty){padding:4px 5px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div>p:first-child{margin-top:0}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div>p:last-child{margin-bottom:0}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs .monaco-tokenized-source{white-space:pre}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs .code{white-space:pre-wrap;word-wrap:break-word}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs .codicon{vertical-align:sub}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>p:empty{display:none}.monaco-editor .suggest-details code{border-radius:3px;padding:0 0.4em}.monaco-editor .suggest-details ul,.monaco-editor .suggest-details ol{padding-left:20px}.monaco-editor .suggest-details p code{font-family:var(--monaco-monospace-font)}.monaco-editor.vs .valueSetReplacement{outline:solid 2px var(--vscode-editorBracketMatch-border)}.monaco-editor .linked-editing-decoration{background-color:var(--vscode-editor-linkedEditingBackground);min-width:1px}.monaco-editor .detected-link,.monaco-editor .detected-link-active{text-decoration:underline;text-underline-position:under}.monaco-editor .detected-link-active{cursor:pointer;color:var(--vscode-editorLink-activeForeground) !important}.monaco-editor .focused .selectionHighlight{background-color:var(--vscode-editor-selectionHighlightBackground);-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid var(--vscode-editor-selectionHighlightBorder)}.monaco-editor.hc-black .focused .selectionHighlight,.monaco-editor.hc-light .focused .selectionHighlight{border-style:dotted}.monaco-editor .wordHighlight{background-color:var(--vscode-editor-wordHighlightBackground);-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid var(--vscode-editor-wordHighlightBorder)}.monaco-editor.hc-black .wordHighlight,.monaco-editor.hc-light .wordHighlight{border-style:dotted}.monaco-editor .wordHighlightStrong{background-color:var(--vscode-editor-wordHighlightStrongBackground);-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid var(--vscode-editor-wordHighlightStrongBorder)}.monaco-editor.hc-black .wordHighlightStrong,.monaco-editor.hc-light .wordHighlightStrong{border-style:dotted}.monaco-editor .wordHighlightText{background-color:var(--vscode-editor-wordHighlightTextBackground);-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid var(--vscode-editor-wordHighlightTextBorder)}.monaco-editor.hc-black .wordHighlightText,.monaco-editor.hc-light .wordHighlightText{border-style:dotted}.monaco-editor .inline-edit-remove{background-color:var(--vscode-editorGhostText-background);font-style:italic;text-decoration:line-through}.monaco-editor .inline-edit-remove.backgroundColoring{background-color:var(--vscode-diffEditor-removedLineBackground)}.monaco-editor .inline-edit-hidden{opacity:0;font-size:0}.monaco-editor .inline-edit-decoration,.monaco-editor .suggest-preview-text .inline-edit{font-style:italic}.monaco-editor .inline-completion-text-to-replace{text-decoration:underline;text-underline-position:under}.monaco-editor .inline-edit-decoration,.monaco-editor .inline-edit-decoration-preview,.monaco-editor .suggest-preview-text .inline-edit{color:var(--vscode-editorGhostText-foreground) !important;background-color:var(--vscode-editorGhostText-background);border:1px solid var(--vscode-editorGhostText-border)}.monaco-editor .inlineEditHints.withBorder{z-index:39;color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border)}.monaco-editor .inlineEditHints a,.monaco-editor .inlineEditHints a:hover{color:var(--vscode-foreground)}.monaco-editor .inlineEditHints .keybinding{display:-ms-flexbox;display:flex;margin-left:4px;opacity:0.6}.monaco-editor .inlineEditHints .keybinding .monaco-keybinding-key{font-size:8px;padding:2px 3px}.monaco-editor .inlineEditStatusBarItemLabel{margin-right:2px}.monaco-editor .parameter-hints-widget{z-index:39;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;line-height:1.5em;cursor:default;color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border)}.hc-black .monaco-editor .parameter-hints-widget,.hc-light .monaco-editor .parameter-hints-widget{border-width:2px}.monaco-editor .parameter-hints-widget>.phwrapper{max-width:440px;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}.monaco-editor .parameter-hints-widget.multiple{min-height:3.3em;padding:0}.monaco-editor .parameter-hints-widget.multiple .body:before{content:"";display:block;height:100%;position:absolute;opacity:0.5;border-left:1px solid var(--vscode-editorHoverWidget-border)}.monaco-editor .parameter-hints-widget p,.monaco-editor .parameter-hints-widget ul{margin:8px 0}.monaco-editor .parameter-hints-widget .monaco-scrollable-element,.monaco-editor .parameter-hints-widget .body{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;min-height:100%}.monaco-editor .parameter-hints-widget .signature{padding:4px 5px;position:relative}.monaco-editor .parameter-hints-widget .signature.has-docs:after{content:"";display:block;position:absolute;left:0;width:100%;padding-top:4px;opacity:0.5;border-bottom:1px solid var(--vscode-editorHoverWidget-border)}.monaco-editor .parameter-hints-widget .docs{padding:0 10px 0 5px;white-space:pre-wrap}.monaco-editor .parameter-hints-widget .docs.empty{display:none}.monaco-editor .parameter-hints-widget .docs a{color:var(--vscode-textLink-foreground)}.monaco-editor .parameter-hints-widget .docs a:hover{color:var(--vscode-textLink-activeForeground);cursor:pointer}.monaco-editor .parameter-hints-widget .docs .markdown-docs{white-space:initial}.monaco-editor .parameter-hints-widget .docs code{font-family:var(--monaco-monospace-font);border-radius:3px;padding:0 0.4em;background-color:var(--vscode-textCodeBlock-background)}.monaco-editor .parameter-hints-widget .docs .monaco-tokenized-source,.monaco-editor .parameter-hints-widget .docs .code{white-space:pre-wrap}.monaco-editor .parameter-hints-widget .controls{display:none;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;min-width:22px;-ms-flex-pack:end;justify-content:flex-end}.monaco-editor .parameter-hints-widget.multiple .controls{display:-ms-flexbox;display:flex;padding:0 2px}.monaco-editor .parameter-hints-widget.multiple .button{width:16px;height:16px;background-repeat:no-repeat;cursor:pointer}.monaco-editor .parameter-hints-widget .button.previous{bottom:24px}.monaco-editor .parameter-hints-widget .overloads{text-align:center;height:12px;line-height:12px;font-family:var(--monaco-monospace-font)}.monaco-editor .parameter-hints-widget .signature .parameter.active{color:var(--vscode-editorHoverWidget-highlightForeground);font-weight:700}.monaco-editor .parameter-hints-widget .documentation-parameter>.parameter{font-weight:700;margin-right:0.5em}.monaco-editor .rename-box{z-index:100;color:inherit;border-radius:4px}.monaco-editor .rename-box.preview{padding:4px 4px 0}.monaco-editor .rename-box .rename-input{padding:3px;border-radius:2px;width:calc(100% - 8px)}.monaco-editor .rename-box .rename-label{display:none;opacity:0.8}.monaco-editor .rename-box.preview .rename-label{display:inherit}.monaco-editor .sticky-widget{overflow:hidden}.monaco-editor .sticky-widget-line-numbers{float:left;background-color:inherit}.monaco-editor .sticky-widget-lines-scrollable{display:inline-block;position:absolute;overflow:hidden;width:var(--vscode-editorStickyScroll-scrollableWidth);background-color:inherit}.monaco-editor .sticky-widget-lines{position:absolute;background-color:inherit}.monaco-editor .sticky-line-number,.monaco-editor .sticky-line-content{color:var(--vscode-editorLineNumber-foreground);white-space:nowrap;display:inline-block;position:absolute;background-color:inherit}.monaco-editor .sticky-line-number .codicon-folding-expanded,.monaco-editor .sticky-line-number .codicon-folding-collapsed{float:right;-webkit-transition:var(--vscode-editorStickyScroll-foldingOpacityTransition);transition:var(--vscode-editorStickyScroll-foldingOpacityTransition)}.monaco-editor .sticky-line-content{width:var(--vscode-editorStickyScroll-scrollableWidth);background-color:inherit;white-space:nowrap}.monaco-editor .sticky-line-number-inner{display:inline-block;text-align:right}.monaco-editor .sticky-widget{border-bottom:1px solid var(--vscode-editorStickyScroll-border)}.monaco-editor .sticky-line-content:hover{background-color:var(--vscode-editorStickyScrollHover-background);cursor:pointer}.monaco-editor .sticky-widget{width:100%;-webkit-box-shadow:var(--vscode-editorStickyScroll-shadow) 0 3px 2px -2px;box-shadow:var(--vscode-editorStickyScroll-shadow) 0 3px 2px -2px;z-index:4;background-color:var(--vscode-editorStickyScroll-background)}.monaco-editor .sticky-widget.peek{background-color:var(--vscode-peekViewEditorStickyScroll-background)}.monaco-editor .unicode-highlight{border:1px solid var(--vscode-editorUnicodeHighlight-border);background-color:var(--vscode-editorUnicodeHighlight-background);-webkit-box-sizing:border-box;box-sizing:border-box}.editor-banner{-webkit-box-sizing:border-box;box-sizing:border-box;cursor:default;width:100%;font-size:12px;display:-ms-flexbox;display:flex;overflow:visible;height:26px;background:var(--vscode-banner-background)}.editor-banner .icon-container{display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;padding:0 6px 0 10px}.editor-banner .icon-container.custom-icon{background-repeat:no-repeat;background-position:center center;background-size:16px;width:16px;padding:0;margin:0 6px 0 10px}.editor-banner .message-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;line-height:26px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.editor-banner .message-container p{-webkit-margin-before:0;margin-block-start:0;-webkit-margin-after:0;margin-block-end:0}.editor-banner .message-actions-container{-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:0;flex-shrink:0;line-height:26px;margin:0 4px}.editor-banner .message-actions-container a.monaco-button{width:inherit;margin:2px 8px;padding:0 12px}.editor-banner .message-actions-container a{padding:3px;margin-left:12px;text-decoration:underline}.editor-banner .action-container{padding:0 10px 0 6px}.editor-banner{background-color:var(--vscode-banner-background)}.editor-banner,.editor-banner .action-container .codicon,.editor-banner .message-actions-container .monaco-link{color:var(--vscode-banner-foreground)}.editor-banner .icon-container .codicon{color:var(--vscode-banner-iconForeground)}.monaco-link{color:var(--vscode-textLink-foreground)}.monaco-link:hover{color:var(--vscode-textLink-activeForeground)}.monaco-editor .iPadShowKeyboard{width:58px;min-width:0;height:36px;min-height:0;margin:0;padding:0;position:absolute;resize:none;overflow:hidden;background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjNDI0MjQyIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==) center center no-repeat;border:4px solid #f6f6f6;border-radius:4px}.monaco-editor.vs-dark .iPadShowKeyboard{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjQzVDNUM1Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==) center center no-repeat;border:4px solid #252526}.monaco-editor .tokens-inspect-widget{z-index:50;-moz-user-select:text;-ms-user-select:text;user-select:text;-webkit-user-select:text;padding:10px;color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border)}.monaco-editor.hc-black .tokens-inspect-widget,.monaco-editor.hc-light .tokens-inspect-widget{border-width:2px}.monaco-editor .tokens-inspect-widget .tokens-inspect-separator{height:1px;border:0;background-color:var(--vscode-editorHoverWidget-border)}.monaco-editor .tokens-inspect-widget .tm-token{font-family:var(--monaco-monospace-font)}.monaco-editor .tokens-inspect-widget .tm-token-length{font-weight:400;font-size:60%;float:right}.monaco-editor .tokens-inspect-widget .tm-metadata-table{width:100%}.monaco-editor .tokens-inspect-widget .tm-metadata-value{font-family:var(--monaco-monospace-font);text-align:right}.monaco-editor .tokens-inspect-widget .tm-token-type{font-family:var(--monaco-monospace-font)}ch-code-editor{display:grid;position:relative}.ch-code-editor-absolute-content{display:grid;position:absolute;inset:0}';const Iat=Fat;let Lat=0;const Rat=class{constructor(i){t(this,i);this.enableSplitViewResizing=true;this.language=undefined;this.mode="editor";this.modifiedValue=undefined;this.modifiedValueReadonly=true;this.renderSideBySide=true;this.value=undefined;this.readonly=undefined;this.theme="vs";this.yamlSchemaUri=""}#t;#i;#e;#s="";#n;#o;enableSplitViewResizingChanged(t){if(this.mode==="diff-editor"&&this.#i){this.#i.updateOptions({enableSplitViewResizing:t})}}languageChanged(t){if(this.mode==="editor"){Hct.editor.setModelLanguage(this.#t.getModel(),t)}else{this.#i.setModel({original:Hct.editor.createModel(this.value,t),modified:Hct.editor.createModel(this.modifiedValue,t)})}}modifiedValueChange(t){if(this.#i){this.#i.getModel().modified.setValue(t)}}modifiedValueReadonlyChanged(t){if(this.mode==="diff-editor"&&this.#i){this.#i.updateOptions({readOnly:t})}}renderSideBySideChanged(t){if(this.mode==="diff-editor"&&this.#i){this.#i.updateOptions({renderSideBySide:t})}}valueChange(t){if(this.mode==="editor"&&this.#t){this.#t.setValue(t)}else if(this.mode==="diff-editor"&&this.#i){this.#i.getModel().original.setValue(t)}}readonlyChanged(t){if(this.mode==="editor"&&this.#t){this.#t.updateOptions({readOnly:t??false})}if(this.mode==="diff-editor"&&this.#i){this.#i.updateOptions({originalEditable:!(t??true)})}}themeChanged(t){if(this.mode==="editor"){this.#t.updateOptions({theme:t})}else{this.#i.updateOptions({theme:t})}}yamlSchemaUriChange(t){if(this.language!=="yaml"){return}this.#s=`ch-editor-${Lat++}`;if(t){Sat(Hct,{enableSchemaRequest:true,format:true,schemas:this.#r()})}else{Sat(Hct,{enableSchemaRequest:true,format:true,schemas:[]})}this.#t.setModel(Hct.editor.createModel(this.value,this.language,Hct.Uri.parse(`file:///${this.#s}.txt`)))}#r=()=>this.mode==="editor"?[{fileMatch:[`**/${this.#s}.*`],uri:this.yamlSchemaUri}]:[{fileMatch:[`**/${this.#s}.*`],uri:this.yamlSchemaUri},{fileMatch:[`**/${this.#s}-modified.*`],uri:this.yamlSchemaUri}];#h=()=>({automaticLayout:true,mouseWheelScrollSensitivity:4,mouseWheelZoom:true,theme:this.theme,tabSize:2});#c(){const t=Hct.editor.createModel(this.value,this.language,Hct.Uri.parse(`file:///${this.#s}.txt`));this.#t=Hct.editor.create(this.#n,{...this.#h(),readOnly:this.readonly??false,model:t})}#a(){this.#i=Hct.editor.createDiffEditor(this.#n,{...this.#h(),enableSplitViewResizing:this.enableSplitViewResizing,renderSideBySide:this.renderSideBySide,originalEditable:!(this.readonly??true),readOnly:this.modifiedValueReadonly});this.#i.setModel({original:Hct.editor.createModel(this.value,this.language,Hct.Uri.parse(`file:///${this.#s}.txt`)),modified:Hct.editor.createModel(this.modifiedValue,this.language,Hct.Uri.parse(`file:///${this.#s}-modified.txt`))})}#l(){if(this.language==="yaml"&&!!this.yamlSchemaUri){Sat(Hct,{enableSchemaRequest:true,format:true,schemas:this.#r()})}}connectedCallback(){this.#s=`ch-editor-${Lat++}`}componentDidLoad(){this.#l();if(this.mode==="editor"){this.#c()}else{this.#a()}this.#e=new ResizeObserver((t=>{const i=t[0].contentRect;(this.#t??this.#i).layout({width:i.width,height:i.height})}));this.#e.observe(this.#o)}render(){return i(e,{key:"85c816e61b8dd676b849a12bc00c7be2e7786cbc"},i("div",{key:"f86832000cfb3c3602d82d3fbe7f8ac28ef36647",class:"ch-code-editor-absolute-content",ref:t=>this.#o=t},i("div",{key:"8dcf063c267dd1759b95b75ea4f9b479b53fb772",ref:t=>this.#n=t})))}static get watchers(){return{enableSplitViewResizing:["enableSplitViewResizingChanged"],language:["languageChanged"],modifiedValue:["modifiedValueChange"],modifiedValueReadonly:["modifiedValueReadonlyChanged"],renderSideBySide:["renderSideBySideChanged"],value:["valueChange"],readonly:["readonlyChanged"],theme:["themeChanged"],yamlSchemaUri:["yamlSchemaUriChange"]}}};Rat.style=Iat;export{Rat as C,bZ as h,pq as q};
//# sourceMappingURL=p-edf73e81.js.map