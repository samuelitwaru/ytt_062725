import{r as t,c as s,h as i,H as e,g as r}from"./p-f2da1e38.js";const h=/%/g,n=/^\d+(dip)?$/,o=/^\d+(%)?$/,c=class{constructor(i){t(this,i),this.intersectionUpdate=s(this,"intersectionUpdate",7),this.defaultThreshold=[0],this.rootMarginString=""}checkValidDipValue(t){return n.test(t)?this.convertDipToPxValue(t):"0px"}checkValidPercentValue(t){return o.test(t)?t:"0px"}convertDipToPxValue(t){return t.replace("dip","px").split(" ").join("")}convertThresholdValueToNumber(t){return o.test(t)?Number(t.replace(h,""))/100:0}parseThreshold(t){if(!t)return[0];const s=[];return t.split(",").forEach(t=>{const i=this.convertThresholdValueToNumber(t);i<=1&&s.push(i)}),s}setIntersectionObserver(){this.observer=new IntersectionObserver(t=>{const s=t[0];this.intersectionUpdate.emit({boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time})},{root:this.rootElement,rootMargin:this.rootMarginString,threshold:this.defaultThreshold}),this.observer.observe(this.element)}setIntersectionObserverOptionsFromProperties(){this.root&&(this.rootElement=document.getElementById(this.root)),this.rootMarginString=[this.validatePosition(this.topMargin),this.validatePosition(this.leftMargin),this.validatePosition(this.bottomMargin),this.validatePosition(this.rightMargin)].join(" "),this.defaultThreshold=this.parseThreshold(this.threshold)}validatePosition(t){return t&&t.endsWith("dip")?this.checkValidDipValue(t):this.checkValidPercentValue(t)}componentDidLoad(){this.setIntersectionObserverOptionsFromProperties(),this.setIntersectionObserver()}disconnectedCallback(){this.observer&&(this.observer.disconnect(),this.observer=void 0)}render(){return i(e,{class:{[this.cssClass]:!!this.cssClass}},i("slot",{name:"content"}))}get element(){return r(this)}};c.style=":host{display:block;height:100%;width:100%}";export{c as ch_intersection_observer}