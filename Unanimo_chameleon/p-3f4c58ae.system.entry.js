System.register(["./p-62fc4e49.system.js"],(function(t){"use strict";var i,n,s;return{setters:[function(t){i=t.r;n=t.h;s=t.H}],execute:function(){function e(t){if(t.OnPaginationFirst){t.OnPaginationFirst()}else if(t.usePaging){t.changeGridPage("FIRST")}}function r(t){if(t.OnPaginationPrevious){t.OnPaginationPrevious()}else if(t.usePaging){t.changeGridPage("PREV")}}function o(t){if(t.OnPaginationNext){t.OnPaginationNext()}else if(t.usePaging){t.changeGridPage("NEXT")}}function a(t){if(t.OnPaginationLast){t.OnPaginationLast()}else if(t.usePaging){t.changeGridPage("LAST")}}function h(t,i){if(i===1){t.changeGridPage("FIRST")}else{t.eof=0;t.firstRecordOnPage=(t.pageSize*(i-1)-t.pageSize).toString();t.changeGridPage("NEXT")}}function c(t){t.ParentObject.refreshGrid(t.ControlName)}function u(t,i,n){var s=t.getColumnByHtmlName(i);t.setSort(s.index,n!=="desc")}var f=function(){function t(){}t.load=function(t,i){var n;var s;this.grid=t;this.state=i!==null&&i!==void 0?i:{};(n=(s=this.state).Columns)!==null&&n!==void 0?n:s.Columns=[];this.loadLocal();this.apply()};t.setColumnSort=function(t,i){this.state.SortColumnName=t;this.state.SortDirection=i};t.setColumnHidden=function(t,i){this.getColumn(t).Hidden=i;this.saveLocal()};t.setColumnSize=function(t,i){this.getColumn(t).Size=i;this.saveLocal()};t.setColumnFreeze=function(t,i){this.getColumn(t).Freeze=i;this.saveLocal()};t.setColumnOrder=function(t,i){this.getColumn(t).Order=i;this.saveLocal()};t.setColumnFilterEqual=function(t,i){this.getColumnFilter(t).Equal=i;this.updateIsFiltering(t)};t.setColumnFilterLess=function(t,i){this.getColumnFilter(t).Less=i;this.updateIsFiltering(t)};t.setColumnFilterGreater=function(t,i){this.getColumnFilter(t).Greater=i;this.updateIsFiltering(t)};t.apply=function(){var t=this;var i,n;var s=this.grid.getColumnByHtmlName(((i=this.state.SortColumnName)!==null&&i!==void 0?i:"").toUpperCase());if(s){s.SortDirection=this.state.SortDirection}(n=this.state.Columns)===null||n===void 0?void 0:n.forEach((function(i){var n,s,e,r,o,a;var h=t.grid.getColumnByHtmlName(i.Name.toUpperCase());if(h){if(typeof i.Hidden==="boolean"){h.Hidden=i.Hidden?-1:0}if(i.Size){h.Size="length";h.SizeLength=i.Size}if(i.Order){h.order=i.Order}h.filterEqual=(s=((n=i.Filter)!==null&&n!==void 0?n:{}).Equal)!==null&&s!==void 0?s:h.filterEqual;h.filterLess=(r=((e=i.Filter)!==null&&e!==void 0?e:{}).Less)!==null&&r!==void 0?r:h.filterLess;h.filterGreater=(a=((o=i.Filter)!==null&&o!==void 0?o:{}).Greater)!==null&&a!==void 0?a:h.filterGreater;t.updateIsFiltering(h.htmlName)}}))};t.loadLocal=function(){var t=this;this.grid.columns.forEach((function(i){var n;var s=(n=localStorage.getItem("".concat(t.grid.ControlName,"-").concat(i.htmlName)))===null||n===void 0?void 0:n.split("|");if(s){if(s[0]!==""){t.getColumn(i.htmlName).Hidden=s[0]==="true"}if(s[1]!==""){t.getColumn(i.htmlName).Size=s[1]}if(s[2]!==""){t.getColumn(i.htmlName).Order=parseInt(s[2])}if(s[3]!==""){t.getColumn(i.htmlName).Freeze=s[3]}}}))};t.saveLocal=function(){var t=this;this.state.Columns.forEach((function(i){localStorage.setItem("".concat(t.grid.ControlName,"-").concat(i.Name),[i.Hidden,i.Size,i.Order,i.Freeze].join("|"))}))};t.getColumn=function(t){var i=this.state.Columns.find((function(i){return i.Name.localeCompare(t)===0}));if(!i){i={Name:t};this.state.Columns.push(i)}return i};t.getColumnFilter=function(t){var i=this.getColumn(t);i.Filter||(i.Filter={});return i.Filter};t.updateIsFiltering=function(t){var i=this.grid.getColumnByHtmlName(t);i.isFiltering=!!(i.filterEqual||i.filterGreater||i.filterGreater)};return t}();var l="gx-grid-chameleon{display:contents}";var v=l;var d=t("gx_grid_chameleon",function(){function t(t){i(this,t);this.grid=undefined;this.gridTimestamp=undefined;this.state=undefined}t.prototype.controlStateHandler=function(){this.loadState()};t.prototype.componentWillLoad=function(){this.loadState()};t.prototype.componentWillRender=function(){this.defineColumnRender()};t.prototype.componentDidLoad=function(){this.setCurrentRow();this.notifyResizePopup()};t.prototype.selectionChangedHandler=function(t){var i=this.getRowIndexByGxId(t.detail.rowsId[0]);if(i>=0){this.grid.execC2VFunctions();this.grid.selectRow(i)}};t.prototype.cellClickedHandler=function(t){var i=this.getRowIndexByGxId(t.detail.rowId);var n=parseInt(t.detail.cellId);if(i>=0){this.grid.executeEvent(n,i)}};t.prototype.navigateClickedHandler=function(t){switch(t.detail.type){case"first":e(this.grid);break;case"previous":r(this.grid);break;case"next":o(this.grid);break;case"last":a(this.grid);break;case"goto":h(this.grid,t.detail.page);break}};t.prototype.refreshClickedHandler=function(){c(this.grid)};t.prototype.columnHiddenChangedHandler=function(t){f.setColumnHidden(t.detail.columnId,t.detail.hidden)};t.prototype.columnSizeChangedHandler=function(t){f.setColumnSize(t.detail.columnId,t.detail.size)};t.prototype.columnFreezeChangedHandler=function(t){f.setColumnFreeze(t.detail.columnId,t.detail.freeze)};t.prototype.columnSortChangedHandler=function(t){f.setColumnSort(t.detail.columnId,t.detail.sortDirection);switch(this.grid.SortMode){case"client":u(this.grid,t.detail.columnId,t.detail.sortDirection);this.gridTimestamp=Date.now();break;case"server":c(this.grid);break}};t.prototype.columnOrderChangedHandler=function(t){f.setColumnOrder(t.detail.columnId,t.detail.order)};t.prototype.columnFilterChangedHandler=function(t){var i,n,s;var e=t.detail.column;e.filterEqual=(i=t.detail.equal)!==null&&i!==void 0?i:"";e.filterLess=(n=t.detail.less)!==null&&n!==void 0?n:"";e.filterGreater=(s=t.detail.greater)!==null&&s!==void 0?s:"";f.setColumnFilterEqual(e.htmlName,e.filterEqual);f.setColumnFilterLess(e.htmlName,e.filterLess);f.setColumnFilterGreater(e.htmlName,e.filterGreater);c(this.grid)};t.prototype.getColumnSize=function(t){var i;switch(t.Size){case"auto":i="auto";break;case"css":i="var(--".concat(t.SizeVariableName,", min-content)");break;case"length":i=t.SizeLength;break;case"max":i="max-content";break;case"min":i="min-content";break;case"minmax":i="minmax(".concat(t.SizeMinLength||"min-content",", ").concat(t.SizeMaxLength||"auto",")");break;default:i="min-content";break}return i||"min-content"};t.prototype.defineColumnRender=function(){var t=this.grid.properties;this.grid.columns.forEach((function(i,n){i.render=t.length===0&&i.visible||t.some((function(t){return t[n].visible}))}))};t.prototype.getRowIndexByGxId=function(t){return this.grid.rows.findIndex((function(i){return i.gxId===t}))};t.prototype.notifyResizePopup=function(){if(gx.popup.ispopup()){gx.fx.obs.notify("gx.onafterevent")}};t.prototype.setCurrentRow=function(){var t=this.grid.rows[0];if(t&&!gx.fn.currentGridRowImpl(this.grid.gxId)){gx.fn.setCurrentGridRow(this.grid.gxId,t.gxId)}};t.prototype.loadState=function(){f.load(this.grid,this.state)};t.prototype.renderTitle=function(){return n("h1",{slot:"header"},this.grid.header)};t.prototype.renderActionbar=function(t,i){var s=this.grid.ActionRefreshPosition===t,e=this.grid.ActionSettingsPosition===t;if(s||e){return n("ch-grid-actionbar",{slot:t,class:i},s&&this.renderActionRefresh(),e&&this.renderActionSettings())}};t.prototype.renderActionRefresh=function(){return n("ch-grid-action-refresh",{class:this.grid.ActionRefreshClass,title:this.grid.ActionRefreshTextPosition==="title"?gx.getMessage("GX_BtnRefresh"):""},this.grid.ActionRefreshTextPosition==="text"?gx.getMessage("GX_BtnRefresh"):"")};t.prototype.renderActionSettings=function(){return n("ch-grid-action-settings",{class:this.grid.ActionSettingsClass,title:this.grid.ActionSettingsTextPosition==="title"?gx.getMessage("GXM_Settings"):""},this.grid.ActionSettingsTextPosition==="text"?gx.getMessage("GXM_Settings"):"")};t.prototype.renderColumns=function(){var t=this;return n("ch-grid-columnset",{class:this.grid.ColumnsetClass},this.grid.columns.map((function(i){if(gx.lang.gxBoolean(i.render)){return n("ch-grid-column",{key:i.htmlName,columnId:i.htmlName,columnIconUrl:i.Icon,columnName:i.title,columnNamePosition:i.NamePosition,size:t.getColumnSize(i),order:i.order?i.order:null,displayObserverClass:i.gxColumnClass,class:"".concat(t.grid.ColumnClass," ").concat(i.HeaderClass," ").concat(i.isFiltering?"grid-column-filtering":""),hidden:i.Hidden===-1,hideable:i.Hideable===-1,resizable:i.Resizeable===-1,sortable:i.Sortable===-1,settingable:i.Filterable===-1,sortDirection:i.SortDirection},i.Filterable===-1&&t.renderColumnFilter(i))}})))};t.prototype.renderColumnFilter=function(t){return n("gx-grid-chameleon-column-filter",{key:t.htmlName,class:this.grid.ColumnFilterClass,column:t,equal:t.filterEqual,less:t.filterLess,greater:t.filterGreater,buttonResetText:this.grid.FilterButtonResetText,buttonApplyText:this.grid.FilterButtonApplyText,slot:"settings"})};t.prototype.renderRows=function(){var t=this;return this.grid.rows.map((function(i,s){var e="".concat(t.grid.RowClass," ").concat(t.grid.RowEvenClass);var r="".concat(t.grid.RowClass," ").concat(t.grid.RowOddClass);return n("ch-grid-row",{key:i.gxId,rowid:i.gxId,class:s%2===0?e:r},t.renderCells(i))}))};t.prototype.renderCells=function(t){var i=this;return t.gxProps.map((function(t,s){var e=i.grid.columns[s];if(gx.lang.gxBoolean(e.render)){return n("ch-grid-cell",{key:t[0],class:i.grid.CellClass,cellid:s,innerHTML:i.renderControl(e.gxControl,t)})}}))};t.prototype.renderControl=function(t,i){t.setProperties.apply(t,i);return t.getHtml()};t.prototype.renderPaginator=function(){var t;var i=!!this.grid.ParentObject["sub".concat(this.grid.ControlName,"_Recordcount")];var s=(t=this.grid.ParentObject["sub".concat(this.grid.ControlName,"_Recordcount")])!==null&&t!==void 0?t:0;var e=!this.grid.isLastPage();var r=Math.ceil((parseInt(this.grid.firstRecordOnPage)+1)/this.grid.pageSize);var o=Math.max(1,Math.ceil(s/this.grid.pageSize));return n("ch-paginator",{"has-next-page":i?null:e,"active-page":r,"total-pages":i?o:-1,class:this.grid.pagingBarClass,slot:"footer"},this.renderPaginatorNavigate("first",this.grid.pagingButtonFirstClass,gx.getMessage("GXM_first")),this.renderPaginatorNavigate("previous",this.grid.pagingButtonPreviousClass,gx.getMessage("GXM_previous")),this.grid.PaginatorPagesShow&&n("ch-paginator-pages",{maxSize:this.grid.PaginatorPagesMaxSize}),this.renderPaginatorNavigate("next",this.grid.pagingButtonNextClass,gx.getMessage("GXM_next")),this.renderPaginatorNavigate("last",this.grid.pagingButtonLastClass,gx.getMessage("GXM_last")))};t.prototype.renderPaginatorNavigate=function(t,i,s){var e=this.grid.PaginatorNavigationButtonTextPosition;return n("ch-paginator-navigate",{type:t,class:i,title:e==="title"?s:""},e==="text"?s:"")};t.prototype.renderPaginationInfo=function(){var t;var i=(t=this.grid.ParentObject["sub".concat(this.grid.ControlName,"_Recordcount")])!==null&&t!==void 0?t:0;var s=this.grid.PaginatorInfoEmptyTextMask;var e=0;var r=0;if(i>0){s=this.grid.PaginatorInfoTextMask;e=parseInt(this.grid.firstRecordOnPage)+1;r=Math.min(e+this.grid.pageSize-1,i)}var o={"record-count":i,"record-start":e,"record-end":r};var a=s.replace(/\{([^}]+)\}/g,(function(t,i){var n;return(n=o[i])!==null&&n!==void 0?n:i}));return n("div",{class:this.grid.PaginatorInfoClass,slot:"footer"},a)};t.prototype.render=function(){return n(s,{key:"8a4af56b1528d70f5f02a9fb23ca56b12aec049d"},n("ch-grid",{key:"745190f47349786fd70d2c68b23754e29a916ed1",class:this.grid.Class,rowSelectionMode:this.grid.gxAllowSelection?"single":"none",rowSelectedClass:this.grid.RowSelectedClass.trim(),rowHighlightedClass:this.grid.RowHighlightedClass.trim()},this.grid.header&&this.renderTitle(),this.renderActionbar("header",this.grid.ActionbarHeaderClass),this.renderActionbar("footer",this.grid.ActionbarFooterClass),this.renderColumns(),this.renderRows(),this.grid.PaginatorShow&&this.grid.PaginatorInfoShow&&this.grid.pageSize>0&&this.renderPaginationInfo(),this.grid.PaginatorShow&&this.grid.pageSize>0&&this.renderPaginator()))};Object.defineProperty(t,"watchers",{get:function(){return{state:["controlStateHandler"]}},enumerable:false,configurable:true});return t}());d.style=v}}}));
//# sourceMappingURL=p-3f4c58ae.system.entry.js.map